!function(e){function t(t){for(var r,c,s=t[0],u=t[1],l=t[2],d=t[3]||[],p=0,h=[];p<s.length;p++)c=s[p],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&h.push(a[c][0]),a[c]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(f&&f(t),o.push.apply(o,d);h.length;)h.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,u=1;u<n.length;u++){var l=n[u];0!==a[l]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return 0===i.length&&(o.forEach((function(e){if(void 0===a[e]){a[e]=null;var t=document.createElement("link");s.nc&&t.setAttribute("nonce",s.nc),t.rel="prefetch",t.as="script",t.href=c(e),document.head.appendChild(t)}})),o.length=0),e}var r={},a={4:0},i=[],o=[];function c(e){return s.p+"static/education."+({5:"calls-desktop",7:"vendors~sentry"}[e]||e)+"."+{1:"985e5285a46827376288",3:"67823baa48040e65aee5",5:"edd2a5f5bc7559672c1d",7:"f3f0de2ed6ad896a7631",8:"11f15ec6c3acb26800c0",9:"2a41810c0161c5447888",10:"05d209050d97f670d249",11:"133b3d046b0e9c7470c7",12:"6deeb7b2d891be7a3159",13:"c372a6bc152074a0e576",14:"5909b8920fbd96ef2abd",15:"69a3c44c2b99b22175b0",16:"ed440577de6e1269c2e1"}[e]+".chunk.js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=a[e]=[t,r]}));t.push(n[2]=r);var i,o=document.createElement("script");o.charset="utf-8",o.timeout=120,s.nc&&o.setAttribute("nonce",s.nc),o.src=c(e);var u=new Error;i=function(t){o.onerror=o.onload=null,clearTimeout(l);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+r+": "+i+")",u.name="ChunkLoadError",u.type=r,u.request=i,n[1](u)}a[e]=void 0}};var l=setTimeout((function(){i({type:"timeout",target:o})}),12e4);o.onerror=o.onload=i,document.head.appendChild(o)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="./",s.oe=function(e){throw console.error(e),e};var u=window.webpackJsonp=window.webpackJsonp||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var f=l,p=(i.push([814,0,2]),n());t([[],{},0,[0,1,8,3,10,11,9,13,15]])}([,function(e,t,n){"use strict";n.d(t,"ib",(function(){return ye})),n.d(t,"Hb",(function(){return Me})),n.d(t,"T",(function(){return Ge})),n.d(t,"W",(function(){return rt})),n.d(t,"U",(function(){return ft})),n.d(t,"Y",(function(){return ht})),n.d(t,"Z",(function(){return vt})),n.d(t,"vb",(function(){return _t})),n.d(t,"ub",(function(){return ne})),n.d(t,"u",(function(){return Ot})),n.d(t,"yb",(function(){return Ct})),n.d(t,"zb",(function(){return jt})),n.d(t,"G",(function(){return Lt})),n.d(t,"eb",(function(){return Ft})),n.d(t,"e",(function(){return bn})),n.d(t,"b",(function(){return Sn})),n.d(t,"c",(function(){return Dn})),n.d(t,"kb",(function(){return xn})),n.d(t,"rb",(function(){return Ln})),n.d(t,"R",(function(){return $n})),n.d(t,"Sb",(function(){return er})),n.d(t,"S",(function(){return Gn})),n.d(t,"P",(function(){return nr})),n.d(t,"Q",(function(){return ir})),n.d(t,"O",(function(){return ur})),n.d(t,"j",(function(){return pn})),n.d(t,"J",(function(){return dr})),n.d(t,"l",(function(){return pr})),n.d(t,"q",(function(){return mr})),n.d(t,"n",(function(){return br})),n.d(t,"D",(function(){return wr})),n.d(t,"C",(function(){return Sr})),n.d(t,"B",(function(){return kr})),n.d(t,"M",(function(){return Tr})),n.d(t,"m",(function(){return ea})),n.d(t,"hb",(function(){return ta})),n.d(t,"pb",(function(){return gr})),n.d(t,"F",(function(){return ia})),n.d(t,"v",(function(){return oa})),n.d(t,"A",(function(){return ua})),n.d(t,"h",(function(){return ra})),n.d(t,"lb",(function(){return ya})),n.d(t,"Ab",(function(){return wa})),n.d(t,"Bb",(function(){return Sa})),n.d(t,"tb",(function(){return ln})),n.d(t,"fb",(function(){return Ia})),n.d(t,"L",(function(){return Pa})),n.d(t,"r",(function(){return kt})),n.d(t,"Gb",(function(){return xa})),n.d(t,"ob",(function(){return st})),n.d(t,"sb",(function(){return Ra})),n.d(t,"cb",(function(){return Ma})),n.d(t,"i",(function(){return Ua})),n.d(t,"N",(function(){return za})),n.d(t,"x",(function(){return Wa})),n.d(t,"w",(function(){return qa})),n.d(t,"y",(function(){return Ka})),n.d(t,"z",(function(){return Ya})),n.d(t,"xb",(function(){return Za})),n.d(t,"K",(function(){return $a})),n.d(t,"Eb",(function(){return ti})),n.d(t,"gb",(function(){return ni})),n.d(t,"o",(function(){return di})),n.d(t,"mb",(function(){return ki})),n.d(t,"nb",(function(){return _i})),n.d(t,"s",(function(){return xi})),n.d(t,"t",(function(){return Ri})),n.d(t,"Cb",(function(){return Xe})),n.d(t,"bb",(function(){return Li})),n.d(t,"X",(function(){return Hi})),n.d(t,"V",(function(){return Yi})),n.d(t,"ab",(function(){return Ji})),n.d(t,"f",(function(){return eo})),n.d(t,"d",(function(){return to})),n.d(t,"p",(function(){return oo})),n.d(t,"g",(function(){return z})),n.d(t,"jb",(function(){return G})),n.d(t,"Jb",(function(){return q})),n.d(t,"Fb",(function(){return tt})),n.d(t,"E",(function(){return et})),n.d(t,"Db",(function(){return $e})),n.d(t,"k",(function(){return pt})),n.d(t,"wb",(function(){return Ht})),n.d(t,"Rb",(function(){return uo})),n.d(t,"Tb",(function(){return $})),n.d(t,"Qb",(function(){return Fe})),n.d(t,"Pb",(function(){return Ve})),n.d(t,"Ob",(function(){return rr})),n.d(t,"Lb",(function(){return k})),n.d(t,"Kb",(function(){return lo})),n.d(t,"Nb",(function(){return M})),n.d(t,"a",(function(){return N})),n.d(t,"H",(function(){return x})),n.d(t,"db",(function(){return I})),n.d(t,"I",(function(){return B})),n.d(t,"Mb",(function(){return F})),n.d(t,"Ib",(function(){return xe})),n.d(t,"qb",(function(){return Ne}));n(433);var r=n(6),a=n.n(r),i=n(12),o=n.n(i),c=n(45),s=n.n(c),u=n(30),l=n.n(u),d=n(31),f=n.n(d),p=n(11),h=n.n(p),m=n(33),v=n.n(m),g=n(68),b=n.n(g),_=n(2),y=n.n(_),E=n(4),O=n(0),w=n.n(O),C=n(57),S=n.n(C);function A(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n)switch(S()(n)){case"string":e.push(n);break;case"object":for(var r in n)n[r]&&e.push(r);break;default:e.push("".concat(n))}}return e.length>1?e:e[0]||""}function k(){var e=A.apply(void 0,arguments);return"string"==typeof e?e:e.join(" ")}var j,T=n(13);!function(e){e.IOS="ios",e.UNKNOWN=""}(j||(j={}));var I,P={};function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(P[e])return P[e];var t=null,n=j.UNKNOWN,r=Object(T.f)(e),a=r.isIOS,i=r.iosMajor,o=r.iosMinor;a&&(n=j.IOS,t={major:i,minor:o});var c={userAgent:e,system:n,systemVersion:t};return P[e]=c,c}!function(e){e.ANDROID="android",e.IOS="ios",e.VKCOM="vkcom"}(I||(I={}));var N=I.ANDROID,x=I.IOS,R=I.VKCOM;function M(e){return e||(e=D()),"ios"===e.system?x:N}var L=M(),B=L===N;function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M();return"".concat(e," ").concat(e,"--").concat(t)}var H=Boolean("undefined"!=typeof window&&window.__isVkuiTesting),V={supported:!1,name:null},U={supported:!1,name:null};T.b&&!H&&("undefined"!=typeof AnimationEvent?(V.supported=!0,V.name="animationend"):"undefined"!=typeof WebKitAnimationEvent&&(V.supported=!0,V.name="webkitAnimationEnd"),"undefined"!=typeof TransitionEvent?(U.supported=!0,U.name="transitionend"):"undefined"!=typeof WebKitTransitionEvent&&(U.supported=!0,U.name="webkitTransitionEnd"));var z,G,W,q,K=n(49),Y=Object(O.createContext)({platform:null,userAgent:"",browserInfo:void 0}),Z=n(26),Q=n.n(Z);!function(e){e.DARK="dark",e.LIGHT="light"}(z||(z={})),function(e){e.DEPRECATED_CLIENT_LIGHT="client_light",e.DEPRECATED_CLIENT_DARK="client_dark",e.BRIGHT_LIGHT="bright_light",e.SPACE_GRAY="space_gray",e.VKCOM="vkcom"}(G||(G={})),function(e){e.VKCOM_LIGHT="vkcom_light",e.VKCOM_DARK="vkcom_dark"}(W||(W={})),function(e){e.VKAPPS="vkapps",e.INTERNAL="internal"}(q||(q={}));var J={webviewType:q.VKAPPS,isWebView:Q.a.isWebView(),scheme:G.BRIGHT_LIGHT,transitionMotionEnabled:!0,platform:M()},X=Object(O.createContext)(J);function $(e){return function(t){var n=w.a.useContext(Y),r=w.a.useContext(X).platform;return Object(E.a)(e,a()({},t,{platform:n.platform||r}))}}function ee(e,t,n){return function(r){var i=w.a.useContext(t);return Object(E.a)(e,a()({},r,y()({},n,i)))}}var te=w.a.createContext({colRef:null,animate:!0}),ne=function(e){var t=e.children,n=e.width,r=e.maxWidth,i=e.minWidth,c=e.spaced,u=e.animate,l=e.fixed,d=e.style,f=o()(e,["children","width","maxWidth","minWidth","spaced","animate","fixed","style"]),p=Object(O.useRef)(),h=Object(O.useMemo)((function(){return{colRef:p,animate:u}}),[p,u]);return Object(E.a)("div",a()({},f,{style:s()(s()({},d),{},{width:n,maxWidth:r,minWidth:i}),ref:p,vkuiClass:A("SplitCol",{"SplitCol--spaced":c,"SplitCol--fixed":l})}),Object(E.a)(te.Provider,{value:h},l?Object(E.a)("div",{vkuiClass:"SplitCol__fixedInner"},t):t))};ne.defaultProps={animate:!1};var re=n(70),ae=Object(O.createContext)({portalRoot:null}),ie=function(e){var t=e.children,n=e.className,r=Object(O.useContext)(ae),a=r.portalRoot;return r.embedded&&a?Object(re.createPortal)(Object(E.a)("div",{className:n},t),a):Object(E.a)(O.Fragment,null,t)};function oe(e){return"function"==typeof e}function ce(e){var t=e.toFixed();return 1===t.length?"0"+t:t}function se(e){return void 0!==e&&!1!==e&&null!==e&&""!==e}function ue(e){return"string"==typeof e||"number"==typeof e}function le(e,t){t&&("function"==typeof t?t(e):t.current=e)}function de(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=null;return{get current(){return r},set current(e){r=e,t.forEach((function(t){return le(e,t)}))}}}var fe=function(){};function pe(e,t,n){if("function"!=typeof e.CustomEvent){var r=n||{bubbles:!1,cancelable:!1,detail:null},a=document.createEvent("CustomEvent");return a.initCustomEvent(t,r.bubbles,r.cancelable,r.detail),a}return new e.CustomEvent(t,n)}function he(e){var t="";return O.Children.map(e,(function(e){"string"==typeof e&&(t+=e)})),t}var me=function(e,t,n){return Math.max(t,Math.min(e,n))};var ve=Object(O.createContext)({getScroll:function(){return{x:0,y:0}},scrollTo:fe});function ge(e,t){return e.nav||e.id}function be(e){var t={};return function(n){t[n]||(console.error("[VKUI/".concat(e,"] ").concat(n)),t[n]=!0)}}be("Root");var _e=function(e){v()(n,e);var t=b()(n);function n(e){var r;return l()(this,n),r=t.call(this,e),y()(h()(r),"animationFinishTimeout",void 0),y()(h()(r),"viewNodes",{}),y()(h()(r),"onAnimationEnd",(function(e){if(!e||["vkui-root-android-animation-hide-back","vkui-root-android-animation-show-forward","vkui-root-ios-animation-hide-back","vkui-root-ios-animation-show-forward"].includes(e.animationName)){var t=r.state.isBack,n=r.state.prevView,a=r.state.nextView;r.setState({activeView:a,prevView:null,nextView:null,visibleViews:[a],transition:!1,isBack:void 0},(function(){r.props.scroll.scrollTo(0,t?r.state.scrolls[r.state.activeView]:0),r.props.onTransition&&r.props.onTransition({isBack:t,from:n,to:a})}))}})),r.state={activeView:e.activeView,prevView:null,nextView:null,visibleViews:[e.activeView],isBack:void 0,scrolls:{},transition:!1},r}return f()(n,[{key:"componentDidUpdate",value:function(e,t){var n=this;if(this.props.popout&&!e.popout&&this.blurActiveElement(),this.props.activeView!==e.activeView){var r=this.props.scroll.getScroll().y,a=[].concat(e.children).map((function(e){return ge(e.props)})).find((function(t){return t===e.activeView||t===n.props.activeView}))===this.props.activeView;this.blurActiveElement();var i=this.props.activeView,o=e.activeView;this.setState({scrolls:s()(s()({},this.state.scrolls),{},y()({},e.activeView,r)),transition:!0,activeView:null,nextView:i,prevView:o,visibleViews:[i,o],isBack:a})}if(!t.transition&&this.state.transition){var c=this.viewNodes[this.state.prevView],u=this.viewNodes[this.state.nextView],l=function(e,t){var n=e.querySelector("[data-vkui-active-panel=true]");n&&(n.scrollTop=t)};l(c,this.state.scrolls[this.state.prevView]),this.state.isBack&&l(u,this.state.scrolls[this.state.nextView]),this.waitAnimationFinish(this.state.isBack?c:u,this.onAnimationEnd)}}},{key:"shouldDisableTransitionMotion",value:function(){return!1===this.props.configProvider.transitionMotionEnabled||!this.props.splitCol.animate}},{key:"waitAnimationFinish",value:function(e,t){this.shouldDisableTransitionMotion()?t():V.supported?(e.removeEventListener(V.name,t),e.addEventListener(V.name,t)):(clearTimeout(this.animationFinishTimeout),this.animationFinishTimeout=setTimeout(t.bind(this),this.props.platform===N||this.props.platform===R?300:600))}},{key:"blurActiveElement",value:function(){T.b&&this.document.activeElement&&this.document.activeElement.blur()}},{key:"render",value:function(){var e=this,t=this.props,n=t.popout,r=t.modal,i=t.platform,c=(t.splitCol,t.configProvider,t.activeView,t.onTransition,t.window,t.document,t.scroll,t.nav,o()(t,["popout","modal","platform","splitCol","configProvider","activeView","onTransition","window","document","scroll","nav"])),s=this.state,u=s.transition,l=s.isBack,d=s.prevView,f=s.activeView,p=s.nextView,h=w.a.Children.toArray(this.props.children).filter((function(t){return e.state.visibleViews.includes(ge(t.props))})),m=F("Root",i),v=this.shouldDisableTransitionMotion();return Object(E.a)("div",a()({},c,{vkuiClass:A(m,{"Root--transition":!v&&u,"Root--no-motion":v})}),h.map((function(t){var n=ge(t.props);return Object(E.a)("div",{key:n,ref:function(t){return e.viewNodes[n]=t},vkuiClass:A("Root__view",{"Root__view--hide-back":n===d&&l,"Root__view--hide-forward":n===d&&!l,"Root__view--show-back":n===p&&l,"Root__view--show-forward":n===p&&!l,"Root__view--active":n===f})},t)})),Object(E.a)(ie,null,!!n&&Object(E.a)("div",{vkuiClass:"Root__popout"},n),!!r&&Object(E.a)("div",{vkuiClass:"Root__modal"},r)))}},{key:"document",get:function(){return this.props.document}}]),n}(O.Component);y()(_e,"defaultProps",{popout:null});var ye=ee(ee(ee($(Object(K.e)(_e)),te,"splitCol"),X,"configProvider"),ve,"scroll"),Ee=function(e){return null!=e.clientX?e.clientX:e.changedTouches&&e.changedTouches[0].clientX},Oe=function(e){return null!=e.clientY?e.clientY:e.changedTouches&&e.changedTouches[0].clientY},we="undefined"!=typeof window&&"ontouchstart"in window;function Ce(e,t,n,r){if(r||e<0)return e;var a=e*n;return a*t/(a+t)}var Se=we?["touchstart","touchmove","touchend","touchcancel"]:["mousedown","mousemove","mouseup","mouseleave"],Ae=function(e){v()(n,e);var t=b()(n);function n(){var e;l()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),y()(h()(e),"didSlide",!1),y()(h()(e),"gesture",{}),y()(h()(e),"container",void 0),y()(h()(e),"onEnter",(function(t){e.props.onEnter&&e.props.onEnter(t)})),y()(h()(e),"onLeave",(function(t){e.props.onLeave&&e.props.onLeave(t)})),y()(h()(e),"onStart",(function(t){e.gesture={startX:Ee(t),startY:Oe(t),startT:new Date,isPressed:!0};var n=s()(s()({},e.gesture),{},{originalEvent:t});e.props.onStart&&e.props.onStart(n),e.props.onStartX&&e.props.onStartX(n),e.props.onStartY&&e.props.onStartY(n),!we&&e.subscribe(e.document)})),y()(h()(e),"onMove",(function(t){var n=e.gesture,r=n.isPressed,a=n.isX,i=n.isY,o=n.startX,c=n.startY;if(r){var u=Ee(t)-o,l=Oe(t)-c,d=Math.abs(u),f=Math.abs(l);if(t.touches&&t.touches.length>1)return e.onEnd(t);if(!a&&!i){var p=d>=5&&d>f,h=f>=5&&f>d,m=p&&!!e.props.onMoveX||!!e.props.onMove,v=h&&!!e.props.onMoveY||!!e.props.onMove;e.gesture.isY=h,e.gesture.isX=p,e.gesture.isSlideX=m,e.gesture.isSlideY=v,e.gesture.isSlide=m||v}if(e.gesture.isSlide){e.gesture.shiftX=u,e.gesture.shiftY=l,e.gesture.shiftXAbs=d,e.gesture.shiftYAbs=f;var g=s()(s()({},e.gesture),{},{originalEvent:t});e.props.onMove&&e.props.onMove(g),e.gesture.isSlideX&&e.props.onMoveX&&e.props.onMoveX(g),e.gesture.isSlideY&&e.props.onMoveY&&e.props.onMoveY(g)}}})),y()(h()(e),"onEnd",(function(t){var n=e.gesture,r=n.isPressed,a=n.isSlide,i=n.isSlideX,o=n.isSlideY;if(r){var c=s()(s()({},e.gesture),{},{originalEvent:t});e.props.onEnd&&e.props.onEnd(c),o&&e.props.onEndY&&e.props.onEndY(c),i&&e.props.onEndX&&e.props.onEndX(c)}e.didSlide=a,e.gesture={},"touchend"!==t.type&&"touchcancel"!==t.type||e.onLeave(t),!we&&e.unsubscribe()})),y()(h()(e),"unsubscribe",fe),y()(h()(e),"onDragStart",(function(e){var t=e.target;"A"!==t.tagName&&"IMG"!==t.tagName||e.preventDefault()})),y()(h()(e),"postGestureClick",(function(t){var n=e.props,r=n.onClickCapture,a=n.noSlideClick;if(!e.didSlide)return r&&r(t);"A"===t.target.tagName&&t.preventDefault(),a?t.stopPropagation():r&&r(t),e.didSlide=!1})),y()(h()(e),"getRef",(function(t){e.container=t,le(t,e.props.getRootRef)})),e}return f()(n,[{key:"componentDidMount",value:function(){T.b&&(this.container.addEventListener(Se[0],this.onStart,{capture:this.props.useCapture,passive:!1}),we&&this.subscribe(this.container),this.container.addEventListener("mouseenter",this.onEnter,{capture:this.props.useCapture,passive:!0}),this.container.addEventListener("mouseleave",this.onLeave,{capture:this.props.useCapture,passive:!0}))}},{key:"componentWillUnmount",value:function(){this.container.removeEventListener(Se[0],this.onStart),this.unsubscribe(),this.container.removeEventListener("mouseenter",this.onEnter),this.container.removeEventListener("mouseleave",this.onLeave)}},{key:"subscribe",value:function(e){var t=this;this.unsubscribe();var n={capture:this.props.useCapture,passive:!1};e.addEventListener(Se[1],this.onMove,n),e.addEventListener(Se[2],this.onEnd,n),e.addEventListener(Se[3],this.onEnd,n),this.unsubscribe=function(){e.removeEventListener(Se[1],t.onMove,n),e.removeEventListener(Se[2],t.onEnd,n),e.removeEventListener(Se[3],t.onEnd,n),t.unsubscribe=fe}}},{key:"render",value:function(){var e=this.props,t=(e.onStart,e.onStartX,e.onStartY,e.onMove,e.onMoveX,e.onMoveY,e.onLeave,e.onEnter,e.onEnd,e.onEndX,e.onEndY,e.useCapture,e.Component),n=(e.getRootRef,e.noSlideClick,e.window,e.document,o()(e,["onStart","onStartX","onStartY","onMove","onMoveX","onMoveY","onLeave","onEnter","onEnd","onEndX","onEndY","useCapture","Component","getRootRef","noSlideClick","window","document"]));return Object(E.a)(t,a()({},n,{onDragStart:this.onDragStart,onClickCapture:this.postGestureClick,ref:this.getRef}),this.props.children)}},{key:"document",get:function(){return this.props.document}}]),n}(O.Component);y()(Ae,"defaultProps",{Component:"div",children:"",useCapture:!1,noSlideClick:!1});var ke=Object(K.e)(Ae);function je(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=s()({},e);return t.forEach((function(e){return delete n[e]})),n}var Te;be("View");!function(e){e[e.fail=1]="fail",e[e.success=2]="success"}(Te||(Te={}));var Ie={},Pe=["input","textarea"],De=function(e){v()(n,e);var t=b()(n);function n(e){var r;return l()(this,n),r=t.call(this,e),y()(h()(r),"transitionFinishTimeout",void 0),y()(h()(r),"animationFinishTimeout",void 0),y()(h()(r),"panelNodes",{}),y()(h()(r),"transitionEndHandler",(function(e){if(!e||["vkui-animation-ios-next-forward","vkui-animation-ios-prev-back","vkui-animation-view-next-forward","vkui-animation-view-prev-back"].includes(e.animationName)){var t=r.props.activePanel,n=r.state.isBack,a=r.state.prevPanel;r.document.dispatchEvent(pe(r.window,"VKUI:View:transition-end")),r.setState({prevPanel:null,nextPanel:null,visiblePanels:[t],activePanel:t,animated:!1,isBack:void 0,scrolls:n?je(r.state.scrolls,[a]):r.state.scrolls},(function(){n&&r.props.scroll.scrollTo(0,r.state.scrolls[t]),r.props.onTransition&&r.props.onTransition({isBack:n,from:a,to:t})}))}})),y()(h()(r),"swipingBackTransitionEndHandler",(function(e){var t=e.target;if(e.propertyName.includes("transform")&&t===r.pickPanel(r.state.swipeBackNextPanel))switch(r.state.swipeBackResult){case Te.fail:r.onSwipeBackCancel();break;case Te.success:r.onSwipeBackSuccess()}})),y()(h()(r),"onMoveX",(function(e){var t=e.originalEvent.target;if(!t||"string"!=typeof t.tagName||!Pe.includes(t.tagName.toLowerCase())){var n=r.props,a=n.platform,i=n.configProvider;if(a!==x||i.isWebView||!(e.startX<=70||e.startX>=r.window.innerWidth-70)||r.state.browserSwipe||r.setState({browserSwipe:!0}),a===x&&i.isWebView&&r.props.onSwipeBack){if(r.state.animated&&e.startX<=70)return;var o;if(e.startX<=70&&!r.state.swipingBack&&r.props.history.length>1&&r.setState({swipingBack:!0,swipebackStartX:e.startX,startT:e.startT,swipeBackPrevPanel:r.state.activePanel,swipeBackNextPanel:r.props.history.slice(-2)[0],scrolls:s()(s()({},r.state.scrolls),{},y()({},r.state.activePanel,r.props.scroll.getScroll().y))}),r.state.swipingBack)o=e.shiftX<0?0:e.shiftX>r.window.innerWidth-r.state.swipebackStartX?r.window.innerWidth:e.shiftX,r.setState({swipeBackShift:o})}}})),y()(h()(r),"onEnd",(function(){if(r.state.swipingBack){var e=r.state.swipeBackShift/(Date.now()-r.state.startT.getTime())*1e3;0===r.state.swipeBackShift?r.onSwipeBackCancel():r.state.swipeBackShift>=r.window.innerWidth?r.onSwipeBackSuccess():e>250||r.state.swipebackStartX+r.state.swipeBackShift>r.window.innerWidth/2?r.setState({swipeBackResult:Te.success}):r.setState({swipeBackResult:Te.fail})}})),r.state={scrolls:Ie[ge(e)]||{},animated:!1,visiblePanels:[e.activePanel],activePanel:e.activePanel,isBack:void 0,prevPanel:null,nextPanel:null,swipingBack:!1,swipebackStartX:0,swipeBackShift:0,swipeBackNextPanel:null,swipeBackPrevPanel:null,swipeBackResult:null,browserSwipe:!1},r}return f()(n,[{key:"componentWillUnmount",value:function(){var e=ge(this.props);e&&(Ie[e]=this.state.scrolls)}},{key:"componentDidUpdate",value:function(e,t){var n=this;if(this.props.popout&&!e.popout&&this.blurActiveElement(),this.props.modal&&!e.modal&&this.blurActiveElement(),e.activePanel!==this.props.activePanel&&!t.swipingBack&&!t.browserSwipe){var r=this.panels.map((function(e){return ge(e.props)})).find((function(t){return t===e.activePanel||t===n.props.activePanel}))===this.props.activePanel;this.blurActiveElement(),this.setState({visiblePanels:[e.activePanel,this.props.activePanel],prevPanel:e.activePanel,nextPanel:this.props.activePanel,activePanel:null,animated:!0,scrolls:s()(s()({},t.scrolls),{},y()({},e.activePanel,this.props.scroll.getScroll().y)),isBack:r})}if(e.activePanel!==this.props.activePanel&&t.swipingBack){var a=this.props.activePanel,i=e.activePanel;this.setState({swipeBackPrevPanel:null,swipeBackNextPanel:null,swipingBack:!1,swipeBackResult:null,swipebackStartX:0,swipeBackShift:0,activePanel:a,visiblePanels:[a],scrolls:je(t.scrolls,[t.swipeBackPrevPanel])},(function(){n.document.dispatchEvent(pe(n.window,"VKUI:View:transition-end")),n.props.scroll.scrollTo(0,t.scrolls[n.state.activePanel]),e.onTransition&&e.onTransition({isBack:!0,from:i,to:a})}))}var o=this.state.scrolls;if(!t.animated&&this.state.animated){var c={detail:{from:this.state.prevPanel,to:this.state.nextPanel,isBack:this.state.isBack,scrolls:o}};this.document.dispatchEvent(new this.window.CustomEvent("VKUI:View:transition-start",c));var u=this.pickPanel(this.state.nextPanel);this.pickPanel(this.state.prevPanel).scrollTop=o[this.state.prevPanel],this.state.isBack&&(u.scrollTop=o[this.state.nextPanel]),this.waitAnimationFinish(this.pickPanel(this.state.isBack?this.state.prevPanel:this.state.nextPanel),this.transitionEndHandler)}if(!t.swipingBack&&this.state.swipingBack){var l={detail:{from:this.state.swipeBackPrevPanel,to:this.state.swipeBackNextPanel,scrolls:o}};this.document.dispatchEvent(new this.window.CustomEvent("VKUI:View:transition-start",l)),this.props.onSwipeBackStart&&this.props.onSwipeBackStart();var d=this.pickPanel(this.state.swipeBackNextPanel),f=this.pickPanel(this.state.swipeBackPrevPanel);d.scrollTop=o[this.state.swipeBackNextPanel],f.scrollTop=o[this.state.swipeBackPrevPanel]}!t.swipeBackResult&&this.state.swipeBackResult&&this.waitTransitionFinish(this.pickPanel(this.state.swipeBackNextPanel),this.swipingBackTransitionEndHandler),t.swipeBackResult!==Te.fail||this.state.swipeBackResult||this.props.scroll.scrollTo(0,o[this.state.activePanel]),e.activePanel!==this.props.activePanel&&this.state.browserSwipe&&this.setState({browserSwipe:!1,nextPanel:null,prevPanel:null,animated:!1,visiblePanels:[this.props.activePanel],activePanel:this.props.activePanel})}},{key:"shouldDisableTransitionMotion",value:function(){return!1===this.props.configProvider.transitionMotionEnabled||!this.props.splitCol.animate}},{key:"waitTransitionFinish",value:function(e,t){U.supported?(e.removeEventListener(U.name,t),e.addEventListener(U.name,t)):(clearTimeout(this.transitionFinishTimeout),this.transitionFinishTimeout=setTimeout(t,this.props.platform===N||this.props.platform===R?300:600))}},{key:"waitAnimationFinish",value:function(e,t){this.shouldDisableTransitionMotion()?t():V.supported?(e.removeEventListener(V.name,t),e.addEventListener(V.name,t)):(clearTimeout(this.animationFinishTimeout),this.animationFinishTimeout=setTimeout(t,this.props.platform===N||this.props.platform===R?300:600))}},{key:"blurActiveElement",value:function(){void 0!==this.window&&this.document.activeElement&&this.document.activeElement.blur()}},{key:"pickPanel",value:function(e){return this.panelNodes[e]}},{key:"onSwipeBackSuccess",value:function(){this.props.onSwipeBack&&this.props.onSwipeBack()}},{key:"onSwipeBackCancel",value:function(){var e=this;this.props.onSwipeBackCancel&&this.props.onSwipeBackCancel(),this.setState({swipeBackPrevPanel:null,swipeBackNextPanel:null,swipingBack:!1,swipeBackResult:null,swipebackStartX:0,swipeBackShift:0},(function(){e.document.dispatchEvent(pe(e.window,"VKUI:View:transition-end"))}))}},{key:"calcPanelSwipeStyles",value:function(e){if(!T.b)return{};var t=e===this.state.swipeBackPrevPanel,n=e===this.state.swipeBackNextPanel;if(!t&&!n||this.state.swipeBackResult)return{};var r="".concat(this.state.swipeBackShift,"px"),a="".concat(100*this.state.swipeBackShift/this.window.innerWidth/2-50,"%"),i=.3*(this.window.innerWidth-this.state.swipeBackShift)/this.window.innerWidth;return this.state.swipeBackResult?t?{boxShadow:"-2px 0 12px rgba(0, 0, 0, ".concat(i,")")}:{}:n?{transform:"translate3d(".concat(a,", 0, 0)"),WebkitTransform:"translate3d(".concat(a,", 0, 0)")}:t?{transform:"translate3d(".concat(r,", 0, 0)"),WebkitTransform:"translate3d(".concat(r,", 0, 0)"),boxShadow:"-2px 0 12px rgba(0, 0, 0, ".concat(i,")")}:{}}},{key:"render",value:function(){var e=this,t=this.props,n=t.popout,r=t.modal,i=t.platform,c=(t.activePanel,t.splitCol,t.configProvider,t.history,t.nav,t.onTransition,t.onSwipeBack,t.onSwipeBackStart,t.onSwipeBackCancel,t.window,t.document,t.scroll,o()(t,["popout","modal","platform","activePanel","splitCol","configProvider","history","nav","onTransition","onSwipeBack","onSwipeBackStart","onSwipeBackCancel","window","document","scroll"])),s=this.state,u=s.prevPanel,l=s.nextPanel,d=s.activePanel,f=s.swipeBackPrevPanel,p=s.swipeBackNextPanel,h=s.swipeBackResult,m=!!n,v=!!r,g=this.panels.filter((function(t){var n=ge(t.props);return e.state.visiblePanels.includes(n)||n===f||n===p})),b=this.shouldDisableTransitionMotion(),_={"View--animated":!b&&this.state.animated,"View--swiping-back":!b&&this.state.swipingBack,"View--no-motion":b};return Object(E.a)(ke,a()({Component:"section"},c,{vkuiClass:A(F("View",i),_),onMoveX:this.onMoveX,onEnd:this.onEnd}),Object(E.a)("div",{vkuiClass:"View__panels"},g.map((function(t){var n=ge(t.props);return Object(E.a)("div",{vkuiClass:A("View__panel",{"View__panel--active":n===d,"View__panel--prev":n===u,"View__panel--next":n===l,"View__panel--swipe-back-prev":n===f,"View__panel--swipe-back-next":n===p,"View__panel--swipe-back-success":h===Te.success,"View__panel--swipe-back-failed":h===Te.fail}),ref:function(t){return e.panelNodes[n]=t},"data-vkui-active-panel":n===d?"true":"",style:e.calcPanelSwipeStyles(n),key:n},Object(E.a)("div",{vkuiClass:"View__panel-in"},t))}))),Object(E.a)(ie,null,m&&Object(E.a)("div",{vkuiClass:"View__popout"},n),v&&Object(E.a)("div",{vkuiClass:"View__modal"},r)))}},{key:"document",get:function(){return this.props.document}},{key:"window",get:function(){return this.props.window}},{key:"panels",get:function(){return w.a.Children.toArray(this.props.children)}}]),n}(O.Component);y()(De,"defaultProps",{history:[]});var Ne,xe,Re,Me=ee(ee(ee($(Object(K.e)(De)),te,"splitCol"),X,"configProvider"),ve,"scroll"),Le=Object(O.forwardRef)((function(e,t){var n=e.fixed,r=void 0!==n&&n,i=o()(e,["fixed"]);return i["data-tooltip-container"]=r?"fixed":"true",Object(E.a)("div",a()({},i,{ref:t}))}));!function(e){e.COMPACT="compact",e.REGULAR="regular"}(Ne||(Ne={})),function(e){e[e.SMALL_MOBILE=1]="SMALL_MOBILE",e[e.MOBILE=2]="MOBILE",e[e.SMALL_TABLET=3]="SMALL_TABLET",e[e.TABLET=4]="TABLET",e[e.DESKTOP=5]="DESKTOP"}(xe||(xe={})),function(e){e[e.EXTRA_SMALL=1]="EXTRA_SMALL",e[e.SMALL=2]="SMALL",e[e.MEDIUM=3]="MEDIUM"}(Re||(Re={}));var Be=Object(O.createContext)({sizeX:Ne.COMPACT,sizeY:Ne.REGULAR});function Fe(e,t){return function(n){var r=Object(O.useContext)(Be),i=!1;(n.sizeX||n.sizeY)&&(i=!0);var o=n.sizeX||r.sizeX,c=n.sizeY||r.sizeY,s=r.viewWidth,u=r.viewHeight,l=r.hasMouse,d={};t.sizeX&&(d.sizeX=o),t.sizeY&&(d.sizeY=c),t.viewWidth&&(d.viewWidth=s),t.viewHeight&&(d.viewHeight=u),t.hasMouse&&(d.hasMouse=l);var f=Object(E.a)(e,a()({},n,d));return i?Object(E.a)(Be.Provider,{value:{sizeX:o,sizeY:c,viewWidth:s,viewHeight:u,hasMouse:l}},f):f}}var He=w.a.createContext({getPanelNode:function(){return null}});function Ve(){var e=Object(O.useContext)(Y),t=Object(O.useContext)(X).platform;return e.platform||t}function Ue(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Object(O.useRef)();return Object(O.useMemo)((function(){return{get current(){return r.current},set current(e){r.current=e,t.forEach((function(t){return le(e,t)}))}}}),t)}be("Panel");var ze=function(e){var t=e.centered,n=e.children,r=e.getRootRef,i=e.sizeX,c=(e.nav,o()(e,["centered","children","getRootRef","sizeX","nav"])),s=Ve(),u=Ue(r),l=ge(e),d=Object(O.useMemo)((function(){return{panel:l,getPanelNode:function(){return u.current}}}),[l]);return Object(E.a)(He.Provider,{value:d},Object(E.a)("div",a()({},c,{ref:u,vkuiClass:A(F("Panel",s),"Panel--".concat(i),y()({"Panel--centered":t},"Panel--sizeX-".concat(i),!0))}),Object(E.a)(ke,{Component:Le,vkuiClass:"Panel__in"},s===x&&Object(E.a)("div",{vkuiClass:"Panel__fade"}),Object(E.a)("div",{vkuiClass:"Panel__in-before"}),t?Object(E.a)("div",{vkuiClass:"Panel__centered"},n):n,Object(E.a)("div",{vkuiClass:"Panel__in-after"}))))};ze.displayName="Panel",ze.defaultProps={children:"",centered:!1};var Ge=Fe(ze,{sizeX:!0}),We=Object(O.createContext)(!1);var qe=function(e){var t=e.mode;return Object(E.a)("span",{"aria-hidden":"true",vkuiClass:A("FocusVisible","FocusVisible--".concat(t))})},Ke=function(){return+Date.now()},Ye={};function Ze(e){Object.keys(Ye).filter((function(t){return t!==e})).forEach((function(e){clearTimeout(Ye[e].activeTimeout),clearTimeout(Ye[e].timeout),Ye[e].stop(),delete Ye[e]}))}var Qe=w.a.createContext({insideTappable:!1}),Je=function(e){v()(n,e);var t=b()(n);function n(e){var r;return l()(this,n),r=t.call(this,e),y()(h()(r),"id",void 0),y()(h()(r),"isSlide",void 0),y()(h()(r),"insideTouchRoot",void 0),y()(h()(r),"container",void 0),y()(h()(r),"timeout",void 0),y()(h()(r),"wavesTimeout",void 0),y()(h()(r),"onKeyDown",(function(e){var t=r.props.onKeyDown;if(function(e){var t=e.target,n=e.key,r=t,a=r.tagName,i=r.getAttribute("role");return!0!==r.isContentEditable&&"INPUT"!==a&&"TEXTAREA"!==a&&("button"===i||"link"===i)&&((" "===n||"Spacebar"===n)&&"button"===i||!("A"===a&&r.hasAttribute("href"))&&"Enter"===n)}(e)&&(e.preventDefault(),r.container.click()),"function"==typeof t)return t(e)})),y()(h()(r),"onStart",(function(e){var t=e.originalEvent;if(!r.insideTouchRoot&&r.props.stopPropagation&&t.stopPropagation(),r.state.hasActive){if(t.touches&&t.touches.length>1)return void Ze();r.props.platform===N&&r.onDown(t),Ye[r.id]={stop:r.stop,activeTimeout:window.setTimeout(r.start,70)}}})),y()(h()(r),"onMove",(function(e){var t=e.originalEvent,n=e.shiftXAbs,a=e.shiftYAbs;!r.insideTouchRoot&&r.props.stopPropagation&&t.stopPropagation(),(n>20||a>20)&&(r.isSlide=!0,r.stop())})),y()(h()(r),"onEnd",(function(e){var t=e.originalEvent;!r.insideTouchRoot&&r.props.stopPropagation&&t.stopPropagation();var n=Ke();if(t.touches&&t.touches.length>0)return r.isSlide=!1,void r.stop();if(r.state.active)if(n-r.state.ts>=100)r.stop();else{var a=window.setTimeout(r.stop,r.props.activeEffectDelay-n+r.state.ts),i=r.getStorage();i&&(i.timeout=a)}else if(!r.isSlide){r.start();var o=window.setTimeout(r.stop,r.props.activeEffectDelay);r.getStorage()?(clearTimeout(r.getStorage().activeTimeout),r.getStorage().timeout=o):r.timeout=o}r.isSlide=!1})),y()(h()(r),"onDown",(function(e){if(r.props.platform===N){var t=(u=r.container,{top:(l=u.getBoundingClientRect()).top,left:l.left,width:u.offsetWidth,height:u.offsetHeight}),n=t.top,a=t.left,i=Ee(e)-a,o=Oe(e)-n,c="wave"+Date.now().toString();r.setState((function(e){return{clicks:s()(s()({},e.clicks),{},y()({},c,{x:i,y:o}))}})),r.wavesTimeout=window.setTimeout((function(){r.setState((function(e){var t=s()({},e.clicks);return delete t[c],{clicks:t}}))}),225)}var u,l})),y()(h()(r),"onEnter",(function(){r.setState({hovered:!0})})),y()(h()(r),"onLeave",(function(){r.setState({hovered:!1})})),y()(h()(r),"start",(function(){!r.state.active&&r.state.hasActive&&r.setState({active:!0,ts:Ke()}),Ze(r.id)})),y()(h()(r),"stop",(function(){r.state.active&&r.setState({active:!1,ts:null}),r.getStorage()&&(clearTimeout(r.getStorage().activeTimeout),delete Ye[r.id])})),y()(h()(r),"getStorage",(function(){return Ye[r.id]})),y()(h()(r),"getRef",(function(e){r.container=e,le(e,r.props.getRootRef)})),r.id=Math.round(1e8*Math.random()).toString(16),r.state={clicks:{},active:!1,ts:null,hasHover:e.hasHover,hasActive:e.hasActive},r.isSlide=!1,r}return f()(n,[{key:"componentWillUnmount",value:function(){Ye[this.id]&&(clearTimeout(Ye[this.id].timeout),clearTimeout(Ye[this.id].activeTimeout),delete Ye[this.id]),clearTimeout(this.wavesTimeout)}},{key:"componentDidUpdate",value:function(e){e.hasHover===this.props.hasHover&&e.hasActive===this.props.hasActive||this.setState({hasHover:this.props.hasHover,hasActive:this.props.hasActive}),!e.disabled&&this.props.disabled&&this.setState({hovered:!1})}},{key:"render",value:function(){var e,t=this,n=this.state,r=n.clicks,i=n.active,c=n.hovered,s=n.hasHover,u=n.hasActive,l=this.props.href?"a":"div",d=this.props,f=d.children,p=d.Component,h=void 0===p?l:p,m=d.onClick,v=d.onKeyDown,g=(d.activeEffectDelay,d.stopPropagation,d.getRootRef,d.platform),b=d.sizeX,_=d.hasMouse,O=d.hasHover,w=d.hoverMode,C=d.hasActive,S=d.activeMode,k=d.focusVisibleMode,j=o()(d,["children","Component","onClick","onKeyDown","activeEffectDelay","stopPropagation","getRootRef","platform","sizeX","hasMouse","hasHover","hoverMode","hasActive","activeMode","focusVisibleMode"]),T="a"!==h&&"button"!==h&&!j.contentEditable,I=["opacity","background"].includes(w),P=["opacity","background"].includes(S),D=A(F("Tappable",g),"Tappable--sizeX-".concat(b),(e={"Tappable--active":u&&i,"Tappable--inactive":!i,"Tappable--mouse":_},y()(e,"Tappable--hover-".concat(w),s&&c&&I),y()(e,"Tappable--active-".concat(S),u&&i&&P),y()(e,w,s&&c&&!I),y()(e,S,u&&i&&!P),e)),x=j.disabled?h:ke,R={};j.disabled?R.ref=this.getRef:(R.Component=h,R.onStart=this.onStart,R.onMove=this.onMove,R.onEnd=this.onEnd,R.onClick=m,R.onKeyDown=T?this.onKeyDown:v,R.getRootRef=this.getRef),T&&(R["aria-disabled"]=j.disabled);var M=j.href?"link":"button";return Object(E.a)(Qe.Consumer,null,(function(e){var n=e.insideTappable,i=e.onEnter,o=e.onLeave;return Object(E.a)(We.Consumer,null,(function(e){t.insideTouchRoot=e;var c=j.disabled?{}:{onEnter:function(){n&&i(),!j.disabled&&t.onEnter()},onLeave:function(){n&&o(),!j.disabled&&t.onLeave()}};return Object(E.a)(x,a()({},c,{type:"button"===h?"button":void 0,tabIndex:T&&!j.disabled?0:void 0,role:T?M:void 0},j,{vkuiClass:D},R),Object(E.a)(Qe.Provider,{value:{insideTappable:!0,onEnter:function(){return t.setState({hasHover:!1,hasActive:!1})},onLeave:function(){return t.setState({hasHover:O,hasActive:C})}}},f),g===N&&!_&&u&&"background"===S&&Object(E.a)("span",{"aria-hidden":"true",vkuiClass:"Tappable__waves"},Object.keys(r).map((function(e){return Object(E.a)("span",{vkuiClass:"Tappable__wave",style:{top:r[e].y,left:r[e].x},key:e})}))),s&&Object(E.a)("span",{"aria-hidden":"true",vkuiClass:"Tappable__hoverShadow"}),!j.disabled&&Object(E.a)(qe,{mode:k}))}))}))}}]),n}(O.Component);y()(Je,"defaultProps",{stopPropagation:!1,disabled:!1,focusVisibleMode:"inside",hasHover:T.n,hoverMode:"background",hasActive:!0,activeMode:"background",activeEffectDelay:600});var Xe=Fe($(Je),{sizeX:!0,hasMouse:!0}),$e=(be("Text"),function(e){var t=e.children,n=e.weight,r=e.Component,i=void 0===r?"span":r,c=e.getRootRef,s=o()(e,["children","weight","Component","getRootRef"]),u=Ve();return Object(E.a)(i,a()({},s,{ref:c,vkuiClass:A(F("Text",u),"Text--w-".concat(n))}),t)}),et=function(e){var t=e.children,n=e.weight,r=e.Component,i=void 0===r?"h3":r,c=o()(e,["children","weight","Component"]),s=Ve();return Object(E.a)(i,a()({},c,{vkuiClass:A(F("Headline",s),"Headline--w-".concat(n))}),t)},tt=function(e){var t=e.children,n=e.weight,r=e.level,i=e.Component,c=void 0===i?"h"+r:i,s=o()(e,["children","weight","level","Component"]),u=Ve();if(u===N&&"3"===r){var l="regular"===n?n:"medium";return Object(E.a)(et,a()({Component:c},s,{weight:l}),t)}return Object(E.a)(c,a()({},s,{vkuiClass:A(F("Title",u),"Title--w-".concat(n),"Title--l-".concat(r))}),t)},nt=function(e){var t=e.primary,n=e.children,r=Ve();return r===x?Object(E.a)(tt,{Component:"span",level:"3",weight:t?"semibold":"regular"},n):Object(E.a)($e,{weight:r===R?"regular":"medium"},n)},rt=function(e){var t,n,r=e.children,i=e.primary,c=e.label,s=o()(e,["children","primary","label"]),u=ue(r),l=ue(c),d=Ve();switch(d){case N:t="background",n="background";break;case x:t="background",n="opacity";break;case R:t="PanelHeaderButton--hover",n="PanelHeaderButton--active"}return Object(E.a)(Xe,a()({},s,{hoverMode:t,Component:s.href?"a":"button",activeEffectDelay:200,activeMode:n,vkuiClass:A(F("PanelHeaderButton",d),{"PanelHeaderButton--primary":i,"PanelHeaderButton--primitive":u,"PanelHeaderButton--notPrimitive":!u&&!l})}),u?Object(E.a)(nt,{primary:i},r):r,l?Object(E.a)(nt,{primary:i},c):c)};rt.defaultProps={primary:!1,"aria-label":"Закрыть"};be("FixedLayout");var at,it=function(e){v()(n,e);var t=b()(n);function n(){var e;l()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),y()(h()(e),"state",{position:"absolute",top:null,bottom:null,width:""}),y()(h()(e),"el",void 0),y()(h()(e),"onMountResizeTimeout",void 0),y()(h()(e),"onViewTransitionStart",(function(t){var n=t.detail.scrolls[e.props.panel]||0;if(Array.isArray(n)){n=n[n.length-1]}var r=e.props.panel===t.detail.from&&n>0,a=e.props.panel===t.detail.to&&n>0,i=e.props.platform===x||!(e.props.panel===t.detail.to&&t.detail.isBack);(r||a&&e.canTargetPanelScroll&&i)&&e.setState({position:"absolute",top:"top"===e.props.vertical||r?e.el.offsetTop+n:null,bottom:"bottom"!==e.props.vertical||r?null:-n,width:""})})),y()(h()(e),"onViewTransitionEnd",(function(){e.setState({position:null,top:null,bottom:null}),e.doResize()})),y()(h()(e),"doResize",(function(){var t=e.props.splitCol.colRef;if(t&&t.current){var n=t.current.offsetWidth;e.setState({width:"".concat(n,"px"),position:null})}else e.setState({width:"",position:null})})),y()(h()(e),"getRef",(function(t){e.el=t,le(t,e.props.getRootRef)})),e}return f()(n,[{key:"componentDidMount",value:function(){var e=this;this.onMountResizeTimeout=setTimeout((function(){return e.doResize()})),this.window.addEventListener("resize",this.doResize),this.document.addEventListener("VKUI:View:transition-start",this.onViewTransitionStart),this.document.addEventListener("VKUI:View:transition-end",this.onViewTransitionEnd)}},{key:"componentWillUnmount",value:function(){clearInterval(this.onMountResizeTimeout),this.window.removeEventListener("resize",this.doResize),this.document.removeEventListener("VKUI:View:transition-start",this.onViewTransitionStart),this.document.removeEventListener("VKUI:View:transition-end",this.onViewTransitionEnd)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.style,r=e.vertical,i=(e.getRootRef,e.getRef),c=e.platform,u=e.filled,l=(e.splitCol,e.panel,e.getPanelNode,e.window,e.document,o()(e,["children","style","vertical","getRootRef","getRef","platform","filled","splitCol","panel","getPanelNode","window","document"]));return Object(E.a)(Le,a()({},l,{fixed:!0,ref:this.getRef,vkuiClass:A(F("FixedLayout",c),{"FixedLayout--filled":u},"FixedLayout--".concat(r)),style:s()(s()({},n),this.state)}),Object(E.a)("div",{vkuiClass:"FixedLayout__in",ref:i},t))}},{key:"document",get:function(){return this.props.document}},{key:"window",get:function(){return this.props.window}},{key:"currentPanel",get:function(){return this.props.getPanelNode()}},{key:"canTargetPanelScroll",get:function(){var e=this.currentPanel;return!e||e.scrollHeight>e.clientHeight}}]),n}(w.a.Component),ot=ee($((at=Object(K.e)(it),function(e){var t=Object(O.useContext)(He),n=t.getPanelNode,r=t.panel;return Object(E.a)(at,a()({},e,{panel:r,getPanelNode:n}))})),te,"splitCol"),ct=function(e){var t=e.wide,n=e.expanded,r=o()(e,["wide","expanded"]),i=Ve();return Object(E.a)("div",a()({},r,{"aria-hidden":"true",vkuiClass:A(F("Separator",i),{"Separator--wide":t})}),Object(E.a)("div",{vkuiClass:A("Separator__in",{"Separator__in--expanded":n})}))},st=Object(O.memo)(ct),ut=function(e){var t=e.children;return Ve()===R?Object(E.a)($e,{weight:"medium"},t):Object(E.a)("span",{vkuiClass:"PanelHeader__content-in"},t)},lt=function(e){var t=e.children,n=e.left,r=e.right,a=Object(O.useContext)(X).webviewType,i=ue(t);return Object(E.a)(Le,{fixed:!0,vkuiClass:"PanelHeader__in"},Object(E.a)("div",{vkuiClass:"PanelHeader__left"},n),Object(E.a)("div",{vkuiClass:"PanelHeader__content"},i?Object(E.a)(ut,null,t):t),Object(E.a)("div",{vkuiClass:"PanelHeader__right"},a!==q.VKAPPS&&r))},dt=function(e){var t=e.left,n=(e.children,e.right),r=e.separator,i=e.visor,c=e.transparent,s=e.shadow,u=e.getRef,l=e.getRootRef,d=e.sizeX,f=(e.sizeY,e.fixed),p=o()(e,["left","children","right","separator","visor","transparent","shadow","getRef","getRootRef","sizeX","sizeY","fixed"]),h=Ve(),m=Object(O.useContext)(X).webviewType,v=s&&d===Ne.REGULAR,g=void 0!==f?f:h!==I.VKCOM;return Object(E.a)("div",a()({},p,{vkuiClass:A(F("PanelHeader",h),{"PanelHeader--trnsp":c,"PanelHeader--shadow":v,"PanelHeader--vis":i,"PanelHeader--sep":r&&i,"PanelHeader--vkapps":m===q.VKAPPS,"PanelHeader--no-left":!t,"PanelHeader--no-right":!n,"PanelHeader--fixed":g},"PanelHeader--sizeX-".concat(d)),ref:g?l:u}),g?Object(E.a)(ot,{vkuiClass:"PanelHeader__fixed",vertical:"top",getRootRef:u},Object(E.a)(lt,e)):Object(E.a)(lt,e),r&&i&&h!==R&&Object(E.a)(st,{vkuiClass:"PanelHeader__separator",expanded:d===Ne.REGULAR}))};dt.defaultProps={separator:!0,transparent:!1,visor:!0};var ft=Fe(dt,{sizeX:!0,sizeY:!0}),pt=function(e){var t=e.children,n=e.weight,r=e.level,i=e.caps,c=e.Component,s=void 0===c?"span":c,u=o()(e,["children","weight","level","caps","Component"]),l=Ve();return Object(E.a)(s,a()({},u,{vkuiClass:A(F("Caption",l),"Caption--w-".concat(n),"Caption--l-".concat(r),{"Caption--caps":i})}),t)},ht=function(e){var t=e.className,n=e.style,r=e.aside,i=e.status,c=e.before,u=e.children,l=e.onClick,d=o()(e,["className","style","aside","status","before","children","onClick"]),f=l?Xe:"div",p=l?{}:d,h=Ve(),m=l?s()(s()({},d),{},{onClick:l,activeEffectDelay:200,hasActive:h===x,activeMode:"opacity"}):{},v=F("PanelHeaderContent",h);return Object(E.a)("div",a()({},p,{vkuiClass:v,style:n,className:t}),se(c)&&Object(E.a)("div",{vkuiClass:"PanelHeaderContent__before"},c),Object(E.a)(f,a()({},m,{vkuiClass:"PanelHeaderContent__in"}),se(i)&&Object(E.a)(pt,{level:"1",weight:"regular",vkuiClass:"PanelHeaderContent__status"},i),Object(E.a)("div",{vkuiClass:"PanelHeaderContent__children"},se(i)?Object(E.a)(et,{Component:"span",weight:"medium"},u):Object(E.a)("span",{vkuiClass:"PanelHeaderContent__children-in"},u),se(r)&&Object(E.a)("div",{vkuiClass:"PanelHeaderContent__aside"},r)),se(c)&&Object(E.a)("div",{vkuiClass:"PanelHeaderContent__width"})))},mt=function(e){v()(n,e);var t=b()(n);function n(){var e;l()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),y()(h()(e),"state",{closing:!1}),y()(h()(e),"elementRef",w.a.createRef()),y()(h()(e),"animationFinishTimeout",void 0),y()(h()(e),"startClosing",(function(t){e.elementRef&&e.elementRef.current&&!e.elementRef.current.contains(t.target)&&(e.props.onClose(),e.props.document.removeEventListener("click",e.startClosing))})),y()(h()(e),"onAnimationFinish",(function(){e.setState({closing:!1})})),e}return f()(n,[{key:"componentDidMount",value:function(){this.props.opened&&this.isDesktop&&this.props.document.addEventListener("click",this.startClosing)}},{key:"componentDidUpdate",value:function(e){this.props.opened===e.opened&&this.props.viewWidth===e.viewWidth||(!1!==this.props.opened||this.state.closing||(this.setState({closing:!0}),this.waitAnimationFinish(this.onAnimationFinish)),this.isDesktop&&this.props.opened?this.props.document.addEventListener("click",this.startClosing):this.props.document.removeEventListener("click",this.startClosing))}},{key:"componentWillUnmount",value:function(){this.isDesktop&&this.props.document.removeEventListener("click",this.startClosing)}},{key:"waitAnimationFinish",value:function(e){this.elementRef.current&&(V.supported?(this.elementRef.current.removeEventListener(V.name,e),this.elementRef.current.addEventListener(V.name,e)):(clearTimeout(this.animationFinishTimeout),this.animationFinishTimeout=setTimeout(e,200)))}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.opened,r=e.onClose,i=e.platform,c=(e.viewWidth,e.hasMouse,e.window,e.document,o()(e,["children","opened","onClose","platform","viewWidth","hasMouse","window","document"])),s=this.state.closing,u=F("PanelHeaderContext",i);return Object(E.a)(ot,a()({},c,{vkuiClass:A(u,{"PanelHeaderContext--opened":n,"PanelHeaderContext--closing":s,"PanelHeaderContext--desktop":this.isDesktop}),vertical:"top"}),Object(E.a)("div",{vkuiClass:"PanelHeaderContext__in",ref:this.elementRef},Object(E.a)("div",{vkuiClass:"PanelHeaderContext__content"},(n||s)&&t)),!this.isDesktop&&(n||s)&&Object(E.a)("div",{onClick:r,vkuiClass:"PanelHeaderContext__fade"}))}},{key:"isDesktop",get:function(){return this.props.viewWidth>=xe.SMALL_TABLET}}]),n}(O.Component);y()(mt,"defaultProps",{opened:!1});var vt=Fe($(Object(K.e)(mt)),{viewWidth:!0,hasMouse:!0}),gt=function(e){var t=e.popout,n=e.modal,r=e.viewWidth,i=e.viewHeight,c=e.hasMouse,s=e.children,u=e.getRootRef,l=o()(e,["popout","modal","viewWidth","viewHeight","hasMouse","children","getRootRef"]),d=Object(K.d)().document,f=r>=xe.SMALL_TABLET&&(c||i>=Re.MEDIUM);return Object(O.useEffect)((function(){t&&Object(K.b)(d)}),[!!t]),Object(E.a)("div",a()({},l,{vkuiClass:"PopoutRoot",ref:u}),s,Object(E.a)(ie,null,!!t&&Object(E.a)("div",{vkuiClass:f?"PopoutRoot--absolute":"PopoutRoot__popout"},t),!!n&&Object(E.a)("div",{vkuiClass:"PopoutRoot__modal"},n)))};gt.displayName="PopoutRoot";var bt=Fe(gt,{viewWidth:!0,viewHeight:!0,hasMouse:!0}),_t=function(e){var t=e.popout,n=e.modal,r=e.header,i=e.children,c=e.getRootRef,s=e.getRef,u=o()(e,["popout","modal","header","children","getRootRef","getRef"]),l=Ve();return Object(E.a)(bt,{vkuiClass:F("SplitLayout",l),popout:t,modal:n,getRootRef:c},r,Object(E.a)("div",a()({},u,{ref:s,vkuiClass:A("SplitLayout__inner",{"SplitLayout__inner--header":!!r})}),i))},yt=T.b?O.useLayoutEffect:O.useEffect,Et=function(e){var t=e.children,n=e.initialScroll,r=e.saveScroll,a=Object(O.useContext)(ve),i=a.getScroll,o=a.scrollTo;return yt((function(){return"number"==typeof n&&o(0,n),function(){return r(i().y)}}),[]),t},Ot=(be("Epic"),Fe((function(e){var t=Ve(),n=Object(O.useRef)({}).current,r=e.activeStory,i=e.tabbar,c=e.children,s=(e.viewWidth,o()(e,["activeStory","tabbar","children","viewWidth"]));var u=w.a.Children.toArray(c).find((function(e){return ge(e.props)===r}))||null;return Object(E.a)("div",a()({},s,{vkuiClass:F("Epic",t)}),Object(E.a)(Et,{key:r,initialScroll:n[r]||0,saveScroll:function(e){return n[r]=e}},u),i)}),{viewWidth:!0})),wt=function(e){var t=e.children,n=e.shadow,r=e.itemsLayout,i=o()(e,["children","shadow","itemsLayout"]),c=Ve();return Object(E.a)("div",a()({vkuiClass:A(F("Tabbar",c),"Tabbar--l-".concat(function(){switch(r){case"horizontal":case"vertical":return r;default:return w.a.Children.count(t)>2?"vertical":"horizontal"}}()),{"Tabbar--shadow":n})},i),t)};wt.defaultProps={shadow:!0};var Ct=wt,St=function(e){var t=e.size,n=e.platform,r=o()(e,["size","platform"]);return"s"===t?Object(E.a)(pt,a()({level:"2",weight:n===R?"medium":"regular"},r)):Object(E.a)($e,a()({weight:"medium"},r))},At=function(e){var t=e.mode,n=e.size,r=e.children,i=o()(e,["mode","size","children"]),c=Ve();return 0===O.Children.count(r)?null:Object(E.a)("span",a()({},i,{vkuiClass:A(F("Counter",c),"Counter--".concat(t),"Counter--s-".concat(n))}),se(r)&&Object(E.a)(St,{platform:c,size:n,vkuiClass:"Counter__in"},r))};At.defaultProps={mode:"secondary",size:"m"};var kt=Object(O.memo)(At),jt=function(e){var t=e.children,n=e.selected,r=e.label,i=e.indicator,c=e.text,s=o()(e,["children","selected","label","indicator","text"]),u=Ve(),l=s.href?"a":"div";return Object(E.a)(l,a()({},s,{vkuiClass:A(F("TabbarItem",u),{"TabbarItem--selected":n,"TabbarItem--text":!!c})}),Object(E.a)("div",{vkuiClass:"TabbarItem__in"},Object(E.a)("div",{vkuiClass:"TabbarItem__icon"},t,Object(E.a)("div",{vkuiClass:"TabbarItem__label"},se(i)&&i,!i&&r&&Object(E.a)(kt,{size:"s",mode:"prominent"},r))),c&&Object(E.a)("div",{vkuiClass:"TabbarItem__text"},c)))},Tt=n(7),It=n.n(Tt),Pt=n(1160),Dt=function(e){var t=e.onClick,n=e.direction,r=Ve();return Object(E.a)(Xe,{Component:"button",hasHover:!1,hasActive:!1,vkuiClass:A(F("HorizontalScrollArrow",r),"HorizontalScrollArrow--".concat(n)),onClick:t},Object(E.a)("span",{vkuiClass:"HorizontalScrollArrow__icon"},Object(E.a)(Pt.a,null)))};function Nt(e,t,n){var r=Object(O.useRef)(t);yt((function(){r.current=t}),[t]);var a=Object(O.useCallback)((function(e){return r.current(e)}),[]),i=Object(O.useRef)(fe),o=Object(O.useCallback)((function(){return i.current()}),[]),c=Object(O.useCallback)((function(t){if(T.b){o();var r=s()({},n);t.addEventListener(e,a,r),i.current=function(){t.removeEventListener(e,a,r),i.current=fe}}}),[]);return Object(O.useEffect)((function(){return o}),[]),{add:c,remove:o}}function xt(){return performance&&performance.now?performance.now():Date.now()}function Rt(e){var t=e.scrollElement,n=e.getScrollPosition,r=e.animationQueue,a=e.onScrollToRightBorder,i=e.onScrollEnd,o=e.onScrollStart,c=e.initialScrollWidth,s=e.scrollAnimationDuration,u=void 0===s?250:s;if(t&&n){var l=c-t.offsetWidth,d=t.scrollLeft,f=n(d);o(),f>=l&&(a(),f=l);var p=xt();!function e(){if(t){var n,a=xt(),o=Math.min((a-p)/u,1),c=(n=o,.5*(1-Math.cos(Math.PI*n))),s=d+(f-d)*c;t.scrollLeft=Math.ceil(s),t.scrollLeft===Math.max(0,f)?(i(),r.shift(),r.length>0&&r[0]()):requestAnimationFrame(e)}else i()}()}}var Mt=function(e){var t=e.children,n=e.getScrollToLeft,r=e.getScrollToRight,i=e.showArrows,c=e.scrollAnimationDuration,s=e.hasMouse,u=e.getRef,l=o()(e,["children","getScrollToLeft","getScrollToRight","showArrows","scrollAnimationDuration","hasMouse","getRef"]),d=Object(O.useState)(!1),f=It()(d,2),p=f[0],h=f[1],m=Object(O.useState)(!1),v=It()(m,2),g=v[0],b=v[1],_=Object(O.useRef)(!1),y=Ue(u),w=Object(O.useRef)([]),C=Ve();function S(e){var t=y.current;w.current.push((function(){var n;return Rt({scrollElement:t,getScrollPosition:e,animationQueue:w.current,onScrollToRightBorder:function(){return b(!1)},onScrollEnd:function(){return _.current=!1},onScrollStart:function(){return _.current=!0},initialScrollWidth:(null==t||null===(n=t.firstElementChild)||void 0===n?void 0:n.scrollWidth)||0,scrollAnimationDuration:c})})),1===w.current.length&&w.current[0]()}var A=Object(O.useCallback)((function(){if(i&&s&&y.current&&!_.current){var e=y.current;h(e.scrollLeft>0),b(e.scrollLeft+e.offsetWidth<e.scrollWidth)}}),[s]),k=Nt("scroll",A);return Object(O.useEffect)((function(){return k.add(y.current)}),[]),Object(O.useEffect)(A,[y,t]),Object(E.a)("div",a()({},l,{vkuiClass:F("HorizontalScroll",C)}),i&&s&&p&&Object(E.a)(Dt,{direction:"left",onClick:function(){return S(n)}}),i&&s&&g&&Object(E.a)(Dt,{direction:"right",onClick:function(){return S(r)}}),Object(E.a)("div",{vkuiClass:"HorizontalScroll__in",ref:y},Object(E.a)("div",{vkuiClass:"HorizontalScroll__in-wrapper"},t)))};Mt.defaultProps={showArrows:!0};var Lt=Fe(Mt,{hasMouse:!0}),Bt=function(e){v()(n,e);var t=b()(n);function n(e){var r;return l()(this,n),r=t.call(this,e),y()(h()(r),"elRef",void 0),y()(h()(r),"animationFinishTimeout",void 0),y()(h()(r),"onFadeInEnd",(function(e){e&&"vkui-animation-full-fade-in"!==e.animationName||r.setState({opened:!0})})),y()(h()(r),"preventTouch",(function(e){return e.preventDefault()})),r.state={opened:!e.hasMask},r.elRef=w.a.createRef(),r}return f()(n,[{key:"componentDidMount",value:function(){T.b&&(this.props.window.addEventListener("touchmove",this.preventTouch,{passive:!1}),this.waitAnimationFinish(this.elRef.current,this.onFadeInEnd))}},{key:"componentWillUnmount",value:function(){T.b&&(this.props.window.removeEventListener("touchmove",this.preventTouch,{passive:!1}),clearTimeout(this.animationFinishTimeout))}},{key:"waitAnimationFinish",value:function(e,t){V.supported?(e.removeEventListener(V.name,t),e.addEventListener(V.name,t)):(clearTimeout(this.animationFinishTimeout),this.animationFinishTimeout=setTimeout(t,this.props.platform===N||this.props.platform===R?200:300))}},{key:"render",value:function(){var e=this.props,t=e.alignY,n=e.alignX,r=e.closing,i=e.children,c=e.hasMask,s=e.fixed,u=e.platform,l=e.onClick,d=(e.window,e.document,o()(e,["alignY","alignX","closing","children","hasMask","fixed","platform","onClick","window","document"])),f=F("PopoutWrapper",u);return Object(E.a)("div",a()({},d,{vkuiClass:A(f,"PopoutWrapper--v-".concat(t),"PopoutWrapper--h-".concat(n),{"PopoutWrapper--closing":r,"PopoutWrapper--opened":this.state.opened,"PopoutWrapper--fixed":s,"PopoutWrapper--masked":c}),ref:this.elRef}),Object(E.a)("div",{vkuiClass:"PopoutWrapper__container"},Object(E.a)("div",{vkuiClass:"PopoutWrapper__overlay",onClick:l}),Object(E.a)("div",{vkuiClass:"PopoutWrapper__content"},i)))}}]),n}(O.Component);y()(Bt,"defaultProps",{hasMask:!0,fixed:!0,alignY:"center",alignX:"center",closing:!1});var Ft=$(Object(K.e)(Bt)),Ht=function(e){var t=e.children,n=e.weight,r=e.Component,i=void 0===r?"h4":r,c=o()(e,["children","weight","Component"]),s=Ve();return Object(E.a)(i,a()({},c,{vkuiClass:A(F("Subhead",s),"Subhead--w-".concat(n))}),t)},Vt=n(17),Ut=n.n(Vt),zt=n(18),Gt=n(10),Wt=n(19),qt=!1;function Kt(){qt||(Object(Gt.a)(new Ut.a({id:"spinner_24",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="spinner_24"><path clip-rule="evenodd" d="M16.394 5.077A8.2 8.2 0 004.58 15.49a.9.9 0 01-1.628.767A10 10 0 1112 22a.9.9 0 010-1.8 8.2 8.2 0 004.394-15.123z" fill="currentColor" fill-rule="evenodd" /></symbol>'})),qt=!0)}var Yt=function(e){return Object(Gt.b)((function(){Kt()}),[]),w.a.createElement(Wt.a,Object(zt.assign)({},e,{viewBox:"0 0 24 24",id:"spinner_24",width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};Yt.mountIcon=Kt;var Zt=Yt,Qt=!1;function Jt(){Qt||(Object(Gt.a)(new Ut.a({id:"spinner_44",viewBox:"0 0 44 44",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44" id="spinner_44"><path d="M22 44a1.5 1.5 0 010-3c10.493 0 19-8.507 19-19S32.493 3 22 3 3 11.507 3 22c0 2.208.376 4.363 1.103 6.397a1.5 1.5 0 11-2.825 1.01A21.964 21.964 0 010 22C0 9.85 9.85 0 22 0s22 9.85 22 22-9.85 22-22 22z" fill="currentColor" fill-rule="nonzero" /></symbol>'})),Qt=!0)}var Xt=function(e){return Object(Gt.b)((function(){Jt()}),[]),w.a.createElement(Wt.a,Object(zt.assign)({},e,{viewBox:"0 0 44 44",id:"spinner_44",width:isNaN(e.width)?44:+e.width,height:isNaN(e.height)?44:+e.height}))};Xt.mountIcon=Jt;var $t=Xt,en=!1;function tn(){en||(Object(Gt.a)(new Ut.a({id:"spinner_32",viewBox:"0 0 32 32",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" id="spinner_32"><path d="M16 32a1.5 1.5 0 010-3c7.18 0 13-5.82 13-13S23.18 3 16 3 3 8.82 3 16c0 1.557.273 3.074.8 4.502A1.5 1.5 0 11.986 21.54 15.97 15.97 0 010 16C0 7.163 7.163 0 16 0s16 7.163 16 16-7.163 16-16 16z" fill="currentColor" fill-rule="nonzero" /></symbol>'})),en=!0)}var nn=function(e){return Object(Gt.b)((function(){tn()}),[]),w.a.createElement(Wt.a,Object(zt.assign)({},e,{viewBox:"0 0 32 32",id:"spinner_32",width:isNaN(e.width)?32:+e.width,height:isNaN(e.height)?32:+e.height}))};nn.mountIcon=tn;var rn=nn,an=!1;function on(){an||(Object(Gt.a)(new Ut.a({id:"spinner_16",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="spinner_16"><clipPath id="spinner_16_a"><path d="M0 0h16v16H0z" /></clipPath><g clip-path="url(#spinner_16_a)"><path clip-rule="evenodd" d="M11.215 2.934a6 6 0 00-8.644 7.62 1 1 0 11-1.81.852A8 8 0 118 16a1 1 0 110-2 6 6 0 003.215-11.066z" fill="currentColor" fill-rule="evenodd" /></g></symbol>'})),an=!0)}var cn=function(e){return Object(Gt.b)((function(){on()}),[]),w.a.createElement(Wt.a,Object(zt.assign)({},e,{viewBox:"0 0 16 16",id:"spinner_16",width:isNaN(e.width)?16:+e.width,height:isNaN(e.height)?16:+e.height}))};cn.mountIcon=on;var sn=cn,un=function(e){var t=e.size,n=o()(e,["size"]),r=Ve(),i=Zt;return"large"===t&&(i=$t),"medium"===t&&(i=rn),"small"===t&&(i=sn),Object(E.a)("span",a()({role:"status"},n,{vkuiClass:F("Spinner",r)}),Object(E.a)(i,{"aria-hidden":"true",vkuiClass:"Spinner__self"}))};un.defaultProps={size:"regular","aria-label":"Загружается..."};var ln=Object(O.memo)(un),dn=function(e){var t=e.size,n=e.sizeY,r=e.platform,i=o()(e,["size","sizeY","platform"]),c=n===Ne.COMPACT;switch(t){case"l":return c?Object(E.a)($e,a()({weight:"medium"},i)):Object(E.a)(tt,a()({level:"3",weight:"medium"},i));case"m":return c?Object(E.a)(Ht,a()({weight:r===R?"regular":"medium"},i)):Object(E.a)($e,a()({weight:"medium"},i));case"s":default:return r===x?Object(E.a)(Ht,a()({weight:"medium"},i)):r===R?Object(E.a)(pt,a()({level:"1",weight:"regular"},i)):c?Object(E.a)(pt,a()({level:"1",weight:"medium"},i)):Object(E.a)(Ht,a()({weight:"medium"},i))}},fn=function(e){var t,n=Ve(),r=e.size,i=e.mode,c=e.stretched,s=e.align,u=e.children,l=e.before,d=e.after,f=e.getRootRef,p=e.sizeY,h=e.Component,m=void 0===h?"button":h,v=e.loading,g=e.onClick,b=o()(e,["size","mode","stretched","align","children","before","after","getRootRef","sizeY","Component","loading","onClick"]),_=Boolean(l||d);return Object(E.a)(Xe,a()({},b,{Component:b.href?"a":m,onClick:v?null:g,focusVisibleMode:"outside",vkuiClass:A(F("Button",n),"Button--sz-".concat(r),"Button--lvl-".concat(i),"Button--aln-".concat(s),"Button--sizeY-".concat(p),(t={},y()(t,"Button--stretched",c),y()(t,"Button--with-icon",_),t)),getRootRef:f,activeMode:"opacity"}),v&&Object(E.a)(ln,{size:"small",vkuiClass:"Button__spinner"}),Object(E.a)("span",{vkuiClass:"Button__in"},l&&Object(E.a)("span",{vkuiClass:"Button__before"},l),u&&Object(E.a)(dn,{size:r,sizeY:p,platform:n,vkuiClass:"Button__content",Component:"span"},u),d&&Object(E.a)("span",{vkuiClass:"Button__after"},d)))};fn.defaultProps={mode:"primary",align:"center",size:"s",stretched:!1,stopPropagation:!0};var pn=Fe(fn,{sizeY:!0}),hn=n(1318),mn=function(e){var t=Ve();return Object(E.a)(Xe,a()({vkuiClass:F("ModalDismissButton",t)},e,{activeMode:"ModalDismissButton--active",hoverMode:"ModalDismissButton--hover"}),Object(E.a)(hn.a,null))};mn.defaultProps={"aria-label":"Закрыть"};var vn=mn,gn=function(e){v()(n,e);var t=b()(n);function n(e){var r;return l()(this,n),r=t.call(this,e),y()(h()(r),"element",void 0),y()(h()(r),"transitionFinishTimeout",void 0),y()(h()(r),"onItemClick",(function(e){return function(){var t=e.action,n=e.autoclose;n?(r.setState({closing:!0}),r.waitTransitionFinish((function(e){e&&"opacity"!==e.propertyName||(n&&r.props.onClose(),t&&t())}))):t&&t()}})),y()(h()(r),"onClose",(function(){r.setState({closing:!0}),r.waitTransitionFinish((function(e){e&&"opacity"!==e.propertyName||r.props.onClose()}))})),y()(h()(r),"stopPropagation",(function(e){e.stopPropagation()})),y()(h()(r),"renderAction",(function(e,t){var n=r.props.platform;if(n===x){var a=e.Component,i=void 0===a?"button":a;return Object(E.a)(Xe,{Component:e.href?"a":i,vkuiClass:A("Alert__action","Alert__action--".concat(e.mode)),onClick:r.onItemClick(e),href:e.href,key:"alert-action-".concat(t)},e.title)}var o="cancel"===e.mode?"secondary":"primary";return n===N&&(o="tertiary",r.props.viewWidth===xe.DESKTOP&&"destructive"===e.mode&&(o="destructive")),Object(E.a)(pn,{vkuiClass:A("Alert__button","Alert__button--".concat(e.mode)),mode:o,size:"m",onClick:r.onItemClick(e),Component:e.Component,href:e.href,key:"alert-action-".concat(t)},e.title)})),r.element=w.a.createRef(),r.state={closing:!1},r}return f()(n,[{key:"waitTransitionFinish",value:function(e){U.supported?(this.element.current.removeEventListener(U.name,e),this.element.current.addEventListener(U.name,e)):(clearTimeout(this.transitionFinishTimeout),this.transitionFinishTimeout=setTimeout(e.bind(this),this.props.platform===N||this.props.platform===R?200:300))}},{key:"renderHeader",value:function(e){switch(this.props.platform){case R:return Object(E.a)(et,{vkuiClass:"Alert__header",weight:"medium"},e);case x:return Object(E.a)(tt,{vkuiClass:"Alert__header",weight:"semibold",level:"3"},e);case N:return Object(E.a)(tt,{vkuiClass:"Alert__header",weight:"medium",level:"2"},e)}}},{key:"renderText",value:function(e){switch(this.props.platform){case R:return Object(E.a)(pt,{vkuiClass:"Alert__text",level:"1",weight:"regular"},e);case x:return Object(E.a)(pt,{vkuiClass:"Alert__text",level:"2",weight:"regular"},e);case N:return Object(E.a)(et,{vkuiClass:"Alert__text",weight:"regular"},e)}}},{key:"render",value:function(){var e=this.props,t=e.actions,n=e.actionsLayout,r=e.children,i=e.className,c=e.style,s=e.platform,u=e.viewWidth,l=e.text,d=e.header,f=o()(e,["actions","actionsLayout","children","className","style","platform","viewWidth","text","header"]),p=this.state.closing,h=s===R?"horizontal":n,m=s===R||s===N&&u>=xe.SMALL_TABLET,v=u>=xe.SMALL_TABLET;return Object(E.a)(Ft,{className:i,closing:p,style:c,onClick:this.onClose},Object(E.a)("div",a()({},f,{ref:this.element,onClick:this.stopPropagation,vkuiClass:A(F("Alert",s),{"Alert--v":"vertical"===h,"Alert--h":"horizontal"===h,"Alert--closing":p,"Alert--desktop":v})}),m&&Object(E.a)(vn,{onClick:this.onClose}),Object(E.a)("div",{vkuiClass:"Alert__content"},se(d)&&this.renderHeader(d),se(l)&&this.renderText(l),r),Object(E.a)("footer",{vkuiClass:"Alert__actions"},t.map(this.renderAction))))}}]),n}(O.Component);y()(gn,"defaultProps",{actionsLayout:"horizontal",actions:[]});var bn=$(Fe(gn,{viewWidth:!0})),_n=function(e){v()(n,e);var t=b()(n);function n(){var e;l()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),y()(h()(e),"state",{dropdownStyles:{left:"0",top:"0",opacity:"0",pointerEvents:"none"}}),y()(h()(e),"componentDidMount",(function(){var t,n=e.props,r=n.toggleRef,a=n.elementRef,i=n.popupDirection,o=r.getBoundingClientRect(),c=a.current.getBoundingClientRect(),s=o.left+o.width-c.width+e.window.pageXOffset;t="top"===i||"function"==typeof i&&"top"===i(a)?o.top-c.height+e.window.pageYOffset:o.top+o.height+e.window.pageYOffset,e.setState({dropdownStyles:{left:s,top:t,opacity:1,pointerEvents:"auto"}}),setTimeout((function(){e.window.addEventListener("click",e.handleClickOutside)}))})),y()(h()(e),"componentWillUnmount",(function(){e.window.removeEventListener("click",e.handleClickOutside)})),y()(h()(e),"handleClickOutside",(function(t){var n=e.props.elementRef.current;n!==t.target&&n&&!n.contains(t.target)&&e.onClose()})),y()(h()(e),"onClose",(function(){e.props.onClose()})),y()(h()(e),"stopPropagation",(function(e){return e.stopPropagation()})),e}return f()(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.platform,r=e.elementRef,i=(e.toggleRef,e.closing,e.sizeY),c=(e.window,e.document,e.popupDirection,o()(e,["children","platform","elementRef","toggleRef","closing","sizeY","window","document","popupDirection"])),s=F("ActionSheet",n);return Object(E.a)("div",a()({},c,{ref:r,onClick:this.stopPropagation,style:this.state.dropdownStyles,vkuiClass:A(s,"ActionSheet--desktop",{"ActionSheet--closing":this.props.closing},"ActionSheet--sizeY-".concat(i))}),t)}},{key:"window",get:function(){return this.props.window}}]),n}(O.Component),yn=Fe($(Object(K.e)(_n)),{sizeY:!0}),En=function(e){return e.stopPropagation()},On=function(e){var t=e.children,n=e.elementRef,r=(e.toggleRef,e.closing),i=(e.popupDirection,o()(e,["children","elementRef","toggleRef","closing","popupDirection"])),c=F("ActionSheet",Ve());return Object(E.a)("div",a()({},i,{ref:n,onClick:En,vkuiClass:A(c,{"ActionSheet--closing":r})}),t)},wn=w.a.createContext({}),Cn=function(e){v()(n,e);var t=b()(n);function n(e){var r;return l()(this,n),r=t.call(this,e),y()(h()(r),"state",{closing:!1}),y()(h()(r),"elRef",void 0),y()(h()(r),"transitionFinishTimeout",void 0),y()(h()(r),"onClose",(function(){r.setState({closing:!0}),r.waitTransitionFinish(r.props.onClose)})),y()(h()(r),"onItemClick",(function(e,t){return function(n){n.persist(),t?(r.setState({closing:!0}),r.waitTransitionFinish((function(){r.props.onClose(),e&&e(n)}))):e&&e(n)}})),r.elRef=w.a.createRef(),r}return f()(n,[{key:"waitTransitionFinish",value:function(e){if(this.isDesktop)return e();U.supported?(this.elRef.current.removeEventListener(U.name,e),this.elRef.current.addEventListener(U.name,e)):(clearTimeout(this.transitionFinishTimeout),this.transitionFinishTimeout=setTimeout(e,this.props.platform===N||this.props.platform===R?200:300))}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,r=e.header,i=e.text,c=e.style,s=e.platform,u=(e.viewWidth,e.viewHeight,e.hasMouse,e.iosCloseItem),l=o()(e,["children","className","header","text","style","platform","viewWidth","viewHeight","hasMouse","iosCloseItem"]),d=this.isDesktop,f=d?yn:On;return Object(E.a)(Ft,{closing:this.state.closing,alignY:"bottom",className:n,style:c,onClick:d?null:this.onClose,hasMask:!d,fixed:!d},Object(E.a)(wn.Provider,{value:{onItemClick:this.onItemClick,isDesktop:d}},Object(E.a)(f,a()({closing:this.state.closing,onClose:this.onClose,elementRef:this.elRef},l),(se(r)||se(i))&&Object(E.a)("header",{vkuiClass:"ActionSheet__header"},se(r)&&Object(E.a)(pt,{level:"1",weight:s===x?"semibold":"medium",vkuiClass:"ActionSheet__title"},r),se(i)&&Object(E.a)(pt,{level:"1",weight:"regular",vkuiClass:"ActionSheet__text"},i)),t,s===x&&!d&&u)))}},{key:"isDesktop",get:function(){var e=this.props,t=e.viewWidth,n=e.viewHeight,r=e.hasMouse;return t>=xe.SMALL_TABLET&&(r||n>=Re.MEDIUM)}}]),n}(O.Component);y()(Cn,"defaultProps",{popupDirection:"bottom"});var Sn=Fe($(Cn),{viewWidth:!0,viewHeight:!0,hasMouse:!0}),An=!1;function kn(){An||(Object(Gt.a)(new Ut.a({id:"done_24",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="done_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path d="M9 16.2l-3.5-3.5a.99.99 0 10-1.4 1.4l4.193 4.193a1 1 0 001.414 0L20.3 7.7a.99.99 0 00-1.4-1.4L9 16.2z" fill="currentColor" /></g></symbol>'})),An=!0)}var jn=function(e){return Object(Gt.b)((function(){kn()}),[]),w.a.createElement(Wt.a,Object(zt.assign)({},e,{viewBox:"0 0 24 24",id:"done_24",width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};jn.mountIcon=kn;var Tn=jn,In=n(1319),Pn=function(e){var t=e.children,n=e.autoclose,r=e.mode,i=e.meta,c=e.subtitle,s=e.before,u=e.selectable,l=e.value,d=e.name,f=e.checked,p=e.defaultChecked,h=e.onChange,m=e.onClick,v=e.sizeY,g=o()(e,["children","autoclose","mode","meta","subtitle","before","selectable","value","name","checked","defaultChecked","onChange","onClick","sizeY"]),b=Ve(),_=Object(O.useContext)(wn),y=_.onItemClick,w=void 0===y?function(){return fe}:y,C=_.isDesktop,S=g.href?"a":"div";u&&(S="label");var k=se(c)||se(i)||u;return Object(E.a)(Xe,a()({},g,{onClick:u?m:w(m,n),activeMode:"ActionSheetItem--active",vkuiClass:A(F("ActionSheetItem",b),"ActionSheetItem--".concat(r),"ActionSheetItem--sizeY-".concat(v),{"ActionSheetItem--compact":k,"ActionSheetItem--desktop":C,"ActionSheetItem--withSubtitle":se(c)}),Component:S}),se(s)&&Object(E.a)("div",{vkuiClass:"ActionSheetItem__before"},s),Object(E.a)("div",{vkuiClass:"ActionSheetItem__container"},Object(E.a)("div",{vkuiClass:"ActionSheetItem__content"},v===Ne.COMPACT?Object(E.a)(O.Fragment,null,Object(E.a)($e,{weight:"cancel"===r?"medium":"regular",vkuiClass:"ActionSheetItem__children"},t),se(i)&&Object(E.a)($e,{weight:"regular",vkuiClass:"ActionSheetItem__meta"},i)):Object(E.a)(O.Fragment,null,Object(E.a)(tt,{weight:"cancel"===r?"medium":"regular",level:k||se(s)||b===N?"3":"2",vkuiClass:"ActionSheetItem__children"},t),se(i)&&Object(E.a)(tt,{weight:"regular",level:k||se(s)||b===N?"3":"2",vkuiClass:"ActionSheetItem__meta"},i))),se(c)&&(v===Ne.COMPACT?Object(E.a)(pt,{weight:"regular",vkuiClass:"ActionSheetItem__subtitle",level:"1"},c):Object(E.a)(Ht,{weight:"regular",vkuiClass:"ActionSheetItem__subtitle"},c))),u&&Object(E.a)("div",{vkuiClass:"ActionSheetItem__after"},Object(E.a)("input",{type:"radio",vkuiClass:"ActionSheetItem__radio",name:d,value:l,onChange:h,onClick:w(fe,n),defaultChecked:p,checked:f,disabled:g.disabled}),Object(E.a)("div",{vkuiClass:"ActionSheetItem__marker"},b===R?Object(E.a)(Tn,null):Object(E.a)(In.a,null))))};Pn.defaultProps={mode:"default"};var Dn=Fe(Pn,{sizeY:!0}),Nn=function(e){var t=e.style,n=e.className,r=o()(e,["style","className"]),a=Ve();return Object(E.a)(Ft,{vkuiClass:F("ScreenSpinner",a),className:n,style:t},Object(E.a)("div",{vkuiClass:"ScreenSpinner__container"},Object(E.a)(ln,r)))};Nn.defaultProps={size:"large","aria-label":"Пожалуйста, подождите..."};var xn=Nn;function Rn(e,t){var n=Object(O.useRef)({cb:e,duration:t});yt((function(){n.current.cb=e,n.current.duration=t}),[e,t]);var r=Object(O.useRef)(),a=Object(O.useCallback)((function(){return T.b&&clearTimeout(r.current)}),[]),i=Object(O.useCallback)((function(){a(),T.b&&(r.current=setTimeout((function(){var e=n.current.cb;"function"==typeof e&&e()}),n.current.duration))}),[]);return Object(O.useEffect)((function(){return a}),[]),{set:i,clear:a}}var Mn=function(e){var t,n=e.children,r=e.layout,i=e.action,c=e.before,s=e.after,u=e.viewWidth,l=e.duration,d=e.onActionClick,f=e.onClose,p=o()(e,["children","layout","action","before","after","viewWidth","duration","onActionClick","onClose"]),h=Ve(),m=(t=Object(O.useRef)(null),{waitTransitionFinish:function(e,n,r){e&&(U.supported?(e.removeEventListener(U.name,n),e.addEventListener(U.name,n)):(clearTimeout(t.current),t.current=setTimeout(n,r)))}}).waitTransitionFinish,v=Object(O.useState)(!1),g=It()(v,2),b=g[0],_=g[1],y=Object(O.useState)(!1),w=It()(y,2),C=w[0],S=w[1],k=Object(O.useRef)(0),j=Object(O.useRef)(0),T=Object(O.useRef)(null),I=Object(O.useRef)(null),P=Object(O.useRef)(null),D=Object(O.useRef)(null),x=u>=xe.SMALL_TABLET,M=h===N||h===R?400:320,L=function(){_(!0),m(P.current,(function(){f()}),M)},B=Rn(L,l),H=function(e){cancelAnimationFrame(D.current),D.current=requestAnimationFrame((function(){I.current&&(I.current.style.transform="translate3d(".concat(e,"%, 0, 0)"))}))},V=B.clear;Object(O.useEffect)(B.set,[]);var z=s||x?"vertical":r;return Object(E.a)(ie,null,Object(E.a)("div",a()({},p,{vkuiClass:A(F("Snackbar",h),"Snackbar--l-".concat(z),{"Snackbar--closing":b,"Snackbar--touched":C,"Snackbar--desktop":x})}),Object(E.a)(ke,{vkuiClass:"Snackbar__in",getRootRef:P,onStart:V,onMoveX:function(e){var t=e.shiftX,n=e.startT;e.originalEvent.preventDefault(),C||S(!0),k.current=t/I.current.offsetWidth*100,j.current=Ce(k.current,72,1.2,h===N||h===R),T.current=n,H(j.current)},onEnd:function(){var e;if(C){var t=j.current;t+=t/(Date.now()-T.current.getTime())*240*.6,x&&t<=-50?(B.clear(),m(I.current,(function(){f()}),M),H(-120)):!x&&t>=50?(B.clear(),m(I.current,(function(){f()}),M),H(120)):e=function(){B.set(),H(0)}}else B.set();S(!1),e&&requestAnimationFrame(e)}},Object(E.a)("div",{vkuiClass:"Snackbar__body",ref:I},c&&Object(E.a)("div",{vkuiClass:"Snackbar__before"},c),Object(E.a)("div",{vkuiClass:"Snackbar__content"},Object(E.a)($e,{weight:"regular",vkuiClass:"Snackbar__content-text"},n),i&&Object(E.a)(pn,{align:"left",hasHover:!1,mode:"tertiary",size:"s",vkuiClass:"Snackbar__action",onClick:function(e){L(),i&&"function"==typeof d&&d(e)}},i)),s&&Object(E.a)("div",{vkuiClass:"Snackbar__after"},s)))))};Mn.displayName="Snackbar",Mn.defaultProps={duration:4e3,layout:"horizontal"};var Ln=Fe(Mn,{viewWidth:!0}),Bn=n(21),Fn=n.n(Bn);function Hn(e,t){e.style.transform=t,e.style.webkitTransform=t}var Vn=Object(O.createContext)({updateModalHeight:function(){},registerModal:function(){},isInsideModal:!1});function Un(e,t){var n=Object(O.useContext)(Vn),r=Object(O.useRef)({}).current;return yt((function(){n.registerModal(s()(s()({},r),{},{type:t,id:e}));var a=Object.keys(r).reduce((function(e,t){return s()(s()({},e),{},y()({},t,null))}),{type:t,id:e});return function(){return n.registerModal(a)}}),[]),{refs:Object(O.useRef)({modalElement:function(e){return r.modalElement=e},innerElement:function(e){return r.innerElement=e},headerElement:function(e){return r.headerElement=e},contentElement:function(e){return r.contentElement=e},footerElement:function(e){return r.footerElement=e}}).current}}var zn,Gn=Vn;!function(e){e.PAGE="page",e.CARD="card"}(zn||(zn={}));var Wn=be("ModalRoot");function qn(e,t){return e>=t[0]&&e<=t[1]}function Kn(e){return Math.max(0,Math.min(98,e))}var Yn=function(e){v()(n,e);var t=b()(n);function n(e){var r;l()(this,n),r=t.call(this,e),y()(h()(r),"modalsState",void 0),y()(h()(r),"documentScrolling",void 0),y()(h()(r),"activeTransitions",void 0),y()(h()(r),"maskElementRef",void 0),y()(h()(r),"viewportRef",Object(O.createRef)()),y()(h()(r),"maskAnimationFrame",void 0),y()(h()(r),"modalRootContext",void 0),y()(h()(r),"frameIds",void 0),y()(h()(r),"preventTouch",(function(e){if(!e)return!1;for(;e.originalEvent;)e=e.originalEvent;return e.preventDefault&&e.preventDefault(),!1})),y()(h()(r),"updateModalTranslate",(function(){var e=r.state.activeModal||r.state.nextModal;if(e){var t=r.modalsState[e];r.animateTranslate(t,t.translateY)}})),y()(h()(r),"updateModalHeight",(function(){var e=r.state,t=e.activeModal,n=e.nextModal,a=t||n,i=a?r.modalsState[a]:void 0;i&&i.type===zn.PAGE&&i.dynamicContentHeight&&(r.state.switching?r.waitTransitionFinish(i,(function(){requestAnimationFrame((function(){return r.checkPageContentHeight()}))})):requestAnimationFrame((function(){return r.checkPageContentHeight()})))})),y()(h()(r),"onTouchMove",(function(e){if(!r.state.switching){var t=r.state.activeModal||r.state.nextModal;if(t){var n=r.modalsState[t];return n.type===zn.PAGE?r.onPageTouchMove(e,n):n.type===zn.CARD?r.onCardTouchMove(e,n):void 0}}})),y()(h()(r),"onTouchEnd",(function(e){var t=r.state.activeModal||r.state.nextModal;if(t){var n=r.modalsState[t];return n.type===zn.PAGE?r.onPageTouchEnd(e,n):n.type===zn.CARD?r.onCardTouchEnd(n):void 0}})),y()(h()(r),"onScroll",(function(e){var t=r.state.activeModal,n=e.target;if(t){var a=r.modalsState[t];a.type===zn.PAGE&&a.contentElement.contains(n)&&(a.contentScrolled=!0,clearTimeout(a.contentScrollStopTimeout),a.contentScrollStopTimeout=window.setTimeout((function(){a.contentScrolled&&(a.contentScrolled=!1)}),250))}})),y()(h()(r),"prevNextSwitchEndHandler",(function(){if(r.activeTransitions=Math.max(0,r.activeTransitions-1),!(r.activeTransitions>0)){var e=r.state.nextModal,t={prevModal:null,nextModal:null,visibleModals:[e],activeModal:e,animated:!1,switching:!1};e||(t.history=[]),r.setState(t)}})),y()(h()(r),"triggerActiveModalClose",(function(){var e=r.modalsState[r.state.activeModal];e&&r.doCloseModal(e)})),y()(h()(r),"doCloseModal",(function(e){r.setState({touchDown:!1,switching:!1}),oe(e.onClose)?e.onClose():oe(r.props.onClose)&&r.props.onClose(e.id)}));var a=e.activeModal;return r.state={activeModal:null,prevModal:null,nextModal:a,visibleModals:a?[a]:[],animated:!!a,switching:!1,history:a?[a]:[],isBack:!1,inited:!1,touchDown:!1,dragging:!1},r.activeTransitions=0,r.maskElementRef=w.a.createRef(),r.initModalsState(),r.modalRootContext={updateModalHeight:r.updateModalHeight,registerModal:function(e){var t=e.id,n=o()(e,["id"]);return Object.assign(r.modalsState[t],n)},onClose:r.triggerActiveModalClose,isInsideModal:!0},r.frameIds={},r}return f()(n,[{key:"getModals",value:function(){return w.a.Children.toArray(this.props.children)}},{key:"initModalsState",value:function(){this.modalsState=this.getModals().reduce((function(e,t){var n=t.props,r={id:ge(n),onClose:t.props.onClose,dynamicContentHeight:!!n.dynamicContentHeight};return"number"==typeof n.settlingHeight&&(r.settlingHeight=n.settlingHeight),e[r.id]=r,e}),{})}},{key:"componentDidMount",value:function(){this.initActiveModal()}},{key:"componentWillUnmount",value:function(){this.toggleDocumentScrolling(!0),this.props.platform===x&&this.window.removeEventListener("resize",this.updateModalTranslate,!1)}},{key:"componentDidUpdate",value:function(e,t){var n=this;if(this.props.activeModal!==e.activeModal&&!this.state.switching){var r=this.props.activeModal,a=e.activeModal;0;var i=Fn()(this.state.history),o=!1;return null===r?i=[]:i.includes(r)?(i=i.splice(0,i.indexOf(r)+1),o=!0):i.push(r),this.setState({activeModal:null,nextModal:r,prevModal:a,visibleModals:[r,a],history:i,isBack:o,animated:!0,inited:!1,switching:!1},(function(){null===r?n.closeActiveModal():n.initActiveModal()}))}this.state.switching&&!t.switching&&requestAnimationFrame((function(){return n.switchPrevNext()})),this.state.activeModal||this.state.prevModal||this.state.nextModal?this.toggleDocumentScrolling(!1):this.toggleDocumentScrolling(!0)}},{key:"toggleDocumentScrolling",value:function(e){this.documentScrolling!==e&&(this.documentScrolling=e,e?this.window.removeEventListener("touchmove",this.preventTouch,{passive:!1}):this.window.addEventListener("touchmove",this.preventTouch,{passive:!1}))}},{key:"initActiveModal",value:function(){var e=this.state.activeModal||this.state.nextModal;if(e){var t=this.modalsState[e];switch(this.props.platform===x&&this.window.addEventListener("resize",this.updateModalTranslate,!1),t.type){case zn.PAGE:t.settlingHeight=t.settlingHeight||75,this.initPageModal(t);break;case zn.CARD:this.initCardModal(t);break;default:0}this.setState({inited:!0,switching:!0})}}},{key:"initPageModal",value:function(e){var t=e.contentElement,n=t.firstElementChild.offsetHeight,r=e.translateY;e.expandable=n>t.clientHeight||100===e.settlingHeight;var a,i,o,c,s,u=!1,l=!1;if(e.expandable){var d=(a=100-e.settlingHeight)/2,f=100-a;o=[0,d],c=[d,a+f/4],s=[a+f/4,100],u=a>0,l=a<=0,i=a}else{o=[i=a=100-(n+e.headerElement.offsetHeight)/e.innerElement.parentElement.offsetHeight*100,i+25],c=[i+25,i+25],s=[i+25,i+100]}(e.expandable&&i>r||100===e.settlingHeight)&&(i=0),e.expandedRange=o,e.collapsedRange=c,e.hiddenRange=s,e.translateY=i,e.translateYFrom=a,e.collapsed=u,e.expanded=l}},{key:"initCardModal",value:function(e){e.translateY=0}},{key:"checkPageContentHeight",value:function(){var e=this.state,t=e.activeModal,n=e.nextModal,r=t||n,a=this.modalsState[r];if((null==a?void 0:a.type)===zn.PAGE&&(null==a?void 0:a.modalElement)){var i=s()({},a);this.initPageModal(a);var o=s()({},a),c=!1;i.expandable===o.expandable?i.translateYFrom!==o.translateYFrom&&(c=!0):c=!0,c&&this.animateTranslate(a,a.translateY)}}},{key:"closeActiveModal",value:function(){this.setState({touchDown:!1,switching:!1}),this.props.platform===x&&this.window.removeEventListener("resize",this.updateModalTranslate,!1);var e=this.state.prevModal;if(!e)return Wn("[closeActiveModal] prevModal is ".concat(e));var t=this.modalsState[e];this.waitTransitionFinish(t,this.prevNextSwitchEndHandler),this.animateTranslate(t,100),this.setMaskOpacity(t,0)}},{key:"onPageTouchMove",value:function(e,t){var n=e.shiftY,r=e.startT,a=e.originalEvent,i=a.target;if(e.isY){if(!t.innerElement.contains(i))return a.preventDefault();a.stopPropagation();var o=t.expandable,c=t.contentScrolled,s=t.collapsed,u=t.expanded;if(this.state.touchDown||(t.touchStartTime=r,t.touchStartContentScrollTop=t.contentElement.scrollTop,this.setState({touchDown:!0})),!c&&(null===t.touchMovePositive&&(t.touchMovePositive=n>0),!t.expandable||s||u&&t.touchMovePositive&&0===t.touchStartContentScrollTop||t.headerElement.contains(i))){if(a.preventDefault(),!o&&n<0)return;!this.state.dragging&&this.setState({dragging:!0});var l=n/this.window.innerHeight*100,d=Ce(l,72,.8,this.props.platform===N||this.props.platform===R);t.touchShiftYPercent=l,t.translateYCurrent=Kn(t.translateY+d),this.animateTranslate(t,t.translateYCurrent),this.setMaskOpacity(t)}}else this.viewportRef.current.contains(i)&&a.preventDefault()}},{key:"onCardTouchMove",value:function(e,t){var n=e.originalEvent,r=e.shiftY,a=e.startT,i=n.target;if(t.innerElement.contains(i)){this.state.touchDown||(t.touchStartTime=a,this.setState({touchDown:!0,dragging:!0}));var o=r/t.innerElement.offsetHeight*100,c=Ce(o,72,1.2,this.props.platform===N||this.props.platform===R);t.touchShiftYPercent=o,t.translateYCurrent=Math.max(0,t.translateY+c),this.animateTranslate(t,t.translateYCurrent),this.setMaskOpacity(t)}}},{key:"onPageTouchEnd",value:function(e,t){var n,r=this,a=e.startY,i=e.shiftY;if(t.contentScrolled=!1,t.touchMovePositive=null,this.state.dragging){var o=(a+i)/this.window.innerHeight*100,c=t.translateYCurrent;c=Kn(c+c/(Date.now()-t.touchStartTime.getTime())*240*.6*(t.touchShiftYPercent<0?-1:1)),100!==(c=100!==t.settlingHeight?qn(c,t.expandedRange)?t.expandedRange[0]:qn(c,t.collapsedRange)?t.translateYFrom:qn(c,t.hiddenRange)?100:t.translateYFrom:qn(c,[0,25])?0:100)&&o>=75&&(c=100),t.translateY=c,t.translateYCurrent=c,t.collapsed=c>0&&c<o,t.expanded=0===c,t.hidden=100===c,t.hidden&&this.doCloseModal(t),n=function(){t.hidden||r.animateTranslate(t,t.translateY),r.setMaskOpacity(t)}}this.setState({touchDown:!1,dragging:!1},n)}},{key:"onCardTouchEnd",value:function(e){var t,n=this;if(this.state.dragging){var r=e.translateYCurrent,a=r/(Date.now()-e.touchStartTime.getTime())*240*.6*(e.touchShiftYPercent<0?-1:1);r=(r=Math.max(0,r+a))>=30?100:0,e.translateY=r,e.hidden=100===r,e.hidden&&this.doCloseModal(e),t=function(){e.hidden||n.animateTranslate(e,e.translateY),n.setMaskOpacity(e)}}this.setState({touchDown:!1,dragging:!1},t)}},{key:"waitTransitionFinish",value:function(e,t){if(U.supported){e.innerElement.addEventListener(U.name,(function n(){e.innerElement.removeEventListener(U.name,n),t()}))}else setTimeout(t,this.props.platform===N||this.props.platform===R?320:400)}},{key:"switchPrevNext",value:function(){var e=this,t=this.state,n=t.prevModal,r=t.nextModal,a=this.modalsState[n],i=this.modalsState[r];var o=!!a&&a.type===zn.PAGE,c=!!a&&a.type===zn.CARD,s=!!i&&i.type===zn.PAGE,u=!!i&&i.type===zn.CARD;if(a&&(u||c&&s))return this.waitTransitionFinish(a,(function(){e.activeTransitions+=1,e.waitTransitionFinish(i,e.prevNextSwitchEndHandler),e.animateTranslate(i,i.translateY)})),this.animateTranslate(a,100);a&&s&&(this.activeTransitions+=1,this.waitTransitionFinish(a,this.prevNextSwitchEndHandler),o&&a.translateY<=i.translateYFrom&&!this.state.isBack?this.animateTranslate(a,i.translateYFrom+10):this.animateTranslate(a,100)),this.activeTransitions+=1,this.waitTransitionFinish(i,this.prevNextSwitchEndHandler),this.animateTranslate(i,i.translateY)}},{key:"animateTranslate",value:function(e,t){var n="animateTranslateFrame".concat(e.id);cancelAnimationFrame(this.frameIds[n]),this.frameIds[n]=requestAnimationFrame((function(){if(Hn(e.innerElement,"translate3d(0, ".concat(t,"%, 0)")),e.type===zn.PAGE&&e.footerElement){var n=e.footerElement.offsetHeight,r=e.innerElement.offsetHeight*(t/100);Hn(e.footerElement,"translateY(calc(".concat(n,"px * -").concat(r/n,"))"))}}))}},{key:"setMaskOpacity",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===n&&this.state.history[0]!==e.id||(cancelAnimationFrame(this.maskAnimationFrame),this.maskAnimationFrame=requestAnimationFrame((function(){if(t.maskElementRef.current){var r=e.translateY,a=e.translateYCurrent,i=null===n?1-(a-r)/(100-r)||0:n;t.maskElementRef.current.style.opacity=Math.max(0,Math.min(100,i)).toString()}})))}},{key:"render",value:function(){var e=this,t=this.state,n=t.prevModal,r=t.activeModal,a=t.nextModal,i=t.visibleModals,o=t.animated,c=t.touchDown,u=t.dragging,l=t.switching;return r||n||a||o?Object(E.a)(We.Provider,{value:!0},Object(E.a)(Gn.Provider,{value:this.modalRootContext},Object(E.a)(ke,{vkuiClass:A(F("ModalRoot",this.props.platform),{"ModalRoot--vkapps":this.props.configProvider.webviewType===q.VKAPPS,"ModalRoot--touched":c,"ModalRoot--switching":l}),onMove:this.onTouchMove,onEnd:this.onTouchEnd,onScroll:this.onScroll},Object(E.a)("div",{vkuiClass:"ModalRoot__mask",onClick:this.triggerActiveModalClose,ref:this.maskElementRef}),Object(E.a)("div",{vkuiClass:"ModalRoot__viewport",ref:this.viewportRef},this.getModals().map((function(t){var o=ge(t.props);if(!i.includes(o))return null;var c=s()({},e.modalsState[o]),l=c.type===zn.PAGE,d="modal-".concat(o);return Object(E.a)("div",{key:d,ref:function(t){return e.modalsState[o].modalElement=t},vkuiClass:A("ModalRoot__modal",{"ModalRoot__modal--active":o===r,"ModalRoot__modal--prev":o===n,"ModalRoot__modal--next":o===a,"ModalRoot__modal--dragging":u,"ModalRoot__modal--expandable":l&&c.expandable,"ModalRoot__modal--expanded":l&&c.expanded,"ModalRoot__modal--collapsed":l&&c.collapsed})},t)})))))):null}},{key:"document",get:function(){return this.props.document}},{key:"window",get:function(){return this.props.window}}]),n}(O.Component),Zn=ee($(Object(K.e)(Yn)),X,"configProvider"),Qn=(be("ModalRoot"),function(e){v()(n,e);var t=b()(n);function n(e){var r;l()(this,n),r=t.call(this,e),y()(h()(r),"modalsState",void 0),y()(h()(r),"maskElementRef",void 0),y()(h()(r),"maskAnimationFrame",void 0),y()(h()(r),"modalRootContext",void 0),y()(h()(r),"activeTransitions",void 0),y()(h()(r),"handleKeyDownEsc",(function(e){"Escape"===e.key&&r.triggerActiveModalClose()})),y()(h()(r),"componentWillUnmount",(function(){document.removeEventListener("keydown",r.handleKeyDownEsc)})),y()(h()(r),"prevNextSwitchEndHandler",(function(){if(r.activeTransitions=Math.max(0,r.activeTransitions-1),!(r.activeTransitions>0)){var e=r.state.nextModal,t={prevModal:null,nextModal:null,visibleModals:[e],activeModal:e,animated:!1,switching:!1};e||(t.history=[]),r.setState(t)}})),y()(h()(r),"triggerActiveModalClose",(function(){var e=r.modalsState[r.state.activeModal];e&&r.doCloseModal(e)})),y()(h()(r),"doCloseModal",(function(e){oe(e.onClose)?e.onClose():oe(r.props.onClose)&&r.props.onClose(e.id)}));var a=e.activeModal;return r.state={activeModal:null,prevModal:null,nextModal:a,visibleModals:a?[a]:[],animated:!!a,switching:!1,history:a?[a]:[],isBack:!1,inited:!1},r.maskElementRef=w.a.createRef(),r.activeTransitions=0,r.initModalsState(),r.modalRootContext={updateModalHeight:function(){},registerModal:function(e){var t=e.id,n=o()(e,["id"]);return Object.assign(r.modalsState[t],n)},onClose:r.triggerActiveModalClose,isInsideModal:!0},r}return f()(n,[{key:"initModalsState",value:function(){this.modalsState=this.modals.reduce((function(e,t){var n=t.props,r={id:ge(t.props),onClose:t.props.onClose,dynamicContentHeight:!!n.dynamicContentHeight};return"number"==typeof n.settlingHeight&&(r.settlingHeight=n.settlingHeight),e[r.id]=r,e}),{})}},{key:"componentDidMount",value:function(){this.initActiveModal(),document.addEventListener("keydown",this.handleKeyDownEsc)}},{key:"componentDidUpdate",value:function(e,t){var n=this;if(this.props.activeModal!==e.activeModal){var r=this.props.activeModal,a=e.activeModal;0;var i=Fn()(this.state.history),o=!1;return null===r?i=[]:i.includes(r)?(i=i.splice(0,i.indexOf(r)+1),o=!0):i.push(r),this.setState({activeModal:null,nextModal:r,prevModal:a,visibleModals:[r,a],history:i,isBack:o,animated:!0,inited:!1,switching:!1},(function(){null===r?n.closeActiveModal():n.initActiveModal()}))}this.state.switching&&!t.switching&&requestAnimationFrame((function(){return n.switchPrevNext()}))}},{key:"initActiveModal",value:function(){var e=this.state.activeModal||this.state.nextModal;if(e){var t=this.modalsState[e];switch(t.type){case zn.PAGE:t.settlingHeight=t.settlingHeight||75;break;case zn.CARD:break;default:0}this.setState({inited:!0,switching:!0})}}},{key:"closeActiveModal",value:function(){var e=this.state.prevModal;var t=this.modalsState[e];this.waitTransitionFinish(t,this.prevNextSwitchEndHandler),this.animateModalOpacity(t,!1),this.setMaskOpacity(t,0)}},{key:"waitTransitionFinish",value:function(e,t){if(U.supported){e.innerElement.addEventListener(U.name,(function n(){e.innerElement.removeEventListener(U.name,n),t()}))}else setTimeout(t,this.props.platform===N||this.props.platform===R?320:400)}},{key:"switchPrevNext",value:function(){var e=this,t=this.state,n=t.prevModal,r=t.nextModal,a=this.modalsState[n],i=this.modalsState[r];var o=!!a&&a.type===zn.CARD,c=!!i&&i.type===zn.PAGE,s=!!i&&i.type===zn.CARD;if(a&&(s||o&&c))return this.activeTransitions+=1,this.waitTransitionFinish(a,(function(){e.waitTransitionFinish(i,e.prevNextSwitchEndHandler),e.animateModalOpacity(i,!0)})),void requestAnimationFrame((function(){e.animateModalOpacity(a,!1)}));a&&c&&(this.activeTransitions+=1,this.waitTransitionFinish(a,this.prevNextSwitchEndHandler),requestAnimationFrame((function(){e.animateModalOpacity(a,!1)}))),this.activeTransitions+=1,this.waitTransitionFinish(i,this.prevNextSwitchEndHandler),requestAnimationFrame((function(){e.animateModalOpacity(i,!0)}))}},{key:"animateModalOpacity",value:function(e,t){e.innerElement.style.opacity=t?"1":"0"}},{key:"setMaskOpacity",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===n&&this.state.history[0]!==e.id||(cancelAnimationFrame(this.maskAnimationFrame),this.maskAnimationFrame=requestAnimationFrame((function(){if(t.maskElementRef.current){var r=e.translateY,a=e.translateYCurrent,i=null===n?1-(a-r)/(100-r)||0:n;t.maskElementRef.current.style.opacity=Math.max(0,Math.min(100,i)).toString()}})))}},{key:"render",value:function(){var e=this.state,t=e.prevModal,n=e.activeModal,r=e.nextModal,a=e.visibleModals,i=e.animated;return n||t||r||i?Object(E.a)(Gn.Provider,{value:this.modalRootContext},Object(E.a)("div",{vkuiClass:A(F("ModalRoot",this.props.platform),{"ModalRoot--vkapps":this.props.configProvider.webviewType===q.VKAPPS},"ModalRoot--desktop")},Object(E.a)("div",{vkuiClass:"ModalRoot__mask",onClick:this.triggerActiveModalClose,ref:this.maskElementRef}),Object(E.a)("div",{vkuiClass:"ModalRoot__viewport"},this.modals.map((function(e){var i=ge(e.props);if(!a.includes(i))return null;var o="modal-".concat(i);return Object(E.a)("div",{key:o,vkuiClass:A("ModalRoot__modal",{"ModalRoot__modal--active":i===n,"ModalRoot__modal--prev":i===t,"ModalRoot__modal--next":i===r})},e)}))))):null}},{key:"document",get:function(){return this.props.document}},{key:"window",get:function(){return this.props.window}},{key:"modals",get:function(){return O.Children.toArray(this.props.children)}}]),n}(O.Component)),Jn=ee($(Object(K.e)(Qn)),X,"configProvider"),Xn=function(e){var t=e.viewWidth,n=e.viewHeight,r=e.hasMouse,a=t>=xe.SMALL_TABLET&&(r||n>=Re.MEDIUM)?Jn:Zn;return Object(E.a)(a,e)};Xn.displayName="ModalRoot";var $n=Fe(Xn,{viewWidth:!0,viewHeight:!0,hasMouse:!0});function er(e){return function(t){var n=Object(O.useContext)(Gn).updateModalHeight;return Object(E.a)(e,a()({},t,{updateModalHeight:n}))}}be("ModalPage");var tr=function(e){var t=Ve(),n=Object(O.useContext)(Vn).updateModalHeight,r=e.children,i=e.header,c=e.viewWidth,s=e.viewHeight,u=e.sizeX,l=e.hasMouse,d=e.onClose,f=(e.settlingHeight,e.dynamicContentHeight,e.getModalContentRef),p=(e.nav,o()(e,["children","header","viewWidth","viewHeight","sizeX","hasMouse","onClose","settlingHeight","dynamicContentHeight","getModalContentRef","nav"]));Object(O.useEffect)((function(){n()}),[r]);var h=c>=xe.SMALL_TABLET&&(l||s>=Re.MEDIUM),m=c>=xe.SMALL_TABLET,v=Object(O.useContext)(Vn),g=Un(ge(e),zn.PAGE).refs;return Object(E.a)("div",a()({},p,{vkuiClass:A(F("ModalPage",t),"ModalPage--sizeX-".concat(u),{"ModalPage--desktop":h})}),Object(E.a)("div",{vkuiClass:"ModalPage__in-wrap",ref:g.innerElement},Object(E.a)("div",{vkuiClass:"ModalPage__in"},Object(E.a)("div",{vkuiClass:"ModalPage__header",ref:g.headerElement},i),Object(E.a)("div",{vkuiClass:"ModalPage__content-wrap"},Object(E.a)("div",{vkuiClass:"ModalPage__content",ref:de(g.contentElement,f)},Object(E.a)("div",{vkuiClass:"ModalPage__content-in"},r))),m&&Object(E.a)(vn,{onClick:d||v.onClose}))))};tr.defaultProps={settlingHeight:75};var nr=Fe(tr,{viewWidth:!0,viewHeight:!0,sizeX:!0,hasMouse:!0}),rr=function(){return Object(O.useContext)(Be)},ar=function(e){var t=Ve(),n=rr().sizeX,r=e.left,i=e.right,c=e.children,s=e.separator,u=e.getRef,l=o()(e,["left","right","children","separator","getRef"]),d=ue(c),f=s&&t===R;return Object(E.a)("div",a()({},l,{vkuiClass:A(F("ModalPageHeader",t),"ModalPageHeader--sizeX-".concat(n)),ref:u}),Object(E.a)("div",{vkuiClass:"ModalPageHeader__in"},Object(E.a)("div",{vkuiClass:"ModalPageHeader__left"},r),Object(E.a)("div",{vkuiClass:"ModalPageHeader__content"},Object(E.a)("div",{vkuiClass:"ModalPageHeader__content-in"},d?Object(E.a)("span",null,c):c)),Object(E.a)("div",{vkuiClass:"ModalPageHeader__right"},i)),f&&Object(E.a)(st,{wide:!0,vkuiClass:"ModalPageHeader__separator"}))};ar.defaultProps={separator:!0};var ir=ar,or=n(1320),cr=Fe((function(e){var t=e.getRootRef,n=e.icon,r=e.header,i=e.subheader,c=e.children,s=e.actions,u=e.actionsLayout,l=e.viewWidth,d=e.hasMouse,f=e.viewHeight,p=e.onClose,h=o()(e,["getRootRef","icon","header","subheader","children","actions","actionsLayout","viewWidth","hasMouse","viewHeight","onClose"]),m=Ve(),v=l>=xe.SMALL_TABLET&&(d||f>=Re.MEDIUM),g=l>=xe.SMALL_TABLET,b=m===x&&!g;return Object(E.a)("div",a()({},h,{vkuiClass:A(F("ModalCardBase",m),{"ModalCardBase--desktop":v}),ref:t}),Object(E.a)("div",{vkuiClass:"ModalCardBase__container"},se(n)&&Object(E.a)("div",{vkuiClass:"ModalCardBase__icon"},n),se(r)&&Object(E.a)(tt,{level:"2",weight:"semibold",vkuiClass:"ModalCardBase__header"},r),se(i)&&Object(E.a)(et,{weight:"regular",vkuiClass:"ModalCardBase__subheader"},i),c,se(s)&&Object(E.a)("div",{vkuiClass:A("ModalCardBase__actions",{"ModalCardBase__actions--v":"vertical"===u})},s),g&&Object(E.a)(vn,{onClick:p}),b&&Object(E.a)(rt,{vkuiClass:"ModalCard__dismiss",onClick:p},Object(E.a)(or.a,null))))}),{viewWidth:!0,viewHeight:!0,hasMouse:!0}),sr=(be("ModalCard"),function(e){var t=e.icon,n=e.header,r=e.subheader,i=e.children,c=e.actions,s=e.actionsLayout,u=e.onClose,l=e.platform,d=e.viewWidth,f=e.viewHeight,p=e.hasMouse,h=(e.nav,o()(e,["icon","header","subheader","children","actions","actionsLayout","onClose","platform","viewWidth","viewHeight","hasMouse","nav"])),m=d>=xe.SMALL_TABLET&&(p||f>=Re.MEDIUM),v=Object(O.useContext)(Gn),g=Un(ge(e),zn.CARD).refs;return Object(E.a)("div",a()({},h,{vkuiClass:A(F("ModalCard",l),{"ModalCard--desktop":m})}),Object(E.a)(cr,{vkuiClass:"ModalCard__in",getRootRef:g.innerElement,icon:t,header:n,subheader:r,actions:c,actionsLayout:s,onClose:u||v.onClose},i))});sr.defaultProps={actionsLayout:"horizontal"};var ur=Fe($(sr),{viewWidth:!0,viewHeight:!0,hasMouse:!0}),lr=function(e){var t=e.icon,n=e.sizeY,r=e.children,i=e.Component,c=o()(e,["icon","sizeY","children","Component"]),s=Ve();return Object(E.a)(Xe,a()({},c,{Component:c.href?"a":i,activeEffectDelay:200,activeMode:s===x?"opacity":"IconButton--active",vkuiClass:A(F("IconButton",s),"IconButton--sizeY-".concat(n))}),t||r)};lr.defaultProps={Component:"button"};var dr=Fe(lr,{sizeY:!0}),fr=function(e){var t=e.mode,n=e.children,r=e.getRootRef,i=o()(e,["mode","children","getRootRef"]),c=Ve();return Object(E.a)("div",a()({},i,{ref:r,vkuiClass:A(F("Card",c),"Card--md-".concat(t))}),Object(E.a)("div",{vkuiClass:"Card__in"},n))};fr.defaultProps={mode:"tint"};var pr=fr,hr=function(e){var t=e.subtitle,n=e.header,r=e.text,i=e.caption,c=e.className,s=e.mode,u=e.style,l=e.getRootRef,d=e.getRef,f=e.maxHeight,p=e.image,h=e.src,m=e.srcSet,v=e.alt,g=(e.width,e.height),b=e.crossOrigin,_=e.decoding,y=e.loading,O=e.referrerPolicy,w=e.sizes,C=e.useMap,S=o()(e,["subtitle","header","text","caption","className","mode","style","getRootRef","getRef","maxHeight","image","src","srcSet","alt","width","height","crossOrigin","decoding","loading","referrerPolicy","sizes","useMap"]),A=Ve(),k=S.disabled||"function"!=typeof S.onClick,j=p||h;return Object(E.a)(pr,{mode:s,getRootRef:l,vkuiClass:F("ContentCard",A),style:u,className:c},Object(E.a)(Xe,a()({},S,{disabled:k,vkuiClass:"ContentCard__tappable"}),(j||m)&&Object(E.a)("img",{ref:d,vkuiClass:"ContentCard__img",src:j,srcSet:m,alt:v,crossOrigin:b,decoding:_,loading:y,referrerPolicy:O,sizes:w,useMap:C,height:g,style:{maxHeight:f},width:"100%"}),Object(E.a)("div",{vkuiClass:"ContentCard__body"},se(t)&&Object(E.a)(pt,{caps:!0,vkuiClass:"ContentCard__text",weight:"semibold",level:"3"},t),se(n)&&Object(E.a)(tt,{vkuiClass:"ContentCard__text",weight:"semibold",level:"3"},n),se(r)&&Object(E.a)($e,{vkuiClass:"ContentCard__text",weight:"regular"},r),se(i)&&Object(E.a)(pt,{vkuiClass:"ContentCard__text",weight:"regular",level:"1"},i))))};hr.defaultProps={mode:"shadow"};var mr=hr,vr=function(e){return rr().sizeY===Ne.COMPACT?Object(E.a)($e,a()({weight:"regular"},e)):Object(E.a)(tt,a()({level:"3",weight:"regular"},e))},gr=Fe((function(e){var t=e.badge,n=e.before,r=e.indicator,i=e.children,c=e.after,s=e.description,u=e.expandable,l=e.multiline,d=e.sizeY,f=o()(e,["badge","before","indicator","children","after","description","expandable","multiline","sizeY"]),p=Ve(),h=se(c)||u&&p===x;return Object(E.a)(Xe,a()({},f,{vkuiClass:A(F("SimpleCell",p),{"SimpleCell--exp":u,"SimpleCell--mult":l},"SimpleCell--sizeY-".concat(d))}),n,Object(E.a)("div",{vkuiClass:"SimpleCell__main"},Object(E.a)("div",{vkuiClass:"SimpleCell__content"},Object(E.a)(vr,{vkuiClass:"SimpleCell__children"},i),se(t)&&Object(E.a)("span",{vkuiClass:"SimpleCell__badge"},t)),s&&Object(E.a)(Ht,{Component:"span",weight:"regular",vkuiClass:"SimpleCell__description"},s)),se(r)&&Object(E.a)(vr,{Component:"span",vkuiClass:"SimpleCell__indicator"},r),h&&Object(E.a)("div",{vkuiClass:"SimpleCell__after"},c,u&&p===x&&Object(E.a)(Pt.a,null)))}),{sizeY:!0}),br=function(e){var t=e.centered,n=void 0!==t&&t,r=e.mode,i=void 0===r?"primary":r,c=o()(e,["centered","mode"]),s=Ve();return Object(E.a)(gr,a()({stopPropagation:!0},c,{vkuiClass:A(F("CellButton",s),"CellButton--".concat(i),y()({},"CellButton--centered",n))}))},_r=function(e){var t=e.platform,n=e.mode,r=o()(e,["platform","mode"]);if(t===I.IOS)switch(n){case"primary":case"tertiary":return Object(E.a)(tt,a()({weight:"semibold",level:"3"},r));case"secondary":return Object(E.a)(pt,a()({level:"1",weight:"semibold",caps:!0},r))}if(t===I.VKCOM)switch(n){case"primary":return Object(E.a)(et,a()({weight:"regular"},r));case"secondary":case"tertiary":return Object(E.a)(pt,a()({level:"1",weight:"regular"},r))}switch(n){case"primary":case"tertiary":return Object(E.a)(et,a()({weight:"medium"},r));case"secondary":return Object(E.a)(pt,a()({level:"1",weight:"medium",caps:!0},r))}},yr=function(e){var t=e.platform,n=o()(e,["platform"]);return t===I.VKCOM?Object(E.a)(Ht,a()({weight:"regular"},n)):Object(E.a)($e,a()({weight:"regular"},n))},Er=function(e){var t=e.mode,n=o()(e,["mode"]);return"secondary"===t?Object(E.a)(Ht,a()({weight:"regular"},n)):Object(E.a)(pt,a()({weight:"regular",level:"1"},n))},Or=function(e){var t=e.mode,n=e.children,r=e.subtitle,i=e.indicator,c=e.aside,s=e.getRootRef,u=e.multiline,l=o()(e,["mode","children","subtitle","indicator","aside","getRootRef","multiline"]),d=Ve();return Object(E.a)("header",a()({},l,{ref:s,vkuiClass:A(F("Header",d),"Header--mode-".concat(t),{"Header--pi":ue(i)})}),Object(E.a)("div",{vkuiClass:"Header__main"},Object(E.a)(_r,{vkuiClass:"Header__content",Component:"h3",mode:t,platform:d},Object(E.a)("span",{vkuiClass:A("Header__content-in",{"Header__content-in--multiline":u})},n),se(i)&&Object(E.a)(pt,{vkuiClass:"Header__indicator",weight:"primary"===t||"secondary"===t?"medium":"regular",level:"1"},i)),se(r)&&Object(E.a)(Er,{vkuiClass:"Header__subtitle",Component:"span"},r)),se(c)&&Object(E.a)(yr,{vkuiClass:"Header__aside",Component:"span",platform:d},c))};Or.defaultProps={mode:"primary"};var wr=Or,Cr=function(e){var t=e.header,n=e.description,r=e.children,i=e.separator,c=e.getRootRef,s=e.mode,u=e.sizeX,l=o()(e,["header","description","children","separator","getRootRef","mode","sizeX"]),d=Object(O.useContext)(Gn).isInsideModal,f=Ve(),p=s;return s||(p=u===Ne.COMPACT||d?"plain":"card"),Object(E.a)("section",a()({},l,{ref:c,vkuiClass:A(F("Group",f),"Group--sizeX-".concat(u),"Group--".concat(p))}),Object(E.a)("div",{vkuiClass:"Group__inner"},t,r,se(n)&&Object(E.a)(pt,{vkuiClass:"Group__description",weight:"regular",level:"1"},n)),"hide"!==i&&Object(E.a)(st,{vkuiClass:A("Group__separator",{"Group__separator--force":"show"===i}),expanded:"card"===p}))};Cr.defaultProps={separator:"auto"};var Sr=Fe(Cr,{sizeX:!0}),Ar=function(e){var t=e.mode,n=e.children,r=e.to,i=o()(e,["mode","children","to"]);return Object(E.a)("div",a()({role:"presentation"},i,{vkuiClass:A("Gradient","Gradient--md-".concat(t),"Gradient--to-".concat(r))}),n)};Ar.defaultProps={mode:"tint",to:"top"};var kr=Ar,jr=Object(O.createContext)({toggleDrag:fe}),Tr=function(e){var t=e.children,n=o()(e,["children"]),r=Ve(),i=Object(O.useState)(!1),c=It()(i,2),s=c[0],u=c[1];return Object(E.a)("div",a()({role:"list"},n,{vkuiClass:A(F("List",r),{"List--dragging":s})}),Object(E.a)(jr.Provider,{value:Object(O.useMemo)((function(){return{toggleDrag:u}}),[])},t))},Ir=!1;function Pr(){Ir||(Object(Gt.a)(new Ut.a({id:"check_box_off_24",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="check_box_off_24"><path d="M16.872 2c1.783 0 2.43.186 3.082.534.651.349 1.163.86 1.512 1.512S22 5.345 22 7.128v9.744c0 1.783-.186 2.43-.534 3.082a3.635 3.635 0 01-1.512 1.512c-.652.348-1.299.534-3.082.534H7.128c-1.783 0-2.43-.186-3.082-.534s-1.163-.86-1.512-1.512C2.186 19.302 2 18.655 2 16.872V7.128c0-1.783.186-2.43.534-3.082a3.635 3.635 0 011.512-1.512C4.698 2.186 5.345 2 7.128 2zm.564 2H6.564c-.892 0-1.215.093-1.54.267-.327.174-.583.43-.757.756-.174.326-.267.65-.267 1.54v10.873c0 .892.093 1.215.267 1.54.174.327.43.583.756.757.326.174.65.267 1.54.267h10.873c.892 0 1.215-.093 1.54-.267.327-.174.583-.43.757-.756.174-.326.267-.65.267-1.54V6.563c0-.892-.093-1.215-.267-1.54a1.817 1.817 0 00-.756-.757c-.326-.174-.65-.267-1.54-.267z" fill="currentColor" /></symbol>'})),Ir=!0)}var Dr=function(e){return Object(Gt.b)((function(){Pr()}),[]),w.a.createElement(Wt.a,Object(zt.assign)({},e,{viewBox:"0 0 24 24",id:"check_box_off_24",width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};Dr.mountIcon=Pr;var Nr=Dr,xr=!1;function Rr(){xr||(Object(Gt.a)(new Ut.a({id:"check_circle_off_24",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="check_circle_off_24"><path d="M12 0c6.629 0 12 5.373 12 12 0 6.629-5.373 12-12 12-6.629 0-12-5.373-12-12C0 5.371 5.373 0 12 0zm0 1.5C6.2 1.5 1.5 6.2 1.5 12S6.2 22.5 12 22.5 22.5 17.8 22.5 12 17.8 1.5 12 1.5z" fill="currentColor" /></symbol>'})),xr=!0)}var Mr=function(e){return Object(Gt.b)((function(){Rr()}),[]),w.a.createElement(Wt.a,Object(zt.assign)({},e,{viewBox:"0 0 24 24",id:"check_circle_off_24",width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};Mr.mountIcon=Rr;var Lr=Mr,Br=!1;function Fr(){Br||(Object(Gt.a)(new Ut.a({id:"check_box_on_24",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="check_box_on_24"><path clip-rule="evenodd" d="M2.436 4.184C2 5.04 2 6.16 2 8.4v7.2c0 2.24 0 3.36.436 4.216a4 4 0 001.748 1.748C5.04 22 6.16 22 8.4 22h7.2c2.24 0 3.36 0 4.216-.436a4 4 0 001.748-1.748C22 18.96 22 17.84 22 15.6V8.4c0-2.24 0-3.36-.436-4.216a4 4 0 00-1.748-1.748C18.96 2 17.84 2 15.6 2H8.4c-2.24 0-3.36 0-4.216.436a4 4 0 00-1.748 1.748zm15.771 5.023a1 1 0 00-1.414-1.414L10 14.586l-2.793-2.793a1 1 0 00-1.414 1.414l3.5 3.5a1 1 0 001.414 0z" fill="currentColor" fill-rule="evenodd" /></symbol>'})),Br=!0)}var Hr=function(e){return Object(Gt.b)((function(){Fr()}),[]),w.a.createElement(Wt.a,Object(zt.assign)({},e,{viewBox:"0 0 24 24",id:"check_box_on_24",width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};Hr.mountIcon=Fr;var Vr=Hr,Ur=n(1161),zr=!1;function Gr(){zr||(Object(Gt.a)(new Ut.a({id:"reorder_24",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="reorder_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path d="M21 18a1 1 0 01-1 1H4a1 1 0 010-2h16a1 1 0 011 1zm0-4a1 1 0 01-1 1H4a1 1 0 010-2h16a1 1 0 011 1zm0-4a1 1 0 01-1 1H4a1 1 0 010-2h16a1 1 0 011 1zM3 6a1 1 0 011-1h16a1 1 0 010 2H4a1 1 0 01-1-1z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),zr=!0)}var Wr=function(e){return Object(Gt.b)((function(){Gr()}),[]),w.a.createElement(Wt.a,Object(zt.assign)({},e,{viewBox:"0 0 24 24",id:"reorder_24",width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};Wr.mountIcon=Gr;var qr=Wr,Kr=!1;function Yr(){Kr||(Object(Gt.a)(new Ut.a({id:"reorder_ios_24",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="reorder_ios_24"><g fill="none" fill-rule="evenodd"><path opacity=".1" d="M0 0h24v24H0z" /><path d="M2.75 7h18.5a.75.75 0 110 1.5H2.75a.75.75 0 010-1.5zm0 4h18.5a.75.75 0 110 1.5H2.75a.75.75 0 110-1.5zm0 4h18.5a.75.75 0 110 1.5H2.75a.75.75 0 110-1.5z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),Kr=!0)}var Zr=function(e){return Object(Gt.b)((function(){Yr()}),[]),w.a.createElement(Wt.a,Object(zt.assign)({},e,{viewBox:"0 0 24 24",id:"reorder_ios_24",width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};Zr.mountIcon=Yr;var Qr=Zr,Jr=n(673);function Xr(e,t,n,r){var a=Nt(t,n,r);Object(O.useEffect)((function(){return n?a.add(e):a.remove()}),[Boolean(n)])}var $r=function(e){var t=e.children,n=e.onRemove,r=e.removePlaceholder,i=void 0===r?"Удалить":r,c=e.align,s=void 0===c?"center":c,u=o()(e,["children","onRemove","removePlaceholder","align"]),l=Ve(),d=rr().sizeY,f=Object(K.d)().document,p=Object(O.useRef)(null),h=Object(O.useState)(!1),m=It()(h,2),v=m[0],g=m[1],b=Object(O.useState)(0),_=It()(b,2),y=_[0],w=_[1];Xr(f,"click",v&&function(){g(!1),w(0)});var C=function(e){e.nativeEvent.stopImmediatePropagation(),e.preventDefault(),n&&n(e)};Object(O.useEffect)((function(){var e=null==p?void 0:p.current;v&&e&&w(e.offsetWidth)}),[v]);var S=he(i);return Object(E.a)("div",a()({},u,{vkuiClass:A(F("Removable",l),"Removable--".concat(s),"Removable--sizeY-".concat(d))}),(l===N||l===R)&&Object(E.a)("div",{vkuiClass:"Removable__content"},t,Object(E.a)(dr,{"aria-label":S,vkuiClass:"Removable__action",onClick:C},Object(E.a)(Jr.a,{role:"presentation"}))),l===x&&Object(E.a)(O.Fragment,null,Object(E.a)("div",{vkuiClass:"Removable__content",style:{transform:"translateX(-".concat(y,"px)")}},Object(E.a)(dr,{hasActive:!1,hasHover:!1,"aria-label":S,vkuiClass:"Removable__action Removable__toggle",onClick:function(e){e.nativeEvent.stopPropagation(),e.preventDefault(),g(!0)}},Object(E.a)("i",{vkuiClass:"Removable__toggle-in",role:"presentation"})),t,Object(E.a)("span",{vkuiClass:"Removable__offset","aria-hidden":"true"})),Object(E.a)(Xe,{Component:"button",hasActive:!1,hasHover:!1,disabled:!v,getRootRef:p,vkuiClass:"Removable__remove",onClick:C,onTransitionEnd:function(){var e;v&&(null==p||null===(e=p.current)||void 0===e||e.focus())},style:{transform:"translateX(-".concat(y,"px)")}},Object(E.a)("span",{vkuiClass:"Removable__remove-in"},i))))},ea=function(e){var t=e.onRemove,n=e.removePlaceholder,r=(e.onDragFinish,e.className),i=e.style,c=e.before,s=e.after,u=e.disabled,l=e.removable,d=e.draggable,f=e.selectable,p=e.Component,h=e.onChange,m=e.name,v=e.checked,g=e.defaultChecked,b=(e.getRootRef,o()(e,["onRemove","removePlaceholder","onDragFinish","className","style","before","after","disabled","removable","draggable","selectable","Component","onChange","name","checked","defaultChecked","getRootRef"])),_=Object(O.useRef)(null),y=Ve(),w=Object(O.useState)(!1),C=It()(w,2),S=C[0],k=C[1],j=Object(O.useState)(void 0),T=It()(j,2),I=T[0],P=T[1],D=Object(O.useState)(void 0),M=It()(D,2),L=M[0],B=M[1],H=Object(O.useState)(void 0),V=It()(H,2),U=V[0],z=V[1],G=Object(O.useState)(0),W=It()(G,2),q=W[0],K=W[1],Y=Object(O.useState)(void 0),Z=It()(Y,2),Q=Z[0],J=Z[1],X=function(){var e=null==_?void 0:_.current;k(!0);var t=Array.from(e.parentElement.childNodes),n=t.indexOf(e);B(n),z(n),P(t),K(0)},$=function(e){e.originalEvent.preventDefault();var t=null==_?void 0:_.current;t.style.transform="translateY(".concat(e.shiftY,"px)"),J(q-e.shiftY<0?"down":"up"),K(e.shiftY),z(L),I.forEach((function(e,n){var r=t.getBoundingClientRect(),a=e.getBoundingClientRect();L<n?(r.bottom>a.top+a.height/2&&("down"===Q&&(e.style.transform="translateY(-100%)"),z((function(e){return e+1}))),r.top<a.bottom-a.height/2&&"up"===Q&&(e.style.transform="translateY(0)")):L>n&&(r.top<a.bottom-a.height/2&&("up"===Q&&(e.style.transform="translateY(100%)"),z((function(e){return e-1}))),r.bottom>a.top+a.height/2&&"down"===Q&&(e.style.transform="translateY(0)"))}))},ee=function(){var t=L,n=U;I.forEach((function(e){e.style.transform=null})),P(void 0),z(void 0),B(void 0),J(void 0),K(void 0),k(!1),e.onDragFinish&&e.onDragFinish({from:t,to:n})},te=function(e){e.nativeEvent.stopPropagation(),e.preventDefault()},ne=Object(O.useContext)(jr).toggleDrag;Object(O.useEffect)((function(){if(S)return ne(!0),function(){return ne(!1)}}),[S]);var re=y===N?Nr:Lr,ae=y===N?Vr:Ur.a,ie=Object(E.a)(gr,a()({},b,{disabled:d||l||u,Component:f?"label":p,htmlFor:f?m:void 0,before:Object(E.a)(O.Fragment,null,(y===N||y===R)&&d&&Object(E.a)(ke,{vkuiClass:"Cell__dragger",onStart:X,onMoveY:$,onEnd:ee,onClick:te},Object(E.a)(qr,null)),f&&Object(E.a)(O.Fragment,null,Object(E.a)("input",{type:"checkbox",vkuiClass:"Cell__checkbox",name:m,onChange:h,defaultChecked:g,checked:v,disabled:u}),Object(E.a)("span",{vkuiClass:"Cell__marker"},Object(E.a)(re,{vkuiClass:"Cell__marker-in"}),Object(E.a)(ae,{vkuiClass:"Cell__marker-in Cell__marker-in--checked"}))),c),after:Object(E.a)(O.Fragment,null,y===x&&d&&Object(E.a)(ke,{vkuiClass:"Cell__dragger",onStart:X,onMoveY:$,onEnd:ee,onClick:te},Object(E.a)(Qr,null)),s)}));return Object(E.a)("div",{vkuiClass:A(F("Cell",y),{"Cell--dragging":S,"Cell--removable":l,"Cell--selectable":f,"Cell--disabled":u}),className:r,style:i,ref:_},l?Object(E.a)($r,{removePlaceholder:n,onRemove:function(e){return t(e,null==_?void 0:_.current)}},ie):ie)};ea.defaultProps={removePlaceholder:"Удалить"};var ta=Fe((function(e){var t=e.children,n=e.text,r=e.caption,i=e.before,c=e.after,s=e.bottom,u=e.actions,l=e.multiline,d=e.sizeY,f=o()(e,["children","text","caption","before","after","bottom","actions","multiline","sizeY"]),p=Ve();return Object(E.a)(Xe,a()({},f,{vkuiClass:A(F("RichCell",p),{"RichCell--mult":l},"RichCell--sizeY-".concat(d))}),i,Object(E.a)("div",{vkuiClass:"RichCell__in"},c,Object(E.a)($e,{weight:"medium",vkuiClass:"RichCell__content"},Object(E.a)("div",{vkuiClass:"RichCell__children"},t),se(c)&&Object(E.a)("div",{vkuiClass:"RichCell__after"},c)),se(n)&&Object(E.a)($e,{weight:"regular",vkuiClass:"RichCell__text"},n),se(r)&&Object(E.a)(Ht,{Component:"span",weight:"regular",vkuiClass:"RichCell__caption"},r),(se(s)||se(u))&&Object(E.a)("div",{vkuiClass:"RichCell__bottom"},s,se(u)&&Object(E.a)("div",{vkuiClass:"RichCell__actions"},u))))}),{sizeY:!0}),na=function(e){var t=e.alt,n=e.crossOrigin,r=e.decoding,i=e.height,c=e.loading,u=e.referrerPolicy,l=e.sizes,d=e.src,f=e.srcSet,p=e.useMap,h=e.width,m=e.getRef,v=e.size,g=e.shadow,b=e.mode,_=e.className,y=e.children,w=e.getRootRef,C=e.style,S=e["aria-label"],k=o()(e,["alt","crossOrigin","decoding","height","loading","referrerPolicy","sizes","src","srcSet","useMap","width","getRef","size","shadow","mode","className","children","getRootRef","style","aria-label"]),j=Ve(),T=Object(O.useState)(!1),I=It()(T,2),P=I[0],D=I[1],N="50%";switch(b){case"image":v<64&&(N=4),v>=64&&v<96&&(N=6),v>=96&&(N=8);break;case"app":v<=40&&(N=8),v>40&&v<56&&(N=10),v>=56&&v<64&&(N=12),v>=64&&v<84&&(N=16),v>=84&&(N=18)}var x=d||f;return Object(E.a)("div",a()({},k,{vkuiClass:A(F("Avatar",j),"Avatar--type-".concat(b),"Avatar--sz-".concat(v),{"Avatar--shadow":g,"Avatar--failed":P}),className:_,ref:w,role:x?"img":"presentation","aria-label":t||S,style:s()(s()({},C),{},{width:v,height:v,borderRadius:N})}),x&&Object(E.a)("img",{crossOrigin:n,decoding:r,height:i,loading:c,referrerPolicy:u,sizes:l,src:d,srcSet:f,useMap:p,width:h,ref:m,onError:function(){D(!0)},onLoad:function(){D(!1)},vkuiClass:"Avatar__img",alt:""}),y&&Object(E.a)("div",{vkuiClass:"Avatar__children"},y))};na.defaultProps={size:48,mode:"default",shadow:!0};var ra=na,aa=function(e){var t=e.size,n=e.children,r=o()(e,["size","children"]);return"s"===t?Object(E.a)(pt,a()({level:"2",weight:"regular"},r),n):Object(E.a)(Ht,a()({weight:"regular"},r),n)},ia=function(e){var t=e.className,n=e.header,r=e.style,i=e.subtitle,c=e.size,s=void 0===c?"s":c,u=e.children,l=void 0===u?Object(E.a)(ra,{size:56}):u,d=e.getRootRef,f=e.getRef,p=o()(e,["className","header","style","subtitle","size","children","getRootRef","getRef"]),h=Ve();return Object(E.a)("div",{vkuiClass:A(F("HorizontalCell",h),"HorizontalCell--".concat(s)),ref:d,style:r,className:t},Object(E.a)(Xe,a()({vkuiClass:"HorizontalCell__body",getRootRef:f},p),se(l)&&Object(E.a)("div",{vkuiClass:"HorizontalCell__image"},l),Object(E.a)("div",{vkuiClass:"HorizontalCell__content"},se(n)&&Object(E.a)(aa,{size:s,vkuiClass:"HorizontalCell__title"},n),se(i)&&Object(E.a)(pt,{weight:"regular",level:"1",vkuiClass:"HorizontalCell__subtitle"},i))))},oa=function(e){var t=e.children,n=o()(e,["children"]);return Object(E.a)(pt,a()({Component:"footer"},n,{level:"1",weight:"regular",vkuiClass:"Footer"}),t)},ca=function(e){v()(n,e);var t=b()(n);function n(e){var r;return l()(this,n),r=t.call(this,e),y()(h()(r),"container",void 0),y()(h()(r),"slidesStore",void 0),y()(h()(r),"viewport",void 0),y()(h()(r),"onStart",(function(e){r.setState({animation:!1,startT:e.startT})})),y()(h()(r),"onMoveX",(function(e){r.props.isDraggable&&!r.isFullyVisible&&(e.originalEvent.preventDefault(),e.isSlideX&&(r.props.onDragStart&&r.props.onDragStart(e),r.state.deltaX===e.shiftX&&r.state.dragging===e.isSlideX||r.setState({deltaX:e.shiftX,dragging:e.isSlideX})))})),y()(h()(r),"onEnd",(function(e){var t=e.isSlide?r.getTarget():r.props.slideIndex;r.props.onDragEnd&&r.props.onDragEnd(e),r.setState({deltaX:0,animation:!0},(function(){return r.props.onChange(t)})),r.props.onEnd&&r.props.onEnd({targetIndex:t})})),y()(h()(r),"onResize",(function(){return r.initializeSlides({animation:!1})})),y()(h()(r),"slideLeft",(function(){var e=r.props,t=e.slideIndex,n=e.onChange;r.canSlideLeft&&r.setState({deltaX:0,animation:!0},(function(){return n(t-1)}))})),y()(h()(r),"slideRight",(function(){var e=r.props,t=e.slideIndex,n=e.onChange;r.canSlideRight&&r.setState({deltaX:0,animation:!0},(function(){return n(t+1)}))})),y()(h()(r),"getSlideRef",(function(e){return function(t){r.slidesStore["slide-".concat(e)]=t}})),y()(h()(r),"getViewportRef",(function(e){r.viewport=e,le(e,r.props.getRef)})),y()(h()(r),"getRootRef",(function(e){r.container=e,le(e,r.props.getRootRef)})),r.state={containerWidth:0,deltaX:0,shiftX:0,slides:[],animation:!0,duration:.24},r.slidesStore={},r}return f()(n,[{key:"initializeSlides",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=w.a.Children.map(this.props.children,(function(t,n){var r=e.slidesStore["slide-".concat(n)];return{coordX:r.offsetLeft,width:r.offsetWidth}})),r=this.container.offsetWidth,a=n.reduce((function(e,t){return t.width+e}),0),i=this.calcMin({containerWidth:r,layerWidth:a,slides:n}),o=this.calcMax({slides:n});this.setState({min:i,max:o,layerWidth:a,containerWidth:r,slides:n},(function(){var n=e.calculateIndent(e.props.slideIndex);if(e.state.shiftX!==n){var r=e.state.shiftX===e.validateIndent(e.state.shiftX),a=t.animation,i=void 0===a?r:a;e.setState({shiftX:n,animation:i},(function(){e.state.animation||e.props.window.requestAnimationFrame((function(){return e.setState({animation:!0})}))}))}}))}},{key:"calcMin",value:function(e){var t=e.containerWidth,n=e.layerWidth,r=e.slides,a=this.viewport.offsetWidth;switch(this.props.align){case"left":return t-n;case"right":return a-n;case"center":if(this.isCenterWithCustomWidth&&r.length){var i=r[r.length-1];return a/2-i.coordX-i.width/2}return a-(t-a)/2-n}}},{key:"calcMax",value:function(e){var t=e.slides,n=this.viewport.offsetWidth;if(this.isCenterWithCustomWidth&&t.length){var r=t[0],a=r.width;return n/2-r.coordX-a/2}return 0}},{key:"calculateIndent",value:function(e){var t=this.state.slides;if(this.isFullyVisible)return 0;var n=t.length?t[e]:null;if(n){var r=n.coordX,a=n.width;return this.isCenterWithCustomWidth?this.viewport.offsetWidth/2-r-a/2:this.validateIndent(-1*r)}return 0}},{key:"calculateDragIndent",value:function(){var e=this.state,t=e.shiftX,n=e.deltaX,r=e.min,a=e.max,i=t+n;return i>a?a+Number((i-a)/3):i<r?r+Number((i-r)/3):i}},{key:"validateIndent",value:function(e){var t=this.state,n=t.min,r=t.max;return e<n?n:e>r?r:e}},{key:"getTarget",value:function(){var e=this.state,t=e.slides,n=e.deltaX,r=e.shiftX,a=e.startT,i=e.max,o=this.props.slideIndex,c=r+n+n/(Date.now()-a.getTime())*240*.6-i,s=n<0?1:-1,u=t.reduce((function(e,n,r){return Math.abs(t[e].coordX+c)<Math.abs(n.coordX+c)?e:r}),o);if(u===o){var l=o+s;l>=0&&l<t.length&&Math.abs(n)>.05*t[l].width&&(u=l)}return u}},{key:"componentDidMount",value:function(){this.initializeSlides({animation:!1}),this.props.window.addEventListener("resize",this.onResize)}},{key:"componentDidUpdate",value:function(e){var t=this.props.slideWidth!==e.slideWidth,n=this.props!==e,r=O.Children.count(this.props.children)!==O.Children.count(e.children),a="custom"===this.props.slideWidth;t||r||a&&n?this.initializeSlides():this.props.slideIndex!==e.slideIndex&&this.setState({animation:!0,deltaX:0,shiftX:this.calculateIndent(this.props.slideIndex)})}},{key:"componentWillUnmount",value:function(){this.props.window.removeEventListener("resize",this.onResize)}},{key:"render",value:function(){var e=this,t=this.state,n=t.animation,r=t.duration,i=t.dragging,c=this.props,s=c.children,u=c.slideWidth,l=c.slideIndex,d=(c.isDraggable,c.onDragStart,c.onDragEnd,c.onChange,c.onEnd,c.align),f=c.bullets,p=c.platform,h=c.hasMouse,m=c.showArrows,v=(c.window,c.document,c.getRef,c.getRootRef,o()(c,["children","slideWidth","slideIndex","isDraggable","onDragStart","onDragEnd","onChange","onEnd","align","bullets","platform","hasMouse","showArrows","window","document","getRef","getRootRef"])),g=i?this.calculateDragIndent():this.calculateIndent(l),b={WebkitTransform:"translateX(".concat(g,"px)"),transform:"translateX(".concat(g,"px)"),WebkitTransition:n?"-webkit-transform ".concat(r,"s cubic-bezier(.1, 0, .25, 1)"):"none",transition:n?"transform ".concat(r,"s cubic-bezier(.1, 0, .25, 1)"):"none"};return Object(E.a)("div",a()({},v,{vkuiClass:A(F("Gallery",p),"Gallery--".concat(d),{"Gallery--dragging":i,"Gallery--custom-width":"custom"===u}),ref:this.getRootRef}),Object(E.a)(ke,{vkuiClass:"Gallery__viewport",onStartX:this.onStart,onMoveX:this.onMoveX,onEnd:this.onEnd,noSlideClick:!0,style:{width:"custom"===u?"100%":u},getRootRef:this.getViewportRef},Object(E.a)("div",{vkuiClass:"Gallery__layer",style:b},w.a.Children.map(s,(function(t,n){return Object(E.a)("div",{vkuiClass:"Gallery__slide",key:"slide-".concat(n),ref:e.getSlideRef(n)},t)})))),f&&Object(E.a)("div",{"aria-hidden":"true",vkuiClass:A("Gallery__bullets","Gallery__bullets--".concat(f))},w.a.Children.map(s,(function(e,t){return Object(E.a)("div",{vkuiClass:A("Gallery__bullet",{"Gallery__bullet--active":t===l}),key:t})}))),m&&h&&this.canSlideLeft&&Object(E.a)(Dt,{direction:"left",onClick:this.slideLeft}),m&&h&&this.canSlideRight&&Object(E.a)(Dt,{direction:"right",onClick:this.slideRight}))}},{key:"isCenterWithCustomWidth",get:function(){return"custom"===this.props.slideWidth&&"center"===this.props.align}},{key:"isFullyVisible",get:function(){return this.state.layerWidth<=this.state.containerWidth}},{key:"canSlideLeft",get:function(){return!this.isFullyVisible&&this.state.shiftX<0}},{key:"canSlideRight",get:function(){var e=this.state,t=e.containerWidth,n=e.layerWidth,r=e.shiftX,a=e.slides,i=this.props,o=i.align,c=i.slideIndex;return!this.isFullyVisible&&("left"===o&&t-r<n||"left"!==o&&c<a.length-1)}}]),n}(O.Component);y()(ca,"defaultProps",{slideWidth:"100%",children:"",align:"left",bullets:!1,isDraggable:!0});var sa=Fe(Object(K.e)(ca),{hasMouse:!0}),ua=$((function(e){var t=e.initialSlideIndex,n=void 0===t?0:t,r=e.children,i=e.timeout,c=e.onChange,s=o()(e,["initialSlideIndex","children","timeout","onChange"]),u=Object(O.useState)(n),l=It()(u,2),d=l[0],f=l[1],p="number"==typeof s.slideIndex,h=p?s.slideIndex:d,m=!p||Boolean(c),v=w.a.Children.toArray(r).filter((function(e){return Boolean(e)})),g=v.length,b=Object(O.useCallback)((function(e){e!==h&&(!p&&f(e),c&&c(e))}),[c,h]),_=Rn((function(){return b((h+1)%g)}),i);Object(O.useEffect)((function(){return i?_.set():_.clear()}),[i,h]);var y=g>0?me(h,0,g-1):h;return Object(O.useEffect)((function(){c&&y!==h&&c(y)}),[y]),Object(E.a)(sa,a()({isDraggable:m},s,{slideIndex:y,onChange:b}),v)})),la=!1;function da(){la||(Object(Gt.a)(new Ut.a({id:"clear_16",viewBox:"0 0 16 16",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="clear_16"><path d="M6.729 8.002L4.263 10.47a.9.9 0 101.273 1.273L8 9.275l2.465 2.468a.9.9 0 101.272-1.273L9.273 8.002l2.465-2.469a.9.9 0 10-1.272-1.273L8 6.728 5.536 4.26a.9.9 0 00-1.273 1.273l2.466 2.469zM8 16A8 8 0 118 0a8 8 0 010 16z" fill="currentColor" fill-rule="evenodd" /></symbol>'})),la=!0)}var fa=function(e){return Object(Gt.b)((function(){da()}),[]),w.a.createElement(Wt.a,Object(zt.assign)({},e,{viewBox:"0 0 16 16",id:"clear_16",width:isNaN(e.width)?16:+e.width,height:isNaN(e.height)?16:+e.height}))};fa.mountIcon=da;var pa=fa,ha=!1;function ma(){ha||(Object(Gt.a)(new Ut.a({id:"search_outline_16",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="search_outline_16"><path d="M6.5 1a5.5 5.5 0 014.383 8.823l3.896 3.9a.75.75 0 01-1.061 1.06l-3.895-3.9A5.5 5.5 0 116.5 1zm0 1.5a4 4 0 100 8 4 4 0 000-8z" fill="currentColor" /></symbol>'})),ha=!0)}var va=function(e){return Object(Gt.b)((function(){ma()}),[]),w.a.createElement(Wt.a,Object(zt.assign)({},e,{viewBox:"0 0 16 16",id:"search_outline_16",width:isNaN(e.width)?16:+e.width,height:isNaN(e.height)?16:+e.height}))};va.mountIcon=ma;var ga=va;function ba(e,t){var n=e.hasOwnProperty("value"),r=Object(O.useState)(t.defaultValue),a=It()(r,2),i=a[0],o=a[1],c=Object(O.useCallback)((function(t){!n&&o(t.target.value),e.onChange&&e.onChange(t)}),[e.onChange]);return[n?e.value:i,c]}var _a=function(e){var t=e.before,n=e.className,r=e.defaultValue,i=e.placeholder,c=e.after,s=e.getRef,u=e.platform,l=e.icon,d=e.onIconClick,f=void 0===d?fe:d,p=e.style,h=o()(e,["before","className","defaultValue","placeholder","after","getRef","platform","icon","onIconClick","style"]),m=Ue(s),v=Object(O.useState)(!1),g=It()(v,2),b=g[0],_=g[1],y=ba(h,{defaultValue:r}),w=It()(y,2),C=w[0],S=w[1],k=function(){Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set.call(m.current,"");var e=new Event("input",{bubbles:!0});m.current.dispatchEvent(e)},j=Object(O.useCallback)((function(e){return f(e.originalEvent)}),[f]),T=Object(O.useCallback)((function(e){e.originalEvent.preventDefault(),m.current.focus(),k()}),[k]);return Object(E.a)("div",{vkuiClass:A(F("Search",u),{"Search--focused":b,"Search--has-value":!!C,"Search--has-after":!!c,"Search--has-icon":!!l}),className:n,style:p},Object(E.a)("div",{vkuiClass:"Search__in"},Object(E.a)("div",{vkuiClass:"Search__width"}),Object(E.a)("label",{vkuiClass:"Search__control"},Object(E.a)("input",a()({type:"search"},h,{ref:m,vkuiClass:"Search__input",onFocus:function(e){_(!0),h.onFocus&&h.onFocus(e)},onBlur:function(e){_(!1),h.onBlur&&h.onBlur(e)},onChange:S,value:C})),u===x&&c&&Object(E.a)("div",{vkuiClass:"Search__after-width"},c),Object(E.a)("div",{vkuiClass:"Search__placeholder"},Object(E.a)("div",{vkuiClass:"Search__placeholder-in"},t,u===R?Object(E.a)($e,{vkuiClass:"Search__placeholder-text",weight:"regular"},i):Object(E.a)(tt,{vkuiClass:"Search__placeholder-text",level:"3",weight:"regular"},i)),b&&u===x&&c&&Object(E.a)("div",{vkuiClass:"Search__after-width"},c))),Object(E.a)("div",{vkuiClass:"Search__after",onClick:k},Object(E.a)("div",{vkuiClass:"Search__icons"},l&&Object(E.a)(ke,{onStart:j,vkuiClass:"Search__icon"},l),!!C&&Object(E.a)(ke,{onStart:T,vkuiClass:"Search__icon"},u===R?Object(E.a)(Jr.a,null):Object(E.a)(pa,null))),u===x&&c&&Object(E.a)("div",{vkuiClass:"Search__after-in"},c))),u===R&&Object(E.a)(st,{vkuiClass:"Search__separator",wide:!0}))};_a.defaultProps={autoComplete:"off",defaultValue:"",placeholder:"Поиск",after:"Отмена",before:Object(E.a)(ga,null)};var ya=$(_a),Ea=Object(O.createContext)("default"),Oa=function(e){var t=e.children,n=e.mode,r=e.getRootRef,i=e.sizeX,c=o()(e,["children","mode","getRootRef","sizeX"]),s=Ve();return s!==x&&"segmented"===n&&(n="default"),Object(E.a)("div",a()({},c,{ref:r,vkuiClass:A(F("Tabs",s),"Tabs--".concat(n),"Tabs--sizeX-".concat(i))}),Object(E.a)("div",{vkuiClass:"Tabs__in"},Object(E.a)(Ea.Provider,{value:n},t)))};Oa.defaultProps={mode:"default"};var wa=Fe(Oa,{sizeX:!0}),Ca=function(e){var t=e.children,n=e.selected,r=e.after,i=o()(e,["children","selected","after"]),c=Ve(),s=Object(O.useContext)(Ea),u="buttons"===s||"segmented"===s?Ht:et;return c===R&&(u=$e),Object(E.a)(Xe,a()({},i,{vkuiClass:A(F("TabsItem",c),{"TabsItem--selected":n}),hasActive:"segmented"===s,activeMode:"TabsItem--active",focusVisibleMode:"segmented"===s?"outside":"inside"}),Object(E.a)(u,{Component:"span",vkuiClass:"TabsItem__in",weight:"medium"},t),se(r)&&Object(E.a)("div",{vkuiClass:"TabsItem__after"},r))};Ca.defaultProps={selected:!1};var Sa=Ca;var Aa=function(e){var t=e.on,n=e.progress,r=e.size,a=e.strokeWidth,i=e.style,c=o()(e,["on","progress","size","strokeWidth","style"]),s=.5*r-.5*a,u=2*Math.PI*s,l=.5*r,d=function(e,t){var n=e/100;return 2*Math.PI*t*(1-n)}(t?80:n,s);return Object(E.a)("div",{vkuiClass:A("PullToRefresh__spinner",{"PullToRefresh__spinner--on":t}),style:i,"aria-label":t?c["aria-label"]:void 0},Object(E.a)("svg",{role:"presentation",vkuiClass:"PullToRefresh__spinner-self",style:{width:r,height:r},viewBox:"0 0 ".concat(r," ").concat(r),xmlns:"http://www.w3.org/2000/svg"},Object(E.a)("g",{style:{width:r,height:r,transformOrigin:"".concat(l,"px ").concat(l,"px")}},Object(E.a)("circle",{vkuiClass:"PullToRefresh__spinner-path",fill:"none",strokeDasharray:u,strokeDashoffset:d,strokeWidth:a,strokeLinecap:"round",cx:l,cy:l,r:s}))))};Aa.defaultProps={size:24,strokeWidth:2.5,on:!0,progress:null,"aria-label":"Пожалуйста, подождите..."};var ka=w.a.memo(Aa);function ja(e){if(!e)return!1;for(;e.originalEvent;)e=e.originalEvent;return e.preventDefault&&e.cancelable&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),!1}var Ta=function(e){v()(n,e);var t=b()(n);function n(e){var r;return l()(this,n),r=t.call(this,e),y()(h()(r),"params",void 0),y()(h()(r),"contentRef",void 0),y()(h()(r),"onTouchStart",(function(e){r.state.refreshing&&ja(e),r.setState({touchDown:!0})})),y()(h()(r),"onWindowTouchMove",(function(e){r.state.refreshing&&(e.preventDefault(),e.stopPropagation())})),y()(h()(r),"onTouchMove",(function(e){var t=e.isY,n=e.shiftY,a=r.params,i=a.start,o=a.max,c=r.props.scroll.getScroll().y,s=r.state,u=s.refreshing,l=s.watching,d=s.touchDown;if(l&&d){ja(e);var f=r.params.positionMultiplier,p=Math.max(0,n-r.state.touchY),h=Math.max(i,Math.min(r.params.maxY,i+p*f)),m=h>-10?80*Math.abs((h+10)/o):0;r.setState({spinnerY:h,spinnerProgress:Math.min(80,Math.max(0,m)),canRefresh:m>80,contentShift:2.3*(h+10)}),m>85&&!u&&r.props.platform===x&&r.runRefreshing()}else t&&0===c&&n>0&&!u&&d&&(ja(e),r.setState({watching:!0,touchY:n,spinnerY:i,spinnerProgress:0}))})),y()(h()(r),"onTouchEnd",(function(){var e=r.state,t=e.refreshing,n=e.canRefresh,a=e.refreshingFinished;r.setState({watching:!1,touchDown:!1},(function(){n&&!t?r.runRefreshing():t&&a?r.resetRefreshingState():r.setState({spinnerY:t?r.params.refreshing:r.params.start,spinnerProgress:0,contentShift:0})}))})),y()(h()(r),"onRefreshingFinish",(function(){r.setState({refreshingFinished:!0},(function(){!r.state.touchDown&&r.resetRefreshingState()}))})),r.params={start:e.platform===N||e.platform===R?-45:-10,max:e.platform===N||e.platform===R?80:50,maxY:e.platform===N||e.platform===R?80:400,refreshing:e.platform===N||e.platform===R?50:36,positionMultiplier:e.platform===N||e.platform===R?1:.21},r.state={watching:!1,refreshing:!1,canRefresh:!1,touchDown:!1,refreshingFinished:!1,touchY:0,spinnerY:r.params.start,spinnerProgress:0,contentShift:0},r.contentRef=w.a.createRef(),r}return f()(n,[{key:"componentDidMount",value:function(){T.b&&this.document.addEventListener("touchmove",this.onWindowTouchMove,{cancelable:!0,passive:!1})}},{key:"componentWillUnmount",value:function(){T.b&&this.document.removeEventListener("touchmove",this.onWindowTouchMove,{cancelable:!0,passive:!1})}},{key:"componentDidUpdate",value:function(e){e.isFetching&&!this.props.isFetching&&this.onRefreshingFinish()}},{key:"runRefreshing",value:function(){var e;!this.state.refreshing&&this.props.onRefresh&&(this.setState({refreshing:!0,spinnerY:this.props.platform===N||this.props.platform===R?this.params.refreshing:this.state.spinnerY}),this.props.onRefresh(),e="light",Q.a.supports("VKWebAppTapticImpactOccurred")&&Q.a.send("VKWebAppTapticImpactOccurred",{style:e}).catch((function(){})))}},{key:"resetRefreshingState",value:function(){this.setState({watching:!1,canRefresh:!1,refreshing:!1,refreshingFinished:!1,spinnerY:this.params.start,spinnerProgress:0,contentShift:0})}},{key:"render",value:function(){var e=this.props,t=e.children,n=(e.onRefresh,e.isFetching,e.platform),r=(e.window,e.document,e.scroll,o()(e,["children","onRefresh","isFetching","platform","window","document","scroll"])),i=this.state,c=i.watching,s=i.refreshing,u=i.spinnerY,l=i.spinnerProgress,d=i.canRefresh,f=i.touchDown,p=i.contentShift,h="translate3d(0, ".concat(u,"px, 0)"),m="";return n===x&&s&&!f?m="translate3d(0, 100px, 0)":n===x&&(p||s)&&(m="translate3d(0, ".concat(p,"px, 0)")),Object(E.a)(We.Provider,{value:!0},Object(E.a)(ke,a()({},r,{onStart:this.onTouchStart,onMove:this.onTouchMove,onEnd:this.onTouchEnd,vkuiClass:A(F("PullToRefresh",n),{"PullToRefresh--watching":c,"PullToRefresh--refreshing":s})}),Object(E.a)(ot,{vkuiClass:"PullToRefresh__controls"},Object(E.a)(ka,{style:{transform:h,WebkitTransform:h,opacity:c||s||d?1:0},on:s,progress:s?null:l})),Object(E.a)("div",{vkuiClass:"PullToRefresh__content",ref:this.contentRef,style:{transform:m,WebkitTransform:m}},t)))}},{key:"document",get:function(){return this.props.document}}]),n}(O.PureComponent),Ia=ee($(Object(K.e)(Ta)),ve,"scroll"),Pa=function(e){var t=e.children,n=o()(e,["children"]),r=Ve();return Object(E.a)(Xe,a()({Component:n.href?"a":"button"},n,{vkuiClass:F("Link",r),hasActive:!1,hoverMode:"opacity",focusVisibleMode:"outside"}),t)};var Da=!1;var Na=function(e){var t,n=(t=Object(O.useContext)(Y)).browserInfo||D(t.userAgent),r=n.system,i=n.systemVersion,c=Ve(),s=e.photos,u=e.visibleCount,l=e.size,d=e.layout,f=e.children,p=o()(e,["photos","visibleCount","size","layout","children"]);yt((function(){!function(){if(T.b&&!Da){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttributeNS(null,"id","__SVG_MASKS_NODE__"),e.setAttributeNS(null,"width","0"),e.setAttributeNS(null,"height","0"),e.style.position="absolute",e.style.width="0px",e.style.height="0px",e.innerHTML='<defs>\n  <clipPath id="users_stack_mask_16_left">\n    <path transform="translate(1.5 0)" d="M1.20772 8C1.20772 6.32671 0.768742 4.75626 0 3.39821C1.44342 1.34278 3.8277 0 6.52463 0C10.9293 0 14.5 3.58172 14.5 8C14.5 12.4183 10.9293 16 6.52463 16C3.8277 16 1.44342 14.6572 0 12.6018C0.768742 11.2437 1.20772 9.6733 1.20772 8Z"></path>\n  </clipPath>\n  \n  <clipPath id="users_stack_mask_24_left">\n    <path d="M3.9971785,12 C3.9971785,9.49005736 3.33667467,7.13438366 2.18,5.09731189 C4.35181237,2.01417617 7.93927741,0 11.9971785,0 C18.6245955,0 23.9971785,5.372583 23.9971785,12 C23.9971785,18.627417 18.6245955,24 11.9971785,24 C7.93927741,24 4.35181237,21.9858238 2.18,18.9026881 C3.33667467,16.8656163 3.9971785,14.5099426 3.9971785,12 Z"></path>\n  </clipPath>\n\n  <clipPath id="users_stack_mask_24_right">\n    <path d="M21.8171785,5.09731189 C20.6605038,7.13438366 20,9.49005736 20,12 C20,14.5099426 20.6605038,16.8656163 21.8171785,18.9026881 C19.6453661,21.9858238 16.0579011,24 12,24 C5.372583,24 3.90798505e-14,18.627417 3.90798505e-14,12 C3.90798505e-14,5.372583 5.372583,0 12,0 C16.0579011,0 19.6453661,2.01417617 21.8171785,5.09731189 Z"></path>\n  </clipPath>\n\n  <clipPath id="users_stack_mask_32_left">\n    <path d="M2.13430019,23.9892466 C3.32858917,21.5820026 4,18.8694095 4,16 C4,13.1305905 3.32858917,10.4179974 2.13430019,8.0107534 C4.89924175,3.22241289 10.0733034,-2.30926389e-14 16,-2.30926389e-14 C24.836556,-2.30926389e-14 32,7.163444 32,16 C32,24.836556 24.836556,32 16,32 C10.0733034,32 4.89924175,28.7775871 2.13430019,23.9892466 L2.13430019,23.9892466 Z"></path>\n  </clipPath>\n\n  <clipPath id="users_stack_mask_32_right">\n    <path d="M29.8656998,8.0107534 C28.6714108,10.4179974 28,13.1305905 28,16 C28,18.8694095 28.6714108,21.5820026 29.8656998,23.9892466 C27.1007583,28.7775871 21.9266966,32 16,32 C7.163444,32 3.90798505e-14,24.836556 3.90798505e-14,16 C3.90798505e-14,7.163444 7.163444,0 16,0 C21.9266966,0 27.1007583,3.22241289 29.8656998,8.0107534 Z"></path>\n  </clipPath>\n</defs>',Object(T.A)((function(){document.body.appendChild(e)})),Da=!0}}()}),[]);var h=Math.max(0,s.length-u),m=h>0&&"m"===l,v=s.slice(0,u),g=!0;return r===j.IOS&&(g=i&&i.major>=12),Object(E.a)("div",a()({},p,{vkuiClass:A(F("UsersStack",c),"UsersStack--size-".concat(l),"UsersStack--l-".concat(d),{"UsersStack--others":m,"UsersStack--simple":!g})}),Object(E.a)("div",{vkuiClass:"UsersStack__photos",role:"presentation"},v.map((function(e,t){return Object(E.a)("div",{key:t,vkuiClass:"UsersStack__photo",style:{backgroundImage:"url(".concat(e,")")}})})),m&&Object(E.a)(pt,{weight:"medium",level:"1",vkuiClass:"UsersStack__photo UsersStack__photo--others","aria-hidden":"true"},Object(E.a)("span",null,"+",h))),se(f)&&Object(E.a)(Ht,{Component:"span",weight:"regular",vkuiClass:"UsersStack__text"},f))};Na.defaultProps={photos:[],size:"s",visibleCount:3,layout:"horizontal"};var xa=w.a.memo(Na),Ra=function(e){var t=e.size,n=e.separator,r=e.style,i=o()(e,["size","separator","style"]),c=Ve(),u=s()({height:t},r);return Object(E.a)("div",a()({},i,{"aria-hidden":"true",vkuiClass:A(F("Spacing",c),{"Spacing--separator":!!n,"Spacing--separator-center":!0===n||"center"===n,"Spacing--separator-top":"top"===n,"Spacing--separator-bottom":"bottom"===n}),style:u}))};Ra.defaultProps={size:8};var Ma=function(e){var t=e.icon,n=e.header,r=e.action,i=e.children,c=e.stretched,s=e.getRootRef,u=o()(e,["icon","header","action","children","stretched","getRootRef"]);return Object(E.a)("div",a()({},u,{ref:s,vkuiClass:A("Placeholder",{"Placeholder--stretched":c})}),Object(E.a)("div",{vkuiClass:"Placeholder__in"},se(t)&&Object(E.a)("div",{vkuiClass:"Placeholder__icon"},t),se(n)&&Object(E.a)(tt,{level:"2",weight:"medium",vkuiClass:"Placeholder__header"},n),se(i)&&Object(E.a)(et,{weight:"regular",vkuiClass:"Placeholder__text"},i),se(r)&&Object(E.a)("div",{vkuiClass:"Placeholder__action"},r)))},La=n(1321),Ba=n(1322),Fa=function(e){var t=e.size,n=o()(e,["size"]);return"m"===t?Object(E.a)(tt,a()({level:"2",weight:"medium"},n)):Object(E.a)(et,a()({weight:"medium"},n))},Ha=function(e){var t=e.size,n=o()(e,["size"]);return"m"===t?Object(E.a)($e,a()({weight:"regular"},n)):Object(E.a)(Ht,a()({weight:"regular"},n))},Va=function(e){var t=Ve(),n=e.mode,r=e.imageTheme,i=e.size,c=e.before,s=e.asideMode,u=e.header,l=e.subheader,d=e.text,f=(e.children,e.background),p=e.actions,h=e.onDismiss,m=e.dismissLabel,v=o()(e,["mode","imageTheme","size","before","asideMode","header","subheader","text","children","background","actions","onDismiss","dismissLabel"]);return Object(E.a)("section",a()({},v,{vkuiClass:A(F("Banner",t),"Banner--md-".concat(n),"Banner--sz-".concat(i),{"Banner--inverted":"image"===n&&"dark"===r})}),Object(E.a)(Xe,{vkuiClass:"Banner__in",activeMode:t===x?"opacity":"background",disabled:"expand"!==s,role:"expand"===s?"button":null},"image"===n&&f&&Object(E.a)("div",{"aria-hidden":"true",vkuiClass:"Banner__bg"},f),c&&Object(E.a)("div",{vkuiClass:"Banner__before"},c),Object(E.a)("div",{vkuiClass:"Banner__content"},se(u)&&Object(E.a)(Fa,{size:i,Component:"h2",vkuiClass:"Banner__header"},u),se(l)&&Object(E.a)(Ha,{Component:"span",size:i,vkuiClass:"Banner__subheader"},l),se(d)&&Object(E.a)($e,{weight:"regular",vkuiClass:"Banner__text"},d),se(p)&&O.Children.count(p)>0&&Object(E.a)("div",{vkuiClass:"Banner__actions"},p)),!!s&&Object(E.a)("div",{vkuiClass:"Banner__aside"},"expand"===s&&Object(E.a)(Pt.a,null),"dismiss"===s&&Object(E.a)(dr,{"aria-label":m,vkuiClass:"Banner__dismiss",onClick:h,hoverMode:"opacity",hasActive:!1},(t===N||t===R)&&Object(E.a)(Jr.a,null),t===x&&("image"===n?Object(E.a)(La.a,null):Object(E.a)(Ba.a,null))))))};Va.defaultProps={dismissLabel:"Скрыть",mode:"tint",size:"s",imageTheme:"dark"};var Ua=Va,za=function(e){var t,n=Ve(),r=e.before,i=e.after,c=e.mode,s=e.textWrap,u=e.textLevel,l=e.children,d=o()(e,["before","after","mode","textWrap","textLevel","children"]),f=!!d.onClick;return Object(E.a)(Xe,a()({Component:"div",disabled:!f,role:f?"button":null},d,{vkuiClass:A(F("MiniInfoCell",n),(t={},y()(t,"MiniInfoCell--md-".concat(c),"base"!==c),y()(t,"MiniInfoCell--wr-".concat(s),"nowrap"!==s),t),"MiniInfoCell--lvl-".concat(u))}),Object(E.a)("span",{vkuiClass:"MiniInfoCell__icon"},r),Object(E.a)($e,{vkuiClass:"MiniInfoCell__content",weight:"more"===c?"medium":"regular"},l),se(i)&&Object(E.a)("span",{vkuiClass:"MiniInfoCell__after"},i))};za.defaultProps={mode:"base",textWrap:"nowrap",textLevel:"secondary"};var Ga=function(e){var t=e.children,n=e.Component,r=e.getRef,i=e.onSubmit,c=o()(e,["children","Component","getRef","onSubmit"]),s=Ve();return Object(E.a)(n,a()({},c,{vkuiClass:F("FormLayout",s),onSubmit:i,ref:r}),Object(E.a)("div",{vkuiClass:"FormLayout__container"},t),"form"===n&&Object(E.a)("input",{type:"submit",vkuiClass:"FormLayout__submit",value:""}))};Ga.defaultProps={Component:"form",onSubmit:function(e){return e.preventDefault()}};var Wa=Ga,qa=function(e){var t=e.children,n=e.top,r=e.bottom,i=e.status,c=void 0===i?"default":i,s=e.Component,u=void 0===s?"div":s,l=e.removable,d=e.onRemove,f=e.removePlaceholder,p=void 0===f?"Удалить":f,h=e.getRootRef,m=o()(e,["children","top","bottom","status","Component","removable","onRemove","removePlaceholder","getRootRef"]),v=Ve(),g=Ue(h),b=rr().sizeY,_=Object(E.a)(O.Fragment,null,se(n)&&Object(E.a)(Ht,{weight:"regular",vkuiClass:"FormItem__top"},n),t,se(r)&&Object(E.a)(pt,{level:"1",weight:"regular",vkuiClass:"FormItem__bottom"},r));return Object(E.a)(u,a()({},m,{ref:g,vkuiClass:A(F("FormItem",v),"FormItem--".concat(c),"FormItem--sizeY-".concat(b),{"FormItem--withTop":se(n),"FormItem--removable":l})}),l?Object(E.a)($r,{align:"start",onRemove:function(e){return d(e,null==g?void 0:g.current)},removePlaceholder:p},Object(E.a)("div",{vkuiClass:"FormItem__removable"},_)):_)},Ka=function(e){var t=e.children,n=e.mode,r=void 0===n?"vertical":n,i=e.removable,c=e.removePlaceholder,s=void 0===c?"Удалить":c,u=e.onRemove,l=e.getRootRef,d=o()(e,["children","mode","removable","removePlaceholder","onRemove","getRootRef"]),f=Ve(),p=rr().sizeY,h=i&&"horizontal"===r,m=Ue(l);return Object(E.a)("div",a()({ref:m,vkuiClass:A(F("FormLayoutGroup",f),"FormLayoutGroup--sizeY-".concat(p),"FormLayoutGroup--".concat(r),{"FormLayoutGroup--removable":h})},d),h?Object(E.a)($r,{align:"start",removePlaceholder:s,onRemove:function(e){return u(e,null==m?void 0:m.current)}},t):t)},Ya=function(e){var t=e.mode,n=e.header,r=e.children,i=e.dangerouslySetInnerHTML,c=o()(e,["mode","header","children","dangerouslySetInnerHTML"]),s=Ve();return Object(E.a)("div",a()({},c,{vkuiClass:A(F("FormStatus",s),"FormStatus--".concat(t))}),se(n)&&Object(E.a)(et,{weight:"medium",vkuiClass:"FormStatus__header"},n),i&&Object(E.a)(pt,{level:"1",weight:"regular",dangerouslySetInnerHTML:i}),se(r)&&!i&&Object(E.a)(pt,{level:"1",weight:"regular"},r))},Za=Fe((function(e){var t=e.style,n=e.className,r=e.getRef,i=e.getRootRef,c=e.sizeY,s=o()(e,["style","className","getRef","getRootRef","sizeY"]),u=Ve(),l=Ue(r);return Object(E.a)("label",{vkuiClass:A(F("Switch",u),"Switch--sizeY-".concat(c)),className:n,style:t,ref:i},Object(E.a)("input",a()({},s,{type:"checkbox",vkuiClass:"Switch__self",ref:l})),Object(E.a)("span",{vkuiClass:"Switch__pseudo"}))}),{sizeY:!0}),Qa=Fe((function(e){var t=e.Component,n=e.children,r=e.getRootRef,i=e.after,c=e.disabled,s=e.sizeY,u=o()(e,["Component","children","getRootRef","after","disabled","sizeY"]),l=Ve(),d=Object(O.useState)(!1),f=It()(d,2),p=f[0],h=f[1];return Object(E.a)(t,a()({role:"presentation"},u,{ref:r,onMouseEnter:function(e){e.stopPropagation(),h(!0)},onMouseLeave:function(e){e.stopPropagation(),h(!1)},vkuiClass:A(F("FormField",l),"FormField--sizeY-".concat(s),{"FormField--disabled":c})}),n,se(i)&&Object(E.a)("div",{role:"presentation",vkuiClass:"FormField__after"},i),Object(E.a)("div",{role:"presentation",vkuiClass:A("FormField__border",{"FormField__border--hover":!c&&p})}))}),{sizeY:!0});Qa.defaultProps={Component:"div"};var Ja=Qa,Xa=function(e){var t=e.align,n=e.getRef,r=e.className,i=e.getRootRef,c=e.sizeY,s=e.style,u=e.after,l=o()(e,["align","getRef","className","getRootRef","sizeY","style","after"]),d=Ve();return Object(E.a)(Ja,{vkuiClass:A(F("Input",d),y()({},"Input--".concat(t),!!t),"Input--sizeY-".concat(c)),style:s,className:r,getRootRef:i,after:u,disabled:l.disabled},Object(E.a)("input",a()({},l,{vkuiClass:"Input__el",ref:n})))};Xa.defaultProps={type:"text"};var $a=Fe(Xa,{sizeY:!0}),ei=Object(O.memo)((function(e){var t=e.defaultValue,n=e.grow,r=e.style,i=e.onResize,c=e.className,s=e.getRootRef,u=e.getRef,l=e.sizeY,d=o()(e,["defaultValue","grow","style","onResize","className","getRootRef","getRef","sizeY"]),f=ba(d,{defaultValue:t}),p=It()(f,2),h=p[0],m=p[1],v=Ue(u),g=Ve();return yt((function(){var e=v.current;n&&(e.style.height=null,e.style.height="".concat(e.scrollHeight,"px"),i&&i(e))}),[n,h]),Object(E.a)(Ja,{vkuiClass:A(F("Textarea",g),"Textarea--sizeY-".concat(l)),className:c,style:r,getRootRef:s,disabled:d.disabled},Object(E.a)("textarea",a()({},d,{vkuiClass:"Textarea__el",value:h,onChange:m,ref:v})))}));ei.defaultProps={defaultValue:"",grow:!0};var ti=Fe(ei,{sizeY:!0}),ni=Fe((function(e){var t=e.children,n=e.description,r=e.style,i=e.className,c=e.getRef,s=e.getRootRef,u=e.sizeY,l=o()(e,["children","description","style","className","getRef","getRootRef","sizeY"]),d=Ve(),f=d===R||u===Ne.COMPACT?$e:et;return Object(E.a)(Xe,{Component:"label",style:r,className:i,vkuiClass:A(F("Radio",d),"Radio--sizeY-".concat(u)),activeEffectDelay:d===x?100:600,disabled:l.disabled,getRootRef:s},Object(E.a)("input",a()({},l,{type:"radio",vkuiClass:"Radio__input",ref:c})),Object(E.a)("div",{vkuiClass:"Radio__container"},Object(E.a)("i",{vkuiClass:"Radio__icon",role:"presentation"}),Object(E.a)(f,{weight:"regular",vkuiClass:"Radio__content",Component:"div"},Object(E.a)("div",{vkuiClass:"Radio__children"},t),se(n)&&Object(E.a)(Ht,{Component:"span",weight:"regular",vkuiClass:"Radio__description"},n))))}),{sizeY:!0}),ri=!1;function ai(){ri||(Object(Gt.a)(new Ut.a({id:"check_box_on_20",viewBox:"0 0 20 20",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="check_box_on_20"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.436 4.184C2 5.04 2 6.16 2 8.4v3.2c0 2.24 0 3.36.436 4.216a4 4 0 001.748 1.748C5.04 18 6.16 18 8.4 18h3.2c2.24 0 3.36 0 4.216-.436a4 4 0 001.748-1.748C18 14.96 18 13.84 18 11.6V8.4c0-2.24 0-3.36-.436-4.216a4 4 0 00-1.748-1.748C14.96 2 13.84 2 11.6 2H8.4c-2.24 0-3.36 0-4.216.436a4 4 0 00-1.748 1.748zm12.2 3.803a.9.9 0 10-1.272-1.274l-4.673 4.665-2.055-2.052A.9.9 0 005.364 10.6l2.691 2.687a.9.9 0 001.272 0l5.309-5.3z" fill="currentColor" /></symbol>'})),ri=!0)}var ii=function(e){return Object(Gt.b)((function(){ai()}),[]),w.a.createElement(Wt.a,Object(zt.assign)({},e,{viewBox:"0 0 20 20",id:"check_box_on_20",width:isNaN(e.width)?20:+e.width,height:isNaN(e.height)?20:+e.height}))};ii.mountIcon=ai;var oi=ii,ci=!1;function si(){ci||(Object(Gt.a)(new Ut.a({id:"check_box_off_20",viewBox:"0 0 20 20",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="check_box_off_20"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.046 2.534C4.788 2.138 5.517 2 7.128 2h5.744c1.61 0 2.34.138 3.082.534.65.348 1.164.862 1.512 1.512.396.742.534 1.471.534 3.082v5.744c0 1.61-.138 2.34-.534 3.082a3.644 3.644 0 01-1.512 1.512c-.742.396-1.472.534-3.082.534H7.128c-1.61 0-2.34-.138-3.082-.534a3.644 3.644 0 01-1.512-1.512C2.138 15.212 2 14.482 2 12.872V7.128c0-1.61.138-2.34.534-3.082a3.645 3.645 0 011.512-1.512zm3.082.966c-1.531 0-1.962.136-2.374.357a2.145 2.145 0 00-.897.897c-.22.412-.357.843-.357 2.374v5.744c0 1.531.136 1.962.357 2.374.208.389.508.69.897.897.412.22.843.357 2.374.357h5.744c1.531 0 1.962-.136 2.374-.357.389-.208.69-.508.897-.897.22-.412.357-.843.357-2.374V7.128c0-1.531-.136-1.962-.357-2.374a2.145 2.145 0 00-.897-.897c-.412-.22-.843-.357-2.374-.357H7.128z" fill="currentColor" /></symbol>'})),ci=!0)}var ui=function(e){return Object(Gt.b)((function(){si()}),[]),w.a.createElement(Wt.a,Object(zt.assign)({},e,{viewBox:"0 0 20 20",id:"check_box_off_20",width:isNaN(e.width)?20:+e.width,height:isNaN(e.height)?20:+e.height}))};ui.mountIcon=si;var li=ui,di=Fe((function(e){var t=e.children,n=e.className,r=e.style,i=e.getRootRef,c=e.getRef,s=e.sizeY,u=o()(e,["children","className","style","getRootRef","getRef","sizeY"]),l=Ve(),d=l===R||s===Ne.COMPACT?$e:et;return Object(E.a)(Xe,{Component:"label",vkuiClass:A(F("Checkbox",l),"Checkbox--sizeY-".concat(s)),className:n,style:r,disabled:u.disabled,activeEffectDelay:l===x?100:600,getRootRef:i},Object(E.a)("input",a()({},u,{type:"checkbox",vkuiClass:"Checkbox__input",ref:c})),Object(E.a)("div",{vkuiClass:"Checkbox__container"},Object(E.a)("div",{vkuiClass:"Checkbox__icon Checkbox__icon--on"},s===Ne.COMPACT||l===R?Object(E.a)(oi,null):Object(E.a)(Vr,null)),Object(E.a)("div",{vkuiClass:"Checkbox__icon Checkbox__icon--off"},s===Ne.COMPACT||l===R?Object(E.a)(li,null):Object(E.a)(Nr,null)),Object(E.a)(d,{weight:"regular",vkuiClass:"Checkbox__content"},t)))}),{sizeY:!0}),fi=n(1323),pi=!1;function hi(){pi||(Object(Gt.a)(new Ut.a({id:"dropdown_24",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="dropdown_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path d="M12 14.198L6.64 9.732a1 1 0 10-1.28 1.536l6 5a1 1 0 001.28 0l6-5a1 1 0 10-1.28-1.536L12 14.198z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),pi=!0)}var mi=function(e){return Object(Gt.b)((function(){hi()}),[]),w.a.createElement(Wt.a,Object(zt.assign)({},e,{viewBox:"0 0 24 24",id:"dropdown_24",width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};mi.mountIcon=hi;var vi=mi,gi=Fe((function(e){var t,n=e.style,r=e.defaultValue,i=void 0===r?"":r,c=e.align,s=e.placeholder,u=e.children,l=e.className,d=e.getRef,f=e.getRootRef,p=e.disabled,h=e.sizeX,m=e.sizeY,v=o()(e,["style","defaultValue","align","placeholder","children","className","getRef","getRootRef","disabled","sizeX","sizeY"]),g=Ve(),b=Object(O.useState)(""),_=It()(b,2),w=_[0],C=_[1],S=Object(O.useState)(!1),k=It()(S,2),j=k[0],T=k[1],I=ba(v,{defaultValue:i}),P=It()(I,2),D=P[0],N=P[1],x=Ue(d);yt((function(){var e=x.current.options[x.current.selectedIndex];e&&(C(e.text),T(""===e.value&&null!=s))}),[D,u]);var M=g===R||m===Ne.COMPACT?$e:et;return Object(E.a)(Ja,{Component:"label",vkuiClass:A(F("Select",g),(t={},y()(t,"Select--not-selected",j),y()(t,"Select--align-".concat(c),!!c),y()(t,"Select--sizeX--".concat(h),!!h),y()(t,"Select--sizeY--".concat(m),!!m),t)),className:l,style:n,getRootRef:f,disabled:p,after:m===Ne.COMPACT?Object(E.a)(fi.a,null):Object(E.a)(vi,null)},Object(E.a)("select",a()({},v,{disabled:p,vkuiClass:"Select__el",onChange:N,value:D,ref:x}),s&&Object(E.a)("option",{value:""},s),u),Object(E.a)(M,{Component:"div",weight:"regular",vkuiClass:"Select__container"},Object(E.a)("span",{vkuiClass:"Select__title"},w)))}),{sizeX:!0,sizeY:!0}),bi=function(e){var t,n=e.tabIndex,r=e.placeholder,i=e.children,c=e.align,s=e.getRootRef,u=e.multiline,l=e.disabled,d=e.onClick,f=e.sizeX,p=e.sizeY,h=o()(e,["tabIndex","placeholder","children","align","getRootRef","multiline","disabled","onClick","sizeX","sizeY"]),m=Ve(),v=m===R||p===Ne.COMPACT?$e:et;return Object(E.a)(Ja,a()({},h,{tabIndex:l?null:n,vkuiClass:A(F("Select",m),"Select--mimicry",(t={"Select--not-selected":!i,"Select--multiline":u},y()(t,"Select--align-".concat(c),!!c),y()(t,"Select--sizeX--".concat(f),!!f),y()(t,"Select--sizeY--".concat(p),!!p),t)),getRootRef:s,onClick:l?null:d,disabled:l,after:p===Ne.COMPACT?Object(E.a)(fi.a,null):Object(E.a)(vi,null)}),Object(E.a)(v,{Component:"div",weight:"regular",vkuiClass:"Select__container"},Object(E.a)("span",{vkuiClass:"Select__title"},i||r)))};bi.defaultProps={tabIndex:0};var _i=Fe(bi,{sizeX:!0,sizeY:!0}),yi=function(e){v()(n,e);var t=b()(n);function n(){var e;l()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),y()(h()(e),"ratio",NaN),y()(h()(e),"lastTrackerTop",0),y()(h()(e),"clientHeight",0),y()(h()(e),"trackerHeight",0),y()(h()(e),"scrollHeight",0),y()(h()(e),"transformProp",""),y()(h()(e),"startY",0),y()(h()(e),"trackerTop",0),y()(h()(e),"box",de((function(t){return le(t,e.props.boxRef)}))),y()(h()(e),"barY",Object(O.createRef)()),y()(h()(e),"trackerY",Object(O.createRef)()),y()(h()(e),"resize",(function(){var t=e.box.current.clientHeight,n=e.box.current.scrollHeight,r=t/n,a=Math.max(t*r,40);e.ratio=r,e.clientHeight=t,e.scrollHeight=n,e.trackerHeight=a,r>=1?e.barY.current.style.display="none":(e.barY.current.style.display="",e.trackerY.current.style.height="".concat(a,"px"),e.setTrackerPositionFromScroll(e.box.current.scrollTop))})),y()(h()(e),"scroll",(function(){e.ratio>=1||e.setTrackerPositionFromScroll(e.box.current.scrollTop)})),y()(h()(e),"onDragStart",(function(t){t.preventDefault(),e.startY=t.clientY,e.trackerTop=e.lastTrackerTop,e.props.document.addEventListener("mousemove",e.onMove),e.props.document.addEventListener("mouseup",e.onUp)})),y()(h()(e),"onMove",(function(t){t.preventDefault();var n=t.clientY-e.startY,r=Math.min(Math.max(e.trackerTop+n,0),e.clientHeight-e.trackerHeight);e.setScrollPositionFromTracker(r)})),y()(h()(e),"onUp",(function(t){t.preventDefault(),e.props.document.removeEventListener("mousemove",e.onMove),e.props.document.removeEventListener("mouseup",e.onUp)})),e}return f()(n,[{key:"componentDidMount",value:function(){this.chooseTransformProp(),this.resize(),this.props.windowResize&&this.props.window.addEventListener("resize",this.resize)}},{key:"componentDidUpdate",value:function(){this.resize()}},{key:"componentWillUnmount",value:function(){this.props.window.removeEventListener("resize",this.resize)}},{key:"chooseTransformProp",value:function(){var e=this.trackerY.current.style,t="";"transform"in e?t="transform":"webkitTransform"in e&&(t="webkitTransform"),this.transformProp=t}},{key:"setTrackerPosition",value:function(e){this.lastTrackerTop=e,this.trackerY.current.style[this.transformProp]="translate(0, ".concat(e,"px)")}},{key:"setTrackerPositionFromScroll",value:function(e){var t=e/(this.scrollHeight-this.clientHeight);this.setTrackerPosition((this.clientHeight-this.trackerHeight)*t)}},{key:"setScrollPositionFromTracker",value:function(e){var t=e/(this.clientHeight-this.trackerHeight);this.box.current.scrollTop=(this.scrollHeight-this.clientHeight)*t}},{key:"render",value:function(){return Object(E.a)("div",{vkuiClass:"CustomScrollView"},Object(E.a)("div",{vkuiClass:"CustomScrollView__barY",ref:this.barY},Object(E.a)("div",{vkuiClass:"CustomScrollView__trackerY",ref:this.trackerY,onMouseDown:this.onDragStart})),Object(E.a)("div",{vkuiClass:"CustomScrollView__box",tabIndex:-1,ref:this.box,onScroll:this.scroll},this.props.children))}}]),n}(w.a.Component),Ei=Object(K.e)(yi),Oi=(be("CustomSelectOption"),function(e){var t=e.children,n=e.hovered,r=e.selected,i=e.before,c=e.after,s=(e.option,e.description),u=e.disabled,l=o()(e,["children","hovered","selected","before","after","option","description","disabled"]),d="string"==typeof t?t:null,f=rr().sizeY;return Object(E.a)($e,a()({},l,{Component:"div",weight:"regular",role:"option",title:d,"aria-disabled":u,"aria-selected":r,vkuiClass:A("CustomSelectOption","CustomSelectOption--sizeY-".concat(f),{"CustomSelectOption--hover":n&&!u,"CustomSelectOption--selected":r,"CustomSelectOption--disabled":u})}),se(i)&&Object(E.a)("div",{vkuiClass:"CustomSelectOption__before"},i),Object(E.a)("div",{vkuiClass:"CustomSelectOption__main"},Object(E.a)("div",{vkuiClass:"CustomSelectOption__children"},t),se(s)&&Object(E.a)(pt,{level:"1",weight:"regular",vkuiClass:"CustomSelectOption__description"},s)),Object(E.a)("div",{vkuiClass:"CustomSelectOption__after"},se(c)&&Object(E.a)("div",{className:"CustomSelectOption__afterIn"},c),r&&Object(E.a)(In.a,{vkuiClass:"CustomSelectOption__selectedIcon"})))}),wi=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return t>=e.length-1?-1:e.findIndex((function(e,n){return n>t&&!e.disabled}))},Ci=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=-1;if(t<=0)return n;for(var r=t-1;r>=0;r--){var a=e[r];if(!a.disabled){n=r;break}}return n},Si=(be("CustomSelect"),function(e){v()(n,e);var t=b()(n);function n(e){var r;l()(this,n),r=t.call(this,e),y()(h()(r),"state",void 0),y()(h()(r),"keyboardInput",void 0),y()(h()(r),"isControlledOutside",void 0),y()(h()(r),"selectEl",void 0),y()(h()(r),"scrollBoxRef",Object(O.createRef)()),y()(h()(r),"resetKeyboardInput",(function(){r.keyboardInput=""})),y()(h()(r),"getSelectedItem",(function(){var e=r.state,t=e.selectedOptionIndex,n=e.options;return n.length?n[t]:null})),y()(h()(r),"filter",(function(e,t,n){return"function"==typeof n?e.filter((function(e){return n(t,e)})):e})),y()(h()(r),"open",(function(){r.setState((function(e){return{opened:!0,focusedOptionIndex:e.selectedOptionIndex}}),(function(){var e=r.state.selectedOptionIndex;r.isValidIndex(e)&&r.scrollToElement(e,!0)})),"function"==typeof r.props.onOpen&&r.props.onOpen()})),y()(h()(r),"close",(function(){r.resetKeyboardInput(),r.setState((function(){return{inputValue:"",opened:!1,focusedOptionIndex:-1,options:r.props.options}})),"function"==typeof r.props.onClose&&r.props.onClose()})),y()(h()(r),"selectFocused",(function(){var e=r.state.focusedOptionIndex;r.select(e)})),y()(h()(r),"select",(function(e){if(r.isValidIndex(e)){var t=r.state.options[e];r.setState({nativeSelectValue:t.value},(function(){var e=new Event("change",{bubbles:!0});r.selectEl.dispatchEvent(e)})),r.close()}})),y()(h()(r),"onClick",(function(){r.state.opened?r.close():r.open()})),y()(h()(r),"onFocus",(function(){var e=new Event("focus");r.selectEl.dispatchEvent(e)})),y()(h()(r),"onBlur",(function(){r.close();var e=new Event("blur");r.selectEl.dispatchEvent(e)})),y()(h()(r),"focusOptionByIndex",(function(e){e<0||e>r.state.options.length-1||(r.state.options[e].disabled||(r.scrollToElement(e),r.setState((function(){return{focusedOptionIndex:e}}))))})),y()(h()(r),"focusOption",(function(e){var t=r.state.focusedOptionIndex;if("next"===e){var n=wi(r.state.options,t);t=-1===n?wi(r.state.options):n}else if("prev"===e){var a=Ci(r.state.options,t);t=-1===a?Ci(r.state.options):a}r.focusOptionByIndex(t)})),y()(h()(r),"handleOptionHover",(function(e){r.focusOptionByIndex(Array.prototype.indexOf.call(e.currentTarget.parentNode.children,e.currentTarget))})),y()(h()(r),"handleOptionDown",(function(e){e.preventDefault()})),y()(h()(r),"handleOptionClick",(function(e){var t=Array.prototype.indexOf.call(e.currentTarget.parentNode.children,e.currentTarget),n=r.state.options[t];n&&!n.disabled&&r.selectFocused()})),y()(h()(r),"resetFocusedOption",(function(){r.setState({focusedOptionIndex:-1})})),y()(h()(r),"onKeyboardInput",(function(e){var t=r.keyboardInput+e,n=r.state.options.findIndex((function(e){return e.label.toLowerCase().includes(t)}));n>-1&&r.focusOptionByIndex(n),r.keyboardInput=t})),y()(h()(r),"onLabelClick",(function(e){var t;(null===(t=r.scrollBoxRef.current)||void 0===t?void 0:t.contains(e.target))&&e.preventDefault()})),y()(h()(r),"onNativeSelectChange",(function(e){var t=e.currentTarget.value;r.isControlledOutside||r.setState({selectedOptionIndex:r.findSelectedIndex(r.state.options,t)}),r.props.onChange&&r.props.onChange(e)})),y()(h()(r),"onInputChange",(function(e){if(r.props.onInputChange){var t=r.props.onInputChange(e,r.props.options);t?r.setState({options:t,selectedOptionIndex:r.findSelectedIndex(t,r.state.nativeSelectValue),inputValue:e.target.value}):r.setState({inputValue:e.target.value})}else{var n=r.filter(r.props.options,e.target.value,r.props.filterFn);r.setState({options:n,selectedOptionIndex:r.findSelectedIndex(n,r.state.nativeSelectValue),inputValue:e.target.value})}})),y()(h()(r),"onInputKeyDown",(function(e){switch(["ArrowUp","ArrowDown","Escape","Enter"].includes(e.key)&&r.areOptionsShown&&e.preventDefault(),e.key){case"ArrowUp":r.areOptionsShown&&r.focusOption("prev");break;case"ArrowDown":r.areOptionsShown&&r.focusOption("next");break;case"Escape":r.close();break;case"Enter":r.areOptionsShown&&r.selectFocused()}})),y()(h()(r),"handleKeyDownSelect",(function(e){var t=r.state.opened;if(1!==e.key.length||" "===e.key)switch(["ArrowUp","ArrowDown","Escape","Enter"].includes(e.key)&&r.areOptionsShown&&e.preventDefault(),e.key){case"ArrowUp":t?r.areOptionsShown&&r.focusOption("prev"):r.open();break;case"ArrowDown":t?r.areOptionsShown&&r.focusOption("next"):r.open();break;case"Escape":r.close();break;case"Enter":case"Spacebar":case" ":t?r.areOptionsShown&&r.selectFocused():r.open()}else r.onKeyboardInput(e.key)})),y()(h()(r),"handleKeyUp",function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,a=null,i=function(){return e.apply(r,a)};return function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];a=r,clearTimeout(n),n=setTimeout(i,t)}}(r.resetKeyboardInput,1e3)),y()(h()(r),"renderOption",(function(e,t){var n=r.state,a=n.focusedOptionIndex,i=n.selectedOptionIndex,o=r.props.renderOption,c=t===a,s=t===i;return Object(E.a)(w.a.Fragment,{key:"".concat(e.value)},o({option:e,hovered:c,children:e.label,selected:s,disabled:e.disabled,onClick:r.handleOptionClick,onMouseDown:r.handleOptionDown,onMouseEnter:r.handleOptionHover}))})),y()(h()(r),"selectRef",(function(e){r.selectEl=e,le(e,r.props.getRef)}));var a=e.value,i=e.defaultValue,o=void 0!==a?a:i;return r.keyboardInput="",r.state={opened:!1,focusedOptionIndex:-1,selectedOptionIndex:r.findSelectedIndex(e.options,o),nativeSelectValue:o,options:e.options,inputValue:""},void 0!==e.value&&(r.isControlledOutside=!0),r}return f()(n,[{key:"findSelectedIndex",value:function(e,t){return e.findIndex((function(e){return t="number"==typeof e.value?Number(t):t,e.value===t}))}},{key:"isValidIndex",value:function(e){return e>=0&&e<this.state.options.length}},{key:"scrollToElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.scrollBoxRef.current,r=n?n.children[e]:null;if(r){var a=n.offsetHeight,i=n.scrollTop,o=r.offsetTop,c=r.offsetHeight;t?n.scrollTop=o-a/2+c/2:o+c>a+i?n.scrollTop=o-a+c:o<i&&(n.scrollTop=o)}}},{key:"componentDidUpdate",value:function(e){if(e.value!==this.props.value||e.options!==this.props.options){this.isControlledOutside=void 0!==this.props.value;var t=void 0===this.props.value?this.state.nativeSelectValue:this.props.value,n=this.props.searchable?this.filter(this.props.options,this.state.inputValue,this.props.filterFn):this.props.options;this.setState({nativeSelectValue:t,selectedOptionIndex:this.findSelectedIndex(n,t),options:n})}}},{key:"render",value:function(){var e,t=this.state,n=t.opened,r=t.nativeSelectValue,i=this.props,c=i.searchable,s=i.name,u=i.className,l=(i.getRef,i.getRootRef),d=i.popupDirection,f=i.options,p=i.sizeY,h=i.platform,m=i.style,v=(i.onChange,i.onBlur),g=i.onFocus,b=i.onClick,_=(i.renderOption,i.children,i.emptyText,i.onInputChange,i.filterFn,i.renderDropdown),y=(i.onOpen,i.onClose,i.fetching),O=o()(i,["searchable","name","className","getRef","getRootRef","popupDirection","options","sizeY","platform","style","onChange","onBlur","onFocus","onClick","renderOption","children","emptyText","onInputChange","filterFn","renderDropdown","onOpen","onClose","fetching"]),w=this.getSelectedItem(),C=w?w.label:void 0,S=Object(E.a)(Ei,{boxRef:this.scrollBoxRef},this.state.options.map(this.renderOption),0===this.state.options.length&&Object(E.a)(pt,{level:"1",weight:"regular",vkuiClass:"CustomSelect__empty"},this.props.emptyText));return e="function"==typeof _?_({defaultDropdownContent:S}):y?Object(E.a)("div",{vkuiClass:"CustomSelect__fetching"},Object(E.a)(ln,{size:"small"})):S,Object(E.a)("label",{vkuiClass:F("CustomSelect",h),className:u,style:m,ref:l,onClick:this.onLabelClick},n&&c?Object(E.a)($a,a()({},O,{autoFocus:!0,onBlur:this.onBlur,vkuiClass:A({CustomSelect__open:n,"CustomSelect__open--popupDirectionTop":"top"===d}),value:this.state.inputValue,onKeyDown:this.onInputKeyDown,onChange:this.onInputChange,onClick:b,after:p===Ne.COMPACT?Object(E.a)(fi.a,null):Object(E.a)(vi,null),placeholder:O.placeholder})):Object(E.a)(_i,a()({},O,{"aria-hidden":!0,onClick:this.onClick,onKeyDown:this.handleKeyDownSelect,onKeyUp:this.handleKeyUp,onFocus:this.onFocus,onBlur:this.onBlur,vkuiClass:A({CustomSelect__open:n,"CustomSelect__open--popupDirectionTop":"top"===d})}),C),Object(E.a)("select",{ref:this.selectRef,name:s,onChange:this.onNativeSelectChange,onBlur:v,onFocus:g,onClick:b,value:r,"aria-hidden":!0,vkuiClass:"CustomSelect__control"},f.map((function(e){return Object(E.a)("option",{key:"".concat(e.value),value:e.value})}))),n&&Object(E.a)("div",{vkuiClass:A("CustomSelect__options","CustomSelect__options--sizeY-".concat(p),{"CustomSelect__options--popupDirectionTop":"top"===d}),onMouseLeave:this.resetFocusedOption},e))}},{key:"areOptionsShown",get:function(){return null!==this.scrollBoxRef.current}}]),n}(w.a.Component));y()(Si,"defaultProps",{searchable:!1,renderOption:function(e){e.option;var t=o()(e,["option"]);return Object(E.a)(Oi,t)},options:[],emptyText:"Ничего не найдено",filterFn:function(e,t){return t.label.toLowerCase().includes(e.toLowerCase())}});var Ai=$(Fe(Si,{sizeY:!0})),ki=Fe((function(e){var t=e.hasMouse,n=o()(e,["hasMouse"]);if(t){n.children;var r=o()(n,["children"]);return Object(E.a)(Ai,r)}var a=n.options,i=void 0===a?[]:a,c=(n.popupDirection,n.renderOption,o()(n,["options","popupDirection","renderOption"]));return Object(E.a)(gi,c,i.map((function(e){var t=e.label,n=e.value;return Object(E.a)("option",{value:n,key:"".concat(n)},t)})))}),{hasMouse:!0}),ji=["Января","Февраля","Марта","Апреля","Мая","Июня","Июля","Августа","Сентября","Октября","Ноября","Декабря"];function Ti(e){var t=e.day,n=e.month,r=e.year;return"".concat(r,"-").concat(ce(n),"-").concat(ce(t))}var Ii=function(e,t){for(var n=e>t,r=[],a=Math.min(e,t);a<=Math.max(e,t);a++)r.push(a);return n?r.reverse():r},Pi=function(e){var t=e.name,n=e.min,r=e.max,i=e.dayPlaceholder,c=e.monthPlaceholder,s=e.yearPlaceholder,u=e.popupDirection,l=(e.defaultValue,e.hasMouse,e.monthNames),d=e.day,f=e.month,p=e.year,h=e.onDateChange,m=e.disabled,v=o()(e,["name","min","max","dayPlaceholder","monthPlaceholder","yearPlaceholder","popupDirection","defaultValue","hasMouse","monthNames","day","month","year","onDateChange","disabled"]),g=function(e){h(y()({day:d,month:f,year:p},e.target.name,Number(e.target.value)))},b=Ii(1,function(e,t){return e?new Date(t||2016,e,0).getDate():31}(f,p)).map((function(e){return{label:String(e),value:e}})),_=(l||ji).map((function(e,t){return{label:e,value:t+1}})),O=Ii(r.year,n.year).map((function(e){return{label:String(e),value:e}}));return Object(E.a)("div",a()({vkuiClass:"DatePicker"},v),Object(E.a)("div",{vkuiClass:"DatePicker__container"},Object(E.a)("div",{vkuiClass:"DatePicker__day"},Object(E.a)(Ai,{name:"day",value:d,options:b,placeholder:i,popupDirection:u,onChange:g,disabled:m})),Object(E.a)("div",{vkuiClass:"DatePicker__month"},Object(E.a)(Ai,{name:"month",value:f,options:_,placeholder:c,popupDirection:u,onChange:g,disabled:m})),Object(E.a)("div",{vkuiClass:"DatePicker__year"},Object(E.a)(Ai,{name:"year",value:p,options:O,placeholder:s,popupDirection:u,onChange:g,disabled:m}))),Object(E.a)("input",{type:"hidden",name:t,value:Ti({day:d,month:f,year:p})}))},Di=function(e){var t=e.min,n=e.max,r=(e.dayPlaceholder,e.monthPlaceholder,e.yearPlaceholder,e.popupDirection,e.defaultValue,e.hasMouse,e.day),i=e.month,c=e.year,s=e.onDateChange,u=o()(e,["min","max","dayPlaceholder","monthPlaceholder","yearPlaceholder","popupDirection","defaultValue","hasMouse","day","month","year","onDateChange"]),l=r&&i&&c?{defaultValue:Ti({day:r,month:i,year:c})}:{},d=Object(O.useCallback)((function(e){var t,n;s((t=e.currentTarget.value,n=t.split("-"),{day:Number(n[2]),month:Number(n[1]),year:Number(n[0])}))}),[s]);return Object(E.a)($a,a()({},u,{type:"date",onChange:d,min:Ti(t),max:Ti(n)},l))},Ni=function(e){var t=e.hasMouse,n=e.defaultValue,r=o()(e,["hasMouse","defaultValue"]),i=Object(O.useState)(n||{day:0,month:0,year:0}),c=It()(i,2),u=c[0],l=c[1],d=Object(O.useCallback)((function(e){l(e),r.onDateChange&&r.onDateChange(s()({},e))}),[r.onDateChange]),f=t?Pi:Di;return Object(E.a)(f,a()({},r,u,{onDateChange:d}))};Ni.defaultProps={min:{day:0,month:0,year:0},max:{day:31,month:12,year:2100}};var xi=Fe(Ni,{hasMouse:!0}),Ri=function(e){var t=e.children,n=e.getRootRef,r=o()(e,["children","getRootRef"]),i=Ve();return Object(E.a)("div",a()({},r,{ref:n,vkuiClass:F("Div",i)}),t)},Mi=function(e){var t=e.height,n=e.style,r=o()(e,["height","style"]);return Object(E.a)(ln,a()({size:"regular"},r,{style:s()({height:t},n)}))};Mi.defaultProps={height:96};var Li=w.a.memo(Mi),Bi=n(1324),Fi=function(e){var t=e.children,n=o()(e,["children"]),r=Ve();return Object(E.a)(rt,a()({"aria-label":he(t)},n),r===N||r===R?Object(E.a)(Bi.a,null):t)};Fi.defaultProps={children:"Отмена"};var Hi=Fi,Vi=n(1325),Ui=!1;function zi(){Ui||(Object(Gt.a)(new Ut.a({id:"chevron_left_outline_28",viewBox:"0 0 28 28",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="chevron_left_outline_28"><path d="M12.414 14l5.793-5.793a1 1 0 00-1.414-1.414l-6.5 6.5a1 1 0 000 1.414l6.5 6.5a1 1 0 001.414-1.414z" fill="currentColor" /></symbol>'})),Ui=!0)}var Gi=function(e){return Object(Gt.b)((function(){zi()}),[]),w.a.createElement(Wt.a,Object(zt.assign)({},e,{viewBox:"0 0 28 28",id:"chevron_left_outline_28",width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};Gi.mountIcon=zi;var Wi=Gi,qi=n(1326),Ki=function(e){var t=e.label,n=e.sizeX,r=o()(e,["label","sizeX"]),i=Ve(),c=i===R||i===x&&n===Ne.REGULAR;return Object(E.a)(rt,a()({},r,{vkuiClass:A(F("PanelHeaderBack",i),{"PanelHeaderBack--has-label":c&&!!t}),label:c&&t}),i===N&&Object(E.a)(Vi.a,null),i===R&&Object(E.a)(Wi,null),i===x&&Object(E.a)(qi.a,null))};Ki.defaultProps={"aria-label":"Назад"};var Yi=w.a.memo(Fe(Ki,{sizeX:!0})),Zi=n(1327),Qi=function(e){var t=e.children,n=o()(e,["children"]),r=Ve();return Object(E.a)(rt,a()({"aria-label":he(t),primary:!0},n),r===N||r===R?Object(E.a)(Zi.a,null):t)};Qi.defaultProps={children:"Готово"};var Ji=Qi,Xi=n(374),$i=n(641);be("AppRoot");var eo=Fe((function(e){var t=e.children,n=e.mode,r=e.embedded,i=e.sizeX,c=e.hasMouse,s=e.noLegacyClasses,u=void 0!==s&&s,l=e.scroll,d=void 0===l?"global":l,f=o()(e,["children","mode","embedded","sizeX","hasMouse","noLegacyClasses","scroll"]),p=n||(r?"embedded":"full"),h=function(){var e=Object(K.d)().document,t=Object(O.useState)(!0),n=It()(t,2),r=n[0],a=n[1],i=Object(O.useCallback)((function(e){var t=e.key,n=e.keyCode;"TAB"!==(null==t?void 0:t.toUpperCase())&&9!==n||a(!0)}),[]),o=Object(O.useCallback)((function(){a(!1)}),[]),c={passive:!0,capture:!0};return Xr(e,"keydown",i,c),Xr(e,"mousedown",o,c),Xr(e,"touchstart",o,c),r}(),m=Object(O.useRef)(),v=Object(O.useState)(null),g=It()(v,2),b=g[0],_=g[1],y=Object(K.d)(),w=y.window,C=y.document,S=Object(O.useRef)(!1);S.current||(w&&"full"===p&&C.documentElement.classList.add("vkui"),Xi.a.noConflict=u,S.current=!0),yt((function(){if("full"===p)return fe;var e=C.createElement("div");return e.classList.add("vkui__portal-root"),C.body.appendChild(e),_(e),function(){return e.parentElement.removeChild(e)}}),[]),yt((function(){var e;if("partial"===p)return fe;var t=m.current.parentElement,n=["vkui__root"].concat("embedded"===p?"vkui__root--embedded":[]);return(e=t.classList).add.apply(e,Fn()(n)),function(){var e;(e=t.classList).remove.apply(e,Fn()(n)),"full"===p&&C.documentElement.classList.remove("vkui")}}),[]),yt((function(){if("partial"===p||i!==Ne.REGULAR)return fe;var e="embedded"===p?m.current.parentElement:C.body;return e.classList.add("vkui--sizeX-regular"),function(){return e.classList.remove("vkui--sizeX-regular")}}),[i]);var k=Object(O.useMemo)((function(){return"contain"===d?(e=m,{getScroll:function(){return{x:e.current.scrollLeft,y:e.current.scrollTop}},scrollTo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=e.current;r.scrollTo(t?me(t,0,r.scrollWidth-r.clientWidth):0,n?me(n,0,r.scrollHeight-r.clientHeight):0)}}):function(e,t){return{getScroll:function(){return{x:e.pageXOffset,y:e.pageYOffset}},scrollTo:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.scrollTo(n?me(n,0,t.body.scrollWidth-e.innerWidth):0,r?me(r,0,t.body.scrollHeight-e.innerHeight):0)}}}(w,C);var e}),[d]),j=Object(E.a)(ae.Provider,{value:{appRoot:m,portalRoot:b,embedded:"embedded"===p}},Object(E.a)(ve.Provider,{value:k},Object(E.a)($i.b,{classPrefix:"vkui",globalClasses:!u},t)));return"partial"===p?j:Object(E.a)("div",a()({ref:m,vkuiClass:A("AppRoot",{"AppRoot--no-mouse":!c,"AppRoot--keyboard-input":h})},f),j)}),{sizeX:!0,hasMouse:!0});function to(e){var t=Object(O.useRef)(null),n=Object(O.useState)({}),r=It()(n,2)[1],a=Object(K.d)().window;return t.current||(t.current=no(a?a.innerWidth:0,a?a.innerHeight:0,e)),Object(O.useEffect)((function(){function n(){var n=no(a.innerWidth,a.innerHeight,e),i=t.current,o=i.viewWidth,c=i.viewHeight,s=i.sizeX,u=i.sizeY,l=i.hasMouse;o===n.viewWidth&&c===n.viewHeight&&s===n.sizeX&&u===n.sizeY&&l===n.hasMouse||(t.current=n,r({}))}return n(),a.addEventListener("resize",n,!1),function(){a.removeEventListener("resize",n,!1)}}),[e.viewWidth,e.viewHeight,e.sizeX,e.sizeY,e.hasMouse]),Object(E.a)(Be.Provider,{value:t.current},e.children)}function no(e,t,n){var r=xe.SMALL_MOBILE,a=Re.SMALL,i=Ne.REGULAR,o=Ne.REGULAR,c="boolean"==typeof n.hasMouse?n.hasMouse:T.o;return r=e>=1280?xe.DESKTOP:e>=1024?xe.TABLET:e>=768?xe.SMALL_TABLET:e>=320?xe.MOBILE:xe.SMALL_MOBILE,a=t>=720?Re.MEDIUM:t>414?Re.SMALL:Re.EXTRA_SMALL,n.viewWidth&&(r=n.viewWidth),n.viewHeight&&(a=n.viewHeight),r<=xe.MOBILE&&(o=Ne.COMPACT),(r>=xe.SMALL_TABLET&&c||a<=Re.EXTRA_SMALL)&&(i=Ne.COMPACT),n.sizeX&&(o=n.sizeX),n.sizeY&&(i=n.sizeY),{viewWidth:r,viewHeight:a,sizeX:o,sizeY:i,hasMouse:c}}function ro(e){var t,n,r=Object(O.useRef)(e);return t=r.current,n=e,Object.keys(t).length===Object.keys(n).length&&Object.keys(t).every((function(e){return t[e]===n[e]}))||(r.current=e),r.current}to.defaultProps={window:T.b&&window};var ao=function(e){return e===G.SPACE_GRAY||e===W.VKCOM_DARK?"dark":"light"};be("ConfigProvider");var io=function(e){var t=e.children,n=e.schemeTarget,r=o()(e,["children","schemeTarget"]),a=function(e,t){if("inherit"===e)return e;if(t===R)return G.VKCOM;switch(e){case G.DEPRECATED_CLIENT_LIGHT:return G.BRIGHT_LIGHT;case G.DEPRECATED_CLIENT_DARK:return G.SPACE_GRAY;default:return e}}(r.scheme,r.platform),i=Object(K.d)().document,c=n||(null==i?void 0:i.body);yt((function(){return"inherit"===a?fe:(c.setAttribute("scheme",a),function(){return c.removeAttribute("scheme")})}),[a]);var u,l,d,f,p,h,m,v,g=(u=c,d="inherit"===(l=a),f=function(){if(d&&T.b)return u.getAttribute("scheme")},p=Object(O.useState)(f()),h=It()(p,2),m=h[0],v=h[1],Object(O.useEffect)((function(){if(!d)return fe;v(f());var e=new MutationObserver((function(){return v(f())}));return e.observe(u,{attributes:!0,attributeFilter:["scheme"]}),function(){return e.disconnect()}}),[d]),"inherit"===l?m:l),b=ro(s()({appearance:ao(g)},r));return Object(E.a)(X.Provider,{value:b},t)};io.defaultProps=s()({},J);var oo=io,co={bottom:null,top:null,left:null,right:null};function so(e){var t=e.detail,n=t.type,r=t.data;switch(n){case"VKWebAppUpdateConfig":case"VKWebAppUpdateInsets":var a=r.insets;if(a)return s()(s()({},a),{},{bottom:a.bottom>150?0:a.bottom})}return null}function uo(e){return function(t){var n=function(){var e=Object(O.useState)(co),t=It()(e,2),n=t[0],r=t[1];return Object(O.useEffect)((function(){function e(e){var t=so(e);t&&r(t)}return Q.a.subscribe(e),function(){Q.a.unsubscribe(e)}}),[]),n}();return Object(E.a)(e,a()({},t,{insets:n}))}}function lo(e){var t=e.duration,n=e.timing,r=e.draw;if("undefined"!=typeof window){var a=window.performance.now();window.requestAnimationFrame((function e(i){var o=(i-a)/t;o>1&&(o=1);var c=n(o);r(c),o<1&&window.requestAnimationFrame(e)}))}}Q.a.subscribe((function(e){var t=so(e);if(t){var n=window.document.documentElement;for(var r in t)t.hasOwnProperty(r)&&(t[r]>0||"bottom"===r)&&n.style.setProperty("--safe-area-inset-".concat(r),"".concat(t[r],"px"));co=t}}))},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.d(t,"Sc",(function(){return h})),n.d(t,"vb",(function(){return f})),n.d(t,"Vc",(function(){return p})),n.d(t,"Rc",(function(){return S})),n.d(t,"mb",(function(){return A})),n.d(t,"E",(function(){return k})),n.d(t,"D",(function(){return j})),n.d(t,"B",(function(){return T})),n.d(t,"A",(function(){return I})),n.d(t,"b",(function(){return P})),n.d(t,"C",(function(){return D})),n.d(t,"Uc",(function(){return m})),n.d(t,"Wc",(function(){return v})),n.d(t,"Jb",(function(){return g})),n.d(t,"tb",(function(){return b})),n.d(t,"J",(function(){return _})),n.d(t,"q",(function(){return y})),n.d(t,"sb",(function(){return E})),n.d(t,"N",(function(){return O})),n.d(t,"Ac",(function(){return w})),n.d(t,"ub",(function(){return C})),n.d(t,"lb",(function(){return B})),n.d(t,"g",(function(){return F})),n.d(t,"e",(function(){return H})),n.d(t,"Lb",(function(){return V})),n.d(t,"Bc",(function(){return U})),n.d(t,"nb",(function(){return z})),n.d(t,"P",(function(){return G})),n.d(t,"Zb",(function(){return W})),n.d(t,"O",(function(){return q})),n.d(t,"Hc",(function(){return K})),n.d(t,"Lc",(function(){return Y})),n.d(t,"k",(function(){return Z})),n.d(t,"ic",(function(){return Q})),n.d(t,"Dc",(function(){return J})),n.d(t,"Ec",(function(){return X})),n.d(t,"kc",(function(){return $})),n.d(t,"Yb",(function(){return ee})),n.d(t,"oc",(function(){return te})),n.d(t,"qb",(function(){return ne})),n.d(t,"d",(function(){return re})),n.d(t,"jb",(function(){return ae})),n.d(t,"c",(function(){return ie})),n.d(t,"G",(function(){return oe})),n.d(t,"j",(function(){return ce})),n.d(t,"i",(function(){return se})),n.d(t,"h",(function(){return ue})),n.d(t,"nc",(function(){return le})),n.d(t,"cc",(function(){return de})),n.d(t,"fc",(function(){return fe})),n.d(t,"qc",(function(){return pe})),n.d(t,"Mc",(function(){return he})),n.d(t,"uc",(function(){return me})),n.d(t,"wc",(function(){return ve})),n.d(t,"xc",(function(){return ge})),n.d(t,"sc",(function(){return be})),n.d(t,"rb",(function(){return _e})),n.d(t,"tc",(function(){return ye})),n.d(t,"Kc",(function(){return Ee})),n.d(t,"Gc",(function(){return Oe})),n.d(t,"Fc",(function(){return we})),n.d(t,"Cc",(function(){return Ce})),n.d(t,"hc",(function(){return Se})),n.d(t,"f",(function(){return Ae})),n.d(t,"ac",(function(){return ke})),n.d(t,"lc",(function(){return je})),n.d(t,"Jc",(function(){return Te})),n.d(t,"ec",(function(){return Ie})),n.d(t,"vc",(function(){return Pe})),n.d(t,"gc",(function(){return De})),n.d(t,"mc",(function(){return Ne})),n.d(t,"dc",(function(){return xe})),n.d(t,"jc",(function(){return Re})),n.d(t,"pc",(function(){return Me})),n.d(t,"rc",(function(){return Le})),n.d(t,"Pc",(function(){return Be})),n.d(t,"Nc",(function(){return Fe})),n.d(t,"Oc",(function(){return He})),n.d(t,"Qc",(function(){return Ve})),n.d(t,"w",(function(){return N})),n.d(t,"Ic",(function(){return x})),n.d(t,"wb",(function(){return R})),n.d(t,"zc",(function(){return M})),n.d(t,"yc",(function(){return L})),n.d(t,"Xc",(function(){return We})),n.d(t,"Tc",(function(){return qe})),n.d(t,"x",(function(){return Ke})),n.d(t,"y",(function(){return Ye})),n.d(t,"Q",(function(){return Ze})),n.d(t,"m",(function(){return Qe})),n.d(t,"Xb",(function(){return Je})),n.d(t,"Rb",(function(){return Xe})),n.d(t,"Pb",(function(){return $e})),n.d(t,"Qb",(function(){return et})),n.d(t,"Ub",(function(){return tt})),n.d(t,"Vb",(function(){return nt})),n.d(t,"Ob",(function(){return rt})),n.d(t,"Wb",(function(){return at})),n.d(t,"Sb",(function(){return it})),n.d(t,"Tb",(function(){return ot})),n.d(t,"Nb",(function(){return ct})),n.d(t,"zb",(function(){return st})),n.d(t,"Bb",(function(){return ut})),n.d(t,"Db",(function(){return lt})),n.d(t,"Eb",(function(){return dt})),n.d(t,"Cb",(function(){return ft})),n.d(t,"yb",(function(){return pt})),n.d(t,"Fb",(function(){return ht})),n.d(t,"xb",(function(){return mt})),n.d(t,"Ab",(function(){return vt})),n.d(t,"Ib",(function(){return gt})),n.d(t,"Hb",(function(){return bt})),n.d(t,"Gb",(function(){return _t})),n.d(t,"R",(function(){return yt})),n.d(t,"S",(function(){return Et})),n.d(t,"T",(function(){return Ot})),n.d(t,"U",(function(){return wt})),n.d(t,"V",(function(){return Ct})),n.d(t,"W",(function(){return St})),n.d(t,"X",(function(){return At})),n.d(t,"Y",(function(){return kt})),n.d(t,"Z",(function(){return jt})),n.d(t,"ab",(function(){return Tt})),n.d(t,"bb",(function(){return It})),n.d(t,"cb",(function(){return Pt})),n.d(t,"db",(function(){return Dt})),n.d(t,"eb",(function(){return Nt})),n.d(t,"fb",(function(){return xt})),n.d(t,"L",(function(){return Rt})),n.d(t,"K",(function(){return Mt})),n.d(t,"M",(function(){return Lt})),n.d(t,"ib",(function(){return Bt})),n.d(t,"a",(function(){return Ft})),n.d(t,"n",(function(){return Ht})),n.d(t,"pb",(function(){return Vt})),n.d(t,"Kb",(function(){return Ut})),n.d(t,"bc",(function(){return zt})),n.d(t,"F",(function(){return Gt})),n.d(t,"Mb",(function(){return Wt})),n.d(t,"z",(function(){return qt})),n.d(t,"o",(function(){return Kt})),n.d(t,"kb",(function(){return Ue})),n.d(t,"hb",(function(){return ze})),n.d(t,"gb",(function(){return Ge})),n.d(t,"l",(function(){return Qt})),n.d(t,"H",(function(){return Yt})),n.d(t,"I",(function(){return Zt})),n.d(t,"ob",(function(){return Jt}));var r,a,i,o,c=n(2),s=n.n(c),u=n(8),l=n(50),d=n(136);n.d(t,"t",(function(){return d.d})),n.d(t,"u",(function(){return d.e})),n.d(t,"r",(function(){return d.b})),n.d(t,"v",(function(){return d.f})),n.d(t,"p",(function(){return d.a})),n.d(t,"s",(function(){return d.c}));var f,p,h=30;!function(e){e.NEURAL="NEURAL",e.SIMPLE="SIMPLE",e.NONE="NONE"}(f||(f={})),function(e){e.SD="SD",e.HD="HD",e.FHD="FHD"}(p||(p={}));var m,v,g,b,_,y,E,O,w,C,S="calls_video_resolution",A="vkcalls:calls_app_downloaded",k="vkcalls://",j="vk.com",T="https://vk.com/video-calls",I=(i={},s()(i,l.c.WINDOWS,"https://vkcalls-native-ac.vk-apps.com/latest/vk-calls.exe"),s()(i,l.c.MAC,"https://vkcalls-native-ac.vk-apps.com/latest/vk-calls.dmg"),s()(i,l.c.LINUX,{deb:(r={},s()(r,l.a.X64,"https://vkcalls-native-ac.vk-apps.com/latest/vk-calls-amd64.deb"),s()(r,l.a.X86,"https://vkcalls-native-ac.vk-apps.com/latest/vk-calls-i386.deb"),r),rpm:(a={},s()(a,l.a.X64,"https://vkcalls-native-ac.vk-apps.com/latest/vk-calls-x86_64.rpm"),s()(a,l.a.X86,"https://vkcalls-native-ac.vk-apps.com/latest/vk-calls-i686.rpm"),a)}),i),P="calls_desktop_app_notification",D=(o={},s()(o,l.c.WINDOWS,"vk-calls.exe"),s()(o,l.c.MAC,"vk-calls.dmg"),s()(o,l.c.LINUX,{deb:s()({},l.a.X64,"vk-calls-amd64.deb")}),o);!function(e){e[e.SD=360]="SD",e[e.HD=720]="HD",e[e.FHD=1080]="FHD"}(m||(m={})),function(e){e[e.SD=640]="SD",e[e.HD=1280]="HD",e[e.FHD=1920]="FHD"}(v||(v={})),function(e){e[e.SINGLE=0]="SINGLE",e[e.ALL=1]="ALL"}(g||(g={})),function(e){e[e.DENY=0]="DENY",e[e.ONCE=1]="ONCE",e[e.ALLOW=1/0]="ALLOW"}(b||(b={})),function(e){e[e.DECLINE=0]="DECLINE",e[e.PROCESS=1]="PROCESS",e[e.FATAL=2]="FATAL"}(_||(_={})),function(e){e.ALREADY_IN_CALL="already_in_call",e.CANT_REACH_API="cant_reach_api"}(y||(y={})),function(e){e.MIC_CAMERA_PERMISSION="mic_camera",e.CAMERA_PERMISSION="camera",e.MIC_PERMISSION="mic",e.CAMERA_ACCESS="cameralock",e.MIC_ACCESS="miclock",e.MIC_NOT_FOUND="nomic",e.SCREEN_PERMISSION="screenpermission",e.SCREEN_ACCESS="screenlock"}(E||(E={})),function(e){e.AUTH="auth"}(O||(O={})),function(e){e[e.HEADER=0]="HEADER",e[e.CALL_ALL_IN_CHAT=1]="CALL_ALL_IN_CHAT",e[e.MEMBERS_MORE=2]="MEMBERS_MORE",e[e.FRIENDS_MORE=3]="FRIENDS_MORE",e[e.GROUP_MEMBERS_MORE=4]="GROUP_MEMBERS_MORE"}(w||(w={})),function(e){e[e.READY=0]="READY",e[e.CALL=1]="CALL",e[e.INCOMING=2]="INCOMING",e[e.JOIN=3]="JOIN",e[e.ERROR=4]="ERROR",e[e.FEEDBACK=5]="FEEDBACK",e[e.START=6]="START",e[e.CALL_BY=7]="CALL_BY",e[e.CREATE_CALL=8]="CREATE_CALL"}(C||(C={}));var N,x,R,M,L,B="load_peer",F="change_mode",H="call_state",V="remove_user",U="time_start",z="local_time_start",G="hangup",W="set_chat_info",q="group_call_setup",K="toggle_popup",Y="update_hash",Z="change_ui_mode",Q="set_orator",J="toggle_orator_mode",X="toggle_participants_aside",$="set_pinned_participant",ee="set_admin_pinned_participant",te="set_screen_sharing_pinned_participant",ne="management",re="call_notification",ae="join",ie="call_by_name",oe="error",ce="change_participant_state",se="change_participant_roles",ue="change_participant_permissions",le="set_screen_sharer",de="set_friends",fe="set_group_members",pe="set_speakers",he="update_participants_batch",me="set_unread_count",ve="show_caution_box",ge="show_loader",be="set_tooltip",_e="manual_add_participants",ye="set_translation",Ee="update_anon_token",Oe="toggle_participants_management",we="toggle_participants_kick",Ce="toggle_admin_assignment",Se="set_noise_cancellation",Ae="change_local_video_resolution",ke="set_conversation_options",je="set_privacy_settings",Te="unban_participants",Ie="set_group",Pe="set_waiting_hall",De="set_local_status",Ne="set_push_to_talk_enable",xe="set_grid_scroll_position",Re="set_orator_scroll_position",Me="set_show_desktop_notification",Le="set_start_params",Be="vb_set_user_photos",Fe="vb_add_user_photo",He="vb_remove_user_photo",Ve="vb_set_video_options";!function(e){e.AUDIO="audio",e.VIDEO="video"}(N||(N={})),function(e){e.DEFAULT="default",e.COLLAPSED="collapsed",e.FULLSCREEN="fullscreen"}(x||(x={})),function(e){e.SPEAKING_ON_MUTE="SPEAKING_ON_MUTE",e.RAISED_HAND="RAISED_HAND",e.SCREEN_SHARING_STARTED="SCREEN_SHARING_STARTED",e.BAD_NETWORK_CONNECTION="BAD_NETWORK_CONNECTION",e.BAD_NETWORK_CONNECTION_DISABLE_CAMERA="BAD_NETWORK_CONNECTION_DISABLE_CAMERA",e.ADMIN_MUTE="ADMIN_MUTE",e.ADMIN_MUTE_PERMANENT="ADMIN_MUTE_PERMANENT",e.ADMIN_ROLE_GRANTED="ADMIN_ROLE_GRANTED",e.USER_GRANTED_WITH_ADMIN_ROLE="USER_GRANTED_WITH_ADMIN_ROLE",e.PINNED_BY_ADMIN="PINNED_BY_ADMIN",e.USER_PINNED_BY_ADMIN="USER_PINNED_BY_ADMIN",e.PUSH_TO_TALK="PUSH_TO_TALK",e.CONNECTING="CONNECTING",e.LINK_COPIED_TO_CLIPBOARD="LINK_COPIED_TO_CLIPBOARD"}(R||(R={})),function(e){e.LOWERED="0",e.RAISED="1"}(M||(M={})),function(e){e.NETWORK="network_error",e.API="api_error"}(L||(L={}));var Ue,ze,Ge,We=5e3,qe=.25,Ke="https://vk.com/images/camera_400.png",Ye="https://vk.com/images/call_convo_stub.png",Ze=2,Qe=-2,Je=1,Xe=8,$e=9,et=10,tt=923,nt=928,rt=948,at=960,it=963,ot=951,ct=401,st="settings",ut="translation",lt="translation_start_countdown",dt="translation_stop",ft="translation_stop_share",pt="exit",ht="unmute_request",mt="admin_pin_unmute_request",vt="transfer_admin_rights",gt="virtual_background",bt="virtual_upload_background_photo",_t="virtual_upload_background_error",yt=u.HangupType.BUSY,Et=u.HangupType.CALLEE_IS_OFFLINE,Ot=u.HangupType.CALLER_IS_BLOCKED,wt=u.HangupType.CANCELED,Ct=u.HangupType.EXTERNAL_API_ERROR,St=u.HangupType.FAILED,At=u.HangupType.HUNGUP,kt=u.HangupType.MISSED,jt=u.HangupType.NOT_FRIENDS,Tt=u.HangupType.OLD_VERSION,It=u.HangupType.REJECTED,Pt=u.HangupType.REMOVED,Dt=u.HangupType.SERVICE_DISABLED,Nt=u.HangupType.UNKNOWN_ERROR,xt=u.HangupType.UNSUPPORTED,Rt=2,Mt=128,Lt=64,Bt="incoming_call",Ft="event_add_message",Ht="event_chat_updated",Vt=19,Ut="event_read_inbound",zt="event_set_flags",Gt="event_edit_message",Wt="event_replace_message",qt="event_delete_dialog",Kt=500;!function(e){e[e.CALL=0]="CALL",e[e.WAITING_HALL=1]="WAITING_HALL"}(Ue||(Ue={})),function(e){e.ALL="",e.MISS="missed",e.FRIENDS="friends",e.CURRENT="current"}(ze||(ze={})),function(e){e[e.DELETE_CALL=0]="DELETE_CALL",e[e.SET_CURRENT_CALLS=1]="SET_CURRENT_CALLS",e[e.SET_HISTORY_CALLS=2]="SET_HISTORY_CALLS",e[e.SET_PROFILES=3]="SET_PROFILES",e[e.SET_URLS=4]="SET_URLS",e[e.ERROR=5]="ERROR",e[e.SET_LOADING=6]="SET_LOADING",e[e.SET_SHOW_CREATE_BUTTON=7]="SET_SHOW_CREATE_BUTTON"}(Ge||(Ge={}));var Yt,Zt,Qt=2e9;!function(e){e.BACKGROUND="calls_background",e.BLUR="calls_blur",e.NONE="calls_none",e.ADD="calls_add"}(Yt||(Yt={})),function(e){e.IS_VIDEO_MIRRORED="calls_is_video_mirrored"}(Zt||(Zt={}));var Jt={VIRTUAL_BACKGROUND_EFFECT:"calls_virtual_background_effect",VIDEO_OPTIONS:"calls_video_options"}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(0),a=n(374),i=/\b(?=[A-Z])/g,o={},c={};function s(e){var t=a.a.noConflict,n=t?o:c;if(n[e])return n[e];var r=e.replace(i,"vkui"),s=t||e===r?r:r+" "+e;return n[e]=s,s}function u(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&"vkuiClass"!==n&&(t[n]=e[n]);if(e.vkuiClass){var r=e.className,a=function(e){var t="";if("string"==typeof e)t=s(e);else for(var n=0;n<e.length;n++)t+=" "+s(e[n]);return t}(e.vkuiClass);t.className=r?r+" "+a:a}return t}function l(e,t){var n=arguments;if(!t||!("vkuiClass"in t))return r.createElement.apply(void 0,n);var a=n.length,i=new Array(a);i[0]=n[0],i[1]=u(t);for(var o=2;o<a;o++)i[o]=n[o];return r.createElement.apply(null,i)}l.Fragment=r.Fragment;var d=l},function(e,t,n){"use strict";n.d(t,"j",(function(){return b})),n.d(t,"i",(function(){return _})),n.d(t,"p",(function(){return y})),n.d(t,"o",(function(){return S})),n.d(t,"l",(function(){return A})),n.d(t,"k",(function(){return j})),n.d(t,"n",(function(){return T})),n.d(t,"m",(function(){return I})),n.d(t,"e",(function(){return P})),n.d(t,"c",(function(){return D})),n.d(t,"b",(function(){return N})),n.d(t,"g",(function(){return x})),n.d(t,"f",(function(){return R})),n.d(t,"a",(function(){return M})),n.d(t,"h",(function(){return F}));var r,a,i=n(21),o=n.n(i),c=n(2),s=n.n(c),u=n(643),l=n(104),d=n(26),f=n.n(d),p=n(294),h=n(13);function m(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var b=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({DOWNLOAD_MOBILE_APP:"m-app",DASHBOARD:"dashboard",SCHOOL:"school",SCHOOL_DOCS:"school.docs",SCHOOL_VIDEOS:"school.videos",SCHOOL_ARTICLES:"school.articles",SCHOOL_ARTICLES_EDITOR:"school.articles.editor",SCHOOL_MEMBERS:"school.members",SCHOOL_CLASSES:"school.grades",SCHOOL_GRADE_INFO:"school.grades.grade",SCHOOL_GRADE_TEACHERS:"school.grades.teachers",SCHOOL_GRADE_CHATS:"school.grades.chats",SCHOOL_CHATS:"school.chats",SCHOOL_EDIT:"school.edit",SCHOOL_MANAGE_MENU:"school.manage_menu",SCHOOL_LEADERS:"school.leaders",SCHOOL_REQUESTS:"school.requests",SCHOOL_INVITE_LINKS:"school.invite-links",SCHOOL_INVITE_LINK_CREATE:"school.invite-links.create-panel",SCHOOL_MESSAGES:"school.messages",SCHOOL_EMPTY:"school-empty",ARTICLE:"article",MESSAGES:"messages",SERVICES:"services",DOCUMENTS:"documents",PROFILE:"profile",PROFILE_CONTACTS:"profile.contacts",SETTINGS:"settings",START:"start",BLACK_LIST:"black_list",SUPPORT:"support",BLANK:"blank",DOWNLOAD_APP:"download_app",JOIN_CALL_PAGE:"join_call_page",OAUTH:"oauth",BLOCKED_REQUESTS:"blocked-requests"},p.b),_={INTRO_ONBOARDING:"intro_onboaring",GRADES_MANAGEMENT_ONBOARDING:"grades_management_onboaring",SCHOOL_EXTENDED_INFO:"school.info",SELECT_COUNTRY:"select-country",SELECT_CITY:"select-city",EDIT_MEMBER:"edit_member",SELECT_CLASSES:"select_classses",CREATE_GRADE:"school.grades.create_grade",SELECT_PARTICIPANTS:"select_participants",SELECT_SCHOOL:"select-school",REGISTRATION_PROFILE:"registration_profile",REGISTRATION_ROLE:"registration_role",REGISTRATION_PROFILE_CREATED:"registration_profile_created",REGISTRATION_ORGANIZATION:"registration_organization",REGISTRATION_ORGANIZATION_SELECT:"registration_organization_select",REGISTRATION_ORGANIZATION_JOIN:"registration_organization_join",REGISTRATION_ORGANIZATION_ROLE:"registration_organization_role",REGISTRATION_ORGANIZATION_ABSENT:"registration_organization_absent",REGISTRATION_ORGANIZATION_INVITE:"registration_organization_invite",REGISTRATION_INVITE_REQUEST_SUCCESS:"registration_invite_request_success",REGISTRATION_ADMIN:"registration_admin",CHAT_ACCESS_RESTRICTED:"chat_access_restricted",DOCUMENT_EDIT:"document_edit",DOCUMENT_UPLOAD:"document_upload",VIDEO_EDIT:"video_edit",VIDEO_UPLOAD:"video_upload",PROFILE_COMPACT:"profile_compact",PROFILE_ADD_SCHOOL:"profile_add_school",MESSAGES_EXTERNAL:"messages_external",CREATE_CHAT:"create-chat",CHAT_CREATE_PRIVATE_STEP_1:"chat-create-private-step-1",CHAT_CREATE_PRIVATE_STEP_2:"chat-create-private-step-2",SELECT_CHAT_MEMEBERS:"select-chat-members",CHAT_ADD_MEMEBERS:"chat-add-members",CHAT_INFO:"chat-info",CHAT_INFO_LINK:"chat-info-lnk",EDIT_CHAT_INFO:"edit-chat-info",CHAT_ATTACHMENTS:"chat-attachments",USER_SCHEDULE:"user-schedule",CONVERSATION:"conversation",INVITE_LINK_CREATE:"school.invite-links.create-modal",QR_CODE_PREVIEW:"qr-code-preview",SEARCH_FILTERS:"search-filters",CALL_INSTRUCTIONS:"call-instructions",GRADES_SEARCH_FILTERS:"grades-search-filters",GRADUATION_CLASSES:"graduation-classes",GRADES_TRANSFER:"GRADES_TRANSFER",CREATE_CALL:"create-call",CREATE_CALL_MODAL:"create-call-modal",CALLS_LIST_MODAL:"calls-list",PRIVACY:"privacy",TERMS:"terms",SUPPORT:"support",JOIN_CALL:"join_call",JOIN_MESSAGE_CALL:"join_message_call",MOBILE_JOIN_CALL:"mobile_join_call",DOWNLOAD_APP_MODAL:"download_app_modal",DOWNLOAD_APP_SELECT_MODAL:"download_app_select_modal",WRONG_INVITE:"wrong_invite",CALL_JOIN:"join-call",CREATE_BROADCAST:"create_broadcast",SELECT_BROADCAST_SPEAKERS:"select_broadcast_speakers",SELECT_BROADCAST_LISTENERS:"select_broadcast_listeners",BROADCAST_PREVIEW:"broadcast_preview",SEARCH_CHANNEL_MEMBERS:"search_channel_members",CHOOSE_EJD:"choose-ejd",CHOOSE_SCHOOLS_TO_CONNECT:"choose-schools-to-connect",WE_ARE_WORKING:"we-are-working",CONNECTION_ERROR:"connection-error",CREATE_EVENT_FROM_SCHEDULE:"create_event_schedule",CREATE_EVENT_FROM_CALLS:"create_event_from_calls",EDIT_EVENT:"edit_event",EVENT_INFO:"event_info",ADD_EVENT_PARTICIPANTS:"add_event_participants",ADD_EVENT_RECURRENCE:"add_event_recurrence",OTHER_PLATFORMS:"other_platforms",SELECT_MEMBERS:"select_members",MERGE_GRADES:"merge_grades",SELECT_MERGE_TEACHERS:"select_merge_teachers",SELECT_MERGE_MANAGER:"select_merge_manager",GRADE_TEACHERS:"grade_teachers",MARKETING_NPS:"nps"},y={DASHBOARD:"dashboard",MAIN:"main",SCHOOL:"school",SERVICES:"services",MESSAGES:"messages",DOCUMENTS:"documents",PROFILE:"profile"},E=["schoolId","videoId","articleId","documentId","ownerId"];function O(e){var t,n=m(E);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.hasOwnProperty(r)&&Object(h.w)(e[r])&&(e[r]=parseInt(e[r]))}}catch(e){n.e(e)}finally{n.f()}return e}var w,C,S=[{name:b.DOWNLOAD_MOBILE_APP,params:["callPeerId","callJoinLink"],decodeParams:O},{name:b.DASHBOARD,params:["schoolId"],decodeParams:O,analyticsName:"unknown",analyticsEventType:"go"},{name:b.SCHOOL,params:["schoolId","videoId","articleId"],decodeParams:O,analyticsName:"school",analyticsEventType:"go"},{name:b.SCHOOL_MANAGE_MENU,decodeParams:O,analyticsName:"school_manage",analyticsEventType:"go"},{name:b.SCHOOL_DOCS,params:["schoolId"],decodeParams:O,analyticsName:"school_documents",analyticsEventType:"go"},{name:b.SCHOOL_VIDEOS,params:["schoolId","videoId"],decodeParams:O,analyticsName:"video",analyticsEventType:"go"},{name:b.SCHOOL_ARTICLES,decodeParams:O,analyticsName:"articles",analyticsEventType:"go"},{name:b.SCHOOL_ARTICLES_EDITOR,params:["edit"],decodeParams:O,analyticsName:"articles_editor",analyticsEventType:"go"},{name:b.ARTICLE,params:["url"],decodeParams:O,analyticsName:"articles_read",analyticsEventType:"go"},{name:b.SCHOOL_MEMBERS,decodeParams:O,analyticsName:"school_members",analyticsEventType:"go"},{name:b.SCHOOL_CLASSES,params:["schoolId"],decodeParams:O,analyticsName:"school_classes",analyticsEventType:"go"},{name:b.SCHOOL_GRADE_INFO,params:["gradeId"],decodeParams:O,analyticsName:"school_class_view",analyticsEventType:"go"},{name:b.SCHOOL_GRADE_TEACHERS,params:["gradeId"],decodeParams:O,analyticsName:"school_teacher",analyticsEventType:"go"},{name:b.SCHOOL_GRADE_CHATS,analyticsName:"unknown",params:["gradeId","isTeacher"],decodeParams:O},{name:b.SCHOOL_CHATS,params:["schoolId"],decodeParams:O,analyticsName:"school_chats",analyticsEventType:"go"},{name:b.SCHOOL_EDIT,params:["schoolId"],decodeParams:O,analyticsName:"school_info_edit",analyticsEventType:"go"},{name:b.SCHOOL_LEADERS,params:["schoolId"],decodeParams:O,analyticsName:"school_administrator",analyticsEventType:"go"},{name:b.SCHOOL_REQUESTS,params:["schoolId"],decodeParams:O,analyticsName:"join_request",analyticsEventType:"go"},{name:b.SCHOOL_INVITE_LINKS,params:["schoolId"],decodeParams:O,analyticsName:"invite_links",analyticsEventType:"go"},{name:b.SCHOOL_INVITE_LINK_CREATE,params:["schoolId"],decodeParams:O,analyticsName:"invite_links_create",analyticsEventType:"go"},{name:b.SCHOOL_MESSAGES,params:["schoolId"],decodeParams:O,analyticsName:"school_messages",analyticsEventType:"go"},{name:b.MESSAGES,analyticsName:"messages",analyticsEventType:"go"},{name:b.SCHOOL_EMPTY,analyticsName:"school",analyticsEventType:"go"},{name:b.SERVICES,analyticsName:"services",analyticsEventType:"go"},{name:b.DOCUMENTS,analyticsName:"documents",analyticsEventType:"go"},{name:b.PROFILE,analyticsName:"profile",analyticsEventType:"go"},{name:b.PROFILE_CONTACTS,analyticsName:"profile_contacts",analyticsEventType:"go"},{name:b.SETTINGS,analyticsName:"setting",analyticsEventType:"go"},{name:b.START,analyticsName:"main",analyticsEventType:"go"},{name:b.BLACK_LIST,analyticsName:"black_list",analyticsEventType:"go"},{name:b.JOIN_CALL_PAGE,analyticsName:"unknown",params:["callId"]},{name:b.OAUTH,analyticsName:"unknown"},{name:b.DOWNLOAD_APP,analyticsName:"unknown"},{name:_.INTRO_ONBOARDING,modal:!0,analyticsName:"unknown",analyticsEventType:"show"},{name:_.GRADES_MANAGEMENT_ONBOARDING,modal:!0,analyticsName:"unknown",analyticsEventType:"show"},{name:_.SCHOOL_EXTENDED_INFO,modal:!0,analyticsName:"school_extended_info",analyticsEventType:"show"},{name:_.SELECT_COUNTRY,modal:!0,updateUrl:!1,analyticsName:"select_country",analyticsEventType:"show"},{name:_.SELECT_CITY,modal:!0,updateUrl:!1,analyticsName:"select_city",analyticsEventType:"show"},{name:_.EDIT_MEMBER,updateUrl:!1,modal:!0,analyticsName:"edit_member_role",analyticsEventType:"show"},{name:_.SELECT_SCHOOL,updateUrl:!1,modal:!0,analyticsName:"select_school",analyticsEventType:"show"},{name:_.SELECT_CLASSES,updateUrl:!1,modal:!0,analyticsName:"select_classes",analyticsEventType:"show"},{name:_.DOCUMENT_EDIT,updateUrl:!1,modal:!0,analyticsName:"document_edit",analyticsEventType:"show"},{name:_.DOCUMENT_UPLOAD,modal:!0,analyticsName:"document_upload",analyticsEventType:"show"},{name:_.VIDEO_EDIT,params:["type"],updateUrl:!1,modal:!0,analyticsName:"video_edit",analyticsEventType:"show"},{name:_.VIDEO_UPLOAD,updateUrl:!1,modal:!0,analyticsName:"video_add",analyticsEventType:"show"},{name:_.REGISTRATION_PROFILE,modal:!0,analyticsName:"join_step1",analyticsEventType:"show"},{name:_.REGISTRATION_INVITE_REQUEST_SUCCESS,modal:!0,analyticsName:"join_step1",analyticsEventType:"show"},{name:_.REGISTRATION_ORGANIZATION,modal:!0,analyticsName:"join_step1",analyticsEventType:"show"},{name:_.REGISTRATION_ORGANIZATION_SELECT,modal:!0,analyticsName:"join_step1",analyticsEventType:"show"},{name:_.REGISTRATION_ORGANIZATION_ABSENT,modal:!0,analyticsName:"join_step1",analyticsEventType:"show"},{name:_.REGISTRATION_ORGANIZATION_INVITE,modal:!0,analyticsName:"join_step1",analyticsEventType:"show"},{name:_.REGISTRATION_ORGANIZATION_ROLE,modal:!0,analyticsName:"join_step1",analyticsEventType:"show"},{name:_.REGISTRATION_ORGANIZATION_JOIN,modal:!0,analyticsName:"join_step1",analyticsEventType:"show"},{name:_.REGISTRATION_PROFILE_CREATED,modal:!0,analyticsName:"join_step1",analyticsEventType:"show"},{name:_.REGISTRATION_ADMIN,modal:!0,analyticsName:"join_admin",analyticsEventType:"show"},{name:_.CHAT_ACCESS_RESTRICTED,modal:!0,analyticsName:"chat_access_restricted",analyticsEventType:"show"},{name:_.CALL_INSTRUCTIONS,modal:!0,analyticsName:"unknown",analyticsEventType:"show"},{name:_.CREATE_CALL,path:"/create-call",modal:!0,analyticsName:"unknown",analyticsEventType:"show"},{name:_.CREATE_CALL_MODAL,updateUrl:!1,modal:!0,analyticsName:"unknown",analyticsEventType:"show"},{name:_.CALLS_LIST_MODAL,modal:!0,updateUrl:!1,analyticsName:"unknown",analyticsEventType:"show"},{name:_.PROFILE_COMPACT,params:["userId"],modal:!0,analyticsName:"show_profile_compact",analyticsEventType:"show"},{name:_.CREATE_GRADE,params:["gradeId"],updateUrl:!1,modal:!0,analyticsName:"school_class_create",analyticsEventType:"show"},{name:_.SELECT_PARTICIPANTS,updateUrl:!1,params:["gradeId"],modal:!0,analyticsName:"school_class_select_participants",analyticsEventType:"show"},{name:_.PROFILE_ADD_SCHOOL,modal:!0,analyticsName:"profile_add_school",analyticsEventType:"show"},{name:_.MESSAGES_EXTERNAL,updateUrl:!1,modal:!0,analyticsName:"messages_action",analyticsEventType:"show"},{name:_.CREATE_CHAT,updateUrl:!1,modal:!0,analyticsName:"create_chat",analyticsEventType:"show"},{name:_.CHAT_CREATE_PRIVATE_STEP_1,modal:!0,updateUrl:!1,analyticsName:"create_chat",analyticsEventType:"show"},{name:_.CHAT_CREATE_PRIVATE_STEP_2,modal:!0,updateUrl:!1,analyticsName:"create_chat",analyticsEventType:"show"},{name:_.SELECT_CHAT_MEMEBERS,updateUrl:!1,modal:!0,analyticsName:"select_chat_members",analyticsEventType:"show"},{name:_.CHAT_ADD_MEMEBERS,modal:!0,updateUrl:!1,analyticsName:"unknown",analyticsEventType:"show"},{name:_.CHAT_INFO,updateUrl:!1,modal:!0,analyticsName:"chat_info",analyticsEventType:"show"},{name:_.CHAT_INFO_LINK,updateUrl:!1,modal:!0,analyticsName:"unknown",analyticsEventType:"show"},{name:_.EDIT_CHAT_INFO,updateUrl:!1,modal:!0,analyticsName:"edit_chat_info",analyticsEventType:"show"},{name:_.CHAT_ATTACHMENTS,updateUrl:!1,modal:!0,analyticsName:"chat_attachments",analyticsEventType:"show"},{name:_.USER_SCHEDULE,modal:!0,analyticsName:"profile_user_schedule",analyticsEventType:"show"},{name:_.SEARCH_FILTERS,modal:!0,analyticsName:"search_filters",analyticsEventType:"show"},{name:_.GRADES_SEARCH_FILTERS,modal:!0,analyticsName:"search_filters",analyticsEventType:"show"},{name:_.GRADUATION_CLASSES,modal:!0,updateUrl:!1,analyticsName:"unknown",analyticsEventType:"show"},{name:_.GRADES_TRANSFER,modal:!0,updateUrl:!1,analyticsName:"unknown",analyticsEventType:"show"},{name:_.CONVERSATION,updateUrl:!1,modal:!0,analyticsName:"messages_conversation_preview",analyticsEventType:"show"},{name:_.INVITE_LINK_CREATE,updateUrl:!1,modal:!0,analyticsName:"invite_links_create",analyticsEventType:"show"},{name:_.QR_CODE_PREVIEW,updateUrl:!1,params:["schoolId"],modal:!0,analyticsName:"qr_code_preview",analyticsEventType:"show"},{name:_.PRIVACY,modal:!0,analyticsName:"privacy",analyticsEventType:"show"},{name:_.TERMS,modal:!0,analyticsName:"terms",analyticsEventType:"show"},{name:_.SUPPORT,analyticsName:"unknown",modal:!0},{name:_.WRONG_INVITE,modal:!0,analyticsName:"unknown",updateUrl:!1,analyticsEventType:"show"},{name:_.JOIN_CALL,modal:!0,updateUrl:!1,params:["joinLink","peerId"],analyticsName:"unknown",analyticsEventType:"show"},{name:_.JOIN_MESSAGE_CALL,modal:!0,updateUrl:!1,params:["joinLink","peerId"],analyticsName:"unknown",analyticsEventType:"show"},{name:_.MOBILE_JOIN_CALL,modal:!0,updateUrl:!1,params:["joinLink","peerId"],analyticsName:"unknown",analyticsEventType:"show"},{name:_.DOWNLOAD_APP_MODAL,analyticsName:"unknown",modal:!0,updateUrl:!1,params:["pladformType"]},{name:_.DOWNLOAD_APP_SELECT_MODAL,analyticsName:"unknown",modal:!0,updateUrl:!1},{name:_.CALL_JOIN,analyticsName:"unknown",modal:!0,params:["callId"]},{name:_.CHOOSE_EJD,analyticsName:"unknown",modal:!0},{name:_.CHOOSE_SCHOOLS_TO_CONNECT,analyticsName:"unknown",modal:!0},{name:_.WE_ARE_WORKING,analyticsName:"unknown",modal:!0},{name:_.CONNECTION_ERROR,analyticsName:"unknown",modal:!0},{name:_.BROADCAST_PREVIEW,analyticsName:"unknown",modal:!0,updateUrl:!1},{name:_.CREATE_BROADCAST,analyticsName:"unknown",modal:!0,updateUrl:!1},{name:_.SELECT_BROADCAST_SPEAKERS,analyticsName:"unknown",modal:!0,updateUrl:!1},{name:_.SELECT_BROADCAST_LISTENERS,analyticsName:"unknown",modal:!0,updateUrl:!1},{name:_.SEARCH_CHANNEL_MEMBERS,updateUrl:!1,modal:!0,analyticsName:"unknown",analyticsEventType:"show"},{name:_.CREATE_EVENT_FROM_SCHEDULE,modal:!0,updateUrl:!1,params:["schoolId"]},{name:_.CREATE_EVENT_FROM_CALLS,modal:!0,updateUrl:!1,params:["schoolId"]},{name:_.EVENT_INFO,modal:!0,updateUrl:!1,params:["schoolId","eventId","calendarId"]},{name:_.ADD_EVENT_PARTICIPANTS,modal:!0,updateUrl:!1,params:["schoolId"]},{name:_.ADD_EVENT_RECURRENCE,modal:!0,updateUrl:!1},{name:_.EDIT_EVENT,modal:!0,updateUrl:!1,params:["eventId"]},{name:_.OTHER_PLATFORMS,updateUrl:!1,modal:!0,analyticsName:"unknown",analyticsEventType:"show"},{name:_.SELECT_MEMBERS,updateUrl:!1,modal:!0,analyticsName:"unknown",analyticsEventType:"show"},{name:_.MERGE_GRADES,modal:!0,updateUrl:!1,analyticsName:"unknown",analyticsEventType:"show"},{name:_.SELECT_MERGE_TEACHERS,modal:!0,updateUrl:!1,analyticsName:"unknown",analyticsEventType:"show"},{name:_.SELECT_MERGE_MANAGER,modal:!0,updateUrl:!1,analyticsName:"unknown",analyticsEventType:"show"},{name:_.GRADE_TEACHERS,modal:!0,updateUrl:!1,analyticsName:"unknown",analyticsEventType:"show"},{name:_.MARKETING_NPS,modal:!0,updateUrl:!1,analyticsName:"unknown",analyticsEventType:"show"}].concat(o()(Object.values(p.b).map((function(e){return{name:e}})))),A=(r={},s()(r,y.DASHBOARD,[b.DASHBOARD,b.OAUTH]),s()(r,y.MAIN,[b.CALLS_DESKTOP_APP_AUTH,b.CALLS_DESKTOP_APP_MAIN,b.JOIN_CALL_PAGE,b.DOWNLOAD_APP,b.DOWNLOAD_MOBILE_APP,b.START,b.BLANK]),s()(r,y.SCHOOL,[b.SCHOOL,b.SCHOOL_MANAGE_MENU,b.SCHOOL_DOCS,b.SCHOOL_VIDEOS,b.SCHOOL_ARTICLES,b.SCHOOL_ARTICLES_EDITOR,b.ARTICLE,b.SCHOOL_MEMBERS,b.SCHOOL_CLASSES,b.SCHOOL_GRADE_INFO,b.SCHOOL_GRADE_TEACHERS,b.SCHOOL_GRADE_CHATS,b.SCHOOL_CHATS,b.SCHOOL_EDIT,b.SCHOOL_LEADERS,b.SCHOOL_REQUESTS,b.SCHOOL_INVITE_LINKS,b.SCHOOL_INVITE_LINK_CREATE,b.SCHOOL_MESSAGES,b.SCHOOL_EMPTY]),s()(r,y.SERVICES,[b.SERVICES]),s()(r,y.MESSAGES,[b.MESSAGES]),s()(r,y.DOCUMENTS,[b.DOCUMENTS]),s()(r,y.PROFILE,[b.PROFILE,b.PROFILE_CONTACTS,b.SETTINGS,b.BLACK_LIST]),r),k=(a={},s()(a,b.DOWNLOAD_MOBILE_APP,[b.DOWNLOAD_MOBILE_APP]),s()(a,b.DASHBOARD,[b.DASHBOARD]),s()(a,b.SCHOOL,[b.SCHOOL]),s()(a,b.SCHOOL_MANAGE_MENU,[b.SCHOOL_MANAGE_MENU]),s()(a,b.SCHOOL_DOCS,[b.SCHOOL_DOCS]),s()(a,b.SCHOOL_VIDEOS,[b.SCHOOL_VIDEOS]),s()(a,b.SCHOOL_ARTICLES,[b.SCHOOL_ARTICLES]),s()(a,b.SCHOOL_ARTICLES_EDITOR,[b.SCHOOL_ARTICLES_EDITOR]),s()(a,b.ARTICLE,[b.ARTICLE]),s()(a,b.SCHOOL_MEMBERS,[b.SCHOOL_MEMBERS]),s()(a,b.SCHOOL_CLASSES,[b.SCHOOL_CLASSES]),s()(a,b.SCHOOL_GRADE_INFO,[b.SCHOOL_GRADE_INFO]),s()(a,b.SCHOOL_GRADE_TEACHERS,[b.SCHOOL_GRADE_TEACHERS]),s()(a,b.SCHOOL_GRADE_CHATS,[b.SCHOOL_GRADE_CHATS]),s()(a,b.SCHOOL_CHATS,[b.SCHOOL_CHATS]),s()(a,b.SCHOOL_EDIT,[b.SCHOOL_EDIT]),s()(a,b.SCHOOL_LEADERS,[b.SCHOOL_LEADERS]),s()(a,b.SCHOOL_REQUESTS,[b.SCHOOL_REQUESTS]),s()(a,b.SCHOOL_INVITE_LINKS,[b.SCHOOL_INVITE_LINKS]),s()(a,b.SCHOOL_INVITE_LINK_CREATE,[b.SCHOOL_INVITE_LINK_CREATE]),s()(a,b.SCHOOL_MESSAGES,[b.SCHOOL_MESSAGES]),s()(a,b.SCHOOL_EMPTY,[b.SCHOOL_EMPTY]),s()(a,b.MESSAGES,[b.MESSAGES]),s()(a,b.SERVICES,[b.SERVICES]),s()(a,b.DOCUMENTS,[b.DOCUMENTS]),s()(a,b.PROFILE,[b.PROFILE]),s()(a,b.PROFILE_CONTACTS,[b.PROFILE_CONTACTS]),s()(a,b.SETTINGS,[b.SETTINGS]),s()(a,b.START,[b.START]),s()(a,b.JOIN_CALL_PAGE,[b.JOIN_CALL_PAGE]),s()(a,b.BLACK_LIST,[b.BLACK_LIST]),s()(a,b.DOWNLOAD_APP,[b.DOWNLOAD_APP]),s()(a,b.BLANK,[b.BLANK]),s()(a,b.CALLS_DESKTOP_APP_MAIN,[b.CALLS_DESKTOP_APP_MAIN]),s()(a,b.CALLS_DESKTOP_APP_AUTH,[b.CALLS_DESKTOP_APP_AUTH]),s()(a,b.JOIN_CALL_PAGE,[b.JOIN_CALL_PAGE]),s()(a,b.OAUTH,[b.OAUTH]),a),j=[b.START,_.REGISTRATION_PROFILE,_.REGISTRATION_PROFILE_CREATED,_.REGISTRATION_ADMIN],T=j.concat([_.SELECT_COUNTRY,_.SELECT_CITY,_.SELECT_SCHOOL,_.SELECT_CLASSES]),I=[b.START,b.JOIN_CALL_PAGE,b.DOWNLOAD_APP,b.DOWNLOAD_MOBILE_APP,b.BLANK],P=s()({},_.PROFILE_COMPACT,b.MESSAGES),D=[_.REGISTRATION_PROFILE,_.REGISTRATION_ORGANIZATION,_.REGISTRATION_ORGANIZATION_ROLE,_.REGISTRATION_ORGANIZATION_INVITE,_.REGISTRATION_ORGANIZATION_JOIN],N=[_.REGISTRATION_PROFILE,_.REGISTRATION_ORGANIZATION,_.REGISTRATION_ORGANIZATION_ROLE,_.REGISTRATION_ORGANIZATION_INVITE,_.REGISTRATION_ORGANIZATION_JOIN,_.REGISTRATION_PROFILE_CREATED,_.REGISTRATION_ORGANIZATION_SELECT,_.REGISTRATION_ORGANIZATION_ABSENT,_.REGISTRATION_INVITE_REQUEST_SUCCESS,_.SELECT_CITY,_.SELECT_CLASSES,_.SELECT_COUNTRY,_.SELECT_SCHOOL,_.WRONG_INVITE],x=function(e){return Object.keys(A).find((function(t){return A[t].includes(e)}))},R=function(e){return Object.keys(k).find((function(t){return k[t].includes(e)}))},M=b.DASHBOARD,L=(w=l.b.parse(window.location.href),(C=null==w?void 0:w.only_page)?[C,{only_page:C}]:[M,{}]),B=function(e){var t=e.getState();return 0===e.history.length&&e.history.push(t),e.closeModal=function(){var t=e.getState(),n=e.getHistory(),r=n.pop();if(r.hasOwnProperty("modal"))for(;!r.modal;)r=n.pop();e.history=n,t.modal=null;var a=o()(n).reverse().find((function(e){return null===e.modal}));t.params=null==a?void 0:a.params,e.go(t.page,t.params,{replace:!0}),e.updateUrl(t,{replace:!0})},e}(Object(u.createNavigator)(S,{fillStack:!1,defaultRoute:L[0],defaultParams:L[1],rootPage:L[0],subRouteKey:"modal"}));function F(e){var t,n=x(e.page),r=S.find((function(t){return t.name===e.page}));return{isModal:null!==(t=null==r?void 0:r.modal)&&void 0!==t&&t,isIntermediate:!1,name:e.page,view:n}}B.subscribe((function(e){var t=e.toState.params;if(null!=t&&t.schoolId&&f.a.isWebView()){var n={action:"SchoolChange",payload:{id:parseInt(t.schoolId)}};f.a.send("VKWebAppCustomMessage",n)}})),t.d=B},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,n.apply(this,arguments)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(554),a=n(875),i=n(309),o=n(555);e.exports=function(e,t){return r(e)||a(e,t)||i(e,t)||o()},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"Api",(function(){return _a})),n.d(t,"BaseApi",(function(){return $e})),n.d(t,"BaseLogger",(function(){return et})),n.d(t,"BaseSignaling",(function(){return nt})),n.d(t,"CallDirection",(function(){return at})),n.d(t,"CallType",(function(){return ct})),n.d(t,"ChatRoomEventType",(function(){return ut})),n.d(t,"ConversationOption",(function(){return ht})),n.d(t,"DebugMessageType",(function(){return mn})),n.d(t,"ExternalIdType",(function(){return sr})),n.d(t,"HangupReason",(function(){return ar})),n.d(t,"HangupType",(function(){return _t})),n.d(t,"MediaOption",(function(){return Et})),n.d(t,"MediaType",(function(){return lr})),n.d(t,"ParticipantState",(function(){return At})),n.d(t,"ParticipantStatus",(function(){return an})),n.d(t,"Signaling",(function(){return wa})),n.d(t,"SignalingCommandType",(function(){return ya})),n.d(t,"SignalingConnectionType",(function(){return jt})),n.d(t,"SignalingNotification",(function(){return xt})),n.d(t,"UserRole",(function(){return zt})),n.d(t,"UserType",(function(){return Wt})),n.d(t,"Utils",(function(){return dr})),n.d(t,"acceptCall",(function(){return Ha})),n.d(t,"addMovie",(function(){return Ii})),n.d(t,"addParticipant",(function(){return qa})),n.d(t,"addParticipantInternal",(function(){return Ka})),n.d(t,"apiCall",(function(){return Ba})),n.d(t,"authorize",(function(){return Fa})),n.d(t,"browser",(function(){return ka})),n.d(t,"callInternal",(function(){return xa})),n.d(t,"callTo",(function(){return Na})),n.d(t,"captureScreen",(function(){return Ja})),n.d(t,"changeConversationOptions",(function(){return hi})),n.d(t,"changeDevice",(function(){return Qa})),n.d(t,"changeParticipantState",(function(){return ri})),n.d(t,"changePriorities",(function(){return ni})),n.d(t,"changeVideoEffect",(function(){return Mi})),n.d(t,"chatHistory",(function(){return gi})),n.d(t,"chatMessage",(function(){return mi})),n.d(t,"chatMessageInternal",(function(){return vi})),n.d(t,"createJoinLink",(function(){return Ei})),n.d(t,"customData",(function(){return bi})),n.d(t,"customDataInternal",(function(){return _i})),n.d(t,"debug",(function(){return xi})),n.d(t,"debugMessage",(function(){return Ri})),n.d(t,"declineCall",(function(){return Va})),n.d(t,"forceRelayPolicy",(function(){return Si})),n.d(t,"getAnonymTokenByLink",(function(){return wi})),n.d(t,"getStreamInfo",(function(){return Ti})),n.d(t,"getTokenForAnonym",(function(){return La})),n.d(t,"getWaitingHall",(function(){return Bi})),n.d(t,"grantRoles",(function(){return ii})),n.d(t,"grantRolesInternal",(function(){return oi})),n.d(t,"hangup",(function(){return Wa})),n.d(t,"init",(function(){return Da})),n.d(t,"joinCall",(function(){return Ua})),n.d(t,"joinCallByLink",(function(){return Ga})),n.d(t,"joinCallInternal",(function(){return za})),n.d(t,"muteParticipant",(function(){return ci})),n.d(t,"muteParticipantInternal",(function(){return si})),n.d(t,"pinParticipant",(function(){return di})),n.d(t,"pinParticipantInternal",(function(){return fi})),n.d(t,"processPush",(function(){return Ra})),n.d(t,"processPushInternal",(function(){return Ma})),n.d(t,"promoteParticipant",(function(){return Fi})),n.d(t,"recordSetRole",(function(){return ji})),n.d(t,"removeHistoryRecords",(function(){return Hi})),n.d(t,"removeJoinLink",(function(){return Oi})),n.d(t,"removeMovie",(function(){return Di})),n.d(t,"removeParticipant",(function(){return Ya})),n.d(t,"removeParticipantInternal",(function(){return Za})),n.d(t,"setApi",(function(){return ja})),n.d(t,"setAudioStream",(function(){return Li})),n.d(t,"setLocalResolution",(function(){return ti})),n.d(t,"setLogger",(function(){return Ia})),n.d(t,"setMediaModifiers",(function(){return pi})),n.d(t,"setSignalingFactory",(function(){return Ta})),n.d(t,"setStatisticsInterval",(function(){return Ni})),n.d(t,"setVideoEffects",(function(){return Pa})),n.d(t,"setVideoStream",(function(){return Xa})),n.d(t,"setVolume",(function(){return Ci})),n.d(t,"startConversation",(function(){return yi})),n.d(t,"startStream",(function(){return Ai})),n.d(t,"stopStream",(function(){return ki})),n.d(t,"toggleLocalAudio",(function(){return ei})),n.d(t,"toggleLocalVideo",(function(){return $a})),n.d(t,"unmuteRequest",(function(){return ui})),n.d(t,"unmuteRequestInternal",(function(){return li})),n.d(t,"updateDisplayLayout",(function(){return ai})),n.d(t,"updateMovie",(function(){return Pi}));var r={};n.r(r),n.d(r,"shimGetUserMedia",(function(){return E})),n.d(r,"shimGetDisplayMedia",(function(){return O})),n.d(r,"shimMediaStream",(function(){return w})),n.d(r,"shimOnTrack",(function(){return C})),n.d(r,"shimGetSendersWithDtmf",(function(){return S})),n.d(r,"shimGetStats",(function(){return A})),n.d(r,"shimSenderReceiverGetStats",(function(){return k})),n.d(r,"shimAddTrackRemoveTrackWithNative",(function(){return j})),n.d(r,"shimAddTrackRemoveTrack",(function(){return T})),n.d(r,"shimPeerConnection",(function(){return I})),n.d(r,"fixNegotiationNeeded",(function(){return P}));var a={};n.r(a),n.d(a,"shimGetUserMedia",(function(){return x})),n.d(a,"shimGetDisplayMedia",(function(){return R})),n.d(a,"shimPeerConnection",(function(){return M})),n.d(a,"shimReplaceTrack",(function(){return L}));var i={};n.r(i),n.d(i,"shimGetUserMedia",(function(){return B})),n.d(i,"shimGetDisplayMedia",(function(){return F})),n.d(i,"shimOnTrack",(function(){return H})),n.d(i,"shimPeerConnection",(function(){return V})),n.d(i,"shimSenderGetStats",(function(){return U})),n.d(i,"shimReceiverGetStats",(function(){return z})),n.d(i,"shimRemoveStream",(function(){return G})),n.d(i,"shimRTCDataChannel",(function(){return W})),n.d(i,"shimAddTransceiver",(function(){return q})),n.d(i,"shimGetParameters",(function(){return K})),n.d(i,"shimCreateOffer",(function(){return Y})),n.d(i,"shimCreateAnswer",(function(){return Z}));var o={};n.r(o),n.d(o,"shimLocalStreamsAPI",(function(){return Q})),n.d(o,"shimRemoteStreamsAPI",(function(){return J})),n.d(o,"shimCallbacksAPI",(function(){return X})),n.d(o,"shimGetUserMedia",(function(){return $})),n.d(o,"shimConstraints",(function(){return ee})),n.d(o,"shimRTCIceServerUrls",(function(){return te})),n.d(o,"shimTrackEventTransceiver",(function(){return ne})),n.d(o,"shimCreateOfferLegacy",(function(){return re})),n.d(o,"shimAudioContext",(function(){return ae}));var c={};n.r(c),n.d(c,"shimRTCIceCandidate",(function(){return ce})),n.d(c,"shimMaxMessageSize",(function(){return se})),n.d(c,"shimSendThrowTypeError",(function(){return ue})),n.d(c,"shimConnectionState",(function(){return le})),n.d(c,"removeAllowExtmapMixed",(function(){return de}));let s=!0,u=!0;function l(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function d(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,a=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return a.apply(this,arguments);const i=e=>{const t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,i),a.apply(this,[e,i])};const i=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return i.apply(this,arguments);if(!this._eventMap[t].has(n))return i.apply(this,arguments);const r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,i.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function f(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(s=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function p(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(u=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function h(){if("object"==typeof window){if(s)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function m(e,t){u&&console.warn(e+" is deprecated, please use "+t+" instead.")}function v(e){const t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=l(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=l(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=l(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=l(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}function g(e){return"[object Object]"===Object.prototype.toString.call(e)}function b(e){return g(e)?Object.keys(e).reduce((function(t,n){const r=g(e[n]),a=r?b(e[n]):e[n],i=r&&!Object.keys(a).length;return void 0===a||i?t:Object.assign(t,{[n]:a})}),{}):e}function _(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",a=new Map;if(null===t)return a;const i=[];return e.forEach(e=>{"track"===e.type&&e.trackIdentifier===t.id&&i.push(e)}),i.forEach(t=>{e.forEach(n=>{n.type===r&&n.trackId===t.id&&function e(t,n,r){n&&!r.has(n.id)&&(r.set(n.id,n),Object.keys(n).forEach(a=>{a.endsWith("Id")?e(t,t.get(n[a]),r):a.endsWith("Ids")&&n[a].forEach(n=>{e(t,t.get(n),r)})}))}(e,n,a)})}),a}const y=h;function E(e){const t=e&&e.navigator;if(!t.mediaDevices)return;const n=v(e),r=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach(n=>{if("require"===n||"advanced"===n||"mediaSource"===n)return;const r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);const a=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];let e={};"number"==typeof r.ideal?(e[a("min",n)]=r.ideal,t.optional.push(e),e={},e[a("max",n)]=r.ideal,t.optional.push(e)):(e[a("",n)]=r.ideal,t.optional.push(e))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[a("",n)]=r.exact):["min","max"].forEach(e=>{void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[a(e,n)]=r[e])})}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},a=function(e,a){if(n.version>=61)return a(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"==typeof e.video){let i=e.video.facingMode;i=i&&("object"==typeof i?i:{ideal:i});const o=n.version<66;if(i&&("user"===i.exact||"environment"===i.exact||"user"===i.ideal||"environment"===i.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||o)){let n;if(delete e.video.facingMode,"environment"===i.exact||"environment"===i.ideal?n=["back","rear"]:"user"!==i.exact&&"user"!==i.ideal||(n=["front"]),n)return t.mediaDevices.enumerateDevices().then(t=>{let o=(t=t.filter(e=>"videoinput"===e.kind)).find(e=>n.some(t=>e.label.toLowerCase().includes(t)));return!o&&t.length&&n.includes("back")&&(o=t[t.length-1]),o&&(e.video.deviceId=i.exact?{exact:o.deviceId}:{ideal:o.deviceId}),e.video=r(e.video),y("chrome: "+JSON.stringify(e)),a(e)})}e.video=r(e.video)}return y("chrome: "+JSON.stringify(e)),a(e)},i=function(e){return n.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(t.getUserMedia=function(e,n,r){a(e,e=>{t.webkitGetUserMedia(e,n,e=>{r&&r(i(e))})})}.bind(t),t.mediaDevices.getUserMedia){const e=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(t){return a(t,t=>e(t).then(e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(e=>{e.stop()}),new DOMException("","NotFoundError");return e},e=>Promise.reject(i(e))))}}}function O(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then(t=>{const r=n.video&&n.video.width,a=n.video&&n.video.height,i=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:i||3}},r&&(n.video.mandatory.maxWidth=r),a&&(n.video.mandatory.maxHeight=a),e.navigator.mediaDevices.getUserMedia(n)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}function w(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function C(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===n.track.id):{track:n.track};const a=new Event("track");a.track=n.track,a.receiver=r,a.transceiver={receiver:r},a.streams=[t.stream],this.dispatchEvent(a)}),t.stream.getTracks().forEach(n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===n.id):{track:n};const a=new Event("track");a.track=n,a.receiver=r,a.transceiver={receiver:r},a.streams=[t.stream],this.dispatchEvent(a)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else d(e,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function S(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){let a=n.apply(this,arguments);return a||(a=t(this,e),this._senders.push(a)),a};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach(e=>{this._senders.push(t(this,e))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach(e=>{const t=this._senders.find(t=>t.track===e);t&&this._senders.splice(this._senders.indexOf(t),1)})}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function A(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,r]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const a=function(e){const t={};return e.result().forEach(e=>{const n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(t=>{n[t]=e.stat(t)}),t[n.id]=n}),t},i=function(e){return new Map(Object.keys(e).map(t=>[t,e[t]]))};if(arguments.length>=2){const r=function(e){n(i(a(e)))};return t.apply(this,[r,e])}return new Promise((e,n)=>{t.apply(this,[function(t){e(i(a(t)))},n])}).then(n,r)}}function k(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>_(t,e.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),d(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>_(t,e.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,n,r;return this.getSenders().forEach(n=>{n.track===e&&(t?r=!0:t=n)}),this.getReceivers().forEach(t=>(t.track===e&&(n?r=!0:n=t),t.track===e)),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function j(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(e=>this._shimmedLocalStreams[e][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(e=>{if(this.getSenders().find(t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")});const t=this.getSenders();n.apply(this,arguments);const r=this.getSenders().filter(e=>-1===t.indexOf(e));this._shimmedLocalStreams[e.id]=[e].concat(r)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};const a=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(t=>{const n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]}),a.apply(this,arguments)}}function T(e){if(!e.RTCPeerConnection)return;const t=v(e);if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return j(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map(e=>this._reverseStreams[e.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach(e=>{if(this.getSenders().find(t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[t.id]){const n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}r.apply(this,[t])};const a=e.RTCPeerConnection.prototype.removeStream;function i(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{const r=e._reverseStreams[t],a=e._streams[r.id];n=n.replace(new RegExp(a.id,"g"),r.id)}),new RTCSessionDescription({type:t.type,sdp:n})}function o(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{const r=e._reverseStreams[t],a=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),a.id)}),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},a.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find(e=>e===t))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");const a=this.getSenders().find(e=>e.track===t);if(a)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const i=this._streams[n.id];if(i)i.addTrack(t),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const r=new e.MediaStream([t]);this._streams[n.id]=r,this._reverseStreams[r.id]=n,this.addStream(r)}return this.getSenders().find(e=>e.track===t)},["createOffer","createAnswer"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[t=>{const n=i(this,t);e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then(e=>i(this,e))}};e.RTCPeerConnection.prototype[t]=r[t]}));const c=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=o(this,arguments[0]),c.apply(this,arguments)):c.apply(this,arguments)};const s=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=s.get.apply(this);return""===e.type?e:i(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach(n=>{this._streams[n].getTracks().find(t=>e.track===t)&&(t=this._streams[n])}),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function I(e){const t=v(e);if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),!e.RTCPeerConnection)return;const n=0===e.RTCPeerConnection.prototype.addIceCandidate.length;t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}));const r=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return n||arguments[0]?t.version<78&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}function P(e){const t=v(e);d(e,"negotiationneeded",e=>{const n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e})}var D=n(645),N=n.n(D);function x(e){const t=e&&e.navigator,n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return n(e).catch(e=>Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString(){return this.name}}}(e)))}}function R(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function M(e){const t=v(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){const t=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set(e){t.set.call(this,e);const n=new Event("enabled");n.enabled=e,this.dispatchEvent(n)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const n=N()(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=function(e,t){let n=!1;return(e=JSON.parse(JSON.stringify(e))).filter(e=>{if(e&&(e.urls||e.url)){let t=e.urls||e.url;e.url&&!e.urls&&m("RTCIceServer.url","RTCIceServer.urls");const r="string"==typeof t;return r&&(t=[t]),t=t.filter(e=>{if(0===e.indexOf("stun:"))return!1;const t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!n?(n=!0,!0):t&&!n}),delete e.url,e.urls=r?t[0]:t,!!t.length}})}(e.iceServers,t.version),h("ICE servers after filtering:",e.iceServers)),new n(e)},e.RTCPeerConnection.prototype=n.prototype}function L(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}function B(e){const t=v(e),n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){m("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"==typeof n&&"object"==typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},r&&r.prototype.getSettings){const t=r.prototype.getSettings;r.prototype.getSettings=function(){const n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(r&&r.prototype.applyConstraints){const t=r.prototype.applyConstraints;r.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"==typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}function F(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}function H(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function V(e){const t=v(e);if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;if(!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]})),t.version<68){const t=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?arguments[0]&&""===arguments[0].candidate?Promise.resolve():t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,a,i]=arguments;return r.apply(this,[e||null]).then(e=>{if(t.version<53&&!a)try{e.forEach(e=>{e.type=n[e.type]||e.type})}catch(t){if("TypeError"!==t.name)throw t;e.forEach((t,r)=>{e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))})}return e}).then(a,i)}}function U(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function z(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),d(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function G(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){m("removeStream","removeTrack"),this.getSenders().forEach(t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)})})}function W(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function q(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach(e=>{if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const r=t.apply(this,arguments);if(n){const{sender:t}=r,n=t.getParameters();(!("encodings"in n)||1===n.encodings.length&&0===Object.keys(n.encodings[0]).length)&&(n.encodings=e.sendEncodings,t.sendEncodings=e.sendEncodings,this.setParametersPromises.push(t.setParameters(n).then(()=>{delete t.sendEncodings}).catch(()=>{delete t.sendEncodings})))}return r})}function K(e){if("object"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function Y(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function Z(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function Q(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach(n=>t.call(this,n,e)),e.getVideoTracks().forEach(n=>t.call(this,n,e))},e.RTCPeerConnection.prototype.addTrack=function(e,...n){return n&&n.forEach(e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach(e=>{n.includes(e.track)&&this.removeTrack(e)})})}}function J(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach(e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)})}),t.apply(e,arguments)}}}function X(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,a=t.setLocalDescription,i=t.setRemoteDescription,o=t.addIceCandidate;t.createOffer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],a=n.apply(this,[r]);return t?(a.then(e,t),Promise.resolve()):a},t.createAnswer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],a=r.apply(this,[n]);return t?(a.then(e,t),Promise.resolve()):a};let c=function(e,t,n){const r=a.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=c,c=function(e,t,n){const r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=c,c=function(e,t,n){const r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=c}function $(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>n(ee(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function ee(e){return e&&void 0!==e.video?Object.assign({},e,{video:b(e.video)}):e}function te(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let r=e.iceServers[n];!r.hasOwnProperty("urls")&&r.hasOwnProperty("url")?(m("RTCIceServer.url","RTCIceServer.urls"),r=JSON.parse(JSON.stringify(r)),r.urls=r.url,delete r.url,t.push(r)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function ne(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function re(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find(e=>"audio"===e.receiver.track.kind);!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const n=this.getTransceivers().find(e=>"video"===e.receiver.track.kind);!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video")}return t.apply(this,arguments)}}function ae(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var ie=n(285),oe=n.n(ie);function ce(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const n=new t(e),r=oe.a.parseCandidate(e.candidate),a=Object.assign(n,r);return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,d(e,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t))}function se(e){if(!e.RTCPeerConnection)return;const t=v(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const n=function(e){if(!e||!e.sdp)return!1;const t=oe.a.splitSections(e.sdp);return t.shift(),t.some(e=>{const t=oe.a.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")})},r=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const n=parseInt(t[1],10);return n!=n?-1:n},a=function(e){let n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},i=function(e,n){let r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);const a=oe.a.matchPrefix(e.sdp,"a=max-message-size:");return a.length>0?r=parseInt(a[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},o=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const e=r(arguments[0]),t=a(e),n=i(arguments[0],e);let o;o=0===t&&0===n?Number.POSITIVE_INFINITY:0===t||0===n?Math.max(t,n):Math.min(t,n);const c={};Object.defineProperty(c,"maxMessageSize",{get:()=>o}),this._sctp=c}return o.apply(this,arguments)}}function ue(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const n=e.send;e.send=function(){const r=arguments[0],a=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&a>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=n.apply(this,arguments);return t(e,this),e},d(e,"datachannel",e=>(t(e.channel,e.target),e))}function le(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function de(e){if(!e.RTCPeerConnection)return;const t=v(e);if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(e){return e&&e.sdp&&-1!==e.sdp.indexOf("\na=extmap-allow-mixed")&&(e.sdp=e.sdp.split("\n").filter(e=>"a=extmap-allow-mixed"!==e.trim()).join("\n")),n.apply(this,arguments)}}var fe=function({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const n=h,s=v(e),u={browserDetails:s,commonShim:c,extractVersion:l,disableLog:f,disableWarnings:p};switch(s.browser){case"chrome":if(!r||!I||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),u;if(null===s.version)return n("Chrome shim can not determine version, not shimming."),u;n("adapter.js shimming chrome."),u.browserShim=r,E(e),w(e),I(e),C(e),T(e),S(e),A(e),k(e),P(e),ce(e),le(e),se(e),ue(e),de(e);break;case"firefox":if(!i||!V||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),u;n("adapter.js shimming firefox."),u.browserShim=i,B(e),V(e),H(e),G(e),U(e),z(e),W(e),q(e),K(e),Y(e),Z(e),ce(e),le(e),se(e),ue(e);break;case"edge":if(!a||!M||!t.shimEdge)return n("MS edge shim is not included in this adapter release."),u;n("adapter.js shimming edge."),u.browserShim=a,x(e),R(e),M(e),L(e),se(e),ue(e);break;case"safari":if(!o||!t.shimSafari)return n("Safari shim is not included in this adapter release."),u;n("adapter.js shimming safari."),u.browserShim=o,te(e),re(e),X(e),Q(e),J(e),ne(e),$(e),ae(e),ce(e),se(e),ue(e),de(e);break;default:n("Unsupported browser!")}return u}({window:"undefined"==typeof window?void 0:window}),pe=n(291),he=n.n(pe);function me(e,t){throw new TypeError(`unexpected tag 0x${e.toString(16)} (${t} expected)`)}function ve(e){return 127&e}function ge(e){return 0==(128&e)}function be(e){return 224==(224&e)}function _e(e){return 160==(224&e)}function ye(e){return 144==(240&e)}function Ee(e){return 128==(240&e)}function Oe(e,t,n){const r=t.byteLength;if(r<=255)e.putUi8(n),e.putUi8(r);else if(r<=65535)e.putUi8(n+1),e.putUi16(r);else{if(!(r<=4294967295))throw new RangeError("length limit exceeded");e.putUi8(n+2),e.putUi32(r)}e.put(t)}function we(e){const t=e.getUi8();let n;switch(t){case 192:n=0;break;case 196:case 217:n=e.getUi8();break;case 197:case 218:n=e.getUi16();break;case 198:case 219:n=e.getUi32();break;default:_e(t)||me(t,"bytes or string"),n=function(e){return 31&e}(t)}return e.get(n)}function Ce(e,t){t<16?e.putUi8(144|15&t):je(e,220,t)}function Se(e,t){const n=e.getUi8(),r=ye(n)?function(e){return 15&e}(n):Te(e,n,220,"array");if(null!=t&&r!==t)throw new Error("invalid array header size "+r);return r}function Ae(e,t){t<16?e.putUi8(128|15&t):je(e,222,t)}function ke(e,t){const n=e.getUi8(),r=Ee(n)?function(e){return 15&e}(n):Te(e,n,222,"map");if(null!=t&&r!==t)throw new Error("invalid map header size "+r);return r}function je(e,t,n){if(n<=65535)e.putUi8(t),e.putUi16(n);else{if(!(n<=4294967295))throw new RangeError("length limit exceeded");e.putUi8(t+1),e.putUi32(n)}}function Te(e,t,n,r){switch(t){case 192:return 0;case n:return e.getUi16();case n+1:return e.getUi32();default:me(t,r)}}const Ie={enc(e,t){(function(e){switch(typeof e){case"undefined":return Pe;case"boolean":return De;case"number":return isFinite(e)&&Math.floor(e)===e?e<0?Ne:xe:Re;case"string":return Le;case"object":return null===e?Pe:Array.isArray(e)?Fe:e instanceof Uint8Array||e instanceof ArrayBuffer?Me:e instanceof Date?Be:Ve;default:throw new TypeError("unsupported type "+typeof e)}})(t).enc(e,t)},dec:e=>function(e){switch(e){case 192:return Pe;case 194:case 195:return De;case 208:case 209:case 210:case 211:return Ne;case 204:case 205:case 206:case 207:return xe;case 202:case 203:return Re;case 196:case 197:case 198:return Me;case 217:case 218:case 219:return Le;case 220:case 221:return Fe;case 222:case 223:return Ve;case 214:case 215:case 199:return Be;default:if(ge(e)||be(e))return Ne;if(_e(e))return Le;if(ye(e))return Fe;if(Ee(e))return Ve;throw new TypeError("unsupported tag "+e)}}(e.peek()).dec(e)},Pe={enc(e,t){e.putUi8(192)},dec(e){const t=e.getUi8();return 192!==t&&me(t,"nil"),null}},De={enc(e,t){e.putUi8(t?195:194)},dec(e){const t=e.getUi8();switch(t){case 192:case 194:return!1;case 195:return!0;default:me(t,"bool")}}},Ne={enc(e,t){-128<=t&&t<=127?t>=0?e.putUi8(ve(t)):t>-32?e.putUi8(224|31&t):(e.putUi8(208),e.putUi8(t)):-32768<=t&&t<=32767?(e.putI8(209),e.putI16(t)):-2147483648<=t&&t<=2147483647?(e.putI8(210),e.putI32(t)):(e.putI8(211),e.putI64(t))},dec(e){const t=e.getUi8();if(ge(t))return function(e){return 127&e}(t);if(be(t))return function(e){return e-256}(t);switch(t){case 192:return 0;case 208:return e.getI8();case 209:return e.getI16();case 210:return e.getI32();case 211:return e.getI64();case 204:return e.getUi8();case 205:return e.getUi16();case 206:return e.getUi32();case 207:return e.getUi64();default:me(t,"int")}}},xe={enc(e,t){if(t<0)throw new Error("not an uint: "+t);t<=127?e.putUi8(ve(t)):t<=255?(e.putUi8(204),e.putUi8(t)):t<=65535?(e.putUi8(205),e.putUi16(t)):t<=4294967295?(e.putUi8(206),e.putUi32(t)):(e.putUi8(207),e.putUi64(t))},dec(e){const t=Ne.dec(e);if(t<0)throw new RangeError("uint underflow");return t}},Re={enc(e,t){e.putUi8(203),e.putF(t)},dec(e){const t=e.getUi8();switch(t){case 192:return 0;case 202:return e.getF32();case 203:return e.getF64();default:me(t,"float")}}},Me={enc(e,t){Oe(e,t,196)},dec:we},Le={enc(e,t){const n=function(e){const t=e.length,n=new Uint8Array(4*t);let r,a=0,i=0;for(;i<t;)r=e.charCodeAt(i++),55296==(64512&r)&&(r=(r<<10)+e.charCodeAt(i++)-56613888),r<128?n[a++]=r:r<2048?(n[a++]=192+(r>>6),n[a++]=128+(63&r)):r<65536?(n[a++]=224+(r>>12),n[a++]=128+(r>>6&63),n[a++]=128+(63&r)):(n[a++]=240+(r>>18),n[a++]=128+(r>>12&63),n[a++]=128+(r>>6&63),n[a++]=128+(63&r));return n.buffer.slice(0,a)}(t);n.byteLength<32?(e.putUi8(160|31&n.byteLength),e.put(n)):Oe(e,n,217)},dec:e=>function(e){return new TextDecoder("utf-8").decode(e)}(we(e))},Be={enc(e,t){const n=t.getTime();e.putUi8(199),e.putUi8(12),e.putI8(-1),e.putUi32(n%1e3*1e6),e.putI64(n/1e3)},dec(e){const t=e.getUi8();switch(t){case 214:if(-1===e.getI8())return new Date(1e3*e.getUi32());break;case 215:if(-1===e.getI8()){const t=e.getUi32(),n=e.getUi32();return new Date(1e3*(n+4294967296*(3&t))+t/4e6)}break;case 199:if(12===e.getUi8()&&-1===e.getI8()){const t=e.getUi32(),n=e.getI64();return new Date(1e3*n+t/1e6)}}me(t,"time")}},Fe=(He=Ie,{encHeader:Ce,decHeader:Se,enc(e,t){Ce(e,t.length),t.forEach(t=>He.enc(e,t))},dec(e){const t=[];for(let n=Se(e);n>0;--n)t.push(He.dec(e));return t}});var He;const Ve=function(e,t){return{encHeader:Ae,decHeader:ke,enc(n,r){const a=Object.keys(r);Ae(n,a.length),a.forEach(a=>{e.enc(n,a),t.enc(n,r[a])})},dec(n){const r={};for(let a=ke(n);a>0;--a){r[e.dec(n)]=t.dec(n)}return r}}}(Ie,Ie);function Ue(e,t){return(t||Ie).dec(function(e){let t=ArrayBuffer.isView(e)?new DataView(e.buffer,e.byteOffset,e.byteLength):new DataView(e),n=0;return{peek:()=>t.getUint8(n),get(e){n+=e;const r=t.byteOffset;return t.buffer.slice(r+n-e,r+n)},getI8:()=>t.getInt8(n++),getI16:()=>(n+=2,t.getInt16(n-2)),getI32:()=>(n+=4,t.getInt32(n-4)),getI64(){n+=8;return 4294967296*t.getInt32(n-8)+t.getUint32(n-4)},getUi8:()=>t.getUint8(n++),getUi16:()=>(n+=2,t.getUint16(n-2)),getUi32:()=>(n+=4,t.getUint32(n-4)),getUi64(){n+=8;return 4294967296*t.getUint32(n-8)+t.getUint32(n-4)},getF32:()=>(n+=4,t.getFloat32(n-4)),getF64:()=>(n+=8,t.getFloat64(n-8))}}(e))}var ze,Ge,We=n(286),qe=n.n(We),Ke=Object.defineProperty,Ye=Object.getOwnPropertySymbols,Ze=Object.prototype.hasOwnProperty,Qe=Object.prototype.propertyIsEnumerable,Je=(e,t,n)=>t in e?Ke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Xe=(e,t,n)=>new Promise((r,a)=>{var i=e=>{try{c(n.next(e))}catch(e){a(e)}},o=e=>{try{c(n.throw(e))}catch(e){a(e)}},c=e=>e.done?r(e.value):Promise.resolve(e.value).then(i,o);c((n=n.apply(e,t)).next())}),$e=class{createJoinLink(e){return Xe(this,null,(function*(){return{join_link:"nop"}}))}removeJoinLink(e){return Xe(this,null,(function*(){return{success:!0}}))}getAnonymTokenByLink(e,t){return Xe(this,null,(function*(){return""}))}log(e){}prepareUserIds(e){return Xe(this,null,(function*(){}))}getCachedOkIdByExternalId(e){return null}cacheExternalId(e,t){}hangupConversation(e){}removeHistoryRecords(e){return Xe(this,null,(function*(){}))}cleanup(){}getTokenForAnonym(e,t){return Xe(this,null,(function*(){return""}))}call(e){return Xe(this,arguments,(function*(e,t={}){return null}))}},et=class{log(e,t,n=!1){}destroy(){}},tt=class{constructor(){this._handlers={},this._listeners=[]}_triggerEvent(e,...t){if(this._handlers.hasOwnProperty(e))for(let n of this._handlers[e])n.apply(this,t)}addEventListener(e,t){if("function"!=typeof t)throw new Error("Listener should be a function");return this._handlers.hasOwnProperty(e)||(this._handlers[e]=[]),this._handlers[e].push(t),{dispose:this.removeEventListener.bind(this,e,t)}}removeEventListener(e,t){if(!this._handlers.hasOwnProperty(e))return;t||delete this._handlers[e];let n=this._handlers[e].indexOf(t);n>=0&&this._handlers[e].splice(n,1)}subscribe(e,t,n){let r=e.addEventListener(t,n);this._listeners.push(r)}unsubscribe(){this._listeners.forEach(e=>{e.dispose()})}},nt=class extends tt{get ready(){return!0}setParticipantIdRegistry(e){}requestRealloc(){}setEndpoint(e){}setConversationId(e){}readyToSend(){}cleanup(){}requestTestMode(e){}getNextCommandSequenceNumber(){return 0}};(Ge=ze||(ze={})).INCOMING="INCOMING",Ge.OUTGOING="OUTGOING",Ge.JOINING="JOINING";var rt,at=ze;!function(e){e.USER="USER",e.GROUP="GROUP",e.CHAT="CHAT"}(rt||(rt={}));var it,ot,ct=rt;(ot=it||(it={})).ATTENDEE="ATTENDEE",ot.HAND_UP="HAND_UP";var st,ut=it;!function(e){e.ADD_PARTICIPANT="ADD_PARTICIPANT",e.RECORD="RECORD"}(st||(st={}));var lt,dt=st;!function(e){e.REQUIRE_AUTH_TO_JOIN="REQUIRE_AUTH_TO_JOIN",e.AUDIENCE_MODE="AUDIENCE_MODE",e.WAITING_HALL="WAITING_HALL"}(lt||(lt={}));var ft,pt,ht=lt;(pt=ft||(ft={})).CAMERA_PERMISSION="camera",pt.MIC_PERMISSION="mic",pt.CAMERA_ACCESS="cameralock",pt.MIC_ACCESS="miclock",pt.MIC_NOT_FOUND="nomic",pt.SCREEN_PERMISSION="screenpermission",pt.SCREEN_ACCESS="screenlock",pt.CONNECTION="connection",pt.NETWORK="network",pt.UNKNOWN="unknown",pt.UNSUPPORTED="unsupported",pt.SIGNALING_FAILED="signalingfailed",pt.API="api",pt.AUTH="auth";var mt,vt,gt=ft;(vt=mt||(mt={})).CANCELED="CANCELED",vt.REJECTED="REJECTED",vt.REMOVED="REMOVED",vt.HUNGUP="HUNGUP",vt.MISSED="MISSED",vt.BUSY="BUSY",vt.FAILED="FAILED",vt.NETWORK_ERROR="NETWORK_ERROR",vt.CALLER_IS_BLOCKED="CALLER_IS_BLOCKED",vt.NOT_FRIENDS="NOT_FRIENDS",vt.CALLEE_IS_OFFLINE="CALLEE_IS_OFFLINE",vt.UNKNOWN_ERROR="UNKNOWN_ERROR",vt.UNSUPPORTED="UNSUPPORTED",vt.OLD_VERSION="OLD_VERSION",vt.SERVICE_DISABLED="SERVICE_DISABLED",vt.EXTERNAL_API_ERROR="EXTERNAL_API_ERROR",vt.SOCKET_CLOSED="SOCKET_CLOSED",vt.ENDED="ENDED";var bt,_t=mt;!function(e){e.AUDIO="AUDIO",e.VIDEO="VIDEO",e.SCREEN_SHARING="SCREEN_SHARING"}(bt||(bt={}));var yt,Et=bt;!function(e){e.UNMUTE="UNMUTE",e.MUTE="MUTE",e.MUTE_PERMANENT="MUTE_PERMANENT"}(yt||(yt={}));var Ot,wt,Ct=yt;(wt=Ot||(Ot={})).CALLED="CALLED",wt.ACCEPTED="ACCEPTED",wt.REJECTED="REJECTED",wt.HUNGUP="HUNGUP";var St,At=Ot;!function(e){e.START="start",e.ACCEPT="accept",e.JOIN="join",e.RETRY="retry"}(St||(St={}));var kt,jt=St;!function(e){e.NOTIFICATION="NOTIFICATION",e.FAILED="FAILED",e.RECONNECT="RECONNECT"}(kt||(kt={}));var Tt,It,Pt=kt;(It=Tt||(Tt={})).TRANSMITTED_DATA="transmitted-data",It.ACCEPTED_CALL="accepted-call",It.HUNGUP="hungup",It.PARTICIPANT_ADDED="participant-added",It.PARTICIPANT_JOINED="participant-joined",It.CLOSED_CONVERSATION="closed-conversation",It.MEDIA_SETTINGS_CHANGED="media-settings-changed",It.PARTICIPANT_STATE_CHANGED="participant-state-changed",It.RATE_CALL_DATA="rate-call-data",It.FEATURE_SET_CHANGED="feature-set-changed",It.TOPOLOGY_CHANGED="topology-changed",It.PRODUCER_UPDATED="producer-updated",It.CONSUMER_ANSWERED="consumer-answered",It.MULTIPARTY_CHAT_CREATED="multiparty-chat-created",It.FORCE_MEDIA_SETTINGS_CHANGE="force-media-settings-change",It.SETTINGS_UPDATE="settings-update",It.VIDEO_QUALITY_UPDATE="video-quality-update",It.REGISTERED_PEER="registered-peer",It.SWITCH_MICRO="switch-micro",It.RECORD_STARTED="record-started",It.RECORD_STOPPED="record-stopped",It.REALLOC_CON="realloc-con",It.AUDIO_ACTIVITY="audio-activity",It.SPEAKER_CHANGED="speaker-changed",It.STALLED_ACTIVITY="stalled-activity",It.CHAT_MESSAGE="chat-message",It.CUSTOM_DATA="custom-data",It.ROLES_CHANGED="roles-changed",It.MUTE_PARTICIPANT="mute-participant",It.PIN_PARTICIPANT="pin-participant",It.OPTIONS_CHANGED="options-changed",It.NETWORK_STATUS="network-status",It.PARTICIPANT_SOURCES_UPDATE="participant-sources-update",It.PROMOTE_PARTICIPANT="promote-participant",It.CHAT_ROOM_UPDATED="chat-room-updated",It.PROMOTION_APPROVED="promotion-approved",It.JOIN_LINK_CHANGED="join-link-changed";var Dt,Nt,xt=Tt;(Nt=Dt||(Dt={})).ERROR="callError",Nt.DEVICES="callDevices",Nt.CALL_SPEC_ERROR="callSpecError",Nt.ICE_CONNECTION_STATE="callIceConnectionState",Nt.ICE_CONNECTION_TYPE="callIceConnectionType",Nt.ICE_RESTART="callIceRestart",Nt.PUSH="callPush",Nt.OUTGOING_CALL="callStart",Nt.OUTGOING_MULTIPARTY_CALL="callStartMultiparty",Nt.JOIN_CONVERSATION="callJoinConversation",Nt.ACCEPTED_OUTGOING="callAcceptedOutgoing",Nt.ACCEPT_INCOMING="callAcceptIncoming",Nt.DECLINE_INCOMING="callDeclineIncoming",Nt.ACCEPT_CONCURRENT="callAcceptConcurrent",Nt.HANGUP="callHangup",Nt.MEDIA_STATUS="callMediaStatus",Nt.DEVICE_CHANGED="callDeviceChanged",Nt.SOCKET_ACTION="callSocketAction",Nt.ADD_PARTICIPANT="callAddParticipant",Nt.REMOVE_PARTICIPANT="callRemoveParticipant",Nt.POOR_CONNECTION="callPoorConnection",Nt.TOPOLOGY_CHANGE_REQUESTED="callTopologyChangeRequested",Nt.RELAY_POLICY="callForceRelay",Nt.PAT_ALLOCATED="patAllocate",Nt.PAT_DEALLOCATED="patDeallocate",Nt.PAT_ERROR="patError",Nt.PAT_WAITING_TIME_ERROR="patWaitingTimeError",Nt.PAT_OUTDATED_RESPONSE="patOutdatedResponse";var Rt,Mt=Dt;!function(e){e.AUDIO_MIX="audio-mix",e.PARTICIPANT_AGNOSTIC_TRACK_PREFIX="pat"}(Rt||(Rt={}));var Lt,Bt=Rt;!function(e){e.NO_AVAILABLE_TRACKS="no-available-tracks",e.UNKNOWN_ERROR="unknown-error"}(Lt||(Lt={}));var Ft,Ht=Lt;function Vt(e){switch(e){case 1:return Lt.NO_AVAILABLE_TRACKS;default:return Lt.UNKNOWN_ERROR}}!function(e){e.CREATOR="CREATOR",e.ADMIN="ADMIN"}(Ft||(Ft={}));var Ut,zt=Ft;function Gt(e,t){if(e.length!==t.length)return!1;for(let n of e)if(!t.includes(n))return!1;return!0}!function(e){e.USER="USER",e.GROUP="GROUP"}(Ut||(Ut={}));var Wt=Ut,qt=102400,Kt="_okcls_logs_session_";function Yt(){return`${Kt}${Date.now()}`}function Zt(e){return new Blob([e]).size}function Qt(e){try{window.localStorage.removeItem(e)}catch(e){console.error("Failed to remove log from storage",e)}}function Jt(){!en.available||!tn.length||function e(){let t=tn.toString();if(!en.available||!t)return;let n=Zt(t);en.cleanup(n);try{window.localStorage.setItem(nn,t)}catch(t){return console.warn("Failed to write log to storage",t),en.storageSize=en.size+n,en.cleanup(qt+n),en.available>=qt+n?void e():n>qt?(tn.bisect(),void e()):void(en.storageSize=0)}n>524288&&(en.add(nn,n),nn=Yt(),tn.clear(),en.cleanup(qt))}()}function Xt(e=!1){let t=[];try{let e=window.localStorage;for(let n of en.items){let r=e.getItem(n.key);t.push(r)}let n=tn.toString();n&&t.push(n)}catch(e){console.error("Storage is blocked",e)}let n=`[${t.join(",")}]`;if(e)return n;let r=`logs_${Date.now()}.json`;return function(e,t){let n=document.createElement("a"),r=new Blob([e],{type:"text/json"});n.href=URL.createObjectURL(r),n.download=t,n.click()}(n,r),r}function $t(){en||(en=new class{constructor(){this._items=[],this._itemsSize=0,this._storageSize=2097152;try{let e=window.localStorage;for(let t of Object.keys(e)){if(0!==t.indexOf(Kt))continue;let n=e.getItem(t);if(!n){Qt(t);continue}let r=Zt(n);this.add(t,r)}}catch(e){console.error("Storage is blocked",e),this._storageSize=0}this._items.sort((e,t)=>e.date-t.date),this.cleanup(qt)}get size(){return this._itemsSize}get length(){return this._items.length}get available(){return Math.max(this._storageSize-this._itemsSize,0)}get items(){return this._items}set storageSize(e){this._storageSize=e}add(e,t){let n=parseInt(e.replace(Kt,""),10);this._itemsSize+=t,this._items.push({key:e,size:t,date:n})}deleteOldestItem(){let e=this._items.shift();e&&(Qt(e.key),this._itemsSize-=e.size)}cleanup(e){for(;this.length&&(this.size>2097152||this.length>4||this.size+e>this.available);)this.deleteOldestItem()}},tn=new class{constructor(){this._items=[]}get length(){return this._items.length}push(e){this._items.push(e)}shift(){return this._items.shift()||null}bisect(){let e=this.length>1?Math.floor(this.length/2):1;this._items=this._items.slice(e)}clear(){this._items=[]}toString(){return this._items.length?JSON.stringify(this._items,(e,t)=>t instanceof Error?String(t):t):""}},nn=Yt(),window.addEventListener("beforeunload",Jt))}var en,tn,nn,rn=null;window.__VKCallsSDKLogs__=(e=!1)=>(en||$t(),Jt(),Xt(e));var an,on,cn,sn,un=class{static get sessionKey(){return un._sessionKey}static set sessionKey(e){un._sessionKey=e}static get sessionSecretKey(){return un._sessionSecretKey}static set sessionSecretKey(e){un._sessionSecretKey=e}static get accessToken(){return un._accessToken}static set accessToken(e){un._accessToken=e}static isEmpty(){return!un._sessionKey||!un._sessionSecretKey}},ln=class{static set(e){e.hasOwnProperty("voiceParams")&&(Object.assign(ln._params.voiceParams,e.voiceParams),delete e.voiceParams),e.hasOwnProperty("specListenerParams")&&(Object.assign(ln._params.specListenerParams,e.specListenerParams),delete e.specListenerParams),e.hasOwnProperty("unifiedPlanBrowsers")&&(Object.assign(ln._params.unifiedPlanBrowsers,e.unifiedPlanBrowsers),delete e.unifiedPlanBrowsers),e.hasOwnProperty("apiAuth")&&(un.accessToken=e.apiAuth.accessToken,un.sessionKey=e.apiAuth.sessionKey,un.sessionSecretKey=e.apiAuth.sessionSecretKey),Object.assign(ln._params,e)}static get(e){return ln._params[e]}static get appName(){return"ok.calls.sdk.js"}static get appVersion(){return 1.1}static get sdkVersion(){return"2.4.3-beta.12"}static get debug(){return!1}static get protocolVersion(){return 5}static get platform(){return ln._params.platform}static set platform(e){ln._params.platform=e}static get clientType(){return ln._params.clientType}static set clientType(e){ln._params.clientType=e}static get device(){return ln._params.device}static get apiAppId(){return 42}static get apiKey(){return ln._params.apiKey}static get apiEnv(){switch(ln._params.apiEnv){case"TEST":return{api:"https://apitest.ok.ru/api/",connect:"https://test.ok.ru/"};case"VIDEOTEST":return{api:"https://videotestapi.ok.ru/api/",connect:"https://test.ok.ru/"};case"DEV":return{api:"https://1.api.an-eremeev.devdc.odkl.ru/api/",connect:"https://1.web.an-eremeev.devdc.odkl.ru/"};default:return{api:"https://api.ok.ru/",connect:"https://connect.ok.ru/"}}}static get authToken(){return ln._params.authToken}static set authToken(e){ln._params.authToken=e}static get anonymToken(){return ln._params.anonymToken}static set anonymToken(e){ln._params.anonymToken=e}static get domain(){return ln._params.domain}static get iceServers(){return ln._params.iceServers}static set iceServers(e){ln._params.iceServers=e}static get wssBase(){return ln._params.wssBase}static set wssBase(e){ln._params.wssBase=e}static get wssToken(){return ln._params.wssToken}static set wssToken(e){ln._params.wssToken=e}static get signalingReconnectDelay(){return ln._params.signalingReconnectDelay}static get signalingReconnectMaxDelay(){return ln._params.signalingReconnectMaxDelay}static get signalingReconnectMaxCount(){return ln._params.signalingReconnectMaxCount}static get waitConnectionDelay(){return ln._params.waitConnectionDelay}static get waitResponseDelay(){return ln._params.waitResponseDelay}static get waitMessageDelay(){return ln._params.waitMessageDelay}static get debugLog(){return ln._params.debugLog}static get forceRelayPolicy(){return ln._params.forceRelayPolicy}static set forceRelayPolicy(e){ln._params.forceRelayPolicy=e}static get videoMinWidth(){return ln._params.videoMinWidth}static get videoMaxWidth(){return ln._params.videoMaxWidth}static set videoMaxWidth(e){ln._params.videoMaxWidth=e}static get videoMinHeight(){return ln._params.videoMinHeight}static get videoMaxHeight(){return ln._params.videoMaxHeight}static set videoMaxHeight(e){ln._params.videoMaxHeight=e}static get videoAspectRatio(){return ln._params.videoAspectRatio}static get videoFrameRate(){return ln._params.videoFrameRate}static get videoFacingMode(){return ln._params.videoFacingMode}static get screenFrameRate(){return ln._params.screenFrameRate}static get videoEffects(){return ln._params.videoEffects}static set videoEffects(e){ln._params.videoEffects=e}static get videoEffectMaxWidth(){return ln._params.videoEffectMaxWidth}static set videoEffectMaxWidth(e){ln._params.videoEffectMaxWidth=e}static get videoEffectMaxHeight(){return ln._params.videoEffectMaxHeight}static set videoEffectMaxHeight(e){ln._params.videoEffectMaxHeight=e}static get voiceParams(){return ln._params.voiceParams}static get specListenerParams(){return ln._params.specListenerParams}static get iceRestartWaitTime(){return ln._params.iceRestartWaitTime}static get transportConnectionWaitTime(){return ln._params.transportConnectionWaitTime}static get statisticsInterval(){return ln._params.statisticsInterval}static set statisticsInterval(e){ln._params.statisticsInterval=e}static get networkStatisticsInterval(){return ln._params.networkStatisticsInterval}static get perfStatReportEnabled(){return ln._params.perfStatReportEnabled}static get producerNotificationDataChannel(){return ln._params.producerNotificationDataChannel}static get producerCommandDataChannel(){return ln._params.producerCommandDataChannel}static get consumerScreenDataChannel(){return ln._params.consumerScreenDataChannel}static set consumerScreenDataChannel(e){ln._params.consumerScreenDataChannel=e}static get producerScreenDataChannel(){return ln._params.producerScreenDataChannel&&ln._params.producerNotificationDataChannel}static set producerScreenDataChannel(e){ln._params.producerScreenDataChannel=e}static get noiseSuppression(){return ln._params.noiseSuppression}static set noiseSuppression(e){ln._params.noiseSuppression=e}static get preferH264(){return ln._params.preferH264}static get preferVP9(){return ln._params.preferVP9}static get audioNack(){return ln._params.audioNack}static get consumerScreenTrack(){return ln._params.consumerScreenTrack&&ln._params.consumerScreenDataChannel}static get producerScreenTrack(){return ln._params.producerScreenTrack&&ln._params.producerScreenDataChannel}static isUnifiedPlanSupported(e,t){let n=ln._params.unifiedPlanBrowsers;return!!n.hasOwnProperty(e)&&t>=n[e]}static get videoTracksCount(){return ln._params.videoTracksCount}static get breakVideoPayloadTypes(){return ln._params.breakVideoPayloadTypes}static get filteredMessages(){return ln._params.filteredMessages}static get batchParticipantsOnStart(){return ln._params.batchParticipantsOnStart}static get participantStateMapped(){return ln._params.participantStateMapped}},dn=ln;function fn(e,...t){let n=dn.get(e);n&&setTimeout(n,0,...t)}function pn(e){return Object.assign({},e)}function hn(e){return e.slice()}dn._params={platform:"WEB",clientType:"PORTAL",device:"browser",apiKey:"",authToken:"",anonymToken:"",apiEnv:"PROD",domain:"",iceServers:[],wssBase:"",wssToken:"",signalingReconnectDelay:1e3,signalingReconnectMaxDelay:5e3,signalingReconnectMaxCount:20,waitConnectionDelay:1e4,waitResponseDelay:1e4,waitMessageDelay:15e3,debugLog:!1,forceRelayPolicy:!1,videoMinWidth:428,videoMinHeight:240,videoMaxWidth:1280,videoMaxHeight:720,videoAspectRatio:16/9,videoFrameRate:25,screenFrameRate:15,videoEffects:null,videoEffectMaxWidth:640,videoEffectMaxHeight:360,iceRestartWaitTime:2e4,transportConnectionWaitTime:5e3,statisticsInterval:5e3,networkStatisticsInterval:2e4,perfStatReportEnabled:!0,voiceParams:{smoothing:.8,minFreq:200,maxFreq:5e3,interval:500,threshold:.35,speakerLevelMultiplier:1.8},specListenerParams:{connectionTimeout:1e4,volumeTimeout:1e4},unifiedPlanBrowsers:{Firefox:10,Chrome:76,Safari:12},producerNotificationDataChannel:!0,producerCommandDataChannel:!0,consumerScreenDataChannel:!0,producerScreenDataChannel:!0,noiseSuppression:!0,preferH264:!1,preferVP9:!0,audioNack:!0,consumerScreenTrack:!1,producerScreenTrack:!1,videoTracksCount:0,filteredMessages:!1,breakVideoPayloadTypes:!1,batchParticipantsOnStart:!1,participantStateMapped:!1},(on=an||(an={})).WAITING_HALL="WAITING_HALL",on.WAITING="WAITING",on.CONNECTING="CONNECTING",on.CONNECTED="CONNECTED",on.RECONNECT="RECONNECT",on.ERROR="ERROR",on.HANGUP="HANGUP",on.PERMISSIONS="PERMISSIONS",(sn=cn||(cn={})).onLocalStream=function(e,t){fn("onLocalStream",e,pn(t))},sn.onScreenStream=function(e,t){fn("onScreenStream",e,pn(t))},sn.onLocalStreamUpdate=function(e,t){fn("onLocalStreamUpdate",pn(e),t)},sn.onLocalStatus=function(e){fn("onLocalStatus",e)},sn.onRemoteStream=function(e,t){fn("onRemoteStream",e,t)},sn.onRemoteLive=function(e,t,n){fn("onRemoteLive",e,t,n)},sn.onRemoteScreenStream=function(e,t){fn("onRemoteScreenStream",e,t)},sn.onConversation=function(e,t,n){fn("onConversation",e,pn(t),n)},sn.onRemoteMediaSettings=function(e,t){fn("onRemoteMediaSettings",e,pn(t))},sn.onRemoteParticipantState=function(e,t){fn("onRemoteParticipantState",e,pn(t))},sn.onRemoteStatus=function(e,t,n=null){fn("onRemoteStatus",e,t,n)},sn.onParticipantStatus=function(e,t,n=null){fn("onParticipantStatus",e,t,n)},sn.onPermissionsRequested=function(){fn("onPermissionsRequested")},sn.onPermissionsError=function(e){fn("onPermissionsError",e)},sn.onRemoteRemoved=function(e){fn("onRemoteRemoved",e)},sn.onCallState=function(e,t,n){fn("onCallState",e,t,pn(n))},sn.onDeviceSwitched=function(e,t){fn("onDeviceSwitched",e,t)},sn.onUnmuteRequest=function(e){fn("onUnmuteRequest",e)},sn.onUnmutePermission=function(e,t){fn("onUnmutePermission",e,hn(t))},sn.onRolesChanged=function(e,t){fn("onRolesChanged",e,hn(t))},sn.onLocalRolesChanged=function(e){fn("onLocalRolesChanged",hn(e))},sn.onPinnedParticipant=function(e,t){fn("onPinnedParticipant",e,t)},sn.onLocalPin=function(e){fn("onLocalPin",e)},sn.onOptionsChanged=function(e){fn("onOptionsChanged",hn(e))},sn.onCallAccepted=function(){fn("onCallAccepted")},sn.onRateNeeded=function(){fn("onRateNeeded")},sn.onSpeakerChanged=function(e){fn("onSpeakerChanged",e)},sn.onVolumesDetected=function(e){fn("onVolumesDetected",hn(e))},sn.onLocalVolume=function(e,t){fn("onLocalVolume",e,t)},sn.onJoinStatus=function(e,t){fn("onJoinStatus",e,t)},sn.onHangup=function(e,t){fn("onHangup",e,t)},sn.onMultipartyChatCreated=function(e){fn("onMultipartyChatCreated",pn(e))},sn.onDeviceChange=function(){fn("onDeviceChange")},sn.onFingerprintChange=function(e){fn("onFingerprintChange",e)},sn.onTokenExpired=function(){fn("onTokenExpired")},sn.onChatMessage=function(e,t,n=!1){fn("onChatMessage",e,t,n)},sn.onCustomData=function(e,t,n=!1){fn("onCustomData",e,t,n)},sn.onRecordStarted=function(e,t,n,r,a,i){fn("onRecordStarted",e,t,n,r,a,i)},sn.onRecordStopped=function(){fn("onRecordStopped")},sn.onLocalNetworkStatusChanged=function(e){fn("onLocalNetworkStatusChanged",e)},sn.onNetworkStatusChanged=function(e){fn("onNetworkStatusChanged",e)},sn.onDebugMessage=function(e,...t){fn("onDebugMessage",e,...t)},sn.onStatistics=function(e,t){fn("onStatistics",Object.assign({},e,{memory:t}))},sn.onAutoplayError=function(){fn("onAutoplayError")},sn.onChatRoomUpdated=function(e,t,n){fn("onChatRoomUpdated",e,t,n)};var mn,vn,gn=cn;!function(e){e.DEBUG="DEBUG",e.LOG="LOG",e.WARN="WARN",e.ERROR="ERROR"}(mn||(mn={})),function(e){let t="📞",n=(e,...t)=>{gn.onDebugMessage(e,...t)},r=!1,a=(e,t)=>(...n)=>{e(...n),function(e,t){!en.available||(tn.push({t:Date.now(),l:e,d:t}),rn||(rn=window.setTimeout(()=>{rn=null,Jt()},3e4)))}(t,n)},i=console.debug.bind(console,t),o=console.log.bind(console,t),c=console.warn.bind(console,t),s=console.error.bind(console,t),u=n.bind(null,mn.DEBUG),l=n.bind(null,mn.LOG),d=n.bind(null,mn.WARN),f=n.bind(null,mn.ERROR);e.debug=u,e.log=l,e.warn=d,e.error=f,e.enabled=function(){return r},e.toggle=function(t){r=t,dn.debugLog&&$t(),t?(e.debug=dn.debugLog?a(i,mn.DEBUG):i,e.log=dn.debugLog?a(o,mn.LOG):o,e.warn=dn.debugLog?a(c,mn.WARN):c,e.error=dn.debugLog?a(s,mn.ERROR):s):(e.debug=dn.debugLog?a(u,mn.DEBUG):u,e.log=dn.debugLog?a(l,mn.LOG):l,e.warn=dn.debugLog?a(d,mn.WARN):d,e.error=dn.debugLog?a(f,mn.ERROR):f)},e.send=function(t,...n){switch(t){case mn.DEBUG:e.debug(...n);break;case mn.LOG:e.log(...n);break;case mn.WARN:e.warn(...n);break;case mn.ERROR:e.error(...n)}}}(vn||(vn={}));var bn,_n=vn,yn="_okcls_",En=(()=>{try{let e=Date.now().toString(),t=window.localStorage,n=!1;return t.setItem(e,e),n=t.getItem(e)===e,t.removeItem(e),n?t:null}catch(e){return null}})();!function(e){e.get=function(e){return function(e){let t=En?En.getItem(yn+e):null;if(null===t)return null;try{return JSON.parse(t)}catch(e){return null}}(e)||null},e.set=function(e,t){!function(e,t){try{En&&En.setItem(yn+e,JSON.stringify(t))}catch(e){}}(e,t)},e.remove=function(e){!function(e){En&&En.removeItem(yn+e)}(e)}}(bn||(bn={}));var On,wn,Cn,Sn,An=bn,kn=null,jn=null,Tn=[],In=[],Pn=[],Dn=null,Nn=null,xn=null,Rn=!1,Mn=!1,Ln=!1,Bn=!1,Fn=null,Hn="",Vn=[],Un=null,zn=navigator.appVersion,Gn=navigator.appName,Wn=navigator.userAgent;!function(e){e.USER="user",e.ENVIRONMENT="environment",e.LEFT="left",e.RIGHT="right"}(Sn||(Sn={}));var qn,Kn=class{constructor(e,t=!1,n=dn.videoMaxWidth,r=dn.videoMaxHeight){let a=!1;if(e){let t;a={noiseSuppression:dn.noiseSuppression,echoCancellation:!0,autoGainControl:!0},Nn&&(t=Nn.deviceId),"string"==typeof e&&(t=e),t&&(a.deviceId={exact:t})}let i=!1;if(t){let e;i={width:{min:dn.videoMinWidth,max:n,ideal:n},height:{min:dn.videoMinHeight,max:r,ideal:r},aspectRatio:{ideal:dn.videoAspectRatio},frameRate:{ideal:dn.videoFrameRate}},Dn&&(e=Dn.deviceId),"string"==typeof t&&(e=t),e&&(i.deviceId={exact:e}),dn.videoFacingMode&&(i.facingMode={exact:dn.videoFacingMode})}this.audio=a,this.video=i,this.needVideo=!!i}getNative(){return Object.assign({},{audio:this.audio,video:this.video})}simplify(){return"object"==typeof this.video&&(this.video.width||this.video.height?(delete this.video.width,delete this.video.height):this.video.aspectRatio?delete this.video.aspectRatio:this.video.frameRate?delete this.video.frameRate:(this.video.deviceId||this.video.facingMode)&&(delete this.video.deviceId,delete this.video.facingMode)),"object"==typeof this.audio&&(this.audio.echoCancellation||this.audio.autoGainControl||this.audio.noiseSuppression?(delete this.audio.echoCancellation,delete this.audio.autoGainControl,delete this.audio.noiseSuppression):this.audio.deviceId&&delete this.audio.deviceId),!0===this.video&&!0===this.audio?this.video=!1:!1===this.video&&!0===this.audio?(this.audio=!1,this.video=this.needVideo):!0===this.video&&!1===this.audio&&(this.video=!1),this.video&&!Object.keys(this.video).length&&(this.video=!0),this.audio&&!Object.keys(this.audio).length&&(this.audio=!0),this}canSimplify(){let e="object"==typeof this.video&&(this.video.width||this.video.height||this.video.aspectRatio||this.video.frameRate||this.video.facingMode||this.video.deviceId)||this.video;return!!("object"==typeof this.audio&&(this.audio.deviceId||this.audio.noiseSuppression||this.audio.echoCancellation||this.audio.autoGainControl)||this.audio||e)}isVideo(){return!!this.video}isAudio(){return!!this.audio}},Yn=class extends Kn{constructor(e,t){super(!1,!0),"object"==typeof this.video?(delete this.video.deviceId,delete this.video.aspectRatio,delete this.video.frameRate,delete this.video.facingMode):this.video={},this.video.cursor="motion",this.video.width=e,this.video.height=t,this.video.frameRate=dn.screenFrameRate}};function Zn(){kn=null,Qn().then(()=>gn.onDeviceChange())}function Qn(){return Xe(this,null,(function*(){return kn||(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?(!jn&&navigator.mediaDevices.addEventListener&&(jn=dr.throttle(Zn,1e3),navigator.mediaDevices.addEventListener("devicechange",jn)),kn=navigator.mediaDevices.enumerateDevices().then(e=>{Tn=e.filter(e=>"videoinput"===e.kind&&(e.label&&(Rn=!0),!0)),In=e.filter(e=>"audioinput"===e.kind&&(e.label?Mn=!0:qn.isMobile()&&"Firefox"===qn.browserName()&&(Mn=Rn),!0)),Pn=e.filter(e=>"audiooutput"===e.kind);let t=An.get("videoinput"),n=An.get("audioinput"),r=An.get("audiooutput");return Dn=Tn.find(e=>e.deviceId===t)||null,Nn=In.find(e=>e.deviceId===n)||null,xn=Pn.find(e=>e.deviceId===r)||null,kn=Promise.resolve(e),e}).catch(()=>(kn=null,[]))):[])}))}function Jn(e,t){return Xe(this,null,(function*(){_n.debug("Try to get media",e.getNative());let n=qn.hasPermissions(e.isVideo());!n&&!t&&gn.onPermissionsRequested();try{let t=yield navigator.mediaDevices.getUserMedia(e.getNative());return n||(yield function(){return Xe(this,null,(function*(){kn=null,yield Qn()}))}()),t}catch(n){switch(n.name){case"PermissionDeniedError":case"PermissionDismissedError":case"NotAllowedError":case"SecurityError":case"DOMException":t=e.isVideo()?gt.CAMERA_PERMISSION:gt.MIC_PERMISSION;break;case"OverconstrainedError":case"TypeError":case"NotFoundError":break;case"AbortError":case"NotReadableError":t=e.isVideo()?gt.CAMERA_ACCESS:gt.MIC_ACCESS}if(e.canSimplify())return Jn(e.simplify(),t);let r=t||gt.UNKNOWN;throw gn.onPermissionsError(r),r}}))}function Xn(){return Vn.length||(Vn=(()=>{let e,t=!1,n=0,r=Wn.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(r[1]))return e=/\brv[ :]+(\d+)/g.exec(Wn),["IE",e&&e[1]||"Unknown",t,n];if("Safari"===r[1]){if(e=Wn.match(/\bEdge\/(\d+)/),e)return["Edge",e[1]||"Unknown",t,n];if(e=Wn.match(/\bCriOS\/(\d+)/),e)return["Chrome",e[1],!0,e[1]];if(e=Wn.match(/\bFxiOS\/(\d+)/),e)return["Firefox",e[1],!1,n];if(e=Wn.match(/\bYaBrowser\/(\d+)/),e)return["Yandex",e[1],!1,n];if(e=Wn.match(/\bOPT\/(\d+)/),e)return["Opera",e[1],!1,n]}if("Chrome"===r[1]){if(t=!0,n=Number(r[2]),e=Wn.match(/\bOPR\/(\d+)/),e)return["Opera",e[1]||"Unknown",t,n];if(e=Wn.match(/\bYaBrowser\/(\d+)/),e)return["Yandex",e[1]||"Unknown",t,n];if(e=Wn.match(/\bSferum\/((\d+)(?:\.\d+)*)/),e)return["Sferum",e[1]||"Unknown",t,n];if(e=Wn.match(/\bEdge?\/(\d+)/),e)return["Edge",e[1]||"Unknown",t,n];if(void 0!==window.opr&&/^(.+\.)?ok.ru$/.test(window.location.host))return["Opera","Hidden",t,n]}return e=Wn.match(/version\/(\d+)/i),[r[2]?r[1]:Gn,e&&e[1]||r[2]||zn,t,n]})()),Vn}!function(e){function t(){return Tn.length>0}function n(){return In.length>0}function r(){return Rn}function a(){return Mn}function i(){if(!Cn||"ended"===Cn.readyState){let e=u(),t=e.createMediaStreamDestination(),n=e.createGain();n.gain.value=1e-5,n.connect(t),n.connect(e.destination);let r=e.createOscillator();r.type="sine",r.frequency.value=0,r.connect(n),r.start(),Cn=t.stream.getAudioTracks()[0]}return Object.assign(Cn.clone(),{enabled:!1})}function o(e=dn.videoMinWidth,t=dn.videoMinHeight){return wn||(wn=document.createElement("canvas")).getContext("2d"),wn.width=e,wn.height=t,(!On||"ended"===On.readyState)&&(On=wn.captureStream(dn.videoFrameRate).getVideoTracks()[0]),Object.assign(On.clone(),{enabled:!1})}function c(){return Xn()[0]}function s(){return Xn()[1]}function u(){return Un||(Un=new(window.AudioContext||window.webkitAudioContext)),Un}e.init=function(){return Xe(this,null,(function*(){return yield function(){return Xe(this,null,(function*(){return qn.isBrowserSupported()?new Promise(e=>{(new window.RTCPeerConnection).createOffer({offerToReceiveVideo:!0}).then(t=>{/^a=rtpmap:\d+ VP8\/\d+$/m.test(t.sdp)&&(Ln=!0),/^a=mid:0$/m.test(t.sdp)&&(Bn=!0),e()}).catch(e)}):Promise.resolve()}))}(),Qn()}))},e.getCameras=function(){return Tn},e.getMicrophones=function(){return In},e.getOutput=function(){return Pn},e.hasCamera=t,e.hasMicrophone=n,e.getSavedCamera=function(){return Dn},e.getSavedMicrophone=function(){return Nn},e.getSavedOutput=function(){return xn},e.hasCameraPermission=r,e.hasMicrophonePermission=a,e.hasPermissions=function(e=!1){return!!a()&&(!t()||!e||r())},e.getUserMedia=function(e=!1,r=!0){return Xe(this,null,(function*(){let a,c=n()&&r,s=t()&&e;if(c||s)try{a=yield Jn(new Kn(c,s))}catch(e){a=new MediaStream}else a=new MediaStream;return a.getVideoTracks().length||a.addTrack(o()),a.getAudioTracks().length||a.addTrack(i()),a}))},e.getScreenMedia=function(){return Xe(this,null,(function*(){return function(e){return Xe(this,null,(function*(){_n.debug("Try to get screen",e.getNative());try{let t=yield navigator.mediaDevices.getDisplayMedia(e.getNative()),n=null==t?void 0:t.getVideoTracks()[0];return n&&(_n.debug("Got display media track",n.id),n.contentHint="text"),t}catch(e){switch(e.name){case"PermissionDeniedError":case"NotAllowedError":case"SecurityError":throw gt.SCREEN_PERMISSION;default:throw gt.SCREEN_ACCESS}}}))}(new Yn(window.screen.width,window.screen.height))}))},e.getUserVideo=function(e,t=!1){return Xe(this,null,(function*(){let n=t?dn.videoEffectMaxWidth:dn.videoMaxWidth,r=t?dn.videoEffectMaxHeight:dn.videoMaxHeight;return Jn(new Kn(!1,e||!0,n,r))}))},e.getUserAudio=function(e){return Xe(this,null,(function*(){return Jn(new Kn(e||!0,!1))}))},e.saveDeviceId=function(e,t){return Xe(this,null,(function*(){let n=(yield Qn()).find(n=>n.kind===e&&n.deviceId===t);return n?("videoinput"===e?Dn=n:"audioinput"===e?Nn=n:"audiooutput"===e&&(xn=n),An.set(e,t),n):null}))},e.getSilentMediaTrack=i,e.getBlackMediaTrack=o,e.isBrowserSupported=function(){if("Edge"===c()&&s()<70)return!1;try{let e=window;return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&e.RTCPeerConnection&&e.RTCIceCandidate&&e.RTCSessionDescription&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.captureStream&&e.RTCRtpSender&&e.RTCRtpSender.prototype.replaceTrack&&e.RTCRtpSender.prototype.getParameters&&navigator.sendBeacon)}catch(e){return!1}},e.isScreenCapturingSupported=function(){return!!navigator.mediaDevices.getDisplayMedia},e.canVP8=function(){return Ln},e.isUnifiedPlan=function(){return Bn},e.isBrokenH264=function(){return"Opera"===e.browserName()&&"Windows"===e.os()},e.canPreferH264=function(){return!(e.baseChromeVersion()&&e.isMobile())},e.os=function(){return Hn||(Hn=(()=>{let e={Windows:/Win/,Android:/Android/,OpenBSD:/OpenBSD/,SunOS:/SunOS/,Linux:/(Linux|X11)/,iPad:/(iPad)/,iPhone:/(iPhone)/,iPod:/(iPod)/,MacOS:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh|Mac OS X)/,QNX:/QNX/,UNIX:/UNIX/,BeOS:/BeOS/,OS2:/OS\/2/,Bot:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/};for(let t in e)if(e.hasOwnProperty(t)&&e[t].test(Wn))return t;return"Unknown"})()),Hn},e.isMobile=function(){return null===Fn&&(Fn=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(zn)),Fn},e.browserName=c,e.browserVersion=s,e.baseChromeVersion=function(){return Xn()[3]},e.getAudioContext=u}(qn||(qn={}));var $n=qn;function er(e,t){if(e.isAudioEnabled!==t.isAudioEnabled||e.isVideoEnabled!==t.isVideoEnabled||e.isScreenSharingEnabled!==t.isScreenSharingEnabled||e.videoStreams.length!==t.videoStreams.length)return!1;for(let n of e.videoStreams)if(!t.videoStreams.find(e=>e.name===n.name&&e.source===n.source))return!1;return!0}function tr(e){return Object.assign({isAudioEnabled:!1,isVideoEnabled:!1,isScreenSharingEnabled:!1,videoStreams:[]},e||{})}var nr,rr,ar=class extends Error{constructor(e,t){super(),this.name="HangupReason",this.code=t&&t.code||0,this.remote=t&&t.remote||!1,Object.values(_t).indexOf(e)>-1?this.hangup=e:this.error=e;let n=[];this.error&&n.push("error"),this.remote&&n.push("remote"),this.code&&n.push("code: "+this.code),t&&t.message&&n.push(`message: '${t.message}'`),this.message=e+(n.length?` (${n.join(", ")})`:""),Error.captureStackTrace&&Error.captureStackTrace(this,ar)}},ir=class extends et{constructor(e,t){super(),this._batchInterval=3e3,this._batch=[],this._batchTimeout=null,this._api=e,this._externalLogger=t}_send(e){this._api.log(e)}_sendBatch(){this._stopTimeout(),this._batch.length>0&&(this._send(this._batch),this._batch=[],this._startTimeout())}_startTimeout(){this._batchTimeout=window.setTimeout(()=>this._sendBatch(),this._batchInterval)}_stopTimeout(){this._batchTimeout&&(clearTimeout(this._batchTimeout),this._batchTimeout=null)}_onUnload(){this._sendBatch(),this._stopTimeout()}log(e,t,n=!1){let r={type:1,time:0,operation:e,timestamp:Date.now(),custom:{},uid:this._api.getUserId()};void 0!==t&&(r.custom.param=t),this._batch.push(r),(n||!this._batchTimeout)&&this._sendBatch(),this._externalLogger&&this._externalLogger.log(e,t,n)}destroy(){this._sendBatch(),this._stopTimeout(),this._externalLogger&&this._externalLogger.destroy()}static create(e,t){ir._instance||(ir._instance=new ir(e,t))}static log(e,t,n=!1){ir._instance&&ir._instance.log(e,t,n)}static destroy(){ir._instance&&ir._instance.destroy(),ir._instance=null}};!function(e){e.SOURCE_CHANGED="SOURCE_CHANGED",e.TRACK_REPLACED="TRACK_REPLACED",e.SCREEN_STATUS="SCREEN_STATUS"}(nr||(nr={})),function(e){e.audio="audio",e.video="video",e.screen="screen"}(rr||(rr={}));var or,cr=class extends tt{constructor(){super(),this._stream=null,this._screenTrack=null,this._sendVideoTrack=null,this._mediaSettings=tr(),this._videoStatusOnScreenCapturingEnabled=!1,this._effect=null,this._initDeviceChangeListener()}request(){return Xe(this,arguments,(function*(e=[Et.AUDIO]){if(this._stream)return;let t=e.includes(Et.VIDEO),n=e.includes(Et.AUDIO);if(!$n.isBrowserSupported())throw new ar(gt.UNSUPPORTED);try{this._stream=yield $n.getUserMedia(t,n),this._mediaSettings.isVideoEnabled=t&&this._stream.getVideoTracks().filter(e=>e.enabled).length>0||!1,this._mediaSettings.isAudioEnabled=n&&this._stream.getAudioTracks().filter(e=>e.enabled).length>0||!1}catch(e){throw new ar(e)}}))}getStream(){return this._stream}getScreenTrack(){return this._screenTrack}getSendVideoTrack(e=!1){return this._sendVideoTrack&&!e?this._sendVideoTrack:this._stream?this._stream.getVideoTracks()[0]:null}_getSendAudioTrack(){var e;return(null==(e=this._stream)?void 0:e.getAudioTracks()[0])||null}addTrackToPeerConnection(e,t=!1){let n=this.getStream(),r=this._getSendAudioTrack(),a=this.getSendVideoTrack(t);if(!n||!r&&!a)throw new Error("No local stream found");r&&e.addTrack(r,n),a&&e.addTrack(a,n)}getMediaSettings(){return this._mediaSettings}changeDevice(e){return Xe(this,null,(function*(){switch(e){case"videoinput":return this._changeVideoInput();case"audioinput":return this._changeAudioInput();default:return Promise.reject()}}))}setVideoStream(e,t){return Xe(this,null,(function*(){return t?this._changeScreen(e):this._changeVideoInput(e)}))}_initDeviceChangeListener(){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices||!navigator.mediaDevices.addEventListener)return;let e=!1,t=!1,n=dr.throttle(()=>{t&&this._changeVideoInput().catch(()=>{}),e&&this._changeAudioInput().catch(()=>{}),e=!1,t=!1},1e3);navigator.mediaDevices.addEventListener("devicechange",()=>Xe(this,null,(function*(){if(!this._stream)return;let r=this._stream.getAudioTracks()[0],a=r&&r.enabled&&r.getSettings(),i=a&&a.groupId,o=this._stream.getVideoTracks()[0],c=o&&o.enabled&&o.getSettings(),s=c&&c.groupId;if(!i&&!s)return;let u=yield navigator.mediaDevices.enumerateDevices();!e&&i&&(e=!u.find(e=>e.groupId===i)),!t&&s&&(t=!u.find(e=>e.groupId===s)),n()})))}_changeVideoInput(e=null){return Xe(this,null,(function*(){try{let t=e?"stream":"video";if(e=e||(yield $n.getUserVideo(void 0,!!this._effect)),this._stream){dn.consumerScreenTrack||this._disableScreenCapture();let n=yield this._videoEffect(this._effect,e.getVideoTracks()[0]);this._stopLocalTrack(rr.video),ir.log(Mt.DEVICE_CHANGED,t),_n.log("Video stream changed"),yield this._replaceLocalTrack(n),this._mediaSettings.isVideoEnabled=!0,this._triggerEvent(nr.SOURCE_CHANGED,{kind:rr.video,mediaSettings:this._mediaSettings})}else e.getTracks().forEach(e=>e.stop())}catch(e){throw ir.log(Mt.ERROR,"change_video"),_n.warn("Camera change failed",e),e}}))}setAudioStream(e){return Xe(this,null,(function*(){return this._changeAudioInput(e)}))}_changeAudioInput(e=null){return Xe(this,null,(function*(){try{if(e=e||(yield $n.getUserAudio()),this._stream){let t=e.getAudioTracks()[0];this._stopLocalTrack(rr.audio),ir.log(Mt.DEVICE_CHANGED,"audio"),_n.log("Audio stream changed"),yield this._replaceLocalTrack(t),this._mediaSettings.isAudioEnabled=!0,this._triggerEvent(nr.SOURCE_CHANGED,{kind:rr.audio,mediaSettings:this._mediaSettings})}else e.getTracks().forEach(e=>e.stop())}catch(e){throw ir.log(Mt.ERROR,"change_audio"),_n.error("Microphone change failed",e),e}}))}_changeScreen(e){return Xe(this,null,(function*(){try{if((e=e||(yield $n.getScreenMedia())).addEventListener("inactive",()=>{this._mediaSettings.isScreenSharingEnabled&&this.toggleScreenCapturing(!1)},!1),this._stream){let t=e.getVideoTracks()[0],n=dn.consumerScreenTrack?t:yield this._videoEffect(null,t);ir.log(Mt.DEVICE_CHANGED,"screen"),_n.log("Screen capturing started"),this._screenTrack=n,this._mediaSettings.isScreenSharingEnabled=!0,dn.consumerScreenTrack||(this._videoStatusOnScreenCapturingEnabled=this._mediaSettings.isVideoEnabled,this._mediaSettings.isVideoEnabled=!0,this._stopLocalTrack(rr.video),this._sendVideoTrack=dn.consumerScreenDataChannel?$n.getBlackMediaTrack(dn.videoMinWidth,dn.videoMinHeight):n,yield this._replaceLocalTrack(n,this._sendVideoTrack)),this._triggerEvent(nr.SCREEN_STATUS,{track:n,mediaSettings:this._mediaSettings}),this._triggerEvent(nr.SOURCE_CHANGED,{kind:rr.screen,mediaSettings:this._mediaSettings})}else e.getTracks().forEach(e=>e.stop())}catch(e){throw ir.log(Mt.ERROR,"screen"),_n.warn("Screen capturing failed",e),e}}))}_disableScreenCapture(){this._sendVideoTrack&&(this._sendVideoTrack.stop(),this._sendVideoTrack=null),this._screenTrack&&(this._screenTrack.stop(),this._screenTrack=null),this._mediaSettings.isScreenSharingEnabled&&(this._mediaSettings.isScreenSharingEnabled=!1,this._triggerEvent(nr.SCREEN_STATUS,{mediaSettings:this._mediaSettings}),this._triggerEvent(nr.SOURCE_CHANGED,{kind:rr.screen,mediaSettings:this._mediaSettings}))}_replaceLocalTrack(e,t){return Xe(this,null,(function*(){!this._stream||this._stream.getTracks().forEach(n=>{var r,a;n.kind===e.kind&&(null==(r=this._stream)||r.removeTrack(n),null==(a=this._stream)||a.addTrack(e),this._triggerEvent(nr.TRACK_REPLACED,e,t))})}))}_stopLocalTrack(e){this._stream&&this._stream.getTracks().forEach(t=>{t.kind===e&&t.stop()})}_videoEffect(e,t){return Xe(this,null,(function*(){if(!dn.videoEffects)return t;try{return ir.log(Mt.DEVICE_CHANGED,"effect_"+e),dn.videoEffects.setEffect(e,t)}catch(e){return _n.warn("Video effect failed",e),t}}))}destroy(){dn.videoEffects&&(this._effect=null,dn.videoEffects.stopEffect()),this._stream&&(this._stream.getTracks().forEach(e=>e.stop()),this._stream=null),this._disableScreenCapture()}toggleScreenCapturing(e){return Xe(this,null,(function*(){return e?this._changeScreen():dn.consumerScreenTrack?this._disableScreenCapture():this._videoStatusOnScreenCapturingEnabled?this._changeVideoInput():this.toggleVideo(!1)}))}toggleVideo(e){return Xe(this,null,(function*(){if(!this._stream)return;let t;dn.consumerScreenTrack||this._disableScreenCapture(),e?(t=(yield $n.getUserVideo(void 0,!!this._effect)).getVideoTracks()[0],t=yield this._videoEffect(this._effect,t)):(t=$n.getBlackMediaTrack(dn.videoMinWidth,dn.videoMinHeight),t=yield this._videoEffect(null,t)),this._stopLocalTrack(rr.video),yield this._replaceLocalTrack(t),this._mediaSettings.isVideoEnabled=e,this._triggerEvent(nr.SOURCE_CHANGED,{kind:rr.video,mediaSettings:this._mediaSettings})}))}toggleAudio(e){return Xe(this,null,(function*(){if(!this._stream)return;let t;t=e?(yield $n.getUserAudio()).getAudioTracks()[0]:$n.getSilentMediaTrack(),this._stopLocalTrack(rr.audio),yield this._replaceLocalTrack(t),this._mediaSettings.isAudioEnabled=e,this._triggerEvent(nr.SOURCE_CHANGED,{kind:rr.audio,mediaSettings:this._mediaSettings})}))}setResolution(e,t){return Xe(this,null,(function*(){if(!dn.consumerScreenTrack&&this._mediaSettings.isScreenSharingEnabled)return;if(!this._stream)throw new Error("Local stream not found");let n=this._stream.getVideoTracks()[0];if(!n)throw new Error("Local video track not found");return n.enabled?n.applyConstraints({width:{ideal:e},height:{ideal:t}}):void 0}))}updateNoiseSuppression(){return Xe(this,null,(function*(){if(!this._stream||!this._mediaSettings.isAudioEnabled)return;let e=this._stream.getAudioTracks()[0];if(!e)throw new Error("Local audio track not found");return e.enabled?e.applyConstraints({noiseSuppression:dn.noiseSuppression}):void 0}))}videoEffect(e){return Xe(this,null,(function*(){if(!dn.videoEffects)throw new Error("Video Effects library is not set");if(!dn.consumerScreenTrack&&this._mediaSettings.isScreenSharingEnabled)throw new Error("Can't apply effect to screensharing");if(this._mediaSettings.isVideoEnabled)return this._stream&&e!==this._effect?(this._effect=e,this._changeVideoInput()):void 0;this._effect=e}))}};!function(e){e.patchSDP=function(e,t,n,r,a=!1){let i=/[\r\n]+/,o="\r\n";if(!t&&!n&&!r)return a?c(e.split(i)).join(o):e;function c(e){let t=e.findIndex(e=>e.startsWith("a=rtcp-fb:111"));return~t&&(e[t]=e[t]+o+["a=rtcp-fb:111 nack","a=rtcp-fb:111 nack pli"].join(o)),e}function s(e,t,n){let r,a=e.split(" "),i=a.slice(0,3);for(r=3;r<a.length;r++)n.includes(a[r])&&i.push(a[r]);for(r=3;r<a.length;r++)!n.includes(a[r])&&!t.includes(a[r])&&i.push(a[r]);return i.join(" ")}function u(e,t){let n,r=new RegExp("a=rtpmap:(\\d+) ([a-zA-Z0-9-]+)\\/\\d+"),a=[];for(n=0;n<e.length;++n){let i=e[n].match(r);i&&3===i.length&&i[2]===t&&a.push(i[1])}return a}function l(e,t,n,r){let a,i="m="+t;for(a=0;a<e.length;++a)if(e[a].startsWith(i)){e[a]=s(e[a],n,r);break}}let d=[],f=e.split(i);(n||t)&&(d=u(f,"H264"));let p=[];if(r&&(p=u(f,"VP9")),n){let e,t=d.slice(0),n=new RegExp("a=fmtp:(\\d+) apt=(\\d+)");for(e=0;e<f.length;++e){let r=f[e].match(n);r&&3===r.length&&t.includes(r[2])&&t.push(r[1])}let r=new RegExp("a=(rtpmap|rtcp-fb|fmtp):(\\d+) .*");for(e=f.length;e--;){let n=f[e].match(r);n&&3===n.length&&t.includes(n[2])&&f.splice(e,1)}l(f,"video",t,[])}else t&&l(f,"video",[],d);return r&&l(f,"video",[],p),a&&c(f),f.join(o)},e.getPeerIdString=function(e){return e?`${e.type||"WEB_SOCKET"}_${e.id}`:"_"},e.comparePeerId=function(e,t){return e&&e.id===t.id&&(e.type||"WEB_SOCKET")===(t.type||"WEB_SOCKET")},e.getPeerConnectionHostInfo=function(e){return Xe(this,null,(function*(){return e&&e.getStats?e.getStats(null).then(e=>{let t=null,n=null;if(e.forEach(t=>{"transport"===t.type&&t.selectedCandidatePairId?n=e.get(t.selectedCandidatePairId):"candidate-pair"===t.type&&"succeeded"===t.state&&!n&&(!t.hasOwnProperty("selected")||t.selected)&&(n=t)}),n&&n.localCandidateId){let r=e.get(n.localCandidateId);r&&(t={type:r.candidateType,ip:r.ip||r.ipAddress,port:r.port||r.portNumber})}return t}).catch(()=>null):Promise.resolve(null)}))};let t=/^[0-9]+$/,n=/^([gu])([0-9]+)$/;function r(e,r){let a=String(e);return n.test(a)?(_n.warn(`Already composite id [${e}] type supplied [${r}]`),a):r===Wt.GROUP?"g"+a:r===Wt.USER?"u"+a:(_n.warn(`Unknown type [${r}] for id [${e}]`),a.match(t)?"u"+a:a)}function a(e){return r(e.id,e.idType||Wt.USER)}function i(e,t,n,r,a){if(e&&n&&n.kind===rr.video){let i=n.getSettings();if(i){let o=e.maxBitrateK?1024*e.maxBitrateK:null,c=i.width,s=i.height,u=c&&s&&e.maxDimension?Math.max(1,Math.max(c,s)/e.maxDimension):null,l=e.maxFramerate?e.maxFramerate:null,d=e.degradationPreference?e.degradationPreference:"balanced",f=r[n.id];if(f&&f.bitrate===o&&f.scaleResolutionDownBy===u&&f.maxFramerate===l&&f.degradationPreference===d)return void(a[n.id]=f);a[n.id]={bitrate:o,scaleResolutionDownBy:u,maxFramerate:l,degradationPreference:d};let p=t.getParameters();p.encodings||(p.encodings=[{}]),p.encodings.forEach(e=>{o?e.maxBitrate=o:delete e.maxBitrate,u?e.scaleResolutionDownBy=u:delete e.scaleResolutionDownBy,l?e.maxFramerate=l:delete e.maxFramerate}),p.degradationPreference=d,t.setParameters(p)}}}e.composeId=r,e.composeParticipantId=a,e.composeMessageId=function(e){return e.participant?a(e.participant):r(e.participantId,e.participantType||Wt.USER)},e.decomposeId=function(e){let t=String(e),r=t.match(n);return r?{id:Number(r[2]),type:"g"===r[1]?Wt.GROUP:Wt.USER}:(_n.warn(`Unsupported compositeId [${e}]`),{id:Number(t),type:Wt.USER})},e.uuid=function(){let e,t,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=new Array(36),a=0;for(t=0;t<36;t++)8===t||13===t||18===t||23===t?r[t]="-":14===t?r[t]="4":(a<=2&&(a=33554432+16777216*Math.random()|0),e=15&a,a>>=4,r[t]=n[19===t?3&e|8:e]);return r.join("")},e.throttle=function(e,t){let n;return function(){let r=this,a=arguments;n&&window.clearTimeout(n),n=window.setTimeout(()=>{e.apply(r,a)},t)}},e.sdpFingerprint=function(e){let t="",n=e.split("\n");for(let e of n)if(e.startsWith("a=fingerprint")){let n=e.split(" ");if(2===n.length){t=n[1];break}}if(!t)return he.a.minusOne;let r=t.split(":"),a=he.a.zero;for(let e=Math.min(7,r.length-1);e>=0;e--){let t=he()(r[e],16);a=a.shiftLeft(8).or(t)}return((e,t)=>{let n=t.value;if("bigint"==typeof n)return he()(BigInt.asIntN(64,n));let r=he.a.one.shiftLeft(64),a=t.and(r.subtract(1));return a.greaterOrEquals(r.subtract(a))?a.subtract(r):a})(0,a)},e.delay=function(e){return Xe(this,null,(function*(){return new Promise(t=>window.setTimeout(t,e))}))},e.applySettings=function(e,t,n){let r=[];return e.getSenders().forEach(e=>i(t,e,e.track,n,r)),r},e.applyVideoTrackSettings=i,e.includesOneOf=function(e,t){Array.isArray(t)||(t=[t]);for(let n of t)if(e.includes(n))return!0;return!1},e.mapParticipantState=function(e){var t;return Object.entries((null==(t=e.participantState)?void 0:t.state)||{}).reduce((t,[n,r])=>(e.participantState&&(t[n]={ts:e.participantState.stateUpdateTs[n],state:r}),t),{})},e.mapLegacyParticipantState=function(e){return Object.entries(e).reduce((e,[t,{state:n}])=>(e[t]=n,e),{})},e.mapSharedParticipants=function(e){return e.map(e=>{let t={uid:e.externalId,mediaSettings:e.mediaSettings,status:e.status};return dn.participantStateMapped&&(t.participantState=e.participantState),t})},e.isEqualParticipantState=function(e,t){let n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let a of n)if(!r.hasOwnProperty(a)||e[a].state!==t[a].state||e[a].ts!==t[a].ts)return!1;return!0}}(or||(or={}));var sr,ur,lr,dr=or;!function(e){e.USER="USER",e.ANONYM="ANONYM",e.GROUP="GROUP"}(sr||(sr={})),function(e){function t(e,t=sr.USER){return{id:e,type:t}}function n(e){return`{"id":"${e.id}","type":"${e.type}"}`}e.fromIds=function(e){return e.length?"object"==typeof e[0]?e:e.map(e=>t(e)):[]},e.fromId=t,e.fromSignaling=function(e){return{id:e.id,type:"ANONYM"===e.type?sr.ANONYM:sr.USER}},e.toString=n,e.fromIdToString=function(e,r=sr.USER){return n(t(e,r))},e.fromString=function(e){try{return JSON.parse(e)}catch(t){throw new Error(`Failed to parse ExternalId from string '${e}'`)}},e.compare=function(e,t){return e.id===t.id&&e.type===t.type}}(ur||(ur={})),function(e){e.CAMERA="CAMERA",e.SCREEN="SCREEN",e.STREAM="STREAM",e.MOVIE="MOVIE"}(lr||(lr={}));function fr(e){return e.participantId+(e.mediaType?":s"+e.mediaType:"")+(e.streamName?":m"+e.streamName:"")}function pr(e){let t=e.split(":"),n=t.shift();if(!n)throw new Error("Illegal stream description: "+e);let r={participantId:n,mediaType:null};for(let n of t)switch(n.charAt(0)){case"s":r.mediaType=hr(n.slice(1));break;case"m":r.streamName=n.slice(1);break;default:throw new Error("Unexpected parameter type "+n.charAt(0)+" in stream description "+e)}return r}function hr(e){for(let t of Object.keys(lr))if(t===e)return lr[t];return null}function mr(e,t){return null===e||null===t?null===e&&null===t:!(e.maxDimension!==t.maxDimension||e.maxBitrateK!==t.maxBitrateK||e.maxFramerate!==t.maxFramerate||e.degradationPreference!==t.degradationPreference)}function vr(e,t){return!(!mr(e.camera,t.camera)||!mr(e.screenSharing,t.screenSharing))}function gr(e,t){return{camera:Object.assign({},e.camera,t.camera),screenSharing:Object.assign({},e.screenSharing,t.screenSharing)}}var br=class{constructor(e){this._fixNoPacketsApplied=!1,this._fixNoPacketsChecked=!1,this._fixTooManyPacketsApplied=!1,this._fixTooManyPacketsSucceeded=!1,this._fixTooManyPacketsFailed=!1,this._mediaSource=e}_fixAudioDeviceNoPackets(e){if(!this._fixNoPacketsApplied||!this._fixNoPacketsChecked){if(this._fixNoPacketsApplied&&!this._fixNoPacketsChecked)return this._fixNoPacketsChecked=!0,void ir.log(Mt.ERROR,"audio_device_recover_"+(e.bandwidth?"success":"fail"));!this._fixNoPacketsApplied&&!e.bandwidth&&(this._fixNoPacketsApplied=!0,ir.log(Mt.ERROR,"audio_device_recover"),this._mediaSource.toggleAudio(!0))}}_fixAudioDeviceTooManyPackets(e){if(this._fixTooManyPacketsSucceeded||this._fixTooManyPacketsFailed)return;let t=Date.now();if(this._lastPacketsSentTime){if(t-this._lastPacketsSentTime>500){let n=1e3*(e.packetsSent-this._lastPacketsSent)/(t-this._lastPacketsSentTime);this._lastPacketsSentTime=t,this._lastPacketsSent=e.packetsSent,this._fixTooManyPacketsApplied?n>75?(_n.log("Failed to fix RV"),ir.log(Mt.ERROR,"audio_device_recover_rv_fail"),this._fixTooManyPacketsFailed=!0):t-this._fixTooManyPacketsTime>6e4&&(_n.log("Fixed RV"),ir.log(Mt.ERROR,"audio_device_recover_rv_success"),this._fixTooManyPacketsSucceeded=!0):n>75&&(this._fixTooManyPacketsApplied=!0,_n.log("Trying to fix RV"),this._mediaSource.toggleAudio(!0),this._fixTooManyPacketsTime=t)}}else e.packetsSent>0&&(this._lastPacketsSentTime=t,this._lastPacketsSent=e.packetsSent)}fix(e){if(!this._mediaSource)return;let t=e.find(e=>e.kind===rr.audio);!t||(this._fixAudioDeviceNoPackets(t),this._fixAudioDeviceTooManyPackets(t))}},_r=class extends tt{constructor(){super(...arguments),this._lastMemoryStat={percent:0,bytes:0}}onRemoteDataStats(e,t){this._calcMemory(),e.inbound.rtps.map(e=>{let n="string"==typeof e.userId&&t[e.userId]||null;e.userId=null==n?void 0:n.externalId}),gn.onStatistics(e,this._lastMemoryStat)}_calcMemory(){var e;let t=null==(e=null==window?void 0:window.performance)?void 0:e.memory;if(!t||!t.usedJSHeapSize||!t.jsHeapSizeLimit)return;let n=Number((100*t.usedJSHeapSize/t.jsHeapSizeLimit).toFixed(2)),r=Number((t.usedJSHeapSize/1024/1024).toFixed(1));n>90?_n.warn(`High memory usage: ${n}% (${r} MiB)`):(!this._lastMemoryStat.percent||Math.abs(n-this._lastMemoryStat.percent)>=3)&&(_n.debug(`Memory usage: ${n}% (${r} MiB)`),this._lastMemoryStat.percent=n,this._lastMemoryStat.bytes=t.usedJSHeapSize)}},yr=class{constructor(e,t){this._analyser=null,this._gainNode=null,this._fftBins=null,this._mediaStreamSource=null,this._lastSmoothedLevel=0,this._trackId=e,this._stream=t;try{let e=$n.getAudioContext();this._gainNode=e.createGain(),this._gainNode.gain.value=1e-5,this._gainNode.connect(e.destination),this._analyser=e.createAnalyser(),this._analyser.fftSize=1024,this._analyser.smoothingTimeConstant=0,this._analyser.connect(this._gainNode),this._fftBins=new Uint8Array(this._analyser.frequencyBinCount),this._mediaStreamSource=e.createMediaStreamSource(t),this._mediaStreamSource.connect(this._analyser)}catch(e){}}get stream(){return this._stream}get trackId(){return this._trackId}_getBins(){if(!this._fftBins||!this._analyser)return new Uint8Array;this._analyser.getByteFrequencyData(this._fftBins);let e=44100/this._fftBins.length,t=Math.ceil(dn.voiceParams.minFreq/e),n=Math.floor(dn.voiceParams.maxFreq/e);return this._fftBins.subarray(t,n)}getLevel(){let e=this._getBins(),t=e.reduce((e,t)=>e+t,0)/e.length/255,n=this._lastSmoothedLevel*dn.voiceParams.smoothing+t*(1-dn.voiceParams.smoothing);return this._lastSmoothedLevel=n,{real:t,smoothed:n}}destroy(){this._mediaStreamSource&&(this._mediaStreamSource.disconnect(),this._mediaStreamSource=null),this._gainNode&&(this._gainNode.disconnect(),this._gainNode=null),this._analyser&&(this._analyser.disconnect(),this._analyser=null,this._fftBins=null,this._lastSmoothedLevel=0)}},Er=class extends tt{constructor(e){super(),this._detector=null,this._track=null,this._interval=null;let t=()=>{this._detector&&gn.onLocalVolume(this._detector.getLevel().real,e.getMediaSettings().isAudioEnabled),this._interval=window.setTimeout(t,dn.voiceParams.interval)};this._interval=window.setTimeout(t,dn.voiceParams.interval);let n=()=>{let t=e.getStream();t&&this.init(t)};this.subscribe(e,nr.SOURCE_CHANGED,e=>{e.kind===rr.audio&&e.mediaSettings.isAudioEnabled&&n()}),n()}init(e){this._stopDetector();let t=e.getAudioTracks();t.length&&(this._track=t[0].clone(),this._detector=new yr("local",new MediaStream([this._track])))}_stopDetector(){this._detector&&(this._detector.destroy(),this._detector=null),this._track&&(this._track.stop(),this._track=null)}destroy(){this.unsubscribe(),this._interval&&(window.clearTimeout(this._interval),this._interval=null),this._stopDetector()}};function Or(e,t,n=0){return t in e&&e[t]?e[t]:n}function wr(...e){return t=>{for(let n of e)if(n(t))return!0;return!1}}function Cr(e,t){return n=>n[e]===t}function Sr(e,t){return t.reduce((t,n)=>(t[n[e]]=n,t),{})}function Ar(e){let t={},n=[];for(let r of e)t[r.id]||(t[r.id]=!0,n.push(r));return n}function kr(e){return Object.keys(e).filter(t=>void 0!==e[t]).map(t=>[t,e[t]]).reduce((e,t)=>(e[t[0]]=function(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}(t[1])?kr(t[1]):t[1],e),{})}function jr(e){let t=[];for(let n of e)n.forEach(e=>t.push(e));return t}function Tr(e){return Xe(this,null,(function*(){let t=[];return RTCRtpReceiver.prototype.getStats?(t.push(...e.getReceivers().map(e=>e.getStats())),t.push(...e.getSenders().map(e=>e.getStats()))):t.push(e.getStats()),Promise.all(t).then(jr).then(Ar)}))}function Ir(e){let t=e.filter(Cr("type","candidate-pair")).sort(function(e){return(t,n)=>t[e]-n[e]}("priority")).find(wr(Cr("nominated",!0),Cr("selected",!0)));if(!t)return{totalRoundTripTime:0,currentRoundTripTime:0,bytesSent:0,bytesReceived:0};let n={totalRoundTripTime:t.totalRoundTripTime||0,currentRoundTripTime:t.currentRoundTripTime||0,bytesSent:t.bytesSent,bytesReceived:t.bytesReceived},r=e.find(Cr("id",t.remoteCandidateId));r&&(n=Object.assign({},n,{remote:{type:r.candidateType,address:r.ip||r.address,port:r.port,protocol:r.protocol}}));let a=e.find(Cr("id",t.localCandidateId));return a&&(n=Object.assign({},n,{local:{type:a.candidateType,address:a.ip||a.address,port:a.port,protocol:a.protocol,relayProtocol:a.relayProtocol,networkType:a.networkType}})),kr(n)}function Pr(e,t){let n=Sr("id",e),r=e.filter(wr(Cr("type","inbound-rtp"),Cr("type","outbound-rtp")));"Firefox"===$n.browserName()&&(r=Object.values(r.reduce((e,t)=>{if(e[t.ssrc]){let n=Object.assign({},e[t.ssrc],t),r=e[t.ssrc].isRemote?t:e[t.ssrc];n.id=r.id,n.type=r.type,delete n.isRemote,delete n.remoteId,e[n.ssrc]=n}else e[t.ssrc]=t;return e},{})));let a={};if("Safari"===$n.browserName()){let t=e.filter(Cr("type","track"));a=Sr("trackIdentifier",t)}return r.map(e=>{let r=Number(e.ssrc),i=e.mediaType||e.kind,o=e.trackId,c=e.type,s=e.codecId;if("Safari"===$n.browserName()){let n=/^.+_([\d]+)$/.exec(e.id);if(n&&(r=parseInt(n[1],10)),i=e.id.indexOf("Audio")>0?"audio":"video",t[r]){let e=i+"-"+t[r];a[e]&&(o=a[e].id)}}if(!c||!r||!i)return null;let u={ssrc:r,type:c,kind:i,bytesReceived:Or(e,"bytesReceived"),bytesSent:Or(e,"bytesSent"),jitter:Or(e,"jitter"),packetsLost:Or(e,"packetsLost"),packetsReceived:Or(e,"packetsReceived"),packetsSent:Or(e,"packetsSent"),fractionLost:Or(e,"fractionLost"),pliCount:Or(e,"pliCount"),firCount:Or(e,"firCount"),nackCount:Or(e,"nackCount"),userId:t[r]};if(s&&n[s]){let e=n[s];u.clockRate=e.clockRate,u.mimeType=e.mimeType}if(o&&n[o]){let e=n[o];u.frameHeight=e.frameHeight,u.frameWidth=e.frameWidth,u.framesDecoded=e.framesDecoded,u.framesReceived=e.framesReceived,u.framesDropped=e.framesDropped}return kr(u)}).filter(e=>!!e)}function Dr(e,t){if(!t||!t.rtps||!e.rtps)return e;let n=Sr("ssrc",e.rtps),r=Sr("ssrc",t.rtps),a=(e.timestamp-t.timestamp)/1e3;return!n||!r||Object.keys(n).forEach(e=>{let t=n[e],i=r[e];if(t&&i){if(t.bytesReceived&&t.bytesReceived>i.bytesReceived&&(t.bandwidth=Math.round((t.bytesReceived-i.bytesReceived)/a)),t.bytesSent&&t.bytesSent>i.bytesSent&&(t.bandwidth=Math.round((t.bytesSent-i.bytesSent)/a)),t.packetsReceived)if(t.packetsReceived>i.packetsReceived||t.packetsLost>i.packetsLost){let e=t.packetsLost-i.packetsLost,n=t.packetsReceived-i.packetsReceived;t.packetLoss=parseFloat((100*e/(e+n)).toFixed(2))}else t.packetLoss=0;t.framesDropped&&i.framesDropped&&t.framesDropped>i.framesDropped&&(t.framesDroppedDelta=parseFloat(((t.framesDropped-i.framesDropped)/a).toFixed(0)))}}),e}function Nr(e,t){return Xe(this,arguments,(function*(e,t,n={}){let r=yield Tr(e),a={timestamp:Date.now(),transport:Ir(r),rtps:Pr(r,n)};return t?Dr(a,t):(yield dr.delay(1e3),Nr(e,a,n))}))}var xr,Rr=class extends tt{constructor(e,t,n,r,a){if(super(),this._remoteSDP={},this._remoteCandidates={},this._state=Gr.IDLE,this._isOpen=!1,this._remotePeerId=null,this._statInterval=null,this._settingsInterval=null,this._failedOnCreate=null,this._remoteStream=null,this._iceRestartTimeout=null,this._reconnectionTimeout=null,this._reconnectionPrevented=!1,this._fingerprint=null,this._neverConnected=!0,this._prevConsumerSettings={},this._lastNetworkStat={rtt:0,loss:0,date:0},this._remoteNetworkStat={rtt:0,loss:0},this._networkLimits={badNet:{loss:3,rtt:1e3},goodNet:{loss:.5,rtt:600}},this._signaling=n,this._mediaSource=r,this._participantId=e,this._isMaster=t,this._serverSettings=a,this.subscribe(this._signaling,Pt.NOTIFICATION,this._onSignalingNotification.bind(this)),this.subscribe(this._mediaSource,nr.TRACK_REPLACED,this._onReplacedTrack.bind(this)),this.subscribe(this._mediaSource,nr.SOURCE_CHANGED,this._applySettings.bind(this)),this._pc=new RTCPeerConnection({iceServers:dn.iceServers,iceTransportPolicy:dn.forceRelayPolicy?"relay":"all"},{optional:[{googSuspendBelowMinBitrate:!1}]}),this._pc.onicecandidate=this._handleIceCandidate.bind(this),this._pc.ontrack=this._onAddTrack.bind(this),this._pc.oniceconnectionstatechange=this._onIceConnectionStateChange.bind(this),this._pc.onconnectionstatechange=this._onConnectionStateChange.bind(this),this._pc.onsignalingstatechange=this._onSignalingStateChange.bind(this),this._prevConsumerSettings={},this._isMaster){try{this._mediaSource.addTrackToPeerConnection(this._pc,!0),this._applySettings()}catch(e){return ir.log(Mt.ERROR,"addTrack-direct"),_n.error("Unable to add media source tracks",e,{participantId:this._participantId}),void(this._failedOnCreate=e)}this._createOffer(!1).catch(e=>{this._state===Gr.IDLE?this._failedOnCreate=e:this.close(e)})}this._startSettingsInterval(),this._startStatInterval()}getState(){return this._state}updateStatisticsInterval(){this._stopStatInterval();let e=this.getState();e!==Gr.IDLE&&e!==Gr.CLOSED&&e!==Gr.FAILED&&this._startStatInterval()}open(e=null){return Xe(this,null,(function*(){if(this._isOpen)return void _n.warn("DirectTransport: Already opened",{participantId:this._participantId});if(this._failedOnCreate)return void this.close(this._failedOnCreate);if(_n.debug("DirectTransport: Open transport",{participantId:this._participantId}),this._isOpen=!0,this._remotePeerId=e,!this._isMaster)try{this._mediaSource.addTrackToPeerConnection(this._pc,!0),this._applySettings()}catch(e){return ir.log(Mt.ERROR,"addTrack-direct"),_n.error("DirectTransport: Unable to add media source tracks",e,{participantId:this._participantId}),void this.close(e)}this._setState(Gr.OPENED);let t=e;if(!e){let e=Object.keys(this._remoteSDP);t=e[e.length-1]}if(t&&this._remoteSDP[t])try{yield this._setRemoteDescription(t,this._remoteSDP[t])}catch(e){return void this.close()}this._remoteSDP={},this._remoteCandidates={},this._triggerEvent(zr.ACTIVE_PARTICIPANTS_NO_SIGNAL)}))}updateSettings(e){vr(e,this._serverSettings)||(this._serverSettings=e,this._applySettings())}preventRestart(){this._reconnectionPrevented=!0}allowRestart(){this._reconnectionPrevented=!1}close(e){this._isOpen=!1,this._stopReconnection(),this._remoteStream&&(this._remoteStream.getTracks().forEach(e=>{e.stop(),this._triggerEvent(zr.REMOTE_TRACK_REMOVED,this._remoteStream,e)}),this._remoteStream=null),this._stopStatInterval(),this._stopSettingsInterval(),this._pc&&(this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.oniceconnectionstatechange=null,this._pc.onconnectionstatechange=null,this._pc.onsignalingstatechange=null,this._pc.close()),this.unsubscribe(),e?(_n.error("DirectTransport: Closed",e,{participantId:this._participantId}),this._setState(Gr.FAILED)):(_n.debug("DirectTransport: Closed",{participantId:this._participantId}),this._setState(Gr.CLOSED)),this._triggerEvent(zr.PEER_CONNECTION_CLOSED)}_setState(e){this._state!==e&&(_n.debug("DirectTransport: State changed to "+e,{participantId:this._participantId}),this._state=e,this._triggerEvent(zr.STATE_CHANGED,e))}_onSignalingNotification(e){var t,n,r,a;switch(e.notification){case xt.TRANSMITTED_DATA:this._handleTransmittedData(e);break;case xt.SETTINGS_UPDATE:Object.assign(this._networkLimits.badNet,(null==(t=e.settings)?void 0:t.badNet)||{}),Object.assign(this._networkLimits.goodNet,(null==(n=e.settings)?void 0:n.goodNet)||{});break;case xt.CUSTOM_DATA:e.data.hasOwnProperty("sdk")&&(this._remoteNetworkStat.rtt=(null==(r=e.data.sdk)?void 0:r.rtt)||0,this._remoteNetworkStat.loss=(null==(a=e.data.sdk)?void 0:a.loss)||0)}}_handleTransmittedData(e){let t=e.data,n=dr.getPeerIdString(e.peerId);dr.composeMessageId(e)===this._participantId&&(t.candidate&&t.candidate.candidate?this._addIceCandidate(n,t.candidate).catch(this.close.bind(this)):t.sdp&&this._setRemoteDescription(n,t.sdp).catch(this.close.bind(this)))}_addIceCandidate(e,t){return Xe(this,null,(function*(){if(this._isOpen&&(!this._remotePeerId||this._remotePeerId===e)&&this._pc&&this._pc.remoteDescription){_n.debug("Add remote ice candidate",{participantId:this._participantId,candidate:t});try{yield this._pc.addIceCandidate(new RTCIceCandidate(t))}catch(e){throw ir.log(Mt.ERROR,"addIceCandidate-direct"),_n.error("Unable to add remote ice candidate",e,{participantId:this._participantId,candidate:t}),e}}else _n.debug("Cache remote ice candidate",{participantId:this._participantId,candidate:t}),this._remoteCandidates[e]=this._remoteCandidates[e]||[],this._remoteCandidates[e].push(t)}))}_setRemoteCandidates(e){return Xe(this,null,(function*(){if(!this._remoteCandidates[e])return void _n.log("No cached candidates found for peer "+e);let t=this._remoteCandidates[e];this._remoteCandidates[e]=[];for(let n of t)try{yield this._addIceCandidate(e,n)}catch(e){}}))}_setRemoteDescription(e,t){return Xe(this,null,(function*(){if(!this._isOpen||this._remotePeerId&&this._remotePeerId!==e||!this._pc)this._remoteSDP[e]=t;else{_n.debug("Add remote description",{participantId:this._participantId,sdp:t}),this._calcFingerprint(t.sdp);try{yield this._pc.setRemoteDescription(new RTCSessionDescription(t)),yield this._setRemoteCandidates(e)}catch(e){throw ir.log(Mt.ERROR,"setRemoteDescription-direct"),_n.error("Unable to set remote description",e,{participantId:this._participantId,sdp:t}),e}}}))}_onAddTrack(e){_n.debug("Added remote track",{participantId:this._participantId,kind:e.track.kind}),this._remoteStream?this._remoteStream.addTrack(e.track):(this._remoteStream=new MediaStream([e.track]),this._remoteStream.onremovetrack=e=>{this._triggerEvent(zr.REMOTE_TRACK_REMOVED,this._remoteStream,e.track)}),this._triggerEvent(zr.REMOTE_TRACK_ADDED,this._remoteStream,e.track)}_handleIceCandidate(e){return Xe(this,null,(function*(){e.candidate&&this._signaling.ready&&(_n.debug("Local ice candidate",{participantId:this._participantId,candidate:e.candidate}),yield this._signaling.sendCandidate(this._participantId,e.candidate))}))}_onSignalingStateChange(){switch(_n.debug("DirectTransport: Signaling state changed to "+this._pc.signalingState,{participantId:this._participantId}),this._pc.signalingState){case"have-local-offer":let e=this._pc.localDescription;e?this._signaling.sendSdp(this._participantId,e).catch(this.close.bind(this)):this.close(new Error);break;case"have-remote-offer":this._createAnswer().catch(this.close.bind(this)).then(e=>Xe(this,null,(function*(){return this._signaling.sendSdp(this._participantId,e)}))).catch(this.close.bind(this))}}_onIceConnectionStateChange(){switch(_n.debug("DirectTransport: Ice Connection state changed to "+this._pc.iceConnectionState,{participantId:this._participantId}),this._pc.iceConnectionState){case"checking":let e=this.getState();e===Gr.IDLE||e===Gr.OPENED?this._setState(Gr.CONNECTING):this._setState(Gr.RECONNECTING)}}_onConnectionStateChange(){switch(_n.debug("DirectTransport: Connection state changed to "+this._pc.connectionState,{participantId:this._participantId}),ir.log(Mt.ICE_CONNECTION_STATE,this._pc.connectionState),this._pc.connectionState){case"connected":this._neverConnected=!1,this._setState(Gr.CONNECTED),this._stopReconnection(),dr.getPeerConnectionHostInfo(this._pc).then(e=>{e&&ir.log(Mt.ICE_CONNECTION_TYPE,e.type)});break;case"failed":case"disconnected":this._reconnectionPrevented?this.close(new Error("Ice connection "+this._pc.connectionState)):(this._setState(Gr.RECONNECTING),this._startReconnection());break;case"closed":this.close(new Error("Ice connection closed"))}}_startReconnection(){this._reconnectionTimeout||this._iceRestartTimeout||(_n.log("Waiting for reconnection...",{participantId:this._participantId}),this._reconnectionTimeout=window.setTimeout(()=>{this._reconnectionTimeout=null,this._neverConnected?this._requestTopologySwitch():this._startIceRestart()},dn.transportConnectionWaitTime))}_requestTopologySwitch(){this._isMaster&&this._signaling.ready&&(_n.log("Switch topology DIRECT to SERVER",{participantId:this._participantId}),this._signaling.switchTopology(qr.SERVER))}_stopReconnection(){this._reconnectionTimeout&&(clearTimeout(this._reconnectionTimeout),this._reconnectionTimeout=null),this._iceRestartTimeout&&(clearTimeout(this._iceRestartTimeout),this._iceRestartTimeout=null)}_startIceRestart(){this._isMaster?(ir.log(Mt.ICE_RESTART),_n.log("Ice restart",{participantId:this._participantId}),this._createOffer(!0).catch(this.close.bind(this))):_n.debug("Waiting for ice restart...",{participantId:this._participantId}),this._iceRestartTimeout=window.setTimeout(()=>{this._iceRestartTimeout=null,_n.error("Ice restart failed",{participantId:this._participantId}),ir.log(Mt.ERROR,"iceRestart-direct"),this._requestTopologySwitch()},dn.iceRestartWaitTime)}_createOffer(e){return Xe(this,null,(function*(){let t={iceRestart:e,offerToReceiveAudio:!0,offerToReceiveVideo:!0};return _n.debug("Create offer",{participantId:this._participantId,options:t}),this._pc.createOffer(t).catch(e=>{throw _n.error("Unable to create offer",e,{participantId:this._participantId}),ir.log(Mt.ERROR,"createOffer-direct"),e}).then(e=>Xe(this,null,(function*(){return _n.debug("Created offer",{participantId:this._participantId,offer:e}),e=Rr._patchDescription(e),_n.debug("Set local description",{participantId:this._participantId,offer:e}),this._calcFingerprint(e.sdp),this._pc.setLocalDescription(e).then(()=>this._pc.localDescription)}))).catch(e=>{throw _n.error("Unable to set local description",e,{participantId:this._participantId}),ir.log(Mt.ERROR,"setLocalDescription-direct"),e})}))}_createAnswer(){return Xe(this,null,(function*(){return _n.debug("Create answer",{participantId:this._participantId}),this._pc.createAnswer().catch(e=>{throw _n.error("Unable to create answer",e,{participantId:this._participantId}),ir.log(Mt.ERROR,"createAnswer-direct"),e}).then(e=>Xe(this,null,(function*(){return _n.debug("Created answer",{participantId:this._participantId,answer:e}),e=Rr._patchDescription(e),_n.debug("Set local description",{participantId:this._participantId,answer:e}),this._calcFingerprint(e.sdp),this._pc.setLocalDescription(e)}))).then(()=>this._pc.localDescription).catch(e=>{throw _n.error("Unable to set local description",e,{participantId:this._participantId}),ir.log(Mt.ERROR,"setLocalDescription-direct"),e})}))}static _patchDescription(e){let t=!!$n.baseChromeVersion();return e.sdp=dr.patchSDP(e.sdp,dn.preferH264&&$n.canPreferH264(),$n.isBrokenH264(),dn.preferVP9,t&&dn.audioNack),e}_onReplacedTrack(e){this._pc&&(this._pc.getSenders().forEach(t=>{t.track&&t.track.kind===e.kind&&(t.track.enabled=e.enabled,t.replaceTrack(e).catch(e=>{_n.error("DirectTransport: Unable to replace track",e,{participantId:this._participantId}),ir.log(Mt.ERROR,"replaceTrack-direct")}))}),this._applySettings())}_startStatInterval(){if(this._statInterval)return;let e=()=>{this._pc?Nr(this._pc,this._lastStat).then(t=>{this._lastStat=t;let n={inbound:{topology:qr.DIRECT,transport:t.transport,rtps:t.rtps.filter(e=>"inbound-rtp"===e.type&&(e.userId=this._participantId,!0))},outbound:{topology:qr.DIRECT,transport:t.transport,rtps:t.rtps.filter(e=>"outbound-rtp"===e.type)}};this._checkBadNetwork(n),this._triggerEvent(zr.REMOTE_DATA_STATS,n),this._statInterval=window.setTimeout(e,dn.statisticsInterval)}):this._stopStatInterval()};this._statInterval=window.setTimeout(e,dn.statisticsInterval)}_stopStatInterval(){this._statInterval&&(window.clearTimeout(this._statInterval),this._statInterval=null)}_checkBadNetwork(e){if(!this._signaling.ready)return;let t=e=>e.rtt<=this._networkLimits.goodNet.rtt&&e.loss<=this._networkLimits.goodNet.loss,n=e=>e.rtt>=this._networkLimits.badNet.rtt||e.loss>=this._networkLimits.badNet.loss,r=Math.round(1e3*e.outbound.transport.currentRoundTripTime)||0,a=e.inbound.rtps.reduce((e,t)=>Math.max(e,t.packetLoss||0),0),i={rtt:this._lastNetworkStat.rtt*(1-.8)+.8*r,loss:this._lastNetworkStat.loss*(1-.8)+.8*a},o=n(i),c=t(i),s=n(this._remoteNetworkStat),u=t(this._remoteNetworkStat),l=n(this._lastNetworkStat),d=t(this._lastNetworkStat),f=o||s?.2:c&&u?1:0,p=Date.now();if((l!==o||d!==c||p-this._lastNetworkStat.date>dn.networkStatisticsInterval)&&(this._lastNetworkStat.date=Date.now(),this._signaling.customData({sdk:Object.assign({type:"bad-net"},i)},null).catch(e=>{_n.warn("Unable to send [bad-net]",e)})),f){let e={};e[this._participantId]=e[""]=f,this._triggerEvent(zr.NETWORK_STATUS,e)}this._lastNetworkStat.rtt=i.rtt,this._lastNetworkStat.loss=i.loss}_startSettingsInterval(){if(this._settingsInterval)return;let e=()=>{this._pc?(this._applySettings(),this._settingsInterval=window.setTimeout(e,2e3)):this._stopSettingsInterval()};this._settingsInterval=window.setTimeout(e,2e3)}_stopSettingsInterval(){this._settingsInterval&&(window.clearTimeout(this._settingsInterval),this._settingsInterval=null)}_calcFingerprint(e){let t=dr.sdpFingerprint(e);null===this._fingerprint?this._fingerprint=t:(gn.onFingerprintChange(this._fingerprint.xor(t).toString()),this._fingerprint=null)}_applySettings(){var e;let t=this._mediaSource.getMediaSettings().isScreenSharingEnabled?this._serverSettings.screenSharing:this._serverSettings.camera;t&&"connected"===(null==(e=this._pc)?void 0:e.connectionState)&&(this._prevConsumerSettings=dr.applySettings(this._pc,t,this._prevConsumerSettings))}};!function(e){e.producerNotification="producerNotification",e.producerCommand="producerCommand",e.consumerScreenShare="consumerScreenShare",e.producerScreenShare="producerScreenShare"}(xr||(xr={}));var Mr,Lr,Br,Fr=xr;!function(e){e.VP9="vp09.00.50.08",e.VP8="vp8"}(Mr||(Mr={})),(Br=Lr||(Lr={})).INIT="init",Br.READY="ready",Br.FRAME="frame",Br.ERROR="error",Br.DEBUG="debug",Br.LOG_ERROR="log_error";var Hr=class{constructor(){this._worker=null}_createWorker(e,t){return Xe(this,arguments,(function*(e,t,n=[],r={},a=[]){return new Promise((i,o)=>{let c=n.join(","),s=new Blob([e,`exports.default(${c});`],{type:"application/javascript; charset=utf-8"}),u=window.URL.createObjectURL(s);this._worker=new Worker(u),this._worker.onmessage=e=>{switch(e.data.type){case Lr.READY:i();break;case Lr.ERROR:o(e.data.error);break;case Lr.FRAME:t(e.data);break;case Lr.DEBUG:_n.debug(e.data.message);break;case Lr.LOG_ERROR:ir.log(Mt.ERROR,e.data.message)}},this._sendToWorker(Lr.INIT,r,a)})}))}_removeWorker(){var e;null==(e=this._worker)||e.terminate(),this._worker=null}_sendToWorker(e,t={},n=[]){var r;null==(r=this._worker)||r.postMessage(Object.assign({type:e},t),n)}static isBrowserSupported(){throw new Error("Not implemented")}},Vr=class extends Hr{init(e){return Xe(this,null,(function*(){_n.debug("LibVPxDecoder started"),yield this._createWorker('var exports=(()=>{var R=Object.defineProperty;var V=o=>R(o,"__esModule",{value:!0});var M=typeof require!="undefined"?require:o=>{throw new Error(\'Dynamic require of "\'+o+\'" is not supported\')};var D=(o,i)=>{V(o);for(var e in i)R(o,e,{get:i[e],enumerable:!0})};var A={};D(A,{default:()=>h});var x;(function(e){e.VP9="vp09.00.50.08",e.VP8="vp8"})(x||(x={}));var t;(function(r){r.INIT="init",r.READY="ready",r.FRAME="frame",r.ERROR="error",r.DEBUG="debug",r.LOG_ERROR="log_error"})(t||(t={}));var h=(o,i)=>{let e=null,n=null,m=!0;function E(){return o({locateFile:i}).then(a=>n=a)}function r(a,g,l,b,y){if(!n){self.postMessage({type:t.LOG_ERROR,message:"decoder-init-fail-libvpx"}),self.postMessage({type:t.FRAME,error:"Fatal initialization error"});return}if(m!==l&&(m=l,e&&(e=null,self.postMessage({type:t.DEBUG,message:`LibVPxDecoder codec changed to ${l?"VP9":"VP8"} - reinitialize`}))),!e&&(self.postMessage({type:t.DEBUG,message:`LibVPxDecoder codec ${l?"VP9":"VP8"}`}),e=new n.VpxDecoder,e.debug(y),!e.init(l?n.VpxType.VP9:n.VpxType.VP8))){e=null,self.postMessage({type:t.FRAME,error:"Decoder failed to create"});return}try{e.allocateBuffer(g.byteLength).set(new Uint8Array(g))}catch(s){self.postMessage({type:t.DEBUG,message:s}),e=null,self.postMessage({type:t.FRAME,error:String(s)});return}if(!(e.decode()&&e.nextImage())){self.postMessage({type:t.FRAME,error:"Decode failed"});return}let d=e.getImageBuffer();if(!d){self.postMessage({type:t.FRAME,error:"No decoded data"});return}let f=e.getImageWidth(),c=e.getImageHeight();e.nextImage()&&(self.postMessage({type:t.DEBUG,message:"LibVPxDecoder dropped frame"}),self.postMessage({type:t.LOG_ERROR,message:"LibVPxDecoder-drop"}));let p=new Uint8ClampedArray(d.byteLength);if(p.set(d),b){let s=new ImageData(p,f,c);createImageBitmap(s,0,0,f,c).then(u=>{self.postMessage({type:t.FRAME,data:u},[u]),u.close()})}else self.postMessage({type:t.FRAME,data:p.buffer,width:f,height:c},[p.buffer])}E().then(()=>{self.onmessage=a=>{switch(a.data.type){case t.FRAME:r(a.data.timestamp,a.data.data,a.data.isVP9,a.data.useImageBitmap,a.data.debug);break}},self.postMessage({type:t.READY})}).catch(a=>{self.postMessage({type:t.ERROR,error:String(a)})})};return A;})();\n',t=>{if(t.error)_n.warn("LibVPxDecoder",t.error);else if(t.data instanceof ArrayBuffer){let n=new ImageData(new Uint8ClampedArray(t.data),t.width,t.height);e(n)}else e(t.data)},[qe.a,qe.a.getUrl])}))}decodeFrame(e,t,n,r){let a="ImageBitmap"in window;this._sendToWorker(Lr.FRAME,{timestamp:e,data:t.buffer,isVP9:n,keyFrame:r,useImageBitmap:a,debug:_n.enabled()},[t.buffer])}destroy(){this._removeWorker(),_n.debug("LibVPxDecoder destroyed")}static isBrowserSupported(){return"WebAssembly"in window&&"Worker"in window}},Ur=class extends Hr{init(e){return Xe(this,null,(function*(){_n.debug("WebCodecsDecoder started"),yield this._createWorker('var exports=(()=>{var l=Object.defineProperty;var f=t=>l(t,"__esModule",{value:!0});var D=typeof require!="undefined"?require:t=>{throw new Error(\'Dynamic require of "\'+t+\'" is not supported\')};var E=(t,d)=>{f(t);for(var r in d)l(t,r,{get:d[r],enumerable:!0})};var R={};E(R,{default:()=>V});var n;(function(r){r.VP9="vp09.00.50.08",r.VP8="vp8"})(n||(n={}));var o;(function(e){e.INIT="init",e.READY="ready",e.FRAME="frame",e.ERROR="error",e.DEBUG="debug",e.LOG_ERROR="log_error"})(o||(o={}));var V=()=>{let t=null,d=!0;function r(){self.postMessage({type:o.READY})}function s(a,m,e,u=!1){(!t||d!==e)&&(d=e,t?self.postMessage({type:o.DEBUG,message:`WebCodecsDecoder codec changed to ${e?"VP9":"VP8"}`}):(self.postMessage({type:o.DEBUG,message:`WebCodecsDecoder codec ${e?"VP9":"VP8"}`}),t=new VideoDecoder({output:c=>{("createImageBitmap"in c?c.createImageBitmap():createImageBitmap(c)).then(i=>{self.postMessage({type:o.FRAME,data:i}),i.close()}).finally(()=>c.close())},error:c=>{t&&t.state!=="closed"&&t.close(),t=null,self.postMessage({type:o.FRAME,error:"WebCodecsDecoder failed, reinitialize"})}})),t.configure({codec:e?n.VP9:n.VP8}));let p=new EncodedVideoChunk({type:u?"key":"delta",timestamp:a,data:m});t.decode(p)}self.onmessage=a=>{switch(a.data.type){case o.INIT:r();break;case o.FRAME:s(a.data.timestamp,a.data.data,a.data.isVP9,a.data.keyFrame);break}}};return R;})();\n',t=>{t.error?_n.warn("WebCodecsDecoder",t.error):e(t.data)})}))}decodeFrame(e,t,n,r=!1){this._sendToWorker(Lr.FRAME,{timestamp:e,data:t.buffer,isVP9:n,keyFrame:r},[t.buffer])}destroy(){this._removeWorker(),_n.debug("WebCodecsDecoder destroyed")}static isBrowserSupported(){return"VideoDecoder"in window&&"Worker"in window&&"VideoFrame"in window&&"ImageBitmap"in window&&"createImageBitmap"in window}};var zr,Gr,Wr,qr,Kr=class{constructor(e,t,n,r){this._participantIdRegistry=null,this._streamBuilders={},this._onStream=()=>{},this._onEos=()=>{},_n.debug("ScreenCaptureReceiver started"),this._datachannel=e,this._participantIdRegistry=t,this._onStream=n,this._onEos=r,this._datachannel.onmessage=e=>this._onDataChannelMessage(e.data)}_onDataChannelMessage(e){var t,n;let r=function(e){let t=new DataView(e),n=t.getUint8(0),r=t.getUint16(1),a=t.getUint32(3),i=1===t.getUint8(7),o=t.getUint16(8),c=t.getUint8(10),s=!!(1&c),u=!!(2&c),l=!!(4&c),d=!!(8&c);if(1!==n)throw new Error(`Unexpected protocol version. Got ${n}, expected 1`);return{timestamp:a,start:s,end:u,keyframe:l,sequence:r,isVP9:i,ssrc:o,eos:d,data:e.slice(11)}}(e),a=null==(n=null==(t=this._participantIdRegistry)?void 0:t.getStreamDescription(r.ssrc))?void 0:n.participantId;if(!a)return void _n.warn(`Participant id for ssrc ${r.ssrc} not found in registry`);if(r.eos)return this.close(a),void this._onEos(a);let i=this._streamBuilders[a];i||(i=new class{constructor(e,t){this._decoderReady=!1,this._decoderQueue=[],this._chunks=[],this._onStream=()=>{},this._canvas=null,this._canvasContext=null,this._stream=null,this._track=null,_n.debug(`StreamBuilder started for participant [${e}]`),this._participantId=e,this._onStream=t,this._useImageBitmap="ImageBitmap"in window,Ur.isBrowserSupported()?this._decoder=new Ur:this._decoder=new Vr,this._decoder.init(e=>this._drawImage(e)).then(()=>{this._decoderReady=!0,this._decodeQueue()})}_createStream(e,t){this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.width=e,this._canvas.height=t,this._canvas.style.pointerEvents="none",this._canvas.style.visibility="hidden",this._canvas.style.position="absolute",this._canvas.style.width="160px",this._canvas.style.height="90px",this._canvas.style.bottom="0",this._canvas.style.right="0",this._canvas.style.zIndex="5000",document.body.appendChild(this._canvas),this._useImageBitmap?this._canvasContext=this._canvas.getContext("bitmaprenderer"):this._canvasContext=this._canvas.getContext("2d"),this._stream=this._canvas.captureStream(0),this._track=this._stream.getVideoTracks()[0],this._track.contentHint="text")}_removeStream(){this._stream&&(this._stream.getTracks().forEach(e=>e.stop()),this._stream=null,this._track=null),this._canvasContext=null;try{this._canvas&&document.body.removeChild(this._canvas)}catch(e){}this._canvas=null}_processFrameData(){let e=new Uint8Array;for(let t of this._chunks){let n=new Uint8Array(e.byteLength+t.data.byteLength);n.set(new Uint8Array(e),0),n.set(new Uint8Array(t.data),e.byteLength),e=n}return this._chunks=[],e}_requestCanvasFrame(){this._track&&this._track.requestFrame?this._track.requestFrame():this._stream&&this._stream.requestFrame&&this._stream.requestFrame()}_drawImage(e){this._track||(this._createStream(e.width,e.height),this._onStream(this._stream));let t=this._canvas;if(t.width=e.width,t.height=e.height,e instanceof ImageData){let n=this._canvasContext;n.clearRect(0,0,t.width,t.height),n.putImageData(e,0,0)}else this._canvasContext.transferFromImageBitmap(e);this._requestCanvasFrame()}_decodeFrame(e){!this._decoderReady||this._decoderQueue.length?(this._decoderQueue.push(e),this._decodeQueue()):this._decoder.decodeFrame(e.timestamp,e.frameData,e.isVP9,e.keyframe)}_decodeQueue(){if(!this._decoderReady)return;let e=this._decoderQueue;this._decoderQueue=[],e.forEach(e=>{this._decoder.decodeFrame(e.timestamp,e.frameData,e.isVP9,e.keyframe)})}appendChunk(e){let t=this._chunks.length;if(e.start)t&&(_n.warn("[FrameBuilder] Cleanup buffer",Array.prototype.slice.call(this._chunks)),this._chunks=[]);else if(!t||(this._chunks[t-1].sequence+1)%65536!==e.sequence)return void _n.warn("[FrameBuilder] Got incorrect chunk");if(this._chunks.push(e),e.end){let t=this._processFrameData();this._decodeFrame({timestamp:e.timestamp,frameData:t,isVP9:e.isVP9,keyframe:e.keyframe})}}destroy(){this._decoder.destroy(),this._removeStream(),this._chunks=[],_n.debug("StreamBuilder destroyed for participant "+this._participantId)}}(a,e=>this._onStream(a,e)),this._streamBuilders[a]=i),i.appendChunk(r)}close(e){let t=this._streamBuilders[e];t&&(t.destroy(),delete this._streamBuilders[e])}destroy(){this._datachannel.onbufferedamountlow=null,this._datachannel.onmessage=null,this._onStream=()=>{},Object.values(this._streamBuilders).forEach(e=>e.destroy()),this._streamBuilders={},this._participantIdRegistry=null,_n.debug("ScreenCaptureReceiver destroyed")}static isBrowserSupported(){return(Ur.isBrowserSupported()||Vr.isBrowserSupported())&&("CanvasCaptureMediaStream"in window||"CanvasCaptureMediaStreamTrack"in window)}},Yr=class extends Hr{constructor(e,t){super(),this._video=null,this._imageCapture=null,this._canvas=null,this._canvasCtx=null,this._stream=null,this._track=null,this._frameReadTimeout=0,this._lastFrame=null,this._sourceTrack=e,this._onFrame=t,this._useImageCapture="ImageCapture"in window&&"ImageBitmap"in window,("live"!==e.readyState||!e.enabled||e.muted)&&(this._useImageCapture=!1)}_createDom(){this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.style.pointerEvents="none",this._canvas.style.visibility="hidden",this._canvas.style.position="absolute",this._canvas.style.width="160px",this._canvas.style.height="90px",this._canvas.style.bottom="0",this._canvas.style.right="160px",this._canvas.style.zIndex="5000",this._canvasCtx=this._canvas.getContext("2d"),document.body.appendChild(this._canvas)),!this._video&&!this._useImageCapture&&(this._video=document.createElement("video"),this._video.controls=!1,this._video.autoplay=!1,this._video.preload="auto",this._video.muted=!0,this._video.style.pointerEvents="none",this._video.style.visibility="hidden",this._video.style.position="absolute",this._video.style.width="160px",this._video.style.height="90px",this._video.style.bottom="0",this._video.style.right="0",this._video.style.zIndex="5000",document.body.appendChild(this._video))}_removeDom(){try{this._canvas&&document.body.removeChild(this._canvas),this._video&&document.body.removeChild(this._video)}catch(e){}this._canvasCtx=null,this._canvas=null,this._video=null}_createStream(e){return Xe(this,null,(function*(){if(!this._canvas)throw new Error("Canvas not found");if(!this._video&&!this._useImageCapture)throw new Error("Video element not found");return this._stream=this._canvas.captureStream(0),this._track=this._stream.getVideoTracks()[0],new Promise((t,n)=>{if(this._useImageCapture)this._imageCapture=new ImageCapture(e),t();else{let r=this._video;r.srcObject=new MediaStream([e]),r.onloadeddata=e=>t(),r.onerror=()=>n(new Error("Video element error"));let a=r.play(),i=()=>n(new Error("Autoplay is disabled"));a?a.catch(i):i()}})}))}_removeStream(){var e;window.clearTimeout(this._frameReadTimeout),null==(e=this._lastFrame)||e.close(),this._stream&&(this._stream.getTracks().forEach(e=>e.stop()),this._stream=null,this._track=null),this._video&&(this._video.pause(),this._video.srcObject=null),this._imageCapture&&(this._imageCapture=null)}_drawFrameVideo(){if(!(this._canvas&&this._canvasCtx&&this._video&&this._track))throw new Error("Fatal error");let e=this._video.videoWidth,t=this._video.videoHeight;return this._canvas.width=this._video.width=e,this._canvas.height=this._video.height=t,this._canvasCtx.clearRect(0,0,e,t),this._canvasCtx.drawImage(this._video,0,0,e,t),this._requestCanvasFrame(),this._canvasCtx.getImageData(0,0,e,t)}_getFrameBitmap(){return Xe(this,null,(function*(){if(!this._imageCapture)throw new Error("Destroyed");return this._imageCapture.grabFrame()}))}_drawFrameData(e){var t;if(!this._canvas||!this._canvasCtx||!this._track)throw new Error("Destroyed");let n=e.width,r=e.height;return this._canvas.width=n,this._canvas.height=r,this._canvasCtx.clearRect(0,0,n,r),this._canvasCtx.drawImage(e,0,0,n,r),this._requestCanvasFrame(),null==(t=this._canvasCtx)?void 0:t.getImageData(0,0,n,r)}_requestCanvasFrame(){this._track&&this._track.requestFrame?this._track.requestFrame():this._stream&&this._stream.requestFrame&&this._stream.requestFrame()}init(){return Xe(this,null,(function*(){this._createDom();let e=this._sourceTrack.getSettings().width,t=this._sourceTrack.getSettings().height;_n.debug(`LibVPxEncoder started ${e}x${t}, codec ${this.isVP9()?"VP9":"VP8"}`),yield this._createStream(this._sourceTrack),yield this._createWorker('var exports=(()=>{var u=Object.defineProperty;var b=o=>u(o,"__esModule",{value:!0});var h=typeof require!="undefined"?require:o=>{throw new Error(\'Dynamic require of "\'+o+\'" is not supported\')};var x=(o,s)=>{b(o);for(var t in s)u(o,t,{get:s[t],enumerable:!0})};var V={};x(V,{default:()=>g});var m;(function(t){t.VP9="vp09.00.50.08",t.VP8="vp8"})(m||(m={}));var r;(function(e){e.INIT="init",e.READY="ready",e.FRAME="frame",e.ERROR="error",e.DEBUG="debug",e.LOG_ERROR="log_error"})(r||(r={}));var g=(o,s)=>{let t;function E(a,e){return o({locateFile:s}).then(n=>{if(t=new n.VpxEncoder,t.debug(e),!t.init(a?n.VpxType.VP9:n.VpxType.VP8))throw self.postMessage({type:r.LOG_ERROR,message:"encoder-init-fail-libvpx"}),new Error("LibVPxEncoder failed to create");t.setMaxQuantizer(10),t.setTargetBitrate(1024)})}function R(a,e,n,i){let f=t.allocateImage(a,e);if(!f){self.postMessage({type:r.FRAME,error:"No buffer data"});return}f.set(new Uint8Array(n));let c=Math.round(performance.now()),l=150;if(!t.encode(c,l,i)){self.postMessage({type:r.FRAME,error:"Encode failed"});return}let d=t.readFrame();if(!d){self.postMessage({type:r.FRAME,error:"No encoded data"});return}t.readFrame()&&(self.postMessage({type:r.DEBUG,message:"LibVPxEncoder dropped frame"}),self.postMessage({type:r.LOG_ERROR,message:"LibVPxEncoder-drop"}));let p=new Uint8Array(d.byteLength);p.set(d),self.postMessage({type:r.FRAME,frameType:i?"key":"delta",timestamp:c,duration:l,data:p.buffer},[p.buffer])}self.onmessage=a=>{switch(a.data.type){case r.INIT:E(a.data.isVP9,a.data.debug).then(()=>self.postMessage({type:r.READY})).catch(e=>self.postMessage({type:r.ERROR,error:String(e)}));break;case r.FRAME:R(a.data.width,a.data.height,a.data.imageData,a.data.keyFrame);break}}};return V;})();\n',e=>{var t;e.error?this._onFrame(null,e.error):this._onFrame({type:e.frameType,timestamp:e.timestamp,duration:e.duration,data:e.data,byteLength:null==(t=e.data)?void 0:t.byteLength})},[qe.a,qe.a.getUrl],{isVP9:this.isVP9(),debug:_n.enabled()})}))}_encode(e,t){let n=e.data.buffer;this._sendToWorker(Lr.FRAME,{width:e.width,height:e.height,imageData:n,keyFrame:t},[n])}_requestFrameVideo(e){let t=this._drawFrameVideo();this._encode(t,e)}_requestFrameBitmap(e){this._frameReadTimeout=window.setTimeout(()=>{if(this._lastFrame){let t=this._drawFrameData(this._lastFrame);this._encode(t,e)}else this._onFrame(null)},1e3),this._getFrameBitmap().then(t=>{var n;window.clearTimeout(this._frameReadTimeout),null==(n=this._lastFrame)||n.close(),this._lastFrame=t;let r=this._drawFrameData(t);this._encode(r,e)}).catch(()=>{})}requestFrame(e=!1){this._useImageCapture?this._requestFrameBitmap(e):this._requestFrameVideo(e)}isVP9(){return!1}destroy(){this._removeWorker(),this._removeStream(),this._removeDom(),_n.debug("LibVPxEncoder destroyed")}static isBrowserSupported(){return"WebAssembly"in window&&"Worker"in window&&("CanvasCaptureMediaStream"in window||"CanvasCaptureMediaStreamTrack"in window)}},Zr=class extends Hr{constructor(e,t){super(),this._sourceTrack=e,this._onFrame=t,this._trackProcessor=new MediaStreamTrackProcessor(e)}init(){return Xe(this,null,(function*(){let e=this._sourceTrack.getSettings().width,t=this._sourceTrack.getSettings().height,n=this._trackProcessor.readable;_n.debug(`WebCodecsEncoder started ${e}x${t}, codec ${this.isVP9()?"VP9":"VP8"}`),yield this._createWorker('var exports=(()=>{var p=Object.defineProperty;var h=a=>p(a,"__esModule",{value:!0});var g=typeof require!="undefined"?require:a=>{throw new Error(\'Dynamic require of "\'+a+\'" is not supported\')};var A=(a,l)=>{h(a);for(var r in l)p(a,r,{get:l[r],enumerable:!0})};var y={};A(y,{default:()=>P});var n;(function(r){r.VP9="vp09.00.50.08",r.VP8="vp8"})(n||(n={}));var d;(function(t){t.INIT="init",t.READY="ready",t.FRAME="frame",t.ERROR="error",t.DEBUG="debug",t.LOG_ERROR="log_error"})(d||(d={}));var P=()=>{let a=1e3,l,r,c,m,u,t,i=null,E=0,R=!1;function b(e){l=e.readable,r=l.getReader(),c=e.width,m=e.height,u=e.isVP9,t=e.framerate,f.configure({framerate:t,codec:u?n.VP9:n.VP8,width:c,height:m,latencyMode:"realtime"}),self.postMessage({type:d.READY})}function F(e){E=self.setTimeout(()=>{i&&V(i,e)},a),!R&&(R=!0,r.read().finally(()=>{R=!1,self.clearTimeout(E)}).then(({done:o,value:s})=>{if(i==null||i.close(),i=null,!(o||!s)){if(!f){r.releaseLock(),l.cancel();return}i=s,V(s,e)}}))}function V(e,o){(e.codedWidth!==c||e.codedHeight!==m)&&(c=e.codedWidth,m=e.codedHeight,f.configure({framerate:t,codec:u?n.VP9:n.VP8,width:c,height:m,latencyMode:"realtime"})),f.encode(e,{keyFrame:o})}let f=new VideoEncoder({output:e=>{let o;e.data?o=e.data:(o=new ArrayBuffer(e.byteLength),e.copyTo(o)),self.postMessage({type:d.FRAME,frameType:e.type,timestamp:e.timestamp,duration:e.duration,data:o},[o])},error:e=>{self.postMessage({type:d.FRAME,error:String(e)})}});self.onmessage=e=>{switch(e.data.type){case d.INIT:b(e.data);break;case d.FRAME:F(e.data.keyFrame);break}}};return y;})();\n',e=>{var t;e.error?this._onFrame(null,e.error):this._onFrame({type:e.frameType,timestamp:e.timestamp,duration:e.duration,data:e.data,byteLength:null==(t=e.data)?void 0:t.byteLength})},[],{readable:n,width:e,height:t,isVP9:this.isVP9(),framerate:dn.screenFrameRate},[n])}))}requestFrame(e=!1){this._sendToWorker(Lr.FRAME,{keyFrame:e})}isVP9(){return!0}destroy(){this._removeWorker(),_n.debug("WebCodecsEncoder destroyed")}static isBrowserSupported(){return"VideoEncoder"in window&&"Worker"in window&&"EncodedVideoChunk"in window&&"MediaStreamTrackProcessor"in window}},Qr=0,Jr=class{constructor(e,t){this._destroyed=!1,this._needKeyframe=!0,_n.debug("ScreenCaptureSender started"),this._datachannel=t;let n=(e,t)=>{if(!this._destroyed){if(!e)return _n.warn("requestFrame failed, keyFrame: "+this._needKeyframe,t),this._needKeyframe=!0,void this._requestFrame();this._send(e).catch(e=>{_n.warn("sendFrame failed",e),this._needKeyframe=!0}).finally(()=>this._requestFrame())}};Zr.isBrowserSupported()?this._encoder=new Zr(e,n):this._encoder=new Yr(e,n),this._datachannel.onmessage=e=>{(function(e){if(!e||!e.byteLength||4!==e.byteLength)return!1;let t=new DataView(e);return!(1!==t.getUint8(0)||1!==t.getUint8(1)||0!==t.getUint16(2))})(e.data)&&(_n.debug(`[${this._datachannel.label}] Requested keyframe`),this._needKeyframe=!0)},this._encoder.init().then(()=>this._requestFrame()).catch(e=>_n.warn("ScreenCaptureSender init failed",e))}_requestFrame(){this._destroyed||(this._encoder.requestFrame(this._needKeyframe),this._needKeyframe=!1)}_wrapHeader(e,t,n,r,a){let i=function(e,t,n,r,a,i,o){let c=0;t&&(c|=1),n&&(c|=2),r&&(c|=4),o||(c|=8);let s=new ArrayBuffer(11),u=new DataView(s);if(u.setUint8(0,1),u.setUint16(1,a),u.setUint32(3,e),u.setUint8(7,i?1:0),u.setUint16(8,0),u.setUint8(10,c),!o)return s;let l=new Uint8Array(s.byteLength+o.byteLength);return l.set(new Uint8Array(s),0),l.set(new Uint8Array(o),s.byteLength),l.buffer}(e,t,n,r,Qr,this._encoder.isVP9(),a);return Qr=(Qr+1)%65536,i}_stopPacket(){return this._wrapHeader(Date.now(),!1,!1,!1,null)}_send(e){return Xe(this,null,(function*(){return new Promise((t,n)=>{this._sendChunk(e,0,t,n)})}))}_sendChunk(e,t,n,r){if(!this._datachannel||"open"!==this._datachannel.readyState)return void r();let a=e.data.slice(t,t+16373),i=e.data.byteLength<=t+a.byteLength,o=this._wrapHeader(e.timestamp,!t,i,"key"===e.type,a);this._datachannel.onbufferedamountlow=i?()=>{this._datachannel.bufferedAmount<=this._datachannel.bufferedAmountLowThreshold&&n()}:null;try{this._datachannel.send(o)}catch(e){return _n.warn("Error send data to DataChannel",e),void r()}i||window.setTimeout(()=>this._sendChunk(e,t+16373,n,r),0)}destroy(){this._datachannel.onbufferedamountlow=null,this._datachannel.onmessage=null,"open"===this._datachannel.readyState&&this._datachannel.send(this._stopPacket()),this._destroyed=!0,this._encoder.destroy(),_n.debug("ScreenCaptureSender destroyed")}static isBrowserSupported(){return Zr.isBrowserSupported()||Yr.isBrowserSupported()}},Xr="videochat-epi",$r=class extends tt{constructor(e,t){super(),this._previousTimestamp=0,this._signaling=t,this.subscribe(e,zr.REMOTE_DATA_STATS,this._handleStats.bind(this))}destroy(){this.unsubscribe()}static getEstimatedPerformanceIndex(){try{let e=parseInt(localStorage.getItem(Xr)||"",10);return isNaN(e)?0:e}catch(e){return 0}}_handleStats(e){return Xe(this,null,(function*(){if(!dn.perfStatReportEnabled||!e.inbound||!e.inbound.rtps)return;let t=e.inbound.rtps.reduce((e,t)=>("video"===t.kind&&(e.framesDecoded+=t.framesDecoded||0,e.framesReceived+=t.framesReceived||0),e),{framesDecoded:0,framesReceived:0}),n=Date.now();if(!(this._previousTimestamp+5e3>n)){if(t.framesDecoded)try{let e=yield this._signaling.reportPerfStat(t);localStorage.setItem(Xr,e.estimatedPerformanceIndex)}catch(e){}this._previousTimestamp=n}}))}},ea=class extends tt{constructor(e,t,n){super(),this._pc=null,this._producerNotification=null,this._producerCommand=null,this._producerScreen=null,this._consumerScreen=null,this._isOpen=!1,this._reconnectionPrevented=!1,this._state=Gr.IDLE,this._statInterval=null,this._settingsInterval=null,this._statBytes={},this._ssrcMap={},this._producerOfferIsProcessing=!1,this._producerNextOffer=null,this._prevConsumerSettings={},this._captureSender=null,this._captureReceiver=null,this._participantIdRegistry=null,this._disabledSenders=new Set,this._rtpReceiversByStreamId={},this._producerSessionId="",this._signaling=e,this._mediaSource=t,this.subscribe(this._signaling,Pt.NOTIFICATION,this._onSignalingNotification.bind(this)),this.subscribe(this._mediaSource,nr.TRACK_REPLACED,this._onReplacedTrack.bind(this)),this.subscribe(this._mediaSource,nr.SOURCE_CHANGED,this._applyConsumerSettings.bind(this)),this.subscribe(this._mediaSource,nr.SCREEN_STATUS,this._onScreenSharingStatus.bind(this)),this._perfStatReporter=new $r(this,e),this._serverSettings=n,dn.consumerScreenDataChannel&&!Jr.isBrowserSupported()&&(dn.consumerScreenDataChannel=!1),dn.producerScreenDataChannel&&!Kr.isBrowserSupported()&&(dn.producerScreenDataChannel=!1),_n.debug("ServerTransport: Created")}getState(){return this._state||Gr.IDLE}updateStatisticsInterval(){this._stopStatInterval();let e=this.getState();e!==Gr.IDLE&&e!==Gr.CLOSED&&e!==Gr.FAILED&&this._startStatInterval()}open(){this._isOpen?_n.log("ServerTransport: Already opened connections"):(this._isOpen=!0,this._openConnection())}close(e){this._isOpen=!1,this._closeConnection(),this.unsubscribe(),e?(_n.error("ServerTransport: Closed",e),this._setState(Gr.FAILED)):(_n.debug("ServerTransport: Closed"),this._setState(Gr.CLOSED))}removeParticipant(e){var t;null==(t=this._captureReceiver)||t.close(e)}preventRestart(){this._reconnectionPrevented=!0}allowRestart(){this._reconnectionPrevented=!1}updateSettings(e){vr(e,this._serverSettings)||(this._serverSettings=e,this._applyConsumerSettings())}_closeConnection(){this._stopStatInterval(),this._stopSettingsInterval(),this._removeCaptureSender(),this._removeCaptureReceiver(),this._pc&&(this._rtpReceiversByStreamId={},this._disabledSenders.forEach(e=>{var t;return null==(t=e.track)?void 0:t.stop()}),this._disabledSenders.clear(),this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.onsignalingstatechange=null,this._participantIdRegistry=null,ea._closeDataChannel(this._producerNotification),ea._closeDataChannel(this._producerCommand),ea._closeDataChannel(this._producerScreen),ea._closeDataChannel(this._consumerScreen),this._pc.close(),this._pc=null,this._producerOfferIsProcessing=!1,this._producerNextOffer=null),this._triggerEvent(zr.PEER_CONNECTION_CLOSED)}static _closeDataChannel(e){e&&(e.onopen=null,e.onmessage=null,e.onerror=null,e.close())}_createDataChannel(e,t,n){_n.debug(`[${t}] data channel opening`);let r=e.createDataChannel(t,{ordered:!0});r.onopen=()=>{_n.debug(`[${t}] data channel opened`),r.onerror=e=>{_n.error(`[${t}] data channel error`,e)},n(r)}}_openConnection(e=!1){_n.debug("ServerTransport: Open single connection");let t={};$n.baseChromeVersion()&&(t.sdpSemantics=ea._isUnifiedPlanSupported()?"unified-plan":"plan-b"),this._pc=new RTCPeerConnection(t,{optional:[{googSuspendBelowMinBitrate:!1}]}),this._pc.ontrack=this._onAddTrack.bind(this,this._pc),this._pc.onconnectionstatechange=dr.throttle(e=>{this._pc&&this._onConnectionStateChange(this._pc,e)},500),this._pc.onsignalingstatechange=ea._onSignalingStateChange.bind(this,this._pc),dn.producerNotificationDataChannel&&this._createDataChannel(this._pc,Fr.producerNotification,e=>{this._producerNotification=e,this._producerNotification.binaryType="arraybuffer",this._participantIdRegistry=new class{constructor(){this.streamDescriptionByCompactId=new Map}getStreamDescription(e){return this.streamDescriptionByCompactId.get(e)}handleMessage(e){var t,n;let r=new Uint8Array(e),a=r[0],i=r.subarray(1);switch(a){case 1:let e=Ue(i);return Object.entries(e).forEach(([e,t])=>{let n=pr(e);this.streamDescriptionByCompactId.set(t,n)}),null;case 2:case 4:let r=Ue(i),o=[];for(let e of r){let t=this.getStreamDescription(e);t&&o.push(t.participantId)}return 2===a?{type:"notification",notification:xt.AUDIO_ACTIVITY,activeParticipants:o}:{type:"notification",notification:xt.STALLED_ACTIVITY,stalledParticipants:o};case 3:let c=Ue(i);return{type:"notification",notification:xt.SPEAKER_CHANGED,speaker:null==(t=this.getStreamDescription(c))?void 0:t.participantId};case 5:let s=Ue(i);return{type:"notification",notification:xt.VIDEO_QUALITY_UPDATE,quality:{maxBitrate:s[0],maxDimension:s[1]}};case 6:let u=Ue(i),l={};for(let[e,t]of Object.entries(u)){let r=null==(n=this.getStreamDescription(Number(e)))?void 0:n.participantId;r&&(l[r]=t/100)}return{type:"notification",notification:xt.NETWORK_STATUS,statuses:l};case 7:return this._createParticipantSourcesUpdateNotification(i);default:return _n.debug("unsupported message type: "+a),null}}_createParticipantSourcesUpdateNotification(e){let t=Ue(e),n=[];for(let[e,r]of Object.entries(t)){let t,a=r[0],i=r[1],o=r[2];if(null!==a){if(t=this.getStreamDescription(a),!t){_n.error("could not uncompress participant ID "+a);continue}}else t=null;if(null===o){_n.error("unexpected null sequenceNumber",e,r);continue}let c=Bt.PARTICIPANT_AGNOSTIC_TRACK_PREFIX+"-"+e,s=i?i>>>0:null;n.push({participantStreamDescription:t,streamId:c,rtpTimestamp:s,sequenceNumber:o})}return{type:"notification",notification:xt.PARTICIPANT_SOURCES_UPDATE,participantUpdateInfos:n}}},this._signaling.setParticipantIdRegistry(this._participantIdRegistry),this._signaling.setProducerNotificationDataChannel(e)}),dn.producerCommandDataChannel&&this._createDataChannel(this._pc,Fr.producerCommand,e=>{this._producerCommand=e,this._signaling.setProducerCommandDataChannel(e)}),dn.producerScreenDataChannel&&this._createDataChannel(this._pc,Fr.producerScreenShare,e=>{this._producerScreen=e,this._producerScreen.binaryType="arraybuffer",this._createCaptureReceiver()});try{this._mediaSource.addTrackToPeerConnection(this._pc),this._prevConsumerSettings={},this._applyConsumerSettings()}catch(e){return _n.error("ServerTransport: Unable to add media source tracks",e),ir.log(Mt.ERROR,"addTrack-single"),void this.close(e)}dn.consumerScreenDataChannel&&this._createDataChannel(this._pc,Fr.consumerScreenShare,e=>{this._consumerScreen=e,this._consumerScreen.binaryType="arraybuffer";let t=this._mediaSource.getScreenTrack();t&&this._createCaptureSender(t)}),e||this._allocateConsumer(),this._setState(Gr.OPENED),this._startStatInterval(),this._startSettingsInterval()}_reconnect(){this.getState()!==Gr.OPENED&&(this._setState(Gr.RECONNECTING),this._closeConnection(),this._openConnection(!0))}_signalActiveParticipants(e){this._triggerEvent(zr.SIGNALLED_ACTIVE_PARTICIPANTS,e)}_signalStalledParticipants(e){this._triggerEvent(zr.SIGNALLED_STALLED_PARTICIPANTS,e)}_signalSpeakerChanged(e){this._triggerEvent(zr.SIGNALLED_SPEAKER_CHANGED,e)}_signalNetworkStatus(e){this._triggerEvent(zr.NETWORK_STATUS,e)}_updateSSRCMap(e){e&&e.sdp.split("\n").forEach(e=>{let t=`a=ssrc:([0-9]+) label:(audio|video)-((?:[ug]?[\\d]+)|(?:mix)|(?:${Bt.PARTICIPANT_AGNOSTIC_TRACK_PREFIX}-[0-9]+))`,n=new RegExp(t).exec(e);n&&(this._ssrcMap[n[1]]=n[3])})}_createCaptureSender(e){!e||!dn.consumerScreenDataChannel||!this._consumerScreen||!this._mediaSource.getMediaSettings().isScreenSharingEnabled||(this._captureSender&&this._removeCaptureSender(),this._captureSender=new Jr(e,this._consumerScreen))}_removeCaptureSender(){var e;null==(e=this._captureSender)||e.destroy(),this._captureSender=null}_createCaptureReceiver(){!dn.producerScreenDataChannel||!this._producerScreen||!this._participantIdRegistry||(this._captureReceiver&&this._removeCaptureReceiver(),this._captureReceiver=new Kr(this._producerScreen,this._participantIdRegistry,(e,t)=>{this._triggerEvent(zr.REMOTE_STREAM_SECOND,e,t)},e=>{this._triggerEvent(zr.REMOTE_STREAM_SECOND,e,null)}))}_removeCaptureReceiver(){var e;null==(e=this._captureReceiver)||e.destroy(),this._captureReceiver=null}_applyConsumerSettings(){let e=this._mediaSource.getMediaSettings().isScreenSharingEnabled&&!dn.consumerScreenDataChannel?this._serverSettings.screenSharing:this._serverSettings.camera;if(e&&this._pc){let t=[];this._pc.getSenders().forEach(n=>{if(!n.track||n.track.kind!==rr.video)return;let r=!this._disabledSenders.has(n),a=0!==e.maxDimension;if(r&&!a)return _n.log("Disabling video upload"),this._disabledSenders.add(n),void n.replaceTrack($n.getBlackMediaTrack()).catch(e=>{_n.error("Could not disable video upload",e)});let i=this._mediaSource.getSendVideoTrack();if(!r&&a&&i){_n.log("Enabling video upload"),this._disabledSenders.delete(n);let e=n.track;e.enabled=i.enabled,n.replaceTrack(i).then(()=>e.stop()).catch(e=>{_n.error("Could not enable video upload",e)})}dr.applyVideoTrackSettings(e,n,null!=i?i:n.track,this._prevConsumerSettings,t)}),this._prevConsumerSettings=t}}_onScreenSharingStatus(e){e.track?this._createCaptureSender(e.track):this._removeCaptureSender()}_setState(e){this._state!==e&&(this._state=e,this._triggerEvent(zr.STATE_CHANGED,e))}_startStatInterval(){if(this._statInterval)return;let e=()=>{this._pc?(this._collectStat().then(e=>{this._reportStats(e),this._detectStaleTracks(e)}).catch(()=>{}),this._statInterval=window.setTimeout(e,dn.statisticsInterval)):this._stopStatInterval()};this._statInterval=window.setTimeout(e,dn.statisticsInterval)}_stopStatInterval(){this._statInterval&&(window.clearTimeout(this._statInterval),this._statInterval=null),this._statBytes={}}_startSettingsInterval(){if(this._settingsInterval)return;let e=()=>{this._pc?(this._applyConsumerSettings(),this._settingsInterval=window.setTimeout(e,2e3)):this._stopSettingsInterval()};this._settingsInterval=window.setTimeout(e,2e3)}_stopSettingsInterval(){this._settingsInterval&&(window.clearTimeout(this._settingsInterval),this._settingsInterval=null)}_collectStat(){return Xe(this,null,(function*(){if(!this._pc)return Promise.reject();let e=yield Nr(this._pc,this._lastStat,this._ssrcMap);return this._lastStat=e,e}))}_reportStats(e){this._triggerEvent(zr.REMOTE_DATA_STATS,{inbound:{topology:qr.SERVER,transport:e.transport,rtps:e.rtps.filter(e=>"inbound-rtp"===e.type)},outbound:{topology:qr.SERVER,transport:e.transport,rtps:e.rtps.filter(e=>"outbound-rtp"===e.type)}})}_detectStaleTracks(e){let t=e.rtps.find(e=>"inbound-rtp"===e.type&&"audio"===e.kind&&"mix"===this._ssrcMap[e.ssrc]);if(!t)return;let n=Bt.AUDIO_MIX,r=this._statBytes[n],a=!1;if(r){let e=t.bytesReceived-r.bytesReceived;e>=0&&e<=5&&(a=!0),r.stalled!==a&&this._triggerEvent(zr.REMOTE_ALL_STALL,a)}this._statBytes[n]={bytesReceived:t.bytesReceived,stalled:a}}_allocateConsumer(){if(!this._signaling.ready)return;let e={estimatedPerformanceIndex:$r.getEstimatedPerformanceIndex(),audioMix:!0,consumerUpdate:!0,producerNotificationDataChannelVersion:dn.producerNotificationDataChannel?6:0,producerCommandDataChannelVersion:dn.producerCommandDataChannel?2:0,consumerScreenDataChannelVersion:dn.consumerScreenDataChannel?1:0,producerScreenDataChannelVersion:dn.producerScreenDataChannel?1:0,onDemandTracks:!0,unifiedPlan:ea._isUnifiedPlanSupported(),singleSession:!0,videoTracksCount:dn.videoTracksCount};this._signaling.allocateConsumer(null,e)}_acceptProducer(e){return Xe(this,null,(function*(){if(this._producerOfferIsProcessing)return this._producerNextOffer=e,void _n.debug("[single] wait until other remote offer is processed");this._producerOfferIsProcessing=!0;let t=new RTCSessionDescription({type:"offer",sdp:e});if(_n.debug("[single] set remote offer",{offer:t}),!this._pc)throw new Error("Interrupt allocation");this._pc.setRemoteDescription(t).catch(e=>{throw _n.error("[single] unable to set remote offer",e),ir.log(Mt.ERROR,"setRemoteDescription-single"),e}).then(()=>Xe(this,null,(function*(){if(_n.debug("[single] create local answer"),!this._pc)throw new Error("Interrupt allocation");return this._pc.createAnswer()}))).catch(e=>{throw _n.error("[single] unable to create answer",e),ir.log(Mt.ERROR,"createAnswer-single"),e}).then(e=>(e.sdp=dr.patchSDP(e.sdp,!1,$n.isBrokenH264(),!1),e)).then(e=>Xe(this,null,(function*(){if(_n.debug("[single] set local answer",{answer:e}),!this._pc)throw new Error("Interrupt allocation");return yield this._pc.setLocalDescription(e),e}))).catch(e=>{throw _n.error("[single] unable to set local answer",e),ir.log(Mt.ERROR,"setLocalDescription-single"),e}).then(e=>Xe(this,null,(function*(){_n.debug("[single] transmit local answer",{answer:e}),this._updateSSRCMap(t),yield this._signaling.acceptProducer(e,Object.keys(this._ssrcMap)),_n.debug("[single] remote offer has been processed")}))).catch(e=>{_n.warn("[single] unable to send local answer",e),ir.log(Mt.ERROR,"acceptProducer")}).then(()=>Xe(this,null,(function*(){if(this._producerOfferIsProcessing=!1,this._producerNextOffer){_n.debug("[single] there is other unprocessed remote offer, process it");let e=this._producerNextOffer;return this._producerNextOffer=null,this._acceptProducer(e)}}))).catch(e=>this.close(e))}))}_onSignalingNotification(e){return Xe(this,null,(function*(){if(this._isOpen)switch(e.notification){case xt.PRODUCER_UPDATED:yield this._onProducerUpdated(e);break;case xt.REALLOC_CON:this._reconnect();break;case xt.AUDIO_ACTIVITY:this._signalActiveParticipants(e.activeParticipants);break;case xt.SPEAKER_CHANGED:this._signalSpeakerChanged(e.speaker);break;case xt.STALLED_ACTIVITY:this._signalStalledParticipants(e.stalledParticipants);break;case xt.NETWORK_STATUS:this._signalNetworkStatus(e.statuses)}}))}_onProducerUpdated(e){return Xe(this,null,(function*(){this._producerSessionId&&this._producerSessionId!==e.sessionId&&this._reconnect(),dn.breakVideoPayloadTypes&&(_n.log("test mode enabled, video switched off"),this._signaling.requestTestMode("breakVideoPayloadTypes")),this._producerSessionId=e.sessionId,yield this._acceptProducer(e.description)}))}_onAddTrack(e,t){_n.debug("[single] remote track (added)",{track:t.track});let n=t.streams[0];n?(n.onremovetrack||(n.onremovetrack=e=>{this._triggerEvent(zr.REMOTE_TRACK_REMOVED,n.id,n,e.track)}),n.getTracks().find(e=>e.id===t.track.id)||n.addTrack(t.track),this._rtpReceiversByStreamId[n.id]=t.receiver,this._triggerEvent(zr.REMOTE_TRACK_ADDED,n.id,n,t.track)):_n.error("[single] unable to get media stream from track event")}static _onSignalingStateChange(e,t){_n.debug("[single] signaling state changed",{state:e.signalingState},t)}_onConnectionStateChange(e,t){switch(_n.debug("[single] connection state changed",{state:e.connectionState},t),ir.log(Mt.ICE_CONNECTION_STATE,e.connectionState),e.connectionState){case"failed":this._reconnectionPrevented?this.close(new Error("Ice connection failed")):this._reconnect();break;case"connecting":let t=this.getState();t===Gr.IDLE||t===Gr.OPENED?this._setState(Gr.CONNECTING):"checking"===e.iceConnectionState&&this._setState(Gr.RECONNECTING);break;case"disconnected":this._reconnectionPrevented?this.close(new Error("Ice connection disconnected")):this._setState(Gr.RECONNECTING);break;case"connected":this._setState(Gr.CONNECTED),dr.getPeerConnectionHostInfo(e).then(e=>{e&&ir.log(Mt.ICE_CONNECTION_TYPE,e.type)})}}_onReplacedTrack(e,t){this._pc&&(dn.consumerScreenDataChannel&&t&&(e=t),this._pc.getSenders().forEach(t=>{t.track&&t.track.kind===e.kind&&!this._disabledSenders.has(t)&&(t.track.enabled=e.enabled,t.replaceTrack(e).catch(e=>{_n.error("ServerTransport: Unable to replace track",e),ir.log(Mt.ERROR,"replaceTrack-single")}))})),this._applyConsumerSettings()}static _isUnifiedPlanSupported(){let e=$n.baseChromeVersion();return e?dn.isUnifiedPlanSupported("Chrome",e):dn.isUnifiedPlanSupported($n.browserName(),$n.browserVersion())}getStreamWaitingTimeMs(e,t){if(!this._pc)return ir.log(Mt.PAT_WAITING_TIME_ERROR,"noConnection"),_n.error("Cannot get stream waiting time, peer connection is not initialized"),0;let n=this._rtpReceiversByStreamId[e];if(!n)return ir.log(Mt.PAT_WAITING_TIME_ERROR,"noReceiver"),_n.error("Cannot get stream waiting time, cannot find RTP receiver by stream ID: "+e),0;let r=n.getSynchronizationSources();if(!r||!r.length)return _n.log(`Cannot get stream waiting time, ${e} receiver has no synchronization sources`),0;let a=r[0].rtpTimestamp;if(!Number.isInteger(a))return ir.log(Mt.PAT_WAITING_TIME_ERROR,"timestampNotInteger"),_n.error(`Cannot get stream waiting time, ${e} receiver's RTP timestamp is not an integer: ${a}`),0;let i=t-a&4294967295,o=Math.ceil(i/90);return Math.min(100,Math.max(0,o))}};!function(e){e.REMOTE_TRACK_ADDED="REMOTE_TRACK_ADDED",e.REMOTE_TRACK_REMOVED="REMOTE_TRACK_REMOVED",e.REMOTE_STREAM_SECOND="REMOTE_STREAM_SECOND",e.REMOTE_ALL_STALL="REMOTE_ALL_STALL",e.REMOTE_DATA_STATS="REMOTE_DATA_STATS",e.STATE_CHANGED="STATE_CHANGED",e.LOCAL_STATE_CHANGED="LOCAL_STATE_CHANGED",e.SIGNALLED_ACTIVE_PARTICIPANTS="SIGNALLED_ACTIVE_PARTICIPANTS",e.ACTIVE_PARTICIPANTS_NO_SIGNAL="ACTIVE_PARTICIPANTS_NO_SIGNAL",e.SIGNALLED_SPEAKER_CHANGED="SIGNALLED_SPEAKER_CHANGED",e.SIGNALLED_STALLED_PARTICIPANTS="SIGNALLED_STALLED_PARTICIPANTS",e.TOPOLOGY_CHANGED="TOPOLOGY_CHANGED",e.NETWORK_STATUS="NETWORK_STATUS",e.PEER_CONNECTION_CLOSED="PEER_CONNECTION_CLOSED"}(zr||(zr={})),(Wr=Gr||(Gr={})).IDLE="IDLE",Wr.OPENED="OPENED",Wr.CONNECTING="CONNECTING",Wr.RECONNECTING="RECONNECTING",Wr.CONNECTED="CONNECTED",Wr.CLOSED="CLOSED",Wr.FAILED="FAILED",function(e){e.DIRECT="DIRECT",e.SERVER="SERVER"}(qr||(qr={}));var ta,na=class extends tt{constructor(e,t,n,r){super(),this._allocated=[],this._opened=[],this._directTransport=null,this._serverTransport=null,this._dtListeners=[],this._stListeners=[],this._states={},this._localState=Gr.IDLE,this._signaling=t,this._mediaSource=n,this._topology=e,this._serverSettings=r,this.subscribe(this._signaling,Pt.NOTIFICATION,this._onSignalingNotification.bind(this)),e===qr.SERVER&&(this._serverTransport=this._createServerTransport())}updateSettings(e){this._serverSettings=e,this._directTransport&&this._directTransport.updateSettings(e),this._serverTransport&&this._serverTransport.updateSettings(e)}updateStatisticsInterval(){this._directTransport&&this._directTransport.updateStatisticsInterval(),this._serverTransport&&this._serverTransport.updateStatisticsInterval()}allocate(e,t=!1){-1===this._allocated.indexOf(e)?(this._allocated.push(e),this._topology===qr.DIRECT&&!this._directTransport&&(this._directTransport=this._createDirectTransport(e,t)),this._topology===qr.SERVER&&!this._serverTransport&&(this._serverTransport=this._createServerTransport())):_n.warn(`The participant [${e}] has already had allocated transport`)}open(e,t=null){let n=!1;for(let t of e)-1===this._opened.indexOf(t)?-1!==this._allocated.indexOf(t)?(this._opened.push(t),n=!0):_n.warn(`The participant [${t}] has no allocated transport`):_n.warn(`The participant [${t}] has already had opened transport`);!n||(this._topology===qr.DIRECT&&this._directTransport&&this._directTransport.open(t),this._topology===qr.SERVER&&this._serverTransport&&(this._serverTransport.open(),this._setStates(e,this._serverTransport.getState()),this._setLocalState(this._serverTransport.getState())),_n.debug("The transport has been opened",e))}close(e){var t;let n=this._allocated.indexOf(e),r=this._opened.indexOf(e);n<0&&_n.warn(`The participant [${e}] transport has already deallocated`),this._topology===qr.DIRECT&&this._directTransport&&(this._directTransport.close(),this._directTransport=null),this._topology===qr.SERVER&&(null==(t=this._serverTransport)||t.removeParticipant(e),this._setState(e,Gr.CLOSED)),r>=0&&this._opened.splice(r,1),n>=0&&this._allocated.splice(n,1)}destroy(){this.unsubscribe(),this._dtListeners&&this._dtListeners.forEach(e=>{e.dispose()}),this._stListeners&&this._stListeners.forEach(e=>{e.dispose()}),this._directTransport&&(this._directTransport.close(),this._directTransport=null),this._serverTransport&&(this._serverTransport.close(),this._serverTransport=null),this._allocated=[],this._opened=[]}getTopology(){return this._topology}isAllocated(e){return this._allocated.indexOf(e)>=0}allocated(){return this._allocated.slice()}opened(){return this._opened.slice()}_setStates(e,t){let n=e.filter(e=>this._states[e]!==t&&(this._states[e]=t,!0));n.length&&this._triggerEvent(zr.STATE_CHANGED,n,t)}_setState(e,t){this._states[e]!==t&&(this._states[e]=t,this._triggerEvent(zr.STATE_CHANGED,[e],t))}_setLocalState(e){this._localState!==e&&(this._localState=e,this._triggerEvent(zr.LOCAL_STATE_CHANGED,e))}_onSignalingNotification(e){return e.notification===xt.TOPOLOGY_CHANGED?this._onTopologyChanged(e):e.notification===xt.RECORD_STARTED?this._onRecordStarted(e):void 0}_onTopologyChanged(e){var t;if(e.topology!==this._topology){if(_n.log(`Topology changed ${this._topology} -> ${e.topology}`),ir.log(Mt.TOPOLOGY_CHANGE_REQUESTED,e.topology),this._topology=e.topology,this._topology===qr.SERVER&&(this._serverTransport?this._serverTransport.allowRestart():(this._serverTransport=this._createServerTransport(),this._opened.length>0&&(null==(t=this._directTransport)||t.preventRestart(),this._serverTransport.open()))),this._topology===qr.DIRECT){let t=e.offerTo||[],n=e.offerToTypes||[],r=t.length&&n.length?dr.composeId(t[0],n[0]):null;if(this._serverTransport&&this._serverTransport.preventRestart(),!this._allocated||0===this._allocated.length)return void _n.error("Topology changed to DIRECT, but the list of allocated participants is empty");this._allocated.length>1&&_n.warn("Topology changed to DIRECT, but the allocated participants count more then one");let a=this._allocated[0];if(this._directTransport)this._directTransport.allowRestart();else{let e=r===a;this._directTransport=this._createDirectTransport(a,e)}this._opened.indexOf(a)>=0&&this._directTransport.open()}this._triggerEvent(zr.TOPOLOGY_CHANGED,this._topology)}}_onRecordStarted(e){this._serverTransport&&this._serverTransport.open()}_createDirectTransport(e,t=!1){let n=new Rr(e,t,this._signaling,this._mediaSource,this._serverSettings);return this._setLocalNoiseSuppression(!0),this._dtListeners&&this._dtListeners.length>0&&_n.warn(`The list of direct listeners for the participant [${e}] is not empty`),this._dtListeners=[],this._dtListeners.push(n.addEventListener(zr.REMOTE_TRACK_ADDED,this._onDirectRemoteTrackAdded.bind(this,e)),n.addEventListener(zr.REMOTE_TRACK_REMOVED,this._onDirectRemoteTrackRemoved.bind(this,e)),n.addEventListener(zr.REMOTE_DATA_STATS,this._onDirectRemoteDataStats.bind(this)),n.addEventListener(zr.STATE_CHANGED,this._onDirectTransportChanged.bind(this,e)),n.addEventListener(zr.NETWORK_STATUS,this._onTransportNetworkStatus.bind(this)),n.addEventListener(zr.PEER_CONNECTION_CLOSED,this._onPeerConnectionClosed.bind(this,qr.DIRECT))),n}_createServerTransport(){let e=new ea(this._signaling,this._mediaSource,this._serverSettings);return this._setLocalNoiseSuppression(!1),this._stListeners&&this._stListeners.length>0&&_n.warn("The list of server transport listeners is not empty"),this._stListeners=[],this._stListeners.push(e.addEventListener(zr.REMOTE_TRACK_ADDED,this._onServerRemoteTrackAdded.bind(this)),e.addEventListener(zr.REMOTE_TRACK_REMOVED,this._onServerRemoteTrackRemoved.bind(this)),e.addEventListener(zr.REMOTE_ALL_STALL,this._onServerRemoteAllStall.bind(this)),e.addEventListener(zr.REMOTE_DATA_STATS,this._onServerRemoteDataStats.bind(this)),e.addEventListener(zr.STATE_CHANGED,this._onServerTransportChanged.bind(this)),e.addEventListener(zr.ACTIVE_PARTICIPANTS_NO_SIGNAL,this._onTransportActiveParticipantsNoSignal.bind(this)),e.addEventListener(zr.SIGNALLED_ACTIVE_PARTICIPANTS,this._onTransportActiveParticipants.bind(this)),e.addEventListener(zr.SIGNALLED_SPEAKER_CHANGED,this._onTransportSpeakerChanged.bind(this)),e.addEventListener(zr.SIGNALLED_STALLED_PARTICIPANTS,this._onTransportStalledParticipants.bind(this)),e.addEventListener(zr.NETWORK_STATUS,this._onTransportNetworkStatus.bind(this)),e.addEventListener(zr.REMOTE_STREAM_SECOND,this._onRemoteStreamSecond.bind(this)),e.addEventListener(zr.PEER_CONNECTION_CLOSED,this._onPeerConnectionClosed.bind(this,qr.SERVER))),e}_releaseDirectTransport(e){this._directTransport&&(e&&this._directTransport.close(),this._directTransport=null),this._dtListeners&&(this._dtListeners.forEach(e=>{e.dispose()}),this._dtListeners=[])}_releaseServerTransport(e){this._serverTransport&&(e&&this._serverTransport.close(),this._serverTransport=null),this._stListeners&&(this._stListeners.forEach(e=>{e.dispose()}),this._stListeners=[])}_setLocalNoiseSuppression(e){var t;dn.noiseSuppression!==e&&(dn.noiseSuppression=e,null==(t=this._mediaSource)||t.updateNoiseSuppression())}_onDirectTransportChanged(e,t){if(t===Gr.CONNECTED&&this._topology===qr.DIRECT&&this._releaseServerTransport(!0),(t===Gr.CLOSED||t===Gr.FAILED)&&(this._releaseDirectTransport(!1),this._topology===qr.DIRECT)){let t=this._opened.indexOf(e);t>=0&&this._opened.splice(t,1);let n=this._allocated.indexOf(e);n>=0&&this._allocated.splice(n,1)}this._topology===qr.DIRECT&&(this._setState(e,t),this._setLocalState(t))}_onServerTransportChanged(e){let t=this._opened.slice();e===Gr.CONNECTED&&this._topology===qr.SERVER&&this._releaseDirectTransport(!0),(e===Gr.CLOSED||e===Gr.FAILED)&&(this._releaseServerTransport(!1),this._topology===qr.SERVER&&(this._allocated=[],this._opened=[])),this._topology===qr.SERVER&&(this._setStates(t,e),this._setLocalState(e))}_onTransportActiveParticipantsNoSignal(){this._triggerEvent(zr.ACTIVE_PARTICIPANTS_NO_SIGNAL)}_onTransportActiveParticipants(e){this._topology===qr.SERVER&&this._triggerEvent(zr.SIGNALLED_ACTIVE_PARTICIPANTS,e)}_onTransportStalledParticipants(e){this._topology===qr.SERVER&&this._triggerEvent(zr.SIGNALLED_STALLED_PARTICIPANTS,e)}_onTransportSpeakerChanged(e){this._topology===qr.SERVER&&this._triggerEvent(zr.SIGNALLED_SPEAKER_CHANGED,e)}_onTransportNetworkStatus(e){this._triggerEvent(zr.NETWORK_STATUS,e)}_onRemoteStreamSecond(e,t){this._triggerEvent(zr.REMOTE_STREAM_SECOND,e,t)}_onPeerConnectionClosed(e){this._triggerEvent(zr.PEER_CONNECTION_CLOSED,e)}_onServerRemoteAllStall(e){this._topology===qr.SERVER&&this._triggerEvent(zr.REMOTE_ALL_STALL,e)}_onServerRemoteDataStats(e){this._triggerEvent(zr.REMOTE_DATA_STATS,e)}_onDirectRemoteTrackAdded(e,t,n){this._triggerEvent(zr.REMOTE_TRACK_ADDED,e,t,n)}_onDirectRemoteTrackRemoved(e,t,n){this._triggerEvent(zr.REMOTE_TRACK_REMOVED,e,t,n)}_onDirectRemoteDataStats(e){this._triggerEvent(zr.REMOTE_DATA_STATS,e)}_onServerRemoteTrackAdded(e,t,n){this._triggerEvent(zr.REMOTE_TRACK_ADDED,e,t,n)}_onServerRemoteTrackRemoved(e,t,n){this._triggerEvent(zr.REMOTE_TRACK_REMOVED,e,t,n)}getStreamWaitingTimeMs(e,t){return this._topology!==qr.SERVER?(ir.log(Mt.PAT_WAITING_TIME_ERROR,"wrongTopology"),_n.error("Cannot get stream waiting time, incorrect topology: "+this._topology),0):this._serverTransport?this._serverTransport.getStreamWaitingTimeMs(e,t):(ir.log(Mt.PAT_WAITING_TIME_ERROR,"noTransport"),_n.error("Cannot get stream waiting time, server transport is not initialized"),0)}};(ta||(ta={})).VOLUMES_DETECTED="VOLUMES_DETECTED";var ra,aa=class extends tt{constructor(e){super(),this._detector=null,this._interval=null,this.subscribe(e,zr.REMOTE_TRACK_ADDED,this._onRemoteTrackAdded.bind(this)),this.subscribe(e,zr.REMOTE_TRACK_REMOVED,this._onRemoteTrackRemoved.bind(this)),this.subscribe(e,zr.SIGNALLED_ACTIVE_PARTICIPANTS,this._onSignalledActiveParticipants.bind(this)),this.subscribe(e,zr.ACTIVE_PARTICIPANTS_NO_SIGNAL,this._onActiveParticipantsNoSignal.bind(this))}destroy(){var e;this._interval&&(window.clearTimeout(this._interval),this._interval=null),this.unsubscribe(),null==(e=this._detector)||e.destroy(),this._detector=null}_onRemoteTrackAdded(e,t,n){var r;if(n.kind===rr.audio&&(null==(r=this._detector)||r.destroy(),this._detector=new yr(e,t),!this._interval)){let e=()=>{this._collectVolumes(),this._interval=window.setTimeout(e,dn.voiceParams.interval)};this._interval=window.setTimeout(e,dn.voiceParams.interval)}}_onRemoteTrackRemoved(e,t,n){n.kind===rr.audio&&(!this._detector||this._detector.stream!==t||(this._detector.destroy(),this._detector=null))}_collectVolumes(){if(!this._detector)return;let e={},t=this._detector.trackId,n=this._detector.getLevel();if(t===Bt.AUDIO_MIX){if(this._activeParticipants)for(let t of this._activeParticipants)e[t]=n}else e[t]=n;this._triggerEvent(ta.VOLUMES_DETECTED,e)}_onSignalledActiveParticipants(e){this._activeParticipants=e}_onActiveParticipantsNoSignal(){this._activeParticipants=null}};!function(e){e.SPEAKER_CHANGED="SPEAKER_CHANGED"}(ra||(ra={}));var ia,oa=class extends tt{constructor(e,t){super(),this._speakerId=null,this._serverAudioActivityAvailable=!1,this.subscribe(e,ta.VOLUMES_DETECTED,this._onVolumesDetected.bind(this)),this.subscribe(t,zr.SIGNALLED_SPEAKER_CHANGED,this._onServerSpeakerChanged.bind(this)),this.subscribe(t,zr.SIGNALLED_ACTIVE_PARTICIPANTS,this._onReceivedServerAudioActivity.bind(this)),this.subscribe(t,zr.ACTIVE_PARTICIPANTS_NO_SIGNAL,this._onStoppedReceivingServerAudioActivity.bind(this))}destroy(){this.unsubscribe()}_onVolumesDetected(e){if(this._serverAudioActivityAvailable)return;let t=0,n=null;if(Object.keys(e).forEach(r=>{let a=e[r].smoothed;a>t&&a>dn.voiceParams.threshold&&(t=a,n=r)}),n&&n!==this._speakerId){let r=this._speakerId&&e.hasOwnProperty(this._speakerId)?e[this._speakerId].smoothed:0;t>r*dn.voiceParams.speakerLevelMultiplier&&(this._speakerId=n,this._triggerEvent(ra.SPEAKER_CHANGED,n))}}_onServerSpeakerChanged(e){this._serverAudioActivityAvailable&&this._triggerEvent(ra.SPEAKER_CHANGED,e)}_onReceivedServerAudioActivity(){this._serverAudioActivityAvailable=!0}_onStoppedReceivingServerAudioActivity(){this._serverAudioActivityAvailable=!1}},ca=class extends tt{constructor(e,t,n){super(),this._states={},this._volumes={},this._participants={},this._connectionTimeout=0,this._volumeTimeout=0,this._transport=e,this._participants=n,this.subscribe(e,zr.STATE_CHANGED,this._onTransportStateChanged.bind(this)),this.subscribe(t,ta.VOLUMES_DETECTED,this._onVolumesDetected.bind(this))}destroy(){this.unsubscribe(),this._connectionTimeout&&window.clearTimeout(this._connectionTimeout),this._volumeTimeout&&window.clearTimeout(this._volumeTimeout)}onChangeRemoteMediaSettings(e,t){t.isAudioEnabled||(this._volumes[e]=1),t.isAudioEnabled&&(this._volumes[e]=0)}_onTransportStateChanged(e,t){e.forEach(e=>this._states[e]=t),t===Gr.OPENED&&(this._connectionTimeout||(this._connectionTimeout=window.setTimeout(this._onConnectionTimeout.bind(this),dn.specListenerParams.connectionTimeout)),this._volumeTimeout||(this._volumeTimeout=window.setTimeout(this._onVolumeTimeout.bind(this),dn.specListenerParams.volumeTimeout))),t===Gr.FAILED&&this._connectionTimeout&&(_n.warn("Transport failed, send callSpecError"),ir.log(Mt.CALL_SPEC_ERROR,this._transport.getTopology()+"_CONNECTION_TIMEOUT"))}_onVolumesDetected(e){Object.keys(e).forEach(t=>{this._volumes[t]=Math.max(e[t].real,this._volumes[t]||0)})}_onConnectionTimeout(){let e=e=>e!==Gr.CONNECTED;(()=>Object.values(this._states).filter(e).length>0)()&&(_n.warn("There is not connected transport, send callSpecError"),ir.log(Mt.CALL_SPEC_ERROR,this._transport.getTopology()+"_CONNECTION_TIMEOUT")),this._connectionTimeout=0}_onVolumeTimeout(){let e=[];Object.keys(this._volumes).forEach(t=>{if(this._volumes[t]>0)return;let n="UNKNOWN",r=this._participants[t];r&&r.platform&&(n=r.platform),e.indexOf(n)<0&&(e.push(n),ir.log(Mt.CALL_SPEC_ERROR,`${this._transport.getTopology()}_VOLUME_TIMEOUT_${n}`))}),e.length&&_n.warn("There is silent participant, send callSpecError"),this._volumeTimeout=0}};!function(e){e.IDLE="IDLE",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.CLOSE="CLOSE"}(ia||(ia={}));var sa=class extends tt{constructor(e,t,n){super(),this._mediaSource=null,this._conversation=null,this._state=ia.IDLE,this._participantState=At.CALLED,this._participants={},this._transport=null,this._debugInfo=null,this._volumesDetector=null,this._speakerDetector=null,this._localVolumeDetector=null,this._specListener=null,this._activeSpeakerId=null,this._lastSignalledActiveSpeakerId=null,this._serverSettings={camera:null,screenSharing:null},this._signalingServerSettings={camera:null,screenSharing:null},this._lastStalled={},this._remoteAllStalled=!1,this._audioFix=null,this._streamByStreamId=new Map,this._streamIdByStreamDescription=new Map,this._streamWaitTimerByStreamDescription=new Map,this._sequenceNumberByStreamDescription=new Map,this._cooldownTimestampByStreamDescription=new Map,this._cooldownQueueCleanupTimer=null,ir.create(e,n),this._api=e,this._signaling=t,this._onUnload=()=>{this._conversation&&this._api&&this._api.hangupConversation(this._conversation.id),ir.destroy()},window.addEventListener("unload",this._onUnload),this._audioOutput=new class{constructor(){this._output=null,this._volume=1,this._features={setSinkId:!!Audio.prototype.setSinkId}}add(e){this.destroy(),this._output={},this._output.audioTrack=e,this._initAudioElement()}remove(e){!this._output||this._output.audioTrack!==e||this.destroy()}get volume(){return this._volume}set volume(e){this._volume=Math.max(0,Math.min(1,e)),this._output&&this._output.audioElement&&(this._output.audioElement.volume=this._volume)}_initAudioElement(){var e;if(!(null==(e=this._output)?void 0:e.audioTrack))return;let t=new Audio;t.muted=!1,t.volume=this._volume,t.preload="auto";let n=()=>{_n.warn("Error on play audio"),gn.onAutoplayError()},r=e=>{t.srcObject=new MediaStream([e]),t.load();let r=t.play();r?r.catch(n):n()},a=()=>{var e;_n.debug("Recover audio playback");let t=null==(e=this._output)?void 0:e.audioTrack;t?r(t):_n.warn("Broken audio track")};t.onpause=a,t.onstalled=a,t.onerror=a,r(this._output.audioTrack),this._output.audioElement=t}_stopAudioElement(){var e,t,n;(null==(e=this._output)?void 0:e.audioElement)&&(this._output.audioElement.pause(),this._output.audioElement.srcObject=null),null==(n=null==(t=this._output)?void 0:t.audioTrack)||n.stop()}destroy(){!this._output||(this._stopAudioElement(),this._output=null)}changeOutput(){return Xe(this,null,(function*(){var e,t,n;try{if(!this._features.setSinkId)throw new Error('Feature "setSinkId" is not supported');if(!(null==(e=this._output)?void 0:e.audioElement))throw new Error("Audio Element is not initialized");let r=$n.getSavedOutput();r&&(yield null==(n=(t=this._output.audioElement).setSinkId)?void 0:n.call(t,r.deviceId))}catch(e){throw ir.log(Mt.ERROR,"change_output"),_n.error("Output change failed",e),e}}))}},dn.videoTracksCount>0&&(this._cooldownQueueCleanupTimer=window.setInterval(this._cleanupCooldownQueue.bind(this),1e3))}static current(){return sa._current}static hangupAfterInit(){sa._activationMutex&&!sa._current&&(sa._delayedHangup=!0)}static id(){var e,t;return(null==(t=null==(e=sa._current)?void 0:e._conversation)?void 0:t.id)||null}onStart(e,t,n,r="",a=!1,i=!1){return Xe(this,null,(function*(){if(sa._activationMutex)throw ir.log(Mt.ERROR,"startCall"),_n.warn("Conversation: there is already running activation"),new ar(_t.FAILED);sa._activationMutex=!0;try{this._mediaSource=this._createMediaSource(),yield this._mediaSource.request(n);let o=this._mediaSource.getMediaSettings();t===ct.CHAT||e.length>1?this._logWithMediaSettings(Mt.OUTGOING_MULTIPARTY_CALL,o):this._logWithMediaSettings(Mt.OUTGOING_CALL,o);let c=yield this._startConversation(e,t,at.OUTGOING,n,r,a,i);if(!this._conversation)throw new ar(_t.UNKNOWN_ERROR);if(this._participantState=At.ACCEPTED,this._signaling.changeMediaSettings(o),yield this._registerParticipants(c.conversation.participants),this._processConnectionData(c),this._allocateTransport(),this._createSpeakerDetector(),this._createSpecListener(),this._signaling.readyToSend(),sa._delayedHangup)throw new ar(_t.CANCELED);_n.debug("Outgoing call",{opponentIds:e,opponentType:t,mediaOptions:n});let s,u=Object.values(this._participants);return dn.batchParticipantsOnStart&&(s=dr.mapSharedParticipants(u)),gn.onLocalStream(this._mediaSource.getStream(),this._mediaSource.getMediaSettings()),gn.onConversation(this._conversation.externalId,this._conversation.mediaModifiers,s),gn.onLocalStatus(an.WAITING),this._toggleJoinAvailability(),this._changeFeatureSet(),this._changeNeedRate(),sa._current=this,this._conversation.concurrent?yield this._acceptConcurrent():dn.batchParticipantsOnStart||this._setParticipantsStatus(u,an.WAITING),this._conversation}catch(e){throw this._close(e,"Unable to start conversation"),e}finally{sa._activationMutex=!1}}))}onJoin(e){return Xe(this,null,(function*(){if(sa._activationMutex)throw ir.log(Mt.ERROR,"joinCall"),_n.warn("Conversation: there is already running activation"),new ar(_t.FAILED);sa._activationMutex=!0,this._state=ia.PROCESSING;try{this._mediaSource=this._createMediaSource(),yield this._mediaSource.request(e.mediaOptions);let t=this._mediaSource.getMediaSettings();this._logWithMediaSettings(Mt.JOIN_CONVERSATION,t);let n=yield this._joinConversation(e);if(!this._conversation)throw new ar(_t.UNKNOWN_ERROR);return gn.onLocalStream(this._mediaSource.getStream(),t),this._conversation.waitingHall?(_n.log("In waiting hall"),sa._current=this,sa._activationMutex=!1,this._signaling.readyToSend(),gn.onLocalStatus(an.WAITING_HALL),this._conversation):this._onJoinPart2(n)}catch(e){throw sa._activationMutex=!1,this._close(e,"Unable to join conversation"),e}}))}_onJoinPart2(e){return Xe(this,null,(function*(){_n.debug("Join conversation part 2"),sa._activationMutex=!0;try{if(this._participantState=At.ACCEPTED,!this._conversation||!this._mediaSource)throw new ar(_t.UNKNOWN_ERROR);if(this._signaling.changeMediaSettings(this._mediaSource.getMediaSettings()),yield this._registerParticipants(e.conversation.participants),this._processConnectionData(e),this._allocateTransport(),this._createSpeakerDetector(),this._createSpecListener(),this._signaling.readyToSend(),sa._delayedHangup)throw new ar(_t.CANCELED);let t,n=Object.values(this._participants);return dn.batchParticipantsOnStart&&(t=dr.mapSharedParticipants(n)),gn.onConversation(this._conversation.externalId,this._conversation.mediaModifiers,t),gn.onLocalStatus(an.WAITING),this._toggleJoinAvailability(),this._changeNeedRate(),this._state=ia.ACTIVE,this._changeFeatureSet(),sa._current=this,dn.batchParticipantsOnStart||this._setParticipantsStatus(n,an.WAITING),this._openTransport(n,!1),this._conversation}catch(e){throw this._close(e,"Unable to join conversation"),e}finally{sa._activationMutex=!1}}))}onPush(e){return Xe(this,arguments,(function*(e,t=Wt.USER,n){if(sa._activationMutex)throw _n.warn("Conversation: there is already running activation"),new ar(_t.REJECTED);sa._activationMutex=!0;try{let r=yield this._prepareConversation(e,t,n);if(this._mediaSource=this._createMediaSource(),!this._conversation)throw new ar(_t.UNKNOWN_ERROR);if(!r.conversation.participants.find(e=>{var t;return e.state===At.CALLED&&e.id===(null==(t=this._conversation)?void 0:t.userId)}))throw _n.log("Push rejected (there is an active call)"),ir.log(Mt.PUSH,"rejected"),new ar(_t.REJECTED);if(yield this._registerParticipants(r.conversation.participants),this._processConnectionData(r),this._allocateTransport(),this._createSpeakerDetector(),this._createSpecListener(),this._signaling.readyToSend(),ir.log(Mt.PUSH,"accepted"),sa._current=this,sa._delayedHangup)throw new ar(_t.CANCELED);sa._activationMutex=!1}catch(e){throw sa._activationMutex=!1,this._close(e,"Unable to handle inbound call push"),e}}))}_isInWaitingHall(e){if(!e.conversation||(e.conversation.options||[]).indexOf(ht.WAITING_HALL)<0)return!1;let t=(e.conversation.participants||[]).find(t=>dr.comparePeerId(t.peerId,e.peerId));return t&&t.restricted||!1}_acceptConcurrent(){return Xe(this,null,(function*(){if(!this._mediaSource||!this._conversation)throw new ar(_t.UNKNOWN_ERROR);this._state=ia.PROCESSING;let e=this._mediaSource.getMediaSettings();this._logWithMediaSettings(Mt.ACCEPT_CONCURRENT,e),_n.debug("Concurrent call",{conversationId:this._conversation.id});try{yield this._signaling.acceptCall(this._mediaSource.getMediaSettings()),gn.onCallAccepted(),this._state=ia.ACTIVE,this._participantState=At.ACCEPTED,this._changeFeatureSet(),this._openTransport(Object.values(this._participants),!0)}catch(e){this._close(e,"Unable to accept concurrent call")}}))}accept(e){return Xe(this,null,(function*(){if(this._state!==ia.IDLE)throw ir.log(Mt.ERROR,"acceptIncoming"),_n.error("Unable to accept a call - invalid state"),new Error("Unable to accept a call - invalid state");if(!this._mediaSource||!this._conversation)throw new ar(_t.UNKNOWN_ERROR);this._state=ia.PROCESSING,_n.debug("Accept incoming call",e);try{yield this._mediaSource.request(e);let t=this._mediaSource.getMediaSettings();this._logWithMediaSettings(Mt.ACCEPT_INCOMING,t),this._signaling.changeMediaSettings(t),yield this._signaling.acceptCall(t),this._participantState=At.ACCEPTED;let n,r=Object.values(this._participants);return dn.batchParticipantsOnStart&&(n=dr.mapSharedParticipants(r)),gn.onCallAccepted(),gn.onLocalStream(this._mediaSource.getStream(),t),gn.onConversation(this._conversation.externalId,this._conversation.mediaModifiers,n),gn.onLocalStatus(an.WAITING),this._toggleJoinAvailability(),this._changeNeedRate(),(this._conversation.muteState===Ct.MUTE||this._conversation.muteState===Ct.MUTE_PERMANENT)&&(yield this._processMuteState()),this._state=ia.ACTIVE,this._changeFeatureSet(),dn.batchParticipantsOnStart||this._setParticipantsStatus(r,an.WAITING),this._openTransport(r,!0),this._conversation}catch(e){throw this._close(e,"Unable to accept call"),e}}))}decline(){return Xe(this,null,(function*(){var e;if(this._state!==ia.IDLE)throw ir.log(Mt.ERROR,"declineIncoming"),_n.error("Unable to decline a call - invalid state"),new Error("Unable to decline a call - invalid state");this._state=ia.PROCESSING,_n.debug("Decline incoming call"),this._logWithMediaSettings(Mt.DECLINE_INCOMING,null==(e=this._mediaSource)?void 0:e.getMediaSettings()),this._participantState=At.HUNGUP,this._signaling.ready&&(yield this._signaling.hangup(_t.REJECTED)),this._close(new ar(_t.REJECTED))}))}hangup(){return Xe(this,null,(function*(){_n.debug("Hangup");let e=this._state===ia.ACTIVE?_t.HUNGUP:_t.CANCELED;ir.log(Mt.HANGUP,e),this._signaling.ready?(yield this._signaling.hangup(e),this._close(new ar(e))):gn.onHangup(new ar(_t.HUNGUP),this._conversation&&this._conversation.id)}))}addParticipant(e,t){return Xe(this,null,(function*(){if(!this._signaling.ready)return void this._close(new ar(_t.UNKNOWN_ERROR),"Unable to add participant");let n=yield this._signaling.addParticipant(e,t),r=null;"error"===n.type&&(r="call-unfeasible"===n.error?n.status:_t.UNKNOWN_ERROR);let a=n.participant;yield this._onAddParticipant(e,a,r)}))}removeParticipant(e,t=!1){return Xe(this,null,(function*(){this._signaling.ready&&(yield this._signaling.removeParticipant(e,t),this._onRemoveParticipant(e))}))}setVolume(e){this._audioOutput.volume=e}updateStatisticsInterval(){this._transport&&this._transport.updateStatisticsInterval()}_openTransport(e,t){if(!this._transport)return;let n=[];for(let r of e)(r.state===At.CALLED||r.state===At.ACCEPTED)&&this._transport&&!this._transport.isAllocated(r.id)&&this._transport.allocate(r.id,t),this._transport&&r.state===At.ACCEPTED&&n.push(r.id);n.length&&this._transport.open(n)}_close(e,t){t&&_n.error(t,e),_n.debug("Close conversation",e),e.error?this._signaling.ready&&this._signaling.hangup(_t.FAILED):ir.log(Mt.ERROR,e.hangup),sa._activationMutex=!1;let n=this._conversation&&this._conversation.id;return-1!==[_t.CANCELED,_t.NOT_FRIENDS,_t.CALLEE_IS_OFFLINE,_t.CALLER_IS_BLOCKED].indexOf(e.hangup)||e.hangup===_t.REJECTED&&!e.remote?(gn.onHangup(e,n),void this.destroy()):(e.hangup!==_t.HUNGUP||e.remote&&this._participantState!==At.CALLED)&&(e.hangup!==_t.MISSED||e.remote)?e.hangup===_t.SOCKET_CLOSED&&sa._current&&!this._conversation?(this._cleanupSignaling(),void this._cleanupMediaSource()):e.hangup!==_t.BUSY||e.remote?(this._state=ia.CLOSE,this._participantState=At.HUNGUP,this._changeFeatureSet(),this._cleanupMediaSource(),this._cleanupParticipants(),this._cleanupParticipantAgnosticStreams(),this._cleanupTransport(),this._cleanupSpeakerDetector(),this._cleanupSpecListener(),this._cleanupSignaling(),this._api.cleanup(),ir.destroy(),this._conversation=null,sa._current=null,sa._delayedHangup=!1,gn.onHangup(e||new ar(_t.UNKNOWN_ERROR),n),void(null!==this._cooldownQueueCleanupTimer&&(window.clearInterval(this._cooldownQueueCleanupTimer),this._cooldownQueueCleanupTimer=null))):(this._cleanupSignaling(),void this._cleanupMediaSource()):(gn.onHangup(e,n),void this.destroy())}destroy(){let e=this._conversation&&this._conversation.id;_n.debug("Destroy conversation",{conversationId:e}),this._cleanupMediaSource(),this._cleanupParticipants(),this._cleanupParticipantAgnosticStreams(),this._cleanupTransport(),this._cleanupSpeakerDetector(),this._cleanupSpecListener(),this._cleanupSignaling(),this._api.cleanup(),this._cleanupListeners(),ir.destroy(),this._conversation=null,sa._current=null,sa._delayedHangup=!1,null!==this._cooldownQueueCleanupTimer&&(window.clearInterval(this._cooldownQueueCleanupTimer),this._cooldownQueueCleanupTimer=null)}_getConversationParams(){return Xe(this,null,(function*(){let e=yield this._api.getConversationParams();_n.debug("Api.getConversationParams",e);let t=[],{turn_server:n,stun_server:r}=e;if(r&&t.push(r),n){let e=n.urls.filter((e,t,n)=>n.indexOf(e)===t);e.forEach(t=>e.push(t+"?transport=tcp")),t.push({urls:e,username:n.username,credential:n.credential})}dn.iceServers=t,dn.wssBase=e.endpoint,dn.wssToken=e.token,e.client_type&&(dn.clientType=e.client_type)}))}_startConversation(e,t,n,r,a="",i=!1,o=!1){return Xe(this,null,(function*(){let c=dr.uuid();_n.debug("Conversation: start",{conversationId:c,opponentIds:e,opponentType:t,direction:n});let s=r.includes(Et.VIDEO),u=yield this._api.startConversation(c,e,t,s,a,i,o);_n.debug("Api.startConversation",u),yield this._getConversationParams();let l=yield this._connectSignaling(jt.START,u);return yield this._setConversation(u,l,n),l}))}_joinConversation(e){return Xe(this,null,(function*(){let{conversationId:t,mediaOptions:n,chatId:r,joinLink:a}=e;_n.debug("Conversation: join",{conversationId:t,joinLink:a});let i,o=n.includes(Et.VIDEO);if(t)i=yield this._api.joinConversation(t,o,r);else{if(!a)throw new ar(_t.UNKNOWN_ERROR);i=yield this._api.joinConversationByLink(a,o)}_n.debug("Api.joinConversation",i),yield this._getConversationParams();let c=yield this._connectSignaling(jt.JOIN,i);return yield this._setConversation(i,c,at.JOINING),c}))}_prepareConversation(e){return Xe(this,arguments,(function*(e,t=Wt.USER,n){_n.debug("Conversation: push",{conversationId:e,type:t,peerId:n}),yield this._getConversationParams();let r=this._api.getUserId();if(!r)throw new ar(_t.UNKNOWN_ERROR);let a={id:e,peerId:n,endpoint:`${dn.wssBase}?userId=${r}&entityType=${t}&conversationId=${e}&token=${dn.wssToken}`,is_concurrent:!1,p2p_forbidden:!1},i=yield this._connectSignaling(jt.ACCEPT,a);return!sa._current||sa._current._participantState!==At.ACCEPTED&&sa._current._participantState!==At.CALLED?(sa._current&&(sa._current.destroy(),sa._current=null),yield this._setConversation(a,i,at.INCOMING,t),i):(_n.log("Push rejected (busy)"),ir.log(Mt.PUSH,"busy"),this._signaling.ready&&this._signaling.hangup(_t.BUSY),Promise.reject({hangup:_t.BUSY}))}))}_createParticipant(e){return Xe(this,null,(function*(){let t=Object.assign({id:null,externalId:null,mediaSettings:tr(),participantState:{},state:At.CALLED,status:null,remoteStream:null,mediaSource:null,platform:null,clientType:null,roles:[],networkRating:1,lastRequestedLayouts:{}},e);return e.externalId?this._api.cacheExternalId(t.id,e.externalId):t.externalId=yield this._getUserId(t.id),t}))}_getUserId(e){return Xe(this,null,(function*(){try{return yield this._api.userId(e)}catch(e){throw this._close(new ar(_t.NETWORK_ERROR),e),e}}))}_setConversation(e,t,n){return Xe(this,arguments,(function*(e,t,n,r=Wt.USER){let a=t.conversation.participants.map(e=>e.id);yield this._api.prepareUserIds(a);let i=this._api.getUserId();if(!i){let e=(t.conversation.participants||[]).find(e=>dr.comparePeerId(e.peerId,t.peerId));if(!e)throw new ar(_t.UNKNOWN_ERROR);i=Number(e.id),e.idType&&(r=e.idType),this._api.setUserId(i)}let o=dr.composeId(i,r),c=yield this._getUserId(o);this._conversation={userId:i,compositeUserId:o,externalId:c,acceptTime:t.conversation.acceptTime,features:t.conversation.features||[],id:t.conversation.id||e.id,participantsLimit:t.conversation.participantsLimit||30,topology:t.conversation.topology||qr.DIRECT,direction:n,concurrent:t.isConcurrent||e.is_concurrent||!1,needRate:!1,chatId:t.conversation.multichatId,roles:[],recordInfo:null,joinLink:e.join_link,pinnedParticipantId:null,mediaModifiers:t.mediaModifiers,options:[],muteState:Ct.UNMUTE,muteOptions:[],networkRating:1,waitingHall:this._isInWaitingHall(t)},this._signaling.setConversationId(e.id),e.p2p_forbidden&&(dn.forceRelayPolicy=e.p2p_forbidden),ir.log(Mt.RELAY_POLICY,dn.forceRelayPolicy?"1":"0"),this._changeFeatureSet(),this._logDevices()}))}_updateConversation(e){if(!this._conversation)throw new ar(_t.UNKNOWN_ERROR);this._conversation.acceptTime=e.conversation.acceptTime,this._conversation.features=e.conversation.features||[],this._conversation.participantsLimit=e.conversation.participantsLimit||30,this._conversation.topology=e.conversation.topology||qr.DIRECT,this._conversation.concurrent=e.isConcurrent||!1,this._conversation.chatId=e.conversation.multichatId,this._conversation.mediaModifiers=e.mediaModifiers,this._conversation.waitingHall=!1}_createMediaSource(){let e=new cr;return this.subscribe(e,nr.SOURCE_CHANGED,this._onLocalMediaStreamChanged.bind(this)),this.subscribe(e,nr.SCREEN_STATUS,this._onScreenSharingStatus.bind(this)),this._audioFix=new br(e),e}_connectSignaling(e,t){return Xe(this,null,(function*(){return this._signaling.setEndpoint(t.endpoint),this.subscribe(this._signaling,Pt.NOTIFICATION,this._onSignalingNotification.bind(this)),this.subscribe(this._signaling,Pt.FAILED,this._onSignalingFailed.bind(this)),this.subscribe(this._signaling,Pt.RECONNECT,this._onSignalingReconnect.bind(this)),this._signaling.connect(e,t)}))}_registerParticipants(e){return Xe(this,null,(function*(){if(this._conversation)for(let t of e){let e=dr.composeParticipantId(t);e!==this._conversation.compositeUserId?t.state!==At.HUNGUP&&t.state!==At.REJECTED?(this._participants[e]=yield this._createParticipant({id:e,externalId:t.externalId&&ur.fromSignaling(t.externalId),mediaSettings:tr(t.mediaSettings),participantState:dr.mapParticipantState(t),state:t.state,roles:t.roles||[],status:dn.batchParticipantsOnStart?an.WAITING:null}),t.roles&&t.roles.length&&(_n.debug(`Roles for participant [${e}] changed: ${t.roles}`),gn.onRolesChanged(this._participants[e].externalId,t.roles))):this._participants[t.id]&&this._removeParticipant(this._participants[t.id],_t.HUNGUP):(this._conversation.roles=t.roles||[],this._conversation.roles.length&&(_n.debug("Local roles changed: "+t.roles),gn.onLocalRolesChanged(this._conversation.roles)))}}))}_processConnectionData(e){e.muteOptions&&(e.muteState===Ct.MUTE||e.muteState===Ct.MUTE_PERMANENT)&&this._onMuteParticipant(e.muteOptions,!1,e.muteState),e.conversation.pinnedParticipantId&&this._onPinParticipant(e.conversation.pinnedParticipantId),this._onRecordInfo(e.conversation.recordInfo),this._onOptionsChanged(e.conversation.options),e.chatRoom&&e.chatRoom.totalCount&&this._onChatRoomUpdated(ut.ATTENDEE,e.chatRoom.totalCount,e.chatRoom.firstParticipants)}_allocateTransport(){if(!this._conversation||!this._mediaSource)return;this._transport=new na(this._conversation.topology,this._signaling,this._mediaSource,this._serverSettings),this._debugInfo=new _r,this.subscribe(this._transport,zr.STATE_CHANGED,this._onTransportStateChanged.bind(this)),this.subscribe(this._transport,zr.LOCAL_STATE_CHANGED,this._onTransportLocalStateChanged.bind(this)),this.subscribe(this._transport,zr.REMOTE_TRACK_ADDED,this._onRemoteTrackAdded.bind(this)),this.subscribe(this._transport,zr.REMOTE_TRACK_REMOVED,this._onRemoteTrackRemoved.bind(this)),this.subscribe(this._transport,zr.REMOTE_ALL_STALL,this._onRemoteAllStall.bind(this)),this.subscribe(this._transport,zr.REMOTE_DATA_STATS,this._onRemoteDataStats.bind(this)),this.subscribe(this._transport,zr.SIGNALLED_STALLED_PARTICIPANTS,this._onRemoteSignalledStall.bind(this)),this.subscribe(this._transport,zr.ACTIVE_PARTICIPANTS_NO_SIGNAL,this._onRemoteActivityNoSignal.bind(this)),this.subscribe(this._transport,zr.TOPOLOGY_CHANGED,this._onTopologyChanged.bind(this)),this.subscribe(this._transport,zr.NETWORK_STATUS,this._onNetworkStatus.bind(this)),this.subscribe(this._transport,zr.REMOTE_STREAM_SECOND,this._onRemoteStreamSecond.bind(this)),this.subscribe(this._transport,zr.PEER_CONNECTION_CLOSED,this._onPeerConnectionClosed.bind(this));let e=this._conversation.direction===at.OUTGOING&&!this._conversation.concurrent;for(let t of Object.values(this._participants))(t.state===At.ACCEPTED||t.state===At.CALLED)&&this._transport.allocate(t.id,e)}_createSpeakerDetector(){this._transport&&(this._volumesDetector=new aa(this._transport),this.subscribe(this._volumesDetector,ta.VOLUMES_DETECTED,this._onVolumesDetected.bind(this)),this._speakerDetector=new oa(this._volumesDetector,this._transport),this.subscribe(this._speakerDetector,ra.SPEAKER_CHANGED,this._onSpeakerChanged.bind(this)),this._localVolumeDetector=new Er(this._mediaSource))}_createSpecListener(){this._transport&&this._volumesDetector&&(this._specListener=new ca(this._transport,this._volumesDetector,this._participants))}_logDevices(){let e=$n.getCameras().length,t=$n.getMicrophones().length;_n.debug("Cameras: "+e+($n.hasCameraPermission()?"✔":"✖")+", Microphones: "+t+($n.hasMicrophonePermission()?"✔":"✖")),ir.log(Mt.DEVICES,`${e}_${t}`)}_logWithMediaSettings(e,t){ir.log(e,[(null==t?void 0:t.isAudioEnabled)&&"audio",(null==t?void 0:t.isVideoEnabled)&&"video"].filter(Boolean).join("_"))}_removeParticipant(e,t){var n;e.state===At.CALLED||e.state===At.ACCEPTED||this._state===ia.CLOSE||!this._participants[e.id]||(t===_t.HUNGUP?this._setParticipantsStatus([e],an.HANGUP):this._setParticipantsStatus([e],an.ERROR,t),null==(n=e.mediaSource)||n.disconnect(),this._conversation&&this._conversation.pinnedParticipantId===e.id&&(this._conversation.pinnedParticipantId=null),this.updateDisplayLayout([{uid:e.externalId,mediaType:lr.CAMERA,stopStream:!0}]),delete this._participants[e.id],gn.onRemoteRemoved(e.externalId))}_cleanupListeners(){this.unsubscribe(),window.removeEventListener("unload",this._onUnload)}_cleanupMediaSource(){this._mediaSource&&(this._mediaSource.destroy(),this._mediaSource=null)}_cleanupParticipants(){Object.values(this._participants).forEach(e=>{var t,n,r;null==(t=e.remoteStream)||t.getTracks().forEach(e=>e.stop()),null==(n=e.secondStream)||n.getTracks().forEach(e=>e.stop()),null==(r=e.mediaSource)||r.disconnect()}),this._participants={},this._audioOutput&&this._audioOutput.destroy()}_cleanupParticipantAgnosticStreams(){_n.debug("cleaning up participant-agnostic streams"),this._streamByStreamId.forEach(e=>{e.getTracks().forEach(e=>{e.stop()})}),this._streamByStreamId=new Map,this._streamWaitTimerByStreamDescription.forEach(e=>{window.clearTimeout(e)}),this._streamWaitTimerByStreamDescription=new Map,this._streamIdByStreamDescription=new Map,this._sequenceNumberByStreamDescription=new Map,this._cooldownTimestampByStreamDescription=new Map}_cleanupTransport(){this._transport&&(this._transport.destroy(),this._transport=null),this._debugInfo&&(this._debugInfo=null)}_cleanupSpeakerDetector(){this._speakerDetector&&(this._speakerDetector.destroy(),this._speakerDetector=null),this._volumesDetector&&(this._volumesDetector.destroy(),this._volumesDetector=null),this._localVolumeDetector&&(this._localVolumeDetector.destroy(),this._localVolumeDetector=null)}_cleanupSpecListener(){this._specListener&&(this._specListener.destroy(),this._specListener=null)}_cleanupSignaling(){this._signaling.close(),this._signaling.cleanup()}_onAddParticipant(e,t,n){return Xe(this,null,(function*(){_n.debug(`Add new participant [${e}]`);let r=this._participants[e];!r||r.state!==At.ACCEPTED&&r.state!==At.CALLED?(r||(this._participants[e]=yield this._createParticipant({id:e,externalId:t.externalId&&ur.fromSignaling(t.externalId),mediaSettings:tr(t.mediaSettings),state:t.state,roles:t.roles||[]}),r=this._participants[e]),this._setParticipantsStatus([r],an.WAITING),n?(r.state=At.HUNGUP,this._removeParticipant(r,n)):this._transport&&(r.state=At.CALLED,this._transport.allocate(r.id,!0),ir.log(Mt.ADD_PARTICIPANT))):_n.warn(`Participant [${r.id}:${r.state}] is already in conversation`)}))}_onRemoveParticipant(e){_n.debug(`Remove participant [${e}]`);let t=this._participants[e];t?(this._transport&&this._transport.close(t.id),ir.log(Mt.REMOVE_PARTICIPANT)):_n.warn(`Participant [${e}] isn't in conversation`)}changeDevice(e){return Xe(this,null,(function*(){return"audiooutput"===e?this._audioOutput.changeOutput():this._mediaSource?("audioinput"===e&&(this._audioFix=new br(this._mediaSource)),this._mediaSource.changeDevice(e)):Promise.reject(gt.UNKNOWN)}))}toggleScreenCapturing(e){return Xe(this,null,(function*(){return this._mediaSource?this._mediaSource.toggleScreenCapturing(e):Promise.reject(gt.UNKNOWN)}))}setVideoStream(e,t=!1){return Xe(this,null,(function*(){if(this._mediaSource)return this._mediaSource.setVideoStream(e,t)}))}setAudioStream(e){return Xe(this,null,(function*(){if(this._mediaSource)return this._mediaSource.setAudioStream(e)}))}toggleLocalVideo(e){return Xe(this,null,(function*(){if(this._mediaSource)return ir.log(Mt.MEDIA_STATUS,e?"video_1":"video_0"),this._mediaSource.toggleVideo(e)}))}toggleLocalAudio(e){return Xe(this,null,(function*(){if(this._mediaSource)return ir.log(Mt.MEDIA_STATUS,e?"audio_1":"audio_0"),this._mediaSource.toggleAudio(e)}))}changePriorities(e){return Xe(this,null,(function*(){if(e.length<2||!this._signaling.ready)return;let t={},n={};for(let t of e){let e="object"==typeof t.uid?t.uid:ur.fromId(t.uid);n[ur.toString(e)]=t.priority}for(let e of Object.values(this._participants)){let r=ur.toString(e.externalId);n.hasOwnProperty(r)&&(t[e.id]=n[r])}yield this._signaling.changePriorities(t)}))}changeParticipantState(e){return Xe(this,null,(function*(){for(let[t,n]of Object.entries(e))if(t.length>5||n.length>5)throw new Error("key/value max length is 5 chars, mappings with empty values (null or empty string) are discarded");yield this._signaling.changeParticipantState(e)}))}updateDisplayLayout(e){return Xe(this,null,(function*(){if(e.length<1||!this._signaling.ready)return;_n.log(`Update display layout [${this._signaling.getNextCommandSequenceNumber()}]`,e);let t={};for(let n of e){let e="object"==typeof n.uid?n.uid:ur.fromId(n.uid),r=ur.toString(e),a=this._api.getCachedOkIdByExternalId(e);if(!a){_n.log("Unknown participant external ID "+r);continue}let i=fr({participantId:a,mediaType:n.mediaType,streamName:n.streamName}),o=this._participants[a];o&&(o.lastRequestedLayouts[i]=n),sa._isStopStreaming(n)?this._streamIdByStreamDescription.has(i)&&!this._cooldownTimestampByStreamDescription.has(i)&&this._cooldownTimestampByStreamDescription.set(i,Date.now()):(this._cooldownTimestampByStreamDescription.delete(i),!this._streamIdByStreamDescription.has(i)&&dn.videoTracksCount>0&&this._streamIdByStreamDescription.set(i,null),t[i]=sa._layoutToString(n))}let n=this._cooldownTimestampByStreamDescription.keys();for(;this._streamIdByStreamDescription.size>dn.videoTracksCount;){let e=n.next();if(e.done){_n.error("Cannot accommodate all streaming requests: tracks available "+dn.videoTracksCount+"; requested streams: "+Array.from(this._streamIdByStreamDescription.keys()));break}this._stopStreaming(e.value),t[e.value]=sa._layoutToString({stopStream:!0})}yield this._sendUpdateDisplayLayout(t)}))}_stopStreaming(e){if(this._cooldownTimestampByStreamDescription.delete(e),this._sequenceNumberByStreamDescription.set(e,this._signaling.getNextCommandSequenceNumber()),this._streamWaitTimerByStreamDescription.has(e)&&(_n.log("Client asked to stop streaming before stream became available",e),window.clearTimeout(this._streamWaitTimerByStreamDescription.get(e)),this._streamWaitTimerByStreamDescription.delete(e)),this._streamIdByStreamDescription.get(e)){let t=pr(e),n=this._participants[t.participantId];n?(!t.streamName||t.mediaType!==lr.STREAM&&t.mediaType!==lr.SCREEN?gn.onRemoteStream(n.externalId,null):gn.onRemoteLive(n.externalId,t.streamName,null),ir.log(Mt.PAT_DEALLOCATED)):_n.log("Cannot find participant to stop streaming: "+t.participantId)}this._streamIdByStreamDescription.delete(e)}_sendUpdateDisplayLayout(e){return Xe(this,null,(function*(){if(0===Object.keys(e).length)return;let t=yield this._signaling.updateDisplayLayout(e);if(!t)return;let n=[];for(let[e,r]of Object.entries(t.errorCodeByParticipantId||{})){let t=pr(e),a=this._participants[t.participantId];if(a){let e;"number"!=typeof r?(_n.warn(`Unexpected error code ${r} received for participant ${t.participantId}`),e=Ht.UNKNOWN_ERROR):e=Vt(r),n.push({externalId:a.externalId,errorReason:e})}}if(n&&n.length)throw new pa("Could not allocate one or more participants",n)}))}_cleanupCooldownQueue(){let e={},t=this._cooldownTimestampByStreamDescription.entries();for(;;){let n=t.next();if(n.done)break;let r=n.value;if(r[1]+1e4>Date.now())break;let a=r[0];this._stopStreaming(a),e[a]=sa._layoutToString({stopStream:!0})}this._sendUpdateDisplayLayout(e)}static _isStopStreaming(e){return e.stopStream}static _layoutToString(e){if(sa._isStopStreaming(e))return"ss";let t="";return void 0!==e.priority&&(t+="p="+e.priority),void 0!==e.width&&void 0!==e.height&&(""!==t&&(t+=":"),t+="sz="+Math.round(e.width)+"x"+Math.round(e.height)),void 0!==e.fit&&(""!==t&&(t+=":"),t+="fit="+e.fit),e.keyFrame&&(""!==t&&(t+=":"),t+="kf"),t}_onParticipantSourcesUpdate(e){if(this._conversation){_n.log("Received participant sources update notification",e);for(let t of e)this._waitForStreamIfNeeded(t)}}_onParticipantPromoted(e){return Xe(this,null,(function*(){_n.log("Promoted in waiting hall",!e.demote),e.demote?(_n.log("Kicked from waiting hall"),this._close(new ar(_t.REMOVED))):(this._updateConversation(e),yield this._onJoinPart2(e))}))}_onChatRoomUpdated(e){return Xe(this,arguments,(function*(e,t=0,n=[]){_n.log("Chat room updated: "+e);let r=[],a=[];n.length&&(n.forEach(e=>{if(e.externalId){let t=ur.fromSignaling(e.externalId);r.push(t),this._api.cacheExternalId(e.id.id,t)}else a.push(dr.decomposeId(e.id.id).id)}),a.length&&!r.length&&(r=yield this._api.getExternalIdsByOkIds(a))),gn.onChatRoomUpdated(e,t,r)}))}_waitForStreamIfNeeded(e){var t,n;let r=this._matchStreamDescription(e.participantStreamDescription);if(!r||dn.producerScreenTrack&&r.mediaType===lr.SCREEN)return;let a=fr(r),i=this._sequenceNumberByStreamDescription.get(a);if(i&&i>e.sequenceNumber)return _n.warn(`Participant ${r.participantId} received outdated PAT response: sequence number ${e.sequenceNumber}; last sent sequence number for given participant is ${i}`),void ir.log(Mt.PAT_OUTDATED_RESPONSE);let o=e.streamId,c=e.rtpTimestamp?this._getWaitingTime(o,e.rtpTimestamp):0;if(c<=0){this._streamWaitTimerByStreamDescription.delete(a);let i=r.participantId,c=this._participants[i];if(!c)return ir.log(Mt.PAT_ERROR,"participantMissing"),void _n.error("Could not find participant by ID: "+i);let s=this._streamByStreamId.get(o);if(!s)return ir.log(Mt.PAT_ERROR,"streamNotFound"),void _n.error("Could not find stream by ID: "+o);ir.log(Mt.PAT_ALLOCATED),this._streamIdByStreamDescription.set(a,o);let u=null==(t=e.participantStreamDescription)?void 0:t.mediaType;if(u===lr.STREAM||u===lr.MOVIE)(null==(n=e.participantStreamDescription)?void 0:n.streamName)&&gn.onRemoteLive(c.externalId,e.participantStreamDescription.streamName,s);else{let e=(dn.producerScreenTrack?null:c.secondStream)||s;gn.onRemoteStream(c.externalId,e)}}else{_n.debug(`Waiting for ${c} until stream ${o} for ${a} is switched`);let t=window.setTimeout(this._waitForStreamIfNeeded.bind(this,e),c);this._streamWaitTimerByStreamDescription.set(a,t)}}_matchStreamDescription(e){if(!e)return null;if(this._streamIdByStreamDescription.has(fr(e)))return e;let t=e.participantId;if(e.mediaType){let e={participantId:t,mediaType:null};if(this._streamIdByStreamDescription.has(fr(e)))return e}else{let e={participantId:t,mediaType:lr.CAMERA};if(this._streamIdByStreamDescription.has(fr(e)))return e;let n={participantId:t,mediaType:lr.SCREEN};if(this._streamIdByStreamDescription.has(fr(n)))return n}return _n.error("Received unrequested allocation",e),null}_getWaitingTime(e,t){if(this._transport)return this._transport.getStreamWaitingTimeMs(e,t);throw new Error("transport is not initialized")}_isCallAdmin(){return!!this._conversation&&dr.includesOneOf(this._conversation.roles,[zt.ADMIN,zt.CREATOR])}_checkAdminRole(){if(this._conversation&&!dr.includesOneOf(this._conversation.roles,[zt.ADMIN,zt.CREATOR]))throw new Error("You don't have the required permission")}grantRoles(e,t,n){return Xe(this,null,(function*(){this._checkAdminRole(),yield this._signaling.grantRoles(e,t,n)}))}switchParticipantDevice(e=null,t,n,r=!1){return Xe(this,null,(function*(){this._checkAdminRole(),yield this._signaling.muteParticipant(e,t,n,r)}))}pinParticipant(e,t){return Xe(this,null,(function*(){this._checkAdminRole(),yield this._signaling.pinParticipant(e,t)}))}updateMediaModifiers(e){return Xe(this,null,(function*(){this._signaling.ready&&this._conversation&&(this._conversation.mediaModifiers=e,yield this._signaling.updateMediaModifiers(e))}))}changeOptions(e){return Xe(this,null,(function*(){if(this._signaling.ready&&this._conversation){this._checkAdminRole(),yield this._signaling.changeOptions(e);let t=function(e,t){let n=new Set(e);for(let[e,r]of Object.entries(t))r?n.add(e):n.delete(e);return Array.from(n)}(this._conversation.options,e);this._onOptionsChanged(t)}}))}getWaitingHall(e,t,n){return Xe(this,null,(function*(){if(!this._signaling)return Promise.reject();let r=null;e&&(r=function(e){try{return JSON.parse(atob(e))}catch(t){_n.warn("WaitingParticipant: failed convert from string",e,t)}return null}(e));let a=yield this._signaling.getWaitingHall(r,t,n);if(a.error)return Promise.reject(a.message);let i=a.participants||[],o=[],c=[],s=null;return i.length&&(i.forEach(e=>{if(e.externalId){let t=ur.fromSignaling(e.externalId);o.push(t),this._api.cacheExternalId(e.id.id,t)}else c.push(dr.decomposeId(e.id.id).id)}),c.length&&!o.length&&(o=yield this._api.getExternalIdsByOkIds(c)),a.hasMore&&(s=function(e){try{return btoa(JSON.stringify(e))}catch(t){_n.warn("WaitingParticipant: failed convert to string",e,t)}return null}(i[i.length-1].id))),{participants:o,pageMarker:s,totalCount:a.totalCount||0}}))}promoteParticipant(e,t){return Xe(this,null,(function*(){this._signaling&&(yield this._signaling.promoteParticipant(e,t))}))}chatMessage(e,t=null){return Xe(this,null,(function*(){this._signaling.ready&&(yield this._signaling.chatMessage(e,t))}))}chatHistory(e){return Xe(this,null,(function*(){if(this._signaling.ready){let t=yield this._signaling.chatHistory(e);for(let e=t.messages.length-1;e>=0;e--){let n=t.messages[e];yield this._onChatMessage(n)}}}))}customData(e,t=null){return Xe(this,null,(function*(){this._signaling.ready&&(yield this._signaling.customData(e,t))}))}createJoinLink(){return Xe(this,null,(function*(){if(this._conversation){let e=(yield this._api.createJoinLink(this._conversation.id)).join_link;if(e)return this._conversation.joinLink=e,e}return Promise.reject()}))}removeJoinLink(){return Xe(this,null,(function*(){if(!this._conversation||!(yield this._api.removeJoinLink(this._conversation.id)).success)return Promise.reject();delete this._conversation.joinLink}))}addMovie(e){return Xe(this,null,(function*(){var t;let n={movieId:e,participantId:null==(t=this._conversation)?void 0:t.compositeUserId},r=yield this._signaling.addMovie(n);if(r.error)throw new Error(r.error);return{movieId:r.movieId,streamType:r.streamType}}))}updateMovie(e,t){return Xe(this,null,(function*(){var n;let r={movieId:e,participantId:null==(n=this._conversation)?void 0:n.compositeUserId};(t||0===t)&&(r.gain=t);let a=yield this._signaling.updateMovie(r);if(a.error)throw new Error(a.error)}))}removeMovie(e){return Xe(this,null,(function*(){var t;let n={movieId:e,participantId:null==(t=this._conversation)?void 0:t.compositeUserId},r=yield this._signaling.removeMovie(n);if(r.error)throw new Error(r.error)}))}startStream(e=!1,t=null,n=null,r="DIRECT_LINK",a=null){return Xe(this,null,(function*(){let i={movieId:n,name:t,privacy:r,groupId:a,streamMovie:!e},o=yield this._signaling.startStream(i);return o.error?Promise.reject(o.message):o}))}stopStream(){return Xe(this,null,(function*(){let e=yield this._signaling.stopStream();return e.error?Promise.reject():e}))}recordSetRole(e,t){return Xe(this,null,(function*(){let n=yield this._signaling.recordSetRole(e,t);if(n.error)throw new Error(n.error)}))}getStreamInfo(){return Xe(this,null,(function*(){let e=yield this._signaling.getRecordStatus();return{movieId:e.recordMovieId,preview:e.recordMoviePreviewUrl}}))}setLocalResolution(e,t){return Xe(this,null,(function*(){var n;if(e<dn.videoMinWidth||t<dn.videoMinHeight)throw new Error("Sizes received are less than the `videoMinWidth` or `videoMinHeight`");return dn.videoMaxWidth=e,dn.videoMaxHeight=t,null==(n=this._mediaSource)?void 0:n.setResolution(e,t)}))}videoEffect(e){return Xe(this,null,(function*(){var t;return null==(t=this._mediaSource)?void 0:t.videoEffect(e)}))}_onLocalMediaStreamChanged(e){return Xe(this,null,(function*(){var t;!this._conversation||(_n.debug("Local media stream changed",e.mediaSettings),gn.onLocalStreamUpdate(e.mediaSettings,e.kind),this._signaling.ready&&!(null==(t=this._conversation)?void 0:t.waitingHall)&&(yield this._signaling.changeMediaSettings(e.mediaSettings)))}))}_onScreenSharingStatus(e){return Xe(this,null,(function*(){var t;if(_n.log("Screen sharing changed",e.track,e.mediaSettings),dn.consumerScreenTrack){let n=e.track?new MediaStream([e.track]):null;gn.onScreenStream(n,e.mediaSettings),this._signaling.ready&&!(null==(t=this._conversation)?void 0:t.waitingHall)&&(yield this._signaling.changeMediaSettings(e.mediaSettings))}}))}_changeRemoteMediaSettings(e,t){_n.debug(`Remote media settings changed [${e}]`,t);let n=this._participants[e];!n||(n.mediaSettings=t,this._state===ia.ACTIVE&&gn.onRemoteMediaSettings(n.externalId,t),this._specListener&&this._specListener.onChangeRemoteMediaSettings(e,t))}_changeRemoteParticipantState(e,t){_n.debug(`Remote participant state changed [${e}]`,t);let n=this._participants[e];!n||(n.participantState=t||{},this._state===ia.ACTIVE&&(dn.participantStateMapped?gn.onRemoteParticipantState(n.externalId,n.participantState):gn.onRemoteParticipantState(n.externalId,dr.mapLegacyParticipantState(n.participantState))))}_onSignalingNotification(e){var t;switch(e.notification){case xt.ACCEPTED_CALL:return this._onAcceptedCall(e);case xt.HUNGUP:return this._onHungup(e);case xt.PARTICIPANT_ADDED:return this._onAddedParticipant(e);case xt.PARTICIPANT_JOINED:return this._onJoinedParticipant(e);case xt.CLOSED_CONVERSATION:return this._onClosedConversation(e);case xt.MEDIA_SETTINGS_CHANGED:return this._onMediaSettingsChanged(e);case xt.PARTICIPANT_STATE_CHANGED:return this._onParticipantStateChanged(e);case xt.RATE_CALL_DATA:return this._onNeedRate();case xt.FEATURE_SET_CHANGED:return this._onFeatureSetChanged(e);case xt.MULTIPARTY_CHAT_CREATED:return this._onMultipartyChatCreated(e);case xt.FORCE_MEDIA_SETTINGS_CHANGE:return this._onForceMediaSettingsChange(e);case xt.SETTINGS_UPDATE:return this._onSettingsUpdate(e);case xt.VIDEO_QUALITY_UPDATE:return this._onVideoQualityUpdate(e);case xt.REGISTERED_PEER:return this._onPeerRegistered(e);case xt.SWITCH_MICRO:return this._onMicSwitched(e);case xt.CHAT_MESSAGE:return this._onChatMessage(e);case xt.CUSTOM_DATA:return this._onCustomData(e);case xt.RECORD_STARTED:return this._onRecordInfo(e.recordInfo);case xt.RECORD_STOPPED:return this._onRecordInfo(null);case xt.ROLES_CHANGED:return this._onRolesChanged(e.participantId,e.roles||[]);case xt.MUTE_PARTICIPANT:let n=e.unmute?(null==(t=this._conversation)?void 0:t.muteState)||Ct.UNMUTE:e.mutePermanent?Ct.MUTE_PERMANENT:Ct.MUTE;return this._onMuteParticipant(e.mediaOptions||[],e.unmute||!1,n);case xt.PIN_PARTICIPANT:return this._onPinParticipant(e.participantId,e.unpin);case xt.OPTIONS_CHANGED:return this._onOptionsChanged(e.options||[]);case xt.PARTICIPANT_SOURCES_UPDATE:return this._onParticipantSourcesUpdate(e.participantUpdateInfos);case xt.PROMOTE_PARTICIPANT:return this._onParticipantPromoted(e);case xt.CHAT_ROOM_UPDATED:return this._onChatRoomUpdated(e.eventType,e.totalCount,e.firstParticipants)}}_onSignalingReconnect(e){return Xe(this,null,(function*(){if(!this._conversation)return;e.conversation.acceptTime&&(this._conversation.acceptTime=e.conversation.acceptTime),e.conversation.participantsLimit&&(this._conversation.participantsLimit=e.conversation.participantsLimit),e.conversation.features&&(this._conversation.features=e.conversation.features,this._changeFeatureSet()),e.conversation.pinnedParticipantId!==this._conversation.pinnedParticipantId&&(e.conversation.pinnedParticipantId?this._onPinParticipant(e.conversation.pinnedParticipantId,!1):this._conversation.pinnedParticipantId&&this._onPinParticipant(this._conversation.pinnedParticipantId,!0)),e.conversation.state;let t=null;if(e.conversation.participants){let n=Object.keys(this._participants),r=[];for(let n of e.conversation.participants){let e=dr.composeParticipantId(n),a=n.roles||[];if(e===this._conversation.compositeUserId){t=tr(n.mediaSettings),Gt(this._conversation.roles,a)||this._onRolesChanged(e,a);continue}r.push(e);let i=this._participants[e];if(i){let t=tr(n.mediaSettings);er(t,i.mediaSettings)||this._changeRemoteMediaSettings(e,t);let r=dr.mapParticipantState(n),o=i.participantState;dr.isEqualParticipantState(r,o)||this._changeRemoteParticipantState(e,r),Gt(a,i.roles)||this._onRolesChanged(i.id,a)}else yield this._onJoinedParticipant({participantId:n.id,participant:n,mediaSettings:n.mediaSettings})}for(let e of n)r.indexOf(e)<0&&this._removeParticipant(this._participants[e],_t.HUNGUP)}(e.muteState===Ct.MUTE||e.muteState===Ct.MUTE_PERMANENT)&&this._onMuteParticipant(e.muteOptions,!1,e.muteState,t),e.unmuteOptions&&e.unmuteOptions.length&&this._onMuteParticipant(e.unmuteOptions,!0,e.muteState,t),this._onRecordInfo(e.conversation.recordInfo),this._onOptionsChanged(e.conversation.options)}))}_onSignalingFailed(e){_n.error("Signaling failed",e),this._close(e)}_onAcceptedCall(e){return Xe(this,null,(function*(){let t=dr.composeMessageId(e),n=dr.getPeerIdString(e.peerId);if(_n.debug(`Participant accepted call [${t}]`),this._conversation&&t===this._conversation.compositeUserId)return void this._close(new ar(_t.MISSED),"Call accepted on other device");let r=this._participants[t];r||(this._participants[t]=yield this._createParticipant({id:t,mediaSettings:tr(e.mediaSettings)}),r=this._participants[t]),r.state=At.ACCEPTED,r.mediaSettings=tr(e.mediaSettings),this._logWithMediaSettings(Mt.ACCEPTED_OUTGOING,r.mediaSettings),this._conversation&&this._conversation.direction===at.OUTGOING&&(this._state===ia.IDLE||this._state===ia.PROCESSING)&&(this._state=ia.ACTIVE,this._changeFeatureSet()),this._state===ia.ACTIVE&&this._transport&&this._transport.open([r.id],n),this._changeRemoteMediaSettings(t,r.mediaSettings),this._changeRemoteParticipantState(t)}))}_onHungup(e){_n.debug(`Participant hungup [${e.participantId}]`,{reason:e.reason});let t=dr.composeMessageId(e);if(this._conversation&&this._conversation.compositeUserId===t)return void this._close(new ar(e.reason));let n=this._participants[t];n?(this._transport&&this._transport.close(t),n.state=e.reason===_t.REJECTED?At.REJECTED:At.HUNGUP,this._state!==ia.CLOSE&&this._removeParticipant(n,_t.HUNGUP)):_n.warn(`Participant [${t}] isn't in conversation`)}_onAddedParticipant(e){return Xe(this,null,(function*(){var t,n;_n.debug(`Participant added [${e.participantId}]`);let r=dr.composeMessageId(e),a=this._participants[r];a&&a.state!==At.HUNGUP&&a.state!==At.REJECTED?_n.debug(`Participant [${r}] is already in conversation and is active`):(a||(this._participants[r]=yield this._createParticipant({id:r,externalId:e.participant.externalId&&ur.fromSignaling(e.participant.externalId),mediaSettings:tr(e.participant.mediaSettings),state:e.participant.state,participantState:dr.mapParticipantState(e.participant),roles:e.participant.roles||[]}),a=this._participants[r]),a.state=At.CALLED,a.mediaSettings=tr(null==(t=e.participant)?void 0:t.mediaSettings),a.participantState=dr.mapParticipantState(e.participant),a.roles=(null==(n=e.participant)?void 0:n.roles)||[],this._setParticipantsStatus([a],an.WAITING),this._state===ia.ACTIVE&&this._transport&&this._transport.allocate(a.id,!0),this._changeRemoteMediaSettings(r,a.mediaSettings),this._changeRemoteParticipantState(r,a.participantState))}))}_onJoinedParticipant(e){return Xe(this,null,(function*(){var t;_n.debug(`Participant joined [${e.participantId}]`);let n=dr.composeMessageId(e),r=this._participants[n];r&&r.state===At.ACCEPTED?_n.warn(`Participant [${n}] is already in conversation and is active`):(r||(this._participants[n]=yield this._createParticipant({id:n,externalId:e.participant.externalId&&ur.fromSignaling(e.participant.externalId),mediaSettings:tr(e.participant.mediaSettings),state:e.participant.state,participantState:dr.mapParticipantState(e.participant),roles:e.participant.roles||[]}),r=this._participants[n]),this._conversation&&this._conversation.direction===at.OUTGOING&&(this._state===ia.IDLE||this._state===ia.PROCESSING)&&(this._state=ia.ACTIVE,this._changeFeatureSet()),r.state=At.ACCEPTED,r.mediaSettings=tr(e.mediaSettings),r.participantState=dr.mapParticipantState(e.participant),r.roles=e.participant.roles||[],(null==(t=this._transport)?void 0:t.isAllocated(r.id))?this._setParticipantsStatus([r],an.CONNECTED):this._setParticipantsStatus([r],an.WAITING),this._state===ia.ACTIVE&&this._transport&&(this._transport.isAllocated(r.id)||this._transport.allocate(r.id,!0),this._transport.open([r.id])),this._changeRemoteMediaSettings(n,r.mediaSettings),this._changeRemoteParticipantState(n,r.participantState))}))}_onClosedConversation(e){this._toggleJoinAvailability(),this._close(new ar(e.reason,{remote:!0}))}_onMediaSettingsChanged(e){let t=dr.composeMessageId(e);this._changeRemoteMediaSettings(t,tr(e.mediaSettings))}_onParticipantStateChanged(e){let t=dr.composeMessageId(e);this._changeRemoteParticipantState(t,dr.mapParticipantState(e))}_onNeedRate(){this._conversation&&(this._conversation.needRate=!0,this._changeNeedRate())}_onFeatureSetChanged(e){this._conversation&&(this._conversation.features=e.features,this._changeFeatureSet())}_onMultipartyChatCreated(e){this._conversation&&(this._conversation.chatId=e.chatId,this._toggleJoinAvailability(),gn.onMultipartyChatCreated(this._conversation))}_onForceMediaSettingsChange(e){return Xe(this,null,(function*(){if(!this._mediaSource)return;let t=this._mediaSource.getMediaSettings(),n=tr(e.mediaSettings);t.isAudioEnabled!==n.isAudioEnabled&&(yield this._mediaSource.toggleAudio(n.isAudioEnabled)),t.isVideoEnabled!==n.isVideoEnabled&&(yield this._mediaSource.toggleVideo(n.isVideoEnabled)),dn.consumerScreenTrack&&t.isScreenSharingEnabled!==n.isScreenSharingEnabled&&(yield this._mediaSource.toggleScreenCapturing(n.isScreenSharingEnabled))}))}_onSettingsUpdate(e){let t={camera:e.camera,screenSharing:e.screenSharing};var n;this._serverSettings=gr(this._serverSettings,t),this._signalingServerSettings=(n=this._serverSettings,{camera:Object.assign({},n.camera),screenSharing:Object.assign({},n.screenSharing)}),this._transport&&this._transport.updateSettings(this._serverSettings)}_onVideoQualityUpdate(e){let t=this._serverSettings.camera,n=this._signalingServerSettings.camera;if(!t||!n)return;let r=Math.min(Math.round(e.quality.maxBitrate/1024),n.maxBitrateK),a=Math.min(e.quality.maxDimension,n.maxDimension),i={camera:Object.assign({},t,{maxBitrateK:r,maxDimension:a}),screenSharing:null};this._serverSettings=gr(this._serverSettings,i),_n.log("Got video quality update notification",this._serverSettings),this._transport&&this._transport.updateSettings(this._serverSettings)}_onPeerRegistered(e){let t=dr.composeMessageId(e);this._participants[t]&&(this._participants[t].clientType=e.clientType,this._participants[t].platform=e.platform)}_onMicSwitched(e){return Xe(this,null,(function*(){gn.onDeviceSwitched(Et.AUDIO,!e.mute),yield this.toggleLocalAudio(!e.mute)}))}_onChatMessage(e){return Xe(this,null,(function*(){let t,n=dr.composeMessageId(e);t=this._participants[n]?this._participants[n].externalId:yield this._getUserId(n),gn.onChatMessage(e.message,t,e.direct)}))}_onCustomData(e){return Xe(this,null,(function*(){if(e.data.hasOwnProperty("sdk"))return;let t,n=dr.composeMessageId(e);t=this._participants[n]?this._participants[n].externalId:yield this._getUserId(n),gn.onCustomData(e.data,t,e.direct)}))}_onRecordInfo(e){return Xe(this,null,(function*(){if(!this._conversation)return;let t=!1;if(!this._conversation.recordInfo!=!e?t=!0:this._conversation.recordInfo&&e&&(t=this._conversation.recordInfo.recordMovieId!==e.recordMovieId),t)if(e){let t=yield this._getUserId(e.initiator);gn.onRecordStarted(t,e.recordMovieId,e.recordStartTime,e.recordType,e.recordExternalMovieId,e.recordExternalOwnerId)}else gn.onRecordStopped();this._conversation.recordInfo=e}))}_onRolesChanged(e,t){if(this._conversation&&e===this._conversation.compositeUserId&&!Gt(this._conversation.roles,t))return _n.debug("Local roles changed: "+t),this._conversation.roles=t,void gn.onLocalRolesChanged(t);let n=this._participants[e];n&&!Gt(n.roles,t)&&(_n.debug(`Roles for participant [${e}] changed: ${t}`),n.roles=t,gn.onRolesChanged(n.externalId,t))}_onMuteParticipant(e,t,n,r){return Xe(this,null,(function*(){!this._conversation||(this._conversation.muteOptions=e,(this._conversation.muteState!==n||t)&&(this._conversation.muteState=n,yield this._processMuteState(t,r)))}))}_processMuteState(e=!1,t){return Xe(this,null,(function*(){if(!this._conversation||!this._mediaSource||this._participantState!==At.ACCEPTED)return;let n=this._conversation.muteState,r=this._conversation.muteOptions,a=n===Ct.MUTE_PERMANENT,i=this._mediaSource.getMediaSettings();if(e)for(let e of r)gn.onUnmuteRequest(e);else r.includes(Et.AUDIO)&&i.isAudioEnabled&&!(t&&t.isAudioEnabled)&&(gn.onDeviceSwitched(Et.AUDIO,!1),yield this.toggleLocalAudio(!1)),r.includes(Et.VIDEO)&&i.isVideoEnabled&&!(t&&t.isVideoEnabled)&&(gn.onDeviceSwitched(Et.VIDEO,!1),yield this.toggleLocalVideo(!1)),r.includes(Et.SCREEN_SHARING)&&i.isScreenSharingEnabled&&!(t&&t.isScreenSharingEnabled)&&(gn.onDeviceSwitched(Et.SCREEN_SHARING,!1),yield this.toggleScreenCapturing(!1)),gn.onUnmutePermission(!a||this._isCallAdmin(),r)}))}_onPinParticipant(e,t=!1){if(!this._conversation)return;let n=this._conversation.pinnedParticipantId;n&&n!==e&&(this._participants[n]?gn.onPinnedParticipant(this._participants[n].externalId,!0):this._conversation.compositeUserId===n&&gn.onLocalPin(!0)),this._participants[e]?gn.onPinnedParticipant(this._participants[e].externalId,t):this._conversation.compositeUserId===e&&gn.onLocalPin(t),this._conversation.pinnedParticipantId=t?null:e}_onOptionsChanged(e){this._conversation&&!function(e,t){if(e.length!==t.length)return!1;for(let n of e)if(!t.includes(n))return!1;return!0}(this._conversation.options,e)&&(this._conversation.options=e,gn.onOptionsChanged(e))}_onNetworkStatus(e){if(this._conversation){let t=[];for(let[n,r]of Object.entries(e)){let e;if(n===this._conversation.compositeUserId||""===n)e=this._conversation.networkRating;else{if(!this._participants[n])continue;e=this._participants[n].networkRating}if(e!==r)if(n===this._conversation.compositeUserId||""===n)this._conversation.networkRating=r,gn.onLocalNetworkStatusChanged(r);else{let e=this._participants[n];e.networkRating=r,t.push({uid:e.externalId,rating:r})}}if(0===t.length)return;_n.log("Received network status update: ",e),gn.onNetworkStatusChanged(t)}}_onRemoteStreamSecond(e,t){let n=this._participants[e];if(n){if(dn.producerScreenTrack)return void gn.onRemoteScreenStream(n.externalId,t);if(n.secondStream=t,dn.videoTracksCount>0){let t=e;if(!this._streamIdByStreamDescription.has(t))return void _n.error("Received remote stream notification for a participant that has no track associated with it",t);let r=this._streamIdByStreamDescription.get(t);if(!r||this._streamWaitTimerByStreamDescription.has(t))return void _n.log("Delaying secondary stream start/stop until main stream becomes available",t);let a=this._streamByStreamId.get(r);if(!a)return ir.log(Mt.PAT_ERROR,"streamNotFound"),void _n.error("Could not find stream by ID: "+r);gn.onRemoteStream(n.externalId,n.secondStream||a)}else{let e=t||n.remoteStream;e&&gn.onRemoteStream(n.externalId,e)}}}_onPeerConnectionClosed(e){e===qr.SERVER&&this._cleanupParticipantAgnosticStreams()}_changeFeatureSet(){if(this._conversation){let e=this._state===ia.ACTIVE,t=this._conversation.features.includes(dt.ADD_PARTICIPANT);gn.onCallState(e,t,this._conversation)}}_changeNeedRate(){this._conversation&&this._conversation.needRate&&gn.onRateNeeded()}_onVolumesDetected(e){let t=[];for(let[n,r]of Object.entries(e)){let e=this._participants[n];e&&e.externalId&&t.push({uid:e.externalId,volume:r.real})}gn.onVolumesDetected(t)}_onSpeakerChanged(e){this._activeSpeakerId=e,this._participants[e]&&this._lastSignalledActiveSpeakerId!==e&&(gn.onSpeakerChanged(this._participants[e].externalId),this._lastSignalledActiveSpeakerId=e)}_onTransportStateChanged(e,t){return Xe(this,null,(function*(){let n;if(_n.debug("Transport state has changed: "+t,e),t===Gr.CONNECTED?n=an.CONNECTED:t===Gr.CONNECTING||t===Gr.OPENED?n=an.CONNECTING:t===Gr.RECONNECTING&&(n=an.RECONNECT),!n)return;let r=e.reduce((e,n)=>{if(n in this._participants){let r=this._participants[n];e.push(r),t===Gr.CONNECTED&&(r.remoteStream||(r.mediaSettings&&this._changeRemoteMediaSettings(n,r.mediaSettings),this._changeRemoteParticipantState(n,r.participantState)),this._updateDisplayLayoutFromCache(n))}else _n.warn(`Participant [${n}] isn't in conversation`);return e},[]);!r.length||this._setParticipantsStatus(r,n)}))}_onTransportLocalStateChanged(e){return Xe(this,null,(function*(){_n.debug("Local transport state has changed: "+e),e===Gr.CONNECTED&&gn.onLocalStatus(an.CONNECTED),e===Gr.CONNECTING&&gn.onLocalStatus(an.CONNECTING),e===Gr.RECONNECTING&&gn.onLocalStatus(an.RECONNECT),e===Gr.FAILED&&this._transport&&0===this._transport.allocated().length&&(this._signaling.ready&&(yield this._signaling.hangup(_t.FAILED)),this._close(new ar(_t.FAILED),"Transport failed"))}))}_onRemoteTrackAdded(e,t,n){return Xe(this,null,(function*(){if(e.endsWith(Bt.AUDIO_MIX))_n.debug("Remote audio mix track added"),this._audioOutput.add(n);else if(e.startsWith(Bt.PARTICIPANT_AGNOSTIC_TRACK_PREFIX))_n.debug("Participant-agnostic track added: "+e),this._streamByStreamId.set(e,t);else{_n.debug(`Remote track added on the participant [${e}]`,{kind:n.kind});let r=this._participants[e];if(r||(_n.warn(`Conversation: track added before participant [${e}]`),this._participants[e]=yield this._createParticipant({id:e}),r=this._participants[e],this._setParticipantsStatus([r],an.WAITING),this._activeSpeakerId===e&&this._lastSignalledActiveSpeakerId!==e&&(gn.onSpeakerChanged(r.externalId),this._lastSignalledActiveSpeakerId=e)),this._transport&&!this._transport.isAllocated(r.id)&&this._transport.allocate(r.id,!1),n.kind===rr.audio&&this._audioOutput.add(n),r.remoteStream!==t){if(r.remoteStream=t,r.secondStream)return;gn.onRemoteStream(r.externalId,t)}r.mediaSettings&&this._changeRemoteMediaSettings(e,r.mediaSettings),dn.batchParticipantsOnStart||this._changeRemoteParticipantState(e,r.participantState)}}))}_onRemoteTrackRemoved(e,t,n){switch(_n.debug(`[${e}] remote track (removed)`,{track:n}),n.kind){case rr.audio:this._removeAudioTrack(e,t,n);break;case rr.video:case rr.screen:this._removeVideoTrack(e,t,n)}}_removeAudioTrack(e,t,n){if(e!==Bt.AUDIO_MIX){let n=this._participants[e];if(!n||n.remoteStream&&n.remoteStream!==t)return}this._audioOutput.remove(n)}_removeVideoTrack(e,t,n){}_onRemoteActivityNoSignal(){this._onRemoteSignalledStall([]),this._onRemoteAllStall(!1)}_onTopologyChanged(e){this._conversation&&(this._conversation.topology=e,this._changeFeatureSet())}_onRemoteAllStall(e){if(this._remoteAllStalled===e)return;this._remoteAllStalled=e;let t=[],n=[];for(let r in this._participants)if(this._participants.hasOwnProperty(r)){let a=this._participants[r];e||this._lastStalled[r]?t.push(a):n.push(a)}t.length&&this._setParticipantsStatus(t,an.RECONNECT),n.length&&this._setParticipantsStatus(n,an.CONNECTED)}_onRemoteSignalledStall(e){let t={},n=[],r=[];e.forEach(e=>{if(t[e]=!0,!this._lastStalled[e]){let t=this._participants[e];t&&!this._remoteAllStalled&&n.push(t)}delete this._lastStalled[e]}),Object.keys(this._lastStalled).forEach(e=>{let t=this._participants[e];t&&!this._remoteAllStalled&&r.push(t)}),n.length&&this._setParticipantsStatus(n,an.RECONNECT),r.length&&this._setParticipantsStatus(r,an.CONNECTED),this._lastStalled=t}_onRemoteDataStats(e){this._debugInfo&&this._debugInfo.onRemoteDataStats(e,this._participants),this._fixAudioDevice(e.outbound.rtps)}_fixAudioDevice(e){var t;!$n.hasMicrophone()||!this._audioFix||!(null==(t=this._mediaSource)?void 0:t.getMediaSettings().isAudioEnabled)||this._audioFix.fix(e)}_toggleJoinAvailability(){let e=this._conversation&&this._conversation.chatId,t=e&&this._state!==ia.CLOSE||!1;e&&(_n.debug("Toggle join availability",{available:t,chatId:e}),gn.onJoinStatus(t,e))}_updateDisplayLayoutFromCache(e){return Xe(this,null,(function*(){var t;if((null==(t=this._transport)?void 0:t.getTopology())!==qr.SERVER)return;let n=this._participants[e];n&&n.lastRequestedLayouts&&Object.keys(n.lastRequestedLayouts).length&&(yield this.updateDisplayLayout(Object.values(n.lastRequestedLayouts)))}))}_setParticipantsStatus(e,t,n=null){if(!e.length)return;let r=e.reduce((e,r)=>(r.status!==t&&(r.status=t,dn.batchParticipantsOnStart?e.push(r.externalId):gn.onParticipantStatus(r.externalId,t,n)),e),[]);!r.length||dn.batchParticipantsOnStart&&gn.onRemoteStatus(r,t,n)}},ua=sa;ua._delayedHangup=!1;var la,da,fa,pa=class extends Error{constructor(e,t){super(e),Object.setPrototypeOf(this,pa.prototype),this.participantErrors=t}};function ha(e,t={},n=!1){if(!window.Blob||!window.navigator.sendBeacon)return;let r=va(e,t,n),a=new window.Blob([r],{type:"application/x-www-form-urlencoded"});window.navigator.sendBeacon(dn.apiEnv.api+"fb.do",a)}function ma(e){return Xe(this,null,(function*(){return new Promise((t,n)=>{let r=new XMLHttpRequest;r.open("POST",dn.apiEnv.api+"fb.do",!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.onreadystatechange=()=>{if(r.readyState!==XMLHttpRequest.DONE)return;let e;try{e=JSON.parse(r.responseText)}catch(t){e={result:r.responseText}}200!==r.status||e.hasOwnProperty("error_msg")?n(e):t(e)},r.send(e)})}))}function va(e,t={},n=!1){t.method=e,t.format="JSON",t.application_key||(t.application_key=dn.apiKey),n||(un.sessionKey?t.session_key=un.sessionKey:un.accessToken&&(t.access_token=un.accessToken));for(let[e,n]of Object.entries(t))"object"==typeof n&&(t[e]=JSON.stringify(n));let r="";for(let[e,n]of Object.entries(t))r&&(r+="&"),r+=`${e}=${encodeURIComponent(n)}`;return r}(da=la||(la={}))[da.VCHAT_SERVICE_DISABLED=1101]="VCHAT_SERVICE_DISABLED",da[da.TARGET_USER_UNAVAILABLE=1102]="TARGET_USER_UNAVAILABLE",da[da.FRIENDSHIP_REQUIRED=1103]="FRIENDSHIP_REQUIRED",da[da.VCHAT_YOULA_API_ERROR=1104]="VCHAT_YOULA_API_ERROR",da[da.VCHAT_VK_API_ERROR=1106]="VCHAT_VK_API_ERROR",function(e){e[e.PARAM_SESSION_EXPIRED=102]="PARAM_SESSION_EXPIRED",e[e.PARAM_SESSION_KEY=103]="PARAM_SESSION_KEY",e[e.PARAM_SIGNATURE=104]="PARAM_SIGNATURE",e[e.AUTH_LOGIN=401]="AUTH_LOGIN"}(fa||(fa={}));var ga,ba,_a=class extends $e{constructor(){super(...arguments),this._userId=null,this._externalUidsCache={}}_callUnsafe(e){return Xe(this,arguments,(function*(e,t={},n=!1){let r=a=>Xe(this,null,(function*(){try{return yield function(e){return Xe(this,arguments,(function*(e,t={},n=!1){return ma(va(e,t,n))}))}(e,t,n)}catch(t){if(!t.hasOwnProperty("error_msg")&&(a++,_n.debug(`${e} network error, attempt ${a}...`),a<10))return yield dr.delay(Math.min(700*a,3e3)),r(a);throw _n.warn(e,"error",t),t}}));return r(0)}))}_call(e){return Xe(this,arguments,(function*(e,t={},n=!1){try{return yield this._callUnsafe(e,t,n)}catch(r){_n.warn("Api call error",r);let a=gt.API;switch(r.error_code){case 102:case 103:case 104:return yield this.authorize(),this._callUnsafe(e,t,n);case 1101:a=_t.SERVICE_DISABLED;break;case 1102:a=_t.CALLEE_IS_OFFLINE;break;case 1103:a=_t.NOT_FRIENDS;break;case 1104:case 1106:a=_t.EXTERNAL_API_ERROR}throw new ar(a,{message:r.error_msg,code:r.error_code})}}))}userId(e){return Xe(this,null,(function*(){let t=dr.decomposeId(e).id;return un.isEmpty()?ur.fromId(String(t)):(this._externalUidsCache.hasOwnProperty(t)||Object.assign(this._externalUidsCache,yield this._getExternalIdsByOkIds([t])),ur.fromString(this._externalUidsCache[t]))}))}prepareUserIds(e){return Xe(this,null,(function*(){un.isEmpty()||Object.assign(this._externalUidsCache,yield this._getExternalIdsByOkIds(e))}))}authorize(){return Xe(this,null,(function*(){if(!this._uuid){let e=An.get("uuid");e||(e=dr.uuid(),An.set("uuid",e)),this._uuid=String(e)}let e={session_data:{version:2,device_id:this._uuid,client_version:dn.appVersion,client_type:"SDK_JS"}};return dn.authToken&&(e.session_data.auth_token=dn.authToken,e.session_data.version=3),this._callUnsafe("auth.anonymLogin",e,!0).then(e=>{e.uid&&(this._userId=Number(e.uid)),un.sessionKey=e.session_key,un.sessionSecretKey=e.session_secret_key}).catch(e=>{throw 401===e.error_code&&gn.onTokenExpired(),new ar(gt.AUTH,{message:e.error_msg,code:e.error_code})})}))}log(e){ha("log.externalLog",{collector:"ok.mobile.apps.video",data:JSON.stringify({application:`${dn.appName}:${dn.sdkVersion}`,platform:dn.platform,items:e})})}init(){!function(){if(!dn.apiAppId||!dn.apiKey)throw new ar(gt.API,{message:"Required arguments apiAppId/apiAppKey not passed"})}()}joinConversation(e,t=!1,n){return Xe(this,null,(function*(){let r={conversationId:e,isVideo:t};return n&&(r.chatId=n),this._call("vchat.joinConversation",r)}))}createConversation(e,t="",n=!1){return Xe(this,null,(function*(){let r={conversationId:e,createJoinLink:!0,isVideo:!1};return t&&(r.payload=t),dn.domain&&(r.domainId=dn.domain),n&&(r.requireAuthToJoin=!0),this._startConversation(r)}))}startConversation(e,t,n,r=!1,a="",i=!1,o=!1){return Xe(this,null,(function*(){let c={conversationId:e,isVideo:r};if(t&&t.length)switch(n){case ct.USER:c.uids=t.join(",");break;case ct.GROUP:c.gid=t[0];break;case ct.CHAT:c.chatId=t[0]}return i&&(c.createJoinLink=!0),a&&(c.payload=a),dn.domain&&(c.domainId=dn.domain),o&&(c.requireAuthToJoin=!0),this._startConversation(c)}))}_startConversation(e){return Xe(this,null,(function*(){return this._call("vchat.startConversation",e)}))}createJoinLink(e){return Xe(this,null,(function*(){return this._call("vchat.createJoinLink",{conversationId:e})}))}removeJoinLink(e){return Xe(this,null,(function*(){return this._call("vchat.removeJoinLink",{conversationId:e})}))}getAnonymTokenByLink(e,t){return Xe(this,null,(function*(){let n={joinLink:e};t&&(n.anonymName=t);let r=yield this._call("vchat.getAnonymTokenByLink",n);return this._userId=Number(r.uid),r.token}))}joinConversationByLink(e,t=!1){return Xe(this,null,(function*(){let n={joinLink:e,isVideo:t};return dn.anonymToken&&(n.anonymToken=dn.anonymToken),this._call("vchat.joinConversationByLink",n)}))}getOkIdsByExternalIds(e){return Xe(this,null,(function*(){let t=ur.fromIds(e),n=[],r={methods:[]},a=[],i=Object.keys(this._externalUidsCache),o=Object.values(this._externalUidsCache);for(let e of t){let t=ur.toString(e),c=o.indexOf(t);c>-1?n.push(Number(i[c])):(a.push(t),r.methods.push({"vchat.getOkIdByExternalId":{params:{externalId:e.id,anonym:e.type===sr.ANONYM},onError:"SKIP"}}))}return r.methods.length&&(yield this._call("batch.executeV2",r)).forEach((e,t)=>{if(e.ok){let r=Number(e.ok.ok_id);this._externalUidsCache[r]=a[t],n.push(r)}}),n}))}getExternalIdsByOkIds(e){return Xe(this,null,(function*(){let t=[],n=[];for(let r of e)this._externalUidsCache.hasOwnProperty(r)?t.push(ur.fromString(this._externalUidsCache[r])):n.push(r);if(!n.length)return t;let r=yield this._getExternalIdsByOkIds(n);Object.assign(this._externalUidsCache,r);for(let e of n)r.hasOwnProperty(e)&&t.push(ur.fromString(r[e]));return t}))}getCachedOkIdByExternalId(e){let t=Object.keys(this._externalUidsCache),n=Object.values(this._externalUidsCache),r=ur.toString(e),a=n.indexOf(r);return a>-1?dr.composeId(t[a],Wt.USER):null}cacheExternalId(e,t){let n=dr.decomposeId(e).id;this._externalUidsCache[n]=ur.toString(t)}getConversationParams(){return Xe(this,null,(function*(){let e={};return dn.anonymToken&&(e.anonymToken=dn.anonymToken),this._call("vchat.getConversationParams",e)}))}getUserId(){return this._userId}setUserId(e){this._userId=e}hangupConversation(e){let t={conversationId:e,reason:_t.HUNGUP};dn.anonymToken&&(t.anonymToken=dn.anonymToken),ha("vchat.hangupConversation",t)}removeHistoryRecords(e){return Xe(this,null,(function*(){yield this._call("vchat.removeHistoryRecords",{recordIds:e.join(",")})}))}cleanup(){}_getExternalIdsByOkIds(e){return Xe(this,null,(function*(){let t={};try{let n=yield this._call("vchat.getExternalIdsByOkIds",{uids:e.join(",")});if(n.external_ids)for(let[e,r]of Object.entries(n.external_ids))t[e]=ur.fromIdToString(r,sr.USER);if(n.anonym_ids)for(let[e,r]of Object.entries(n.anonym_ids))t[e]=ur.fromIdToString(r,sr.ANONYM);return t}catch(e){return t}}))}getTokenForAnonym(e,t){return Xe(this,null,(function*(){let n={id:e};return t&&(n.application_key=t),(yield this._callUnsafe("auth.getTokenForAnonym",n,!0)).token}))}call(e){return Xe(this,arguments,(function*(e,t={}){return this._call(e,t)}))}};(ba=ga||(ga={})).RECOVER="recover",ba.ACCEPT_CALL="accept-call",ba.ADD_PARTICIPANT="add-participant",ba.REMOVE_PARTICIPANT="remove-participant",ba.HANGUP="hangup",ba.TRANSMIT_DATA="transmit-data",ba.ACCEPT_PRODUCER="accept-producer",ba.ALLOCATE_CONSUMER="allocate-consumer",ba.CHANGE_MEDIA_SETTINGS="change-media-settings",ba.CHANGE_PARTICIPANT_STATE="change-participant-state",ba.CHANGE_STREAM_PRIORITIES="change-streams-priorities",ba.UPDATE_DISPLAY_LAYOUT="update-display-layout",ba.REPORT_PERF_STAT="report-perf-stat",ba.RECORD_START="record-start",ba.RECORD_STOP="record-stop",ba.RECORD_SET_ROLE="record-set-role",ba.RECORD_GET_STATUS="record-get-status",ba.SWITCH_MICRO="switch-micro",ba.SWITCH_TOPOLOGY="switch-topology",ba.REQUEST_REALLOC="request-realloc",ba.CHAT_MESSAGE="chat-message",ba.CHAT_HISTORY="chat-history",ba.CUSTOM_DATA="custom-data",ba.GRANT_ROLES="grant-roles",ba.MUTE_PARTICIPANT="mute-participant",ba.PIN_PARTICIPANT="pin-participant",ba.UPDATE_MEDIA_MODIFIERS="update-media-modifiers",ba.CHANGE_OPTIONS="change-options",ba.GET_WAITING_HALL="get-waiting-hall",ba.PROMOTE_PARTICIPANT="promote-participant",ba.REQUEST_TEST_MODE="request-test-mode",ba.ADD_MOVIE="add-movie",ba.UPDATE_MOVIE="update-movie",ba.REMOVE_MOVIE="remove-movie";var ya=ga,Ea=[()=>dn.producerScreenTrack,()=>dn.videoTracksCount>0,()=>!0,()=>dn.filteredMessages,()=>dn.consumerScreenTrack],Oa=class extends nt{constructor(){super(...arguments),this.socket=null,this.sequence=1,this.lastStamp=0,this.websocketCommandsQueue=[],this.datachannelCommandsQueue=[],this.incomingCache=[],this.responseHandlers={},this.reconnectCount=0,this.conversationResolve=null,this.conversationReject=null,this.connected=!1,this.listenersReady=!1,this.postfix="&platform="+dn.platform+"&appVersion="+dn.appVersion+"&version="+dn.protocolVersion+"&device="+dn.device+"&capabilities="+Oa._getCapabilityFlags(),this.peerId=null,this.conversationId=null,this.reconnectTimer=0,this.connectionMessageWaitTimer=0,this.doctorTimer=0,this.participantIdRegistry=null,this.producerNotificationDataChannel=null,this.producerCommandDataChannel=null}static _getCapabilityFlags(){let e=0;for(let t=0;t<Ea.length;t++)Ea[t]()&&(e|=1<<t);return e.toString(16).toUpperCase()}get ready(){return null!==this.socket}setEndpoint(e){this.endpoint=e}setConversationId(e){this.conversationId=e}setParticipantIdRegistry(e){this.participantIdRegistry=e}setProducerNotificationDataChannel(e){this.producerNotificationDataChannel=e,this.producerNotificationDataChannel.onmessage=e=>{var t;let n=null==(t=this.participantIdRegistry)?void 0:t.handleMessage(e.data);n&&this._handleMessage(n)}}setProducerCommandDataChannel(e){this.producerCommandDataChannel=e,this.producerCommandDataChannel.onmessage=this._onMessage.bind(this),this._handleCommandsQueue(this.datachannelCommandsQueue)}cleanup(){this.datachannelCommandsQueue=[]}connect(e){return Xe(this,null,(function*(){return this.postfix+="&clientType="+dn.clientType,new Promise((t,n)=>{if(this.socket&&this.socket.readyState<WebSocket.CLOSING)return ir.log(Mt.SOCKET_ACTION,"already_opened"),void n(Error("Socket already opened"));this.conversationResolve=e=>{t(e),this.conversationResolve=null,this.conversationReject=null},this.conversationReject=e=>{n(e),this.conversationResolve=null,this.conversationReject=null},this._connect(e)})}))}_send(e){return Xe(this,arguments,(function*(e,t={},n=0){if(t.participantId){let e=dr.decomposeId(t.participantId);t=Object.assign({},t,{participantId:e.id,participantType:e.type})}return this._sendRaw(e,t,n)}))}_sendRaw(e){return Xe(this,arguments,(function*(e,t={},n=0){let r=t=>{var n;if(this._isDataChannelCommand(e))this.datachannelCommandsQueue.push(t),"open"===(null==(n=this.producerCommandDataChannel)?void 0:n.readyState)&&this._handleCommandsQueue(this.datachannelCommandsQueue);else{if(!this.socket)return ir.log(Mt.SOCKET_ACTION,"not_opened"),_n.warn("Socket not opened"),void t.reject(new Error(`Socket not opened [${e}]`),!0);this.socket.readyState>WebSocket.OPEN&&(ir.log(Mt.SOCKET_ACTION,"invalid_state"),_n.warn("Socket is not opened, state "+this.socket.readyState)),this.websocketCommandsQueue.push(t),this.socket&&this.socket.readyState===WebSocket.OPEN&&this._handleCommandsQueue(this.websocketCommandsQueue)}};return new Promise((a,i)=>{let o={sequence:this.sequence++,name:e,params:t,responseTimer:0,resolve:a,reject:(t,a=!1)=>{!n||a?i(t):(_n.debug("Resending a signaling message",e,o.sequence),n--,r(o))}};r(o)})}))}_isDataChannelCommand(e){return!!this.producerCommandDataChannel&&(e===ya.UPDATE_DISPLAY_LAYOUT||e===ya.REPORT_PERF_STAT)}static _isDataChannelResponseRequired(e){return e===ya.UPDATE_DISPLAY_LAYOUT||e===ya.REPORT_PERF_STAT}getNextCommandSequenceNumber(){return this.sequence}hangup(e){return Xe(this,null,(function*(){return this._send(ya.HANGUP,{reason:e}).catch(()=>{})}))}sendCandidate(e,t){return Xe(this,null,(function*(){return this._send(ya.TRANSMIT_DATA,{participantId:e,data:{candidate:t}})}))}requestTestMode(e){return Xe(this,null,(function*(){return this._send(ya.REQUEST_TEST_MODE,{consumerCommand:e})}))}sendSdp(e,t){return Xe(this,null,(function*(){return this._send(ya.TRANSMIT_DATA,{participantId:e,data:{sdp:t}})}))}acceptCall(e){return Xe(this,null,(function*(){return this._send(ya.ACCEPT_CALL,{mediaSettings:e})}))}changeMediaSettings(e){return Xe(this,null,(function*(){return this._send(ya.CHANGE_MEDIA_SETTINGS,{mediaSettings:e},10)}))}changeParticipantState(e){return Xe(this,null,(function*(){return this._send(ya.CHANGE_PARTICIPANT_STATE,{participantState:{state:e}})}))}addParticipant(e,t){return Xe(this,null,(function*(){return this._send(ya.ADD_PARTICIPANT,((e,t)=>{for(var n in t||(t={}))Ze.call(t,n)&&Je(e,n,t[n]);if(Ye)for(var n of Ye(t))Qe.call(t,n)&&Je(e,n,t[n]);return e})({participantId:e},t))}))}removeParticipant(e,t=!1){return Xe(this,null,(function*(){return this._send(ya.REMOVE_PARTICIPANT,{participantId:e,ban:t})}))}allocateConsumer(e,t){return Xe(this,null,(function*(){let n={capabilities:t};return e&&(n.description=e.sdp),this._send(ya.ALLOCATE_CONSUMER,n)}))}acceptProducer(e,t){return Xe(this,null,(function*(){let n={description:e.sdp};return t&&(n.ssrcs=t),this._send(ya.ACCEPT_PRODUCER,n)}))}changePriorities(e){return Xe(this,null,(function*(){return this._send(ya.CHANGE_STREAM_PRIORITIES,{typedPriorities:e}).catch(()=>{})}))}updateDisplayLayout(e){return Xe(this,null,(function*(){return this._send(ya.UPDATE_DISPLAY_LAYOUT,{layouts:e})}))}addMovie(e){return Xe(this,null,(function*(){return this._send(ya.ADD_MOVIE,e)}))}updateMovie(e){return Xe(this,null,(function*(){return this._send(ya.UPDATE_MOVIE,e)}))}removeMovie(e){return Xe(this,null,(function*(){return this._send(ya.REMOVE_MOVIE,e)}))}startStream(e){return Xe(this,null,(function*(){return this._send(ya.RECORD_START,e)}))}stopStream(){return Xe(this,null,(function*(){return this._send(ya.RECORD_STOP)}))}recordSetRole(e,t){return Xe(this,null,(function*(){return this._send(ya.RECORD_SET_ROLE,{participantId:e,role:t})}))}getRecordStatus(){return Xe(this,null,(function*(){return this._send(ya.RECORD_GET_STATUS)}))}switchTopology(e,t=!1){return Xe(this,null,(function*(){return this._send(ya.SWITCH_TOPOLOGY,{topology:e,force:t})}))}requestRealloc(){return Xe(this,null,(function*(){return this._send(ya.REQUEST_REALLOC)}))}reportPerfStat(e){return Xe(this,null,(function*(){return this._send(ya.REPORT_PERF_STAT,{report:e})}))}chatMessage(e,t=null){return Xe(this,null,(function*(){return this._send(ya.CHAT_MESSAGE,{message:e,participantId:t})}))}chatHistory(e){return Xe(this,null,(function*(){return this._send(ya.CHAT_HISTORY,{count:e})}))}customData(e,t){return Xe(this,null,(function*(){return this._send(ya.CUSTOM_DATA,{data:e,participantId:t})}))}grantRoles(e,t,n){return Xe(this,null,(function*(){let r={participantId:e,roles:t};return n&&(r.revoke=!0),this._sendRaw(ya.GRANT_ROLES,r)}))}muteParticipant(e,t,n=!1,r=!1){return Xe(this,null,(function*(){return this._sendRaw(ya.MUTE_PARTICIPANT,{participantId:e,mediaOptions:t,unmute:n,mutePermanent:r})}))}pinParticipant(e,t){return Xe(this,null,(function*(){let n={participantId:e};return t&&(n.unpin=!0),this._sendRaw(ya.PIN_PARTICIPANT,n)}))}updateMediaModifiers(e){return Xe(this,null,(function*(){return this._send(ya.UPDATE_MEDIA_MODIFIERS,{mediaModifiers:e})}))}changeOptions(e){return Xe(this,null,(function*(){return this._send(ya.CHANGE_OPTIONS,{options:e})}))}getWaitingHall(e=null,t,n=!1){return Xe(this,null,(function*(){let r={};return e&&(r.fromId=e),t&&(r.count=t),n&&(r.backward=n),this._send(ya.GET_WAITING_HALL,r)}))}promoteParticipant(e,t=!1){return Xe(this,null,(function*(){let n={participantId:e};return t&&(n.demote=t),this._sendRaw(ya.PROMOTE_PARTICIPANT,n)}))}close(){this.socket&&this.socket.readyState<WebSocket.CLOSING&&this._closeSocket(),this._stopWaitConnectionMessage(),this._stopDoctor(),clearTimeout(this.reconnectTimer)}readyToSend(){this.listenersReady=!0,this._handleCachedMessages()}_connect(e){if(this.socket&&this.socket.readyState<WebSocket.CLOSING)return;let t="";e&&(t+="&tgt="+e),e===jt.RETRY&&this.lastStamp&&(t+="&recoverTs="+this.lastStamp),_n.debug("Connecting to "+this.endpoint+this.postfix+t),this.socket=new WebSocket(this.endpoint+this.postfix+t),this.socket.onopen=this._onOpen.bind(this),this.socket.onmessage=this._onMessage.bind(this),this.socket.onerror=this._onError.bind(this),this.socket.onclose=this._onClose.bind(this),this._startDoctor()}_disconnect(){this.socket&&this.socket.readyState<WebSocket.CLOSING&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,this.socket.close(),this.socket=null),this._stopWaitConnectionMessage(),this._stopDoctor(),clearTimeout(this.reconnectTimer)}_onOpen(){_n.debug("Socket opened"),ir.log(Mt.SOCKET_ACTION,"opened"),this._waitConnectionMessage(),this._startDoctor()}_onMessage(e){if(this._startDoctor(),"ping"!==e.data)try{this._handleMessage(JSON.parse(e.data))}catch(t){ir.log(Mt.SOCKET_ACTION,"parse_error"),_n.error("Unable to parse message",t,e.data)}else this.socket&&this.socket.readyState===WebSocket.OPEN&&this.socket.send("pong")}_handleMessage(e){var t;"notification"===e.type?"connection"===e.notification?(_n.debug("Signaling connected",e),this.connected=!0,this.reconnectCount=0,this.endpoint=e.endpoint,e.peerId&&this.peerId!==e.peerId.id&&(this.postfix+="&peerId="+e.peerId.id,this.peerId=e.peerId.id),this._stopWaitConnectionMessage(),this.conversationResolve?this.conversationResolve(e):(this._triggerEvent(Pt.RECONNECT,e),e.conversation.topology&&this._triggerEvent(Pt.NOTIFICATION,{type:"notification",notification:xt.TOPOLOGY_CHANGED,topology:e.conversation.topology})),this.lastStamp&&this._handleCachedMessages(),null==(t=e.recoverMessages)||t.forEach(e=>this._handleMessage(e)),this._handleCommandsQueue(this.websocketCommandsQueue)):this.connected&&this.listenersReady?this._triggerEvent(Pt.NOTIFICATION,e):this.incomingCache.push(e):"response"===e.type&&this.responseHandlers[e.sequence]?this._handleCommandResponse(!0,e):"error"===e.type&&this.responseHandlers[e.sequence]?(ir.log(Mt.SOCKET_ACTION,"error-"+e.error),this._handleCommandResponse(!1,e)):"error"===e.type?(ir.log(Mt.SOCKET_ACTION,"error-"+e.error),"service-unavailable"===e.error?this._reconnect():"conversation-ended"===e.error?this.conversationReject?this.conversationReject(new ar(_t.SOCKET_CLOSED,{message:"Unable to connect to the signaling: "+e.error})):this._triggerEvent(Pt.NOTIFICATION,{notification:xt.CLOSED_CONVERSATION,reason:e.reason}):this.connected||"invalid-token"===e.error?this._throwError(new Error("Signaling error: "+e.error)):e.sequence||(this.conversationReject&&this.conversationReject(new ar(gt.SIGNALING_FAILED,{message:"Unable to connect to the signaling: "+e.error})),this._closeSocket())):(ir.log(Mt.SOCKET_ACTION,"unknown_message"),_n.warn("Unhandled message",e)),this.lastStamp=e.stamp||this.lastStamp}_handleCachedMessages(){let e=[...this.incomingCache];for(this.incomingCache=[];e.length>0;){let t=e.shift();this._handleMessage(t)}}_throwError(e){this._triggerEvent(Pt.FAILED,e)}_onError(e){ir.log(Mt.SOCKET_ACTION,"error"),_n.error("Signaling error",e)}_onClose(e){ir.log(Mt.SOCKET_ACTION,"closed"),_n.debug("Connection closed",{code:e.code,reason:e.reason}),this.connected=!1,this._stopDoctor(),this.socket&&this.reconnectCount++<Oa.RECONNECT_MAX_COUNT?this._reconnect():this.socket&&this._closeSocket(new Error("Connection closed"))}_closeSocket(e=null){!this.socket||(this._disconnect(),Object.values(this.responseHandlers).forEach(t=>{window.clearTimeout(t.responseTimer),e&&t.reject(new Error("Connection closed"),!0)}),this.websocketCommandsQueue=[],this.responseHandlers={},this.lastStamp=0,e&&this._throwError(new Error("Connection closed")))}_reconnect(){let e=Math.min(Oa.RECONNECT_MAX_DELAY,Oa.RECONNECT_DELAY*Math.pow(2,this.reconnectCount-1));_n.log(`Reconnect websocket after ${e}ms (${this.reconnectCount})`),ir.log(Mt.SOCKET_ACTION,"reconnect"),this.reconnectTimer=window.setTimeout(this._connect.bind(this,jt.RETRY),e)}_handleCommandResponse(e,t){var n;if(!this.responseHandlers.hasOwnProperty(t.sequence))return;let r=this.responseHandlers[t.sequence];window.clearTimeout(r.responseTimer),e?(delete this.responseHandlers[t.sequence],r.resolve(t)):(null==(n=this.socket)?void 0:n.readyState)===WebSocket.OPEN?(delete this.responseHandlers[t.sequence],ir.log(Mt.SOCKET_ACTION,"response-timeout"),r.reject(new Error(t.error||`Response timeout [${r.name}]`))):r.responseTimer=window.setTimeout(()=>this._handleCommandResponse(!1,t),Oa.WAIT_RESPONSE_DELAY)}_handleCommandsQueue(e){for(var t,n;e.length>0;){let r=e.shift(),a=Object.assign({command:r.name,sequence:r.sequence},r.params);if(this._isDataChannelCommand(r.name)){if("open"!==(null==(t=this.producerCommandDataChannel)?void 0:t.readyState))return void r.reject(new Error("Invalid data channel state: "+(null==(n=this.producerCommandDataChannel)?void 0:n.readyState)));Oa._isDataChannelResponseRequired(r.name)&&(r.responseTimer=window.setTimeout(()=>this._handleCommandResponse(!1,a),Oa.WAIT_RESPONSE_DELAY),this.responseHandlers[r.sequence]=r),this.producerCommandDataChannel.send(JSON.stringify(a))}else{if(!this.socket||this.socket.readyState!==WebSocket.OPEN){r.reject(new Error("Invalid state or socket already closed"));continue}r.responseTimer=window.setTimeout(()=>this._handleCommandResponse(!1,a),Oa.WAIT_RESPONSE_DELAY),this.responseHandlers[r.sequence]=r,this.socket.send(JSON.stringify(a))}}}_waitConnectionMessage(){this.connectionMessageWaitTimer=window.setTimeout(()=>{this.conversationReject&&this.conversationReject(new ar(gt.SIGNALING_FAILED,{message:"Unable to connect to the signaling: connection timeout"}))},Oa.WAIT_CONNECTION_DELAY)}_stopWaitConnectionMessage(){window.clearTimeout(this.connectionMessageWaitTimer),this.connectionMessageWaitTimer=0}_startDoctor(){this._stopDoctor(),this.doctorTimer=window.setTimeout(()=>{_n.warn("Socket is dead, trying to reconnect"),this._disconnect(),this._connect(jt.RETRY)},Oa.WAIT_MESSAGE_DELAY)}_stopDoctor(){window.clearTimeout(this.doctorTimer),this.doctorTimer=0}},wa=Oa;wa.RECONNECT_DELAY=dn.signalingReconnectDelay,wa.RECONNECT_MAX_DELAY=dn.signalingReconnectMaxDelay,wa.RECONNECT_MAX_COUNT=dn.signalingReconnectMaxCount,wa.WAIT_CONNECTION_DELAY=dn.waitConnectionDelay,wa.WAIT_RESPONSE_DELAY=dn.waitResponseDelay,wa.WAIT_MESSAGE_DELAY=dn.waitMessageDelay;var Ca,Sa,Aa=null,ka={getCameras:$n.getCameras,getMicrophones:$n.getMicrophones,getOutput:$n.getOutput,hasCamera:$n.hasCamera,hasMicrophone:$n.hasMicrophone,getSavedCamera:$n.getSavedCamera,getSavedMicrophone:$n.getSavedMicrophone,getSavedOutput:$n.getSavedOutput,hasCameraPermission:$n.hasCameraPermission,hasMicrophonePermission:$n.hasMicrophonePermission,hasPermissions:$n.hasPermissions,getUserMedia:$n.getUserMedia,getUserVideo:$n.getUserVideo,getUserAudio:$n.getUserAudio,saveDeviceId:$n.saveDeviceId,isBrowserSupported:$n.isBrowserSupported,isScreenCapturingSupported:$n.isScreenCapturingSupported,os:$n.os,isMobile:$n.isMobile,browserName:$n.browserName,browserVersion:$n.browserVersion,baseChromeVersion:$n.baseChromeVersion,getAudioContext:$n.getAudioContext};function ja(e){Sa=e}function Ta(e){Ca=e}function Ia(e){Aa=e}function Pa(e){dn.videoEffects=e}function Da(e){return Xe(this,null,(function*(){if(dn.set(e),"Sferum"===$n.browserName()&&(dn.platform="SFERUM:"+$n.browserVersion()),Sa||ja(new _a),Ca||Ta(()=>new wa),dn.debug&&(fe.disableLog(!1),_n.toggle(!0)),_n.log("Calls SDK "+dn.sdkVersion,e),yield $n.init(),!$n.isBrowserSupported())throw new ar(gt.UNSUPPORTED);Sa.init()}))}function Na(e){return Xe(this,arguments,(function*(e,t=[Et.AUDIO],n="",r=!1,a=!1){let i=[],o=[];if(Array.isArray(e)?i=e.length?e:[]:e&&(i=[e]),i.length&&(o=yield Sa.getOkIdsByExternalIds(i),!o.length))throw new ar(_t.CALLEE_IS_OFFLINE);return xa(o,ct.USER,t,n,r,a)}))}function xa(e){return Xe(this,arguments,(function*(e,t=ct.USER,n,r="",a=!1,i=!1){if(ua.current())throw _n.error("There is already active call"),new ar(_t.FAILED);return new ua(Sa,Ca(),Aa).onStart(e,t,n,r,a,i)}))}function Ra(e){return Xe(this,null,(function*(){return Ma(e)}))}function Ma(e){return Xe(this,arguments,(function*(e,t=Wt.USER,n){if(e===ua.id())throw new Error("Push has already been processed");return new ua(Sa,Ca(),Aa).onPush(e,t,n)}))}function La(e,t){return Xe(this,null,(function*(){return Sa.getTokenForAnonym(e,t)}))}function Ba(e){return Xe(this,arguments,(function*(e,t={}){return Sa.call(e,t)}))}function Fa(e){return Xe(this,null,(function*(){return e&&(dn.authToken=e),Sa.authorize()}))}function Ha(){return Xe(this,arguments,(function*(e=[Et.AUDIO]){let t=ua.current();if(t)return t.accept(e);throw new Error("Conversation not found")}))}function Va(){return Xe(this,null,(function*(){let e=ua.current();if(e)return e.decline()}))}function Ua(e){return Xe(this,arguments,(function*(e,t=[Et.AUDIO]){return za(e,t)}))}function za(e,t,n){return Xe(this,null,(function*(){if(ua.current())throw _n.error("There is already active call"),new ar(_t.FAILED);return new ua(Sa,Ca(),Aa).onJoin({conversationId:e,mediaOptions:t,chatId:n})}))}function Ga(e){return Xe(this,arguments,(function*(e,t=[Et.AUDIO],n){if(ua.current())throw _n.error("There is already active call"),new ar(_t.FAILED);return n&&(dn.anonymToken=n),new ua(Sa,Ca(),Aa).onJoin({joinLink:e,mediaOptions:t})}))}function Wa(){return Xe(this,null,(function*(){let e=ua.current();if(e)return e.hangup();ua.hangupAfterInit()}))}function qa(e,t){return Xe(this,null,(function*(){let n=yield Sa.getOkIdsByExternalIds([e]);if(!n.length)throw new Error("User not found");return Ka(n[0],t)}))}function Ka(e,t){return Xe(this,null,(function*(){let n=ua.current();n&&(yield n.addParticipant(dr.composeId(e,Wt.USER),t))}))}function Ya(e,t=!1){return Xe(this,null,(function*(){return Za((yield Sa.getOkIdsByExternalIds([e]))[0],t)}))}function Za(e,t=!1){return Xe(this,null,(function*(){let n=ua.current();n&&(yield n.removeParticipant(dr.composeId(e,Wt.USER),t))}))}function Qa(e,t){return Xe(this,null,(function*(){let n=yield $n.saveDeviceId(e,t),r=ua.current();return n&&r?r.changeDevice(e):Promise.reject()}))}function Ja(e){return Xe(this,null,(function*(){let t=ua.current();return t?t.toggleScreenCapturing(e):Promise.reject()}))}function Xa(e,t=!1){return Xe(this,null,(function*(){let n=ua.current();n&&(yield n.setVideoStream(e,t))}))}function $a(e){return Xe(this,null,(function*(){let t=ua.current();t&&(yield t.toggleLocalVideo(e))}))}function ei(e){return Xe(this,null,(function*(){let t=ua.current();t&&(yield t.toggleLocalAudio(e))}))}function ti(e,t){return Xe(this,null,(function*(){let n=ua.current();if(n)return n.setLocalResolution(e,t)}))}function ni(e){return Xe(this,null,(function*(){let t=ua.current();t&&(yield t.changePriorities(e))}))}function ri(e){return Xe(this,null,(function*(){let t=ua.current();t&&(yield t.changeParticipantState(e))}))}function ai(e){return Xe(this,null,(function*(){let t=ua.current();t&&(yield t.updateDisplayLayout(e))}))}function ii(e,t,n=!1){return Xe(this,null,(function*(){return oi((yield Sa.getOkIdsByExternalIds([e]))[0],t,n)}))}function oi(e,t,n=!1){return Xe(this,null,(function*(){let r=ua.current();r&&(yield r.grantRoles(dr.composeId(e,Wt.USER),t,n))}))}function ci(){return Xe(this,arguments,(function*(e=null,t=[Et.AUDIO],n=!1){let r=null;return e&&(r=(yield Sa.getOkIdsByExternalIds([e]))[0]),si(r,t,n)}))}function si(){return Xe(this,arguments,(function*(e=null,t=[Et.AUDIO],n=!1){let r=ua.current();if(r){let a=e?dr.composeId(e,Wt.USER):null;yield r.switchParticipantDevice(a,t,!1,n)}}))}function ui(){return Xe(this,arguments,(function*(e=null,t=[Et.AUDIO]){let n=null;return e&&(n=(yield Sa.getOkIdsByExternalIds([e]))[0]),li(n,t)}))}function li(){return Xe(this,arguments,(function*(e=null,t=[Et.AUDIO]){let n=ua.current();if(n){let r=e?dr.composeId(e,Wt.USER):null;yield n.switchParticipantDevice(r,t,!0)}}))}function di(e,t=!1){return Xe(this,null,(function*(){return fi((yield Sa.getOkIdsByExternalIds([e]))[0],t)}))}function fi(e,t=!1){return Xe(this,null,(function*(){let n=ua.current();n&&(yield n.pinParticipant(dr.composeId(e,Wt.USER),t))}))}function pi(e){return Xe(this,null,(function*(){let t=ua.current();t&&(yield t.updateMediaModifiers(e))}))}function hi(e){return Xe(this,null,(function*(){let t=ua.current();t&&(yield t.changeOptions(e))}))}function mi(e,t=null){return Xe(this,null,(function*(){let n=null;return t&&(n=(yield Sa.getOkIdsByExternalIds([t]))[0]),vi(e,n)}))}function vi(e,t=null){return Xe(this,null,(function*(){let n=ua.current();if(n){let r=t?dr.composeId(t,Wt.USER):null;yield n.chatMessage(e,r)}}))}function gi(e=10){return Xe(this,null,(function*(){let t=ua.current();if(t)return t.chatHistory(e)}))}function bi(e,t=null){return Xe(this,null,(function*(){let n=null;return t&&(n=(yield Sa.getOkIdsByExternalIds([t]))[0]),_i(e,n)}))}function _i(e,t=null){return Xe(this,null,(function*(){let n=ua.current();if(n){let r=t?dr.composeId(t,Wt.USER):null;yield n.customData(e,r)}}))}function yi(e="",t=!1){return Xe(this,null,(function*(){return(yield Sa.createConversation(dr.uuid(),e,t)).join_link}))}function Ei(){return Xe(this,null,(function*(){let e=ua.current();return e?e.createJoinLink():Promise.reject()}))}function Oi(){return Xe(this,null,(function*(){let e=ua.current();return e?e.removeJoinLink():Promise.reject()}))}function wi(e,t){return Xe(this,null,(function*(){return Sa.getAnonymTokenByLink(e,t)}))}function Ci(e){let t=ua.current();t&&t.setVolume(e)}function Si(e){dn.forceRelayPolicy=e}function Ai(e=!1,t=null,n=null,r="DIRECT_LINK",a=null){return Xe(this,null,(function*(){let i=ua.current();return i?i.startStream(e,t,n,r,a):Promise.reject()}))}function ki(){return Xe(this,null,(function*(){let e=ua.current();return e?e.stopStream():Promise.reject()}))}function ji(e,t){return Xe(this,null,(function*(){let n=ua.current();if(n){let r=yield Sa.getOkIdsByExternalIds([e]);return n.recordSetRole(dr.composeId(r[0],Wt.USER),t)}return Promise.reject()}))}function Ti(){return Xe(this,null,(function*(){let e=ua.current();return e?e.getStreamInfo():Promise.reject()}))}function Ii(e){return Xe(this,null,(function*(){let t=ua.current();return t?t.addMovie(e):Promise.reject()}))}function Pi(e,t){return Xe(this,null,(function*(){let n=ua.current();return n?n.updateMovie(e,t):Promise.reject()}))}function Di(e){return Xe(this,null,(function*(){let t=ua.current();return t?t.removeMovie(e):Promise.reject()}))}function Ni(e){dn.statisticsInterval=e;let t=ua.current();if(t)return t.updateStatisticsInterval()}function xi(e){fe.disableLog(!e),_n.toggle(e)}function Ri(e,...t){!dn.debugLog||_n.send(e,"[external]",...t)}function Mi(e){return Xe(this,null,(function*(){let t=ua.current();if(t)return t.videoEffect(e)}))}function Li(e){return Xe(this,null,(function*(){let t=ua.current();t&&(yield t.setAudioStream(e))}))}function Bi(e=null,t,n=!1){return Xe(this,null,(function*(){let r=ua.current();if(!r)throw new Error("Conversation not found");return r.getWaitingHall(e,t,n)}))}function Fi(e,t=!1){return Xe(this,null,(function*(){let n=ua.current();if(!n)throw new Error("Conversation not found");let r=yield Sa.getOkIdsByExternalIds([e]);return n.promoteParticipant(dr.composeId(r[0],Wt.USER),t)}))}function Hi(e){return Xe(this,null,(function*(){yield Sa.removeHistoryRecords(e)}))}},function(e,t,n){"use strict";function r(e,t,n,r){(Z(e)||Q(e))&&("family"in e||"graphite"in e)||Y(`${t}: expect ${n} to be a unit (store, event or effect)${r}`)}function a(e,t,n){if(Array.isArray(e))for(let a=0;a<e.length;a++)r(e[a],t,`${a} item of ${n}`,"");else r(e,t,n," or array of units")}function i(e,t){let n=_e(e).meta;Ie={parent:Ie,value:e,template:n.template||Pe(),sidRoot:n.sidRoot||Ie&&Ie.sidRoot};try{return t()}finally{Ie=ke(Ie)}}function o({node:e=[],from:t,source:n,parent:r=t||n,to:a,target:i,child:o=a||i,scope:c={},meta:s={},family:u={type:"regular"},regional:l}={}){let d=xe(r),f=xe(u.links),p=xe(u.owners),h=[],m={};for(let t=0;t<e.length;t++){let n=e[t];n&&(h.push(n),Re(n,m))}let v={id:te(),seq:h,next:xe(o),meta:s,scope:c,family:{type:u.type||"crosslink",links:f,owners:p},reg:m};for(let e=0;e<f.length;e++)ye(f[e]).push(v);for(let e=0;e<p.length;e++)Ee(p[e]).push(v);for(let e=0;e<d.length;e++)d[e].next.push(v);return l&&Ie&&Te(Se(Ie),[v]),v}function c(e,t,n){let r=Ye,a=null,i=We;if(e.target&&(t=e.params,n=e.defer,r="page"in e?e.page:r,e.stack&&(a=e.stack),i=je(e)||i,e=e.target),i&&We&&i!==We&&(We=null),Array.isArray(e))for(let n=0;n<e.length;n++)Ve("pure",r,_e(e[n]),a,t[n],i);else Ve("pure",r,_e(e),a,t,i);if(n&&!qe)return;let o,c,s,u,l,d,f={isRoot:qe,currentPage:Ye,forkPage:We,isWatch:Ke};qe=0;e:for(;u=He();){let{idx:e,stack:t,type:n}=u;s=t.node,Ye=l=t.page,We=je(t),d=(l||s).reg;let r={fail:0,scope:s.scope};o=c=0;for(let a=e;a<s.seq.length&&!o;a++){let i=s.seq[a],u=i.data;switch(i.type){case"barrier":{let r=u.barrierID;l&&(r=`${l.fullID}_${r}`);let i=u.priority;if(a!==e||n!==i){Ge.has(r)||(Ge.add(r),Ue(a,t,i,r));continue e}Ge.delete(r);break}case"mov":{let e;switch(u.from){case"stack":e=Se(t);break;case"a":case"b":e=t[u.from];break;case"value":e=u.store;break;case B:d[u.store.id]||(t.page=l=Je(l,u.store.id),d=l?l.reg:s.reg),e=me(d[u.store.id])}switch(u.to){case"stack":t.value=e;break;case"a":case"b":t[u.to]=e;break;case B:Xe(l,s,u.target.id).current=e}break}case"check":switch(u.type){case"defined":c=void 0===Se(t);break;case"changed":c=Se(t)===me(Xe(l,s,u.store.id))}break;case"filter":c=!$e(r,u,t);break;case"run":if(a!==e||"effect"!==n){Ue(a,t,"effect");continue e}case"compute":Ke="watch"===s.meta.op,t.value=$e(r,u,t),Ke=f.isWatch}o=r.fail||c}if(!o)for(let e=0;e<s.next.length;e++)Ve("child",l,s.next[e],t,Se(t),je(t))}qe=f.isRoot,Ye=f.currentPage,We=je(f)}function s(e,t="combine"){let n=t+"(",r="",a=0;for(let t in e){let i=e[t];if(null!=i&&(n+=r,n+=V(i)?i.compositeName.fullName:i.toString()),a+=1,25===a)break;r=", "}return n+=")",n}function u(e,t){let n=l(t,ke(e));if(e.shortName=t,!e.compositeName)return void(e.compositeName=n);let r=e.compositeName;r.path=n.path,r.shortName=n.shortName,r.fullName=n.fullName}function l(e,t){let n,r,a,i=e;return t?(a=t.compositeName,0===e.length?(n=a.path,r=a.fullName):(n=a.path.concat([e]),r=0===a.fullName.length?e:a.fullName+"/"+e)):(n=0===e.length?[]:[e],r=e),{shortName:i,fullName:r,path:n}}function d(e,t){for(let n in e)t(e[n],n)}function f(e,t){e.forEach(t)}function p(e,t){let n=(e,...t)=>Ye?((e,t,n,r)=>{let a=Ye,i=null;if(t)for(i=Ye;i&&i.template!==t;)i=ke(i);Qe(i);let o=e.create(n,r);return Qe(a),o})(n,r,e,t):n.create(e,t);n.graphite=o({meta:gt("event",n,t,e),regional:1}),n.create=e=>(c(We?We.find(n):n,e),e),n.watch=ne(pt,n),n.map=e=>{let t,r;Z(e)&&(t=e,r=e.name,e=e.fn);let a=p(tt(n,r),t);return _t(n,a,H,e),a},n.filter=e=>yt(n,"filter",e.fn?e:e.fn,[le({fn:be})]),n.filterMap=e=>yt(n,"filterMap",e,[ue({fn:be}),se.defined()]),n.prepend=e=>{let t=p("* → "+n.shortName,{parent:ke(n)}),r=Pe();return r&&_e(t).seq.push(r.upward),_t(t,n,"prepend",e),vt(n,t),t};let r=Pe();return n}function h(e,t){function n(e,t){d.off(e),Ae(d).set(e,lt(Et(e,d,"on",1,t,p)))}let r=he(e),i=he(e),s=bt("updates"),u=Pe();r.after=[{type:"copy",to:i}],u&&u.plain.push(r,i);let l=r.id,d={subscribers:new Map,updates:s,defaultState:e,stateRef:r,getState(){let e,t=r;if(Ye){let t=Ye;for(;t&&!t.reg[l];)t=ke(t);t&&(e=t)}return!e&&We&&We.reg[l]&&(e=We),e&&(t=e.reg[l]),me(t)},setState(e){let t;We&&(t=We.nodeMap[_e(d).id]),t||(t=d),c({target:t,params:e,defer:1})},reset(...e){for(let t of e)d.on(t,()=>d.defaultState);return d},on(e,t){if(a(e,".on","first argument"),Array.isArray(e))for(let r of e)n(r,t);else n(e,t);return d},off(e){let t=Ae(d).get(e);return t&&(t(),Ae(d).delete(e)),d},map(e,t){let n,a,i;Z(e)&&(n=e,a=e.name,t=e.firstState,e=e.fn);let o=d.getState(),c=Pe();c?i=null:void 0!==o&&(i=e(o,t));let s=h(i,{name:tt(d,a),config:n,strict:0}),u=Et(d,s,H,0,e);return Oe(s).before=[{type:H,fn:e,from:r}],c&&(at(c.plain,r)||at(u.seq,c.loader)||u.seq.unshift(c.loader)),s},watch(e,t){if(!t||!V(e)){let t=pt(d,e),n=Pe();return n?n.watch.push({of:r,fn:e}):e(d.getState()),t}return Q(t)||Y("second argument should be a function"),e.watch(e=>t(d.getState(),e))}},f=gt(B,d,t),p=d.defaultConfig.updateFilter;return d.graphite=o({scope:{state:r},node:[se.defined(),se.changed({store:i}),p&&ce({store:i,to:"a"}),p&&le({fn:(e,t,{a:n})=>p(e,n)}),fe({store:r}),fe({store:i})],child:s,meta:f,regional:1}),mt&&void 0===e&&Y("current state can't be undefined, use null instead"),Te(d,[s]),d}function m(...e){let t,n,r;nt(e[0],(t,n)=>{r=t,e=n});let a,i,o=e[e.length-1];if(Q(o)?(n=e.slice(0,-1),t=o):n=e,1===n.length){let e=n[0];z(e)||(a=e,i=1)}return i||(a=n,t&&(t=Ot(t))),Z(a)||Y("shape should be an object"),wt(Array.isArray(a),a,r,t)}function v(){let e={};return e.req=new Promise((t,n)=>{e.rs=t,e.rj=n}),e.req.catch(()=>{}),e}function g(e,t){let n=p(e,t),r=n.defaultConfig.handler||(()=>Y("no handler used in "+n.getType())),a=_e(n);a.meta.onCopy=["runner"],a.meta.unit=n.kind="effect",n.use=e=>(Q(e)||Y(".use argument should be a function"),r=e,n);let i=n.finally=bt("finally"),s=n.done=i.filterMap({named:"done",fn({status:e,params:t,result:n}){if("done"===e)return{params:t,result:n}}}),u=n.fail=i.filterMap({named:"fail",fn({status:e,params:t,error:n}){if("fail"===e)return{params:t,error:n}}}),l=n.doneData=s.map({named:"doneData",fn:({result:e})=>e}),d=n.failData=u.map({named:"failData",fn:({error:e})=>e}),f=o({scope:{getHandler:n.use.getCurrent=()=>r,finally:i},node:[de({fn({params:e,req:t},{finally:n,getHandler:r},a){let i,o=Ct({params:e,req:t,ok:1,anyway:n,stack:a}),c=Ct({params:e,req:t,ok:0,anyway:n,stack:a});try{i=r()(e)}catch(e){return void c(e)}Z(i)&&Q(i.then)?i.then(o,c):o(i)}})],meta:{op:"fx",fx:"runner",onCopy:["finally"]}});a.scope.runner=f,a.seq.push(ue({fn:(e,t,n)=>ke(n)?{params:e,req:{rs(e){},rj(e){}}}:e}),de({fn:(e,{runner:t},n)=>(c({target:t,params:e,defer:1,forkPage:je(n)}),e.params)})),n.create=e=>{let t=v(),r={params:e,req:t};if(We){if(!Ke){let e=We;t.req.finally(()=>{Ze(e)}).catch(()=>{})}c(We.find(n),r)}else c(n,r);return t.req};let m=n.inFlight=h(0,{named:"inFlight"}).on(n,e=>e+1).on(i,e=>e-1),g=n.pending=m.map({fn:e=>e>0,named:"pending"});return Te(n,[i,s,u,l,d,g,m,f]),n}function b(e){let t;nt(e,(n,r)=>{t=n,e=r});let{source:n,effect:r,mapParams:a}=e;a||(a=n?(e,t)=>t:e=>e);let i,o=g(e,t),{runner:s}=_e(o).scope,u=({params:e,req:t},{finally:n,effect:r},i)=>{let o,s=Ct({params:e,req:t,ok:0,anyway:n,stack:i});try{o=a(e,i.a)}catch(e){return s(e)}c({target:r,params:{params:o,req:{rs:Ct({params:e,req:t,ok:1,anyway:n,stack:i}),rj:s}},page:i.page,defer:1})};if(n){let e;z(n)?(e=n,Te(n,[o])):(e=m(n),Te(o,[e]));let t=ce({from:B,store:Oe(e),to:"a"});i=[de({fn:e=>e}),t,ue({fn:u})],Re(t,s.reg)}else i=[de({fn:u})];return Te(r,[o]),s.scope.effect=r,s.meta.onCopy.push("effect"),s.seq.splice(0,1,...i),vt(r,o,"effect"),o}function _(...e){let[[t,n],r]=rt(e),a={};return d(n,(e,n)=>{let i=a[n]=p(n,{parent:ke(t),config:r});t.on(i,e),vt(t,i)}),a}function y(e,t){let n=new Set,r=new Set,a=new Set,i=new Set,c=o({family:{type:"domain"},regional:1}),s={history:{domains:n,stores:r,effects:a,events:i},graphite:c};c.meta=gt("domain",s,t,e);let[u,l,f,m]=["onEvent","onEffect","onStore","onDomain"].map(bt);s.hooks={event:u,effect:l,store:f,domain:m},s.onCreateEvent=At(u,i,s),s.onCreateEffect=At(l,a,s),s.onCreateStore=At(f,r,s),s.onCreateDomain=At(m,n,s),s.createEvent=s.event=(e,t)=>u(p(e,{parent:s,config:t})),s.createEffect=s.effect=(e,t)=>l(g(e,{parent:s,config:t})),s.createDomain=s.domain=(e,t)=>y({name:e,parent:s,config:t}),s.createStore=s.store=(e,t)=>f(h(e,{parent:s,config:t}));let v=ke(s);return v&&(d(s.hooks,(e,t)=>{ft({from:e,to:v.hooks[t]})}),v.hooks.domain(s)),s}function E(e){J(e);let t=L in e?e[L]():e;t.subscribe||Y("expect observable to have .subscribe");let n=p(),r=re(ut,n,void 0);return t.subscribe({next:n,error:r,complete:r}),n}function O(e,t){let n=p(t||s(e,"merge"));return a(e,"merge","first argument"),ft({from:e,to:n,meta:{op:"merge"}}),n}function w(...e){let t,n,r,i,[[c,s,u],l]=rt(e);void 0===s&&Z(c)&&(e=>{let t=0;return f(kt,n=>{n in e&&(null==e[n]&&Y(`sample: ${n} should be defined`),t=1)}),t})(c)&&(s=c.clock,u=c.fn,i=c.greedy,t=c.target,n=c.name,r=c.sid,c=c.source);let d=1;void 0===c&&(a(s,"sample","clock"),Array.isArray(s)&&(s=O(s)),c=s,d=0),d&&!V(c)&&(c=m(c)),void 0===s&&(s=c),a(s,"sample","clock"),n=l||n||c.shortName;let v=Pe(),g=!!t;t||(z(c)&&z(s)?t=h(u?u(me(Oe(c)),me(Oe(s))):me(Oe(c)),{name:n,sid:r}):(t=p(n),v&&_e(t).seq.push(v.loader)));let b=g&&V(t)&&_e(t).meta.nativeTemplate;if(z(c)){let e=Oe(c);Te(c,[dt(s,t,{scope:{fn:u,targetTemplate:b},node:[v&&v.loader,!i&&oe({priority:"sampler"}),ce({store:e,to:u?"a":"stack"}),u&&ue({fn:ge}),v&&g&&v.upward],meta:{op:"sample",sample:B}})]),v&&(at(v.plain,e)||at(v.closure,e)||v.closure.push(e))}else{let e=he(0),n=he(),r=he();v&&v.plain.push(e,n,r),o({parent:c,node:[fe({store:n}),ce({from:"value",store:1,target:e})],family:{owners:[c,t,s],links:t},meta:{op:"sample",sample:"source"},regional:1}),Te(c,[dt(s,t,{scope:{fn:u,targetTemplate:b},node:[v&&v.loader,fe({store:r}),ce({store:e}),le({fn:e=>e}),!i&&oe({priority:"sampler"}),ce({store:n}),ce({store:r,to:"a"}),u&&ue({fn:ve}),v&&g&&v.upward],meta:{op:"sample",sample:"clock"}})])}return t}function C(...e){let t={op:"guard"},n="guard",[[r,i],c]=rt(e);c&&(t.config=c,c.name&&(n=c.name)),i||(i=r,r=i.source);let{filter:s,greedy:u,clock:l,name:d=n}=i,f=i.target||p(d,t.config),h=V(s),v=1;return void 0===r&&(a(l,"guard","clock"),Array.isArray(l)&&(l=O(l)),r=l,v=0),v&&!V(r)&&(r=m(r)),l&&(a(l,"guard","clock"),r=w({source:r,clock:l,greedy:u,fn:h?null:(e,t)=>({source:e,clock:t})})),a(f,"guard","target"),h?w({source:s,clock:r,target:o({node:[le({fn:({guard:e})=>e}),ue({fn:({data:e})=>e})],child:f,meta:t,family:{owners:[r,s,f,...[].concat(l||[])],links:f},regional:1}),fn:(e,t)=>({guard:e,data:t}),greedy:u,name:d}):(Q(s)||Y("`filter` should be function or unit"),dt(r,f,{scope:{fn:s},node:l?[le({fn:({source:e,clock:t},{fn:n})=>n(e,t)}),ue({fn:({source:e})=>e})]:[le({fn:be})],meta:t})),f}function S(e,t,n){if(z(e))return e;if(V(e)){let r,a=ke(e);return G(e)&&(r=h(t,{parent:a,name:e.shortName,"ɔ":n}).on(e,(e,t)=>t)),W(e)&&(r=h(t,{parent:a,name:e.shortName,"ɔ":n}).on(e.done,(e,{result:t})=>t)),a&&a.hooks.store(r),r}let r=Array.isArray(e)?[]:{};return d(e,(e,t)=>{r[t]=z(e)?e:h(e,{name:t})}),r}function A(...e){let t,[[n,r],a]=rt(e),i=!r;i&&(t=n.cases,r=n.match,n=n.source);let c=z(r),s=!V(r)&&Q(r),u=!c&&!s&&Z(r);t||(t={}),i||(u||Y("match should be an object"),d(r,(e,n)=>{t[n]=p(a)}),t.__=p(a));let l,f=Pe(),h=new Set([].concat(n,Object.values(t))),m=Object.keys(c||s?t:r);if(c||s)c&&h.add(r),l=[c&&oe({priority:"sampler"}),c&&ce({store:Oe(r),to:"a"}),le({fn(e,t,n){let a=String(c?n.a:r(e));jt(t,at(m,a)?a:"__",e,n)}})];else if(u){let e=he({});e.type="shape";let t,n=e.before=[],a=[ce({store:e,to:"a"}),ue({fn(e,{key:t},{a:n}){n[t]=e}})],i=[];d(r,(r,o)=>{if(V(r)){t=1,i.push(o),h.add(r);let c=dt(r,[],{node:a,scope:{key:o}});if(z(r)){e.current[o]=r.getState();let t=Oe(r);n.push({type:"field",field:o,from:t}),f&&(at(f.plain,t)||c.seq.unshift(f.loader))}}}),t&&f&&f.plain.push(e),l=[t&&oe({priority:"sampler"}),t&&ce({store:e,to:"a"}),le({fn(e,t,n){for(let a=0;a<m.length;a++){let o=m[a];if(at(i,o)?n.a[o]:r[o](e))return void jt(t,o,e,n)}jt(t,"__",e,n)}})]}else Y("expect match to be unit, function or object");if(o({meta:{onCopy:Object.keys(t),op:"split"},parent:n,scope:t,node:l,family:{type:"crosslink",owners:Array.from(h)},regional:1}),!i)return t}function k(e,{values:t}){let n=Z(e)&&e.cloneOf;q(e)||n||Y("first argument of hydrate should be domain or scope"),Z(t)||Y("values property should be an object");let r,a,i=P(t);if(n)r=[],a=[],d(i,(t,n)=>{let i=e.sidMap[n];i&&(r.push(i),a.push(t),e.changedStores.add(i.meta.forkOf.id))});else{let t=(({flatGraphUnits:e,values:t,collectWatches:n})=>{let r=[],a=[],i={},o=new Set,c=Object.getOwnPropertyNames(t);return f(e,e=>{let{reg:s}=e,{op:u,unit:l,sid:f}=e.meta;if(l===B&&f&&at(c,f)){let{state:n}=e.scope;n.current=t[f],o.add(n)}if(n&&"watch"===u){let t=e.family.owners[0];t.meta.unit===B&&(r.push(e),a.push(t.scope.state))}d(s,(e,t)=>{i[t]=e})}),f(N(j(i)),e=>{(e=>{let t=0;if(e.before&&!o.has(e)&&f(e.before,n=>{switch(n.type){case H:e.current=n.fn(n.from.current);break;case"field":{let r=n.from;t||(t=1,e.current=Array.isArray(e.current)?[...e.current]:{...e.current}),e.current[n.field]=r.current;break}}}),!e.after)return;let n=e.current;f(e.after,e=>{let t=e.to;switch(e.type){case"copy":t.current=n;break;case H:t.current=e.fn(n)}})})(i[e])}),{storeWatches:r,storeWatchesRefs:a}})({flatGraphUnits:R(e),values:i,collectWatches:1});r=t.storeWatches,a=t.storeWatchesRefs.map(({current:e})=>e)}c({target:r,params:a,forkPage:n?e:0})}function j(e){let t=Object.values(e),n={};return f(t,({id:e})=>{n[e]=[]}),f(t,({id:e,before:t,after:r})=>{t&&f(t,t=>{n[t.from.id].push(e)}),r&&f(r,t=>{n[e].push(t.to.id)})}),n}function T({clones:e,changedStores:t},{ignore:n=[],onlyChanges:r}={}){let a={};return f(e,({meta:e,scope:n,reg:i})=>{if(e.unit!==B)return;let{sid:o}=e;o&&(!r&&!e.isCombine||t.has(e.forkOf.id))&&(a[o]=i[n.state.id].current)}),f(n,({sid:e})=>{e&&delete a[e]}),a}function I(e){We||Y("scopeBind cannot be called outside of forked .watch");let t=We,n=We.find(e);return W(e)?e=>{let r=v();c({target:n,params:{params:e,req:r},forkPage:t})}:e=>(c({target:n,params:e,forkPage:t}),e)}function P(e,t=(()=>{})){if(e instanceof Map){let n={};for(let[r,a]of e)V(r)||Y("Map key should be a unit"),t(r,a),n[r.sid]=a;return n}return e}function D(e,{values:t,handlers:n}={}){q(e)||Y("first argument of fork should be domain");let r=!!t;t=P(t||{},e=>!z(e)&&Y("Values map can contain only stores as keys"));let a=(e=>{function t(e){let t=_e(e),r=n.indexOf(t);if(-1===r){let n="unit";e!==t&&e.id!==e.shortName&&(n=e.shortName),Y(n+" not found in forked scope")}return l[r]}let n=R(e),r=new Map,a=new Set,i=ue({fn:(e,t,n)=>((!n.node.meta.isCombine||ke(n)&&"combine"!==ke(n).node.meta.op)&&a.add(n.node.meta.forkOf.id),e)}),c=o({scope:{defers:[],inFlight:0,fxID:0},node:[ue({fn(e,t,n){n.parent?"finally"===n.parent.node.meta.named?t.inFlight-=1:(t.inFlight+=1,t.fxID+=1):t.fxID+=1}}),oe({priority:"sampler"}),de({fn(e,t){let{inFlight:n,defers:r,fxID:a}=t;n>0||0===r.length||Promise.resolve().then(()=>{t.fxID===a&&f(r.splice(0,r.length),e=>{Ze(e.parentFork),e.rs(e.value)})})}})],meta:{unit:"forkInFlightCounter"}}),s={},u={},l=n.map(e=>{let{seq:t,next:n,meta:r,scope:a}=e,i=o({node:t.map(e=>({id:e.id,type:e.type,data:{...e.data},hasRef:e.hasRef})),child:[...n],meta:{forkOf:e,...r},scope:{...a}});return i.family={type:e.family.type,links:[...Ee(e)],owners:[...ye(e)]},s[e.id]=i,r.sid&&(u[r.sid]=i),i}),p={};return f(l,e=>{let{reg:n,scope:a,meta:{onCopy:o,op:s,unit:u}}=e;switch(d(n,(e,t)=>{let a=r.get(e);a||(a={id:e.id,current:e.current},r.set(e,a)),p[t]=n[t]=a}),o&&f(o,e=>{let n=a[e];a[e]=Array.isArray(n)?n.map(t):t(n)}),M(e,(e,n,r)=>{r[n]=t(e)}),s||u){case B:e.meta.wrapped=(e=>({kind:B,getState:()=>e.reg[e.scope.state.id].current,updates:{watch:ne(pt,e)},graphite:e,family:e.family}))(e),e.meta.sid&&e.seq.push(i);break;case F:e.next.push(c);break;case"fx":a.finally.next.push(c)}}),{cloneOf:e,changedStores:a,nodeMap:s,sidMap:u,clones:l,find:t,reg:p,getState:e=>t(e).meta.wrapped.getState(),graphite:o({family:{type:"domain",links:[c,...l]},meta:{unit:"fork"},scope:{forkInFlightCounter:c}})}})(e);if(r&&(()=>{let n=R(e),r={},i={},o=new Set,c=new Set,s=Object.getOwnPropertyNames(t);f(n,({reg:e,meta:t})=>{let{nativeTemplate:n}=t;d(e,(e,t)=>{r[t]=e,n&&c.add(t)})}),f(a.clones,e=>{let{reg:n}=e,{unit:r,sid:c}=e.meta;if(r===B&&c&&at(s,c)){let{state:r}=e.scope;n[r.id].current=t[c],o.add(r),a.changedStores.add(e.meta.forkOf.id)}d(n,(e,t)=>{i[t]=e})}),f(N(j(r),c),e=>{((e,t)=>{let n=0;if(t&&t.before&&!o.has(e)&&f(t.before,t=>{switch(t.type){case H:e.current=t.fn(i[t.from.id].current);break;case"field":{let r=i[t.from.id];n||(n=1,e.current=Array.isArray(e.current)?[...e.current]:{...e.current}),e.current[t.field]=r.current;break}}}),!t||!t.after)return;let r=e.current;f(t.after,e=>{let t=i[e.to.id];switch(e.type){case"copy":t.current=r;break;case H:t.current=e.fn(r)}})})(i[e],r[e])})})(),n){n=P(n,e=>!W(e)&&Y("Handlers map can contain only effects as keys"));let e=Object.keys(n);f(a.clones,({scope:t,meta:r})=>{r.sid&&at(e,r.sid)&&(t.runner.scope.getHandler=()=>n[r.sid])})}return a}function N(e,t){function n(e){o[e]=1;let t=r[e];for(let e=0;e<t.length;e++){let r=t[e];o[r]||i[r]||n(r)}o[e]=0,i[e]=1,a.push(e)}let r={};for(let t in e)r[t]=[...new Set(e[t])];let a=[],i={},o={};for(let e in r)i[e]||o[e]||n(e);if(a.reverse(),t&&t.size>0){let e,n=[],i=[...t];for(;e=i.shift();)n.push(e),f(r[e],e=>{at(n,e)||at(i,e)||i.push(e)});f(n,e=>{it(a,e)})}return a}function x(e,{scope:t,params:n}){if(!V(e))return Promise.reject(Error("first argument should be unit"));let r=v();r.parentFork=We;let{forkInFlightCounter:a}=t.graphite.scope;a.scope.defers.push(r);let i=[t.find(e)],o=[];return W(e)?o.push({params:n,req:{rs(e){r.value={status:"done",value:e}},rj(e){r.value={status:"fail",value:e}}}}):o.push(n),i.push(a),o.push(null),c({target:i,params:o,forkPage:t}),r.req}function R(e){let t=[];return function e(n){at(t,n)||(t.push(n),M(n,e))}(_e(e)),t}function M(e,t){let n=e.meta.unit;"fork"!==n&&"forkInFlightCounter"!==n&&(f(e.next,t),f(ye(e),t),f(Ee(e),t))}n.r(t),n.d(t,"allSettled",(function(){return x})),n.d(t,"attach",(function(){return b})),n.d(t,"clearNode",(function(){return ut})),n.d(t,"combine",(function(){return m})),n.d(t,"createApi",(function(){return _})),n.d(t,"createDomain",(function(){return y})),n.d(t,"createEffect",(function(){return g})),n.d(t,"createEvent",(function(){return p})),n.d(t,"createNode",(function(){return o})),n.d(t,"createStore",(function(){return h})),n.d(t,"createStoreObject",(function(){return m})),n.d(t,"fork",(function(){return D})),n.d(t,"forward",(function(){return ft})),n.d(t,"fromObservable",(function(){return E})),n.d(t,"guard",(function(){return C})),n.d(t,"hydrate",(function(){return k})),n.d(t,"is",(function(){return K})),n.d(t,"launch",(function(){return c})),n.d(t,"merge",(function(){return O})),n.d(t,"restore",(function(){return S})),n.d(t,"sample",(function(){return w})),n.d(t,"scopeBind",(function(){return I})),n.d(t,"serialize",(function(){return T})),n.d(t,"setStoreName",(function(){return u})),n.d(t,"split",(function(){return A})),n.d(t,"step",(function(){return pe})),n.d(t,"version",(function(){return Tt})),n.d(t,"withFactory",(function(){return Ne})),n.d(t,"withRegion",(function(){return i}));let L="undefined"!=typeof Symbol&&Symbol.observable||"@@observable",B="store",F="effect",H="map",V=e=>(Q(e)||Z(e))&&"kind"in e;const U=e=>t=>V(t)&&t.kind===e;let z=U(B),G=U("event"),W=U(F),q=U("domain");var K={__proto__:null,unit:V,store:z,event:G,effect:W,domain:q};let Y=e=>{throw Error(e)},Z=e=>"object"==typeof e&&null!==e,Q=e=>"function"==typeof e,J=e=>{Z(e)||Q(e)||Y("expect first argument be an object")};const X=()=>{let e=0;return()=>(++e).toString(36)};let $=X(),ee=X(),te=X(),ne=(e,t)=>e.bind(null,t),re=(e,t,n)=>e.bind(null,t,n);const ae=(e,t,n)=>({id:ee(),type:e,data:n,hasRef:t});let ie=0,oe=({priority:e="barrier"})=>ae("barrier",0,{barrierID:++ie,priority:e}),ce=({from:e=B,store:t,target:n,to:r=(n?B:"stack")})=>ae("mov",e===B,{from:e,store:t,to:r,target:n}),se={defined:()=>ae("check",0,{type:"defined"}),changed:({store:e})=>ae("check",1,{type:"changed",store:e})},ue=re(ae,"compute",0),le=re(ae,"filter",0),de=re(ae,"run",0),fe=({store:e})=>ce({from:"stack",target:e});var pe={__proto__:null,barrier:oe,mov:ce,check:se,compute:ue,filter:le,run:de,update:fe};let he=e=>({id:ee(),current:e}),me=({current:e})=>e,ve=(e,{fn:t},{a:n})=>t(e,n),ge=(e,{fn:t},{a:n})=>t(n,e),be=(e,{fn:t})=>t(e),_e=e=>e.graphite||e,ye=e=>e.family.owners,Ee=e=>e.family.links,Oe=e=>e.stateRef,we=e=>e.config,Ce=e=>e.ɔ,Se=e=>e.value,Ae=e=>e.subscribers,ke=e=>e.parent,je=e=>e.forkPage,Te=(e,t)=>{let n=_e(e);for(let e=0;e<t.length;e++){let r=_e(t[e]);"domain"!==n.family.type&&(r.family.type="crosslink"),ye(r).push(n),Ee(n).push(r)}},Ie=null,Pe=()=>Ie&&Ie.template,De=e=>(e&&Ie&&Ie.sidRoot&&(e=`${Ie.sidRoot}ɔ${e}`),e),Ne=({sid:e,name:t,loc:n,method:r,fn:a})=>i(o({meta:{sidRoot:De(e),name:t,loc:n,method:r}}),a);const xe=(e=[])=>{let t=[];if(Array.isArray(e))for(let n=0;n<e.length;n++)Array.isArray(e[n])?t.push(...e[n]):t.push(e[n]);else t.push(e);return t.map(_e)};let Re=({hasRef:e,type:t,data:n},r)=>{let a;e&&(a=n.store,r[a.id]=a),"mov"===t&&n.to===B&&(a=n.target,r[a.id]=a)},Me=null;const Le=(e,t)=>{if(!e)return t;if(!t)return e;let n,r=e.v.type===t.v.type;return(r&&e.v.id>t.v.id||!r&&"sampler"===e.v.type)&&(n=e,e=t,t=n),n=Le(e.r,t),e.r=e.l,e.l=n,e},Be=[];let Fe=0;for(;Fe<5;)Be.push({first:null,last:null,size:0}),Fe+=1;const He=()=>{for(let e=0;e<5;e++){let t=Be[e];if(t.size>0){if(2===e||3===e){t.size-=1;let e=Me.v;return Me=Le(Me.l,Me.r),e}1===t.size&&(t.last=null);let n=t.first;return t.first=n.r,t.size-=1,n.v}}},Ve=(e,t,n,r,a,i)=>Ue(0,{a:null,b:null,node:n,parent:r,value:a,page:t,forkPage:i},e),Ue=(e,t,n,r=0)=>{let a=ze(n),i=Be[a],o={v:{idx:e,stack:t,type:n,id:r},l:0,r:0};2===a||3===a?Me=Le(Me,o):(0===i.size?i.first=o:i.last.r=o,i.last=o),i.size+=1},ze=e=>{switch(e){case"child":return 0;case"pure":return 1;case"barrier":return 2;case"sampler":return 3;case F:return 4;default:return-1}},Ge=new Set;let We,qe=1,Ke=0,Ye=null,Ze=e=>{We=e},Qe=e=>{Ye=e};const Je=(e,t)=>{if(e){for(;e&&!e.reg[t];)e=ke(e);if(e)return e}return null},Xe=(e,t,n)=>(Je(e,n)||t).reg[n],$e=(e,{fn:t},n)=>{try{return t(Se(n),e.scope,n)}catch(t){console.error(t),e.fail=1}};let et=(e,t)=>""+e.shortName+t,tt=(e,t)=>null==t?et(e," → *"):t,nt=(e,t)=>{J(e),Ce(e)&&t(we(e),Ce(e))},rt=e=>{let t;return nt(e[0],(n,r)=>{t=n,e=r}),[e,t]},at=(e,t)=>e.includes(t),it=(e,t)=>{let n=e.indexOf(t);-1!==n&&e.splice(n,1)};const ot=(e,t)=>{it(e.next,t),it(ye(e),t),it(Ee(e),t)},ct=(e,t,n)=>{let r;e.next.length=0,e.seq.length=0,e.scope=null;let a=Ee(e);for(;r=a.pop();)ot(r,e),(t||n&&!e.meta.sample||"crosslink"===r.family.type)&&ct(r,t,"on"!==r.meta.op&&n);for(a=ye(e);r=a.pop();)ot(r,e),n&&"crosslink"===r.family.type&&ct(r,t,"on"!==r.meta.op&&n)},st=e=>e.clear();let ut=(e,{deep:t}={})=>{let n=0;if(e.ownerSet&&e.ownerSet.delete(e),z(e))st(Ae(e));else if(q(e)){n=1;let t=e.history;st(t.events),st(t.effects),st(t.stores),st(t.domains)}ct(_e(e),!!t,n)},lt=e=>{let t=re(ut,e,void 0);return t.unsubscribe=t,t},dt=(e,t,{node:n,scope:r,meta:a})=>o({node:n,parent:e,child:t,scope:r,meta:a,family:{owners:[e,t],links:t},regional:1}),ft=e=>{let t;nt(e,(n,r)=>{t=n,e=r});let{from:n,to:r,meta:i={op:"forward"}}=e;return a(n,"forward",'"from"'),a(r,"forward",'"to"'),t&&(i.config=t),lt(o({parent:n,child:r,meta:i,family:{},regional:1}))},pt=(e,t)=>{if(Q(t)||Y(".watch argument should be a function"),We){let t=We.nodeMap[_e(e).id];t&&(e=t)}return lt(o({scope:{fn:t},node:[de({fn:be})],parent:e,meta:{op:"watch"},family:{owners:e},regional:1}))};const ht=(e,t)=>(Z(e)&&(ht(we(e),t),null!=e.name&&(Z(e.name)?ht(e.name,t):Q(e.name)?t.handler=e.name:t.name=e.name),e.loc&&(t.loc=e.loc),(e.sid||null===e.sid)&&(t.sid=e.sid),e.handler&&(t.handler=e.handler),e.updateFilter&&(t.updateFilter=e.updateFilter),ke(e)&&(t.parent=ke(e)),"strict"in e&&(t.strict=e.strict),e.named&&(t.named=e.named),ht(Ce(e),t)),t);let mt,vt=(e,t,n="event")=>{ke(e)&&ke(e).hooks[n](t)},gt=(e,t,n,r)=>{let a=ht({name:r,config:n},{}),i="domain"===e,o=$(),{parent:c=null,sid:s=null,strict:u=1,named:d=null}=a,f=d||a.name||(i?"":o),p=l(f,c),h={unit:t.kind=e,name:t.shortName=f,sid:t.sid=De(s),named:d,unitId:t.id=o};if(t.parent=c,t.compositeName=p,t.defaultConfig=a,t.thru=e=>e(t),t.getType=()=>p.fullName,!i){t.subscribe=e=>(J(e),t.watch(Q(e)?e:t=>{e.next&&e.next(t)})),t[L]=()=>t;let e=Pe();e&&(h.nativeTemplate=e)}return mt=u,h},bt=e=>p({named:e});const _t=(e,t,n,r)=>dt(e,t,{scope:{fn:r},node:[ue({fn:be})],meta:{op:n}}),yt=(e,t,n,r)=>{let a;Z(n)&&(a=n,n=n.fn);let i=p(et(e," →? *"),a);return dt(e,i,{scope:{fn:n},node:r,meta:{op:t}}),i},Et=(e,t,n,r,a,i)=>{let o=Oe(t),c=[ce({store:o,to:"a"}),ue({fn:r?ge:ve}),se.defined(),se.changed({store:o}),i&&le({fn:(e,t,{a:n})=>i(e,n)}),fe({store:o})],s=Pe();if(s&&(c.unshift(s.loader),c.push(s.upward),z(e))){let t=Oe(e);at(s.plain,t)||(at(s.closure,t)||s.closure.push(t),o.before||(o.before=[]),o.before.push({type:"closure",of:t}))}return dt(e,t,{scope:{fn:a},node:c,meta:{op:n}})},Ot=e=>t=>e(...t),wt=(e,t,n,r)=>{let a=e?e=>e.slice():e=>({...e}),i=e?[]:{},o=Pe(),c=a(i),u=he(c),l=he(1);u.type=e?"list":"shape",o&&o.plain.push(u,l);let f=h(c,{name:n||s(t)});_e(f).meta.isCombine=1;let p=[se.defined(),ce({store:u,to:"a"}),le({fn:(e,{key:t},{a:n})=>e!==n[t]}),ce({store:l,to:"b"}),ue({fn(e,{clone:t,key:n},r){r.b&&(r.a=t(r.a)),r.a[n]=e}}),ce({from:"a",target:u}),ce({from:"value",store:0,target:l}),oe({priority:"barrier"}),ce({from:"value",store:1,target:l}),ce({store:u}),r&&ue({fn:r}),se.changed({store:Oe(f)})],m=u.before=[];return d(t,(e,t)=>{if(!z(e))return void(c[t]=i[t]=e);i[t]=e.defaultState,c[t]=e.getState();let n=dt(e,f,{scope:{key:t,clone:a},node:p,meta:{op:"combine"}}),r=Oe(e);m.push({type:"field",field:t,from:r}),o&&(at(o.plain,r)||n.seq.unshift(o.loader))}),f.defaultShape=t,u.after=[r?{type:H,to:Oe(f),fn:r}:{type:"copy",to:Oe(f)}],o||(f.defaultState=r?Oe(f).current=r(c):i),f};let Ct=({params:e,req:t,ok:n,anyway:r,stack:a})=>i=>c({target:[r,St],params:[n?{status:"done",params:e,result:i}:{status:"fail",params:e,error:i},{fn:n?t.rs:t.rj,value:i}],defer:1,page:a.page,forkPage:je(a)}),St=o({node:[de({fn({fn:e,value:t}){e(t)}})],meta:{op:"fx",fx:"sidechain"}});const At=(e,t,n)=>(e.create=t=>(c(e,t),t),_e(e).seq.push(ue({fn:(e,t,n)=>(n.forkPage=null,e)})),e.watch(e=>{Te(n,[e]),t.add(e),e.ownerSet||(e.ownerSet=t),ke(e)||(e.parent=n)}),Te(n,[e]),n=>(t.forEach(n),e.watch(n))),kt=["source","clock","target"],jt=(e,t,n,r)=>{let a=e[t];a&&c({target:a,params:Array.isArray(a)?a.map(()=>n):n,defer:1,stack:r})},Tt="21.8.12"},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l}));var r,a=n(316),i=n.n(a),o=n(0),c=!("undefined"==typeof window||!window.document||!window.document.createElement);if(c){r=new i.a({attrs:{id:"__SVG_SPRITE_NODE__"}});var s=function(){var e=document.getElementById("__SVG_SPRITE_NODE__");e?r.attach(e):r.mount()};document.querySelector("body")?s():document.addEventListener("DOMContentLoaded",s)}else r=null;function u(e){r&&r.add(e)}var l=c?o.useLayoutEffect:o.useEffect},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(872);e.exports=function(e,t){if(null==e)return{};var n,a,i=r(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"u",(function(){return f})),n.d(t,"t",(function(){return y})),n.d(t,"C",(function(){return E})),n.d(t,"a",(function(){return O})),n.d(t,"i",(function(){return w})),n.d(t,"q",(function(){return S})),n.d(t,"s",(function(){return A})),n.d(t,"r",(function(){return k})),n.d(t,"m",(function(){return j})),n.d(t,"h",(function(){return T})),n.d(t,"z",(function(){return p})),n.d(t,"D",(function(){return h})),n.d(t,"e",(function(){return m})),n.d(t,"j",(function(){return I})),n.d(t,"x",(function(){return C})),n.d(t,"k",(function(){return N})),n.d(t,"l",(function(){return x})),n.d(t,"v",(function(){return g})),n.d(t,"p",(function(){return b})),n.d(t,"w",(function(){return _})),n.d(t,"g",(function(){return R})),n.d(t,"y",(function(){return W})),n.d(t,"B",(function(){return K})),n.d(t,"o",(function(){return Z})),n.d(t,"n",(function(){return Q})),n.d(t,"b",(function(){return r})),n.d(t,"A",(function(){return i})),n.d(t,"f",(function(){return Y}));var r=!("undefined"==typeof window||!window.document||!window.document.createElement),a=r&&!!window.addEventListener;function i(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)}var o={supported:!1,name:"animationend"},c={supported:!1,name:"transitionend"};r&&("undefined"!=typeof AnimationEvent?o.supported=!0:"undefined"!=typeof WebKitAnimationEvent&&(o.supported=!0,o.name="webkitAnimationEnd"),"undefined"!=typeof TransitionEvent?c.supported=!0:"undefined"!=typeof WebKitTransitionEvent&&(c.supported=!0,c.name="webkitTransitionEnd"));var s=n(57),u=n.n(s);function l(){for(var e=[],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){if(t)switch(u()(t)){case"string":e.push(t);break;case"object":Object.keys(t).forEach((function(n){t[n]&&e.push(n)}));break;default:e.push("".concat(t))}})),e.join(" ")}function d(e){return navigator.clipboard?function(e){return navigator.clipboard.writeText(e).then((function(){return!0}))}(e):function(e){return new Promise((function(t,n){var r=document.createElement("textarea"),a=document.createRange();r.value=e,r.style.position="fixed",r.contentEditable="true",document.body.appendChild(r),r.focus(),r.select(),a.selectNodeContents(r);var i=window.getSelection();i&&(i.removeAllRanges(),i.addRange(a)),r.setSelectionRange(0,999999);try{document.execCommand("copy")?t(!0):n(new Error("copy failed"))}catch(e){n(e)}i&&i.removeAllRanges(),document.body.removeChild(r)}))}(e)}function f(e){return!isNaN(parseFloat(e))&&isFinite(e)&&!Array.isArray(e)}var p=function(){};function h(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;return function(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];var s=a,u=Date.now();t&&u<t+r?(clearTimeout(n),n=setTimeout((function(){t=u,e.apply(s,o)}),r)):(t=u,e.apply(s,o))}}function m(e,t){var n,r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,i=function(){return e.apply(a,r)};return function(){for(var e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];r=a,clearTimeout(n),n=setTimeout(i,t)}}if(a)try{var v=Object.defineProperty({},"passive",{get:function(){!0}});window.addEventListener("test",p,v),window.removeEventListener("test",p,v)}catch(e){}!function(){if(!r)return!1;var e=!1;try{document.createElement("div").scrollTo({top:0,get behavior(){return e=!0,"smooth"}})}catch(e){}}();function g(e){return"object"===u()(e)&&null!==e}function b(e){return Array.isArray(e)}function _(e){return"string"==typeof e}function y(e,t){if(e===t)return!0;if(null==e||null==t||!g(e)&&!g(t))return e!=e&&t!=t;if(g(e)&&g(t)){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e){if(!e.hasOwnProperty(n)||!t.hasOwnProperty(n))return!1;if(!y(e[n],t[n]))return!1}return!0}return!1}n(21);function E(e){return e.map((function(e){return[Math.random(),e]})).sort((function(e,t){return e[0]-t[0]})).map((function(e){return e[1]}))}var O=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return new Promise((function(r,a){t().then(r).catch((function(i){setTimeout((function(){0!==n?e(t,n-1).then(r,a):a(i)}),1e3)}))}))};function w(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([.$?*|{}()\[\]\\\/+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function C(e){return e>=10?String(e):"0"+String(e)}function S(e){var t=new Date,n=t.getDate(),r=t.getMonth(),a=t.getFullYear();return e.getFullYear()===a&&e.getMonth()===r&&e.getDate()===n}function A(e){return S(new Date(e.getTime()+864e5))}function k(e){return S(new Date(e.getTime()-864e5))}function j(e){return Math.floor(e.getTime()/1e3)}function T(e,t){e||(e=0),e=Math.abs(e);var n=Math.floor(e/3600),r=Math.floor(e/60)%60,a=e%60;return e>=3600||t?[n,C(r),C(a)].join(":"):[r,C(a)].join(":")}function I(e){var t=e instanceof HTMLElement;if("undefined"==typeof window||!t)return{top:0,left:0,width:0,height:0};var n=e,r=n.getBoundingClientRect(),a=document.body,i=document.documentElement,o=window.pageYOffset||i.scrollTop||a.scrollTop,c=window.pageXOffset||i.scrollLeft||a.scrollLeft,s=i.clientTop||a.clientTop||0,u=i.clientLeft||a.clientLeft||0;return{top:Math.round(r.top+o-s),left:Math.round(r.left+c-u),width:n.offsetWidth,height:n.offsetHeight}}var P=n(2),D=n.n(P);function N(e,t){return Math.round(e-.5+Math.random()*(t-e+1))}function x(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=[],r=0;r<e;r++)n.push(t.charAt(Math.floor(Math.random()*t.length)));return n.join("")}function R(e){return e?e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1"):""}var M,L=n(30),B=n.n(L),F=n(31),H=n.n(F),V=function(){function e(){var t=this;B()(this,e),D()(this,"data",{}),D()(this,"getItem",(function(e){return t.data.hasOwnProperty(e)?t.data[e]:null})),D()(this,"keys",(function(){return Object.keys(t.data)}))}return H()(e,[{key:"setItem",value:function(e,t){this.data[e]=String(t)}},{key:"removeItem",value:function(e){delete this.data[e]}},{key:"clear",value:function(){this.data={}}},{key:"key",value:function(e){return Object.keys(this.data)[e]}},{key:"length",get:function(){return Object.keys(this.data).length}}]),e}(),U="vk-ls-dummy";function z(){if(M)return M;try{if(window.localStorage.setItem(U,"test"),"test"!==window.localStorage.getItem(U))throw new Error("localStorage is broken");window.localStorage.removeItem(U),M=window.localStorage}catch(e){M=new V}return M}var G,W={setItem:function(e,t){return z().setItem(e,t)},getItem:function(e){return z().getItem(e)},removeItem:function(e){return z().removeItem(e)},clear:function(){return z().clear()},length:function(){return z().length},key:function(e){return z().key(e)},keys:function(){var e=z();return e instanceof V?e.keys():Object.keys(e)},getPrefixedKeys:function(e){return W.keys().filter((function(t){return t.startsWith(e)}))}};function q(){if(G)return G;try{if(window.sessionStorage.setItem(U,"test"),"test"!==window.sessionStorage.getItem(U))throw new Error("sessionStorage is broken");window.sessionStorage.removeItem(U),G=window.sessionStorage}catch(e){G=new V}return G}var K={setItem:function(e,t){return q().setItem(e,t)},getItem:function(e){return q().getItem(e)},removeItem:function(e){return q().removeItem(e)},clear:function(){return q().clear()},length:function(){return q().length},key:function(e){return q().key(e)},keys:function(){var e=q();return e instanceof V?e.keys():Object.keys(e)},getPrefixedKeys:function(e){return K.keys().filter((function(t){return t.startsWith(e)}))}};function Y(e){e||(e=r?navigator.userAgent.toLowerCase():"");var t=function(e){if(!r)return!1;var t=!/ipad|iphone|ipod/.test(e);if(/mac os/.test(e)&&t&&"boolean"==typeof navigator.standalone)return!0;return!1}(e),n=t||-1!==e.indexOf("ipad"),a=!n&&-1!==e.search(/iphone|ipod/),i=a||n,o=i&&e.match(/OS ([\d_]+) like Mac OS X/i),c=0,s=0;t?(c=13,s=0):o&&(c=+(o=o[1].split("_"))[0],s=+o[1]),o=null;var u=c<13&&!(11===c&&s<3),l=i&&function(e){if(!r)return!1;var t=window.webkit;if(t&&t.messageHandlers)return!0;var n=/constructor/i.test(String(window.HTMLElement)),a=!!window.indexedDB;if(-1===e.indexOf("safari")||-1===e.indexOf("version")||navigator.standalone){if(!a&&n||!window.statusbar||!window.statusbar.visible);else if(!n||a)return!0}else;return!1}(e),d=!1;return r&&(d=i&&375===screen.width&&812===screen.height&&3===window.devicePixelRatio),{isIPad:n,isIPhone:a,isIOS:i,isIPadOS:t,iosMajor:c,iosMinor:s,isWKWebView:l,isScrollBasedViewport:u,isIPhoneX:d,isIOSChrome:-1!==e.search(/crios/i)}}var Z,Q,J=Y(),X=(J.isIPad,J.isIPhone,J.isIOS),$=J.isIPadOS;J.iosMajor,J.iosMinor,J.isWKWebView,J.isScrollBasedViewport,J.isIPhoneX,J.isIOSChrome;if(r)if(X&&!$)Z=!1,Q=!1,!0,!0;else if("ontouchstart"in document||"maxTouchPoints"in navigator&&navigator.maxTouchPoints>0){var ee=!/android|mobile|tablet/i.test(navigator.userAgent);Z=window.matchMedia&&matchMedia("(pointer)").matches?matchMedia("(pointer: fine)").matches:ee,Q=Z&&(window.matchMedia&&matchMedia("(hover)").matches?matchMedia("(hover: hover)").matches:ee)}else Z=!0,Q=!0;else Z=!1,!1,Q=!1,!1},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(0),a=n.n(r),i=n(1),o=(n(954),Object(r.memo)((function(e){var t=e.width,n=void 0===t?"131px":t,r=e.height,o=void 0===r?"12px":r,c=e.backgroundColorType,s=void 0===c?"default":c,u=e.borderRadius,l=void 0===u?"4px":u,d=e.className,f=e.minWidth;return a.a.createElement("div",{className:Object(i.Lb)("SkeletonLine","default"===s?"SkeletonLine--backgroundColorType--default":"SkeletonLine--backgroundColorType--dark",d),style:{minWidth:f,width:n,height:o,borderRadius:l}})})));o.displayName="SkeletonLine"},function(e,t,n){e.exports=n(1020)()},function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"f",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return s})),n.d(t,"i",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"g",(function(){return d})),n.d(t,"h",(function(){return f}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function a(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}function c(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}s((r=r.apply(e,t||[])).next())}))}function s(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}function u(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o}function d(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e}function f(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var i=arguments[t],o=0,c=i.length;o<c;o++,a++)r[a]=i[o];return r}},function(e,t,n){(function(t){var n;n=function(){"use strict";var e=function(e){var t=e.id,n=e.viewBox,r=e.content;this.id=t,this.viewBox=n,this.content=r};function n(e,t){return e(t={exports:{}},t.exports),t.exports}e.prototype.stringify=function(){return this.content},e.prototype.toString=function(){return this.stringify()},e.prototype.destroy=function(){var e=this;["id","viewBox","content"].forEach((function(t){return delete e[t]}))},"undefined"!=typeof window?window:void 0!==t||"undefined"!=typeof self&&self;var r=n((function(e,t){e.exports=function(){function e(e){return e&&"object"==typeof e&&"[object RegExp]"!==Object.prototype.toString.call(e)&&"[object Date]"!==Object.prototype.toString.call(e)}function t(t,n){var a;return n&&!0===n.clone&&e(t)?r((a=t,Array.isArray(a)?[]:{}),t,n):t}function n(n,a,i){var o=n.slice();return a.forEach((function(a,c){void 0===o[c]?o[c]=t(a,i):e(a)?o[c]=r(n[c],a,i):-1===n.indexOf(a)&&o.push(t(a,i))})),o}function r(a,i,o){var c=Array.isArray(i),s=(o||{arrayMerge:n}).arrayMerge||n;return c?Array.isArray(a)?s(a,i,o):t(i,o):function(n,a,i){var o={};return e(n)&&Object.keys(n).forEach((function(e){o[e]=t(n[e],i)})),Object.keys(a).forEach((function(c){e(a[c])&&n[c]?o[c]=r(n[c],a[c],i):o[c]=t(a[c],i)})),o}(a,i,o)}return r.all=function(e,t){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce((function(e,n){return r(e,n,t)}))},r}()})),a=n((function(e,t){t.default={svg:{name:"xmlns",uri:"http://www.w3.org/2000/svg"},xlink:{name:"xmlns:xlink",uri:"http://www.w3.org/1999/xlink"}},e.exports=t.default})),i=a.svg,o=a.xlink,c={};c[i.name]=i.uri,c[o.name]=o.uri;var s=function(e,t){return void 0===e&&(e=""),"<svg "+function(e){return Object.keys(e).map((function(t){return t+'="'+e[t].toString().replace(/"/g,"&quot;")+'"'})).join(" ")}(r(c,t||{}))+">"+e+"</svg>"};return function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={isMounted:{}};return n.isMounted.get=function(){return!!this.node},t.createFromExistingNode=function(e){return new t({id:e.getAttribute("id"),viewBox:e.getAttribute("viewBox"),content:e.outerHTML})},t.prototype.destroy=function(){this.isMounted&&this.unmount(),e.prototype.destroy.call(this)},t.prototype.mount=function(e){if(this.isMounted)return this.node;var t="string"==typeof e?document.querySelector(e):e,n=this.render();return this.node=n,t.appendChild(n),n},t.prototype.render=function(){var e=this.stringify();return function(e){var t=!!document.importNode,n=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement;return t?document.importNode(n,!0):n}(s(e)).childNodes[0]},t.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},Object.defineProperties(t.prototype,n),t}(e)},e.exports=n()}).call(this,n(171))},function(e,t,n){"use strict";function r(e,t){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),r=1;r<arguments.length;r++){var a=arguments[r];if(null!=a)for(var i=Object.keys(Object(a)),o=0,c=i.length;o<c;o++){var s=i[o],u=Object.getOwnPropertyDescriptor(a,s);void 0!==u&&u.enumerable&&(n[s]=a[s])}}return n}e.exports={assign:r,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:r})}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(0),a=n.n(r),i=n(641);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var d={display:"block"};var f=function(e){var t=e.width,n=e.height,c=e.viewBox,u=e.id,f=e.className,p=e.style,h=e.fill,m=e.getRootRef,v=e.Component,g=l(e,["width","height","viewBox","id","className","style","fill","getRootRef","Component"]),b=Math.max(t,n),_=Object(r.useContext)(i.a),y=function(e,t){for(var n=t.classPrefix,r=t.globalClasses,a="",i=0;i<e.length;i++)n&&(a+=" "+(n+e[i])),n&&!r||(a+=" "+e[i]);return a}(["Icon","Icon--".concat(b),"Icon--w-".concat(t),"Icon--h-".concat(n),"Icon--".concat(u)],_);return a.a.createElement(v,o({role:"presentation"},g,{ref:m,className:"".concat(y," ").concat(f),style:s(s({},p),{},{width:t,height:n})}),a.a.createElement("svg",{viewBox:c,width:t,height:n,style:d},a.a.createElement("use",{xlinkHref:"#".concat(u),style:{fill:"currentColor",color:h}})))};f.defaultProps={Component:"div",className:"",style:{}}},function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return v}));var r,a,i,o,c=n(7),s=n.n(c),u=n(2),l=n.n(u),d=n(246);!function(e){e.WINDOWS="windows",e.MAC="mac",e.ANDROID="android",e.IOS="ios",e.LINUX="linux",e.ANDROID_HUAWEI="android_huawei",e.UNKNOWN="unknown"}(a||(a={})),function(e){e.X86="x86",e.X64="x64",e.ARM="arm"}(i||(i={})),function(e){e.CHROME="chrome",e.FIREFOX="firefox",e.SAFARI="safari",e.OPERA="opera",e.YANDEX="yandex",e.IE="ie",e.EDGE="edge"}(o||(o={}));var f=(r={},l()(r,a.ANDROID,/Android/i),l()(r,a.IOS,/(iPhone|iPad|iPod)/i),l()(r,a.WINDOWS,/Win/i),l()(r,a.IOS,/(iPhone|iPad|iPod)/i),l()(r,a.ANDROID,/Android/i),l()(r,a.MAC,/(MacPPC|MacIntel|Mac_PowerPC|Macintosh|Mac OS X)/i),l()(r,a.LINUX,/(Linux|X11(?!.*CrOS))/i),r),p=/(x86_64|x86-64|win64|x64;|amd64|wow64|x64_64)/i,h=/Mobile|mini|Fennec|Android|iP(ad|od|hone)|opera (mini|mobi)/i,m=new Map,v={get OS(){if(m.has("os"))return m.get("os");for(var e=window.navigator.userAgent,t=0,n=Object.entries(f);t<n.length;t++){var r=s()(n[t],2),i=r[0];if(r[1].test(e))return m.set("os",i),i}return m.set("os",a.UNKNOWN),a.UNKNOWN},get ARCH(){if(m.has("arch"))return m.get("arch");var e=window.navigator,t=e.userAgent,n=e.platform;return p.test(t)||"MacIntel"===n||"Linux x86_64"===n?(m.set("arch",i.X64),i.X64):/arm/i.test(t)?(m.set("arch",i.ARM),i.ARM):(m.set("arch",i.X86),i.X86)},get BROWSER(){return g().name.toLowerCase()},get isChromeBased(){return g().chromeBased},get isMobile(){if(m.has("isMobile"))return m.get("isMobile");var e=window.navigator.appVersion,t=h.test(e);return m.set("isMobile",t),t},get isIPad(){return d.isIPad||d.isIPadOS}};function g(){if(m.has("browserInfo"))return m.get("browserInfo");var e=function(){var e,t=!1,n=0,r=window.navigator,a=r.userAgent,i=r.appName,c=r.appVersion,s=a.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)([\d.]+)/i)||[];if(/trident/i.test(s[1]))return e=/\brv[ :]+(\d+)([\d.]+)/g.exec(a),{name:o.IE,version:e&&e[1]||"Unknown",fullVersion:e&&e[1]?"".concat(e[1]).concat(e[2]||""):"Unknown",chromeBased:t,chromeVersion:n};if("Safari"===s[1]){if(e=a.match(/\bEdge\/(\d+)([\d.])+/))return{name:o.EDGE,version:e[1]||"Unknown",fullVersion:e[1]?"".concat(e[1]).concat(e[2]||""):"Unknown",chromeBased:t,chromeVersion:n};if(e=a.match(/\bCriOS\/(\d+)([\d.]+)/))return{name:o.CHROME,version:e[1],fullVersion:"".concat(e[1]).concat(e[2]),chromeBased:!0,chromeVersion:e[1]};if(e=a.match(/\bFxiOS\/(\d+)([\d.]+)/))return{name:o.FIREFOX,version:e[1],fullVersion:"".concat(e[1]).concat(e[2]),chromeBased:t,chromeVersion:n};if(e=a.match(/\bYaBrowser\/(\d+)([\d.]+)/))return{name:o.YANDEX,version:e[1],fullVersion:"".concat(e[1]).concat(e[2]),chromeBased:t,chromeVersion:n};if(e=a.match(/\bOPT\/(\d+)([\d.]+)/))return{name:o.OPERA,version:e[1],fullVersion:"".concat(e[1]).concat(e[2]),chromeBased:t,chromeVersion:n}}if("Chrome"===s[1]){if(n=Number(s[2]),t=!0,e=a.match(/\bOPR\/(\d+)([\d.]+)/))return{name:o.CHROME,version:e[1]||"Unknown",fullVersion:e[1]?"".concat(e[1]).concat(e[2]||""):"Unknown",chromeBased:t,chromeVersion:n};if(e=a.match(/\bYaBrowser\/(\d+)([\d.]+)/))return{name:o.YANDEX,version:e[1]||"Unknown",fullVersion:e[1]?"".concat(e[1]).concat(e[2]||""):"Unknown",chromeBased:t,chromeVersion:n};if(e=a.match(/\bEdge?\/(\d+)([\d.]+)/))return{name:o.EDGE,version:e[1]||"Unknown",fullVersion:e[1]?"".concat(e[1]).concat(e[2]||""):"Unknown",chromeBased:t,chromeVersion:n};if(void 0!==window.opr&&/^(.+\.)?ok.ru$/.test(window.location.host))return{name:o.OPERA,version:"Hidden",fullVersion:"Hidden",chromeBased:t,chromeVersion:n}}return e=a.match(/version\/(\d+)([\d.]+)/i),{name:s[2]?s[1]:i,version:e&&e[1]||s[2]||c,fullVersion:e&&e[1]?"".concat(e[1]).concat(e[2]||""):s[2]?"".concat(s[2]).concat(s[3]||""):c,chromeBased:t,chromeVersion:n}}();return m.set("browserInfo",e),e}},function(e,t,n){var r=n(434),a=n(344),i=n(309),o=n(435);e.exports=function(e){return r(e)||a(e)||i(e)||o()},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.d(t,"L",(function(){return i})),n.d(t,"y",(function(){return o})),n.d(t,"x",(function(){return c})),n.d(t,"k",(function(){return l})),n.d(t,"p",(function(){return u})),n.d(t,"o",(function(){return d})),n.d(t,"r",(function(){return A})),n.d(t,"s",(function(){return k})),n.d(t,"n",(function(){return j})),n.d(t,"t",(function(){return T})),n.d(t,"q",(function(){return I})),n.d(t,"m",(function(){return P})),n.d(t,"E",(function(){return h})),n.d(t,"C",(function(){return m})),n.d(t,"z",(function(){return w})),n.d(t,"A",(function(){return C})),n.d(t,"M",(function(){return g})),n.d(t,"e",(function(){return y})),n.d(t,"K",(function(){return E})),n.d(t,"u",(function(){return _})),n.d(t,"v",(function(){return O})),n.d(t,"d",(function(){return L})),n.d(t,"g",(function(){return H})),n.d(t,"J",(function(){return F})),n.d(t,"I",(function(){return V})),n.d(t,"c",(function(){return Z.a})),n.d(t,"G",(function(){return z})),n.d(t,"H",(function(){return G})),n.d(t,"b",(function(){return K})),n.d(t,"i",(function(){return J})),n.d(t,"F",(function(){return X})),n.d(t,"D",(function(){return $})),n.d(t,"f",(function(){return ee})),n.d(t,"a",(function(){return re})),n.d(t,"l",(function(){return te})),n.d(t,"B",(function(){return ae})),n.d(t,"w",(function(){return ie})),n.d(t,"h",(function(){return oe})),n.d(t,"j",(function(){return ce}));var r=n(666),a=n(36);function i(e,t){var n=e.directives;return!n||!n.length||function(e){var t=[];e&&e.length&&e.forEach((function(e){if("skip"===(n=e.name.value)||"include"===n){var n,r=e.arguments;e.name.value;Object(a.b)(r&&1===r.length,39);var i=r[0];Object(a.b)(i.name&&"if"===i.name.value,40);var o=i.value;Object(a.b)(o&&("Variable"===o.kind||"BooleanValue"===o.kind),41),t.push({directive:e,ifArgument:i})}}));return t}(n).every((function(e){var n=e.directive,r=e.ifArgument,i=!1;return"Variable"===r.value.kind?(i=t&&t[r.value.name.value],Object(a.b)(void 0!==i,38)):i=r.value.value,"skip"===n.name.value?!i:i}))}function o(e,t){return function(e){var t=[];return Object(r.b)(e,{Directive:function(e){t.push(e.name.value)}}),t}(t).some((function(t){return e.indexOf(t)>-1}))}function c(e){return e&&o(["client"],e)&&o(["export"],e)}var s=n(16);function u(e,t){var n=t,r=[];return e.definitions.forEach((function(e){if("OperationDefinition"===e.kind)throw new a.a(42);"FragmentDefinition"===e.kind&&r.push(e)})),void 0===n&&(Object(a.b)(1===r.length,43),n=r[0].name.value),Object(s.a)(Object(s.a)({},e),{definitions:Object(s.h)([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:n}}]}}],e.definitions)})}function l(e){void 0===e&&(e=[]);var t={};return e.forEach((function(e){t[e.name.value]=e})),t}function d(e,t){switch(e.kind){case"InlineFragment":return e;case"FragmentSpread":var n=t&&t[e.name.value];return Object(a.b)(n,44),n;default:return null}}var f=n(667),p=n.n(f);function h(e){return{__ref:String(e)}}function m(e){return Boolean(e&&"object"==typeof e&&"string"==typeof e.__ref)}function v(e,t,n,r){if(function(e){return"IntValue"===e.kind}(n)||function(e){return"FloatValue"===e.kind}(n))e[t.value]=Number(n.value);else if(function(e){return"BooleanValue"===e.kind}(n)||function(e){return"StringValue"===e.kind}(n))e[t.value]=n.value;else if(function(e){return"ObjectValue"===e.kind}(n)){var i={};n.fields.map((function(e){return v(i,e.name,e.value,r)})),e[t.value]=i}else if(function(e){return"Variable"===e.kind}(n)){var o=(r||{})[n.name.value];e[t.value]=o}else if(function(e){return"ListValue"===e.kind}(n))e[t.value]=n.values.map((function(e){var n={};return v(n,t,e,r),n[t.value]}));else if(function(e){return"EnumValue"===e.kind}(n))e[t.value]=n.value;else{if(!function(e){return"NullValue"===e.kind}(n))throw new a.a(53);e[t.value]=null}}function g(e,t){var n=null;e.directives&&(n={},e.directives.forEach((function(e){n[e.name.value]={},e.arguments&&e.arguments.forEach((function(r){var a=r.name,i=r.value;return v(n[e.name.value],a,i,t)}))})));var r=null;return e.arguments&&e.arguments.length&&(r={},e.arguments.forEach((function(e){var n=e.name,a=e.value;return v(r,n,a,t)}))),_(e.name.value,r,n)}var b=["connection","include","skip","client","rest","export"];function _(e,t,n){if(t&&n&&n.connection&&n.connection.key){if(n.connection.filter&&n.connection.filter.length>0){var r=n.connection.filter?n.connection.filter:[];r.sort();var a={};return r.forEach((function(e){a[e]=t[e]})),n.connection.key+"("+JSON.stringify(a)+")"}return n.connection.key}var i=e;if(t){var o=p()(t);i+="("+o+")"}return n&&Object.keys(n).forEach((function(e){-1===b.indexOf(e)&&(n[e]&&Object.keys(n[e]).length?i+="@"+e+"("+JSON.stringify(n[e])+")":i+="@"+e)})),i}function y(e,t){if(e.arguments&&e.arguments.length){var n={};return e.arguments.forEach((function(e){var r=e.name,a=e.value;return v(n,r,a,t)})),n}return null}function E(e){return e.alias?e.alias.value:e.name.value}function O(e,t,n){if("string"==typeof e.__typename)return e.__typename;for(var r=0,a=t.selections;r<a.length;r++){var i=a[r];if(w(i)){if("__typename"===i.name.value)return e[E(i)]}else{var o=O(e,d(i,n).selectionSet,n);if("string"==typeof o)return o}}}function w(e){return"Field"===e.kind}function C(e){return"InlineFragment"===e.kind}function S(e){Object(a.b)(e&&"Document"===e.kind,45);var t=e.definitions.filter((function(e){return"FragmentDefinition"!==e.kind})).map((function(e){if("OperationDefinition"!==e.kind)throw new a.a(46);return e}));return Object(a.b)(t.length<=1,47),e}function A(e){return S(e),e.definitions.filter((function(e){return"OperationDefinition"===e.kind}))[0]}function k(e){return e.definitions.filter((function(e){return"OperationDefinition"===e.kind&&e.name})).map((function(e){return e.name.value}))[0]||null}function j(e){return e.definitions.filter((function(e){return"FragmentDefinition"===e.kind}))}function T(e){var t=A(e);return Object(a.b)(t&&"query"===t.operation,48),t}function I(e){var t;S(e);for(var n=0,r=e.definitions;n<r.length;n++){var i=r[n];if("OperationDefinition"===i.kind){var o=i.operation;if("query"===o||"mutation"===o||"subscription"===o)return i}"FragmentDefinition"!==i.kind||t||(t=i)}if(t)return t;throw new a.a(52)}function P(e){var t=Object.create(null),n=e&&e.variableDefinitions;return n&&n.length&&n.forEach((function(e){e.defaultValue&&v(t,e.variable.name,e.defaultValue)})),t}function D(e,t,n){var r=0;return e.forEach((function(n,a){t.call(this,n,a,e)&&(e[r++]=n)}),n),e.length=r,e}var N={kind:"Field",name:{kind:"Name",value:"__typename"}};function x(e){return function e(t,n){return t.selectionSet.selections.every((function(t){return"FragmentSpread"===t.kind&&e(n[t.name.value],n)}))}(A(e)||function(e){Object(a.b)("Document"===e.kind,49),Object(a.b)(e.definitions.length<=1,50);var t=e.definitions[0];return Object(a.b)("FragmentDefinition"===t.kind,51),t}(e),l(j(e)))?null:e}function R(e){return function(t){return e.some((function(e){return e.name&&e.name===t.name.value||e.test&&e.test(t)}))}}function M(e,t){var n=Object.create(null),a=[],i=Object.create(null),o=[],c=x(Object(r.b)(t,{Variable:{enter:function(e,t,r){"VariableDefinition"!==r.kind&&(n[e.name.value]=!0)}},Field:{enter:function(t){if(e&&t.directives&&(e.some((function(e){return e.remove}))&&t.directives&&t.directives.some(R(e))))return t.arguments&&t.arguments.forEach((function(e){"Variable"===e.value.kind&&a.push({name:e.value.name.value})})),t.selectionSet&&function e(t){var n=[];return t.selections.forEach((function(t){(w(t)||C(t))&&t.selectionSet?e(t.selectionSet).forEach((function(e){return n.push(e)})):"FragmentSpread"===t.kind&&n.push(t)})),n}(t.selectionSet).forEach((function(e){o.push({name:e.name.value})})),null}},FragmentSpread:{enter:function(e){i[e.name.value]=!0}},Directive:{enter:function(t){if(R(e)(t))return null}}}));return c&&D(a,(function(e){return!!e.name&&!n[e.name]})).length&&(c=function(e,t){var n=function(e){return function(t){return e.some((function(e){return t.value&&"Variable"===t.value.kind&&t.value.name&&(e.name===t.value.name.value||e.test&&e.test(t))}))}}(e);return x(Object(r.b)(t,{OperationDefinition:{enter:function(t){return Object(s.a)(Object(s.a)({},t),{variableDefinitions:t.variableDefinitions?t.variableDefinitions.filter((function(t){return!e.some((function(e){return e.name===t.variable.name.value}))})):[]})}},Field:{enter:function(t){if(e.some((function(e){return e.remove}))){var r=0;if(t.arguments&&t.arguments.forEach((function(e){n(e)&&(r+=1)})),1===r)return null}}},Argument:{enter:function(e){if(n(e))return null}}}))}(a,c)),c&&D(o,(function(e){return!!e.name&&!i[e.name]})).length&&(c=function(e,t){function n(t){if(e.some((function(e){return e.name===t.name.value})))return null}return x(Object(r.b)(t,{FragmentSpread:{enter:n},FragmentDefinition:{enter:n}}))}(o,c)),c}function L(e){return Object(r.b)(S(e),{SelectionSet:{enter:function(e,t,n){if(!n||"OperationDefinition"!==n.kind){var r=e.selections;if(r)if(!r.some((function(e){return w(e)&&("__typename"===e.name.value||0===e.name.value.lastIndexOf("__",0))}))){var a=n;if(!(w(a)&&a.directives&&a.directives.some((function(e){return"export"===e.name.value}))))return Object(s.a)(Object(s.a)({},e),{selections:Object(s.h)(r,[N])})}}}}})}L.added=function(e){return e===N};var B={test:function(e){var t="connection"===e.name.value;return t&&(!e.arguments||e.arguments.some((function(e){return"key"===e.name.value}))),t}};function F(e){return M([B],S(e))}function H(e){return"query"===I(e).operation?e:Object(r.b)(e,{OperationDefinition:{enter:function(e){return Object(s.a)(Object(s.a)({},e),{operation:"query"})}}})}function V(e){S(e);var t=M([{test:function(e){return"client"===e.name.value},remove:!0}],e);return t&&(t=Object(r.b)(t,{FragmentDefinition:{enter:function(e){if(e.selectionSet&&e.selectionSet.selections.every((function(e){return w(e)&&"__typename"===e.name.value})))return null}}})),t}var U=Object.prototype.hasOwnProperty;function z(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return G(e)}function G(e){var t=e[0]||{},n=e.length;if(n>1)for(var r=new K,a=1;a<n;++a)t=r.merge(t,e[a]);return t}function W(e){return null!==e&&"object"==typeof e}var q=function(e,t,n){return this.merge(e[n],t[n])},K=function(){function e(e){void 0===e&&(e=q),this.reconciler=e,this.isObject=W,this.pastCopies=new Set}return e.prototype.merge=function(e,t){for(var n=this,r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];return W(t)&&W(e)?(Object.keys(t).forEach((function(a){if(U.call(e,a)){var i=e[a];if(t[a]!==i){var o=n.reconciler.apply(n,Object(s.h)([e,t,a],r));o!==i&&((e=n.shallowCopyForMerge(e))[a]=o)}}else(e=n.shallowCopyForMerge(e))[a]=t[a]})),e):t},e.prototype.shallowCopyForMerge=function(e){return W(e)&&!this.pastCopies.has(e)&&(e=Array.isArray(e)?e.slice(0):Object(s.a)({__proto__:Object.getPrototypeOf(e)},e),this.pastCopies.add(e)),e},e}();var Y=n(471),Z=n.n(Y);n(383);Z.a.prototype["@@observable"]=function(){return this};var Q=Object.prototype.toString;function J(e){return function e(t,n){switch(Q.call(t)){case"[object Array]":if((n=n||new Map).has(t))return n.get(t);var r=t.slice(0);return n.set(t,r),r.forEach((function(t,a){r[a]=e(t,n)})),r;case"[object Object]":if((n=n||new Map).has(t))return n.get(t);var a=Object.create(Object.getPrototypeOf(t));return n.set(t,a),Object.keys(t).forEach((function(r){a[r]=e(t[r],n)})),a;default:return t}}(e)}n(1107);function X(e){return e}function $(e,t,n){var r=[];e.forEach((function(e){return e[t]&&r.push(e)})),r.forEach((function(e){return e[t](n)}))}function ee(e,t,n){return new Z.a((function(r){var a=r.next,i=r.error,o=r.complete,c=0,s=!1;function u(e,t){return e?function(t){++c,new Promise((function(n){return n(e(t))})).then((function(e){--c,a&&a.call(r,e),s&&l.complete()}),(function(e){--c,i&&i.call(r,e)}))}:function(e){return t&&t.call(r,e)}}var l={next:u(t,a),error:u(n,i),complete:function(){s=!0,c||o&&o.call(r)}},d=e.subscribe(l);return function(){return d.unsubscribe()}}))}function te(e){function t(t){Object.defineProperty(e,t,{value:Z.a})}return"function"==typeof Symbol&&Symbol.species&&t(Symbol.species),t("@@species"),e}function ne(e){return e&&"function"==typeof e.then}var re=function(e){function t(t){var n=e.call(this,(function(e){return n.addObserver(e),function(){return n.removeObserver(e)}}))||this;return n.observers=new Set,n.addCount=0,n.promise=new Promise((function(e,t){n.resolve=e,n.reject=t})),n.handlers={next:function(e){null!==n.sub&&(n.latest=["next",e],$(n.observers,"next",e))},error:function(e){var t=n.sub;null!==t&&(t&&Promise.resolve().then((function(){return t.unsubscribe()})),n.sub=null,n.latest=["error",e],n.reject(e),$(n.observers,"error",e))},complete:function(){if(null!==n.sub){var e=n.sources.shift();e?ne(e)?e.then((function(e){return n.sub=e.subscribe(n.handlers)})):n.sub=e.subscribe(n.handlers):(n.sub=null,n.latest&&"next"===n.latest[0]?n.resolve(n.latest[1]):n.resolve(),$(n.observers,"complete"))}}},n.cancel=function(e){n.reject(e),n.sources=[],n.handlers.complete()},n.promise.catch((function(e){})),"function"==typeof t&&(t=[new Z.a(t)]),ne(t)?t.then((function(e){return n.start(e)}),n.handlers.error):n.start(t),n}return Object(s.c)(t,e),t.prototype.start=function(e){void 0===this.sub&&(this.sources=Array.from(e),this.handlers.complete())},t.prototype.deliverLastMessage=function(e){if(this.latest){var t=this.latest[0],n=e[t];n&&n.call(e,this.latest[1]),null===this.sub&&"next"===t&&e.complete&&e.complete()}},t.prototype.addObserver=function(e){this.observers.has(e)||(this.deliverLastMessage(e),this.observers.add(e),++this.addCount)},t.prototype.removeObserver=function(e,t){this.observers.delete(e)&&--this.addCount<1&&!t&&this.handlers.error(new Error("Observable cancelled prematurely"))},t.prototype.cleanup=function(e){var t=this,n=!1,r=function(){n||(n=!0,t.observers.delete(a),e())},a={next:r,error:r,complete:r},i=this.addCount;this.addObserver(a),this.addCount=i},t}(Z.a);function ae(e){return Array.isArray(e)&&e.length>0}function ie(e){return e.errors&&e.errors.length>0||!1}te(re);var oe="function"==typeof WeakMap&&!("object"==typeof navigator&&"ReactNative"===navigator.product);function ce(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Object.create(null);return e.forEach((function(e){e&&Object.keys(e).forEach((function(t){var r=e[t];void 0!==r&&(n[t]=r)}))})),n}},function(e,t,n){"use strict";n.d(t,"m",(function(){return r})),n.d(t,"n",(function(){return a})),n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"i",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"g",(function(){return u})),n.d(t,"f",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"j",(function(){return p})),n.d(t,"l",(function(){return h})),n.d(t,"h",(function(){return m})),n.d(t,"k",(function(){return v})),n.d(t,"L",(function(){return g})),n.d(t,"F",(function(){return b})),n.d(t,"y",(function(){return _})),n.d(t,"E",(function(){return y})),n.d(t,"A",(function(){return E})),n.d(t,"B",(function(){return O})),n.d(t,"u",(function(){return w})),n.d(t,"z",(function(){return C})),n.d(t,"C",(function(){return S})),n.d(t,"r",(function(){return A})),n.d(t,"x",(function(){return k})),n.d(t,"D",(function(){return j})),n.d(t,"o",(function(){return T})),n.d(t,"p",(function(){return I})),n.d(t,"v",(function(){return P})),n.d(t,"w",(function(){return D})),n.d(t,"t",(function(){return N})),n.d(t,"s",(function(){return x})),n.d(t,"q",(function(){return R})),n.d(t,"M",(function(){return M})),n.d(t,"S",(function(){return L})),n.d(t,"K",(function(){return B})),n.d(t,"J",(function(){return F})),n.d(t,"G",(function(){return H})),n.d(t,"I",(function(){return V})),n.d(t,"R",(function(){return U})),n.d(t,"Q",(function(){return z})),n.d(t,"O",(function(){return G})),n.d(t,"P",(function(){return W})),n.d(t,"N",(function(){return q})),n.d(t,"H",(function(){return K}));var r=2e9,a=19e8,i=917,o=15,c=104,s=951,u=953,l=954,d=22,f=960,p=961,h=714,m="Invalid request: education profile already exists",v="is not educational",g=20,b=2e3,_="education:isAuthorized",y="education:user_id",E="education:calls_app_downloaded",O="education:calls_mobile_app_downloaded",w="education:dashboard_school_id",C="education:calls_app_banner",S="education:calls_app_mobile_banner",A="education:anonym_desktop_calls_name",k="education:hide_broadcast_promo",j="education:analytics",T="education:ejd_connected",I="education:ejd_connection_error",P="education:analytics:debug",D="education:effector:debug",N="calls_token",x="calendar_token",R="education:analyticsSessionId",M="education:polls",L="info@sferum.ru",B="press@corp.sferum.ru",F="partners@corp.sferum.ru",H="https://trk.mail.ru/c/c614r5",V="3217153",U="https://vk.com/sferum",z="https://ok.ru/sferum",G="https://www.facebook.com/sferumrus",W="https://www.instagram.com/sferumru",q="https://sk.ru",K="showChat"},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return f}));var r,a=n(12),i=n.n(a),o=n(0),c=n.n(o),s=n(75),u=n(1),l=n(227),d=["showSpinner"],f=function(){var e=Object(l.c)(),t=e.apiRequest,n=e.trackStart,a=Object(s.a)(),o=a.showPopout,f=a.hidePopout,p=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.showSpinner,s=void 0!==a&&a,l=i()(r,d);return s&&o(c.a.createElement(u.kb,null)),t(e,n,l).then((function(e){return s&&f(),e})).catch((function(e){return s&&f(),Promise.reject(e)}))};return r||(r=p),{apiRequest:p,trackStart:n}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(6),a=n.n(r),i=n(0),o=n.n(i),c=(n(955),n(1)),s=Object(i.memo)((function(e){return o.a.createElement(c.h,a()({},e,{shadow:!1,className:Object(c.Lb)("AvatarSkeleton",e.className)}))}));s.displayName="AvatarSkeleton"},function(e,t,n){!function(e){"use strict";var t=function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function n(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var i=arguments[t],o=0,c=i.length;o<c;o++,a++)r[a]=i[o];return r}function r(e,n){var r,a,i=(r={current:0,next:function(){return++this.current}},a={},{add:function(e,t){var n=null!=t?t:r.next();return a[n]=e,n},resolve:function(e,t,n){var r=a[e];r&&(n(t)?r.resolve(t):r.reject(t),a[e]=null)}});return n((function(e){if(e.detail&&e.detail.data&&"object"==typeof e.detail.data&&"request_id"in e.detail.data){var t=e.detail.data,n=t.request_id,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(t,["request_id"]);n&&i.resolve(n,r,(function(e){return!("error_type"in e)}))}})),function(n,r){return void 0===r&&(r={}),new Promise((function(a,o){var c=i.add({resolve:a,reject:o},r.request_id);e(n,t(t({},r),{request_id:c}))}))}}var a="undefined"!=typeof window,i=Boolean(a&&window.AndroidBridge),o=Boolean(a&&window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.VKWebAppClose),c=a&&!i&&!o,s=c&&/(^\?|&)vk_platform=mobile_web(&|$)/.test(location.search),u=c?"message":"VKWebAppEvent",l=n(["VKWebAppInit","VKWebAppGetCommunityAuthToken","VKWebAppAddToCommunity","VKWebAppAddToHomeScreenInfo","VKWebAppClose","VKWebAppCopyText","VKWebAppGetUserInfo","VKWebAppSetLocation","VKWebAppSendToClient","VKWebAppGetClientVersion","VKWebAppGetPhoneNumber","VKWebAppGetEmail","VKWebAppGetGroupInfo","VKWebAppGetGeodata","VKWebAppGetCommunityToken","VKWebAppSetTitle","VKWebAppGetAuthToken","VKWebAppCallAPIMethod","VKWebAppJoinGroup","VKWebAppLeaveGroup","VKWebAppAllowMessagesFromGroup","VKWebAppDenyNotifications","VKWebAppAllowNotifications","VKWebAppOpenPayForm","VKWebAppOpenApp","VKWebAppShare","VKWebAppShowWallPostBox","VKWebAppScroll","VKWebAppShowOrderBox","VKWebAppShowLeaderBoardBox","VKWebAppShowInviteBox","VKWebAppShowRequestBox","VKWebAppAddToFavorites","VKWebAppShowCommunityWidgetPreviewBox","VKWebAppShowStoryBox","VKWebAppStorageGet","VKWebAppStorageGetKeys","VKWebAppStorageSet","VKWebAppFlashGetInfo","VKWebAppSubscribeStoryApp","VKWebAppOpenWallPost","VKWebAppCheckAllowedScopes","VKWebAppShowNativeAds"],c&&!s?["VKWebAppResizeWindow","VKWebAppAddToMenu","VKWebAppShowSubscriptionBox","VKWebAppShowInstallPushBox","VKWebAppGetFriends"]:["VKWebAppShowImages"]),d=a?window.AndroidBridge:void 0,f=o?window.webkit.messageHandlers:void 0;function p(e,t){var n=t||{bubbles:!1,cancelable:!1,detail:void 0},r=document.createEvent("CustomEvent");return r.initCustomEvent(e,!!n.bubbles,!!n.cancelable,n.detail),r}"undefined"==typeof window||window.CustomEvent||(window.CustomEvent=(p.prototype=Event.prototype,p));var h=function(e){var t=void 0,a=[];function s(e){a.push(e)}function p(){return o||i}function h(){return c&&window.parent!==window}function m(){return p()||h()}"undefined"!=typeof window&&"addEventListener"in window&&window.addEventListener(u,(function(e){if(o||i)return n(a).map((function(t){return t.call(null,e)}));if(c&&e&&e.data){var r=e.data,s=r.type,u=r.data,l=r.frameId;s&&"SetSupportedHandlers"===s?u.supportedHandlers:s&&"VKWebAppSettings"===s?t=l:n(a).map((function(e){return e({detail:{type:s,data:u}})}))}}));var v=r((function(e,n){d&&d[e]?d[e](JSON.stringify(n)):f&&f[e]&&"function"==typeof f[e].postMessage?f[e].postMessage(n):c&&parent.postMessage({handler:e,params:n,type:"vk-connect",webFrameId:t,connectVersion:"2.4.8"},"*")}),s);return{send:v,sendPromise:v,subscribe:s,unsubscribe:function(e){var t=a.indexOf(e);-1<t&&a.splice(t,1)},supports:function(e){return i?!(!d||"function"!=typeof d[e]):o?!(!f||!f[e]||"function"!=typeof f[e].postMessage):c&&-1<l.indexOf(e)},isWebView:p,isIframe:h,isEmbedded:m,isStandalone:function(){return!m()}}}();e.applyMiddleware=function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.includes(void 0)||n.includes(null)?e.apply(void 0,n.filter((function(e){return"function"==typeof e}))):function(e){if(0===n.length)return e;var r,a={subscribe:e.subscribe,send:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.send.apply(e,t)}};return r=n.filter((function(e){return"function"==typeof e})).map((function(e){return e(a)})).reduce((function(e,t){return function(n){return e(t(n))}}))(e.send),t(t({},e),{send:r})}},e.default=h,Object.defineProperty(e,"__esModule",{value:!0})}(t)},,function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));n(6);var r=n(0),a=n(325);function i(){var e=Object(r.useContext)(a.b);if(void 0===e)throw new Error("useStore must be used within a StoreContext");return e}function o(){var e=Object(r.useContext)(a.c);if(void 0===e)throw new Error("useDispatch must be used within a StoreDispatchContext");return e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"e",(function(){return l}));var r=n(0),a=n.n(r),i=n(1),o=function(e){return e>=i.Ib.SMALL_TABLET},c=function(e){return e>i.Ib.TABLET},s=function(e){return e<=i.Ib.TABLET},u=function(e){return e<=i.Ib.MOBILE};function l(e,t){return e?a.a.createElement(i.y,{mode:"horizontal"},t):t}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(26),a=n.n(r),i=n(5),o=function(){var e=function(){a.a.send("VKWebAppClose")};return{go:function(e,t,n){var r=e||i.d.getState().page;i.d.go(r,t,n)},back:function(){var t=i.d.getHistory(),n=1===t.length||t.slice(0,t.length-2).every((function(e){return"popstate"===e.meta.source}));a.a.isWebView()&&n?e():i.d.back()},close:e}}},function(e,t,n){var r=n(873);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.default=e.exports,e.exports.__esModule=!0,n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},,function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return h}));var r=n(16);!function(e){function t(){var t=this||self;t.globalThis=t,delete e.prototype._T_}"object"!=typeof globalThis&&(this?t():(e.defineProperty(e.prototype,"_T_",{configurable:!0,get:t}),_T_))}(Object);var a=globalThis,i=a,o=i.console,c=Object.setPrototypeOf,s=void 0===c?function(e,t){return e.__proto__=t,e}:c,u=function(e){function t(n){void 0===n&&(n="Invariant Violation");var r=e.call(this,"number"==typeof n?"Invariant Violation: "+n+" (see https://github.com/apollographql/invariant-packages)":n)||this;return r.framesToPop=1,r.name="Invariant Violation",s(r,t.prototype),r}return Object(r.c)(t,e),t}(Error);function l(e,t){if(!e)throw new u(t)}var d=["log","warn","error","silent"],f=d.indexOf("log");function p(e){return function(){if(d.indexOf(e)>=f)return o[e].apply(o,arguments)}}function h(e){var t=d[f];return f=Math.max(0,d.indexOf(e)),t}!function(e){e.log=p("log"),e.warn=p("warn"),e.error=p("error")}(l||(l={}));var m=i.process||{env:{}};if(!i.process)try{Object.defineProperty(a,"process",{value:m,writable:!0,enumerable:!1,configurable:!0})}catch(e){}},function(e,t,n){"use strict";function r(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o}));var r=n(0),a=n(9);function i(e){a.is.store(e)||d("expect useStore argument to be a store");let t=e.getState(),n=r.useReducer(e=>e+1,0)[1],i=r.useRef({store:e,value:t,pending:0});return l(()=>{let t=e.updates.watch(e=>{let t=i.current;t.pending||(t.value=e,t.pending=1,n(),t.pending=0)}),r=e.getState(),a=i.current;return a.store===e&&a.value!==r&&(a.value=r,a.pending=1,n(),a.pending=0),a.store=e,t},[e]),t}function o(e,t){let n,o,c,s;t?(n=t,c=e,s=[]):(n=e.fn,c=e.store,s=e.keys,o=e.updateFilter),a.is.store(c)||d("useStoreMap expects a store"),Array.isArray(s)||d("useStoreMap expects an array as keys"),"function"!=typeof n&&d("useStoreMap expects a function");let u=r.useMemo(()=>Object(a.createStore)(n(c.getState(),s),{updateFilter:o}).on(c,(e,t)=>n(t,s)),s),f=i(u);return l(()=>()=>{u.off(c),Object(a.clearNode)(u,{deep:1})},s),f}function c(e,t){return t.displayName=e,t}function s(e,t={}){let n=r.useRef(null);l(()=>(e.open(n.current),()=>e.close(n.current)),[e]),((e,t)=>{if(e===t)return 1;if("object"==typeof e&&null!==e&&"object"==typeof t&&null!==t){let n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return 0;for(let r=0;r<n.length;r++){let a=n[r];if(e[a]!==t[a])return 0}return 1}return 0})(n.current,t)||(n.current=t,e.set(t))}function u(e="gate",t={}){let n;return"object"==typeof e&&null!==e&&("defaultState"in e&&(t=e.defaultState),e.domain&&(n=e.domain),e=e.name),(({name:e="gate",domain:t,defaultState:n,hook:r})=>{function i(e){return r(i,e),null}let o=`${t?t.compositeName.fullName+"/":""}${e}`,s=Object(a.createEvent)(o+".set"),u=Object(a.createEvent)(o+".open"),l=Object(a.createEvent)(o+".close"),d=Object(a.createStore)(Boolean(0),{name:o+".status"}).on(u,()=>Boolean(1)).on(l,()=>Boolean(0)),f=Object(a.createStore)(n,{name:o+".state"}).on(s,(e,t)=>t).reset(l);if(t){let{hooks:e}=t;Object(a.launch)({target:[e.store,e.store,e.event,e.event,e.event],params:[d,f,u,l,s]})}return i.open=u,i.close=l,i.status=d,i.state=f,i.set=s,c("Gate:"+o,i)})({name:e,domain:n,defaultState:t,hook:s})}let l="undefined"!=typeof window?r.useLayoutEffect:r.useEffect,d=e=>{throw Error(e)}},function(e,t,n){var r=n(57).default,a=n(11);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?a(e):t},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.d(t,"i",(function(){return d})),n.d(t,"h",(function(){return f})),n.d(t,"c",(function(){return p})),n.d(t,"f",(function(){return h})),n.d(t,"e",(function(){return m})),n.d(t,"a",(function(){return v})),n.d(t,"o",(function(){return g})),n.d(t,"g",(function(){return b})),n.d(t,"d",(function(){return _})),n.d(t,"j",(function(){return y})),n.d(t,"l",(function(){return E})),n.d(t,"m",(function(){return O})),n.d(t,"n",(function(){return w})),n.d(t,"p",(function(){return C})),n.d(t,"b",(function(){return S})),n.d(t,"k",(function(){return A}));var r=n(2),a=n.n(r),i=n(9),o=n(52),c=n(24),s=n(38);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=Object(s.a)({name:"GradesGate",domain:o.a}),f=Object(i.createEffect)((function(e){var t=e.schoolId,n=e.search,r=e.filters,a=e.options,i=e.count;return Object(c.a)("education.getGrades",l({count:i,group_id:t,q:n},r),l(l({},a),{},{grouping:!1}))})),p=Object(i.createEffect)((function(e){var t=e.schoolId,n=e.grade;return Object(c.a)("education.createGrade",{group_id:t,number:n.number,liter:n.liter,name:n.name,color:n.color,start_year:n.start_year,end_year:n.end_year},{showSpinner:!0})})),h=Object(i.createEffect)((function(e){var t=e.schoolId,n=e.grade;return Object(c.a)("education.editGrade",{group_id:t,grade_id:n.id,number:n.number,liter:n.liter,name:n.name,color:n.color,start_year:n.start_year,end_year:n.end_year},{showSpinner:!0})})),m=Object(i.createEffect)((function(e){var t=e.schoolId,n=e.gradeId;return Object(c.a)("education.deleteGrade",{school_id:t,grade_id:n})})),v=Object(i.createEffect)((function(e){var t=e.schoolId,n=e.gradeId,r=e.userIds,a=e.role;return Object(c.a)("education.addToGrade",{group_id:t,grade_id:n,user_ids:r.join(","),role:a},{showSpinner:!0})})),g=(o.a.createEffect({handler:function(e){return Object(c.a)("education.getUsersGrades",{user_ids:e.join(", ")})},name:"getUsersGradesFx"}),Object(i.createEvent)()),b=Object(i.createEvent)(),_=Object(i.createEvent)(),y=Object(i.createEvent)(),E=Object(i.createEvent)(),O=Object(i.createEvent)(),w=Object(i.createEvent)(),C=Object(i.createEvent)(),S=Object(i.createEvent)(),A=Object(i.createEvent)()},,function(e,t,n){"use strict";function r(e){try{return localStorage.getItem(e)}catch(e){return console.error(e),null}}function a(e,t){try{localStorage.setItem(e,t)}catch(e){console.error(e)}}function i(e){try{localStorage.removeItem(e)}catch(e){console.error(e)}}n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(6),a=n.n(r),i=n(12),o=n.n(i),c=(n(960),n(0)),s=n.n(c),u=n(14),l=n(1),d=n(25),f=["lineWidth","enableLeftAvatar","disableRightAvatar","left","right","separator","className"],p=function(e){var t=e.lineWidth,n=e.enableLeftAvatar,r=void 0!==n&&n,i=e.disableRightAvatar,c=void 0!==i&&i,p=e.left,h=e.right,m=e.separator,v=void 0===m||m,g=e.className,b=o()(e,f);return s.a.createElement(l.U,a()({},b,{left:r?p||s.a.createElement(d.a,{shadow:!1,size:22,className:"MainHeaderSkeleton__avatar"}):null,right:c?null:h||s.a.createElement(d.a,{shadow:!1,size:28}),className:Object(l.Lb)("MainHeaderSkeleton",g),separator:v}),s.a.createElement(u.a,{width:t,height:"18px"}))},h=Object(c.memo)(p)},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(37);function a(e){Object(r.a)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}},function(e,t,n){var r=n(2);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return y}));var r=n(2),a=n.n(r),i=n(51);var o,c,s=n(26),u=n.n(s),l=n(5),d=n(242),f=n(42);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=l.d.buildUrl(l.j.DOWNLOAD_APP),v="5.152",g="edu-m.sferum.ru",b="edu-web.sferum.ru";u.a.isWebView()&&(g="edu_m.vk.com",b="edu_web.vk.com");var _,y={apiVersion:"5.154",app_id:d.a,host_app_id:d.c,scope:"profile,friends,groups,photos,docs",client_secret:"s6AOEOZHEi9jLg6CKhzt",access_token:"",mvk_host:g,vkcom_host:b,edu_host:"sferum.ru",call_credentials_key:"CIMQPNJGDIHBABABA",call_link_host:"sferum.ru",apiHost:"",loginHost:"",analytics:{queueSize:10,queueTimeout:3e4}},E=h(h({},y),{},{apiHost:"api.vk.com",loginHost:"login.vk.com",access_token:""}),O=/^([a-z0-9-_]+?)(?:\.[a-z0-9-_]+?)(\.cs7777\.vk\.com)$/,w=Object(f.a)("education:api_host"),C=Object(f.a)("education:mvk_host"),S=y.vkcom_host;w&&(C||(C=w.replace(".api.",".m.")),S=w.replace(".api.",".")),!w&&O.test(location.host)&&(w=location.host.replace(O,"$1.api$2")),w||(w="rk-master.api.cs7777.vk.com"),_=w.replace("api","login");var A=h(h({},y),{},{apiHost:w,loginHost:_,mvk_host:null!==(o=C)&&void 0!==o?o:y.mvk_host,vkcom_host:S,edu_host:y.edu_host,access_token:Object(f.a)("education:access_token")}),k=h(h({},y),{},{apiHost:w,loginHost:_,mvk_host:null!==(c=C)&&void 0!==c?c:y.mvk_host,vkcom_host:S,edu_host:y.edu_host,access_token:Object(f.a)("education:access_token")});t.d=i.b?k:i.f?A:E},function(e,t,n){"use strict";n.d(t,"e",(function(){return p})),n.d(t,"h",(function(){return h})),n.d(t,"b",(function(){return m})),n.d(t,"i",(function(){return v})),n.d(t,"a",(function(){return g})),n.d(t,"f",(function(){return _})),n.d(t,"g",(function(){return y})),n.d(t,"k",(function(){return E})),n.d(t,"j",(function(){return O})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return w}));var r,a,i,o,c,s,u,l=n(2),d=n.n(l),f=n(20),p=7556576,h="sferum://",m="https://apps.apple.com/ru/app/%D1%81%D1%84%D0%B5%D1%80%D1%83%D0%BC/id1542193916",v="https://play.google.com/store/apps/details?id=ru.sferum.android",g="https://appgallery.huawei.com/#/app/C103842077",b="https://st.mycdn.me/static/sferum/latest/sferum.exe",_=(i={},d()(i,f.c.WINDOWS,b),d()(i,f.c.MAC,"https://st.mycdn.me/static/sferum/latest/sferum.pkg"),d()(i,f.c.LINUX,{deb:(r={},d()(r,f.a.X64,"https://st.mycdn.me/static/sferum/latest/sferum-amd64.deb"),d()(r,f.a.X86,"https://st.mycdn.me/static/sferum/latest/sferum-i386.deb"),r),rpm:(a={},d()(a,f.a.X64,"https://st.mycdn.me/static/sferum/latest/sferum-x86_64.rpm"),d()(a,f.a.X86,"https://st.mycdn.me/static/sferum/latest/sferum-i686.rpm"),a)}),d()(i,f.c.ANDROID_HUAWEI,g),d()(i,f.c.IOS,m),d()(i,f.c.ANDROID,v),d()(i,f.c.UNKNOWN,b),i),y=(s={},d()(s,f.c.WINDOWS,"sferum.exe"),d()(s,f.c.MAC,"sferum.pkg"),d()(s,f.c.LINUX,{deb:(o={},d()(o,f.a.X64,"sferum-amd64.deb"),d()(o,f.a.X86,"sferum-i386.deb"),o),rpm:(c={},d()(c,f.a.X64,"sferum-x86_64.rpm"),d()(c,f.a.X86,"sferum-i686.rpm"),c)}),s),E="https://sferum.ru/?p=profile&m=terms",O="https://sferum.ru/?p=profile&m=privacy";!function(e){e.Contacts="contacts",e.Chats="chats",e.Classes="classes"}(u||(u={}));var w=[{type:u.Classes,title:"vkui_edu_calls_classes"},{type:u.Chats,title:"vkui_edu_calls_chats"},{type:u.Contacts,title:"vkui_edu_calls_tab_contacts"}]},function(e,t,n){"use strict";n.d(t,"l",(function(){return l})),n.d(t,"i",(function(){return d})),n.d(t,"d",(function(){return f})),n.d(t,"g",(function(){return p})),n.d(t,"h",(function(){return h})),n.d(t,"k",(function(){return m})),n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return g})),n.d(t,"b",(function(){return b})),n.d(t,"j",(function(){return _})),n.d(t,"e",(function(){return y})),n.d(t,"f",(function(){return E}));var r=n(21),a=n.n(r),i=n(92),o=n(13),c=n(46),s=n(251),u=n(23);function l(e){return Object(i.c)(e)&&e.length>0}function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return!(!e||!t)&&!!Object.keys(e).find((function(r){return!n.includes(r)&&!Object(o.t)(e[r],t[r])}))}function f(e,t){return e=e.replace(/https:\/\/.*?vk\.com/,"https://".concat(c.d.mvk_host)),e+="?forced_color_scheme_mode=light&embedded=1&_sak_embed_at=".concat(t)}function p(e,t){return e=e.replace(/https:\/\/.*?vk\.com/,"https://".concat(c.d.vkcom_host)),e+="?&_sak_embed_at=".concat(t)}function h(e){return e&&e.admin_level>s.a.EDITOR}function m(e){return e&&e.admin_level===s.a.EDITOR}function v(e,t){return!(e&&t<s.a.ADMINISTRATOR)}function g(e){return e<u.n?e:e>=u.n&&e<u.m?e-u.n:e-u.m}function b(e){return e>u.m?e:u.m+Number(e)}function _(){try{return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&window.RTCPeerConnection&&window.RTCIceCandidate&&window.RTCSessionDescription&&window.HTMLCanvasElement&&window.HTMLCanvasElement.prototype.captureStream&&window.RTCRtpSender&&window.RTCRtpSender.prototype.replaceTrack&&navigator.sendBeacon&&!0}catch(e){return!1}}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:240;if(e.sizes){var n=a()(e.sizes).sort((function(e,t){return e.width-t.width||e.height-t.height})),r=n.find((function(e){return e.width>=t}));return r||n[n.length-1]}}function E(e){if(e.sizes&&0!==e.sizes.length)return e.sizes.sort((function(e,t){return e.width+e.height-(t.width+t.height)})).pop()}},function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"b",(function(){return f}));var r=n(6),a=n.n(r),i=n(4),o=n(0),c=n(13),s=function(){return{window:c.b?window:null,document:c.b?document:null}},u=Object(o.createContext)(s()),l=function(){var e=Object(o.useContext)(u);return{window:e.window||(c.b?window:null),document:e.document||(c.b?document:null)}};function d(e){return function(t){var n=l();return Object(i.a)(e,a()({},t,n))}}function f(e){e&&e.activeElement&&e.activeElement.blur()}},function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return g}));var r,a,i,o,c=n(7),s=n.n(c),u=n(2),l=n.n(u),d=n(246);!function(e){e.WINDOWS="windows",e.MAC="mac",e.ANDROID="android",e.IOS="ios",e.LINUX="linux",e.UNKNOWN="unknown"}(a||(a={})),function(e){e.X86="x86",e.X64="x64",e.ARM="arm"}(i||(i={})),function(e){e.CHROME="chrome",e.FIREFOX="firefox",e.SAFARI="safari",e.OPERA="opera",e.YANDEX="yandex",e.IE="ie",e.EDGE="edge"}(o||(o={}));var f=(r={},l()(r,a.ANDROID,/Android/i),l()(r,a.IOS,/(iPhone|iPad|iPod)/i),l()(r,a.WINDOWS,/Win/i),l()(r,a.IOS,/(iPhone|iPad|iPod)/i),l()(r,a.ANDROID,/Android/i),l()(r,a.MAC,/(MacPPC|MacIntel|Mac_PowerPC|Macintosh|Mac OS X)/i),l()(r,a.LINUX,/(Linux|X11(?!.*CrOS))/i),r),p=/(x86_64|x86-64|win64|x64;|amd64|wow64|x64_64)/i,h=/Mobile|mini|Fennec|Android|iP(ad|od|hone)|opera (mini|mobi)/i,m=new Map,v={get OS(){if(m.has("os"))return m.get("os");for(var e=window.navigator.userAgent,t=0,n=Object.entries(f);t<n.length;t++){var r=s()(n[t],2),i=r[0],o=r[1];if(o&&o.test(e))return m.set("os",i),i}return m.set("os",a.UNKNOWN),a.UNKNOWN},get ARCH(){if(m.has("arch"))return m.get("arch");var e=window.navigator,t=e.userAgent,n=e.platform;return p.test(t)||"MacIntel"===n||"Linux x86_64"===n?(m.set("arch",i.X64),i.X64):/arm/i.test(t)?(m.set("arch",i.ARM),i.ARM):(m.set("arch",i.X86),i.X86)},get BROWSER(){return g().name.toLowerCase()},get isChromeBased(){return g().chromeBased},get isMobile(){if(m.has("isMobile"))return m.get("isMobile");var e=window.navigator.appVersion,t=h.test(e);return m.set("isMobile",t),t},get isIPad(){return d.isIPad||d.isIPadOS}};function g(){if(m.has("browserInfo"))return m.get("browserInfo");var e=function(){var e,t=!1,n=0,r=window.navigator,a=r.userAgent,i=r.appName,c=r.appVersion,s=a.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)([\d.]+)/i)||[];if(/trident/i.test(s[1]))return e=/\brv[ :]+(\d+)([\d.]+)/g.exec(a),{name:o.IE,version:e&&e[1]||"Unknown",fullVersion:e&&e[1]?"".concat(e[1]).concat(e[2]||""):"Unknown",chromeBased:t,chromeVersion:n};if("Safari"===s[1]){if(e=a.match(/\bEdge\/(\d+)([\d.])+/))return{name:o.EDGE,version:e[1]||"Unknown",fullVersion:e[1]?"".concat(e[1]).concat(e[2]||""):"Unknown",chromeBased:t,chromeVersion:n};if(e=a.match(/\bCriOS\/(\d+)([\d.]+)/))return{name:o.CHROME,version:e[1],fullVersion:"".concat(e[1]).concat(e[2]),chromeBased:!0,chromeVersion:e[1]};if(e=a.match(/\bFxiOS\/(\d+)([\d.]+)/))return{name:o.FIREFOX,version:e[1],fullVersion:"".concat(e[1]).concat(e[2]),chromeBased:t,chromeVersion:n};if(e=a.match(/\bYaBrowser\/(\d+)([\d.]+)/))return{name:o.YANDEX,version:e[1],fullVersion:"".concat(e[1]).concat(e[2]),chromeBased:t,chromeVersion:n};if(e=a.match(/\bOPT\/(\d+)([\d.]+)/))return{name:o.OPERA,version:e[1],fullVersion:"".concat(e[1]).concat(e[2]),chromeBased:t,chromeVersion:n}}if("Chrome"===s[1]){if(n=Number(s[2]),t=!0,e=a.match(/\bOPR\/(\d+)([\d.]+)/))return{name:o.CHROME,version:e[1]||"Unknown",fullVersion:e[1]?"".concat(e[1]).concat(e[2]||""):"Unknown",chromeBased:t,chromeVersion:n};if(e=a.match(/\bYaBrowser\/(\d+)([\d.]+)/))return{name:o.YANDEX,version:e[1]||"Unknown",fullVersion:e[1]?"".concat(e[1]).concat(e[2]||""):"Unknown",chromeBased:t,chromeVersion:n};if(e=a.match(/\bEdge?\/(\d+)([\d.]+)/))return{name:o.EDGE,version:e[1]||"Unknown",fullVersion:e[1]?"".concat(e[1]).concat(e[2]||""):"Unknown",chromeBased:t,chromeVersion:n};if(void 0!==window.opr&&/^(.+\.)?ok.ru$/.test(window.location.host))return{name:o.OPERA,version:"Hidden",fullVersion:"Hidden",chromeBased:t,chromeVersion:n}}return e=a.match(/version\/(\d+)([\d.]+)/i),{name:s[2]?s[1]:i,version:e&&e[1]||s[2]||c,fullVersion:e&&e[1]?"".concat(e[1]).concat(e[2]||""):s[2]?"".concat(s[2]).concat(s[3]||""):c,chromeBased:t,chromeVersion:n}}();return m.set("browserInfo",e),e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"f",(function(){return c})),n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"g",(function(){return d}));var r=n(26),a=n.n(r),i="education",o=!1,c=!1,s=!o&&!c,u=!1,l=(/static\.(vk|vkontakte)\.com/.test(window.location.hostname),/m\.(vk|[a-z0-9]+\.vk)\.com/.test(window.location.hostname)),d=!a.a.isWebView()&&window.parent===window},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(9),a=n(660),i=n(42),o=n(23),c=Object(i.a)(o.w),s=Boolean(JSON.parse(c));var u,l=Object(r.createDomain)("Grades");u=l,Object(a.attachLogger)(u,{reduxDevtools:"disabled",console:s?"enabled":"disabled",inspector:"disabled"})},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(6),a=n.n(r),i=n(12),o=n.n(i),c=n(0),s=n.n(c),u=n(1),l=n(106),d=n(29),f=n(75),p=["title","text","actions"],h=function(){var e=Object(u.Ob)().viewWidth,t=Object(l.c)().getLangKey,n=Object(f.a)(),r=n.showPopout,i=n.hidePopout,c=function(e){var t=e.title,n=e.text,c=e.actions,l=void 0===c?[]:c,d=o()(e,p);l.forEach((function(e){return e.autoclose=!0})),r(s.a.createElement(u.e,a()({actions:l,onClose:i,header:t},d),s.a.createElement("p",{style:{color:"var(--text_subhead)"},dangerouslySetInnerHTML:{__html:n}})))},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.error_text||e.error_msg||t("vkui_common_error_text_common");c({title:t("vkui_common_error_title"),text:n,actions:[{autoclose:!0,title:t("vkui_common_error_close"),mode:"default"}]})};return{showAlert:c,showAlertMessage:function(e){var n=[{autoclose:!0,mode:"default",title:t("vkui_common_close")}];r(s.a.createElement(u.e,{actions:n,onClose:i},e))},showAlertConfirm:function(n){var r=n.title,a=n.text,i=n.actionText,o=n.callback,s=n.isMobileVerticalActions,u=void 0!==s&&s,l=Object(d.b)(e)&&u,f=l?"vertical":"horizontal",p=[{title:t("vkui_common_cancel"),mode:"cancel"},{title:i,mode:"destructive",action:function(){return o()}}];c({title:"string"==typeof r?r:t("vkui_common_action_confirmation"),text:a,actions:l?p.reverse():p,actionsLayout:f})},showAlertError:h,showAlertErrorMessage:function(e){return h({error_text:e})}}}},function(e,t,n){"use strict";function r(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}n.d(t,"a",(function(){return r}))},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=n=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(2),a=n.n(r),i=n(0),o=n.n(i),c=n(1161),s=n(1162),u=n(283);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.children=e,t.id="snackBar".concat(Math.random().toString().slice(2)),Object(u.a)(t)};return{onSnackbarRemove:function(){Object(u.b)()},showSnackbar:function(t,n){e(t,n)},showSnackbarInfo:function(t,n){e(t,d({before:o.a.createElement(c.a,{className:"Snackbar__icon--info"})},n))},showSnackbarError:function(t,n){e(t,d({before:o.a.createElement(s.a,{className:"Snackbar__icon--error"})},n))}}}},function(e,t,n){"use strict";n.d(t,"n",(function(){return b})),n.d(t,"e",(function(){return _})),n.d(t,"o",(function(){return y})),n.d(t,"m",(function(){return C})),n.d(t,"g",(function(){return S})),n.d(t,"f",(function(){return A})),n.d(t,"k",(function(){return k})),n.d(t,"h",(function(){return j})),n.d(t,"i",(function(){return T})),n.d(t,"l",(function(){return P})),n.d(t,"j",(function(){return N})),n.d(t,"d",(function(){return x})),n.d(t,"a",(function(){return R})),n.d(t,"b",(function(){return M})),n.d(t,"c",(function(){return L}));var r=n(2),a=n.n(r),i=n(7),o=n.n(i),c=n(21),s=n.n(c),u=n(462),l=n(88),d=n(126),f=n(48),p=n(46),h=n(23);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=function(e,t){return t.filter((function(t){return t.peerId!==e}))},b=function(e){return e.type===l.a.CurrentCall},_=function(e){return e.some(b)},y=function(e){return e.type===l.a.CallInProgress||e.type===l.a.CurrentCall},E=function(e){return e.type===l.a.IncomingCall||e.type===l.a.OutgoingCall||e.type===l.a.JoinCall},O=function(e){return Boolean(e.call_in_progress&&e.call_in_progress.participants.count>0&&e.chat_settings)},w=function(e,t){var n,r;return{peerId:t.peer.id,peerType:t.peer.type,name:t.chat_settings.title,joinLink:t.call_in_progress.join_link,type:t.call_in_progress.participants.list.includes(e)?l.a.CurrentCall:l.a.CallInProgress,isGroup:!0,chatLink:null===(n=t.payload)||void 0===n||null===(r=n.edu)||void 0===r?void 0:r.chat_link}},C=function(e,t,n,r){var a=g(e,n);r(Object(d.b)([t].concat(s()(a))))},S=function(e,t){var n=e.find(E);if(n){var r=g(n.peerId,e);n.type=l.a.CurrentCall,t(Object(d.b)([n].concat(s()(r))))}},A=function(e,t){var n=e.find((function(e){return e.type===l.a.CurrentCall}));if(n&&!n.isGroup){var r=e.filter((function(e){return e.type!==l.a.CurrentCall}));t(Object(d.b)(r))}else if(n&&n.isGroup){var a=g(n.peerId,e);n.type=l.a.CallInProgress,t(Object(d.b)([n].concat(s()(a))))}},k=function(e,t){return t.filter(O).map((function(t){return w(e,t)}))},j=function(e,t,n){var r=t.find((function(t){return t.joinLink===e}));r&&(r.type=l.a.JoinCall,C(r.peerId,r,t,n))},T=function(e,t,n){var r=t.find((function(t){return e===t.peerId}));r&&(r.type=l.a.JoinCall,C(r.peerId,r,t,n))},I=null,P=function(e,t,n){if(!_(t))if(e.payload.chat_info){I=null;var r=e.payload.chat_info.chat_id,a=Object(f.b)(r),i=t.filter((function(e){return e.peerId!==a})),o=v(v({},t.find((function(e){return e.peerId===a}))),{},{type:l.a.IncomingCall});n(Object(d.b)([o].concat(s()(i))))}else if(e.payload.caller_info){var c=e.payload.caller_info,u=c.user_id,p=c.first_name,h=c.last_name,m={peerId:u,peerType:"user",name:"".concat(p," ").concat(h),joinLink:"",type:l.a.IncomingCall,isGroup:!1},g=t.filter((function(e){return e.peerId!==u}));n(Object(d.b)([m].concat(s()(g))))}else;},D=null,N=function(e,t,n,r,a){if(null===I||D!==e.peerId){D=e.peerId;var i={peer_ids:"".concat(e.peerId)};I=r("messages.getConversationsById",i).then((function(e){var r=e.items;if(I){var i=function(e,t,n){var r=o()(t,1)[0],a=n.find((function(e){return e.peerId===r.peer.id})),i=n.filter((function(e){return e.peerId!==r.peer.id}));return r.call_in_progress?r.call_in_progress.participants.count>0?[w(e,r)].concat(s()(i)):i:a?i:n}(t,r,n);a(Object(d.b)(i))}})).finally((function(){I=null}))}};function x(e,t,n){return e("messages.getCallPreview",{link:t,device_id:"anyId",fields:u.a},{grouping:!1,showSpinner:null==n?void 0:n.showSpinner})}function R(e,t){return e("messages.getCallPreview",{link:t,client_secret:p.c.client_secret,client_id:p.c.app_id,device_id:"anyId",access_token:"",fields:u.a},{grouping:!1})}function M(e,t,n,r,a){return e("messages.getAnonymCallToken",{link:t,client_secret:p.c.client_secret,client_id:p.c.app_id,device_id:"anyId",user_id:n,name:r,secret:a,access_token:""},{grouping:!1})}function L(e,t){var n,r;if(e.error_code){if(e.error_code===h.c)return t("vkui_edu_error_calls_not_found");if(e.error_code===h.g)return t("vkui_edu_error_calls_invalid_name");if(e.error_code===h.f)return t("vkui_edu_error_calls_invalid_join_link");if(e.error_code===h.b)return t("vkui_edu_error_calls_auth_required");if(e.error_code===h.j)return t("vkui_edu_error_calls_outdated_join_link")}return e instanceof Error?e.stack||e.message||"".concat(e):null!==(n=null!==(r=e.error_text)&&void 0!==r?r:e.error_msg)&&void 0!==n?n:t("vkui_common_error_text_common")}},,function(e,t,n){"use strict";var r;function a(e){return{type:r.SET_MESSAGES_MODAL,data:e}}function i(e){return{type:r.SET_MESSAGES_MAIN,data:e}}function o(e){return{type:r.RESET_MESSAGES_MAIN,data:e}}function c(e){return{type:r.SET_MESSAGES_UNREAD_COUNT,data:e}}function s(e){return{type:r.SET_MESSAGE_TO_REPLY,data:e}}function u(e){return{type:r.SET_MESSAGES_ENTRY_POINT,data:e}}n.d(t,"a",(function(){return r})),n.d(t,"f",(function(){return a})),n.d(t,"e",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"g",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return u})),function(e){e.SET_MESSAGES_MODAL="SET_MESSAGES_MODAL",e.SET_MESSAGES_MAIN="SET_MESSAGES_MAIN",e.RESET_MESSAGES_MAIN="RESET_MESSAGES_MAIN",e.SET_MESSAGES_UNREAD_COUNT="SET_MESSAGES_UNREAD_COUNT",e.SET_MESSAGE_TO_REPLY="SET_MESSAGE_TO_REPLY",e.SET_MESSAGES_ENTRY_POINT="SET_MESSAGES_ENTRY_POINT"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"h",(function(){return b})),n.d(t,"e",(function(){return y})),n.d(t,"d",(function(){return E})),n.d(t,"c",(function(){return w})),n.d(t,"a",(function(){return C})),n.d(t,"i",(function(){return S})),n.d(t,"f",(function(){return P})),n.d(t,"g",(function(){return N})),n.d(t,"b",(function(){return R}));var r=n(2),a=n.n(r),i=n(21),o=n.n(i),c=n(51),s=n(13),u=n(42),l=n(23),d=n(46);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h,m=function(){return(c.b||c.f)&&null===Object(u.a)(l.v)},v=null,g=[],b=function(e){v=e},_=function(e){Object(u.b)(l.D);var t=e?"statEvents.addVKUIAnonymously":"statEvents.addVKUI",n={events:JSON.stringify(g),vkui:1};return g.length=0,clearTimeout(h),h=null,m()?Promise.resolve().then((function(){console.log("🚀 [sendAllEvents]:",n)})):v(t,n,{grouping:!1})},y=function(){var e=Object(u.a)(l.D);if(null!==e){m()&&console.log("[restoreAnalyticsEventsQueue]: ",e);try{var t=JSON.parse(e);Array.isArray(null==t?void 0:t.data)&&(g=t.data,_(!0===(null==t?void 0:t.isAnonymous)))}catch(e){}finally{Object(u.b)(l.D)}}},E=function(e,t,n){if(window.navigator.sendBeacon){var r=e()?"statEvents.addVKUI":"statEvents.addVKUIAnonymously";document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&g.length>0&&(window.clearTimeout(h),Promise.resolve().then((function(){if(e()){var r=n();return r||t().then(n)}return null})).then((function(e){var t=new FormData;if(t.set("events",JSON.stringify(g)),t.set("vkui","1"),t.set("lang","0"),t.set("v",d.c.apiVersion),e&&t.set("access_token",e),m())console.log("🥓 [sendBeacon]: ",{events:o()(g),access_token:e}),g.length=0,Object(u.b)(l.D);else if(g.length>0){navigator.sendBeacon("https://".concat(d.c.apiHost,"/method/").concat(r),t)&&(g.length=0,Object(u.b)(l.D))}})))}))}},O=s.B.getItem(l.q),w=function(e){var t,n=O||s.B.getItem(l.q);e&&Object(u.c)(l.E,"".concat(e));var r=Object(u.a)(l.E),a=null!==(t=null!=e?e:r)&&void 0!==t?t:"anonymous";return(!n||0!==n.indexOf("".concat(a)))&&(n="".concat(a,"_").concat(Object(s.l)(11)),O=n,s.B.setItem(l.q,n)),n},C=function(){s.B.removeItem(l.q)},S=function(e){C(),w(e)},A=0,k=0,j=function(){return Object(s.k)(0,2147483647)},T=function(){return Object(s.m)(new Date)},I=function(e,t){g.push(e),g.length>=d.c.analytics.queueSize?_(t):(Object(u.c)(l.D,JSON.stringify({data:g,isAnonymous:t})),h||(h=window.setTimeout((function(){_(t)}),d.c.analytics.queueTimeout)))},P=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=j(),i="type_action";"type_edu_navigation_item"===e&&(i="type_navgo"),Object.assign(t,{session_id:w()});var o=a()({id:r,prev_event_id:A,prev_nav_id:k,screen:"custom",timestamp:T().toString(),type:i},i,a()({type:e},e,t));return A=r,"type_edu_navigation_item"===e&&(k=r),m()&&!window.trackEventsFromTest&&console.info("[trackEvent]:",e,t),I(o,n)},D={school_id:0},N=function(e){D=e},x={session_id:""},R=function(){return p(p({},x),D)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(14),a=n(0),i=n.n(a),o=(n(977),n(1)),c=n(29),s=function(e){var t=e.itemsCount,n=void 0===t?0:t,a=e.component,s=void 0===a?null:a,u=e.renderItem,l=e.top,d=e.inBorders,f=void 0===d||d,p=e.itemDistance,h=void 0===p?"12px":p,m=e.bottom,v=void 0===m?null:m,g=Array.from(Array(n).keys()),b=Object(o.Ob)().viewWidth,_=Object(c.b)(b),y=i.a.createElement(i.a.Fragment,null,l||null===l?i.a.createElement(i.a.Fragment,null,l):i.a.createElement(r.a,{width:"auto",height:"36px",className:Object(o.Lb)("ListSkeleton__search",_&&"ListSkeleton__search--mobile")}),i.a.createElement("div",{className:"ListSkeleton__content"},g.map((function(e,t){return i.a.createElement("div",{key:"ListSkeleton__contentItem-".concat(t),className:"ListSkeleton__contentItem ListSkeleton__contentItem-".concat(t),style:{marginBottom:t===g.length-1?"8px":h}},u?u(t):s)}))),v);return f?i.a.createElement(o.C,{className:"ListSkeleton"},y):y}},function(e,t,n){"use strict";n.d(t,"f",(function(){return c})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"c",(function(){return f}));var r=n(9),a=n(40),i=n(52),o=n(315),c=Object(r.restore)(a.o,null),s=Object(r.restore)(a.h,[]).on(a.n,(function(e,t){return t})).reset(a.k),u=Object(r.restore)(a.h.finally.map((function(){return!0})),!1).reset(a.k),l=Object(r.restore)(a.h.failData,null).reset(a.k),d=i.a.createStore({id:null,color:1,number:o.a[0],name:"",is_graduated:!1,liter:"А",start_year:(new Date).getFullYear(),end_year:(new Date).getFullYear()+1,title:""},{name:"gradeEditInfo"}),f=i.a.createStore(!1)},function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return s})),n.d(t,"d",(function(){return u}));var r=n(22),a=Object.prototype.hasOwnProperty;var i=/^[_a-z][_0-9a-z]*/i;function o(e){var t=e.match(i);return t?t[0]:e}function c(e,t,n){return!(!t||"object"!=typeof t)&&(Array.isArray(t)?t.every((function(t){return c(e,t,n)})):e.selections.every((function(e){if(Object(r.z)(e)&&Object(r.L)(e,n)){var i=Object(r.K)(e);return a.call(t,i)&&(!e.selectionSet||c(e.selectionSet,t[i],n))}return!0})))}function s(e){return null!==e&&"object"==typeof e&&!Object(r.C)(e)&&!Array.isArray(e)}function u(){return new r.b}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"h",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"j",(function(){return s})),n.d(t,"m",(function(){return u})),n.d(t,"f",(function(){return l})),n.d(t,"l",(function(){return d})),n.d(t,"g",(function(){return f})),n.d(t,"d",(function(){return p})),n.d(t,"k",(function(){return h})),n.d(t,"i",(function(){return m})),n.d(t,"e",(function(){return v}));var r,a=n(380);function i(e){return{type:r.SET_CHAT_ACCESS_RESTRICTED_TYPE,data:e}}function o(e){return{type:r.SET_CHAT_PREVIEW,data:e}}function c(){return{type:r.SET_CHAT_PREVIEW,data:a.a.chatPreview}}function s(e){return{type:r.SET_CREATE_CHAT_INFO,data:e}}function u(e){return{type:r.UPDATE_CREATE_CHAT_INFO,data:e}}function l(e){return{type:r.SET_CHAT_INFO,data:e}}function d(e){return{type:r.UPDATE_CHAT_INFO,data:e}}function f(e){return{type:r.SET_CHAT_INVITE_LINK_INFO,data:e}}function p(e){return{type:r.SET_EDIT_CHAT_INFO,data:e}}function h(e){return{type:r.UPDATE_EDIT_CHAT_INFO,data:e}}function m(e){return{type:r.SET_CLASS_CHAT_INFO,data:e}}function v(e){return{type:r.SET_CHATS_IN_STORAGE,data:e}}!function(e){e.SET_CHAT_ACCESS_RESTRICTED_TYPE="SET_CHAT_ACCESS_RESTRICTED_TYPE",e.SET_CHAT_PREVIEW="SET_CHAT_PREVIEW",e.SET_CREATE_CHAT_INFO="SET_CREATE_CHAT_INFO",e.UPDATE_CREATE_CHAT_INFO="UPDATE_CREATE_CHAT_INFO",e.SET_CHAT_INFO="SET_CHAT_INFO",e.UPDATE_CHAT_INFO="UPDATE_CHAT_INFO",e.SET_CHAT_INVITE_LINK_INFO="SET_CHAT_INVITE_LINK_INFO",e.SET_EDIT_CHAT_INFO="SET_EDIT_CHAT_INFO",e.UPDATE_EDIT_CHAT_INFO="UPDATE_EDIT_CHAT_INFO",e.SET_CLASS_CHAT_INFO="SET_CLASS_CHAT_INFO",e.SET_CHATS_IN_STORAGE="SET_CHATS_IN_STORAGE"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return u})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return p}));var r,a,i,o,c,s,u,l=n(2),d=n.n(l);!function(e){e.CLASS="class",e.MEETING="meeting",e.OTHER="other",e.BROADCAST="broadcast"}(i||(i={})),function(e){e.WEEK="week",e.TWO_WEEKS="two_weeks",e.THREE_WEEKS="three_weeks",e.FOUR_WEEKS="month"}(o||(o={})),function(e){e.MONDAY="monday",e.TUESDAY="tuesday",e.WEDNESDAY="wednesday",e.THURSDAY="thursday",e.FRIDAY="friday",e.SATURDAY="saturday",e.SUNDAY="sunday"}(c||(c={})),function(e){e.FULL="full",e.UPCOMING="upcoming"}(s||(s={})),function(e){e.TEACHER="teacher",e.STUDENT="student",e.EMPLOYEE="employee"}(u||(u={}));var f=(r={},d()(r,u.TEACHER,[i.CLASS,i.OTHER]),d()(r,u.STUDENT,[i.OTHER]),d()(r,u.EMPLOYEE,[i.OTHER]),r),p=(a={},d()(a,i.CLASS,"vkui_edu_event_type_class"),d()(a,i.MEETING,"vkui_edu_event_type_meeting"),d()(a,i.OTHER,"vkui_edu_event_type_other"),d()(a,i.BROADCAST,"vkui_edu_event_type_broadcast"),a)},function(e,t,n){var r=n(34),a=n(874),i=n(39);e.exports=function(e){var t=a();return function(){var n,a=r(e);if(t){var o=r(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return i(this,n)}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.d(t,"h",(function(){return p})),n.d(t,"f",(function(){return h})),n.d(t,"c",(function(){return m})),n.d(t,"p",(function(){return v})),n.d(t,"n",(function(){return g})),n.d(t,"l",(function(){return b})),n.d(t,"a",(function(){return _})),n.d(t,"i",(function(){return y})),n.d(t,"o",(function(){return E})),n.d(t,"m",(function(){return O})),n.d(t,"b",(function(){return w})),n.d(t,"q",(function(){return C})),n.d(t,"j",(function(){return S})),n.d(t,"r",(function(){return A})),n.d(t,"d",(function(){return k})),n.d(t,"e",(function(){return j})),n.d(t,"g",(function(){return T})),n.d(t,"k",(function(){return I}));var r=n(2),a=n.n(r),i=n(52),o=n(5),c=n(118),s=n(24),u=n(76),l=n(225);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=c.b.prepend((function(){return{route:o.i.MERGE_GRADES}})),h=i.a.createEvent("merge/handleNewGradeInfoChange"),m=i.a.createEvent("merge/confirm"),v=i.a.createEvent("merge/showAlert"),g=i.a.createEvent("merge/managersSelected"),b=c.b.prepend((function(){return Object(u.g)(f(f({},l.a.MANAGER),{},{submitHandler:g})),{route:o.i.SELECT_MERGE_MANAGER}})),_=i.a.createEvent("merge/checkManager"),y=i.a.createEvent("merge/onManagerSelected"),E=i.a.createEvent("merge/teachersSelected"),O=c.b.prepend((function(){return Object(u.g)(f(f({},l.a.TEACHERS),{},{submitHandler:E})),{route:o.i.SELECT_MERGE_TEACHERS}})),w=i.a.createEvent("merge/checkTeachers"),C=c.b.prepend((function(e){return{route:o.i.GRADE_TEACHERS,routeParams:{gradeId:e}}})),S=i.a.createEvent("merge/onTeachersSelected"),A=i.a.createEvent("merge/ski[TeachersSelection"),k=i.a.createEffect({handler:function(e){var t=e.schoolId,n=e.gradeId,r=e.role;return Object(s.a)("education.getGradeMembers",{group_id:t,grade_id:n,role:r,fields:"photo_200"}).then((function(e){return e.items}))},name:"getGradeMembersFx"}),j=i.a.createEffect({handler:function(e){var t=e.schoolId,n=e.gradeIds,r=e.role;return Promise.all(n.map((function(e){return k({gradeId:e,schoolId:t,role:r})})))},name:"getGradesMembersFx"}),T=i.a.createEffect({handler:function(e){var t=e.schoolId,n=e.gradeIds,r=e.number,a=e.liter,i=e.name,o=e.managerId,c=e.teacherIds;return Object(s.a)("education.mergeGrades",{school_id:t,grade_ids:n,number:r,liter:a,name:i,class_teacher_id:o,teacher_ids:c},{showSpinner:!0}).then((function(e){return e[0]}))},name:"mergeGradesFx"}),I=i.a.createEffect((function(e){var t=e.gradeId,n=e.schoolId;o.d.go(o.j.SCHOOL_GRADE_INFO,{gradeId:t,schoolId:n})}))},,function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=Object.prototype,a=r.toString,i=r.hasOwnProperty,o=Function.prototype.toString,c=new Map;function s(e,t){try{return function e(t,n){if(t===n)return!0;var r=a.call(t),c=a.call(n);if(r!==c)return!1;switch(r){case"[object Array]":if(t.length!==n.length)return!1;case"[object Object]":if(f(t,n))return!0;var s=u(t),l=u(n),p=s.length;if(p!==l.length)return!1;for(var h=0;h<p;++h)if(!i.call(n,s[h]))return!1;for(h=0;h<p;++h){var m=s[h];if(!e(t[m],n[m]))return!1}return!0;case"[object Error]":return t.name===n.name&&t.message===n.message;case"[object Number]":if(t!=t)return n!=n;case"[object Boolean]":case"[object Date]":return+t==+n;case"[object RegExp]":case"[object String]":return t==""+n;case"[object Map]":case"[object Set]":if(t.size!==n.size)return!1;if(f(t,n))return!0;for(var v=t.entries(),g="[object Map]"===r;;){var b=v.next();if(b.done)break;var _=b.value,y=_[0],E=_[1];if(!n.has(y))return!1;if(g&&!e(E,n.get(y)))return!1}return!0;case"[object AsyncFunction]":case"[object GeneratorFunction]":case"[object AsyncGeneratorFunction]":case"[object Function]":var O=o.call(t);return O===o.call(n)&&(C=d,!((S=(w=O).length-C.length)>=0&&w.indexOf(C,S)===S))}var w,C,S;return!1}(e,t)}finally{c.clear()}}function u(e){return Object.keys(e).filter(l,e)}function l(e){return void 0!==this[e]}var d="{ [native code] }";function f(e,t){var n=c.get(e);if(n){if(n.has(t))return!0}else c.set(e,n=new Set);return n.add(t),!1}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(0),a=n.n(r),i=n(1),o=(n(999),n(14)),c=n(25),s=function(e){var t=e.type,n=void 0===t?"default":t;return a.a.createElement(i.C,{className:"SchoolSidebarMenuSkeleton"},a.a.createElement(i.m,{before:a.a.createElement(c.a,{size:28,shadow:!1})},a.a.createElement(o.a,{width:"131px"})),a.a.createElement(i.m,{before:a.a.createElement(c.a,{size:28,shadow:!1})},a.a.createElement(o.a,{width:"131px"})),a.a.createElement(i.m,{before:a.a.createElement(c.a,{size:28,shadow:!1})},a.a.createElement(o.a,{width:"131px"})),a.a.createElement(i.m,{before:a.a.createElement(c.a,{size:28,shadow:!1})},a.a.createElement(o.a,{width:"131px"})),a.a.createElement(i.ob,{style:{margin:"8px 0"}}),a.a.createElement(i.m,{before:a.a.createElement(c.a,{size:28,shadow:!1})},a.a.createElement(o.a,{width:"131px"})),a.a.createElement(i.m,{before:a.a.createElement(c.a,{size:28,shadow:!1})},a.a.createElement(o.a,{width:"131px"})),a.a.createElement(i.m,{before:a.a.createElement(c.a,{size:28,shadow:!1})},a.a.createElement(o.a,{width:"131px"})),"long"===n&&a.a.createElement(a.a.Fragment,null,a.a.createElement(i.ob,{style:{margin:"8px 0"}}),a.a.createElement(i.m,{before:a.a.createElement(c.a,{size:28,shadow:!1})},a.a.createElement(o.a,{width:"131px"})),a.a.createElement(i.m,{before:a.a.createElement(c.a,{size:28,shadow:!1})},a.a.createElement(o.a,{width:"131px"})),a.a.createElement(i.m,{before:a.a.createElement(c.a,{size:28,shadow:!1})},a.a.createElement(o.a,{width:"131px"})),a.a.createElement(i.m,{before:a.a.createElement(c.a,{size:28,shadow:!1})},a.a.createElement(o.a,{width:"131px"})),a.a.createElement(i.m,{before:a.a.createElement(c.a,{size:28,shadow:!1})},a.a.createElement(o.a,{width:"131px"}))))}},function(e,t,n){"use strict";var r=SyntaxError,a=Function,i=TypeError,o=function(e){try{return a('"use strict"; return ('+e+").constructor;")()}catch(e){}},c=Object.getOwnPropertyDescriptor;if(c)try{c({},"")}catch(e){c=null}var s=function(){throw new i},u=c?function(){try{return s}catch(e){try{return c(arguments,"callee").get}catch(e){return s}}}():s,l=n(539)(),d=Object.getPrototypeOf||function(e){return e.__proto__},f={},p="undefined"==typeof Uint8Array?void 0:d(Uint8Array),h={"%AggregateError%":"undefined"==typeof AggregateError?void 0:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayIteratorPrototype%":l?d([][Symbol.iterator]()):void 0,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":f,"%AsyncGenerator%":f,"%AsyncGeneratorFunction%":f,"%AsyncIteratorPrototype%":f,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%BigInt%":"undefined"==typeof BigInt?void 0:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?void 0:FinalizationRegistry,"%Function%":a,"%GeneratorFunction%":f,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":l?d(d([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&l?d((new Map)[Symbol.iterator]()):void 0,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&l?d((new Set)[Symbol.iterator]()):void 0,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":l?d(""[Symbol.iterator]()):void 0,"%Symbol%":l?Symbol:void 0,"%SyntaxError%":r,"%ThrowTypeError%":u,"%TypedArray%":p,"%TypeError%":i,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?void 0:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet},m={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},v=n(436),g=n(235),b=v.call(Function.call,Array.prototype.concat),_=v.call(Function.apply,Array.prototype.splice),y=v.call(Function.call,String.prototype.replace),E=v.call(Function.call,String.prototype.slice),O=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,w=/\\(\\)?/g,C=function(e){var t=E(e,0,1),n=E(e,-1);if("%"===t&&"%"!==n)throw new r("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new r("invalid intrinsic syntax, expected opening `%`");var a=[];return y(e,O,(function(e,t,n,r){a[a.length]=n?y(r,w,"$1"):t||e})),a},S=function(e,t){var n,a=e;if(g(m,a)&&(a="%"+(n=m[a])[0]+"%"),g(h,a)){var c=h[a];if(c===f&&(c=function e(t){var n;if("%AsyncFunction%"===t)n=o("async function () {}");else if("%GeneratorFunction%"===t)n=o("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=o("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var a=e("%AsyncGenerator%");a&&(n=d(a.prototype))}return h[t]=n,n}(a)),void 0===c&&!t)throw new i("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:a,value:c}}throw new r("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new i("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new i('"allowMissing" argument must be a boolean');var n=C(e),a=n.length>0?n[0]:"",o=S("%"+a+"%",t),s=o.name,u=o.value,l=!1,d=o.alias;d&&(a=d[0],_(n,b([0,1],d)));for(var f=1,p=!0;f<n.length;f+=1){var m=n[f],v=E(m,0,1),y=E(m,-1);if(('"'===v||"'"===v||"`"===v||'"'===y||"'"===y||"`"===y)&&v!==y)throw new r("property names with quotes must have matching quotes");if("constructor"!==m&&p||(l=!0),g(h,s="%"+(a+="."+m)+"%"))u=h[s];else if(null!=u){if(!(m in u)){if(!t)throw new i("base intrinsic for "+e+" exists, but the property is not available.");return}if(c&&f+1>=n.length){var O=c(u,m);u=(p=!!O)&&"get"in O&&!("originalValue"in O.get)?O.get:u[m]}else p=g(u,m),u=u[m];p&&!l&&(h[s]=u)}}return u}},function(e,t,n){"use strict";var r;function a(e){return!!e&&e<7}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),function(e){e[e.loading=1]="loading",e[e.setVariables=2]="setVariables",e[e.fetchMore=3]="fetchMore",e[e.refetch=4]="refetch",e[e.poll=6]="poll",e[e.ready=7]="ready",e[e.error=8]="error"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(281),a=function(){return{showPopout:function(e){Object(r.b)(e)},hidePopout:function(){Object(r.a)()}}}},function(e,t,n){"use strict";n.d(t,"f",(function(){return d})),n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return p})),n.d(t,"g",(function(){return h})),n.d(t,"h",(function(){return m})),n.d(t,"e",(function(){return v})),n.d(t,"b",(function(){return g})),n.d(t,"d",(function(){return b}));var r=n(9),a=n(38),i=n(5),o=n(118),c=n(2),s=n.n(c),u=n(24);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var d=Object(r.createDomain)("SelectMembers"),f=Object(a.a)({domain:d,name:"Gate"}),p=d.createEvent("handleSearch"),h=(d.createEvent("handleSubmit"),d.createEvent("setConfig")),m=d.createEvent("setSelectedMembers"),v=d.createEvent("removeSelectedMember"),g=d.createEffect({handler:function(e){var t=e.schoolId,n=e.search,r=e.options,a=e.role;return Object(u.a)("education.getSchoolMembers",{group_id:t,q:n,fields:"photo_200",role:a},function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({grouping:!1},r)).then((function(e){return e.items}))},name:"getMembersFx"}),b=o.b.prepend((function(e){return{route:i.i.SELECT_MEMBERS,routeParams:{schoolId:e}}}))},,function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return c}));var r=n(322);function a(e){var t=e.prototype.toJSON;"function"==typeof t||function(e,t){if(!Boolean(e))throw new Error(null!=t?t:"Unexpected invariant triggered.")}(0),e.prototype.inspect=t,r.a&&(e.prototype[r.a]=t)}var i=function(){function e(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}return e.prototype.toJSON=function(){return{start:this.start,end:this.end}},e}();a(i);var o=function(){function e(e,t,n,r,a,i,o){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=a,this.value=o,this.prev=i,this.next=null}return e.prototype.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},e}();function c(e){return null!=e&&"string"==typeof e.kind}a(o)},function(e,t,n){"use strict";function r(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.Grades="grades",e.Chats="chats",e.Contacts="contacts"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"h",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"g",(function(){return l}));var r=1,a=2,i=3,o=4,c=5,s=6,u=7,l=8},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r={STUDENT:1,TEACHER:2,CLASS_TEACHER:3,ADMIN:4}},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"j",(function(){return s})),n.d(t,"h",(function(){return u})),n.d(t,"i",(function(){return l})),n.d(t,"k",(function(){return f})),n.d(t,"f",(function(){return p})),n.d(t,"g",(function(){return h})),n.d(t,"e",(function(){return m}));var r=n(82);function a(e){return e?"".concat(e.number).concat(e.liter):""}function i(e){var t=a(e);return e.name?"".concat(t," · ").concat(e.name):t}function o(e,t){if(Array.isArray(e.roles_count)){var n=e.roles_count.find((function(e){return e.role===t}));if(n)return n.count}return null}function c(e,t){return e.number===t.number?e.liter===t.liter?(e.name||"").localeCompare(t.name||""):e.liter.localeCompare(t.liter):e.number-t.number}function s(e){return d(e,r.a.TEACHER)}function u(e){return d(e,r.a.CLASS_TEACHER)}function l(e){return d(e,r.a.STUDENT)}function d(e,t){return!!Array.isArray(e.roles)&&e.roles.some((function(e){return e.role===t}))}var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.some((function(e){return(e.roles||[]).some((function(e){return e.role>r.a.STUDENT}))}))},p=function(e){return 0===(null==e?void 0:e.length)?null:e.some((function(e){return s(e)}))?r.a.TEACHER:r.a.STUDENT},h=function(e){return e.map((function(e){return e.id})).join(",")},m=function(e){var t=e.flatMap((function(e){return e.roles})).find((function(e){return e.role_description}));return t?t.role_description:""}},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(2),a=n.n(r),i=n(12),o=n.n(i),c=n(326),s=n(267),u=n(46),l=n(24),d=n(42),f=n(23),p=["getAccessTokenExpires","getAccessToken","requestAccessToken"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var m=function(){var e=Object(l.b)().apiRequest,t=Object(c.b)(),n=t.getAccessTokenExpires,r=t.getAccessToken,i=t.requestAccessToken,m=o()(t,p),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.force,a=n();return t||a-Date.now()<6e4?i().then((function(){return r()})):Promise.resolve(r())},g=function(){return e("auth.getSuperAppToken",{subject:"education_calendar"}).then((function(e){var t=e.token;return Object(d.c)(f.s,t),t}))};return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({listenReauth:function(){new s.a({name:"sak_unauthorized",origin:"https://".concat(u.d.mvk_host),onMessage:function(e){return"sak:reauth"===e?v({force:!0}).then((function(e){return{accessToken:e}})):null}})},getAsyncAccessToken:v,getAccessTokenExpires:n,getAccessToken:r,getCalendarToken:function(){return Object(d.a)(f.s)},requestCalendarToken:g,requestAccessToken:function(){return i().then((function(){return g()}))}},m)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u}));var r=n(0),a=n(92),i=n(13),o=n(28),c=n(153),s=function(e){var t=Object(o.b)().searchFilters,n=Object(o.a)(),s=Object(r.useRef)(null),u=Object(r.useRef)(null),l=e?(null==t?void 0:t.id)===e?t:null:t;return Object(r.useEffect)((function(){null!=l&&l.values&&(u.current&&Object(a.a)(s.current)&&(Object(i.t)(u.current,l.values)||s.current()),u.current=l.values)}),[l]),{searchFilters:l,searchFiltersValues:(null==l?void 0:l.values)||null,setFilterValues:function(e){n(Object(c.c)(e))},updateFilterValues:function(e){n(Object(c.e)(e))},setFiltersChangeHandler:function(e){s.current=e},clearSearchFilters:function(){n(Object(c.d)(null))}}},u=function(e,t){var n=Object(o.b)().searchFilters,a=Object(o.a)(),i=function(t,n){var r=t.reduce((function(e,t){return e[t.name]=t.defaultValue,e}),{});a(Object(c.d)({id:e,values:null!=n?n:r,filters:t}))};return Object(r.useEffect)((function(){n&&n.id===e||!t||i(t)}),[n]),{updateSearchFilters:i}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}));var r=n(52),a=r.a.createStore({},{name:"actions/selectedGradesMap"}),i=r.a.createStore(!1,{name:"actions/isEditMode"})},function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return c})),n.d(t,"h",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return f}));var r=n(9),a=n(24),i=Object(r.createEffect)((function(e){return Promise.all(e.map((function(e){var t=e.id;return Object(a.a)("educationForeign.getUserSchools",{service_id:t})})))})),o=Object(r.createEffect)((function(){return Object(a.a)("education.getSchools",{from_contacts:1,extended:1})})),c=Object(r.createEffect)((function(){return Object(a.a)("education.getSchools",{extended:1})})),s=Object(r.createEffect)((function(e){var t=e.foreignSchool,n=e.service_id;return Object(a.a)("educationForeign.joinSchool",{service_id:n,foreign_school_id:t.id})})),u=Object(r.createEffect)((function(e){var t=e.foreign_id,n=e.service_id,r=e.school_id;return Object(a.a)("educationForeign.connectSchool",{service_id:n,school_id:r,foreign_school_id:t})})),l=Object(r.createEffect)((function(e){var t=e.foreignSchool,n=e.service_id,r=t.foreign_id;return Object(a.a)("educationForeign.createSchool",{service_id:n,foreign_school_id:r})})),d=Object(r.createEffect)((function(e){var t=e.school_ids;if(t.length)return Object(a.a)("educationForeign.getSchoolStatus",{school_ids:t});return Promise.resolve({statuses:[]})})),f=Object(r.createEffect)((function(e){return Object(a.a)("educationForeign.disconnectSchool",e)}))},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.CallInProgress="call_in_progress",e.CurrentCall="current_call",e.IncomingCall="incoming_call",e.OutgoingCall="outgoing_call",e.JoinCall="join_call"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(238),a=n(0),i=n(28);function o(){var e=Object(i.b)().accountInfo,t=Object(i.a)();return{accountInfo:e||{},updateAccountInfo:Object(a.useCallback)((function(e){t(Object(r.c)(e))}),[t])}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return s})),n.d(t,"i",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"d",(function(){return f})),n.d(t,"h",(function(){return p}));var r=n(9),a=n(24),i=Object(r.createEvent)(),o=Object(r.createEvent)(),c=Object(r.createEvent)(),s=Object(r.createEvent)(),u=Object(r.createEvent)(),l=Object(r.createEvent)(),d=Object(r.createEvent)(),f=Object(r.createEvent)(),p=Object(r.createEffect)((function(e){var t=e.schoolId,n=e.grades;return Object(a.a)("execute",{schoolId:t,code:"return [\n          ".concat(n.map((function(e){return"\n            [".concat(e.id,", API.education.upGrade({\n                school_id: Args.schoolId,\n                grade_id: ").concat(e.id,",\n                number: ").concat(e.number,",\n                ").concat(e.liter?'liter: "'.concat(e.liter,'",'):"","\n                ").concat(e.name?'name: "'.concat(e.name,'"'):"","\n            })]\n          ")})),"];")},{showSpinner:!0})}))},,function(e,t,n){"use strict";function r(e){return"[object Object]"===Object.prototype.toString.call(e)}function a(e){return"function"==typeof e}function i(e){return"string"==typeof e}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return i}))},,function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(7),a=n.n(r),i=(n(1028),n(0)),o=n.n(i),c=n(1),s=n(467),u=function(e){var t=e.forceHeight,n=Object(c.Pb)(),r=function(e,t){return e===c.a?window.innerHeight-2*t:96}(n,52),s=Object(i.useState)(r),u=a()(s,1)[0],l="android"===n?"large":"small";return o.a.createElement("div",{className:"PanelLoader"},o.a.createElement(c.bb,{size:l,height:t||u}))},l=Object(i.memo)(u),d=function(e){var t=e.customSpinner,n=e.isLoaded,r=e.onRetry,a=e.error,i=e.height,u=e.small,d=e.children;return!n&&u?o.a.createElement(c.bb,null):n?a?o.a.createElement(s.a,{error:a,onRetry:r}):o.a.createElement(o.a.Fragment,null,d):t||o.a.createElement(l,{forceHeight:i})},f=Object(i.memo)(d)},,function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"e",(function(){return p}));var r=n(2),a=n.n(r),i=n(9),o=n(113);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=Object(i.createStore)(null),l=Object(i.restore)(o.a,null),d=Object(i.createStore)(null),f=Object(i.createStore)({is_graduated:"0",user_id:"0"}).on(o.e,(function(e,t){return s(s({},e),t)})).reset(o.c),p=Object(i.restore)(o.b,"")},function(e,t,n){"use strict";var r,a,i,o,c,s,u,l,d,f;n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return f})),function(e){e.FULL="FULL",e.READ="READ",e.WRITE="WRITE"}(r||(r={})),function(e){e.REQUIRED="REQUIRED"}(a||(a={})),function(e){e.ACCEPTED="ACCEPTED",e.DECLINED="DECLINED",e.NEEDS_ACTION="NEEDS_ACTION",e.TENTATIVE="TENTATIVE"}(i||(i={})),function(e){e.HOLIDAYS="HOLIDAYS",e.PERSONAL="PERSONAL",e.SHARED="SHARED"}(o||(o={})),function(e){e.ACCEPTED="ACCEPTED",e.DECLINED="DECLINED",e.TENTATIVE="TENTATIVE"}(c||(c={})),function(e){e.DAILY="DAILY",e.MONTHLY="MONTHLY",e.WEEKLY="WEEKLY",e.YEARLY="YEARLY"}(s||(s={})),function(e){e.ALL="ALL",e.FOLLOWING="FOLLOWING",e.ONE="ONE"}(u||(u={})),function(e){e.ALL="ALL",e.ONE="ONE"}(l||(l={})),function(e){e.agent="agent",e.email="email",e.notify="notify",e.sms="sms"}(d||(d={})),function(e){e.FR="FR",e.MO="MO",e.SA="SA",e.SU="SU",e.TH="TH",e.TU="TU",e.WE="WE"}(f||(f={}))},,,function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"f",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"j",(function(){return c})),n.d(t,"i",(function(){return s})),n.d(t,"h",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"g",(function(){return d})),n.d(t,"d",(function(){return f}));var r=5,a=6,i=14,o=3300,c=3301,s=3302,u=3303,l=15,d=100,f=203},function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return s}));var r,a=n(9),i=n(24),o=Object(a.createEvent)(),c=Object(a.createEffect)((function(){return Object(i.a)("education.getCalendarEvents",{type:"broadcast"}).then((function(e){!function(e){r&&window.clearInterval(r);var t=function(){o(e)};e.count>0&&(r=window.setInterval(t,1e3)),t()}(e)}))})),s=Object(a.createEffect)((function(e){return Object(i.a)("education.deleteCalendarEvent",{event_id:e},{showSpinner:!0}).then((function(){return e}))}))},function(e,t,n){"use strict";n.d(t,"f",(function(){return v})),n.d(t,"g",(function(){return g})),n.d(t,"i",(function(){return b})),n.d(t,"c",(function(){return _})),n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return E})),n.d(t,"d",(function(){return O})),n.d(t,"h",(function(){return w})),n.d(t,"j",(function(){return C})),n.d(t,"e",(function(){return S}));var r=n(7),a=n.n(r),i=n(2),o=n.n(i),c=n(9),s=n(464),u=n(145),l=n(24),d=n(317),f=n(124),p=n(80);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=Object(c.createEvent)(),g=Object(c.createEvent)(),b=Object(c.createEvent)(),_=Object(c.createEvent)(),y=Object(c.createEvent)(),E=Object(c.createEvent)(),O=Object(c.createEvent)(),w=Object(c.createEvent)(),C=Object(c.createEffect)((function(e){var t=e.modalType,n=e.date,r=e.time,a=e.title,i=e.selectedListeners,o=e.errors,c="create"===t,l=Object(s.b)(n),d=Object(s.d)(Object(u.p)(r),n),f=c&&!(null!=i&&i.length),p=!a.length;if(d||l||f||p)throw m(m({},o),{},{time:d,date:l,selectedListeners:f,title:p});return e})),S=Object(c.createEffect)((function(e){var t=e.modalType,n=e.time,r=e.title,i=e.description,o=e.thumb,c=e.date,s=e.schoolId,h=e.selectedListeners,m=e.selectedSpeakers,v=e.eventId,g="create"===t,b=n&&Object(u.p)(n),_=a()(b,2),y=_[0],E=_[1],O={type:"broadcast",title:Object(d.d)(r),description:i,thumb_id:null==o?void 0:o.id,datetime_start:Object(u.i)(c,y),datetime_end:Object(u.i)(c,E,y>=E?1:0),add_reminder:0,allow_comments:0};if(g){if(O.school_id=s,m.length&&(O.speaker_ids=Object(f.a)(m)),h.length)switch(h[0].group_name){case p.a.Chats:O.chat_id=h[0].id;break;case p.a.Contacts:O.user_ids=Object(f.a)(h);break;case p.a.Grades:O.grade_ids=Object(f.a)(h)}}else O.event_id=v;var w=g?"education.addCalendarEvent":"education.editCalendarEvent";return Object(l.a)(w,O,{showSpinner:!0})}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"f",(function(){return l}));var r=n(38),a=n(52),i=Object(r.a)({name:"gradeActionsGate",domain:a.a}),o=a.a.createEvent("actions/toggleEditMode"),c=a.a.createEvent("actions/addToSelected"),s=a.a.createEvent("actions/remove"),u=a.a.createEvent("actions/selectAll"),l=a.a.createEvent("actions/unselectAll")},function(e,t,n){"use strict";n.d(t,"b",(function(){return d}));var r=n(2),a=n.n(r),i=n(57),o=n.n(i);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e){if("string"!=typeof e)return{};var t=/\?(.+)$/gi.exec(e);return(t?t[1]:e).split("&").reduce((function(e,t){var n=t.split("=");return n[1]&&(e[n[0]]=decodeURIComponent(n[1])),e}),{})}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==o()(e)||null===e)return"";var n=s({encode:!0},t);return Object.keys(e).reduce((function(t,r){var a=o()(e[r]);if("string"===a||"number"===a||"boolean"===a){var i=e[r];t.push("".concat(r,"=").concat(n.encode?encodeURIComponent(i):i))}Array.isArray(e[r])&&e[r].forEach((function(e){t.push("".concat(r,"[]=").concat(n.encode?encodeURIComponent(e):e))}));return t}),[]).join("&")}var d={parse:u,create:l};t.a={parse:u,create:l}},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.STUDENT="student",e.TEACHER="teacher",e.PARENT="parent",e.STAFF="staff",e.ADMINISTRATOR="administrator"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n.d(t,"c",(function(){return C})),n.d(t,"b",(function(){return S}));var r=n(30),a=n.n(r),i=n(31),o=n.n(i),c=n(11),s=n.n(c),u=n(33),l=n.n(u),d=n(39),f=n.n(d),p=n(34),h=n.n(p),m=n(2),v=n.n(m),g=n(0),b=n.n(g),_=n(13);function y(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:",",r=e.toString().split("."),a=[],i=r[0].length-3;i>-3;i-=3)a.unshift(r[0].slice(i>0?i:0,i+3));return r[0]=a.join(t),r.join(n)}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e>=1e9?(e/1e9).toFixed(1).replace(/\.0$/,"")+"G":e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":"".concat(e)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}var w=b.a.createContext({});function C(){return Object(g.useContext)(w)}var S=function(e){l()(n,e);var t=O(n);function n(){var e;a()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),v()(s()(e),"getLangKey",(function(t){return e.props.keys[t]||null})),v()(s()(e),"getLangNumericString",(function(t,n){var r=e.getLangKey(n),a=e.props.config;if(!r)return String(t);var i=r[1];if(t!==Math.floor(t))i=r[a.numRules.float];else for(var o=a.numRules.int,c=0;c<o.length;c++){var s=o[c];if("*"===s[0]){i=r[s[2]];break}var u=s[0]?t%s[0]:t;if(s[1]&&-1!==s[1].indexOf(u)){i=r[s[2]];break}}return i})),v()(s()(e),"getLangNumeric",(function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"%s",a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=e.getLangNumericString(t,n),o="".concat(t);return a&&(o=e.formatNumber(t)),(i||r).replace(r,o)})),v()(s()(e),"getLangWordNumeric",(function(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"%s",i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=e.getLangKey(n);return o&&Array.isArray(o)&&t<o.length?o[t]:e.getLangNumeric(t,r,a,i)})),v()(s()(e),"getLangSex",(function(t,n){var r=e.getLangKey(n);if(!Array.isArray(r))return r;var a=e.props.config.sexRules,i=r[1];if(!a)return i;for(var o=0;o<=a.length-1;o++){var c=a[o];if("*"===c[0]){i=r[c[1]];break}if(t===c[0]&&r[c[1]]){i=r[c[1]];break}}return i})),v()(s()(e),"formatNumber",(function(t,n){if(n)return E(t);var r=e.props.config;return y(t,r.numDelS,r.numDec)})),v()(s()(e),"getLangDate",(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"vkui_common_date_year_time",r=arguments.length>2?arguments[2]:void 0,a=t instanceof Date?t:new Date(1e3*t),i={hours:a.getHours(),minutes:a.getMinutes(),seconds:a.getSeconds(),day:a.getDate(),month:a.getMonth(),year:a.getFullYear()},o=(new Date).getFullYear()===i.year,c=e.getLangKey(r?"months_short_of":"months_of")[i.month],s=e.getLangKey(n)||n,u="";switch(Array.isArray(s)&&(s=s[Object(_.q)(a)?3:Object(_.s)(a)?2:Object(_.r)(a)?4:1]),e.props.langId){case 1:switch(i.hours){case 11:s=s.replace(" о "," об ");break;case 0:s=s.replace(" о "," в ")}break;case 3:u=i.hours>11?"pm":"am",i.hours=i.hours%12==0?12:i.hours%12}return String(s).replace("{hour}","".concat(i.hours)).replace("{num_hour}",Object(_.x)(i.hours)).replace("{minute}",Object(_.x)(i.minutes)).replace("{day}","".concat(i.day)).replace("{num_day}",Object(_.x)(i.day)).replace("{month}",c).replace("{year}",o?"":"".concat(i.year)).replace("{short_year}",o?"":"".concat(i.year%100)).replace("{second}",Object(_.x)(i.seconds)).replace("{am_pm}",u).trim()})),v()(s()(e),"getDateText",(function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=Math.floor(Date.now()/1e3)-t;if(r<60)return e.getLangKey("vkui_common_just_now");if(r<3600){var a=Math.floor(r/60);return e.getLangWordNumeric(a,"vkui_common_word_mins_ago","vkui_common_mins_ago")}if(r<14400){var i=Math.floor(r/3600);return e.getLangWordNumeric(i,"vkui_common_word_hours_ago","vkui_common_hours_ago")}return e.getLangDate(t,"vkui_common_date_year_time",n)})),v()(s()(e),"formatFileSize",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!t)return"";var n=1024,r=["vkui_common_size_byte","vkui_common_size_kb","vkui_common_size_mb","vkui_common_size_gb"],a=Math.floor(Math.log(t)/Math.log(n)),i=parseFloat((t/Math.pow(n,a)).toFixed(0)),o="";return o=0===a?e.getLangNumericString(i,"vkui_common_size_byte"):e.getLangKey(r[a]),"".concat(i," ").concat(o)})),v()(s()(e),"replaceVar",(function(e,t,n){var r=e.split("{".concat(t,"}"));return b.a.createElement(g.Fragment,null,r[0],n,r[1])})),v()(s()(e),"langContext",{id:e.props.langId,code:e.props.code,getLangKey:e.getLangKey,getLangNumericString:e.getLangNumericString,getLangNumeric:e.getLangNumeric,getLangWordNumeric:e.getLangWordNumeric,getLangSex:e.getLangSex,getLangDate:e.getLangDate,getDateText:e.getDateText,formatNumber:e.formatNumber,formatFileSize:e.formatFileSize,replaceVar:e.replaceVar}),e}return o()(n,[{key:"render",value:function(){return b.a.createElement(w.Provider,{value:this.langContext},this.props.children)}}]),n}(g.PureComponent);v()(S,"defaultProps",{langId:0,code:"ru",keys:{},config:{}})},function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));var r=n(7),a=n.n(r),i=n(241),o=function(e){return function(t){return"".concat(e,"-").concat(t)}},c=function(e){return"[".concat("data-test-id",'="').concat(e,'"]')},s=function(e,t,n){var r=n.reduce((function(e,t){return o(e)(t)})),a=e.reduce((function(e,t){return e[t]=o(r)(Object(i.kebabCase)(t)),e}),{}),c=t.reduce((function(e,t){return e[t]=function(e){return o(o(r)(Object(i.kebabCase)(t)))(String(e))},e}),{});return Object.assign(a,c)},u=function(e){return Object.entries(e).reduce((function(e,t){var n=a()(t,2),r=n[0],i=n[1];return e[r]="string"==typeof i?c(i):function(e){return c(i(e))},e}),{})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"f",(function(){return i})),n.d(t,"h",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"g",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"c",(function(){return d}));var r,a=n(112);function i(e){return{type:r.SET_PROFILE_SCHOOLS,data:e}}function o(e){return{type:r.UPDATE_PROFILE_ADD_SCHOOL,data:e}}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:r.RESET_PROFILE_ADD_SCHOOL,data:e}}function s(e){return{type:r.SET_PROFILE_TOP_CONTACTS,data:{items:e.map(a.g)}}}function u(e,t){return{type:r.SET_PROFILE_COMPACT,data:{profile:e,clean:t}}}function l(e){return{type:r.SET_PROFILE_SCHOOL_GRADE_REQUESTS,data:e}}function d(e){return{type:r.SET_PROFILE_CHATS_IN_STORAGE,data:e}}!function(e){e.SET_PROFILE_SCHOOLS="SET_PROFILE_SCHOOLS",e.SET_PROFILE_TOP_CONTACTS="SET_PROFILE_TOP_CONTACTS",e.SET_PROFILE_SCHOOL_GRADE_REQUESTS="SET_PROFILE_SCHOOL_GRADE_REQUESTS",e.UPDATE_PROFILE_ADD_SCHOOL="UPDATE_PROFILE_ADD_SCHOOL",e.RESET_PROFILE_ADD_SCHOOL="RESET_PROFILE_ADD_SCHOOL",e.SET_PROFILE_COMPACT="SET_PROFILE_COMPACT",e.SET_PROFILE_CHATS_IN_STORAGE="SET_PROFILE_CHATS_IN_STORAGE",e.SET_PROFILE_CONTACTS_IN_STORAGE="SET_PROFILE_CONTACTS_IN_STORAGE"}(r||(r={}))},function(e,t,n){e.exports=n(1024)},function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"f",(function(){return y})),n.d(t,"c",(function(){return E})),n.d(t,"b",(function(){return O})),n.d(t,"e",(function(){return w})),n.d(t,"d",(function(){return C}));var r,a,i=n(13),o=n(26),c=n.n(o),s=n(51),u=n(320),l=n(186),d=Object(u.b)(),f=[],p=[];function h(e){p.push(e),b()}var m,v,g=!1;function b(){g||(d?(g=!0,Object(i.a)((function(){return n.e(7).then(n.bind(null,1314))})).then((function(e){a=e,r=e.SentryBrowser,window.onerror=m,window.onunhandledrejection=v;try{!function(){var e=Object(u.a)().dsn,t=[new r.Integrations.Breadcrumbs({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0}),new a.DedupeIntegration];s.e&&t.push(new a.BrowserTracing({startTransactionOnLocationChange:!1}));r.init({dsn:e,environment:s.e?"production":s.f?"staging":"development",debug:!1,attachStacktrace:!0,maxBreadcrumbs:50,autoSessionTracking:!0,normalizeDepth:5,sampleRate:1,tracesSampleRate:.2,ignoreErrors:["AbortError","отменено","Failed to fetch","NetworkError when attempting to fetch resource.","Cancelled","Network request failed","NetworkError",/^Loading chunk(?:.*)failed/i,"window.webkit.messageHandlers.WebAppReadyToDisplay.postMessage",/^Non-Error promise rejection captured with value: Timeout(\s\(.\))?$/i],denyUrls:[/^chrome:\/\//i,/^chrome-extension:\/\//i],integrations:t,beforeBreadcrumb:a.beforeBreadcrumb,beforeSend:a.beforeSend}),r.setTags({app_name:"education",is_webview:c.a.isWebView()})}(),f.forEach((function(e){r[e.name].apply(r,e.args)}));var t=window.onerror,n=window.onunhandledrejection;p.forEach((function(e){"error"===e.type&&t?t.apply(window,e.e):"rejection"===e.type&&n&&n.apply(window,[e.r])}))}catch(e){console.error(e)}}))):Object(l.a)("warn","Sentry","Sentry is not enabled, injectSdk does nothing"))}var _=function(e,t){var n;r?r[e].apply(r,t):(n={name:e,args:t},f.push(n),(s.b||n.name.includes("capture"))&&b())};function y(){d&&(m=window.onerror,window.onerror=function(){h({type:"error",e:[].slice.call(arguments)}),m&&m.apply(window,arguments)},v=window.onunhandledrejection,window.onunhandledrejection=function(e){h({type:"rejection",r:"reason"in e?e.reason:"detail"in e&&"reason"in e.detail?e.detail.reason:e}),v&&v.apply(window,arguments)})}var E=function(e,t){_("captureException",[e,t])},O=function(e){_("addBreadcrumb",[e])},w=function(e){_("setUser",[e])},C=function(e){_("setTags",[e])}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(1),a=function(e){return e<=r.Ib.TABLET}},function(e,t,n){"use strict";n.d(t,"g",(function(){return o})),n.d(t,"f",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return f})),n.d(t,"e",(function(){return p}));var r=n(82),a=(n(216),n(83)),i=n(105);function o(e){return{firstName:e.first_name,firstNameAcc:e.first_name_acc,lastName:e.last_name,phone:e.mobile_phone,photo:e.photo_200,id:e.id,sex:e.sex,grades:e.grades,blacklistedByUser:Boolean(e.blacklisted_by_me),deactivated:e.deactivated,userTitle:e.title}}function c(e){return{firstName:e.first_name,lastName:e.last_name,phone:"",photo:e.photo_200,id:e.id}}function s(e){return e&&e.grades?Object(a.f)(e.grades):null}function u(e){var t;if(3===e.admin_level)return"vkui_edu_member_role_admin";var n=null,a=!1;return null==e||null===(t=e.grades)||void 0===t||t.forEach((function(e){var t;null==e||null===(t=e.roles)||void 0===t||t.forEach((function(t){var i=t.role;i>n&&i!==r.a.CLASS_TEACHER&&(n=i,a=e.is_graduated)}))})),a&&n===r.a.STUDENT?"vkui_edu_profile_graduated":f(n)}function l(e){return Array.from(new Set(e.map(u))).filter((function(e){return e}))}function d(e){switch(e){case i.a.ADMINISTRATOR:return"vkui_edu_member_role_admin";case i.a.PARENT:return"vkui_edu_member_role_parent";case i.a.TEACHER:return"vkui_edu_member_role_teacher";case i.a.STUDENT:return"vkui_edu_role_student";default:return""}}function f(e){switch(e){case r.a.CLASS_TEACHER:return"vkui_edu_member_role_classroom_teacher";case r.a.TEACHER:return"vkui_edu_member_role_teacher";case r.a.STUDENT:return"vkui_edu_role_student";default:return""}}function p(e,t){return e.reduce((function(e,n){return(e[n[t]]=e[n[t]]||[]).push(n),e}),{})}},function(e,t,n){"use strict";n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"d",(function(){return p}));var r=n(2),a=n.n(r),i=n(9),o=n(24);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=Object(i.createEvent)(),l=Object(i.createEvent)(),d=Object(i.createEffect)((function(e){var t=e.schoolId,n=e.params,r=e.options;return Object(o.a)("education.getSchoolMembers",s({group_id:t,fields:"photo_200"},n),s({grouping:!1},r)).then((function(e){return e.items}))})),f=Object(i.createEvent)(),p=Object(i.createEvent)()},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return A})),n.d(t,"c",(function(){return I}));var r=function(){return Object.create(null)},a=Array.prototype,i=a.forEach,o=a.slice,c=function(){function e(e,t){void 0===e&&(e=!0),void 0===t&&(t=r),this.weakness=e,this.makeData=t}return e.prototype.lookup=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.lookupArray(e)},e.prototype.lookupArray=function(e){var t=this;return i.call(e,(function(e){return t=t.getChildTrie(e)})),t.data||(t.data=this.makeData(o.call(e)))},e.prototype.getChildTrie=function(t){var n=this.weakness&&function(e){switch(typeof e){case"object":if(null===e)break;case"function":return!0}return!1}(t)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),r=n.get(t);return r||n.set(t,r=new e(this.weakness,this.makeData)),r},e}();var s=n(198);function u(){}var l=function(){function e(e,t){void 0===e&&(e=1/0),void 0===t&&(t=u),this.max=e,this.dispose=t,this.map=new Map,this.newest=null,this.oldest=null}return e.prototype.has=function(e){return this.map.has(e)},e.prototype.get=function(e){var t=this.getNode(e);return t&&t.value},e.prototype.getNode=function(e){var t=this.map.get(e);if(t&&t!==this.newest){var n=t.older,r=t.newer;r&&(r.older=n),n&&(n.newer=r),t.older=this.newest,t.older.newer=t,t.newer=null,this.newest=t,t===this.oldest&&(this.oldest=r)}return t},e.prototype.set=function(e,t){var n=this.getNode(e);return n?n.value=t:(n={key:e,value:t,newer:null,older:this.newest},this.newest&&(this.newest.newer=n),this.newest=n,this.oldest=this.oldest||n,this.map.set(e,n),n.value)},e.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},e.prototype.delete=function(e){var t=this.map.get(e);return!!t&&(t===this.newest&&(this.newest=t.older),t===this.oldest&&(this.oldest=t.newer),t.newer&&(t.newer.older=t.older),t.older&&(t.older.newer=t.newer),this.map.delete(e),this.dispose(t.value,e),!0)},e}(),d=new s.a;function f(e){var t=e.unsubscribe;"function"==typeof t&&(e.unsubscribe=void 0,t())}var p=[];function h(e,t){if(!e)throw new Error(t||"assertion failure")}function m(e){switch(e.length){case 0:throw new Error("unknown value");case 1:return e[0];case 2:throw e[1]}}var v=function(){function e(t){this.fn=t,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],this.deps=null,++e.count}return e.prototype.peek=function(){if(1===this.value.length&&!b(this))return this.value[0]},e.prototype.recompute=function(e){return h(!this.recomputing,"already recomputing"),function(e){var t=d.getValue();if(t)e.parents.add(t),t.childValues.has(e)||t.childValues.set(e,[]),b(e)?E(t,e):O(t,e)}(this),b(this)?function(e,t){C(e),d.withValue(e,g,[e,t]),function(e,t){if("function"==typeof e.subscribe)try{f(e),e.unsubscribe=e.subscribe.apply(null,t)}catch(t){return e.setDirty(),!1}return!0}(e,t)&&function(e){if(e.dirty=!1,b(e))return;y(e)}(e);return m(e.value)}(this,e):m(this.value)},e.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,_(this),C(this),f(this))},e.prototype.dispose=function(){var e=this;C(this),f(this),this.parents.forEach((function(t){t.setDirty(),S(t,e)}))},e.prototype.dependOn=function(e){e.add(this),this.deps||(this.deps=p.pop()||new Set),this.deps.add(e)},e.prototype.forgetDeps=function(){var e=this;this.deps&&(this.deps.forEach((function(t){return t.delete(e)})),this.deps.clear(),p.push(this.deps),this.deps=null)},e.count=0,e}();function g(e,t){e.recomputing=!0,e.value.length=0;try{e.value[0]=e.fn.apply(null,t)}catch(t){e.value[1]=t}e.recomputing=!1}function b(e){return e.dirty||!(!e.dirtyChildren||!e.dirtyChildren.size)}function _(e){e.parents.forEach((function(t){return E(t,e)}))}function y(e){e.parents.forEach((function(t){return O(t,e)}))}function E(e,t){if(h(e.childValues.has(t)),h(b(t)),e.dirtyChildren){if(e.dirtyChildren.has(t))return}else e.dirtyChildren=p.pop()||new Set;e.dirtyChildren.add(t),_(e)}function O(e,t){h(e.childValues.has(t)),h(!b(t));var n,r,a,i=e.childValues.get(t);0===i.length?e.childValues.set(t,t.value.slice(0)):(n=i,r=t.value,(a=n.length)>0&&a===r.length&&n[a-1]===r[a-1]||e.setDirty()),w(e,t),b(e)||y(e)}function w(e,t){var n=e.dirtyChildren;n&&(n.delete(t),0===n.size&&(p.length<100&&p.push(n),e.dirtyChildren=null))}function C(e){e.childValues.size>0&&e.childValues.forEach((function(t,n){S(e,n)})),e.forgetDeps(),h(null===e.dirtyChildren)}function S(e,t){t.parents.delete(e),e.childValues.delete(t),w(e,t)}function A(e){var t=new Map,n=e&&e.subscribe;function r(e){var r=d.getValue();if(r){var a=t.get(e);a||t.set(e,a=new Set),r.dependOn(a),"function"==typeof n&&(f(a),a.unsubscribe=n(e))}}return r.dirty=function(e){var n=t.get(e);n&&(n.forEach((function(e){return e.setDirty()})),t.delete(e),f(n))},r}var k=new c("function"==typeof WeakMap);function j(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return k.lookupArray(e)}var T=new Set;function I(e,t){void 0===t&&(t=Object.create(null));var n=new l(t.max||Math.pow(2,16),(function(e){return e.dispose()})),r=t.keyArgs,a=t.makeCacheKey||j;function i(){var i=a.apply(null,r?r.apply(null,arguments):arguments);if(void 0===i)return e.apply(null,arguments);var o=n.get(i);o||(n.set(i,o=new v(e)),o.subscribe=t.subscribe);var c=o.recompute(Array.prototype.slice.call(arguments));return n.set(i,o),T.add(n),d.hasValue()||(T.forEach((function(e){return e.clean()})),T.clear()),c}function o(){var e=a.apply(null,arguments);if(void 0!==e)return n.get(e)}return i.dirty=function(){var e=o.apply(null,arguments);e&&e.setDirty()},i.peek=function(){var e=o.apply(null,arguments);if(e)return e.peek()},i.forget=function(){var e=a.apply(null,arguments);return void 0!==e&&n.delete(e)},i}},function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(2),a=n.n(r),i=n(0),o=n(112),c=n(108),s=n(237),u=n(28),l=n(89),d=n(24),f=n(83),p=n(130),h=n(162);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=null;function b(){var e=Object(d.b)().apiRequest,t=Object(u.b)(),n=t.accountInfo,r=t.profileSchools,a=Object(u.a)(),m=Object(l.a)().updateAccountInfo,b=(null==n?void 0:n.id)||null,_=null!==r,y=function(e){var t=e.map((function(e){return{id:e.id,name:e.name,organization_type:null==e?void 0:e.organization_type}}));a(Object(s.c)(t))},E=Object(i.useCallback)((function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.reload,s=n.showSpinner;if(!i&&_)return Promise.resolve(r);g=null;var u={user_id:b,extended:!0,fields:"city,country"};return e("education.getSchools",u,{grouping:!1,showSpinner:s,signal:t}).then((function(e){var t=e.items,n=t.map((function(e){return v(v({},e),{},{isTeacherInSchool:Object(f.k)(e.grades)})})),r=t[0],i=Object(o.b)(r);return Object(h.a)((function(){a(Object(c.f)(n)),y(t),i&&m({firstRole:i})})),n})).catch((function(e){throw g=e,e}))}),[e,a,b]),O=Object(p.a)({requestFn:E,deps:[b]});return{loaded:_,error:g,profileSchools:r,getProfileSchools:O}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return l}));var r=n(22);function a(e){return new r.c((function(t){t.error(e)}))}var i=n(36);var o=function(e,t,n){var r=new Error(n);throw r.name="ServerError",r.response=e,r.statusCode=e.status,r.result=t,r};function c(e){for(var t=["query","operationName","variables","extensions","context"],n=0,r=Object.keys(e);n<r.length;n++){var a=r[n];if(t.indexOf(a)<0)throw new i.a(26)}return e}var s=n(16);function u(e,t){var n=Object(s.a)({},e);return Object.defineProperty(t,"setContext",{enumerable:!1,value:function(e){n="function"==typeof e?Object(s.a)(Object(s.a)({},n),e(n)):Object(s.a)(Object(s.a)({},n),e)}}),Object.defineProperty(t,"getContext",{enumerable:!1,value:function(){return Object(s.a)({},n)}}),t}function l(e){var t={variables:e.variables||{},extensions:e.extensions||{},operationName:e.operationName,query:e.query};return t.operationName||(t.operationName="string"!=typeof t.query?Object(r.s)(t.query)||void 0:""),t}},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.navigation="type_edu_navigation_item",e.messenger="type_edu_messenger_item",e.platformCalls="type_edu_platform_calls_item",e.registration="type_edu_registration_item",e.documents="type_edu_documents_item",e.articles="type_edu_articles_item",e.usersSchools="type_edu_users_schools_item"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n(9),a=n(5),i=Object(r.createEffect)(a.d.closeModal),o=Object(r.createEffect)((function(e){var t=e.route,n=e.routeParams;return a.d.go(t,n)}))},function(e,t,n){"use strict";n.d(t,"d",(function(){return w})),n.d(t,"g",(function(){return C})),n.d(t,"c",(function(){return S})),n.d(t,"e",(function(){return A})),n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return j})),n.d(t,"f",(function(){return T}));var r=n(12),a=n.n(r),i=n(2),o=n.n(i),c=n(276),s=n(37),u=n(277);var l,d=n(1344),f=n(1167),p=n(67),h=n(97),m=n(175),v=n.n(m),g=["payload","recurrence"];function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=(l={},o()(l,h.d.MO,p.e.MONDAY),o()(l,h.d.TU,p.e.TUESDAY),o()(l,h.d.WE,p.e.WEDNESDAY),o()(l,h.d.TH,p.e.THURSDAY),o()(l,h.d.FR,p.e.FRIDAY),o()(l,h.d.SA,p.e.SATURDAY),o()(l,h.d.SU,p.e.SUNDAY),l),E=function(e){return e.freq===h.c.MONTHLY?p.c.FOUR_WEEKS:e.freq===h.c.WEEKLY&&3===e.interval?p.c.THREE_WEEKS:e.freq===h.c.WEEKLY&&2===e.interval?p.c.TWO_WEEKS:p.c.WEEK},O=function(e){return{frequency:E(e),week_days:(e.weekdays||[]).map((function(e){return y[e.day]})),until:e.until,repeats:e.count}},w=function(e){var t;return!v()((null==e?void 0:e.payload)&&(null==e||null===(t=e.payload)||void 0===t?void 0:t.type))},C=function(e){var t,n,r=e.payload,i=e.recurrence,o=a()(e,g);return _(_({},o),{},{type:null==r?void 0:r.type,creator_id:null==r?void 0:r.creator_id,school_id:(null==r?void 0:r.school_id)||null,grade_ids:null!=r&&null!==(t=r.grade_ids)&&void 0!==t&&t.length?r.grade_ids:null,user_ids:null!=r&&null!==(n=r.user_ids)&&void 0!==n&&n.length?r.user_ids:null,chat_id:(null==r?void 0:r.chat_id)||null,lesson_theme:null==r?void 0:r.lesson_theme,id:o.uid,calendar_id:o.calendar.uid,recurrence:i?O(i):null,recurrence_id:o.recurrenceID||null,full_title:(null==r?void 0:r.full_title)||null})},S=function(e,t){return{seconds:function(e,t,n){Object(s.a)(2,arguments);var r=Object(c.a)(e,t)/1e3;return Object(u.a)(null==n?void 0:n.roundingMethod)(r)}(e,t)%60,minutes:Object(d.a)(e,t)%60,hours:Object(f.a)(e,t)}},A=function(e){return e.creator_id||null},k=function(e,t,n){if(n===A(e))return!0;var r=e.access,a=e.school_id,i=e.chat_id;return r===h.a.FULL||!(!a||!v()(i))&&(t===p.g.TEACHER&&e.access===h.a.WRITE)},j=function(e,t,n){if(n===A(e))return!0;var r=e.type,a=e.chat_id;switch(r){case p.d.CLASS:return t===p.g.TEACHER||e.access===h.a.FULL;case p.d.MEETING:return e.access===h.a.FULL;case p.d.OTHER:return t===p.g.TEACHER&&v()(a)||e.access===h.a.FULL;default:return!1}},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.participants&&e.full_title||e.title}},function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return d}));var r=n(51),a=n(92),i=function(){return window["__vkLangs__".concat(r.a,"__")]},o=function(){var e;return null===(e=i())||void 0===e?void 0:e.result};var c,s=function(e,t){var n=o();return n&&Object(a.b)(n.keys)&&n.keys[e]||t},u=function(){return Boolean(i())},l=function(){return c=null==c?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();function t(t,n){e.onLoad=function(n){e.result=n,window.VKLang=n,t(n)},e.onError=function(t){e.error=t,n(t)}}return new Promise((function(n,r){return e?e.result?n(e.result):e.error?r(e.error):void t(n,r):n(void 0)})).catch((function(){return!r.e&&console.log("[force load langs]",e.url),e.load(),new Promise((function(e,n){return t(e,n)}))}))}():c};function d(){var e;return u()?o()?null===(e=o())||void 0===e?void 0:e.code:"loading":"undefined"}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return c}));var r,a=n(23),i=n(20);function o(e){(window._tmr||(window._tmr=[])).push({id:a.I,type:"reachGoal",goal:e})}function c(e,t){switch(e){case i.c.MAC:o(t?r.DownloadMacAuto:r.DownloadMacClick);break;case i.c.LINUX:o(t?r.DownloadLinuxAuto:r.DownloadLinuxClick);break;case i.c.WINDOWS:o(t?r.DownloadWindowsAuto:r.DownloadWindowsClick)}}!function(e){e.DownloadMacClick="mt_download_mac_client_click",e.DownloadWindowsClick="mt_download_windows_client_click",e.DownloadLinuxClick="mt_download_linux_client_click",e.DownloadMacAuto="mt_download_mac_client_auto",e.DownloadWindowsAuto="mt_download_windows_client_auto",e.DownloadLinuxAuto="mt_download_linux_client_auto",e.DownloadIOSClick="mt_download_ios_app_click",e.DownloadAndroidClick="mt_download_android_app_click",e.DownloadInstructionClick="mt_download_instruction_click",e.RegistrationButtonClick="mt_registration_button_click"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var r=n(16),a=n(22);function i(e){return e.hasOwnProperty("graphQLErrors")}var o=function(e){function t(n){var r,i,o=n.graphQLErrors,c=n.networkError,s=n.errorMessage,u=n.extraInfo,l=e.call(this,s)||this;return l.graphQLErrors=o||[],l.networkError=c||null,l.message=s||(r=l,i="",Object(a.B)(r.graphQLErrors)&&r.graphQLErrors.forEach((function(e){var t=e?e.message:"Error message not found.";i+=t+"\n"})),r.networkError&&(i+=r.networkError.message+"\n"),i=i.replace(/\n$/,"")),l.extraInfo=u,l.__proto__=t.prototype,l}return Object(r.c)(t,e),t}(Error)},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(9),a=Object(r.createStore)(null)},function(e,t,n){"use strict";n.d(t,"f",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return h}));var r=n(80),a=n(493),i=n(1169),o=n(674),c=n(1165),s=n(145);function u(e){return e.map((function(e){return{id:e.id,first_name:e.firstName||e.first_name,last_name:e.lastName||e.last_name,photo_100:e.photo||(null==e?void 0:e.photo_100),photo_200:e.photo||(null==e?void 0:e.photo_200),group_name:r.a.Contacts,description:null==e?void 0:e.title}}))}var l=function(e){return e.map((function(e){return{id:e.id,first_name:e.title,last_name:"",photo_100:e.photo,photo_200:e.photo,letters:e.title[0].toUpperCase(),color:Object(a.b)(e.id),group_name:r.a.Chats}}))},d=function(e){return e.map((function(e){return{id:e.id,first_name:"".concat(e.number).concat(e.liter)+(e.name?" · ".concat(e.name):""),last_name:"",letters:"".concat(e.number).concat(e.liter),color:e.color,group_name:r.a.Grades}}))},f=function(e){return e.map((function(e){return e.id})).join(",")},p=function(e){var t=Object(i.a)(new Date(e.date_from)),n=Object(s.g)(t),r=Object(o.a)(new Date,{start:new Date(e.date_from),end:new Date(e.date_to)}),a=n<=15&&n>0||r,u=Object(c.a)(new Date,new Date(e.date_to));return{eventId:e.id,schoolId:e.school_id,title:e.title,dateTimeStart:e.date_from,dateTimeEnd:e.date_to,creatorId:e.creator_id,speakersIds:e.speaker_ids,listenersIds:e.user_ids,addReminder:e.add_reminder,allowComments:e.allow_comments,description:e.description||"",thumb:e.thumb,eventChat:e.event_chat,chat:e.chat?e.chat:void 0,grades:e.grades,liveVideo:e.live_video,isFinished:u,canDisplay:a,isInProgress:r,minutesToStart:n}},h=function(e){return e.map(p)}},function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return s}));var r=n(51),a=n(20),i=n(155),o=function(e){window.gtag&&r.e&&window.gtag("event",e)},c=function(e){switch(e){case a.c.MAC:return void o(i.a.DownloadMacOS);case a.c.LINUX:return void o(i.a.DownloadLinux);default:return void o(i.a.DownloadWindows)}},s=function(e){switch(e){case a.c.IOS:return void o(i.a.DownloadIOS);case a.c.ANDROID:case a.c.ANDROID_HUAWEI:return void o(i.a.DownloadAndroid)}}},function(e,t,n){"use strict";var r;function a(e){return{type:r.SET_CALLS,data:e}}function i(e){return{type:r.SET_CALLS_LIB,data:e}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),function(e){e.SET_CALLS="SET_CALLS",e.SET_CALLS_LIB="SET_CALLS_LIB"}(r||(r={}))},function(e,t,n){"use strict";var r=n(6),a=n.n(r),i=n(12),o=n.n(i),c=n(0),s=n.n(c),u=n(1),l=n(106),d=(n(1029),["pageTitle","viewWidth"]);t.a=Object(u.Qb)((function(e){var t=Object(l.c)().getLangKey,n=e.pageTitle,r=e.viewWidth,i=o()(e,d),f=r>=u.Ib.TABLET;return Object(c.useEffect)((function(){var r,a=t("vkui_edu_app_title");n?document.title="".concat(n," — ").concat(a):null!==(r=e.children)&&void 0!==r&&r.toString()?document.title="".concat(e.children.toString()," — ").concat(a):document.title=a}),[n,e.children]),e.invisible?null:s.a.createElement(s.a.Fragment,null,s.a.createElement(u.U,a()({className:Object(u.Lb)({"Header--leftAlign":f})},i)))}),{viewWidth:!0})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(6),a=n.n(r),i=n(12),o=n.n(i),c=n(0),s=n.n(c),u=["Component","children"],l=function(e){var t=e.Component,n=e.children,r=o()(e,u);return s.a.createElement(t,a()({},r,{dangerouslySetInnerHTML:{__html:n}}))};l.defaultProps={Component:"span"}},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(6),a=n.n(r),i=n(7),o=n.n(i),c=n(12),s=n.n(c),u=n(0),l=n.n(u),d=n(1),f=n(104),p=n(267),h=(n(1014),["className","src","isLoadedCallback","updateKey","autoplay"]),m=function(e){var t=e.className,n=e.src,r=e.isLoadedCallback,i=e.updateKey,c=e.autoplay,m=s()(e,h),v=Object(u.useState)(!0),g=o()(v,2),b=g[0],_=g[1],y=Object(u.useRef)(null),E=Object(u.useRef)(""),O=function(){_(!1),r&&r(!0)},w=function(){var e={_sak_embed_origin:"https://".concat(location.host),_sak_embed_name:"sak_embedded_popup"};c&&(e.autoplay=1);var t=f.b.create(e),r=n.includes("?")?"&":"?";E.current="".concat(n).concat(r).concat(t)};if(!E.current){w();var C=n.match(/(https:\/\/[^\/]+)/);y.current=new p.a({name:"sak_embedded_popup",origin:C?C[1]:"",onMessage:function(e){"ready"===e&&O()}})}return Object(u.useEffect)((function(){_(!0),w()}),[i,c]),Object(u.useEffect)((function(){return function(){y.current.destroy(),y.current=void 0}}),[]),l.a.createElement(l.a.Fragment,null,b&&l.a.createElement(d.bb,null),l.a.createElement("iframe",a()({key:i,className:Object(d.Lb)("PopoutContainerIframe",t),style:{display:b?"none":""},onLoad:O,src:E.current},m)))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(21),a=n.n(r),i=n(0),o=n(13),c=function(e){var t=e.requestFn,n=e.abortStub,r=e.deps,c=void 0===r?[]:r,s=Object(i.useRef)(null),u=Object(i.useRef)(null),l=Object(i.useRef)(null),d=Object(i.useRef)(c);return Object(i.useCallback)((function(){for(var e,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return null!==u.current&&Object(o.t)(l.current,a)&&Object(o.t)(d.current,c)||(!1===(null===(e=s.current)||void 0===e?void 0:e.signal.aborted)&&s.current.abort(),s.current=new AbortController,l.current=a,d.current=c,u.current=t.apply(void 0,[s.current.signal].concat(a)).catch((function(e){if("AbortError"===e.name)return n;throw e})).finally((function(){u.current=null}))),u.current}),[t].concat(a()(c)))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c}));var r=n(390),a=n(398),i=Object(r.a)((function(e){var t=Object(a.a)();return{ownerId:e.ownerId,canManage:e.canManage,fileList:t}})),o=i.hook,c=i.Provider},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return c}));var r=n(9),a=n(24),i=Object(r.createEffect)((function(){return Object(a.a)("educationForeign.getServiceList",{host:window.location.origin+window.location.pathname})})),o=Object(r.createEvent)(),c=Object(r.createEffect)((function(e){return e}))},,,function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(1),o=(n(1013),n(673));t.a=function(e){var t=e.children,n=e.onClose,r=e.dynamic,c=e.title,s=e.containerDataTestId,u=e.closeBtnDataTestId;return a.a.createElement(i.eb,{className:"PopoutContainer",onClick:n,hasMask:!0,"data-test-id":s},a.a.createElement("div",{className:Object(i.Lb)("PopoutContainer__wrap",{"PopoutContainer__wrap--dynamic":r})},a.a.createElement("div",{className:"PopoutContainer__in"},a.a.createElement("div",{className:"PopoutContainer__mobile-header"},a.a.createElement("div",{className:"PopoutContainer__mobile-header-in"},c),a.a.createElement(o.a,{className:"PopoutContainer__mobile-header-close",onClick:n})),t),a.a.createElement("div",{className:"PopoutContainer__close",onClick:n,"data-test-id":u},a.a.createElement(o.a,null))))}},function(e,t,n){"use strict";var r,a,i,o,c,s;n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"f",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return s})),function(e){e.AUDIO="ok_audio",e.AUDIO_TO_VIDEO="ok_video",e.VIDEO="ok_started_as_video",e.GROUP_AUDIO="group_audio",e.GROUP_AUDIO_TO_VIDEO="group_video",e.GROUP_VIDEO="group_started_as_video"}(r||(r={})),function(e){e.SUCCESS="success",e.FAIL="fail"}(a||(a={})),function(e){e.REMOTE_NO_CONNECT="push_not_delivered",e.REMOTE_FAILED_ACCEPT="cant_connect",e.REMOTE_DECLINE="declined_remote",e.LOCAL_DECLINE="declined_local",e.REMOTE_TIMEOUT="declined_timeout",e.REMOTE_BUSY="busy",e.CONNECTION_LOST="lost_connection"}(i||(i={})),function(e){e.CONVO_HEADER="im_header",e.CONVO_SNIPPET="im_message",e.CONVO_LIST="im_create",e.CONVO_JOIN_SNIPPET="im_join_message",e.CONVO_JOIN_HEADER="im_join_header",e.CONVO_JOIN_BANNER="im_join_header",e.FRIENDS_LIST="friends_list",e.LINK_JOIN_SNIPPET="join_deeplink",e.LINK_JOIN_PAGE="join_deeplink",e.PROFILE="profile",e.FAST_CHAT="fast_chat",e.HISTORY="history",e.HISTORY_FRIENDS_LIST="history_friends_list",e.HISTORY_CREATE="history_create"}(o||(o={})),function(e){e.OUTGOING_CALL_STARTED_VIDEO="OutgoingCallStartedVideo",e.OUTGOING_CALL_STARTED_AUDIO="OutgoingCallStartedAudio",e.OUTGOING_CALL_ADD_PARTICIPANTS_SENT="OutgoingCallAddParticipantsSent",e.OUTGOING_CALL_REMOTE_RINGING="OutgoingCallRemoteRinging",e.OUTGOING_CALL_ACCEPTED_REMOTELY="OutgoingCallAcceptedRemotely",e.OUTGOING_CALL_FAILED="OutgoingCallFailed",e.OUTGOING_CALL_COMPLETED="OutgoingCallCompleted",e.INCOMING_CALL_RECEIVED="IncomingCallReceived",e.INCOMING_CALL_ACCEPTED="IncomingCallAccepted",e.CALL_DECLINED_OR_HANGED_LOCALLY="CallDeclinedOrHangedLocally",e.CALL_DECLINED_OR_HANGED_REMOTELY="CallDeclinedOrHangedRemotely",e.CALL_CONNECTED="CallConnected",e.CALL_DISCONNECTED="CallDisconnected",e.VIDEO_ENABLED="VideoEnabled",e.VIDEO_DISABLED="VideoDisabled",e.RELAY_CONNECTION_ESTABLISHED="RelayConnectionEstablished",e.USER_FEEDBACK_RECEIVED="UserFeedbackReceived",e.SYSTEM_STAT="SystemStat",e.GROUP_CALL_JOINED="GroupCallJoined",e.HAND_RAISED="HandRaised",e.HAND_LOWERED="HandLowered",e.SCREEN_SHARING_STARTED="ScreenSharingStarted",e.SCREEN_SHARING_STOPPED="ScreenSharingStopped",e.ALL_MICS_DISABLED="AllMicsDisabled",e.MIC_OFF_WHILE_TALKING_ALERT="MicOffWhileTalkingAlert",e.MIC_OFF_WHILE_TALKING_ENABLE_CLICK="MicOffWhileTalkingEnableClick",e.VIDEO_DISABLED_DUE_TO_BAD_CONNECTION_ALERT="VideoDisabledDueToBadConnectionAlert",e.ALL_MICS_AND_VIDEO_DISABLED="AllMicsAndVideoDisabled",e.USER_MICS_AND_VIDEO_DISABLED="UserMicsAndVideoDisabled",e.ASK_ALL_TO_UNMUTE="AskAllToUnmute",e.ASK_USER_TO_UNMUTE="AskUserToUnmute",e.ASSIGN_ADMIN="AssignAdmin",e.RETRIEVE_ADMIN="RetrieveAdmin",e.ADMIN_PIN="AdminPin",e.ADMIN_UNPIN="AdminUnpin",e.VIRTUAL_BACKGROUND_SELECTED="VirtualBackgroundSelected",e.VIRTUAL_BACKGROUND_DISABLED="VirtualBackgroundDisabled",e.CUSTOM_VIRTUAL_BACKGROUND_SELECTED="CustomVirtualBackgroundSelected",e.CUSTOM_VIRTUAL_BACKGROUND_ADDED="CustomVirtualBackgroundAdded",e.CUSTOM_VIRTUAL_BACKGROUND_DELETED="CustomVirtualBackgroundDeleted"}(c||(c={})),function(e){e[e.ONCE=0]="ONCE",e[e.PERMANENT=1]="PERMANENT"}(s||(s={}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return s}));var r=n(0),a=n.n(r),i=n(36),o=new(n(22).h?WeakMap:Map);function c(){var e=o.get(a.a.createContext);return e||((e=a.a.createContext({})).displayName="ApolloContext",o.set(a.a.createContext,e)),e}var s=function(e){var t=e.client,n=e.children,r=c();return a.a.createElement(r.Consumer,null,(function(e){return void 0===e&&(e={}),t&&e.client!==t&&(e=Object.assign({},e,{client:t})),Object(i.b)(e.client,28),a.a.createElement(r.Provider,{value:e},n)}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return j}));var r=n(6),a=n.n(r),i=n(12),o=n.n(i),c=n(30),s=n.n(c),u=n(31),l=n.n(u),d=n(11),f=n.n(d),p=n(33),h=n.n(p),m=n(39),v=n.n(m),g=n(34),b=n.n(g),_=n(2),y=n.n(_),E=n(0),O=n.n(E),w=n(15),C=n.n(w),S=n(13),A=["alignment","value","onChange","initialValue","className","isControlledOutside"];function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b()(e);if(t){var a=b()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return v()(this,n)}}var j=function(e){h()(n,e);var t=k(n);function n(e){var r;return s()(this,n),r=t.call(this,e),y()(f()(r),"onChange",(function(e){r.isControlledOutside||r.setState({value:e.target.value}),r.props.onChange&&r.props.onChange(e)})),y()(f()(r),"getRef",(function(e){r.element=e})),y()(f()(r),"onFocus",(function(e){r.props.onFocus&&r.props.onFocus(e)})),void 0!==e.value||e.isControlledOutside?r.isControlledOutside=!0:r.state={value:e.initialValue||""},r}return l()(n,[{key:"render",value:function(){var e=this.props,t=e.alignment,n=e.value,r=(e.onChange,e.initialValue,e.className),i=(e.isControlledOutside,o()(e,A)),c={"Input--left":"left"===t,"Input--center":"center"===t,"Input--right":"right"===t};return O.a.createElement("input",a()({},i,{className:palettePrefix(Object(S.c)("Input",c,r)),ref:this.getRef,value:this.isControlledOutside?n:this.state.value,onChange:this.onChange,onFocus:this.onFocus}))}}]),n}(O.a.Component);j.propTypes={className:C.a.string,type:C.a.oneOf(["text","password","date","datetime-local","time","month","email","number","tel","url","hidden"]),alignment:C.a.oneOf(["left","center","right"]),value:C.a.oneOfType([C.a.string,C.a.number]),initialValue:C.a.string,onChange:C.a.func,isControlledOutside:C.a.bool,onFocus:C.a.func},j.defaultProps={type:"text",initialValue:"",alignment:"left"}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return c}));var r,a=n(36);!function(e){e[e.Query=0]="Query",e[e.Mutation=1]="Mutation",e[e.Subscription=2]="Subscription"}(r||(r={}));var i=new Map;function o(e){var t;switch(e){case r.Query:t="Query";break;case r.Mutation:t="Mutation";break;case r.Subscription:t="Subscription"}return t}function c(e){var t,n,o=i.get(e);if(o)return o;Object(a.b)(!!e&&!!e.kind,34);var c=e.definitions.filter((function(e){return"FragmentDefinition"===e.kind})),s=e.definitions.filter((function(e){return"OperationDefinition"===e.kind&&"query"===e.operation})),u=e.definitions.filter((function(e){return"OperationDefinition"===e.kind&&"mutation"===e.operation})),l=e.definitions.filter((function(e){return"OperationDefinition"===e.kind&&"subscription"===e.operation}));Object(a.b)(!c.length||s.length||u.length||l.length,35),Object(a.b)(s.length+u.length+l.length<=1,36),n=s.length?r.Query:r.Mutation,s.length||u.length||(n=r.Subscription);var d=s.length?s:u.length?u:l;Object(a.b)(1===d.length,37);var f=d[0];t=f.variableDefinitions||[];var p={name:f.name&&"Name"===f.name.kind?f.name.value:"data",type:n,variables:t};return i.set(e,p),p}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(9),a=Object(r.createStore)({items:[],count:0,loading:!0,isError:!1})},function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return m}));var r,a,i=n(2),o=n.n(i),c=n(9),s=n(5);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=s.d.getState(),f=Object(s.g)(d.page),p={replace:!1},h={activeView:f,activePanels:o()({},f,d.page),activeModal:d.modal,history:o()({},f,[d.page]),params:l(l({},s.o.reduce((function(e,t){return e[t.name]={},e}),{})),{},(r={},o()(r,d.page,d.params),o()(r,d.modal,d.params),r)),options:p,isolatedPanel:Object(s.f)(null===(a=d.params)||void 0===a?void 0:a.only_page)||null,miniapp:null},m=Object(c.createStore)(h)},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(0),a=n.n(r),i=n(1),o=n(26),c=n.n(o).a.isWebView(),s=function(e){return c?a.a.createElement(i.fb,{onRefresh:function(){return window.location.reload()}},e.children):a.a.createElement(a.a.Fragment,null,e.children)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(6),a=n.n(r),i=n(12),o=n.n(i),c=n(0),s=n.n(c),u=n(1),l=n(106),d=n(75),f=function(e){return function(t){var n=t.current,r=e.getBoundingClientRect(),a=document.documentElement.scrollHeight,i=r.top+r.height;return n.clientHeight+i+window.pageYOffset>a?"top":"bottom"}},p=(n(1030),["text","mode","onClick","autoclose","dataTestId"]),h=function(e){var t=e.items;return s.a.createElement("div",{className:"ActionSheetList"},t.map((function(e,t){var n=e.text,r=e.mode,i=void 0===r?"default":r,c=e.onClick,l=e.autoclose,d=void 0===l||l,f=e.dataTestId,h=o()(e,p);return s.a.createElement(u.c,a()({key:t,onClick:c,mode:i,autoclose:d,"data-test-id":f},h),n)})))},m=function(){var e=Object(l.c)().getLangKey,t=Object(d.a)(),n=t.showPopout,r=t.hidePopout;return{showActionSheet:function(t,a){var i=s.a.createElement(u.b,{popupDirection:f(t),toggleRef:t,onClose:r,iosCloseItem:s.a.createElement(u.c,{autoclose:!0,mode:"cancel"},e("vkui_common_cancel"))},s.a.createElement(h,{items:a}));n(i)}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(30),a=n.n(r),i=n(31),o=n.n(i),c=n(11),s=n.n(c),u=n(33),l=n.n(u),d=n(39),f=n.n(d),p=n(34),h=n.n(p),m=n(2),v=n.n(m),g=n(0),b=n.n(g);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}var y=function(e){l()(n,e);var t=_(n);function n(e){var r;return a()(this,n),r=t.call(this,e),v()(s()(r),"startTimeMS",0),v()(s()(r),"myTimeout",void 0),r.startTimer(),r.state={forceStartComponent:!1,isStarted:!1},r}return o()(n,[{key:"startTimer",value:function(){var e=this;this.startTimeMS=(new Date).getTime(),this.myTimeout=setTimeout((function(){e.setState({forceStartComponent:!0})}),this.props.delay)}},{key:"getRemainingTime",value:function(){return this.props.delay-((new Date).getTime()-this.startTimeMS)}},{key:"componentDidUpdate",value:function(e,t){var n=this;if(this.state.forceStartComponent&&t.forceStartComponent!==this.state.forceStartComponent)clearTimeout(this.myTimeout),this.setState({isStarted:!0});else if(e.isLoaded!==this.props.isLoaded&&this.props.isLoaded&&!this.state.isStarted){clearTimeout(this.myTimeout);var r=this.getRemainingTime();setTimeout((function(){n.setState({isStarted:!0})}),r>0?r:0)}else e.isLoaded===this.props.isLoaded||this.props.isLoaded||this.setState({isStarted:!1,forceStartComponent:!1},(function(){n.startTimer()}))}},{key:"render",value:function(){return b.a.createElement(g.Fragment,null,this.props.children(this.state.isStarted))}}]),n}(g.Component)},function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return E})),n.d(t,"m",(function(){return O})),n.d(t,"i",(function(){return w})),n.d(t,"h",(function(){return C})),n.d(t,"k",(function(){return S})),n.d(t,"d",(function(){return A})),n.d(t,"g",(function(){return k})),n.d(t,"f",(function(){return j})),n.d(t,"j",(function(){return T})),n.d(t,"c",(function(){return I})),n.d(t,"o",(function(){return P})),n.d(t,"p",(function(){return D})),n.d(t,"e",(function(){return N})),n.d(t,"n",(function(){return x})),n.d(t,"l",(function(){return R}));var r=n(7),a=n.n(r),i=n(13),o=n(44),c=n(399),s=n(56);function u(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only ".concat(arguments.length," present"));var n=Object(o.a)(e);if(!Object(c.a)(n))throw new RangeError("Invalid time value");var r=t||{},a=null==r.format?"extended":String(r.format),i=null==r.representation?"complete":String(r.representation);if("extended"!==a&&"basic"!==a)throw new RangeError("format must be 'extended' or 'basic'");if("date"!==i&&"time"!==i&&"complete"!==i)throw new RangeError("representation must be 'date', 'time', or 'complete'");var u="",l="",d="extended"===a?"-":"",f="extended"===a?":":"";if("time"!==i){var p=Object(s.a)(n.getDate(),2),h=Object(s.a)(n.getMonth()+1,2),m=Object(s.a)(n.getFullYear(),4);u="".concat(m).concat(d).concat(h).concat(d).concat(p)}if("date"!==i){var v=n.getTimezoneOffset();if(0!==v){var g=Math.abs(v),b=Object(s.a)(Math.floor(g/60),2),_=Object(s.a)(g%60,2),y=v<0?"+":"-";l="".concat(y).concat(b,":").concat(_)}else l="Z";var E=Object(s.a)(n.getHours(),2),O=Object(s.a)(n.getMinutes(),2),w=Object(s.a)(n.getSeconds(),2),C=""===u?"":"T",S=[E,O,w].join(f);u="".concat(u).concat(C).concat(S).concat(l)}return u}var l=n(37);var d=n(1342),f=n(1343),p=n(1181),h=n(1344),m=n(1168);function v(e){Object(l.a)(1,arguments);var t=Object(o.a)(e),n=t.getDay();return 0===n&&(n=7),n}var g=n(79),b=n(387);var _=n(1367),y=[0,0],E={from:"",to:""};function O(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),r=e-3600*t-60*n,a="".concat(n,":").concat(Object(i.x)(r));return t>0?"".concat(t,":").concat(a):a}var w=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=new Date(e.year,e.month-1,e.day+n,Math.floor(t/60),t%60);return u(r)},C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new Date(e.year,e.month-1,e.day+t);return u(n)},S=function(e){var t=new Date(e);return 60*function(e){Object(l.a)(1,arguments);var t=Object(o.a)(e),n=t.getHours();return n}(t)+function(e){Object(l.a)(1,arguments);var t=Object(o.a)(e),n=t.getMinutes();return n}(t)},A=function(e){var t=new Date(e);return{day:Object(d.a)(t),month:Object(f.a)(t)+1,year:Object(p.a)(t)}},k=function(e){var t,n=Object(h.a)(1e3*e,Date.now());return 0===(t=n)&&1/t==-1/0&&(n=-1),n+1},j=function(e){return Object(m.a)(new Date(e),"d MMMM",{locale:_.a})},T=function(e,t){var n=Object(m.a)(new Date(e),"HH:mm"),r=Object(m.a)(new Date(t),"HH:mm"),a=Object(m.a)(new Date(e),"EEEEEE",{locale:_.a}),i=Object(m.a)(new Date(t),"EEEEEE",{locale:_.a}),o=j(e),c=j(t);return"".concat(n," · ").concat(o,", ").concat(a," — ").concat(r," · ").concat(c,", ").concat(i)};function I(e,t){return{from:Object(m.a)(e,"HHmm"),to:Object(m.a)(t,"HHmm")}}function P(e){if(void 0===e)return E;var t=a()(e,2),n=t[0],r=t[1];return{from:0===n?"0000":"".concat(Object(i.x)(Math.floor(n/60))).concat(Object(i.x)(n%60)),to:0===r?"0000":"".concat(Object(i.x)(Math.floor(r/60))).concat(Object(i.x)(r%60))}}function D(e){return e?[60*(Number(e.from.substring(0,2))||0)+Number(e.from.slice(2)),60*(Number(e.to.substring(0,2))||0)+Number(e.to.slice(2))]:y}function N(e){return v(e)-1}function x(e,t){return function(e,t){Object(l.a)(2,arguments);var n=Object(o.a)(e),r=Object(g.a)(t),a=v(n),i=r-a;return Object(b.a)(n,i)}(e,t+1)}function R(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"long";return x(new Date,e).toLocaleDateString(t,{weekday:n})}},,function(e,t,n){"use strict";var r=n(834);e.exports=function(e){return"symbol"==typeof e?"Symbol":"bigint"==typeof e?"BigInt":r(e)}},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(6),a=n.n(r),i=n(2),o=n.n(i),c=n(12),s=n.n(c),u=n(0),l=n.n(u),d=n(1),f=n(590),p=(n(1080),n(13)),h=["values","filters","onChange"],m=function(e){var t=e.values,n=e.filters,r=e.onChange,i=s()(e,h),c=function(e){var t=e.target,n=t.name,a=t.value;r(o()({},n,a))},u=function(e){var t=e.currentTarget,n=t.name,a=t.value;r(o()({},n,a))};return l.a.createElement(d.x,a()({},i,{className:"SearchFilters__layout"}),n.map((function(e){var n=e.type,r=e.name,a=e.label,i=e.disabled,o=e.options;switch(n){case"select":return l.a.createElement(d.w,{key:r,top:a},l.a.createElement(d.mb,{name:r,value:t[r],onChange:c,disabled:i,options:o.map((function(e){return{value:e.value,label:e.label}}))}));case"radio":return l.a.createElement(d.w,{key:r,disabled:e.disabled,top:e.label},l.a.createElement(f.a,{className:"SearchFilters__radioGroup"},e.options.map((function(n){var a=n.value,i=n.label;return l.a.createElement(d.gb,{className:Object(p.c)({"SearchFilters__Radio--checked":a===t[r]}),disabled:e.disabled,key:a,name:r,checked:a===t[r],onChange:u,value:a},i)}))))}})))}},function(e,t,n){"use strict";n(603),n(604),n(605),n(606);var r=n(607);n.d(t,"execute",(function(){return r.a}));var a=n(151);n.d(t,"ApolloLink",(function(){return a.a}));var i=n(608);n.o(i,"ApolloProvider")&&n.d(t,"ApolloProvider",(function(){return i.ApolloProvider})),n.o(i,"HttpLink")&&n.d(t,"HttpLink",(function(){return i.HttpLink})),n.o(i,"useApolloClient")&&n.d(t,"useApolloClient",(function(){return i.useApolloClient})),n.o(i,"useQuery")&&n.d(t,"useQuery",(function(){return i.useQuery}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(16),a=n(36),i=n(22),o=n(116);function c(e,t){return t?t(e):i.c.of()}function s(e){return"function"==typeof e?new l(e):e}function u(e){return e.request.length<=1}!function(e){function t(t,n){var r=e.call(this,t)||this;return r.link=n,r}Object(r.c)(t,e)}(Error);var l=function(){function e(e){e&&(this.request=e)}return e.empty=function(){return new e((function(){return i.c.of()}))},e.from=function(t){return 0===t.length?e.empty():t.map(s).reduce((function(e,t){return e.concat(t)}))},e.split=function(t,n,r){var a=s(n),o=s(r||new e(c));return u(a)&&u(o)?new e((function(e){return t(e)?a.request(e)||i.c.of():o.request(e)||i.c.of()})):new e((function(e,n){return t(e)?a.request(e,n)||i.c.of():o.request(e,n)||i.c.of()}))},e.execute=function(e,t){return e.request(Object(o.a)(t.context,Object(o.d)(Object(o.e)(t))))||i.c.of()},e.concat=function(t,n){var r=s(t);if(u(r))return r;var a=s(n);return u(a)?new e((function(e){return r.request(e,(function(e){return a.request(e)||i.c.of()}))||i.c.of()})):new e((function(e,t){return r.request(e,(function(e){return a.request(e,t)||i.c.of()}))||i.c.of()}))},e.prototype.split=function(t,n,r){return this.concat(e.split(t,n,r||new e(c)))},e.prototype.concat=function(t){return e.concat(this,t)},e.prototype.request=function(e,t){throw new a.a(21)},e.prototype.onError=function(e,t){if(t&&t.error)return t.error(e),!1;throw e},e.prototype.setOnError=function(e){return this.onError=e,this},e}()},function(e,t,n){"use strict";var r;function a(e){return{type:r.SET_SCHOOL_GRADES,data:e}}function i(e){return{type:r.SET_GRADES_IN_STORAGE,data:e}}function o(e){return{type:r.SET_SCHOOL_GRADES_IN_STORAGE,data:e}}function c(e){return{type:r.SET_USER_GRADES_IN_STORAGE,data:e}}n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return c})),function(e){e.SET_SCHOOL_GRADES="SET_SCHOOL_GRADES",e.SET_SCHOOL_GRADE_EDIT_INFO="SET_SCHOOL_GRADE_EDIT_INFO",e.SET_GRADES_IN_STORAGE="SET_GRADES_IN_STORAGE",e.SET_SCHOOL_GRADES_IN_STORAGE="SET_SCHOOL_GRADES_IN_STORAGE",e.SET_USER_GRADES_IN_STORAGE="SET_USER_GRADES_IN_STORAGE"}(r||(r={}))},function(e,t,n){"use strict";var r;function a(e){return{type:r.SET_SEARCH_FILTERS,data:e}}function i(e){return{type:r.SET_SEARCH_FILTER_VALUES,data:e}}function o(e){return{type:r.UPDATE_SEARCH_FILTER_VALUES,data:e}}function c(e){return{type:r.SET_SEARCH_FILTER_MODAL_CALLBACK,data:e}}n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return c})),function(e){e.SET_SEARCH_FILTERS="SET_SEARCH_FILTERS",e.SET_SEARCH_FILTER_VALUES="SET_SEARCH_FILTER_VALUES",e.UPDATE_SEARCH_FILTER_VALUES="UPDATE_SEARCH_FILTER_VALUES",e.SET_SEARCH_FILTER_MODAL_CALLBACK="SET_SEARCH_FILTER_MODAL_CALLBACK"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return c}));var r=n(9),a=n(24),i=Object(r.createEffect)((function(e){return Object(a.a)("education.graduate",e,{showSpinner:!0})})),o=Object(r.createEvent)(),c=Object(r.createEvent)()},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.RegistrationButtonClick="registration_button_click",e.DownloadWindows="download_win",e.DownloadIOS="download_ios",e.DownloadAndroid="download_and",e.DownloadLinux="download_lin",e.DownloadMacOS="download_mac",e.DownloadInstructions="download_instructions"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return s}));var r=n(9),a=n(24),i=Object(r.createEffect)((function(){return Object(a.a)("education.getUserOnboardingStatus",{use_types:1})})),o=Object(r.createEffect)((function(e){return Object(a.a)("education.setUserOnboardingStatus",e)})),c=Object(r.createEffect)((function(e){return Object(a.a)("education.incUserOnboardingShowsCounter",{type:e})})),s=Object(r.createEvent)();Object(r.createEvent)(),Object(r.createEvent)()},function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"d",(function(){return p})),n.d(t,"c",(function(){return h})),n.d(t,"f",(function(){return m})),n.d(t,"e",(function(){return v})),n.d(t,"b",(function(){return g}));var r=n(2),a=n.n(r),i=n(7),o=n.n(i),c=n(9),s=n(90),u=n(189);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=Object(c.createStore)({}).on(s.i,(function(e,t){var n=t.reduce((function(e,t){var n=o()(t,2),r=n[0],a=n[1];return e[r]=!1===a?Object(u.a)("error","error"):Object(u.a)("valid","valid"),e}),{});return d(d({},e),n)})).on(s.b,(function(e,t){return d(d({},e),{},a()({},t,Object(u.a)()))})).on(s.e,(function(e,t){return d(d({},e),t)})),p=Object(c.createStore)({}).on(s.f,(function(e,t){return d(d({},e),{},a()({},t.id,t))})).reset(s.c),h=Object(c.createStore)([]),m=Object(c.restore)(s.h,null).reset(s.d),v=Object(c.restore)(s.h.failData,null).reset(s.d),g=Object(c.createStore)({})},function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return s}));var r=n(9),a=n(24),i=Object(r.createEvent)(),o=Object(r.createEffect)((function(e){var t=e.schoolId,n=e.searchValue;return Object(a.a)("education.getGrades",{group_id:t,q:n})})),c=Object(r.createEffect)((function(e){var t=e.schoolId,n=e.searchValue;return Object(a.a)("education.getSchoolChats",{school_id:t,membership_status:1,q:n})})),s=Object(r.createEffect)((function(e){var t=e.schoolId,n=e.searchValue;return Object(a.a)("education.getSchoolMembers",{group_id:t,q:n})}))},function(e,t,n){"use strict";function r(e){return function(t,n){var r,a=n||{};if("formatting"===(a.context?String(a.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=a.width?String(a.width):i;r=e.formattingValues[o]||e.formattingValues[i]}else{var c=e.defaultWidth,s=a.width?String(a.width):e.defaultWidth;r=e.values[s]||e.values[c]}return r[e.argumentCallback?e.argumentCallback(t):t]}}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,o=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],c=t.match(o);if(!c)return null;var s,u=c[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],d=Array.isArray(l)?i(l,(function(e){return e.test(u)})):a(l,(function(e){return e.test(u)}));s=e.valueCallback?e.valueCallback(d):d,s=n.valueCallback?n.valueCallback(s):s;var f=t.slice(u.length);return{value:s,rest:f}}}function a(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function i(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return $}));var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="newsfeed_outline_28",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 28 28",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="newsfeed_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path d="M17.59 3c2.183 0 3.233.203 4.324.786a5.543 5.543 0 012.3 2.3c.583 1.091.786 2.14.786 4.324v7.18c0 2.183-.203 3.233-.786 4.324a5.543 5.543 0 01-2.3 2.3c-1.091.583-2.14.786-4.324.786h-7.18c-2.183 0-3.233-.203-4.324-.786a5.543 5.543 0 01-2.3-2.3C3.203 20.823 3 19.774 3 17.59v-7.18c0-2.183.203-3.233.786-4.324a5.543 5.543 0 012.3-2.3C7.177 3.203 8.226 3 10.41 3h7.18zM5 11L5 17.59c0 1.881.142 2.62.55 3.38.342.641.839 1.138 1.48 1.48.76.408 1.499.55 3.38.55h7.18c1.881 0 2.62-.142 3.38-.55a3.543 3.543 0 001.48-1.48c.408-.76.55-1.499.55-3.38L22.999 11h-18zM17.59 5h-7.18c-1.881 0-2.62.142-3.38.55-.641.342-1.138.839-1.48 1.48-.286.533-.441 1.056-.509 1.97H22.96c-.068-.914-.223-1.437-.509-1.97a3.543 3.543 0 00-1.48-1.48c-.76-.408-1.499-.55-3.38-.55z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 28 28",id:l,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};p.mountIcon=f;var h=p,m=n(1331),v=n(1355),g=n(1353),b=!1;function _(){b||(Object(s.a)(new o.a({id:"users_outline_28",viewBox:"0 0 28 28",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="users_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path d="M9 15c3.997 0 7.5 1.542 7.5 4.929 0 1.774-.69 2.571-2.147 2.571H3.647c-1.458 0-2.147-.797-2.147-2.571C1.5 16.542 5.003 15 9 15zm10.5 0c3.997 0 7.5 1.542 7.5 4.929 0 1.774-.69 2.571-2.147 2.571H19a1 1 0 010-2h5.913a.83.83 0 01.042.002l.013.001.002-.015c.01-.081.024-.22.029-.427l.001-.132C25 18.095 22.513 17 19.5 17c-.428 0-.898.03-1.37.09a1 1 0 11-.256-1.983A12.87 12.87 0 0119.5 15zM9 17c-3.013 0-5.5 1.095-5.5 2.929 0 .28.017.462.03.56l.001.014.014-.001.019-.001h10.891l.013.002.002-.015c.013-.097.03-.28.03-.56C14.5 18.096 12.013 17 9 17zM19.5 5a4.25 4.25 0 014.25 4.25 4.25 4.25 0 01-4.25 4.25 4.25 4.25 0 01-4.25-4.25A4.25 4.25 0 0119.5 5zM9 5a4.25 4.25 0 014.25 4.25A4.25 4.25 0 019 13.5a4.25 4.25 0 01-4.25-4.25A4.25 4.25 0 019 5zm10.5 2a2.25 2.25 0 100 4.5 2.25 2.25 0 100-4.5zM9 7a2.25 2.25 0 100 4.5A2.25 2.25 0 109 7z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),b=!0)}var y=function(e){return Object(s.b)((function(){_()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 28 28",id:"users_outline_28",width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};y.mountIcon=_;var E=y,O=n(1360),w=!1;function C(){w||(Object(s.a)(new o.a({id:"chats_outline_28",viewBox:"0 0 28 28",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="chats_outline_28"><g fill-rule="nonzero" fill="none"><path d="M0 0h28v28H0z" /><path d="M23.706 9.662C25.171 11.114 26 12.998 26 15a7.25 7.25 0 01-.96 3.599c.101.603.393 1.519.876 2.716l.258.624.057.168.025.098a1.4 1.4 0 01-1.446 1.675c-1.908-.1-3.43-.566-4.54-1.424A9.99 9.99 0 0117 23a9.982 9.982 0 01-3.332-.566 1 1 0 01.667-1.885c.838.296 1.738.451 2.665.451a7.923 7.923 0 003.087-.615 1 1 0 011.1.218c.55.555 1.371.941 2.481 1.14l.284.047c-.574-1.456-.888-2.555-.943-3.343a1 1 0 01.153-.604A5.279 5.279 0 0024 15c0-1.454-.607-2.832-1.702-3.918a1 1 0 111.408-1.42zM11 3c4.943 0 9 3.55 9 8s-4.057 8-9 8a9.99 9.99 0 01-3.27-.544c-1.11.858-2.632 1.323-4.54 1.424a1.4 1.4 0 01-1.446-1.675l.025-.098.057-.168.133-.319c.516-1.244.84-2.209.972-2.864l.03-.157-.151-.279A7.229 7.229 0 012 11c0-4.45 4.057-8 9-8zm0 2c-3.893 0-7 2.718-7 6 0 1.007.29 1.976.838 2.843a1 1 0 01.153.604c-.05.732-.325 1.732-.824 3.036l-.119.307.284-.046c1.11-.2 1.932-.586 2.481-1.141a1 1 0 011.1-.218c.952.403 2 .615 3.087.615 3.893 0 7-2.718 7-6s-3.107-6-7-6z" fill="currentColor" /></g></symbol>'})),w=!0)}var S=function(e){return Object(s.b)((function(){C()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 28 28",id:"chats_outline_28",width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};S.mountIcon=C;var A=S,k=!1;function j(){k||(Object(s.a)(new o.a({id:"info_outline_28",viewBox:"0 0 28 28",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="info_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path d="M14 2c6.627 0 12 5.373 12 12s-5.373 12-12 12S2 20.627 2 14 7.373 2 14 2zm0 2C8.477 4 4 8.477 4 14s4.477 10 10 10 10-4.477 10-10S19.523 4 14 4zm.074 8c.237 0 .386.037.517.107.13.07.232.172.302.302.07.13.107.28.107.517v6.148c0 .237-.037.386-.107.517a.727.727 0 01-.302.302c-.13.07-.28.107-.517.107h-.148c-.237 0-.386-.037-.517-.107a.727.727 0 01-.302-.302c-.07-.13-.107-.28-.107-.517v-6.148c0-.237.037-.386.107-.517a.727.727 0 01.302-.302c.13-.07.28-.107.517-.107h.148zM14 7.6a1.4 1.4 0 110 2.8 1.4 1.4 0 010-2.8z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),k=!0)}var T=function(e){return Object(s.b)((function(){j()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 28 28",id:"info_outline_28",width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};T.mountIcon=j;var I=T,P=n(1330),D=n(1334),N=!1;function x(){N||(Object(s.a)(new o.a({id:"user_outgoing_outline_28",viewBox:"0 0 28 28",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="user_outgoing_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path d="M10.25 15c4.951 0 9.25 1.763 9.25 5.643 0 2.016-.781 2.857-2.456 2.857H3.456C1.78 23.5 1 22.66 1 20.643 1 16.763 5.299 15 10.25 15zm0 2C6.304 17 3 18.355 3 20.643c0 .89-.071.863.372.858l13.672-.001c.536 0 .456.086.456-.857 0-2.288-3.304-3.643-7.25-3.643zm12.043-9.707a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L24.585 13H18.5a1 1 0 01-.993-.883L17.5 12a1 1 0 011-1h6.085l-2.292-2.293a1 1 0 01-.083-1.32zM10 3c3.039 0 5.5 2.461 5.5 5.5S13.039 14 10 14a5.499 5.499 0 01-5.5-5.5C4.5 5.461 6.961 3 10 3zm0 2a3.499 3.499 0 00-3.5 3.5c0 1.934 1.566 3.5 3.5 3.5s3.5-1.566 3.5-3.5S11.934 5 10 5z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),N=!0)}var R=function(e){return Object(s.b)((function(){x()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 28 28",id:"user_outgoing_outline_28",width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};R.mountIcon=x;var M=R,L=n(1361),B=n(1166),F=n(26),H=n.n(F),V=n(106),U=n(279),z=n(5),G=n(188),W=n(591),q=n(48),K=n(174),Y=n(173),Z=n(85),Q=n(32),J=n(28),X=n(206),$=function(e){var t=e.schoolId,n=e.manageOnly,i=void 0!==n&&n,o=e.placeholder,c=e.showPromoCard,s=void 0!==c&&c,u=Object(V.c)().getLangKey,l=Object(J.b)(),d=l.schoolInfo,f=l.schoolInfoError,p=Object(Q.a)().go,b=Object(W.a)(t),_=b.getSchoolGradeRequests,y=b.schoolGradeRequestsCount,w=(0,Object(K.a)().isClientVersionMatches)(Y.a.NATIVE_EVENT_MODALS),C=Object(X.a)(),S=C.getOrgKeyWithPrefix,k=C.isHorizontal,j=Object(Z.a)().clearSearchFilters,T=Object(r.useCallback)((function(){z.d.getState().page!==z.j.SCHOOL_MEMBERS&&(j(),p(z.j.SCHOOL_MEMBERS))}),[]);if(Object(r.useEffect)((function(){t&&d&&d.id===t&&d.canManage&&_()}),[d,_,t]),!d&&!f)return a.a.createElement(a.a.Fragment,null,o||null);if(f||s)return a.a.createElement(G.a,null);var N={schoolId:t},x=[];if(i||(x.push([{route:z.j.SCHOOL,routeParams:N,icon:a.a.createElement(h,null),label:u("vkui_edu_school_main")},{route:z.j.SCHOOL_DOCS,routeParams:N,icon:a.a.createElement(m.a,null),label:u(S("docs"))},{route:z.j.SCHOOL_VIDEOS,routeParams:N,icon:a.a.createElement(v.a,null),label:u(S("videos"))},{route:z.j.SCHOOL_ARTICLES,routeParams:N,icon:a.a.createElement(g.a,null),label:u("vkui_edu_articles")}]),x.push([{route:z.j.SCHOOL_MEMBERS,routeParams:N,icon:a.a.createElement(E,null),label:u(S("members")),onClick:T},{route:z.j.SCHOOL_CLASSES,routeParams:N,icon:a.a.createElement(O.a,null),disabled:k,label:u("vkui_edu_school_classes")},{route:z.j.SCHOOL_CHATS,routeParams:N,icon:a.a.createElement(A,null),label:u("vkui_edu_school_public_chats")}])),d&&d.canManage){var R=[];Object(q.h)(d)&&(R.push({route:z.j.SCHOOL_EDIT,routeParams:N,icon:a.a.createElement(I,null),label:u("vkui_edu_info")}),R.push({route:z.j.SCHOOL_MESSAGES,strictCompare:!1,routeParams:N,icon:a.a.createElement(P.a,null),onClick:function(e){e.preventDefault(),H.a.isWebView()&&w?H.a.send("VKWebAppCustomMessage",{action:"showSchoolChat",payload:{peer:N.schoolId,id:N.schoolId}}):z.d.go(z.j.SCHOOL_MESSAGES,N)},label:u("vkui_edu_organization_reply_messages")})),R.push.apply(R,[{route:z.j.SCHOOL_LEADERS,routeParams:N,icon:a.a.createElement(D.a,null),label:u(S("leaders"))},{route:z.j.SCHOOL_REQUESTS,routeParams:N,icon:a.a.createElement(M,null),label:u("vkui_edu_requests"),disabled:k,counter:y},{route:z.j.SCHOOL_INVITE_LINKS,routeParams:N,icon:a.a.createElement(L.a,null),label:u("vkui_edu_invite_links")}]),x.push(R)}return i&&x.push([{route:z.j.SCHOOL_MEMBERS,routeParams:N,icon:a.a.createElement(E,null),label:u("vkui_edu_school_members")},{route:z.j.SCHOOL_CLASSES,routeParams:N,icon:a.a.createElement(O.a,null),label:u("vkui_edu_school_classes")},{route:z.j.SCHOOL_CHATS,routeParams:N,icon:a.a.createElement(B.a,null),label:u("vkui_edu_school_chats")}]),a.a.createElement(U.a,{ignoreQuery:!0,sections:x})}},function(e,t,n){"use strict";var r=n(70);n.d(t,"a",(function(){return r.unstable_batchedUpdates}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(7),a=n.n(r),i=n(0),o=n.n(i),c=n(55),s=function(){return Promise.resolve().then(n.bind(null,476)).then((function(e){return e.CallsList}))},u=function(e){var t=Object(i.useState)({render:function(){return null}}),n=a()(t,2),r=n[0],u=n[1],l=Object(c.a)().showAlertError;return Object(i.useEffect)((function(){s().then((function(e){u({render:e})}),(function(){l({})}))}),[]),o.a.createElement(r.render,e)};u.preload=s},,function(e,t){function n(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(a,i){var o=e.apply(t,r);function c(e){n(o,a,i,c,s,"next",e)}function s(e){n(o,a,i,c,s,"throw",e)}c(void 0)}))}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return s}));var r=n(52),a=r.a.createStore({},{name:"merge/newGradeInfo"}),i=r.a.createStore({},{name:"merge/gradesManagers"}),o=r.a.createStore({},{name:"merge/gradesTeachers"}),c=r.a.createStore(null,{name:"merge/checkedManagerGradeId"}),s=r.a.createStore(null,{name:"merge/checkedTeachersGradeId"})},function(e,t,n){"use strict";var r;function a(e,t){return Array.prototype.slice.call(e.target.files,0,t)}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),function(e){e.SUCCESS="success",e.LOADING="loading",e.FAILED="failed"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(0),a=n.n(r),i=(n(978),n(14)),o=n(25),c=n(1),s=function(){return a.a.createElement(c.pb,{className:"MembersListItemSkeleton",before:a.a.createElement(o.a,{shadow:!1,size:72})},a.a.createElement(i.a,{width:"200px",className:"MembersListItemSkeleton__title"}),a.a.createElement(i.a,null))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return s}));var r=n(9),a=n(247),i=n(24),o=Object(r.createEvent)(),c=Object(r.createEvent)(),s=Object(r.createEffect)((function(e){var t={broadcast_id:a.a.getState().id,text:e};return Object(i.a)("education.addBroadcastComment",t)}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return s}));var r=n(92),a=n(51),i="tokenRequested",o="tokenReceived";function c(e){if(window.performance&&window.performance.timing){var t=window.performance.timing,n=Math.max(0,Date.now()-e)||0;e=e||t.fetchStart;var c={fetchStart:t.fetchStart-e,requestStart:t.requestStart-t.fetchStart,domContentLoadedEventStart:t.domContentLoadedEventStart-t.requestStart,startTime:t.domContentLoadedEventStart-e,completeStartTime:n};if(Object(r.a)(window.performance.getEntriesByName)){var s=window.performance.getEntriesByName(o)[0],u=window.performance.getEntriesByName(i)[0];s&&u&&(c.tokenReceived=Math.floor(s.startTime-u.startTime))}return a.e||(window.vkuiTiming=c),c}return{}}function s(e){window.performance&&Object(r.a)(window.performance.mark)&&window.performance.mark(e)}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.d(t,"a",(function(){return Q}));var r=n(2),a=n.n(r),i=n(0),o=n.n(i),c=n(5),s=n(14),u=n(1),l=(n(964),n(25)),d=n(29),f=Object(u.Qb)((function(){var e=Object(u.Ob)().viewWidth,t=e<u.Ib.DESKTOP,n=Object(d.b)(e),r=o.a.createElement(o.a.Fragment,null,o.a.createElement(u.D,null,o.a.createElement(s.a,{width:"227px",height:"18px"})),o.a.createElement(u.pb,{before:o.a.createElement(l.a,{shadow:!1,size:28}),description:o.a.createElement(s.a,{width:"175px"})},o.a.createElement(s.a,{width:"211px",className:"ProfileSkeleton__contentLine1"})),o.a.createElement(u.pb,{before:o.a.createElement(l.a,{shadow:!1,size:28})},o.a.createElement(s.a,{width:"224px"})),o.a.createElement(u.ob,null),o.a.createElement(u.D,null,o.a.createElement(s.a,{width:"227px",height:"18px"})),o.a.createElement(u.pb,{before:o.a.createElement(l.a,{shadow:!1,size:28})},o.a.createElement(s.a,{width:"224px"})),o.a.createElement(u.ob,null),o.a.createElement(u.D,null,o.a.createElement(s.a,{width:"227px",height:"18px"})),o.a.createElement(u.pb,{before:o.a.createElement(l.a,{shadow:!1,size:28})},o.a.createElement(s.a,{width:"224px"}))),a=o.a.createElement(o.a.Fragment,null,o.a.createElement(u.D,{aside:o.a.createElement(s.a,{width:"96px",height:"18px"})},o.a.createElement(s.a,{width:"81px",height:"18px"})),o.a.createElement(u.pb,{before:o.a.createElement(l.a,{shadow:!1,size:48})},o.a.createElement(s.a,{width:"180px"})),o.a.createElement(u.pb,{before:o.a.createElement(l.a,{shadow:!1,size:48})},o.a.createElement(s.a,{width:"180px"})),o.a.createElement(u.pb,{before:o.a.createElement(l.a,{shadow:!1,size:48})},o.a.createElement(s.a,{width:"180px"})),o.a.createElement(u.pb,{before:o.a.createElement(l.a,{shadow:!1,size:48})},o.a.createElement(s.a,{width:"180px"})),o.a.createElement(u.pb,{before:o.a.createElement(l.a,{shadow:!1,size:48})},o.a.createElement(s.a,{width:"180px"}))),i=o.a.createElement(o.a.Fragment,null,o.a.createElement(u.ob,null),o.a.createElement(u.pb,null,o.a.createElement(s.a,{width:"82px",height:"20px"})),o.a.createElement(u.pb,null,o.a.createElement(s.a,{width:"82px",height:"20px"})));return o.a.createElement(u.C,{className:Object(u.Lb)("ProfileSkeleton",n&&"ProfileSkeleton--mobile")},o.a.createElement("div",{className:"ProfileSkeleton__head"},o.a.createElement(l.a,{shadow:!1,size:96,className:"ProfileSkeleton__avatar"}),o.a.createElement(s.a,{width:"171px",height:"18px",className:"ProfileSkeleton__headLine1"}),o.a.createElement(s.a,{width:"75px",className:"ProfileSkeleton__headLine2"}),o.a.createElement(s.a,{width:"141px",height:"36px"})),t&&a,r,n&&i)}),{viewWidth:!0}),p=(n(965),n(966),function(){return o.a.createElement(u.C,{className:"SettingsFooterSkeleton"},o.a.createElement(u.D,null,o.a.createElement(s.a,{width:"136px",height:"16px",className:"SettingsFooterSkeleton__headline"})),o.a.createElement(u.pb,{before:o.a.createElement(l.a,{shadow:!1,size:48}),description:o.a.createElement(s.a,{width:"138px"})},o.a.createElement(s.a,{width:"138px",className:"SettingsFooterSkeleton__desc"})))}),h=Object(u.Qb)((function(){var e=Object(u.Ob)().viewWidth,t=Object(d.b)(e),n=t?o.a.createElement(u.x,null,o.a.createElement(u.hb,{className:"SettingsSkeleton__head SettingsSkeleton__head--mobile",before:o.a.createElement(l.a,{shadow:!1,size:72,className:"SettingsSkeleton__avatar"}),text:o.a.createElement(s.a,{width:"auto",className:"SettingsSkeleton__headLine"}),caption:o.a.createElement(s.a,{width:"auto",className:"SettingsSkeleton__headLine"})},o.a.createElement(s.a,{width:"auto",className:"SettingsSkeleton__headLine"}),o.a.createElement(s.a,{width:"auto",className:"SettingsSkeleton__headLine"})),o.a.createElement(u.w,{className:"SettingsSkeleton__formItem",top:o.a.createElement(s.a,{width:"30px"})},o.a.createElement(s.a,{width:"auto",height:"34px"})),o.a.createElement(u.w,{className:"SettingsSkeleton__formItem",top:o.a.createElement(s.a,{width:"62px"})},o.a.createElement(s.a,{width:"auto",height:"34px"})),o.a.createElement(u.w,{className:"SettingsSkeleton__formItem",top:o.a.createElement(s.a,{width:"62px"})},o.a.createElement(s.a,{width:"auto",height:"34px"})),o.a.createElement(u.w,{className:"SettingsSkeleton__formItem",top:o.a.createElement(s.a,{width:"26px"})},o.a.createElement(s.a,{width:"auto",height:"34px"})),o.a.createElement(u.w,{className:"SettingsSkeleton__formItem",top:o.a.createElement(s.a,{width:"104px"})},o.a.createElement(s.a,{width:"auto",height:"34px"})),o.a.createElement(u.w,{className:"SettingsSkeleton__formItem",top:o.a.createElement(s.a,{width:"197px"})},o.a.createElement(s.a,{width:"auto",height:"34px"})),o.a.createElement(u.w,{className:"SettingsSkeleton__formItem SettingsSkeleton__formItem--footer"},o.a.createElement(u.pb,null,o.a.createElement(s.a,{width:"227px"}))),o.a.createElement(u.ob,null),o.a.createElement(u.D,{mode:"primary"},o.a.createElement(s.a,{width:"136px",height:"16px"})),o.a.createElement(u.pb,{before:o.a.createElement(l.a,{shadow:!1,size:48}),description:o.a.createElement(s.a,{width:"138px"})},o.a.createElement(s.a,{width:"138px",className:"SettingsSkeleton__headLine"})),o.a.createElement(u.w,null),o.a.createElement(u.w,null)):o.a.createElement(o.a.Fragment,null,o.a.createElement(u.hb,{className:"SettingsSkeleton__head",before:o.a.createElement(l.a,{shadow:!1,size:72,className:"SettingsSkeleton__avatar"}),text:o.a.createElement(s.a,{width:"auto",className:"SettingsSkeleton__headLine"}),caption:o.a.createElement(s.a,{width:"auto",className:"SettingsSkeleton__headLine"})},o.a.createElement(s.a,{width:"208px",height:"18px",className:"SettingsSkeleton__headLine1"})),o.a.createElement(u.x,null,o.a.createElement(u.y,{mode:"horizontal",className:"SettingsSkeleton__layoutGroup"},o.a.createElement(u.w,{top:o.a.createElement(s.a,{width:"30px"})},o.a.createElement(s.a,{width:"246px",height:"34px"})),o.a.createElement(u.w,{top:o.a.createElement(s.a,{width:"62px"})},o.a.createElement(s.a,{width:"246px",height:"34px"}))),o.a.createElement(u.y,{mode:"horizontal",className:"SettingsSkeleton__layoutGroup"},o.a.createElement(u.w,{top:o.a.createElement(s.a,{width:"63px"})},o.a.createElement(s.a,{width:"246px",height:"34px"})),o.a.createElement(u.w,{top:o.a.createElement(s.a,{width:"26px"})},o.a.createElement(s.a,{width:"246px",height:"34px"}))),o.a.createElement(u.y,{mode:"horizontal",className:"SettingsSkeleton__layoutGroup"},o.a.createElement(u.w,{top:o.a.createElement(s.a,{width:"104px"})},o.a.createElement("div",{className:"SettingsSkeleton__formLayout"},o.a.createElement(s.a,{minWidth:"93px",width:"93px",height:"34px"}),o.a.createElement(s.a,{className:"SettingsSkeleton__formLayoutItem",width:"100%",height:"34px"}),o.a.createElement(s.a,{minWidth:"110px",width:"110px",height:"34px"})))),o.a.createElement(u.y,{mode:"horizontal",className:"SettingsSkeleton__layoutGroup"},o.a.createElement(u.w,{top:o.a.createElement(s.a,{width:"197px"})},o.a.createElement(s.a,{width:"100%",height:"34px"}))),o.a.createElement(u.w,null,o.a.createElement(u.pb,null,o.a.createElement(s.a,{width:"227px"}))),o.a.createElement(u.w,null,o.a.createElement(s.a,{width:"109px",height:"32px"}))));return o.a.createElement(o.a.Fragment,null,o.a.createElement(u.C,{className:"SettingsSkeleton"},n),!t&&o.a.createElement(p,null))}),{viewWidth:!0}),m=(n(967),n(968),Object(u.Qb)((function(){var e=Object(u.Ob)().viewWidth,t=Object(d.b)(e)?80:96;return o.a.createElement("div",{className:"SchoolInfoHeaderSkeleton"},o.a.createElement("div",{className:"SchoolInfoHeaderSkeleton__main"},o.a.createElement(u.Fb,{className:"SchoolInfoHeaderSkeleton__title",weight:"medium",level:"2"},o.a.createElement(s.a,{width:"152px",height:"18px"})),o.a.createElement(u.Db,{className:"SchoolInfoHeaderSkeleton__status",weight:"regular"},o.a.createElement(s.a,{width:"375px"})),o.a.createElement(u.Db,{className:"SchoolInfoHeaderSkeleton__status",weight:"regular"},o.a.createElement(s.a,{width:"375px"}))),o.a.createElement("div",{className:"SchoolInfoHeaderSkeleton__aside"},o.a.createElement(l.a,{size:t,shadow:!1,className:"SchoolInfoHeaderSkeleton__avatar"})))}),{viewWidth:!0})),v=(n(969),function(){return o.a.createElement("div",{className:"SchoolInfoRowsSkeleton"},o.a.createElement(u.N,{className:"SchoolInfoRowsSkeleton__schoolCell",before:o.a.createElement(l.a,{size:20,shadow:!1}),textWrap:"nowrap"},o.a.createElement(s.a,{width:"113px",className:"SchoolInfoRowsSkeleton__infoLine"})),o.a.createElement(u.N,{className:"SchoolInfoRowsSkeleton__schoolCell",before:o.a.createElement(l.a,{size:20,shadow:!1}),textWrap:"nowrap"},o.a.createElement(s.a,{width:"auto",className:"SchoolInfoRowsSkeleton__line"}),o.a.createElement(s.a,{width:"auto",className:"SchoolInfoRowsSkeleton__line"}),o.a.createElement(s.a,{width:"auto"})),o.a.createElement(u.N,{className:"SchoolInfoRowsSkeleton__schoolCell",before:o.a.createElement(l.a,{size:20,shadow:!1}),textWrap:"nowrap"},o.a.createElement(s.a,{width:"92px",className:"SchoolInfoRowsSkeleton__infoLine"})),o.a.createElement(u.N,{className:"SchoolInfoRowsSkeleton__schoolCell",before:o.a.createElement(l.a,{size:20,shadow:!1}),textWrap:"nowrap"},o.a.createElement(s.a,{width:"176px",className:"SchoolInfoRowsSkeleton__infoLine"})),o.a.createElement(u.N,{className:"SchoolInfoRowsSkeleton__schoolCell SchoolInfoRowsSkeleton__schoolCell--last",before:o.a.createElement(l.a,{size:20,shadow:!1}),textWrap:"nowrap"},o.a.createElement(s.a,{width:"176px",className:"SchoolInfoRowsSkeleton__infoLine"})))}),g=n(319),b=n(477),_=n(639),y=Object(u.Qb)((function(){var e=Object(u.Ob)().viewWidth<u.Ib.DESKTOP;return o.a.createElement(o.a.Fragment,null,o.a.createElement(u.C,{className:"SchoolSkeleton"},o.a.createElement(u.t,null,o.a.createElement(m,null),o.a.createElement(u.ob,{wide:!0}),o.a.createElement(v,null))),e&&o.a.createElement(u.C,null,o.a.createElement(_.a,null)),o.a.createElement(u.C,null,o.a.createElement(g.a,{top:o.a.createElement(s.a,{width:"110px",height:"18px"})})),o.a.createElement(u.C,null,o.a.createElement(g.a,{top:o.a.createElement(s.a,{width:"110px",height:"18px"})})),o.a.createElement(u.C,null,o.a.createElement(b.a,{top:o.a.createElement(s.a,{width:"80px",height:"18px"})})),o.a.createElement(u.C,null,o.a.createElement(b.a,{top:o.a.createElement(s.a,{width:"80px",height:"18px"})})))}),{viewWidth:!0}),E=n(245),O=n(63),w=n(168),C=(n(979),function(){return o.a.createElement(u.pb,{before:o.a.createElement(l.a,{shadow:!1,size:72}),className:"SchoolLeadersListItemSkeleton"},o.a.createElement(s.a,{width:"200px",className:"SchoolLeadersListItemSkeleton__line"}),o.a.createElement(s.a,{width:"131px",className:"SchoolLeadersListItemSkeleton__line"}),o.a.createElement(s.a,{width:"100px"}))}),S=n(578),A=(n(981),n(982),function(){return o.a.createElement(u.t,{className:"MessagesLineSkeleton"},o.a.createElement(l.a,{shadow:!1,size:50}),o.a.createElement("div",{className:"MessagesLineSkeleton__card"},o.a.createElement(s.a,{width:"130px",className:"MessagesLineSkeleton__title"}),o.a.createElement(s.a,{width:"190px"})))}),k=n(104),j=Object(u.Qb)((function(){var e=Object(u.Ob)().viewWidth,t=Object(d.b)(e),n=k.b.parse(window.location.search).q;return o.a.createElement("div",{className:"MessagesSkeleton"},o.a.createElement(s.a,{width:"auto",height:"36px",className:"MessagesSkeleton__search"}),n&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"MessagesSkeleton__searchPrivate"},o.a.createElement(s.a,{width:"280px",height:"14px"})),o.a.createElement(u.ob,{wide:!0})),o.a.createElement(A,null),o.a.createElement(A,null),o.a.createElement(A,null),o.a.createElement(A,null),o.a.createElement(A,null),t&&o.a.createElement(o.a.Fragment,null,o.a.createElement(A,null),o.a.createElement(A,null),o.a.createElement(A,null),o.a.createElement(A,null)))}),{viewWidth:!0}),T=(n(983),n(984),function(){return o.a.createElement(u.pb,{className:"InviteLinkCellSkeleton",before:o.a.createElement(u.h,{shadow:!1,mode:"app",className:"InviteLinkCellSkeleton__qr",size:72}),description:o.a.createElement(o.a.Fragment,null,o.a.createElement(s.a,{width:"300px",className:"InviteLinkCellSkeleton__descriptionLine"}),o.a.createElement(s.a,{width:"300px",className:"InviteLinkCellSkeleton__descriptionLine"}))},o.a.createElement(s.a,{width:"214"}))}),I=function(){return o.a.createElement(u.C,{className:"SchoolInviteLinksSkeleton"},o.a.createElement(u.t,null,o.a.createElement(u.E,{weight:"regular"},o.a.createElement(s.a,{width:"474px",className:"SchoolInviteLinksSkeleton__line"}),o.a.createElement(s.a,{width:"474px",className:"SchoolInviteLinksSkeleton__line"}))),o.a.createElement(u.ob,null),o.a.createElement(u.D,{mode:"primary"},o.a.createElement(s.a,{width:"60px",height:"16px"})),o.a.createElement(T,null),o.a.createElement(T,null),o.a.createElement(T,null),o.a.createElement(u.n,null,o.a.createElement(s.a,{width:"125px"})))},P=(n(985),Object(u.Qb)((function(){var e=Object(u.Ob)().viewWidth,t=Object(d.b)(e);return o.a.createElement(u.C,{className:"SchoolGradeInfoSkeleton"},o.a.createElement("div",{className:"SchoolGradeInfoSkeleton__head"},o.a.createElement(l.a,{size:96,className:Object(u.Lb)("SchoolGradeInfoSkeleton__avatar",t&&"SchoolGradeInfoSkeleton__avatar--mobile")}),o.a.createElement(s.a,{width:"171px",height:"18px",className:"SchoolGradeInfoSkeleton__headLine1"}),o.a.createElement(s.a,{width:"75px",className:"SchoolGradeInfoSkeleton__headLine2"}),o.a.createElement(s.a,{width:"141px",height:"36px"})),o.a.createElement(u.D,null,o.a.createElement(s.a,{width:"193px",height:"18px"})),o.a.createElement(u.pb,{before:o.a.createElement(l.a,{shadow:!1,size:48}),description:o.a.createElement(s.a,{width:"62",className:"SchoolGradeInfoSkeleton__line"})},o.a.createElement(s.a,{width:"240px"})),o.a.createElement(u.ob,null),o.a.createElement(u.D,null,o.a.createElement(s.a,{width:"80px",height:"18px"})),o.a.createElement(u.pb,{before:o.a.createElement(l.a,{shadow:!1,size:48})},o.a.createElement(s.a,{width:"138px"})),o.a.createElement(u.pb,{before:o.a.createElement(l.a,{shadow:!1,size:48}),description:o.a.createElement(s.a,{width:"62px",className:"SchoolGradeInfoSkeleton__line"})},o.a.createElement(s.a,{width:"240px"})),o.a.createElement(u.pb,{before:o.a.createElement(l.a,{shadow:!1,size:48}),description:o.a.createElement(s.a,{width:"62px",className:"SchoolGradeInfoSkeleton__line"})},o.a.createElement(s.a,{width:"240px"})),o.a.createElement(u.ob,null),o.a.createElement(g.a,{top:o.a.createElement(s.a,{width:"76px",height:"18px"})}),o.a.createElement(u.ob,null),o.a.createElement(u.D,null,o.a.createElement(s.a,{width:"100px",height:"18px"})),o.a.createElement(u.pb,{before:o.a.createElement(l.a,{shadow:!1,size:48})},o.a.createElement(s.a,{width:"153px"})),o.a.createElement(u.pb,{before:o.a.createElement(l.a,{shadow:!1,size:48})},o.a.createElement(s.a,{width:"153px"})),o.a.createElement(u.pb,{before:o.a.createElement(l.a,{shadow:!1,size:48})},o.a.createElement(s.a,{width:"153px"})),o.a.createElement(u.ob,null),o.a.createElement(u.D,null,o.a.createElement(s.a,{width:"91px",height:"18px"})),o.a.createElement(u.pb,{before:o.a.createElement(l.a,{shadow:!1,size:48}),description:o.a.createElement(s.a,{width:"106px",className:"SchoolGradeInfoSkeleton__line"})},o.a.createElement(s.a,{width:"240px"})),o.a.createElement(u.pb,{before:o.a.createElement(l.a,{shadow:!1,size:48}),description:o.a.createElement(s.a,{width:"106px",className:"SchoolGradeInfoSkeleton__line"})},o.a.createElement(s.a,{width:"240px"})))}),{viewWidth:!0})),D=(n(986),Object(u.Qb)((function(){var e=Object(u.Ob)().viewWidth,t=Object(d.b)(e)?o.a.createElement(o.a.Fragment,null,o.a.createElement(u.hb,{className:"SchoolEditSkeleton__head SchoolEditSkeleton__head--mobile",before:o.a.createElement(l.a,{shadow:!1,size:72,className:"SchoolEditSkeleton__avatar"}),text:o.a.createElement(s.a,{width:"auto",className:"SchoolEditSkeleton__line"}),caption:o.a.createElement(s.a,{width:"auto",className:"SchoolEditSkeleton__line"})},o.a.createElement(s.a,{width:"auto",className:"SchoolEditSkeleton__line"}),o.a.createElement(s.a,{width:"auto",className:"SchoolEditSkeleton__line"})),o.a.createElement(u.x,null,o.a.createElement(u.w,{className:"SchoolEditSkeleton__formItem",top:o.a.createElement(s.a,{width:"66px"})},o.a.createElement(s.a,{width:"auto",height:"44px"})),o.a.createElement(u.w,{className:"SchoolEditSkeleton__formItem",top:o.a.createElement(s.a,{width:"46px"})},o.a.createElement(s.a,{width:"auto",height:"44px"})),o.a.createElement(u.w,{top:o.a.createElement(s.a,{width:"68px"})},o.a.createElement(s.a,{width:"auto",height:"84px"})),o.a.createElement(u.w,{className:"SchoolEditSkeleton__formItem",top:o.a.createElement(s.a,{width:"35px"})},o.a.createElement(s.a,{width:"auto",height:"44px"})),o.a.createElement(u.w,{className:"SchoolEditSkeleton__formItem",top:o.a.createElement(s.a,{width:"59px"})},o.a.createElement(s.a,{width:"auto",height:"44px"})),o.a.createElement(u.w,{className:"SchoolEditSkeleton__formItem",top:o.a.createElement(s.a,{width:"49px"})},o.a.createElement(s.a,{width:"auto",height:"44px"})),o.a.createElement(u.w,{className:"SchoolEditSkeleton__formItem",top:o.a.createElement(s.a,{width:"40px"})},o.a.createElement(s.a,{width:"auto",height:"44px"})))):o.a.createElement(o.a.Fragment,null,o.a.createElement(u.hb,{className:"SchoolEditSkeleton__head",before:o.a.createElement(l.a,{shadow:!1,size:72,className:"SchoolEditSkeleton__avatar"}),text:o.a.createElement(s.a,{width:"auto",className:"SchoolEditSkeleton__line"}),caption:o.a.createElement(s.a,{width:"auto",className:"SchoolEditSkeleton__line"})},o.a.createElement(s.a,{width:"208px",height:"18px",className:"SchoolEditSkeleton__headLine1"})),o.a.createElement(u.x,null,o.a.createElement(u.w,{className:"SchoolEditSkeleton__formItem",top:o.a.createElement(s.a,{width:"68px"})},o.a.createElement(s.a,{width:"auto",height:"44px"})),o.a.createElement(u.w,{className:"SchoolEditSkeleton__formItem",top:o.a.createElement(s.a,{width:"46px"})},o.a.createElement(s.a,{width:"auto",height:"44px"})),o.a.createElement(u.w,{top:o.a.createElement(s.a,{width:"68px"})},o.a.createElement(s.a,{width:"auto",height:"84px"})),o.a.createElement(u.y,{mode:"horizontal",className:"SchoolEditSkeleton__layoutGroup"},o.a.createElement(u.w,{top:o.a.createElement(s.a,{width:"35px"})},o.a.createElement(s.a,{width:"246px",height:"44px"})),o.a.createElement(u.w,{top:o.a.createElement(s.a,{width:"59px"})},o.a.createElement(s.a,{width:"246px",height:"44px"}))),o.a.createElement(u.y,{mode:"horizontal",className:"SchoolEditSkeleton__layoutGroup"},o.a.createElement(u.w,{top:o.a.createElement(s.a,{width:"49px"})},o.a.createElement(s.a,{width:"246px",height:"44px"})),o.a.createElement(u.w,{top:o.a.createElement(s.a,{width:"40px"})},o.a.createElement(s.a,{width:"246px",height:"44px"}))),o.a.createElement(u.w,null,o.a.createElement(s.a,{width:"109px",height:"36px"}))));return o.a.createElement(u.C,{className:"SchoolEditSkeleton"},t)}),{viewWidth:!0})),N=n(321),x=Object(u.Qb)((function(){var e=Object(u.Ob)().viewWidth;return Object(d.b)(e)?o.a.createElement(O.a,{component:o.a.createElement(N.a,null),itemsCount:4}):o.a.createElement(O.a,{component:o.a.createElement(N.a,null),itemsCount:3})}),{viewWidth:!0}),R=(n(988),function(){return o.a.createElement(u.pb,{className:"SchoolDocumentsItemSkeleton",before:o.a.createElement(l.a,{mode:"image",size:72,shadow:!1})},o.a.createElement(s.a,{width:"128px",className:"SchoolDocumentsItemSkeleton__line"}),o.a.createElement(s.a,{width:"187px"}))}),M=(n(989),Object(u.Qb)((function(){var e=Object(u.Ob)().viewWidth,t=Object(d.b)(e),n=t?"50px":"200px",r=t?"160px":"131px";return o.a.createElement(u.pb,{className:"SchoolClassesListItemSkeleton",before:o.a.createElement(l.a,{shadow:!1,size:72})},o.a.createElement(s.a,{width:n,className:"SchoolClassesListItemSkeleton__title"}),o.a.createElement(s.a,{width:r}))}),{viewWidth:!0})),L=n(115),B=n(28),F=n(67),H=(n(990),function(){return o.a.createElement(u.C,null,o.a.createElement("div",{className:"CallsListSkeleton__row"},o.a.createElement("div",{className:"CallsListSkeleton__column"},o.a.createElement(s.a,{className:"CallsListSkeleton__title",width:"230px",height:"16px"}),o.a.createElement(s.a,{className:"CallsListSkeleton__subTitle",width:"176px",height:"12px"})),o.a.createElement("div",{className:"CallsListSkeleton__column"},o.a.createElement(s.a,{className:"CallsListSkeleton__button",width:"180px",height:"36px"}))))}),V=(n(991),function(){return o.a.createElement(u.C,null,o.a.createElement(u.t,{className:"DiarySkeleton__in"},o.a.createElement(l.a,{className:"DiarySkeleton__avatar",size:56}),o.a.createElement(s.a,{className:"DiarySkeleton__title",width:"280px",height:"16px"}),o.a.createElement(s.a,{className:"DiarySkeleton__title",width:"280px",height:"16px"}),o.a.createElement(s.a,{className:"DiarySkeleton__text",width:"100%",height:"12px"}),o.a.createElement(s.a,{className:"DiarySkeleton__text",width:"100%",height:"12px"}),o.a.createElement(s.a,{className:"DiarySkeleton__text",width:"100%",height:"12px"}),o.a.createElement(s.a,{className:"DiarySkeleton__button",width:"290px",height:"36px"})))}),U=(n(992),n(993),function(e){var t=e.className;return o.a.createElement(u.i,{mode:"image",className:Object(u.Lb)("MobileCallsBannerSkeleton",t),background:o.a.createElement("div",{className:"MobileCallsBannerSkeleton__background"}),before:o.a.createElement(l.a,{mode:"app",size:48}),header:o.a.createElement(o.a.Fragment,null,o.a.createElement(s.a,{className:"MobileCallsBannerSkeleton__title",width:"194px",height:"16px"}),o.a.createElement(s.a,{className:"MobileCallsBannerSkeleton__title",width:"194px",height:"16px"})),subheader:o.a.createElement(o.a.Fragment,null,o.a.createElement(s.a,{className:"MobileCallsBannerSkeleton__text",width:"240px",height:"12px"}),o.a.createElement(s.a,{className:"MobileCallsBannerSkeleton__text",width:"240px",height:"12px"}),o.a.createElement(s.a,{className:"MobileCallsBannerSkeleton__text",width:"240px",height:"12px"}),o.a.createElement(s.a,{className:"MobileCallsBannerSkeleton__text",width:"240px",height:"12px"}),o.a.createElement(s.a,{className:"MobileCallsBannerSkeleton__button",width:"181px",height:"30px"}))})}),z=function(e){var t=e.showBannerSkeleton,n=void 0!==t&&t;return o.a.createElement(u.C,{className:"MobileStubSkeleton"},n&&o.a.createElement(U,{className:"MobileStubSkeleton__banner"}),o.a.createElement(u.t,{className:"MobileStubSkeleton__in"},o.a.createElement("div",{className:"MobileStubSkeleton__block"},o.a.createElement(l.a,{className:"MobileStubSkeleton__icon",size:56}),o.a.createElement(s.a,{className:"MobileStubSkeleton__title",width:"280px",height:"16px"}),o.a.createElement(s.a,{className:"MobileStubSkeleton__title",width:"280px",height:"16px"}),o.a.createElement(s.a,{className:"MobileStubSkeleton__button",width:"200px",height:"36px"}))))},G=n(363),W=n(397),q=function(){var e=Object(u.Ob)().viewWidth,t=Object(d.b)(e),n=Object(L.a)().profileSchools,r=!!Object(B.b)().menuSchoolRequests.length,a=(null==n?void 0:n.length)>0;return o.a.createElement(o.a.Fragment,null,!t&&a&&o.a.createElement(H,null),a?o.a.createElement(G.a,{mode:F.f.FULL}):o.a.createElement(V,null),a&&o.a.createElement(W.a,{itemsCount:4}),!t&&o.a.createElement(z,null),!r&&!a&&o.a.createElement(z,{showBannerSkeleton:t}))},K=n(72),Y=(n(1e3),Object(u.Qb)((function(){var e=Object(u.Ob)().viewWidth,t=Object(d.b)(e),n=t?"210px":"200px",r=t?"180px":"131px";return o.a.createElement(u.pb,{className:"ProfileContactsListItemSkeleton",before:o.a.createElement(l.a,{shadow:!1,size:72})},o.a.createElement(s.a,{width:n,className:"ProfileContactsListItemSkeleton__title"}),o.a.createElement(s.a,{width:r}))}),{viewWidth:!0})),Z=Object(u.Qb)((function(){var e=Object(u.Ob)().viewWidth;return Object(d.b)(e)?o.a.createElement(O.a,{component:o.a.createElement(Y,null),itemsCount:8}):o.a.createElement(O.a,{component:o.a.createElement(Y,null),itemsCount:4})}),{viewWidth:!0}),Q=Object(i.memo)(Object(u.Qb)((function(e){var t,n=e.activePanel;return(t={},a()(t,c.j.MESSAGES,o.a.createElement(j,null)),a()(t,c.j.DOCUMENTS,o.a.createElement(x,null)),a()(t,c.j.PROFILE,o.a.createElement(f,null)),a()(t,c.j.PROFILE_CONTACTS,o.a.createElement(Z,null)),a()(t,c.j.SETTINGS,o.a.createElement(h,null)),a()(t,c.j.SCHOOL,o.a.createElement(y,null)),a()(t,c.j.DOWNLOAD_APP,o.a.createElement(u.t,null)),a()(t,c.j.JOIN_CALL_PAGE,o.a.createElement(u.t,null)),a()(t,c.j.SCHOOL_DOCS,o.a.createElement(O.a,{component:o.a.createElement(R,null),itemsCount:4})),a()(t,c.j.SCHOOL_VIDEOS,o.a.createElement(O.a,{component:o.a.createElement(E.a,null),itemsCount:3,top:null,itemDistance:"0"})),a()(t,c.j.SCHOOL_ARTICLES,o.a.createElement(O.a,{component:o.a.createElement(E.a,null),itemsCount:3})),a()(t,c.j.SCHOOL_MEMBERS,o.a.createElement(O.a,{component:o.a.createElement(w.a,null),itemsCount:4})),a()(t,c.j.BLACK_LIST,o.a.createElement(O.a,{component:o.a.createElement(w.a,null),itemsCount:4,top:null,itemDistance:"0"})),a()(t,c.j.SCHOOL_CLASSES,o.a.createElement(O.a,{component:o.a.createElement(M,null),itemsCount:9})),a()(t,c.j.SCHOOL_EDIT,o.a.createElement(D,null)),a()(t,c.j.SCHOOL_CHATS,o.a.createElement(O.a,{component:o.a.createElement(w.a,null),itemsCount:6,itemDistance:"0"})),a()(t,c.j.SCHOOL_MESSAGES,o.a.createElement(j,null)),a()(t,c.j.SCHOOL_LEADERS,o.a.createElement(O.a,{component:o.a.createElement(C,null),itemsCount:2})),a()(t,c.j.SCHOOL_REQUESTS,o.a.createElement(O.a,{component:o.a.createElement(S.a,null),itemsCount:4})),a()(t,c.j.SCHOOL_INVITE_LINKS,o.a.createElement(I,null)),a()(t,c.j.SCHOOL_GRADE_INFO,o.a.createElement(P,null)),a()(t,c.j.SCHOOL_GRADE_TEACHERS,o.a.createElement(O.a,{component:o.a.createElement(w.a,null),itemsCount:4})),a()(t,c.j.SCHOOL_GRADE_CHATS,o.a.createElement(O.a,{component:o.a.createElement(w.a,null),itemsCount:4})),a()(t,c.j.DASHBOARD,o.a.createElement(q,null)),a()(t,c.j.SCHOOL_MANAGE_MENU,o.a.createElement(K.a,{type:"default"})),t)[n]||o.a.createElement(O.a,{component:o.a.createElement(w.a,null),itemsCount:3})}),{viewWidth:!0}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={NATIVE_MESSENGER:{vk_education:{ios:"2.2",android:"2.4"},vkedu:{ios:"2.2",android:"2.4"}},NATIVE_EVENT_MODALS:{vk_education:{ios:"2.9",android:"2.9"},vkedu:{ios:"2.9",android:"2.9"}},EJD_OAUTH:{vk_education:{ios:"2.7",android:"2.17"},vkedu:{ios:"2.7",android:"2.17"}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(481),a=n(26),i=n.n(a),o=function(){var e=Object(r.b)(),t=e.app,n=e.client_version,a=e.client_platform;return{isClientVersionMatches:function(e){if(!i.a.isWebView()||!i.a.supports("VKWebAppGetClientVersion"))return!1;if(!a||!n||!t)return!1;var r=function(e,t){if("string"!=typeof e||"string"!=typeof t)return!1;for(var n=/(\.0+)+$/,r=e.replace(n,""),a=t.replace(n,""),i=r.split("."),o=a.split("."),c=Math.max(i.length,o.length),s=0;s<c;s++){if(i[s]&&!o[s]&&parseInt(i[s])>0||parseInt(i[s])>parseInt(o[s]))return 1;if(o[s]&&!i[s]&&parseInt(o[s])>0||parseInt(i[s])<parseInt(o[s]))return-1}return r===a&&0}(n,e[t][a]);return!1!==r&&r>=0}}}},function(e,t){e.exports=function(e){return null==e}},,,,,function(e,t,n){var r=n(560),a="object"==typeof self&&self&&self.Object===Object&&self,i=r||a||Function("return this")();e.exports=i},function(e,t,n){"use strict";n.d(t,"a",(function(){return M}));var r=n(0),a=n.n(r),i=n(2),o=n.n(i),c=n(5),s=(n(959),n(43)),u=function(){return a.a.createElement(s.a,{lineWidth:"166px",className:"MessagesHeaderSkeleton",disableRightAvatar:!0,enableLeftAvatar:!1,separator:!1})},l=n(1),d=n(29),f=Object(l.Qb)((function(){var e=Object(l.Ob)().viewWidth;return Object(d.b)(e)?a.a.createElement(s.a,{lineWidth:"75px",separator:!1,enableLeftAvatar:!1,disableRightAvatar:!1}):a.a.createElement(s.a,{lineWidth:"183px"})}),{viewWidth:!0}),p=Object(l.Qb)((function(){var e=Object(l.Ob)().viewWidth;return Object(d.b)(e)?a.a.createElement(s.a,{lineWidth:"104px",disableRightAvatar:!0,separator:!1}):a.a.createElement(s.a,{lineWidth:"103px",disableRightAvatar:!0})}),{viewWidth:!0}),h=n(25),m=Object(l.Qb)((function(){var e=Object(l.Ob)().viewWidth;return Object(d.b)(e)?a.a.createElement(s.a,{lineWidth:"108px",disableRightAvatar:!0,enableLeftAvatar:!0,separator:!1,left:a.a.createElement(h.a,{size:28,className:"MainHeaderSkeleton__avatar"})}):a.a.createElement(s.a,{lineWidth:"120px",disableRightAvatar:!0})}),{viewWidth:!0}),v=(n(961),n(14)),g=Object(l.Qb)((function(){var e=Object(l.Ob)().viewWidth,t=Object(l.Pb)();return Object(d.b)(e)?a.a.createElement(s.a,{lineWidth:"180px",separator:!0,enableLeftAvatar:!0,disableRightAvatar:!1,left:t===l.H?a.a.createElement(v.a,{width:"62px",height:"18px",className:"SettingsMainHeaderSkeleton__left"}):a.a.createElement(h.a,{size:28,className:"MainHeaderSkeleton__avatar"}),right:t===l.H?a.a.createElement(v.a,{width:"62px",height:"18px",className:"SettingsMainHeaderSkeleton__right"}):a.a.createElement(h.a,{size:28})}):a.a.createElement(s.a,{lineWidth:"125px",disableRightAvatar:!0})}),{viewWidth:!0}),b=Object(l.Qb)((function(){var e=Object(l.Ob)().viewWidth;return Object(d.b)(e)?a.a.createElement(s.a,{lineWidth:"76px",disableRightAvatar:!0,enableLeftAvatar:!0,separator:!1,left:a.a.createElement(h.a,{size:28,className:"MainHeaderSkeleton__avatar"})}):a.a.createElement(s.a,{lineWidth:"76px"})}),{viewWidth:!0}),_=Object(l.Qb)((function(){var e=Object(l.Ob)().viewWidth;return Object(d.b)(e)?a.a.createElement(s.a,{lineWidth:"72px",disableRightAvatar:!0,enableLeftAvatar:!0,separator:!1,left:a.a.createElement(h.a,{size:28,className:"MainHeaderSkeleton__avatar"})}):a.a.createElement(s.a,{lineWidth:"76px"})}),{viewWidth:!0}),y=Object(l.Qb)((function(){var e=Object(l.Ob)().viewWidth;return Object(d.b)(e)?a.a.createElement(s.a,{lineWidth:"118px",disableRightAvatar:!0,enableLeftAvatar:!0,separator:!1,left:a.a.createElement(h.a,{size:28,className:"MainHeaderSkeleton__avatar"})}):a.a.createElement(s.a,{lineWidth:"120px",disableRightAvatar:!0})}),{viewWidth:!0}),E=Object(l.Qb)((function(){var e=Object(l.Ob)().viewWidth;return Object(d.b)(e)?a.a.createElement(s.a,{lineWidth:"118px",disableRightAvatar:!0,enableLeftAvatar:!0,separator:!1,left:a.a.createElement(h.a,{size:28,className:"MainHeaderSkeleton__avatar"})}):a.a.createElement(s.a,{lineWidth:"120px",disableRightAvatar:!0})}),{viewWidth:!0}),O=Object(l.Qb)((function(){var e=Object(l.Ob)().viewWidth;return Object(d.b)(e)?a.a.createElement(s.a,{lineWidth:"84px",disableRightAvatar:!1,enableLeftAvatar:!0,separator:!1,left:a.a.createElement(h.a,{size:28,className:"MainHeaderSkeleton__avatar"})}):a.a.createElement(s.a,{lineWidth:"86px",disableRightAvatar:!0})}),{viewWidth:!0}),w=(n(962),Object(l.Qb)((function(){var e=Object(l.Ob)().viewWidth,t=Object(l.Pb)();return Object(d.b)(e)?a.a.createElement(s.a,{lineWidth:"150px",separator:!1,enableLeftAvatar:!0,disableRightAvatar:!1,left:t===l.H?a.a.createElement(v.a,{width:"62px",height:"18px",className:"SchoolEditMainHeaderSkeleton__left"}):a.a.createElement(h.a,{size:28,className:"MainHeaderSkeleton__avatar"}),right:t===l.H?a.a.createElement(v.a,{width:"62px",height:"18px",className:"SchoolEditMainHeaderSkeleton__right"}):a.a.createElement(h.a,{size:28})}):a.a.createElement(s.a,{lineWidth:"149px",disableRightAvatar:!0})}),{viewWidth:!0})),C=Object(l.Qb)((function(){var e=Object(l.Ob)().viewWidth;return Object(d.b)(e)?a.a.createElement(s.a,{lineWidth:"168px",disableRightAvatar:!0,enableLeftAvatar:!0,separator:!1,left:a.a.createElement(h.a,{size:28,className:"MainHeaderSkeleton__avatar"})}):a.a.createElement(s.a,{lineWidth:"166px",disableRightAvatar:!0})}),{viewWidth:!0}),S=Object(l.Qb)((function(){var e=Object(l.Ob)().viewWidth;return Object(d.b)(e)?a.a.createElement(s.a,{lineWidth:"160px",disableRightAvatar:!1,enableLeftAvatar:!0,separator:!1,left:a.a.createElement(h.a,{size:28,className:"MainHeaderSkeleton__avatar"})}):a.a.createElement(s.a,{lineWidth:"162px"})}),{viewWidth:!0}),A=Object(l.Qb)((function(){var e=Object(l.Ob)().viewWidth;return Object(d.b)(e)?a.a.createElement(s.a,{lineWidth:"80px",disableRightAvatar:!0,enableLeftAvatar:!0,separator:!1,left:a.a.createElement(h.a,{size:28,className:"MainHeaderSkeleton__avatar"})}):a.a.createElement(s.a,{lineWidth:"80px"})}),{viewWidth:!0}),k=Object(l.Qb)((function(){var e=Object(l.Ob)().viewWidth;return Object(d.b)(e)?a.a.createElement(s.a,{lineWidth:"80px",disableRightAvatar:!0,enableLeftAvatar:!0,separator:!1,left:a.a.createElement(h.a,{size:28,className:"MainHeaderSkeleton__avatar"})}):a.a.createElement(s.a,{lineWidth:"80px"})}),{viewWidth:!0}),j=Object(l.Qb)((function(){var e=Object(l.Ob)().viewWidth;return Object(d.b)(e)?a.a.createElement(s.a,{lineWidth:"139px",disableRightAvatar:!0,enableLeftAvatar:!0,separator:!1,left:a.a.createElement(h.a,{size:28,className:"MainHeaderSkeleton__avatar"})}):a.a.createElement(s.a,{lineWidth:"139px",enableLeftAvatar:!0})}),{viewWidth:!0}),T=Object(l.Qb)((function(){var e=Object(l.Ob)().viewWidth;return Object(d.b)(e)?a.a.createElement(s.a,{lineWidth:"235px",disableRightAvatar:!0,enableLeftAvatar:!0,separator:!1,left:a.a.createElement(h.a,{size:28,className:"MainHeaderSkeleton__avatar"})}):a.a.createElement(s.a,{lineWidth:"235px",enableLeftAvatar:!0})}),{viewWidth:!0}),I=Object(l.Qb)((function(){var e=Object(l.Ob)().viewWidth;return Object(d.b)(e)?a.a.createElement(s.a,{lineWidth:"235px",disableRightAvatar:!0,enableLeftAvatar:!1,separator:!1,left:a.a.createElement(h.a,{size:28,className:"MainHeaderSkeleton__avatar"})}):a.a.createElement(s.a,{lineWidth:"235px",disableRightAvatar:!0})}),{viewWidth:!0}),P=n(577),D=Object(l.Qb)((function(){var e=Object(l.Ob)().viewWidth;return Object(d.b)(e)?a.a.createElement(s.a,{lineWidth:"168px",disableRightAvatar:!0,enableLeftAvatar:!0,separator:!0,left:a.a.createElement(h.a,{size:28,className:"MainHeaderSkeleton__avatar"})}):a.a.createElement(s.a,{lineWidth:"166px",disableRightAvatar:!0})}),{viewWidth:!0}),N=Object(r.memo)(Object(l.Qb)((function(e){var t,n=e.activePanel;return(t={},o()(t,c.j.MESSAGES,a.a.createElement(u,null)),o()(t,c.j.DOCUMENTS,a.a.createElement(f,null)),o()(t,c.j.PROFILE,a.a.createElement(p,null)),o()(t,c.j.PROFILE_CONTACTS,a.a.createElement(m,null)),o()(t,c.j.SETTINGS,a.a.createElement(g,null)),o()(t,c.j.SCHOOL,a.a.createElement(P.a,null)),o()(t,c.j.DOWNLOAD_APP,a.a.createElement(l.t,null)),o()(t,c.j.JOIN_CALL_PAGE,a.a.createElement(l.t,null)),o()(t,c.j.SCHOOL_DOCS,a.a.createElement(b,null)),o()(t,c.j.SCHOOL_VIDEOS,a.a.createElement(_,null)),o()(t,c.j.SCHOOL_ARTICLES,a.a.createElement(_,null)),o()(t,c.j.SCHOOL_MEMBERS,a.a.createElement(y,null)),o()(t,c.j.BLACK_LIST,a.a.createElement(E,null)),o()(t,c.j.SCHOOL_CLASSES,a.a.createElement(O,null)),o()(t,c.j.SCHOOL_EDIT,a.a.createElement(w,null)),o()(t,c.j.SCHOOL_CHATS,a.a.createElement(C,null)),o()(t,c.j.SCHOOL_MESSAGES,a.a.createElement(u,null)),o()(t,c.j.SCHOOL_LEADERS,a.a.createElement(S,null)),o()(t,c.j.SCHOOL_REQUESTS,a.a.createElement(A,null)),o()(t,c.j.SCHOOL_INVITE_LINKS,a.a.createElement(k,null)),o()(t,c.j.SCHOOL_GRADE_INFO,a.a.createElement(j,null)),o()(t,c.j.SCHOOL_GRADE_TEACHERS,a.a.createElement(T,null)),o()(t,c.j.SCHOOL_GRADE_CHATS,a.a.createElement(s.a,{lineWidth:"166px",disableRightAvatar:!0})),o()(t,c.j.DASHBOARD,a.a.createElement(I,null)),o()(t,c.j.SCHOOL_MANAGE_MENU,a.a.createElement(D,null)),t)[n]||a.a.createElement(s.a,{lineWidth:"132px",disableRightAvatar:!0})}),{viewWidth:!0})),x=n(172),R=function(e){var t=e.activePanel;return a.a.createElement(a.a.Fragment,null,a.a.createElement(N,{activePanel:t}),a.a.createElement(x.a,{activePanel:t}))},M=Object(r.memo)(R)},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(0),a=n.n(r),i=n(1),o=(n(884),function(e){var t=e.className,n=e.height,r=void 0===n?26:n;return a.a.createElement("div",{className:Object(i.Lb)("Logo",t)},a.a.createElement(c,{height:r}))});function c(e){var t=e.height;return a.a.createElement("svg",{width:"120",height:t,viewBox:"0 0 120 ".concat(t),fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{d:"M21 6.4a4 4 0 00-2.3-1.1 4 4 0 00-1-2.3A10.3 10.3 0 003 17.6a4 4 0 002.3 1.1 4 4 0 001 2.3A10.3 10.3 0 0021 6.4z",fill:"url(#paint0_linear)"}),a.a.createElement("path",{d:"M9.4 9.4c3-3 6.7-4.5 9.3-4.1a4 4 0 00-1-2.3C15.2.7 10 2 6 6c-4 4-5.3 9.3-3 11.6a4 4 0 002.3 1.1c-.4-2.6 1.1-6.3 4.1-9.3z",fill:"url(#paint1_radial)"}),a.a.createElement("path",{d:"M38 18.2c2.6 0 5-1.3 6-4l-3-.4c-.5 1-1.6 1.6-2.8 1.6-1.9 0-3.2-1.4-3.2-3.4s1.3-3.4 3.2-3.4a3 3 0 012.7 1.6l3-.5c-1-2.6-3.2-4-5.9-4a6 6 0 00-6.3 6.3 6 6 0 006.3 6.2zM51.3 22.7h3V18c3.7 0 6.3-2.5 6.3-6 0-3.6-2.6-6-6.4-6V1.8h-3v4C47.7 6 45 8.4 45 12c0 3.6 2.7 6.1 6.4 6.1v4.7zm0-7.3C49.4 15.4 48 14 48 12s1.3-3.4 3.2-3.4v6.8zm3 0V8.6c1.8 0 3.1 1.4 3.1 3.4s-1.3 3.4-3.2 3.4zM74.7 11.8c0-3.4-2.6-6-6.3-6A6 6 0 0062 12a6 6 0 006.2 6.2c2.6 0 5-1.2 5.9-3.5l-3-.5c-.5.8-1.4 1.3-2.7 1.3-1.8 0-3-1-3.3-2.7h9.5v-1zm-6.3-3.4a3 3 0 013 2.2h-6a3.1 3.1 0 013-2.2zM76.6 22.7h3.1v-6.4a6 6 0 004.4 2c3.4 0 5.8-2.7 5.8-6.3 0-3.6-2.4-6.2-5.8-6.2a5.9 5.9 0 00-4.5 2L79 6h-2.4v16.7zm6.6-7.2c-2 0-3.5-1.5-3.5-3.5s1.5-3.5 3.5-3.5c2.1 0 3.5 1.5 3.5 3.5s-1.4 3.5-3.5 3.5zM100.2 6l-2.9 8H97l-3.2-8h-3.3l5.3 12.6c-.4 1-.7 1.3-1.6 1.3h-2.3l.2 2.8h1.9c2.4 0 3.7-1.1 4.6-3.6L103.3 6h-3.1zM105.1 18h3V9.7h.3l2.8 8.3h2.4l3-8.3h.3V18h3V6h-4.6l-2.6 7.5h-.4L109.8 6H105v12z",fill:"#2C2D2E"}),a.a.createElement("defs",null,a.a.createElement("radialGradient",{id:"paint1_radial",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"rotate(-129 10.9 4) scale(9.13453 13.4728)"},a.a.createElement("stop",{stopColor:"#0B25CE"}),a.a.createElement("stop",{offset:".5",stopColor:"#2C93DB"}),a.a.createElement("stop",{offset:".8",stopColor:"#42DCE4"}),a.a.createElement("stop",{offset:"1",stopColor:"#4BF9E8"})),a.a.createElement("linearGradient",{id:"paint0_linear",x1:"4.5",y1:"18.6",x2:"19.4",y2:"5.6",gradientUnits:"userSpaceOnUse"},a.a.createElement("stop",{stopColor:"#0000C9"}),a.a.createElement("stop",{offset:".1",stopColor:"#2006C9"}),a.a.createElement("stop",{offset:".3",stopColor:"#4A0EC8"}),a.a.createElement("stop",{offset:".5",stopColor:"#6B14C8"}),a.a.createElement("stop",{offset:".7",stopColor:"#8318C7"}),a.a.createElement("stop",{offset:".9",stopColor:"#911BC7"}),a.a.createElement("stop",{offset:"1",stopColor:"#961CC7"}))))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(2),a=n.n(r),i=n(62),o=n(117);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(e){var t=s(s({},Object(i.b)()),e);Object(i.f)(o.a.documents,t)}},function(e,t,n){"use strict";var r=n(1023);Object.defineProperty(t,"__esModule",{value:!0}),t.classNames=function(){for(var e=[],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){if(t)switch((0,a.default)(t)){case"string":e.push(t);break;case"object":Object.keys(t).forEach((function(n){t[n]&&e.push(n)}));break;default:e.push("".concat(t))}})),e.join(" ")};var a=r(n(57))},function(e,t,n){"use strict";var r=n(200);n.o(r,"ApolloClient")&&n.d(t,"ApolloClient",(function(){return r.ApolloClient})),n.o(r,"ApolloProvider")&&n.d(t,"ApolloProvider",(function(){return r.ApolloProvider})),n.o(r,"InMemoryCache")&&n.d(t,"InMemoryCache",(function(){return r.InMemoryCache})),n.o(r,"gql")&&n.d(t,"gql",(function(){return r.gql})),n.o(r,"useApolloClient")&&n.d(t,"useApolloClient",(function(){return r.useApolloClient})),n.o(r,"useQuery")&&n.d(t,"useQuery",(function(){return r.useQuery}));var a=n(612);n.o(a,"ApolloClient")&&n.d(t,"ApolloClient",(function(){return a.ApolloClient})),n.o(a,"ApolloProvider")&&n.d(t,"ApolloProvider",(function(){return a.ApolloProvider})),n.o(a,"InMemoryCache")&&n.d(t,"InMemoryCache",(function(){return a.InMemoryCache})),n.o(a,"gql")&&n.d(t,"gql",(function(){return a.gql})),n.o(a,"useApolloClient")&&n.d(t,"useApolloClient",(function(){return a.useApolloClient})),n.o(a,"useQuery")&&n.d(t,"useQuery",(function(){return a.useQuery}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(51);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"log",t=arguments.length>1?arguments[1]:void 0;if(r.b||r.f){for(var n,a=new Date,i="".concat(a.toLocaleString(),":").concat(String(a.getMilliseconds()).padStart(3,"0")),o=arguments.length,c=new Array(o>2?o-2:0),s=2;s<o;s++)c[s-2]=arguments[s];(n=console)[e].apply(n,["".concat(i," [").concat(t,"]")].concat(c))}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(79),a=n(44),i=n(37);function o(e,t){Object(i.a)(1,arguments);var n=t||{},o=n.locale,c=o&&o.options&&o.options.weekStartsOn,s=null==c?0:Object(r.a)(c),u=null==n.weekStartsOn?s:Object(r.a)(n.weekStartsOn);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var l=Object(a.a)(e),d=l.getUTCDay(),f=(d<u?7:0)+d-u;return l.setUTCDate(l.getUTCDate()-f),l.setUTCHours(0,0,0,0),l}},function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));n(1012);var r=n(0),a=n.n(r),i=n(1),o=n(106),c=n(135),s=n(129),u=n(48),l=n(270),d=n(75),f=n(84),p=(n(1015),n(14)),h=function(){return a.a.createElement(i.C,{className:"SidebarPromoCardSkeleton"},a.a.createElement(i.t,{className:"SidebarPromoCardSkeleton__in"},a.a.createElement(p.a,{className:"SidebarPromoCardSkeleton__bannerImg",width:"224px",height:"160px"}),a.a.createElement(p.a,{className:"SidebarPromoCardSkeleton__subTitle",width:"152px",height:"18px"}),a.a.createElement(p.a,{className:"SidebarPromoCardSkeleton__text",width:"100%"}),a.a.createElement(p.a,{className:"SidebarPromoCardSkeleton__text",width:"100%"}),a.a.createElement(p.a,{className:"SidebarPromoCardSkeleton__smallText",width:"84px"}),a.a.createElement(p.a,{className:"SidebarPromoCardSkeleton__button",width:"158px",height:"32px"})))},m=n(1016),v=n(1017),g=function(e){var t=e.showSkeleton,n=void 0!==t&&t,r=Object(o.c)().getLangKey,p=Object(d.a)(),g=p.showPopout,b=p.hidePopout,_=Object(f.a)().getAsyncAccessToken;return n?a.a.createElement(h,null):a.a.createElement(i.C,{className:"SidebarPromoCard"},a.a.createElement(i.t,{className:"SidebarPromoCard__in"},a.a.createElement("img",{className:"SidebarPromoCard__image",srcSet:"\n            ".concat(m,",\n            ").concat(v," 2x\n          "),alt:r("vkui_edu_promo_card_title")}),a.a.createElement(i.E,{weight:"medium"},r("vkui_edu_promo_card_title")),a.a.createElement(i.wb,{weight:"regular",className:"SidebarPromoCard__subhead"},r("vkui_edu_promo_card_subhead")),a.a.createElement(i.j,{className:"SidebarPromoCard__link",size:"m",mode:"secondary",onClick:function(){return _().then((function(e){g(a.a.createElement(c.a,{onClose:b},a.a.createElement(s.a,{src:Object(u.d)(l.b,e)})))}))}},r("vkui_edu_promo_card_btn"))))}},function(e,t,n){"use strict";n.d(t,"f",(function(){return f})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return h})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return v})),n.d(t,"g",(function(){return g})),n.d(t,"c",(function(){return b})),n.d(t,"h",(function(){return _}));var r=n(7),a=n.n(r),i=n(2),o=n.n(i),c=n(669),s=n.n(c),u=n(13),l=n(83);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var f=function(e){return Object.values(e).reduce((function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t);return n.number++,e[t.id]=n,e}),{})},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";return{liter:e,number:t,name:n}},h=function(e){return Object.values(e).reduce((function(e,t){return e[t.id]=p(),e}),{})},m=function(e){return Object.values(e).reduce((function(e,t){return e[t.id]=Object(l.d)(t),e}),{})},v=function(e){var t=a()(e,3),n=t[0],r=t[1],i=t[2];return{schoolId:n,grades:s()(r,i,u.t)}},g=function(e){return e.every((function(e){var t=a()(e,2);t[0];return 1===t[1]}))},b=function(e){var t=Object.entries(e).find((function(e){var t=a()(e,2)[1];return"error"===t.liter||"error"===t.number}))||[];return a()(t,1)[0]},_=function(e,t){return e.reduce((function(e,n){return"valid"===t[n.id].liter?e.transferredGrades.push(n):e.gradesToEdit.push(n),e}),{gradesToEdit:[],transferredGrades:[]})}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return b}));var o="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",c=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21,t="",n=e;n--;)t+=o[64*Math.random()|0];return t};function s(e){return Object.keys(e).map((function(t){var n=e[t];return t=encodeURIComponent(t),n=encodeURIComponent(n),"".concat(t,"=").concat(n)})).join("&")}function u(e){return e=e||Object.create(null),{on:function(t,n){(e[t]||(e[t]=[])).push(n)},off:function(t,n){e[t]&&e[t].splice(e[t].indexOf(n)>>>0,1)},emit:function(t,n){(e[t]||[]).slice().map((function(e){e(n)})),(e["*"]||[]).slice().map((function(e){e(t,n)}))}}}var l,d,f={appId:0,superAppToken:"",loginDomain:"login.vk.com",oauthDomain:"oauth.vk.com",connectDomain:"connect.vk.com",_debug:!1},p={},h={events:u(),init:function(e){if(!e.appId)throw new Error("appId required");f.appId=e.appId,f.superAppToken=e.superAppToken||"",f.loginDomain=e.loginDomain||"login.vk.com",f.oauthDomain=e.oauthDomain||"oauth.vk.com",f.connectDomain=e.connectDomain||"connect.vk.com",f._debug=!!e._debug},get:function(){return f},setSuperAppToken:function(e){f.superAppToken=e,h.events.emit("superAppToken",e)},onRequestSuperAppToken:function(e){p.superAppToken=e},_requestSuperAppToken:function(){var e;p.superAppToken&&(e=p.superAppToken()),e&&e.then((function(e){return h.setSuperAppToken(e)})).catch(console.error)},onAuth:function(e){p.auth=e},_requestAuth:function(){var e;p.auth&&(e=p.auth()),e&&e.then((function(e){return h.setSuperAppToken(e)})).catch(console.error)},onOpenApp:function(e){p.openApp=e},_openApp:function(e){p.openApp&&p.openApp(e.app)}},m=new function e(){var t=this;r(this,e),a(this,"flags",null),a(this,"silentAuth",(function(){var e=h.get(),t=e.loginDomain,n=e.appId,r=c(),a="https://".concat(t,"/?act=connect&app_id=").concat(n,"&response_type=").concat("silent_token","&uuid=").concat(r,"&v=").concat("0.0.2"),i=new XMLHttpRequest;return i.open("GET",a,!0),i.responseType="json",i.withCredentials=!0,new Promise((function(e,t){i.onload=function(){i.response?e({provider:"vk",payload:i.response}):t()},i.onerror=function(){t()},i.send()}))})),a(this,"userVisibleAuth",(function(){var e=h.get(),n=e.appId,r=e.connectDomain,a=c(),i=s({app_id:n,response_type:"silent_token",uuid:a,origin:location.protocol+"//"+location.host,v:"0.0.2"}),o="https://".concat(r,"/auth?").concat(i);t.flags&&(o="".concat(o,"#").concat(s(t.flags)));var u=screen.height/2-280,l=screen.width/2-410,d=window.open(o,"_blank","top=".concat(u,",left=").concat(l,",width=").concat(820,",height=").concat(560,",location"));return d?new Promise((function(e,t){var n=setInterval((function(){d&&!d.closed||(window.removeEventListener("message",r),clearInterval(n),t())}),1e3);function r(i){if(i.source===d&&d){if(window.removeEventListener("message",r),clearInterval(n),".vk.com"!==i.origin.slice(i.origin.length-".vk.com".length))return d.close(),void t();if(i.data.action==="vk_connect_response"+a){var o=i.data.payload;d.close(),e({provider:"vk",payload:o})}else i.data.action==="oauth_callback"+a?(e({provider:i.data.payload.name}),d.close()):(d.close(),t())}}window.addEventListener("message",r)})):Promise.reject()})),a(this,"redirectAuth",(function(e){var t=h.get(),n=t.appId,r=t.connectDomain,a=s({app_id:n,response_type:"silent_token",uuid:c(),redirect_uri:e.url,v:"0.0.2"}),i="https://".concat(r,"/auth?").concat(a);location.assign(i)}))};!function(e){e.APP_HIDE="VKSDKMiniAppHide",e.APP_READY="VKSDKMiniAppReady",e.RESIZE="VKSDKMiniAppResize",e.APP_INIT_CONFIG="VKSDKMiniAppInitConfig"}(l||(l={})),function(e){e.SUPERAPP_TOKEN="VKSDKGeneralSuperAppToken",e.AUTH_NEEDED="VKSDKGeneralAuthNeeded",e.OPEN_APP="VKSDKGeneralOpenApp"}(d||(d={}));var v,g=function e(t){var n=this;r(this,e),a(this,"handler",(function(){return{}})),a(this,"config",void 0),a(this,"destroy",(function(){delete n.config,window.removeEventListener("message",n.handleMessage)})),a(this,"onMessage",(function(e){n.handler=e})),a(this,"sendMessage",(function(e){n.config.iframe.contentWindow.postMessage(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"vk-sak-sdk"},e),n.config.origin)})),a(this,"handleMessage",(function(e){n.config.origin&&e.origin===n.config.origin&&e.source===n.config.iframe.contentWindow&&e.data&&"vk-sak-sdk"===e.data.type&&(console.info("[received from ui]",e.data),n.handler(e.data))})),this.config=t,window.addEventListener("message",this.handleMessage)},b=function e(t){var n=this;r(this,e),a(this,"iframe",void 0),a(this,"bridge",void 0),a(this,"loading",void 0),a(this,"readyPromiseResolve",null),a(this,"readyPromise",null),a(this,"bodyOverflowValue",""),a(this,"params",void 0),a(this,"events",void 0),a(this,"open",(function(e,t){return n.loading?(n.iframe.src=n.getMiniAppUrl(e,t),n.loading=new Promise((function(e){n.iframe.onload=function(){n.iframe.onload=null,e()}})),n.readyPromise=new Promise((function(e){return n.readyPromiseResolve=e}))):n.preload(e,t).catch(console.error),n.iframe.style.display="block",n.bodyOverflowValue=window.document.body.style.overflow,window.document.body.style.overflow="hidden",n.loading.then(n.handleResize).catch(console.error),n.readyPromise})),a(this,"hide",(function(){n.events.emit("hide"),n.iframe.style.display="none",window.document.body.style.overflow=n.bodyOverflowValue})),a(this,"close",(function(){window.document.body.style.overflowX="",h.events.off("superAppToken",n.onSuperAppToken),n.iframe.remove(),n.bridge.destroy(),delete n.iframe,delete n.bridge,window.removeEventListener("resize",n.handleResize)})),a(this,"preload",(function(e,t){var r=document.createElement("iframe"),a=window.innerHeight,i=isFinite(n.params.zIndex)?n.params.zIndex:999999;return r.src=n.getMiniAppUrl(e,t),r.style.cssText="\n      display: none;\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: ".concat(a,"px;\n      min-height: ").concat(a,"px;\n      border: none;\n      z-index: ").concat(i,";\n    "),n.iframe=r,document.body.appendChild(n.iframe),h.events.on("superAppToken",n.onSuperAppToken),n.bridge=new g({iframe:n.iframe,origin:"https://"+h.get().connectDomain}),n.bridge.onMessage(n.handleMessage),window.addEventListener("resize",n.handleResize),n.loading=new Promise((function(e){r.onload=function(){r.onload=null,e()}})),n.readyPromise=new Promise((function(e){return n.readyPromiseResolve=e})),n.loading})),a(this,"onSuperAppToken",(function(e){n.bridge.sendMessage({handler:d.SUPERAPP_TOKEN,params:{result:e}})})),a(this,"handleMessage",(function(e){switch(e.handler){case l.APP_HIDE:n.hide();break;case l.APP_READY:n.resolveReadyPromise(),n.handleUpdateConfig();break;case d.SUPERAPP_TOKEN:h._requestSuperAppToken();break;case d.AUTH_NEEDED:h._requestAuth()}})),a(this,"handleResize",(function(){if(n.iframe){var e=innerWidth,t=innerHeight;n.iframe.style.height="".concat(t,"px"),n.iframe.style.minHeight="".concat(t,"px"),n.bridge.sendMessage({handler:l.RESIZE,params:{viewport_width:e,viewport_height:t}})}})),a(this,"handleUpdateConfig",(function(){n.bridge.sendMessage({handler:l.APP_INIT_CONFIG,params:{fullMode:n.params.fullMode}})})),a(this,"getMiniAppUrl",(function(e,t){var r=h.get(),a=r.connectDomain,i=r.appId,o=r.superAppToken,c=r._debug,u=s({app:n.params.app,host_app_id:i,debug:c?"1":"",localhost:c?"1":"",superapp_token:o,app_query:e?JSON.stringify(e):"",app_hash:t||""});return"https://".concat(a,"/mini_app?").concat(u)})),a(this,"resolveReadyPromise",(function(){n.readyPromise&&n.readyPromiseResolve&&(n.readyPromiseResolve(),n.readyPromise=null,n.readyPromiseResolve=null)})),this.params=t,this.events=u()};!function(e){e[e.UNKNOWN=1]="UNKNOWN",e[e.MISSING_PARAM=2]="MISSING_PARAM",e[e.CONNECTION_LOST=3]="CONNECTION_LOST",e[e.USER_DENIED=4]="USER_DENIED",e[e.INVALID_PARAMS=5]="INVALID_PARAMS",e[e.CUSTOM=6]="CUSTOM",e[e.OLD_MISSING_PARAM=100]="OLD_MISSING_PARAM"}(v||(v={}));var _;!function(e){e.INIT="ConnectProfileInit"}(_||(_={}))},function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c}));var r=n(9),a=n(24),i=Object(r.createEvent)(),o=Object(r.createEvent)(),c=Object(r.createEffect)((function(e){var t=e.schoolId,n=e.gradeIds;return Object(a.a)("education.deleteGrades",{school_id:t,grade_ids:n},{showSpinner:!0})}))},,,,function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){"use strict";n(368),n(610),n(272),n(22);var r=n(632);n.d(t,"InMemoryCache",(function(){return r.a}));var a=n(201);n.d(t,"cacheSlot",(function(){return a.a}));n(318),n(358)},function(e,t,n){"use strict";var r;function a(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{type:r.SET_PANEL_LOADED,data:{id:e,isLoaded:t}}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),function(e){e.SET_PANEL_LOADED="SET_PANEL_LOADED"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=null,a={},i=1,o=Array,c=o["@wry/context:Slot"]||function(){var e=function(){function e(){this.id=["slot",i++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return e.prototype.hasValue=function(){for(var e=r;e;e=e.parent)if(this.id in e.slots){var t=e.slots[this.id];if(t===a)break;return e!==r&&(r.slots[this.id]=t),!0}return r&&(r.slots[this.id]=a),!1},e.prototype.getValue=function(){if(this.hasValue())return r.slots[this.id]},e.prototype.withValue=function(e,t,n,a){var i,o=((i={__proto__:null})[this.id]=e,i),c=r;r={parent:c,slots:o};try{return t.apply(a,n)}finally{r=c}},e.bind=function(e){var t=r;return function(){var n=r;try{return r=t,e.apply(this,arguments)}finally{r=n}}},e.noContext=function(e,t,n){if(!r)return e.apply(n,t);var a=r;try{return r=null,e.apply(n,t)}finally{r=a}},e}();try{Object.defineProperty(o,"@wry/context:Slot",{value:o["@wry/context:Slot"]=e,enumerable:!1,writable:!1,configurable:!1})}finally{return e}}();c.bind,c.noContext},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r=function(e,t){for(var n={},r={},a=t.length,i=0;i<a;i++)r[t[i]]=1;for(var o in e)r.hasOwnProperty(o)||(n[o]=e[o]);return n},a=function(e,t){return r(e,[t])}},function(e,t,n){"use strict";var r=n(463);n.d(t,"ApolloClient",(function(){return r.a})),n.d(t,"mergeOptions",(function(){return r.b}));n(373);var a=n(74);n.d(t,"NetworkStatus",(function(){return a.a}));var i=n(611);n.o(i,"ApolloLink")&&n.d(t,"ApolloLink",(function(){return i.ApolloLink})),n.o(i,"ApolloProvider")&&n.d(t,"ApolloProvider",(function(){return i.ApolloProvider})),n.o(i,"HttpLink")&&n.d(t,"HttpLink",(function(){return i.HttpLink})),n.o(i,"useApolloClient")&&n.d(t,"useApolloClient",(function(){return i.useApolloClient})),n.o(i,"useQuery")&&n.d(t,"useQuery",(function(){return i.useQuery}));n(122);var o=n(196);n.d(t,"InMemoryCache",(function(){return o.InMemoryCache}));var c=n(358);n.o(c,"ApolloLink")&&n.d(t,"ApolloLink",(function(){return c.ApolloLink})),n.o(c,"ApolloProvider")&&n.d(t,"ApolloProvider",(function(){return c.ApolloProvider})),n.o(c,"HttpLink")&&n.d(t,"HttpLink",(function(){return c.HttpLink})),n.o(c,"useApolloClient")&&n.d(t,"useApolloClient",(function(){return c.useApolloClient})),n.o(c,"useQuery")&&n.d(t,"useQuery",(function(){return c.useQuery}));var s=n(150);n.o(s,"ApolloLink")&&n.d(t,"ApolloLink",(function(){return s.ApolloLink})),n.o(s,"ApolloProvider")&&n.d(t,"ApolloProvider",(function(){return s.ApolloProvider})),n.o(s,"HttpLink")&&n.d(t,"HttpLink",(function(){return s.HttpLink})),n.o(s,"useApolloClient")&&n.d(t,"useApolloClient",(function(){return s.useApolloClient})),n.o(s,"useQuery")&&n.d(t,"useQuery",(function(){return s.useQuery}));var u=n(372);n.d(t,"HttpLink",(function(){return u.a}));n(116);var l=n(22);n.d(t,"Observable",(function(){return l.c}));var d=n(36),f=n(290);n.d(t,"gql",(function(){return f.a})),Object(d.c)("log");f.a.resetCaches,f.a.disableFragmentWarnings,f.a.enableExperimentalFragmentVariables,f.a.disableExperimentalFragmentVariables},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return l}));var r=n(114),a=new(n(198).a);function i(e,t){if(e.size){var n=[];e.forEach((function(e){return n.push(e)})),e.clear(),n.forEach(t)}}var o=new WeakMap;function c(e){var t=o.get(e);return t||o.set(e,t={vars:new Set,dep:Object(r.b)()}),t}function s(e){c(e).vars.forEach((function(t){return t.forgetCache(e)}))}function u(e){c(e).vars.forEach((function(t){return t.attachCache(e)}))}function l(e){var t=new Set,n=new Set,r=function(s){if(arguments.length>0)e!==s&&(e=s,t.forEach((function(e){c(e).dep.dirty(r),d(e)})),i(n,(function(t){return t(e)})));else{var u=a.getValue();u&&(o(u),c(u).dep(r))}return e};r.onNextChange=function(e){return n.add(e),function(){n.delete(e)}};var o=r.attachCache=function(e){return t.add(e),c(e).vars.add(r),r};return r.forgetCache=function(e){return t.delete(e)},r}function d(e){e.broadcastWatches&&e.broadcastWatches()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n(9),a=n(24),i=Object(r.createEffect)((function(e){var t={owner_id:e.ownerId,video_id:e.videoId};return Object(a.a)("education.getCalendarEventBroadcastLiveVideo",t,{showSpinner:!0})})),o=Object(r.createEvent)()},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return d}));var r,a=n(2),i=n.n(a),o=n(20),c="sferum://",s="https://sferum.ru",u="itms-apps://itunes.apple.com/app/id1542193916",l="https://play.google.com/store/apps/details?id=ru.sferum.android",d=(r={},i()(r,o.c.IOS,{label:"vkui_edu_download_app_modal_title_ios",storeUrl:u}),i()(r,o.c.ANDROID,{label:"vkui_edu_download_app_modal_title_android",storeUrl:l}),i()(r,o.c.ANDROID_HUAWEI,{label:"vkui_edu_download_app_modal_title_huawei",storeUrl:"https://appgallery.huawei.com/#/app/C103842077"}),r)},function(e,t,n){"use strict";e.exports=function(e,t,n,r,a,i,o,c){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,a,i,o,c],l=0;(s=new Error(t.replace(/%s/g,(function(){return u[l++]})))).name="Invariant Violation"}throw s.framesToPop=1,s}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return u}));var r=n(9),a=n(247),i=n(24),o=Object(r.createEffect)((function(){var e={broadcast_id:a.a.getState().id,sort:"id_desc",count:150};return Object(i.a)("education.getBroadcastComments",e)})),c=null,s=function(e){e&&(o(),c=window.setInterval((function(){o()}),5e3))},u=Object(r.createEffect)((function(){c&&window.clearInterval(c)}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(21),a=n.n(r),i=n(0),o=n(244),c=n(28);function s(e){var t=Object(c.b)(),n=t.schoolInfo,r=t.profileSchools,s=t.menuSchoolRequests,u=Object(i.useMemo)((function(){var t,i;return null===(t=e?[].concat(a()(r),a()(s)).find((function(t){return t.id===e})):n)||void 0===t||null===(i=t.organization_type)||void 0===i?void 0:i.structure}),[null==n?void 0:n.id,e]),l=Object(i.useMemo)((function(){return{isHorizontal:"horizontal"===u,isVertical:"vertical"===u}}),[u]);return{isHorizontal:l.isHorizontal,isVertical:l.isVertical,getOrgKeyWithPrefix:Object(i.useCallback)((function(e){return Object(o.a)(u,e)}),[u])}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r=n(6),a=n.n(r),i=n(0),o=n.n(i),c=n(1),s=n(17),u=n.n(s),l=n(18),d=n(10),f=n(19),p="more_horizontal_16",h=!1;function m(){h||(Object(d.a)(new u.a({id:p,viewBox:"0 0 16 16",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="more_horizontal_16"><g fill="none" fill-rule="evenodd"><path d="M0 0h16v16H0z" /><path d="M13 9.5a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm-5 0a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm-5 0a1.5 1.5 0 110-3 1.5 1.5 0 010 3z" fill="currentColor" /></g></symbol>'})),h=!0)}var v=function(e){return Object(d.b)((function(){m()}),[]),o.a.createElement(f.a,Object(l.assign)({},e,{viewBox:"0 0 16 16",id:p,width:isNaN(e.width)?16:+e.width,height:isNaN(e.height)?16:+e.height}))};v.mountIcon=m;var g=v,b=!1;function _(){b||(Object(d.a)(new u.a({id:"more_vertical_16",viewBox:"0 0 8 16",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 16" id="more_vertical_16"><g fill="none" fill-rule="evenodd"><path d="M0 0h8v16H0z" /><path d="M4 4.5c.825 0 1.5-.675 1.5-1.5S4.825 1.5 4 1.5 2.5 2.175 2.5 3 3.175 4.5 4 4.5zm0 2c-.825 0-1.5.675-1.5 1.5S3.175 9.5 4 9.5 5.5 8.825 5.5 8 4.825 6.5 4 6.5zm0 5c-.825 0-1.5.675-1.5 1.5s.675 1.5 1.5 1.5 1.5-.675 1.5-1.5-.675-1.5-1.5-1.5z" fill="currentColor" /></g></symbol>'})),b=!0)}var y=function(e){return Object(d.b)((function(){_()}),[]),o.a.createElement(f.a,Object(l.assign)({},e,{viewBox:"0 0 8 16",id:"more_vertical_16",width:isNaN(e.width)?8:+e.width,height:isNaN(e.height)?16:+e.height}))};y.mountIcon=_;var E=y,O=(n(1049),function(e){var t=a()({},e),n=Object(c.Pb)();return o.a.createElement(c.J,a()({},t,{className:"CellMoreButton",icon:n===c.H?o.a.createElement(g,null):o.a.createElement(E,null)}))}),w=o.a.memo(O)},function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(0),a=n.n(r),i=n(1),o=n(17),c=n.n(o),s=n(18),u=n(10),l=n(19),d="filter_24",f=!1;function p(){f||(Object(u.a)(new c.a({id:d,viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="filter_24"><path fill-rule="evenodd" clip-rule="evenodd" d="M6 8.9c.08 0 .159-.01.233-.03a2.901 2.901 0 005.534 0c.075.02.153.03.233.03h8a.9.9 0 100-1.8h-8c-.08 0-.158.01-.233.03a2.901 2.901 0 00-5.534 0A.9.9 0 006 7.1H4a.9.9 0 100 1.8h2zm3-2a1.1 1.1 0 100 2.2 1.1 1.1 0 000-2.2zM3.1 16a.9.9 0 01.9-.9h8a.9.9 0 01.233.03 2.901 2.901 0 015.534 0A.902.902 0 0118 15.1h2a.9.9 0 110 1.8h-2a.902.902 0 01-.233-.03 2.901 2.901 0 01-5.534 0 .9.9 0 01-.233.03H4a.9.9 0 01-.9-.9zm10.8 0a1.1 1.1 0 112.2 0 1.1 1.1 0 01-2.2 0z" fill="currentColor" /></symbol>'})),f=!0)}var h=function(e){return Object(u.b)((function(){p()}),[]),a.a.createElement(l.a,Object(s.assign)({},e,{viewBox:"0 0 24 24",id:d,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};h.mountIcon=p;var m=h,v=n(106),g=n(111),b=function(e){var t=Object(v.c)().getLangKey,n=Object(i.Ob)().viewWidth,r=e.onFiltersClick;return a.a.createElement(i.lb,{className:e.className,autoComplete:"off",value:e.value,onChange:e.onChange,placeholder:t("vkui_edu_search_placeholder"),after:t("vkui_common_cancel"),icon:Object(g.a)(n)&&r?a.a.createElement(m,null):null,onIconClick:r})}},function(e,t,n){"use strict";var r;function a(e){return{type:r.SET_INVITE_LINK_INFO,data:e}}function i(e){return{type:r.SET_INVITE_LINK_CREATE_INFO,data:e}}function o(e){return{type:r.UPDATE_INVITE_LINK_CREATE_INFO,data:e}}n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return o})),function(e){e.SET_INVITE_LINK_INFO="SET_INVITE_LINK_INFO",e.SET_INVITE_LINK_CREATE_INFO="SET_INVITE_LINK_CREATE_INFO",e.UPDATE_INVITE_LINK_CREATE_INFO="UPDATE_INVITE_LINK_CREATE_INFO"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var r=n(21),a=n.n(r),i=n(2),o=n.n(i),c=n(7),s=n.n(c),u=n(0),l=n(26),d=n.n(l),f=n(28),p=n(5),h=n(61),m=n(126),v=n(32),g=n(88),b=n(59),_=n(491),y=n(46),E=n(326),O=n(106),w=n(3),C=n(24),S=n(211),A=n(216),k=n(241);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=function(){var e=Object(C.b)().apiRequest,t=Object(f.a)(),r=Object(E.b)(),i=Object(O.c)(),o=Object(f.b)(),c=o.callsLib,l=o.calls,j=o.accountInfo,I=Object(v.a)().go,P=Object(u.useMemo)((function(){return{authContext:r,langUtils:i,apiHost:y.d.apiHost}}),[i,r]),D=function(n){e("messages.getConversationsWithCalls").then((function(e){t(Object(m.b)(Object(b.k)(n,e.items)))})).catch((function(e){console.log(e)}))},N=function(){return Promise.all([n.e(14).then(n.bind(null,1212)),n.e(0).then(n.bind(null,1156)),n.e(0).then(n.bind(null,1157))]).then((function(e){var t=s()(e,1)[0];return t=t}))},x=function(e,t){e.preventDefault();var n=t||e.target.pathname;if(n){var r=n.split("/"),a=s()(r,2)[1];if(a.includes("id")){var i=a.replace("id","");c&&(c.collapseCall(),I(p.i.PROFILE_COMPACT,{userId:i}))}}},R=function(e){p.d.getState().page===p.j.MESSAGES?t(Object(h.e)({isNewMail:!0,path:"/mail",query:{act:"show",peer:e},url:"/mail?act=show&peer=".concat(e)})):I(p.j.MESSAGES,{act:"show",peer:e}),Object(_.b)({event_type:"open_chat_from_call"})};return{getCallsList:D,loadCallsLib:N,initCalls:function(e,n){N().then((function(r){var a=(0,r.initUserCalls)({account:e,user:n,appProps:P,goToPeer:R,goToProfile:x,onBeforeCallStart:function(){D(e.id)},onAfterCallFinish:function(){D(e.id)},streamUrlExtractor:function(e){var t=e.videoId,n=e.ownerId;return Object(S.a)("".concat(n,"_").concat(t))}});Promise.resolve(a).then((function(e){Object(k.isBoolean)(e)||t(Object(m.c)(e))}))}))},initAnonymsCalls:function(e){return N().then((function(t){return(0,t.initAnonymCalls)(T(T({},e),{},{appProps:P}))}))},onCallUser:function(e,n){var r=d.a.isWebView(),a={peerId:e,conversationData:T({name:n},j),isWithVideo:!1},i={peerId:e,peerType:A.b.USER,name:n,joinLink:"",type:g.a.OutgoingCall,isGroup:!1};Object(b.m)(e,i,l,t),r?d.a.send("VKWebAppCustomMessage",{action:"startCall",payload:a}):c&&c.call(a.peerId,a.isWithVideo,void 0,w.v.CONVO_SNIPPET)},onCallGroup:function(e,n,r){var a=d.a.isWebView(),i={peerId:e,conversationData:n,isWithVideo:!1},o={peerId:e,peerType:A.b.CHAT,name:n.name,joinLink:"",type:g.a.OutgoingCall,isGroup:!0};Object(b.m)(e,o,l,t),a?d.a.send("VKWebAppCustomMessage",{action:"startCall",payload:i}):c&&c.startGroupCall(i.peerId,void 0,void 0,void 0,void 0,!1,r)},onCallJoinByLink:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=!!p.d.getState().modal,i=l.find((function(t){return e===t.peerId})),o={peerId:e,name:(null==i?void 0:i.name)||""};if(Object(b.i)(e,l,t),a&&p.d.closeModal(),d.a.isWebView()){var s={action:"joinCall",payload:{peerId:e,joinLink:n,conversationData:o,isWithVideo:r}};d.a.send("VKWebAppCustomMessage",s)}else c&&c.joinCallByLink(n,null,!1,w.v.LINK_JOIN_PAGE)},onCallJoinByPreview:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.join_link,i=e.preview,o=e.profiles,s=e.anonyms,u=void 0===s?[]:s,d=[].concat(a()(o.map((function(e){return T(T({},e),{},{name:"".concat(e.first_name," ").concat(e.last_name)})}))),a()(u)),f={peerId:0,canAddMembers:!0,tab:i.title,photo:i.photo.photo_200};c&&c.joinCallByLink(r,[f,d],n,w.v.CONVO_SNIPPET).then((function(){Object(b.h)(r,l,t)}))},onCallGoToProfile:x,onCallGoToPeer:R}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c}));n(1);var r=n(26),a=n.n(r),i=n(46),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="".concat(location.host).concat(location.pathname);return a.a.isWebView()&&(n="".concat(i.d.edu_host,"/")),t&&(n="https://".concat(n)),"".concat(n).concat(e)},c=function(e){return o("?broadcast=".concat(e))}},function(e,t,n){var r=n(310),a=n(562)((function(e,t,n){r(e,n,t)}));e.exports=a},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i}));var r={ADMINISTRATOR:"administrator",MODERATOR:"moderator",EDITOR:"editor",CREATOR:"creator"},a={USER:"user",CHAT:"chat"},i={S:"s"}},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(174),a=n(26),i=n.n(a),o=n(173),c=function(){var e=Object(r.a)().isClientVersionMatches,t=function(){return i.a.isWebView()&&e(o.a.EJD_OAUTH)};return{isShowOAuthLeadingComponent:function(){return!i.a.isWebView()||t()},isShowOnWebView:t}}},function(e,t,n){"use strict";n.d(t,"e",(function(){return m})),n.d(t,"d",(function(){return v})),n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return b})),n.d(t,"c",(function(){return _}));var r,a=n(2),i=n.n(a),o=n(104),c=n(190),s=n(46),u=n(42),l=n(23),d=n(62);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}c.a.init({appId:s.d.host_app_id}),c.a.onRequestSuperAppToken((function(){return v().then((function(){return c.a.get().superAppToken}))})),c.a.onAuth((function(){return v().then((function(){return c.a.get().superAppToken}))})),function(e){e.CAPTCHA="captcha"}(r||(r={}));var h={logoutHash:"",loginHash:""};function m(){return fetch("https://".concat(s.d.edu_host,"/get_hashes?"),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){return e.error?Promise.reject(e.error):(h.logoutHash=e.logout_hash,Promise.resolve())})).catch((function(e){return Promise.reject(e)}))}function v(e){var t=o.b.create(p(p({},e),{},{app_id:s.d.app_id}));return m().then((function(){return fetch("https://".concat(s.d.edu_host,"/get_token?").concat(t),{credentials:"include"})})).then((function(e){return e.json()})).then((function(e){if(!e.error)switch(e.type){case r.CAPTCHA:return e;default:return c.a.setSuperAppToken(e.host_access_token),{access_token:e.access_token,expires:Date.now()/1e3+900}}return Object(u.b)(l.y),Object(u.b)(l.t),Object(u.b)(l.s),{access_token:"",expires:0}})).catch((function(){return Object(u.b)(l.y),Object(u.b)(l.t),Object(u.b)(l.s),Promise.resolve({access_token:"",expires:0})}))}function g(e){return e.payload?function(e){if(!e.payload)return Promise.reject(e);var t={method:"POST",body:o.b.create({uuid:e.payload.uuid,silent_token:e.payload.token}),headers:{"Content-Type":"application/x-www-form-urlencoded"}};return fetch("https://".concat(s.d.edu_host,"/get_csrf_hash"),t).then((function(e){return e.json()})).then((function(e){return e.error?Promise.reject(e.error):(h.loginHash=e.hash,Promise.resolve())}))}(e).then((function(){var t={method:"POST",body:o.b.create({uuid:e.payload.uuid,silent_token:e.payload.token,hash:h.loginHash}),headers:{"Content-Type":"application/x-www-form-urlencoded"},credentials:"include"};return fetch("https://".concat(s.d.edu_host,"/create_session"),t)})).then((function(e){return e.json()})):Promise.reject(e)}function b(){return c.b.userVisibleAuth()}function _(){return new Promise((function(e){h.logoutHash?e(h.logoutHash):m().then((function(){return e(h.logoutHash)})).catch((function(t){e(t)}))})).then((function(){var e={method:"POST",body:o.b.create({hash:h.logoutHash}),headers:{"Content-Type":"application/x-www-form-urlencoded"},credentials:"include"};return fetch("https://".concat(s.d.edu_host,"/delete_session"),e).then((function(){Object(u.b)(l.y),Object(u.b)(l.t),Object(u.b)(l.s),Object(u.b)(l.E),Object(d.i)()}))}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(0),a=n(106),i=n(38),o=n(5),c=n(55),s=n(58),u=n(32),l=n(102),d=n(101),f=n(140),p=function(e){var t=e.schoolId,n=Object(a.c)().getLangKey,p=Object(i.c)(f.a),h=Object(u.a)().go,m=Object(c.a)().showAlert,v=Object(s.a)(),g=v.showSnackbarInfo,b=v.showSnackbarError,_=Object(r.useCallback)((function(){Object(l.f)(t),h(o.i.CREATE_BROADCAST)}),[t]),y=Object(r.useCallback)((function(e){Object(l.g)(e),h(o.i.CREATE_BROADCAST)}),[t,p]),E=Object(r.useCallback)((function(e,t){return function(){Object(d.a)(e);var r=d.a.doneData.watch((function(){g(n("vkui_edu_broadcast_delete_shackbar_success_text")),t&&t(),r.unsubscribe()})),a=d.a.failData.watch((function(){b("vkui_edu_broadcast_delete_shackbar_error_text"),a.unsubscribe()}))}}),[t,p]),O=Object(r.useCallback)((function(e,t){m({title:"",text:n("vkui_edu_broadcast_delete_alert_text"),actions:[{title:n("vkui_common_cancel"),mode:"cancel"},{title:n("vkui_common_delete"),mode:"destructive",action:E(e,t)}]})}),[t,p]);return{getBroadcastListFx:d.b,createBroadcastEvent:_,editBroadcastEvent:y,showDeleteBroadcastAlert:O}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l}));var r=n(106),a=n(0),i=n(119),o=n(1167),c=n(1168),s=n(115),u=function(){var e=Object(r.c)().getLangKey;return Object(a.useMemo)((function(){var t=function(t,n,r){var a=Object(i.c)(t,n),o=a.hours,c=a.minutes;return e(o?r.hoursAndMinutes:r.minutes).replace("%h",o.toString()).replace("%m",(c+1).toString())};return{getStatusText:function(n){var r=n.from,a=n.now;return a>r?e("vkui_edu_schedule_event_in_progress_now"):Object(o.a)(r,a)>2?"".concat(e("vkui_edu_schedule_event_start_at")," ").concat(Object(c.a)(r,"HH:mm")):t(r,a,{hoursAndMinutes:"vkui_edu_schedule_event_start_in_h_min",minutes:"vkui_edu_schedule_event_start_in_min"})},getNextBadgeText:function(n){var r=n.from,a=n.now;return a>r?e("vkui_edu_schedule_event_in_progress_now"):t(r,a,{hoursAndMinutes:"vkui_edu_schedule_event_next_in_h_min",minutes:"vkui_edu_schedule_event_next_in_min"})}}}),[e])},l=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object(s.a)(),a=r.profileSchools;if(e){var o=Object(i.f)(e,n);if(e.school_id&&e.school_id!==t){var c=a.find((function(t){return t.id===e.school_id}));o=c?"".concat(o," · ").concat(c.name):o}return o}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return O})),n.d(t,"e",(function(){return w})),n.d(t,"d",(function(){return C})),n.d(t,"c",(function(){return S})),n.d(t,"a",(function(){return A}));var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="logo_android_16",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="logo_android_16"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.75 2.47a.5.5 0 01.866.5l-1.333 2.308A7.994 7.994 0 0116 12.037H0A7.993 7.993 0 013.62 5.34L2.25 2.97a.5.5 0 01.866-.5l1.372 2.376A7.968 7.968 0 018 4.037a7.97 7.97 0 013.407.76L12.75 2.47zM13 9.037a1 1 0 11-2 0 1 1 0 012 0zm-9 1a1 1 0 100-2 1 1 0 000 2z" fill="currentColor" /></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 16 16",id:l,width:isNaN(e.width)?16:+e.width,height:isNaN(e.height)?16:+e.height}))};p.mountIcon=f;var h=p,m=n(20),v=n(47),g=n(240),b=n(269),_=n(6),y=n.n(_),E=function(e){return a.a.createElement("svg",y()({width:"28",height:"28",xmlns:"http://www.w3.org/2000/svg"},e),a.a.createElement("path",{d:"M22.58 21.05c-.55-.45-.33-1.43-.9-1.92.55-3.36-1-6.33-2.85-8.23-1.55-1.6-1.05-3.15-1.05-4.49 0-2.15-.88-4.41-3.55-4.41-2.86 0-3.64 2.38-3.67 3.74-.06 3.26.66 4.1-1.25 6.48-2.24 2.8-2.57 5.58-2.07 7.06-.23.27-.55.58-1.15.83-1.65.72-.44 1.93-.9 2.78-.13.25-.19.5-.19.74 0 .75.6 1.4 1.68 1.3 1.46-.12 2.8.91 3.68.91.77 0 1.4-.44 1.7-1.04a9.66 9.66 0 014.45.06c.25.69.92 1.14 1.66 1.14 1.63 0 1.95-1.85 3.82-2.48A1.54 1.54 0 0023 22.04c0-.4-.14-.76-.42-1zm-9.15-10.47c-.31 0-.58-.25-1-.56-.52-.4-1.06-.62-1.05-1.03 0-.29.37-.37.86-.69.53-.33.73-.67 1.25-.67.53 0 .7.27 1.41.58.71.31 1.2.43 1.2.78 0 .35-.74.6-1.15.86-.62.38-.93.73-1.52.73zm1.67-5.21c.88.14.98 1.69.56 2.45l-.36-.14c.19-.54.18-1.44-.43-1.5-.4-.03-.64.48-.7.93a1.69 1.69 0 00-.52-.13c.06-.92.66-1.74 1.45-1.61zm-3.4.33c.67-.17 1.07.62 1.07 1.43l-.3.2c-.05-.35-.2-.9-.59-.78-.4.12-.34 1.08-.11 1.28l-.3.17c-.43-.71-.43-2.14.23-2.3zM9.58 24.94c-1.96-.89-2.63-.69-3-.69-.78 0-1.04-.58-.74-1.12.25-.47.17-.96.1-1.35-.09-.6-.1-.8.48-1.05a3.4 3.4 0 001.45-1.12c.76-.94 1.52.53 2.15 1.85.4.85 1.21 1.28 1.46 2.22.22.87-.71 1.8-1.9 1.26zm6.99-1.87c-1.39.67-3.15.98-4.47.3-.2-.57-.5-.93-.84-1.3.54-.14.94-.8.46-1.48-.51-.73-1.56-1.23-2.61-2.04-.99-.77-1.3-2.65.04-4.75-.65 1.86-.27 3.58.06 4.07.07-.99.15-2.64 1.5-4.62.68-1 .69-2.31.7-3.14l.62.43c.46.34.84.7 1.39.7.8 0 1.26-.46 1.88-.85.24-.15.61-.3.92-.51.52 2.48 2.68 5.45 2.8 7.15.5-1.03-.14-3.51-.14-3.51.84 1.28.9 2.35.94 3.67.6.24 1.22.86 1.28 1.7l-.24-.04c-.13-.92-2.61-2.27-2.83-.54-1.2.19-.76 2.07-1 3.3-.11.55-.31 1-.46 1.46zm4.84-.04c-.98.38-1.65 1.18-2.1 1.69-.88.96-2.05.5-2.17-.4-.13-.97.36-1.5.57-2.58.2-.99-.02-2.5.43-2.67.3 1.76 2.07 1.02 2.47.54.66 0 .71.22.86.84.1.38.22.7.58 1.09.42.45.29 1.13-.64 1.49zm-8-13c-.65 0-1.13-.44-1.53-.78-.2-.17.05-.48.25-.31.39.33.78.67 1.28.67.61 0 1.15-.52 1.87-.8.25-.1.39.28.14.38-.7.28-1.27.83-2 .83z",fill:"currentColor"}))},O=function(e){return e===m.c.LINUX?v.f[m.c.LINUX].deb.x64:v.f[e]},w=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.d.OS;switch(t){case m.c.MAC:return e("vkui_edu_download_mac_os_system_requirements");case m.c.LINUX:return e("vkui_edu_download_linux_system_requirements");case m.c.WINDOWS:default:return e("vkui_edu_download_windows_system_requirements")}}},C=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.d.OS;return m.d.OS===m.c.MAC?e("vkui_edu_target_os_mac"):e("vkui_edu_download").replace("{platform}",t)}},S=function(e){var t=function(t){var n;return null===(n=e("vkui_edu_download"))||void 0===n?void 0:n.replace("{platform}",t)};return[{type:m.c.WINDOWS,url:v.f[m.c.WINDOWS],title:t("Windows"),filename:v.g[m.c.WINDOWS]},{type:m.c.MAC,url:v.f[m.c.MAC],title:t("Mac OS"),filename:v.g[m.c.MAC]},{type:m.c.LINUX,url:v.f[m.c.LINUX].deb[m.a.X86],title:t("Linux (.deb 32 bit)"),filename:v.g[m.c.LINUX].deb[m.a.X86]},{type:m.c.LINUX,url:v.f[m.c.LINUX].deb[m.a.X64],title:t("Linux (.deb 64 bit)"),filename:v.g[m.c.LINUX].deb[m.a.X64]},{type:m.c.LINUX,url:v.f[m.c.LINUX].rpm[m.a.X86],title:t("Linux (.rpm 32 bit)"),filename:v.g[m.c.LINUX].rpm[m.a.X86]},{type:m.c.LINUX,url:v.f[m.c.LINUX].rpm[m.a.X64],title:t("Linux (.rpm 64 bit)"),filename:v.g[m.c.LINUX].rpm[m.a.X64]}]},A=function(e){switch(e){case m.c.MAC:return a.a.createElement(g.a,{width:24,height:24,className:"CallInstructionModal__appIcon"});case m.c.LINUX:return a.a.createElement(E,{width:24,height:24,className:"CallInstructionModal__appIcon"});case m.c.IOS:return a.a.createElement(g.a,{width:24,height:24,className:"CallInstructionModal__appIcon"});case m.c.ANDROID:return a.a.createElement(h,{width:24,height:24,className:"CallInstructionModal__appIcon"});default:return a.a.createElement(b.a,{width:24,height:24,className:"CallInstructionModal__appIcon"})}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var r="api.vk.com",a="login.vk.com",i=86400},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c}));var r=n(9),a=n(24),i=n(367),o=Object(r.createDomain)("toggles"),c=o.createEffect((function(){return Object(a.a)("account.getTogglesExternal",{toggles:Object.values(i.a)})}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(82),a={DEFAULT:{role:null,validated:!0,multiple:!0,headerText:"vkui_edu_select_members_students_title"},MANAGER:{role:r.a.TEACHER,multiple:!1,validated:!0,headerText:"vkui_edu_select_members_manager_title"},TEACHERS:{role:r.a.TEACHER,multiple:!0,validated:!0,placeholder:"vkui_edu_select_members_teachers_placeholder",headerText:"vkui_edu_select_members_teachers_title"},STUDENTS_ADD:{role:r.a.STUDENT,multiple:!0,validated:!0,placeholder:"vkui_edu_select_members_students_placeholder",headerText:"vkui_edu_select_members_students_title"},STUDENTS_SELECT:{role:r.a.STUDENT,multiple:!0,headerText:"vkui_edu_select_members_students_title",validated:!1,placeholder:"vkui_edu_select_members_students_placeholder",submitText:"vkui_edu_select_members_save"}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var r=n(9),a=n(249),i=Object(r.restore)(a.a.doneData,null).reset(a.b),o=Object(r.restore)(a.a.finally.map((function(){return!0})),!1).reset(a.b)},function(e,t,n){"use strict";n.d(t,"c",(function(){return G})),n.d(t,"b",(function(){return W})),n.d(t,"a",(function(){return Y}));var r=n(30),a=n.n(r),i=n(31),o=n.n(i),c=n(11),s=n.n(c),u=n(33),l=n.n(u),d=n(39),f=n.n(d),p=n(34),h=n.n(p),m=n(2),v=n.n(m),g=n(0),b=n.n(g),_=n(100),y=n(223),E=n(57),O=n.n(E),w=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a()(this,e),v()(this,"apiMethod",void 0),v()(this,"attempts",void 0),v()(this,"restartWait",void 0),v()(this,"aborted",void 0),v()(this,"grouped",void 0),v()(this,"apiParams",void 0),v()(this,"options",void 0),v()(this,"promise",void 0),v()(this,"resolve",void 0),v()(this,"reject",void 0),this.apiMethod=t,this.apiParams=r,this.options=i,this.attempts=0,this.restartWait=3e3,this.aborted=!1,this.grouped=!1,this.promise=new Promise((function(e,t){n.resolve=e,n.reject=t}))}return o()(e,[{key:"abort",value:function(){this.aborted=!0}},{key:"isAborted",value:function(){return this.aborted}},{key:"canRestart",value:function(){this.attempts+=1,this.restartWait*=1.5;var t=e.DEFAULT_ATTEMPTS_COUNT;return"number"==typeof this.options.attempts&&(t=this.options.attempts),this.attempts<t}},{key:"canGroupInExecute",value:function(){return!this.apiMethod.includes("execute")&&(!(this.attempts>0)&&(!this.apiParams.v&&(!this.apiParams.access_token&&(!1!==this.options.grouping&&(void 0===this.options.method&&(void 0===this.options.timeout&&(void 0===this.options.headers&&(void 0===this.options.signal&&void 0===this.options.attempts))))))))}},{key:"toString",value:function(){var e=this,t={};return Object.keys(this.apiParams).forEach((function(n){var r=e.apiParams[n];null!=r&&("object"===O()(r)?t[n]=String(r):t[n]=r)})),"API.".concat(this.apiMethod,"(").concat(JSON.stringify(t),")")}}]),e}();v()(w,"DEFAULT_ATTEMPTS_COUNT",5);var C=n(377),S=n(642),A=n(1),k=n(170),j=n(92);var T=n(51),I=n(556),P=n(557),D=n(120),N=n(186),x=n(110),R=n(376),M=n(375),L=n(1328),B=n(104),F=n(282);function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}var z=b.a.createContext({});function G(){return Object(g.useContext)(z)}var W=b.a.createContext({}),q=b.a.createContext({}),K=function(e){l()(n,e);var t=U(n);function n(e){var r;return a()(this,n),r=t.call(this,e),v()(s()(r),"interval",void 0),v()(s()(r),"launched",void 0),v()(s()(r),"timeout",void 0),v()(s()(r),"queue",void 0),v()(s()(r),"errorProcessing",void 0),v()(s()(r),"apiContext",Object(F.a)((function(){return{apiRequest:r.apiRequest,trackEvent:r.trackEvent,trackStart:r.trackStart,cua:r.state.cua}}))),v()(s()(r),"apiErrorContext",Object(F.a)((function(){return{popout:r.state.apiErrorPopout}}))),v()(s()(r),"cuaContext",Object(F.a)((function(){return r.state.cua||{}}))),v()(s()(r),"apiRequest",(function(e,t,n){return"string"!=typeof e?Promise.reject(new Error("[API.apiRequest] method is not defined")):r.enqueue(e,t,n)})),v()(s()(r),"trackEvent",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.apiRequest("stats.trackEvents",{events:JSON.stringify([V(V(V({},r.getBaseTrackEventFields()),e),t)])})})),v()(s()(r),"trackStart",(function(){(T.f||T.e)&&(r.apiRequest("stats.trackVisitor").catch((function(){return!0})),"complete"===document.readyState||"interactive"===document.readyState?r._trackStart():document.addEventListener("DOMContentLoaded",r._trackStart));var e=Number(M.a.vk_user_id)||0;e?Object(x.e)({id:String(e)}):r.apiRequest("users.get").then((function(e){var t=e[0];Object(x.e)({id:t.id,username:Object(R.a)(t)})})).catch((function(e){return Object(N.a)("error","track start",e)}))})),v()(s()(r),"_trackStart",(function(){var e=r.props,t=e.startTime,n=e.app,a=e.langCode,i=Object(k.d)(t);r.trackEvent({event_type:"app_start",fetch_start_time:i.fetchStart,start_time:i.startTime,dom_content_loaded_time:i.domContentLoadedEventStart,token_received_time:i.tokenReceived,complete_start_time:i.completeStartTime,app:n,lang:a}).catch((function(){return!0}))})),r.state={apiErrorPopout:null,cua:null},r.interval=Math.ceil(1133/r.props.requestsLimit),r.launched=!1,r.timeout=void 0,r.queue=[],r.errorProcessing=!1,r}return o()(n,[{key:"componentDidUpdate",value:function(e){var t=this.props.access_token,n=e.access_token;t&&n&&t!==n&&this.errorProcessing&&(this.errorProcessing=!1,this.worker())}},{key:"enqueue",value:function(e,t,n){var r=new w(e,t,n);return this.queue.push(r),this.worker(),r.promise}},{key:"requeue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.queue.unshift(e),n?setTimeout((function(){return t.worker()}),n):this.worker(),e.promise}},{key:"worker",value:function(){var e=this;if(!this.launched){this.launched=!0;setTimeout((function t(){if(0===e.queue.length||e.errorProcessing)return window.clearTimeout(e.timeout),e.launched=!1,void(e.errorProcessing&&Object(N.a)("warn","API","error processing, stop worker"));var n;"grouping"===e.props.requestsMode?function(){if(e.queue[0].canGroupInExecute()&&1!==e.queue.length){for(var n=[],r=0;r<e.queue.length;r+=1)if(e.queue[r].canGroupInExecute()){var a=e.queue.splice(r,1)[0];if(r-=1,n.push(a),n.length>=25)break}var i=new w("execute",{code:"return [".concat(n.join(","),"];")});i.grouped=!0,e.performTask(i),i.promise.then((function(e){var t=0;e.response.forEach((function(r,a){!1===r?(n[a].reject(e.errors[t]),t+=1):n[a].resolve(r)}))}),(function(e){n.forEach((function(t){return t.reject(e)}))}))}else e.performTask(e.queue.shift());e.timeout=window.setTimeout(t,e.interval)}():((n=e.queue.splice(0,e.props.requestsLimit)).forEach((function(t){return e.performTask(t)})),e.timeout=window.setTimeout(t,(n.length+1)*e.interval))}),0)}}},{key:"performTask",value:function(e){var t=this,n=this.props,r=n.v,a=n.lang,i=n.access_token,o=n.host,c=n.marker,s=e.apiMethod,u=V({lang:a,v:r,access_token:i},e.apiParams),l=s.startsWith("execute");"execute"===s&&(u.code=(u.code||"").replace(/^\s+/gm,"").replace(/\t|\n/gm,"").trim());var d=V({},e.options.headers||{});"header"===c?d.uikit=1:"param"===c&&(u.vkui=1),fetch("https://".concat(o,"/method/").concat(s),{method:e.options.method||"POST",signal:e.options.signal,body:B.b.create(u),mode:"cors",headers:V({"Content-Type":"application/x-www-form-urlencoded"},d)}).then((function(e){return e.json()})).then((function(n){var r=n.response,a=n.execute_errors,i=void 0===a?[]:a,o=n.error;if(o)return t.processError(e,o);if(l){if(e.grouped)return e.resolve({response:r||[],errors:i});if(!1===r&&i.length)return e.reject(i[0]||{});e.resolve(r)}e.resolve(r)})).catch((function(n){if(Object(N.a)("error","API","request error",n),Object(x.b)({level:L.a.Warning,category:"API",message:"request error",data:n}),e.canRestart()&&"AbortError"!==n.name){var r='restart "'.concat(e.apiMethod,'" request (').concat(e.attempts," attempts)");return Object(N.a)("info","API",r),Object(x.b)({level:L.a.Warning,category:"API",message:r}),void t.requeue(e,e.restartWait)}e.reject(n)}))}},{key:"processError",value:function(e,t){var n=this,r=t.error_code,a=t.error_msg,i=this.props.requestAccessToken;return Object(N.a)("error","API","process error (".concat(t.error_code,") ").concat(t.error_msg),{task:e,error:t}),r===_.b&&i?Object(j.c)(a)&&/sig param/i.test(a)?e.reject(t):(this.errorProcessing=!0,i({force:!0}),this.requeue(e)):r===_.f?this.requeue(e,1e3):r===_.c?(this.errorProcessing=!0,this.setState({apiErrorPopout:b.a.createElement(C.a,{captcha_img:t.captcha_img,onSubmit:function(r){n.errorProcessing=!1,n.setState({apiErrorPopout:null}),r?(e.apiParams.captcha_sid=t.captcha_sid,e.apiParams.captcha_key=r,n.requeue(e)):e.reject(t)},onCancel:function(){n.errorProcessing=!1,n.setState({apiErrorPopout:null}),e.reject(V(V({},t),{},{captchaCanceled:!0}))},onClose:function(){n.errorProcessing=!1,n.setState({apiErrorPopout:null}),e.reject(V(V({},t),{},{captchaCanceled:!0}))}})})):r===_.e?(this.errorProcessing=!0,this.setState({apiErrorPopout:b.a.createElement(S.a,{sitekey:t.key,lang_code:t.lang_code,onSubmit:function(t){return n.errorProcessing=!1,n.setState({apiErrorPopout:null}),e.apiParams.recaptcha=t,n.requeue(e)}})})):Object(I.b)(r)?this.setState({cua:{error_code:t.error_code,session:t.session,resolve:function(){return n.setState({cua:null}),n.requeue(e)},reject:function(){n.setState({cua:null}),e.reject({cuaCanceled:!0})}}}):void e.reject(t)}},{key:"getBaseTrackEventFields",value:function(){var e=this.props.clientVersion,t=(A.I?"android":"ios")+(T.c?"_mvk":"");return{e:"vkui_event",app_name:"education",location:window.location.href,lang:Object(D.a)(),platform:t,client_version:[t,e||"unknown"].join("_"),network_type:Object(P.a)()}}},{key:"render",value:function(){return b.a.createElement(z.Provider,{value:this.apiContext()},b.a.createElement(W.Provider,{value:this.apiErrorContext()},b.a.createElement(q.Provider,{value:this.cuaContext()},this.props.children)))}}]),n}(g.PureComponent);v()(K,"defaultProps",{host:y.b,lang:0,marker:"header",requestsMode:"grouping",requestsLimit:3});var Y=K},function(e,t,n){"use strict";var r;function a(e){return{type:r.SET_SCHOOL_INFO,data:e}}function i(e){return{type:r.SET_SCHOOL_INFO_ERROR,data:e}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),function(e){e.SET_SCHOOL_INFO="SET_SCHOOL_INFO",e.SET_SCHOOL_INFO_ERROR="SET_SCHOOL_INFO_ERROR"}(r||(r={}))},function(e,t,n){"use strict";function r(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,r=e.formats[n]||e.formats[e.defaultWidth];return r}}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return c}));var r=n(9),a=n(24),i=Object(r.createEvent)(),o=Object(r.createEffect)((function(e){return Object(a.a)("education.getSchoolMembers",{group_id:e})})),c=Object(r.createEffect)((function(e){var t=e.schoolId,n=e.searchValue;return Object(a.a)("education.getSchoolMembers",{group_id:t,q:n})}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r,a,i,o=n(2),c=n.n(o),s=n(9),u=n(80),l={loading:(r={},c()(r,u.a.Contacts,!0),c()(r,u.a.Chats,!0),c()(r,u.a.Grades,!0),r),listeners:(a={},c()(a,u.a.Contacts,[]),c()(a,u.a.Chats,[]),c()(a,u.a.Grades,[]),a),selectedListeners:(i={},c()(i,u.a.Contacts,[]),c()(i,u.a.Chats,[]),c()(i,u.a.Grades,[]),i)},d=Object(s.createStore)(l)},function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return s}));var r=n(21),a=n.n(r),i=n(9),o=n(24),c=Object(i.createEffect)((function(e){var t=e.creatorId,n=e.speakerIds,r=e.listenersIds,i={user_ids:[t].concat(a()(n),a()(r)).join(",")};return Object(o.a)("users.get",i)})),s=Object(i.createEffect)((function(e){var t={event_id:e};return Object(o.a)("education.getCalendarEvent",t)}))},,,function(e,t,n){"use strict";var r=n(436);e.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},function(e,t,n){var r=n(885),a=n(890);e.exports=function(e,t){var n=a(e,t);return r(n)?n:void 0}},function(e,t,n){"use strict";var r;function a(e){return{type:r.SET_MENU_SCHOOLS,data:e}}function i(e){return{type:r.SET_MENU_SCHOOL_REQUSTS,data:e}}n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i})),function(e){e.SET_MENU_SCHOOLS="SET_MENU_SCHOOLS",e.SET_MENU_SCHOOL_REQUSTS="SET_MENU_SCHOOL_REQUSTS"}(r||(r={}))},function(e,t,n){"use strict";var r;function a(e){return{type:r.SET_ACCOUNT_INFO,data:e}}function i(e){return{type:r.UPDATE_ACCOUNT_INFO,data:e}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),function(e){e.SET_ACCOUNT_INFO="SET_ACCOUNT_INFO",e.UPDATE_ACCOUNT_INFO="UPDATE_ACCOUNT_INFO"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e,t){var n=document.createElement("a");n.download=t,n.href=e,document.body.appendChild(n),n.click(),n.remove()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(6),a=n.n(r),i=n(12),o=n.n(i),c=n(0),s=n.n(c),u=["width","height"],l=function(e){var t=e.width,n=void 0===t?28:t,r=e.height,i=void 0===r?28:r,c=o()(e,u);return s.a.createElement("svg",a()({width:n,height:i,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c),s.a.createElement("path",{d:"M42.0669 34.7347C41.3898 36.2919 40.5883 37.7253 39.6597 39.0431C38.3939 40.8397 37.3575 42.0832 36.5587 42.7738C35.3206 43.9073 33.994 44.4878 32.5734 44.5208C31.5536 44.5208 30.3237 44.232 28.8921 43.6459C27.4557 43.0627 26.1358 42.7738 24.9288 42.7738C23.663 42.7738 22.3055 43.0627 20.8534 43.6459C19.3991 44.232 18.2275 44.5373 17.3318 44.5676C15.9695 44.6254 14.6117 44.0284 13.2564 42.7738C12.3913 42.0227 11.3093 40.7351 10.0131 38.9111C8.62237 36.9632 7.479 34.7044 6.58326 32.1293C5.62396 29.3477 5.14307 26.6543 5.14307 24.0467C5.14307 21.0596 5.79144 18.4834 7.09014 16.3245C8.11079 14.5904 9.46863 13.2225 11.1681 12.2183C12.8675 11.2141 14.7037 10.7023 16.6812 10.6696C17.7632 10.6696 19.1821 11.0028 20.9454 11.6576C22.7037 12.3146 23.8327 12.6477 24.3277 12.6477C24.6978 12.6477 25.952 12.2582 28.0781 11.4815C30.0888 10.7612 31.7857 10.463 33.1759 10.5804C36.9429 10.8831 39.773 12.3613 41.6551 15.0245C38.2861 17.0566 36.6195 19.9027 36.6527 23.5539C36.6831 26.3979 37.7195 28.7645 39.7564 30.6436C40.6795 31.5157 41.7104 32.1898 42.8574 32.6685C42.6086 33.3866 42.3461 34.0744 42.0669 34.7347ZM33.4274 0.891682C33.4274 3.12076 32.6093 5.20205 30.9787 7.12846C29.0109 9.4186 26.6308 10.7419 24.0497 10.5331C24.0168 10.2657 23.9977 9.98425 23.9977 9.68849C23.9977 7.54858 24.9335 5.25845 26.5954 3.38595C27.4251 2.43788 28.4803 1.64957 29.7599 1.02071C31.0367 0.401245 32.2445 0.0586653 33.3804 0C33.4136 0.297993 33.4274 0.596005 33.4274 0.891653V0.891682Z",fill:"currentColor"}))}},function(e,t,n){(function(e,r){var a;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var i="Expected a function",o="__lodash_placeholder__",c=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],s="[object Arguments]",u="[object Array]",l="[object Boolean]",d="[object Date]",f="[object Error]",p="[object Function]",h="[object GeneratorFunction]",m="[object Map]",v="[object Number]",g="[object Object]",b="[object RegExp]",_="[object Set]",y="[object String]",E="[object Symbol]",O="[object WeakMap]",w="[object ArrayBuffer]",C="[object DataView]",S="[object Float32Array]",A="[object Float64Array]",k="[object Int8Array]",j="[object Int16Array]",T="[object Int32Array]",I="[object Uint8Array]",P="[object Uint16Array]",D="[object Uint32Array]",N=/\b__p \+= '';/g,x=/\b(__p \+=) '' \+/g,R=/(__e\(.*?\)|\b__t\)) \+\n'';/g,M=/&(?:amp|lt|gt|quot|#39);/g,L=/[&<>"']/g,B=RegExp(M.source),F=RegExp(L.source),H=/<%-([\s\S]+?)%>/g,V=/<%([\s\S]+?)%>/g,U=/<%=([\s\S]+?)%>/g,z=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,G=/^\w*$/,W=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,q=/[\\^$.*+?()[\]{}|]/g,K=RegExp(q.source),Y=/^\s+/,Z=/\s/,Q=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,J=/\{\n\/\* \[wrapped with (.+)\] \*/,X=/,? & /,$=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ee=/[()=,{}\[\]\/\s]/,te=/\\(\\)?/g,ne=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,re=/\w*$/,ae=/^[-+]0x[0-9a-f]+$/i,ie=/^0b[01]+$/i,oe=/^\[object .+?Constructor\]$/,ce=/^0o[0-7]+$/i,se=/^(?:0|[1-9]\d*)$/,ue=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,le=/($^)/,de=/['\n\r\u2028\u2029\\]/g,fe="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",pe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",he="[\\ud800-\\udfff]",me="["+pe+"]",ve="["+fe+"]",ge="\\d+",be="[\\u2700-\\u27bf]",_e="[a-z\\xdf-\\xf6\\xf8-\\xff]",ye="[^\\ud800-\\udfff"+pe+ge+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",Ee="\\ud83c[\\udffb-\\udfff]",Oe="[^\\ud800-\\udfff]",we="(?:\\ud83c[\\udde6-\\uddff]){2}",Ce="[\\ud800-\\udbff][\\udc00-\\udfff]",Se="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Ae="(?:"+_e+"|"+ye+")",ke="(?:"+Se+"|"+ye+")",je="(?:"+ve+"|"+Ee+")"+"?",Te="[\\ufe0e\\ufe0f]?"+je+("(?:\\u200d(?:"+[Oe,we,Ce].join("|")+")[\\ufe0e\\ufe0f]?"+je+")*"),Ie="(?:"+[be,we,Ce].join("|")+")"+Te,Pe="(?:"+[Oe+ve+"?",ve,we,Ce,he].join("|")+")",De=RegExp("['’]","g"),Ne=RegExp(ve,"g"),xe=RegExp(Ee+"(?="+Ee+")|"+Pe+Te,"g"),Re=RegExp([Se+"?"+_e+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[me,Se,"$"].join("|")+")",ke+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[me,Se+Ae,"$"].join("|")+")",Se+"?"+Ae+"+(?:['’](?:d|ll|m|re|s|t|ve))?",Se+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ge,Ie].join("|"),"g"),Me=RegExp("[\\u200d\\ud800-\\udfff"+fe+"\\ufe0e\\ufe0f]"),Le=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Be=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Fe=-1,He={};He[S]=He[A]=He[k]=He[j]=He[T]=He[I]=He["[object Uint8ClampedArray]"]=He[P]=He[D]=!0,He[s]=He[u]=He[w]=He[l]=He[C]=He[d]=He[f]=He[p]=He[m]=He[v]=He[g]=He[b]=He[_]=He[y]=He[O]=!1;var Ve={};Ve[s]=Ve[u]=Ve[w]=Ve[C]=Ve[l]=Ve[d]=Ve[S]=Ve[A]=Ve[k]=Ve[j]=Ve[T]=Ve[m]=Ve[v]=Ve[g]=Ve[b]=Ve[_]=Ve[y]=Ve[E]=Ve[I]=Ve["[object Uint8ClampedArray]"]=Ve[P]=Ve[D]=!0,Ve[f]=Ve[p]=Ve[O]=!1;var Ue={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ze=parseFloat,Ge=parseInt,We="object"==typeof e&&e&&e.Object===Object&&e,qe="object"==typeof self&&self&&self.Object===Object&&self,Ke=We||qe||Function("return this")(),Ye=t&&!t.nodeType&&t,Ze=Ye&&"object"==typeof r&&r&&!r.nodeType&&r,Qe=Ze&&Ze.exports===Ye,Je=Qe&&We.process,Xe=function(){try{var e=Ze&&Ze.require&&Ze.require("util").types;return e||Je&&Je.binding&&Je.binding("util")}catch(e){}}(),$e=Xe&&Xe.isArrayBuffer,et=Xe&&Xe.isDate,tt=Xe&&Xe.isMap,nt=Xe&&Xe.isRegExp,rt=Xe&&Xe.isSet,at=Xe&&Xe.isTypedArray;function it(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function ot(e,t,n,r){for(var a=-1,i=null==e?0:e.length;++a<i;){var o=e[a];t(r,o,n(o),e)}return r}function ct(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function st(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function ut(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function lt(e,t){for(var n=-1,r=null==e?0:e.length,a=0,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[a++]=o)}return i}function dt(e,t){return!!(null==e?0:e.length)&&Et(e,t,0)>-1}function ft(e,t,n){for(var r=-1,a=null==e?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}function pt(e,t){for(var n=-1,r=null==e?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}function ht(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}function mt(e,t,n,r){var a=-1,i=null==e?0:e.length;for(r&&i&&(n=e[++a]);++a<i;)n=t(n,e[a],a,e);return n}function vt(e,t,n,r){var a=null==e?0:e.length;for(r&&a&&(n=e[--a]);a--;)n=t(n,e[a],a,e);return n}function gt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var bt=St("length");function _t(e,t,n){var r;return n(e,(function(e,n,a){if(t(e,n,a))return r=n,!1})),r}function yt(e,t,n,r){for(var a=e.length,i=n+(r?1:-1);r?i--:++i<a;)if(t(e[i],i,e))return i;return-1}function Et(e,t,n){return t==t?function(e,t,n){var r=n-1,a=e.length;for(;++r<a;)if(e[r]===t)return r;return-1}(e,t,n):yt(e,wt,n)}function Ot(e,t,n,r){for(var a=n-1,i=e.length;++a<i;)if(r(e[a],t))return a;return-1}function wt(e){return e!=e}function Ct(e,t){var n=null==e?0:e.length;return n?jt(e,t)/n:NaN}function St(e){return function(t){return null==t?void 0:t[e]}}function At(e){return function(t){return null==e?void 0:e[t]}}function kt(e,t,n,r,a){return a(e,(function(e,a,i){n=r?(r=!1,e):t(n,e,a,i)})),n}function jt(e,t){for(var n,r=-1,a=e.length;++r<a;){var i=t(e[r]);void 0!==i&&(n=void 0===n?i:n+i)}return n}function Tt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function It(e){return e?e.slice(0,Yt(e)+1).replace(Y,""):e}function Pt(e){return function(t){return e(t)}}function Dt(e,t){return pt(t,(function(t){return e[t]}))}function Nt(e,t){return e.has(t)}function xt(e,t){for(var n=-1,r=e.length;++n<r&&Et(t,e[n],0)>-1;);return n}function Rt(e,t){for(var n=e.length;n--&&Et(t,e[n],0)>-1;);return n}function Mt(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var Lt=At({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Bt=At({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Ft(e){return"\\"+Ue[e]}function Ht(e){return Me.test(e)}function Vt(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function Ut(e,t){return function(n){return e(t(n))}}function zt(e,t){for(var n=-1,r=e.length,a=0,i=[];++n<r;){var c=e[n];c!==t&&c!==o||(e[n]=o,i[a++]=n)}return i}function Gt(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function Wt(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function qt(e){return Ht(e)?function(e){var t=xe.lastIndex=0;for(;xe.test(e);)++t;return t}(e):bt(e)}function Kt(e){return Ht(e)?function(e){return e.match(xe)||[]}(e):function(e){return e.split("")}(e)}function Yt(e){for(var t=e.length;t--&&Z.test(e.charAt(t)););return t}var Zt=At({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Qt=function e(t){var n,r=(t=null==t?Ke:Qt.defaults(Ke.Object(),t,Qt.pick(Ke,Be))).Array,a=t.Date,Z=t.Error,fe=t.Function,pe=t.Math,he=t.Object,me=t.RegExp,ve=t.String,ge=t.TypeError,be=r.prototype,_e=fe.prototype,ye=he.prototype,Ee=t["__core-js_shared__"],Oe=_e.toString,we=ye.hasOwnProperty,Ce=0,Se=(n=/[^.]+$/.exec(Ee&&Ee.keys&&Ee.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Ae=ye.toString,ke=Oe.call(he),je=Ke._,Te=me("^"+Oe.call(we).replace(q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ie=Qe?t.Buffer:void 0,Pe=t.Symbol,xe=t.Uint8Array,Me=Ie?Ie.allocUnsafe:void 0,Ue=Ut(he.getPrototypeOf,he),We=he.create,qe=ye.propertyIsEnumerable,Ye=be.splice,Ze=Pe?Pe.isConcatSpreadable:void 0,Je=Pe?Pe.iterator:void 0,Xe=Pe?Pe.toStringTag:void 0,bt=function(){try{var e=ei(he,"defineProperty");return e({},"",{}),e}catch(e){}}(),At=t.clearTimeout!==Ke.clearTimeout&&t.clearTimeout,Jt=a&&a.now!==Ke.Date.now&&a.now,Xt=t.setTimeout!==Ke.setTimeout&&t.setTimeout,$t=pe.ceil,en=pe.floor,tn=he.getOwnPropertySymbols,nn=Ie?Ie.isBuffer:void 0,rn=t.isFinite,an=be.join,on=Ut(he.keys,he),cn=pe.max,sn=pe.min,un=a.now,ln=t.parseInt,dn=pe.random,fn=be.reverse,pn=ei(t,"DataView"),hn=ei(t,"Map"),mn=ei(t,"Promise"),vn=ei(t,"Set"),gn=ei(t,"WeakMap"),bn=ei(he,"create"),_n=gn&&new gn,yn={},En=ki(pn),On=ki(hn),wn=ki(mn),Cn=ki(vn),Sn=ki(gn),An=Pe?Pe.prototype:void 0,kn=An?An.valueOf:void 0,jn=An?An.toString:void 0;function Tn(e){if(Wo(e)&&!xo(e)&&!(e instanceof Nn)){if(e instanceof Dn)return e;if(we.call(e,"__wrapped__"))return ji(e)}return new Dn(e)}var In=function(){function e(){}return function(t){if(!Go(t))return{};if(We)return We(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function Pn(){}function Dn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function Nn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function xn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Rn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Mn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ln(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Mn;++t<n;)this.add(e[t])}function Bn(e){var t=this.__data__=new Rn(e);this.size=t.size}function Fn(e,t){var n=xo(e),r=!n&&No(e),a=!n&&!r&&Bo(e),i=!n&&!r&&!a&&$o(e),o=n||r||a||i,c=o?Tt(e.length,ve):[],s=c.length;for(var u in e)!t&&!we.call(e,u)||o&&("length"==u||a&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||ci(u,s))||c.push(u);return c}function Hn(e){var t=e.length;return t?e[Lr(0,t-1)]:void 0}function Vn(e,t){return Ci(ba(e),Qn(t,0,e.length))}function Un(e){return Ci(ba(e))}function zn(e,t,n){(void 0!==n&&!Io(e[t],n)||void 0===n&&!(t in e))&&Yn(e,t,n)}function Gn(e,t,n){var r=e[t];we.call(e,t)&&Io(r,n)&&(void 0!==n||t in e)||Yn(e,t,n)}function Wn(e,t){for(var n=e.length;n--;)if(Io(e[n][0],t))return n;return-1}function qn(e,t,n,r){return tr(e,(function(e,a,i){t(r,e,n(e),i)})),r}function Kn(e,t){return e&&_a(t,Ec(t),e)}function Yn(e,t,n){"__proto__"==t&&bt?bt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Zn(e,t){for(var n=-1,a=t.length,i=r(a),o=null==e;++n<a;)i[n]=o?void 0:vc(e,t[n]);return i}function Qn(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}function Jn(e,t,n,r,a,i){var o,c=1&t,u=2&t,f=4&t;if(n&&(o=a?n(e,r,a,i):n(e)),void 0!==o)return o;if(!Go(e))return e;var O=xo(e);if(O){if(o=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&we.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!c)return ba(e,o)}else{var N=ri(e),x=N==p||N==h;if(Bo(e))return fa(e,c);if(N==g||N==s||x&&!a){if(o=u||x?{}:ii(e),!c)return u?function(e,t){return _a(e,ni(e),t)}(e,function(e,t){return e&&_a(t,Oc(t),e)}(o,e)):function(e,t){return _a(e,ti(e),t)}(e,Kn(o,e))}else{if(!Ve[N])return a?e:{};o=function(e,t,n){var r=e.constructor;switch(t){case w:return pa(e);case l:case d:return new r(+e);case C:return function(e,t){var n=t?pa(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case S:case A:case k:case j:case T:case I:case"[object Uint8ClampedArray]":case P:case D:return ha(e,n);case m:return new r;case v:case y:return new r(e);case b:return function(e){var t=new e.constructor(e.source,re.exec(e));return t.lastIndex=e.lastIndex,t}(e);case _:return new r;case E:return a=e,kn?he(kn.call(a)):{}}var a}(e,N,c)}}i||(i=new Bn);var R=i.get(e);if(R)return R;i.set(e,o),Qo(e)?e.forEach((function(r){o.add(Jn(r,t,n,r,e,i))})):qo(e)&&e.forEach((function(r,a){o.set(a,Jn(r,t,n,a,e,i))}));var M=O?void 0:(f?u?Ka:qa:u?Oc:Ec)(e);return ct(M||e,(function(r,a){M&&(r=e[a=r]),Gn(o,a,Jn(r,t,n,a,e,i))})),o}function Xn(e,t,n){var r=n.length;if(null==e)return!r;for(e=he(e);r--;){var a=n[r],i=t[a],o=e[a];if(void 0===o&&!(a in e)||!i(o))return!1}return!0}function $n(e,t,n){if("function"!=typeof e)throw new ge(i);return yi((function(){e.apply(void 0,n)}),t)}function er(e,t,n,r){var a=-1,i=dt,o=!0,c=e.length,s=[],u=t.length;if(!c)return s;n&&(t=pt(t,Pt(n))),r?(i=ft,o=!1):t.length>=200&&(i=Nt,o=!1,t=new Ln(t));e:for(;++a<c;){var l=e[a],d=null==n?l:n(l);if(l=r||0!==l?l:0,o&&d==d){for(var f=u;f--;)if(t[f]===d)continue e;s.push(l)}else i(t,d,r)||s.push(l)}return s}Tn.templateSettings={escape:H,evaluate:V,interpolate:U,variable:"",imports:{_:Tn}},Tn.prototype=Pn.prototype,Tn.prototype.constructor=Tn,Dn.prototype=In(Pn.prototype),Dn.prototype.constructor=Dn,Nn.prototype=In(Pn.prototype),Nn.prototype.constructor=Nn,xn.prototype.clear=function(){this.__data__=bn?bn(null):{},this.size=0},xn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},xn.prototype.get=function(e){var t=this.__data__;if(bn){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return we.call(t,e)?t[e]:void 0},xn.prototype.has=function(e){var t=this.__data__;return bn?void 0!==t[e]:we.call(t,e)},xn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=bn&&void 0===t?"__lodash_hash_undefined__":t,this},Rn.prototype.clear=function(){this.__data__=[],this.size=0},Rn.prototype.delete=function(e){var t=this.__data__,n=Wn(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ye.call(t,n,1),--this.size,!0)},Rn.prototype.get=function(e){var t=this.__data__,n=Wn(t,e);return n<0?void 0:t[n][1]},Rn.prototype.has=function(e){return Wn(this.__data__,e)>-1},Rn.prototype.set=function(e,t){var n=this.__data__,r=Wn(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Mn.prototype.clear=function(){this.size=0,this.__data__={hash:new xn,map:new(hn||Rn),string:new xn}},Mn.prototype.delete=function(e){var t=Xa(this,e).delete(e);return this.size-=t?1:0,t},Mn.prototype.get=function(e){return Xa(this,e).get(e)},Mn.prototype.has=function(e){return Xa(this,e).has(e)},Mn.prototype.set=function(e,t){var n=Xa(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Ln.prototype.add=Ln.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Ln.prototype.has=function(e){return this.__data__.has(e)},Bn.prototype.clear=function(){this.__data__=new Rn,this.size=0},Bn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Bn.prototype.get=function(e){return this.__data__.get(e)},Bn.prototype.has=function(e){return this.__data__.has(e)},Bn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Rn){var r=n.__data__;if(!hn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Mn(r)}return n.set(e,t),this.size=n.size,this};var tr=Oa(ur),nr=Oa(lr,!0);function rr(e,t){var n=!0;return tr(e,(function(e,r,a){return n=!!t(e,r,a)})),n}function ar(e,t,n){for(var r=-1,a=e.length;++r<a;){var i=e[r],o=t(i);if(null!=o&&(void 0===c?o==o&&!Xo(o):n(o,c)))var c=o,s=i}return s}function ir(e,t){var n=[];return tr(e,(function(e,r,a){t(e,r,a)&&n.push(e)})),n}function or(e,t,n,r,a){var i=-1,o=e.length;for(n||(n=oi),a||(a=[]);++i<o;){var c=e[i];t>0&&n(c)?t>1?or(c,t-1,n,r,a):ht(a,c):r||(a[a.length]=c)}return a}var cr=wa(),sr=wa(!0);function ur(e,t){return e&&cr(e,t,Ec)}function lr(e,t){return e&&sr(e,t,Ec)}function dr(e,t){return lt(t,(function(t){return Vo(e[t])}))}function fr(e,t){for(var n=0,r=(t=sa(t,e)).length;null!=e&&n<r;)e=e[Ai(t[n++])];return n&&n==r?e:void 0}function pr(e,t,n){var r=t(e);return xo(e)?r:ht(r,n(e))}function hr(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Xe&&Xe in he(e)?function(e){var t=we.call(e,Xe),n=e[Xe];try{e[Xe]=void 0;var r=!0}catch(e){}var a=Ae.call(e);r&&(t?e[Xe]=n:delete e[Xe]);return a}(e):function(e){return Ae.call(e)}(e)}function mr(e,t){return e>t}function vr(e,t){return null!=e&&we.call(e,t)}function gr(e,t){return null!=e&&t in he(e)}function br(e,t,n){for(var a=n?ft:dt,i=e[0].length,o=e.length,c=o,s=r(o),u=1/0,l=[];c--;){var d=e[c];c&&t&&(d=pt(d,Pt(t))),u=sn(d.length,u),s[c]=!n&&(t||i>=120&&d.length>=120)?new Ln(c&&d):void 0}d=e[0];var f=-1,p=s[0];e:for(;++f<i&&l.length<u;){var h=d[f],m=t?t(h):h;if(h=n||0!==h?h:0,!(p?Nt(p,m):a(l,m,n))){for(c=o;--c;){var v=s[c];if(!(v?Nt(v,m):a(e[c],m,n)))continue e}p&&p.push(m),l.push(h)}}return l}function _r(e,t,n){var r=null==(e=vi(e,t=sa(t,e)))?e:e[Ai(Fi(t))];return null==r?void 0:it(r,e,n)}function yr(e){return Wo(e)&&hr(e)==s}function Er(e,t,n,r,a){return e===t||(null==e||null==t||!Wo(e)&&!Wo(t)?e!=e&&t!=t:function(e,t,n,r,a,i){var o=xo(e),c=xo(t),p=o?u:ri(e),h=c?u:ri(t),O=(p=p==s?g:p)==g,S=(h=h==s?g:h)==g,A=p==h;if(A&&Bo(e)){if(!Bo(t))return!1;o=!0,O=!1}if(A&&!O)return i||(i=new Bn),o||$o(e)?Ga(e,t,n,r,a,i):function(e,t,n,r,a,i,o){switch(n){case C:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!i(new xe(e),new xe(t)));case l:case d:case v:return Io(+e,+t);case f:return e.name==t.name&&e.message==t.message;case b:case y:return e==t+"";case m:var c=Vt;case _:var s=1&r;if(c||(c=Gt),e.size!=t.size&&!s)return!1;var u=o.get(e);if(u)return u==t;r|=2,o.set(e,t);var p=Ga(c(e),c(t),r,a,i,o);return o.delete(e),p;case E:if(kn)return kn.call(e)==kn.call(t)}return!1}(e,t,p,n,r,a,i);if(!(1&n)){var k=O&&we.call(e,"__wrapped__"),j=S&&we.call(t,"__wrapped__");if(k||j){var T=k?e.value():e,I=j?t.value():t;return i||(i=new Bn),a(T,I,n,r,i)}}if(!A)return!1;return i||(i=new Bn),function(e,t,n,r,a,i){var o=1&n,c=qa(e),s=c.length,u=qa(t).length;if(s!=u&&!o)return!1;var l=s;for(;l--;){var d=c[l];if(!(o?d in t:we.call(t,d)))return!1}var f=i.get(e),p=i.get(t);if(f&&p)return f==t&&p==e;var h=!0;i.set(e,t),i.set(t,e);var m=o;for(;++l<s;){d=c[l];var v=e[d],g=t[d];if(r)var b=o?r(g,v,d,t,e,i):r(v,g,d,e,t,i);if(!(void 0===b?v===g||a(v,g,n,r,i):b)){h=!1;break}m||(m="constructor"==d)}if(h&&!m){var _=e.constructor,y=t.constructor;_==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof y&&y instanceof y||(h=!1)}return i.delete(e),i.delete(t),h}(e,t,n,r,a,i)}(e,t,n,r,Er,a))}function Or(e,t,n,r){var a=n.length,i=a,o=!r;if(null==e)return!i;for(e=he(e);a--;){var c=n[a];if(o&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++a<i;){var s=(c=n[a])[0],u=e[s],l=c[1];if(o&&c[2]){if(void 0===u&&!(s in e))return!1}else{var d=new Bn;if(r)var f=r(u,l,s,e,t,d);if(!(void 0===f?Er(l,u,3,r,d):f))return!1}}return!0}function wr(e){return!(!Go(e)||(t=e,Se&&Se in t))&&(Vo(e)?Te:oe).test(ki(e));var t}function Cr(e){return"function"==typeof e?e:null==e?Kc:"object"==typeof e?xo(e)?Ir(e[0],e[1]):Tr(e):ns(e)}function Sr(e){if(!fi(e))return on(e);var t=[];for(var n in he(e))we.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Ar(e){if(!Go(e))return function(e){var t=[];if(null!=e)for(var n in he(e))t.push(n);return t}(e);var t=fi(e),n=[];for(var r in e)("constructor"!=r||!t&&we.call(e,r))&&n.push(r);return n}function kr(e,t){return e<t}function jr(e,t){var n=-1,a=Mo(e)?r(e.length):[];return tr(e,(function(e,r,i){a[++n]=t(e,r,i)})),a}function Tr(e){var t=$a(e);return 1==t.length&&t[0][2]?hi(t[0][0],t[0][1]):function(n){return n===e||Or(n,e,t)}}function Ir(e,t){return ui(e)&&pi(t)?hi(Ai(e),t):function(n){var r=vc(n,e);return void 0===r&&r===t?gc(n,e):Er(t,r,3)}}function Pr(e,t,n,r,a){e!==t&&cr(t,(function(i,o){if(a||(a=new Bn),Go(i))!function(e,t,n,r,a,i,o){var c=bi(e,n),s=bi(t,n),u=o.get(s);if(u)return void zn(e,n,u);var l=i?i(c,s,n+"",e,t,o):void 0,d=void 0===l;if(d){var f=xo(s),p=!f&&Bo(s),h=!f&&!p&&$o(s);l=s,f||p||h?xo(c)?l=c:Lo(c)?l=ba(c):p?(d=!1,l=fa(s,!0)):h?(d=!1,l=ha(s,!0)):l=[]:Yo(s)||No(s)?(l=c,No(c)?l=cc(c):Go(c)&&!Vo(c)||(l=ii(s))):d=!1}d&&(o.set(s,l),a(l,s,r,i,o),o.delete(s));zn(e,n,l)}(e,t,o,n,Pr,r,a);else{var c=r?r(bi(e,o),i,o+"",e,t,a):void 0;void 0===c&&(c=i),zn(e,o,c)}}),Oc)}function Dr(e,t){var n=e.length;if(n)return ci(t+=t<0?n:0,n)?e[t]:void 0}function Nr(e,t,n){t=t.length?pt(t,(function(e){return xo(e)?function(t){return fr(t,1===e.length?e[0]:e)}:e})):[Kc];var r=-1;return t=pt(t,Pt(Ja())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(jr(e,(function(e,n,a){return{criteria:pt(t,(function(t){return t(e)})),index:++r,value:e}})),(function(e,t){return function(e,t,n){var r=-1,a=e.criteria,i=t.criteria,o=a.length,c=n.length;for(;++r<o;){var s=ma(a[r],i[r]);if(s){if(r>=c)return s;var u=n[r];return s*("desc"==u?-1:1)}}return e.index-t.index}(e,t,n)}))}function xr(e,t,n){for(var r=-1,a=t.length,i={};++r<a;){var o=t[r],c=fr(e,o);n(c,o)&&Ur(i,sa(o,e),c)}return i}function Rr(e,t,n,r){var a=r?Ot:Et,i=-1,o=t.length,c=e;for(e===t&&(t=ba(t)),n&&(c=pt(e,Pt(n)));++i<o;)for(var s=0,u=t[i],l=n?n(u):u;(s=a(c,l,s,r))>-1;)c!==e&&Ye.call(c,s,1),Ye.call(e,s,1);return e}function Mr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var a=t[n];if(n==r||a!==i){var i=a;ci(a)?Ye.call(e,a,1):ea(e,a)}}return e}function Lr(e,t){return e+en(dn()*(t-e+1))}function Br(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=en(t/2))&&(e+=e)}while(t);return n}function Fr(e,t){return Ei(mi(e,t,Kc),e+"")}function Hr(e){return Hn(Ic(e))}function Vr(e,t){var n=Ic(e);return Ci(n,Qn(t,0,n.length))}function Ur(e,t,n,r){if(!Go(e))return e;for(var a=-1,i=(t=sa(t,e)).length,o=i-1,c=e;null!=c&&++a<i;){var s=Ai(t[a]),u=n;if("__proto__"===s||"constructor"===s||"prototype"===s)return e;if(a!=o){var l=c[s];void 0===(u=r?r(l,s,c):void 0)&&(u=Go(l)?l:ci(t[a+1])?[]:{})}Gn(c,s,u),c=c[s]}return e}var zr=_n?function(e,t){return _n.set(e,t),e}:Kc,Gr=bt?function(e,t){return bt(e,"toString",{configurable:!0,enumerable:!1,value:Gc(t),writable:!0})}:Kc;function Wr(e){return Ci(Ic(e))}function qr(e,t,n){var a=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=r(i);++a<i;)o[a]=e[a+t];return o}function Kr(e,t){var n;return tr(e,(function(e,r,a){return!(n=t(e,r,a))})),!!n}function Yr(e,t,n){var r=0,a=null==e?r:e.length;if("number"==typeof t&&t==t&&a<=2147483647){for(;r<a;){var i=r+a>>>1,o=e[i];null!==o&&!Xo(o)&&(n?o<=t:o<t)?r=i+1:a=i}return a}return Zr(e,t,Kc,n)}function Zr(e,t,n,r){var a=0,i=null==e?0:e.length;if(0===i)return 0;for(var o=(t=n(t))!=t,c=null===t,s=Xo(t),u=void 0===t;a<i;){var l=en((a+i)/2),d=n(e[l]),f=void 0!==d,p=null===d,h=d==d,m=Xo(d);if(o)var v=r||h;else v=u?h&&(r||f):c?h&&f&&(r||!p):s?h&&f&&!p&&(r||!m):!p&&!m&&(r?d<=t:d<t);v?a=l+1:i=l}return sn(i,4294967294)}function Qr(e,t){for(var n=-1,r=e.length,a=0,i=[];++n<r;){var o=e[n],c=t?t(o):o;if(!n||!Io(c,s)){var s=c;i[a++]=0===o?0:o}}return i}function Jr(e){return"number"==typeof e?e:Xo(e)?NaN:+e}function Xr(e){if("string"==typeof e)return e;if(xo(e))return pt(e,Xr)+"";if(Xo(e))return jn?jn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function $r(e,t,n){var r=-1,a=dt,i=e.length,o=!0,c=[],s=c;if(n)o=!1,a=ft;else if(i>=200){var u=t?null:Ba(e);if(u)return Gt(u);o=!1,a=Nt,s=new Ln}else s=t?[]:c;e:for(;++r<i;){var l=e[r],d=t?t(l):l;if(l=n||0!==l?l:0,o&&d==d){for(var f=s.length;f--;)if(s[f]===d)continue e;t&&s.push(d),c.push(l)}else a(s,d,n)||(s!==c&&s.push(d),c.push(l))}return c}function ea(e,t){return null==(e=vi(e,t=sa(t,e)))||delete e[Ai(Fi(t))]}function ta(e,t,n,r){return Ur(e,t,n(fr(e,t)),r)}function na(e,t,n,r){for(var a=e.length,i=r?a:-1;(r?i--:++i<a)&&t(e[i],i,e););return n?qr(e,r?0:i,r?i+1:a):qr(e,r?i+1:0,r?a:i)}function ra(e,t){var n=e;return n instanceof Nn&&(n=n.value()),mt(t,(function(e,t){return t.func.apply(t.thisArg,ht([e],t.args))}),n)}function aa(e,t,n){var a=e.length;if(a<2)return a?$r(e[0]):[];for(var i=-1,o=r(a);++i<a;)for(var c=e[i],s=-1;++s<a;)s!=i&&(o[i]=er(o[i]||c,e[s],t,n));return $r(or(o,1),t,n)}function ia(e,t,n){for(var r=-1,a=e.length,i=t.length,o={};++r<a;){var c=r<i?t[r]:void 0;n(o,e[r],c)}return o}function oa(e){return Lo(e)?e:[]}function ca(e){return"function"==typeof e?e:Kc}function sa(e,t){return xo(e)?e:ui(e,t)?[e]:Si(sc(e))}var ua=Fr;function la(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:qr(e,t,n)}var da=At||function(e){return Ke.clearTimeout(e)};function fa(e,t){if(t)return e.slice();var n=e.length,r=Me?Me(n):new e.constructor(n);return e.copy(r),r}function pa(e){var t=new e.constructor(e.byteLength);return new xe(t).set(new xe(e)),t}function ha(e,t){var n=t?pa(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function ma(e,t){if(e!==t){var n=void 0!==e,r=null===e,a=e==e,i=Xo(e),o=void 0!==t,c=null===t,s=t==t,u=Xo(t);if(!c&&!u&&!i&&e>t||i&&o&&s&&!c&&!u||r&&o&&s||!n&&s||!a)return 1;if(!r&&!i&&!u&&e<t||u&&n&&a&&!r&&!i||c&&n&&a||!o&&a||!s)return-1}return 0}function va(e,t,n,a){for(var i=-1,o=e.length,c=n.length,s=-1,u=t.length,l=cn(o-c,0),d=r(u+l),f=!a;++s<u;)d[s]=t[s];for(;++i<c;)(f||i<o)&&(d[n[i]]=e[i]);for(;l--;)d[s++]=e[i++];return d}function ga(e,t,n,a){for(var i=-1,o=e.length,c=-1,s=n.length,u=-1,l=t.length,d=cn(o-s,0),f=r(d+l),p=!a;++i<d;)f[i]=e[i];for(var h=i;++u<l;)f[h+u]=t[u];for(;++c<s;)(p||i<o)&&(f[h+n[c]]=e[i++]);return f}function ba(e,t){var n=-1,a=e.length;for(t||(t=r(a));++n<a;)t[n]=e[n];return t}function _a(e,t,n,r){var a=!n;n||(n={});for(var i=-1,o=t.length;++i<o;){var c=t[i],s=r?r(n[c],e[c],c,n,e):void 0;void 0===s&&(s=e[c]),a?Yn(n,c,s):Gn(n,c,s)}return n}function ya(e,t){return function(n,r){var a=xo(n)?ot:qn,i=t?t():{};return a(n,e,Ja(r,2),i)}}function Ea(e){return Fr((function(t,n){var r=-1,a=n.length,i=a>1?n[a-1]:void 0,o=a>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(a--,i):void 0,o&&si(n[0],n[1],o)&&(i=a<3?void 0:i,a=1),t=he(t);++r<a;){var c=n[r];c&&e(t,c,r,i)}return t}))}function Oa(e,t){return function(n,r){if(null==n)return n;if(!Mo(n))return e(n,r);for(var a=n.length,i=t?a:-1,o=he(n);(t?i--:++i<a)&&!1!==r(o[i],i,o););return n}}function wa(e){return function(t,n,r){for(var a=-1,i=he(t),o=r(t),c=o.length;c--;){var s=o[e?c:++a];if(!1===n(i[s],s,i))break}return t}}function Ca(e){return function(t){var n=Ht(t=sc(t))?Kt(t):void 0,r=n?n[0]:t.charAt(0),a=n?la(n,1).join(""):t.slice(1);return r[e]()+a}}function Sa(e){return function(t){return mt(Vc(Nc(t).replace(De,"")),e,"")}}function Aa(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=In(e.prototype),r=e.apply(n,t);return Go(r)?r:n}}function ka(e){return function(t,n,r){var a=he(t);if(!Mo(t)){var i=Ja(n,3);t=Ec(t),n=function(e){return i(a[e],e,a)}}var o=e(t,n,r);return o>-1?a[i?t[o]:o]:void 0}}function ja(e){return Wa((function(t){var n=t.length,r=n,a=Dn.prototype.thru;for(e&&t.reverse();r--;){var o=t[r];if("function"!=typeof o)throw new ge(i);if(a&&!c&&"wrapper"==Za(o))var c=new Dn([],!0)}for(r=c?r:n;++r<n;){var s=Za(o=t[r]),u="wrapper"==s?Ya(o):void 0;c=u&&li(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?c[Za(u[0])].apply(c,u[3]):1==o.length&&li(o)?c[s]():c.thru(o)}return function(){var e=arguments,r=e[0];if(c&&1==e.length&&xo(r))return c.plant(r).value();for(var a=0,i=n?t[a].apply(this,e):r;++a<n;)i=t[a].call(this,i);return i}}))}function Ta(e,t,n,a,i,o,c,s,u,l){var d=128&t,f=1&t,p=2&t,h=24&t,m=512&t,v=p?void 0:Aa(e);return function g(){for(var b=arguments.length,_=r(b),y=b;y--;)_[y]=arguments[y];if(h)var E=Qa(g),O=Mt(_,E);if(a&&(_=va(_,a,i,h)),o&&(_=ga(_,o,c,h)),b-=O,h&&b<l){var w=zt(_,E);return Ma(e,t,Ta,g.placeholder,n,_,w,s,u,l-b)}var C=f?n:this,S=p?C[e]:e;return b=_.length,s?_=gi(_,s):m&&b>1&&_.reverse(),d&&u<b&&(_.length=u),this&&this!==Ke&&this instanceof g&&(S=v||Aa(S)),S.apply(C,_)}}function Ia(e,t){return function(n,r){return function(e,t,n,r){return ur(e,(function(e,a,i){t(r,n(e),a,i)})),r}(n,e,t(r),{})}}function Pa(e,t){return function(n,r){var a;if(void 0===n&&void 0===r)return t;if(void 0!==n&&(a=n),void 0!==r){if(void 0===a)return r;"string"==typeof n||"string"==typeof r?(n=Xr(n),r=Xr(r)):(n=Jr(n),r=Jr(r)),a=e(n,r)}return a}}function Da(e){return Wa((function(t){return t=pt(t,Pt(Ja())),Fr((function(n){var r=this;return e(t,(function(e){return it(e,r,n)}))}))}))}function Na(e,t){var n=(t=void 0===t?" ":Xr(t)).length;if(n<2)return n?Br(t,e):t;var r=Br(t,$t(e/qt(t)));return Ht(t)?la(Kt(r),0,e).join(""):r.slice(0,e)}function xa(e){return function(t,n,a){return a&&"number"!=typeof a&&si(t,n,a)&&(n=a=void 0),t=rc(t),void 0===n?(n=t,t=0):n=rc(n),function(e,t,n,a){for(var i=-1,o=cn($t((t-e)/(n||1)),0),c=r(o);o--;)c[a?o:++i]=e,e+=n;return c}(t,n,a=void 0===a?t<n?1:-1:rc(a),e)}}function Ra(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=oc(t),n=oc(n)),e(t,n)}}function Ma(e,t,n,r,a,i,o,c,s,u){var l=8&t;t|=l?32:64,4&(t&=~(l?64:32))||(t&=-4);var d=[e,t,a,l?i:void 0,l?o:void 0,l?void 0:i,l?void 0:o,c,s,u],f=n.apply(void 0,d);return li(e)&&_i(f,d),f.placeholder=r,Oi(f,e,t)}function La(e){var t=pe[e];return function(e,n){if(e=oc(e),(n=null==n?0:sn(ac(n),292))&&rn(e)){var r=(sc(e)+"e").split("e");return+((r=(sc(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Ba=vn&&1/Gt(new vn([,-0]))[1]==1/0?function(e){return new vn(e)}:Xc;function Fa(e){return function(t){var n=ri(t);return n==m?Vt(t):n==_?Wt(t):function(e,t){return pt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Ha(e,t,n,a,c,s,u,l){var d=2&t;if(!d&&"function"!=typeof e)throw new ge(i);var f=a?a.length:0;if(f||(t&=-97,a=c=void 0),u=void 0===u?u:cn(ac(u),0),l=void 0===l?l:ac(l),f-=c?c.length:0,64&t){var p=a,h=c;a=c=void 0}var m=d?void 0:Ya(e),v=[e,t,n,a,c,p,h,s,u,l];if(m&&function(e,t){var n=e[1],r=t[1],a=n|r,i=a<131,c=128==r&&8==n||128==r&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!i&&!c)return e;1&r&&(e[2]=t[2],a|=1&n?0:4);var s=t[3];if(s){var u=e[3];e[3]=u?va(u,s,t[4]):s,e[4]=u?zt(e[3],o):t[4]}(s=t[5])&&(u=e[5],e[5]=u?ga(u,s,t[6]):s,e[6]=u?zt(e[5],o):t[6]);(s=t[7])&&(e[7]=s);128&r&&(e[8]=null==e[8]?t[8]:sn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=a}(v,m),e=v[0],t=v[1],n=v[2],a=v[3],c=v[4],!(l=v[9]=void 0===v[9]?d?0:e.length:cn(v[9]-f,0))&&24&t&&(t&=-25),t&&1!=t)g=8==t||16==t?function(e,t,n){var a=Aa(e);return function i(){for(var o=arguments.length,c=r(o),s=o,u=Qa(i);s--;)c[s]=arguments[s];var l=o<3&&c[0]!==u&&c[o-1]!==u?[]:zt(c,u);if((o-=l.length)<n)return Ma(e,t,Ta,i.placeholder,void 0,c,l,void 0,void 0,n-o);var d=this&&this!==Ke&&this instanceof i?a:e;return it(d,this,c)}}(e,t,l):32!=t&&33!=t||c.length?Ta.apply(void 0,v):function(e,t,n,a){var i=1&t,o=Aa(e);return function t(){for(var c=-1,s=arguments.length,u=-1,l=a.length,d=r(l+s),f=this&&this!==Ke&&this instanceof t?o:e;++u<l;)d[u]=a[u];for(;s--;)d[u++]=arguments[++c];return it(f,i?n:this,d)}}(e,t,n,a);else var g=function(e,t,n){var r=1&t,a=Aa(e);return function t(){var i=this&&this!==Ke&&this instanceof t?a:e;return i.apply(r?n:this,arguments)}}(e,t,n);return Oi((m?zr:_i)(g,v),e,t)}function Va(e,t,n,r){return void 0===e||Io(e,ye[n])&&!we.call(r,n)?t:e}function Ua(e,t,n,r,a,i){return Go(e)&&Go(t)&&(i.set(t,e),Pr(e,t,void 0,Ua,i),i.delete(t)),e}function za(e){return Yo(e)?void 0:e}function Ga(e,t,n,r,a,i){var o=1&n,c=e.length,s=t.length;if(c!=s&&!(o&&s>c))return!1;var u=i.get(e),l=i.get(t);if(u&&l)return u==t&&l==e;var d=-1,f=!0,p=2&n?new Ln:void 0;for(i.set(e,t),i.set(t,e);++d<c;){var h=e[d],m=t[d];if(r)var v=o?r(m,h,d,t,e,i):r(h,m,d,e,t,i);if(void 0!==v){if(v)continue;f=!1;break}if(p){if(!gt(t,(function(e,t){if(!Nt(p,t)&&(h===e||a(h,e,n,r,i)))return p.push(t)}))){f=!1;break}}else if(h!==m&&!a(h,m,n,r,i)){f=!1;break}}return i.delete(e),i.delete(t),f}function Wa(e){return Ei(mi(e,void 0,xi),e+"")}function qa(e){return pr(e,Ec,ti)}function Ka(e){return pr(e,Oc,ni)}var Ya=_n?function(e){return _n.get(e)}:Xc;function Za(e){for(var t=e.name+"",n=yn[t],r=we.call(yn,t)?n.length:0;r--;){var a=n[r],i=a.func;if(null==i||i==e)return a.name}return t}function Qa(e){return(we.call(Tn,"placeholder")?Tn:e).placeholder}function Ja(){var e=Tn.iteratee||Yc;return e=e===Yc?Cr:e,arguments.length?e(arguments[0],arguments[1]):e}function Xa(e,t){var n,r,a=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?a["string"==typeof t?"string":"hash"]:a.map}function $a(e){for(var t=Ec(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,pi(a)]}return t}function ei(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return wr(n)?n:void 0}var ti=tn?function(e){return null==e?[]:(e=he(e),lt(tn(e),(function(t){return qe.call(e,t)})))}:is,ni=tn?function(e){for(var t=[];e;)ht(t,ti(e)),e=Ue(e);return t}:is,ri=hr;function ai(e,t,n){for(var r=-1,a=(t=sa(t,e)).length,i=!1;++r<a;){var o=Ai(t[r]);if(!(i=null!=e&&n(e,o)))break;e=e[o]}return i||++r!=a?i:!!(a=null==e?0:e.length)&&zo(a)&&ci(o,a)&&(xo(e)||No(e))}function ii(e){return"function"!=typeof e.constructor||fi(e)?{}:In(Ue(e))}function oi(e){return xo(e)||No(e)||!!(Ze&&e&&e[Ze])}function ci(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&se.test(e))&&e>-1&&e%1==0&&e<t}function si(e,t,n){if(!Go(n))return!1;var r=typeof t;return!!("number"==r?Mo(n)&&ci(t,n.length):"string"==r&&t in n)&&Io(n[t],e)}function ui(e,t){if(xo(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Xo(e))||(G.test(e)||!z.test(e)||null!=t&&e in he(t))}function li(e){var t=Za(e),n=Tn[t];if("function"!=typeof n||!(t in Nn.prototype))return!1;if(e===n)return!0;var r=Ya(n);return!!r&&e===r[0]}(pn&&ri(new pn(new ArrayBuffer(1)))!=C||hn&&ri(new hn)!=m||mn&&"[object Promise]"!=ri(mn.resolve())||vn&&ri(new vn)!=_||gn&&ri(new gn)!=O)&&(ri=function(e){var t=hr(e),n=t==g?e.constructor:void 0,r=n?ki(n):"";if(r)switch(r){case En:return C;case On:return m;case wn:return"[object Promise]";case Cn:return _;case Sn:return O}return t});var di=Ee?Vo:os;function fi(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ye)}function pi(e){return e==e&&!Go(e)}function hi(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in he(n)))}}function mi(e,t,n){return t=cn(void 0===t?e.length-1:t,0),function(){for(var a=arguments,i=-1,o=cn(a.length-t,0),c=r(o);++i<o;)c[i]=a[t+i];i=-1;for(var s=r(t+1);++i<t;)s[i]=a[i];return s[t]=n(c),it(e,this,s)}}function vi(e,t){return t.length<2?e:fr(e,qr(t,0,-1))}function gi(e,t){for(var n=e.length,r=sn(t.length,n),a=ba(e);r--;){var i=t[r];e[r]=ci(i,n)?a[i]:void 0}return e}function bi(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var _i=wi(zr),yi=Xt||function(e,t){return Ke.setTimeout(e,t)},Ei=wi(Gr);function Oi(e,t,n){var r=t+"";return Ei(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Q,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return ct(c,(function(n){var r="_."+n[0];t&n[1]&&!dt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(J);return t?t[1].split(X):[]}(r),n)))}function wi(e){var t=0,n=0;return function(){var r=un(),a=16-(r-n);if(n=r,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function Ci(e,t){var n=-1,r=e.length,a=r-1;for(t=void 0===t?r:t;++n<t;){var i=Lr(n,a),o=e[i];e[i]=e[n],e[n]=o}return e.length=t,e}var Si=function(e){var t=Co(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(W,(function(e,n,r,a){t.push(r?a.replace(te,"$1"):n||e)})),t}));function Ai(e){if("string"==typeof e||Xo(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ki(e){if(null!=e){try{return Oe.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ji(e){if(e instanceof Nn)return e.clone();var t=new Dn(e.__wrapped__,e.__chain__);return t.__actions__=ba(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Ti=Fr((function(e,t){return Lo(e)?er(e,or(t,1,Lo,!0)):[]})),Ii=Fr((function(e,t){var n=Fi(t);return Lo(n)&&(n=void 0),Lo(e)?er(e,or(t,1,Lo,!0),Ja(n,2)):[]})),Pi=Fr((function(e,t){var n=Fi(t);return Lo(n)&&(n=void 0),Lo(e)?er(e,or(t,1,Lo,!0),void 0,n):[]}));function Di(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=null==n?0:ac(n);return a<0&&(a=cn(r+a,0)),yt(e,Ja(t,3),a)}function Ni(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=r-1;return void 0!==n&&(a=ac(n),a=n<0?cn(r+a,0):sn(a,r-1)),yt(e,Ja(t,3),a,!0)}function xi(e){return(null==e?0:e.length)?or(e,1):[]}function Ri(e){return e&&e.length?e[0]:void 0}var Mi=Fr((function(e){var t=pt(e,oa);return t.length&&t[0]===e[0]?br(t):[]})),Li=Fr((function(e){var t=Fi(e),n=pt(e,oa);return t===Fi(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?br(n,Ja(t,2)):[]})),Bi=Fr((function(e){var t=Fi(e),n=pt(e,oa);return(t="function"==typeof t?t:void 0)&&n.pop(),n.length&&n[0]===e[0]?br(n,void 0,t):[]}));function Fi(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var Hi=Fr(Vi);function Vi(e,t){return e&&e.length&&t&&t.length?Rr(e,t):e}var Ui=Wa((function(e,t){var n=null==e?0:e.length,r=Zn(e,t);return Mr(e,pt(t,(function(e){return ci(e,n)?+e:e})).sort(ma)),r}));function zi(e){return null==e?e:fn.call(e)}var Gi=Fr((function(e){return $r(or(e,1,Lo,!0))})),Wi=Fr((function(e){var t=Fi(e);return Lo(t)&&(t=void 0),$r(or(e,1,Lo,!0),Ja(t,2))})),qi=Fr((function(e){var t=Fi(e);return t="function"==typeof t?t:void 0,$r(or(e,1,Lo,!0),void 0,t)}));function Ki(e){if(!e||!e.length)return[];var t=0;return e=lt(e,(function(e){if(Lo(e))return t=cn(e.length,t),!0})),Tt(t,(function(t){return pt(e,St(t))}))}function Yi(e,t){if(!e||!e.length)return[];var n=Ki(e);return null==t?n:pt(n,(function(e){return it(t,void 0,e)}))}var Zi=Fr((function(e,t){return Lo(e)?er(e,t):[]})),Qi=Fr((function(e){return aa(lt(e,Lo))})),Ji=Fr((function(e){var t=Fi(e);return Lo(t)&&(t=void 0),aa(lt(e,Lo),Ja(t,2))})),Xi=Fr((function(e){var t=Fi(e);return t="function"==typeof t?t:void 0,aa(lt(e,Lo),void 0,t)})),$i=Fr(Ki);var eo=Fr((function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n="function"==typeof n?(e.pop(),n):void 0,Yi(e,n)}));function to(e){var t=Tn(e);return t.__chain__=!0,t}function no(e,t){return t(e)}var ro=Wa((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,a=function(t){return Zn(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Nn&&ci(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:no,args:[a],thisArg:void 0}),new Dn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(a)}));var ao=ya((function(e,t,n){we.call(e,n)?++e[n]:Yn(e,n,1)}));var io=ka(Di),oo=ka(Ni);function co(e,t){return(xo(e)?ct:tr)(e,Ja(t,3))}function so(e,t){return(xo(e)?st:nr)(e,Ja(t,3))}var uo=ya((function(e,t,n){we.call(e,n)?e[n].push(t):Yn(e,n,[t])}));var lo=Fr((function(e,t,n){var a=-1,i="function"==typeof t,o=Mo(e)?r(e.length):[];return tr(e,(function(e){o[++a]=i?it(t,e,n):_r(e,t,n)})),o})),fo=ya((function(e,t,n){Yn(e,n,t)}));function po(e,t){return(xo(e)?pt:jr)(e,Ja(t,3))}var ho=ya((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var mo=Fr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&si(e,t[0],t[1])?t=[]:n>2&&si(t[0],t[1],t[2])&&(t=[t[0]]),Nr(e,or(t,1),[])})),vo=Jt||function(){return Ke.Date.now()};function go(e,t,n){return t=n?void 0:t,Ha(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function bo(e,t){var n;if("function"!=typeof t)throw new ge(i);return e=ac(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var _o=Fr((function(e,t,n){var r=1;if(n.length){var a=zt(n,Qa(_o));r|=32}return Ha(e,r,t,n,a)})),yo=Fr((function(e,t,n){var r=3;if(n.length){var a=zt(n,Qa(yo));r|=32}return Ha(t,r,e,n,a)}));function Eo(e,t,n){var r,a,o,c,s,u,l=0,d=!1,f=!1,p=!0;if("function"!=typeof e)throw new ge(i);function h(t){var n=r,i=a;return r=a=void 0,l=t,c=e.apply(i,n)}function m(e){return l=e,s=yi(g,t),d?h(e):c}function v(e){var n=e-u;return void 0===u||n>=t||n<0||f&&e-l>=o}function g(){var e=vo();if(v(e))return b(e);s=yi(g,function(e){var n=t-(e-u);return f?sn(n,o-(e-l)):n}(e))}function b(e){return s=void 0,p&&r?h(e):(r=a=void 0,c)}function _(){var e=vo(),n=v(e);if(r=arguments,a=this,u=e,n){if(void 0===s)return m(u);if(f)return da(s),s=yi(g,t),h(u)}return void 0===s&&(s=yi(g,t)),c}return t=oc(t)||0,Go(n)&&(d=!!n.leading,o=(f="maxWait"in n)?cn(oc(n.maxWait)||0,t):o,p="trailing"in n?!!n.trailing:p),_.cancel=function(){void 0!==s&&da(s),l=0,r=u=a=s=void 0},_.flush=function(){return void 0===s?c:b(vo())},_}var Oo=Fr((function(e,t){return $n(e,1,t)})),wo=Fr((function(e,t,n){return $n(e,oc(t)||0,n)}));function Co(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new ge(i);var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var o=e.apply(this,r);return n.cache=i.set(a,o)||i,o};return n.cache=new(Co.Cache||Mn),n}function So(e){if("function"!=typeof e)throw new ge(i);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Co.Cache=Mn;var Ao=ua((function(e,t){var n=(t=1==t.length&&xo(t[0])?pt(t[0],Pt(Ja())):pt(or(t,1),Pt(Ja()))).length;return Fr((function(r){for(var a=-1,i=sn(r.length,n);++a<i;)r[a]=t[a].call(this,r[a]);return it(e,this,r)}))})),ko=Fr((function(e,t){return Ha(e,32,void 0,t,zt(t,Qa(ko)))})),jo=Fr((function(e,t){return Ha(e,64,void 0,t,zt(t,Qa(jo)))})),To=Wa((function(e,t){return Ha(e,256,void 0,void 0,void 0,t)}));function Io(e,t){return e===t||e!=e&&t!=t}var Po=Ra(mr),Do=Ra((function(e,t){return e>=t})),No=yr(function(){return arguments}())?yr:function(e){return Wo(e)&&we.call(e,"callee")&&!qe.call(e,"callee")},xo=r.isArray,Ro=$e?Pt($e):function(e){return Wo(e)&&hr(e)==w};function Mo(e){return null!=e&&zo(e.length)&&!Vo(e)}function Lo(e){return Wo(e)&&Mo(e)}var Bo=nn||os,Fo=et?Pt(et):function(e){return Wo(e)&&hr(e)==d};function Ho(e){if(!Wo(e))return!1;var t=hr(e);return t==f||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Yo(e)}function Vo(e){if(!Go(e))return!1;var t=hr(e);return t==p||t==h||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Uo(e){return"number"==typeof e&&e==ac(e)}function zo(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Go(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Wo(e){return null!=e&&"object"==typeof e}var qo=tt?Pt(tt):function(e){return Wo(e)&&ri(e)==m};function Ko(e){return"number"==typeof e||Wo(e)&&hr(e)==v}function Yo(e){if(!Wo(e)||hr(e)!=g)return!1;var t=Ue(e);if(null===t)return!0;var n=we.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Oe.call(n)==ke}var Zo=nt?Pt(nt):function(e){return Wo(e)&&hr(e)==b};var Qo=rt?Pt(rt):function(e){return Wo(e)&&ri(e)==_};function Jo(e){return"string"==typeof e||!xo(e)&&Wo(e)&&hr(e)==y}function Xo(e){return"symbol"==typeof e||Wo(e)&&hr(e)==E}var $o=at?Pt(at):function(e){return Wo(e)&&zo(e.length)&&!!He[hr(e)]};var ec=Ra(kr),tc=Ra((function(e,t){return e<=t}));function nc(e){if(!e)return[];if(Mo(e))return Jo(e)?Kt(e):ba(e);if(Je&&e[Je])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Je]());var t=ri(e);return(t==m?Vt:t==_?Gt:Ic)(e)}function rc(e){return e?(e=oc(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ac(e){var t=rc(e),n=t%1;return t==t?n?t-n:t:0}function ic(e){return e?Qn(ac(e),0,4294967295):0}function oc(e){if("number"==typeof e)return e;if(Xo(e))return NaN;if(Go(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Go(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=It(e);var n=ie.test(e);return n||ce.test(e)?Ge(e.slice(2),n?2:8):ae.test(e)?NaN:+e}function cc(e){return _a(e,Oc(e))}function sc(e){return null==e?"":Xr(e)}var uc=Ea((function(e,t){if(fi(t)||Mo(t))_a(t,Ec(t),e);else for(var n in t)we.call(t,n)&&Gn(e,n,t[n])})),lc=Ea((function(e,t){_a(t,Oc(t),e)})),dc=Ea((function(e,t,n,r){_a(t,Oc(t),e,r)})),fc=Ea((function(e,t,n,r){_a(t,Ec(t),e,r)})),pc=Wa(Zn);var hc=Fr((function(e,t){e=he(e);var n=-1,r=t.length,a=r>2?t[2]:void 0;for(a&&si(t[0],t[1],a)&&(r=1);++n<r;)for(var i=t[n],o=Oc(i),c=-1,s=o.length;++c<s;){var u=o[c],l=e[u];(void 0===l||Io(l,ye[u])&&!we.call(e,u))&&(e[u]=i[u])}return e})),mc=Fr((function(e){return e.push(void 0,Ua),it(Cc,void 0,e)}));function vc(e,t,n){var r=null==e?void 0:fr(e,t);return void 0===r?n:r}function gc(e,t){return null!=e&&ai(e,t,gr)}var bc=Ia((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ae.call(t)),e[t]=n}),Gc(Kc)),_c=Ia((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ae.call(t)),we.call(e,t)?e[t].push(n):e[t]=[n]}),Ja),yc=Fr(_r);function Ec(e){return Mo(e)?Fn(e):Sr(e)}function Oc(e){return Mo(e)?Fn(e,!0):Ar(e)}var wc=Ea((function(e,t,n){Pr(e,t,n)})),Cc=Ea((function(e,t,n,r){Pr(e,t,n,r)})),Sc=Wa((function(e,t){var n={};if(null==e)return n;var r=!1;t=pt(t,(function(t){return t=sa(t,e),r||(r=t.length>1),t})),_a(e,Ka(e),n),r&&(n=Jn(n,7,za));for(var a=t.length;a--;)ea(n,t[a]);return n}));var Ac=Wa((function(e,t){return null==e?{}:function(e,t){return xr(e,t,(function(t,n){return gc(e,n)}))}(e,t)}));function kc(e,t){if(null==e)return{};var n=pt(Ka(e),(function(e){return[e]}));return t=Ja(t),xr(e,n,(function(e,n){return t(e,n[0])}))}var jc=Fa(Ec),Tc=Fa(Oc);function Ic(e){return null==e?[]:Dt(e,Ec(e))}var Pc=Sa((function(e,t,n){return t=t.toLowerCase(),e+(n?Dc(t):t)}));function Dc(e){return Hc(sc(e).toLowerCase())}function Nc(e){return(e=sc(e))&&e.replace(ue,Lt).replace(Ne,"")}var xc=Sa((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Rc=Sa((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Mc=Ca("toLowerCase");var Lc=Sa((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Bc=Sa((function(e,t,n){return e+(n?" ":"")+Hc(t)}));var Fc=Sa((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Hc=Ca("toUpperCase");function Vc(e,t,n){return e=sc(e),void 0===(t=n?void 0:t)?function(e){return Le.test(e)}(e)?function(e){return e.match(Re)||[]}(e):function(e){return e.match($)||[]}(e):e.match(t)||[]}var Uc=Fr((function(e,t){try{return it(e,void 0,t)}catch(e){return Ho(e)?e:new Z(e)}})),zc=Wa((function(e,t){return ct(t,(function(t){t=Ai(t),Yn(e,t,_o(e[t],e))})),e}));function Gc(e){return function(){return e}}var Wc=ja(),qc=ja(!0);function Kc(e){return e}function Yc(e){return Cr("function"==typeof e?e:Jn(e,1))}var Zc=Fr((function(e,t){return function(n){return _r(n,e,t)}})),Qc=Fr((function(e,t){return function(n){return _r(e,n,t)}}));function Jc(e,t,n){var r=Ec(t),a=dr(t,r);null!=n||Go(t)&&(a.length||!r.length)||(n=t,t=e,e=this,a=dr(t,Ec(t)));var i=!(Go(n)&&"chain"in n&&!n.chain),o=Vo(e);return ct(a,(function(n){var r=t[n];e[n]=r,o&&(e.prototype[n]=function(){var t=this.__chain__;if(i||t){var n=e(this.__wrapped__),a=n.__actions__=ba(this.__actions__);return a.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,ht([this.value()],arguments))})})),e}function Xc(){}var $c=Da(pt),es=Da(ut),ts=Da(gt);function ns(e){return ui(e)?St(Ai(e)):function(e){return function(t){return fr(t,e)}}(e)}var rs=xa(),as=xa(!0);function is(){return[]}function os(){return!1}var cs=Pa((function(e,t){return e+t}),0),ss=La("ceil"),us=Pa((function(e,t){return e/t}),1),ls=La("floor");var ds,fs=Pa((function(e,t){return e*t}),1),ps=La("round"),hs=Pa((function(e,t){return e-t}),0);return Tn.after=function(e,t){if("function"!=typeof t)throw new ge(i);return e=ac(e),function(){if(--e<1)return t.apply(this,arguments)}},Tn.ary=go,Tn.assign=uc,Tn.assignIn=lc,Tn.assignInWith=dc,Tn.assignWith=fc,Tn.at=pc,Tn.before=bo,Tn.bind=_o,Tn.bindAll=zc,Tn.bindKey=yo,Tn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return xo(e)?e:[e]},Tn.chain=to,Tn.chunk=function(e,t,n){t=(n?si(e,t,n):void 0===t)?1:cn(ac(t),0);var a=null==e?0:e.length;if(!a||t<1)return[];for(var i=0,o=0,c=r($t(a/t));i<a;)c[o++]=qr(e,i,i+=t);return c},Tn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,a=[];++t<n;){var i=e[t];i&&(a[r++]=i)}return a},Tn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],a=e;a--;)t[a-1]=arguments[a];return ht(xo(n)?ba(n):[n],or(t,1))},Tn.cond=function(e){var t=null==e?0:e.length,n=Ja();return e=t?pt(e,(function(e){if("function"!=typeof e[1])throw new ge(i);return[n(e[0]),e[1]]})):[],Fr((function(n){for(var r=-1;++r<t;){var a=e[r];if(it(a[0],this,n))return it(a[1],this,n)}}))},Tn.conforms=function(e){return function(e){var t=Ec(e);return function(n){return Xn(n,e,t)}}(Jn(e,1))},Tn.constant=Gc,Tn.countBy=ao,Tn.create=function(e,t){var n=In(e);return null==t?n:Kn(n,t)},Tn.curry=function e(t,n,r){var a=Ha(t,8,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return a.placeholder=e.placeholder,a},Tn.curryRight=function e(t,n,r){var a=Ha(t,16,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return a.placeholder=e.placeholder,a},Tn.debounce=Eo,Tn.defaults=hc,Tn.defaultsDeep=mc,Tn.defer=Oo,Tn.delay=wo,Tn.difference=Ti,Tn.differenceBy=Ii,Tn.differenceWith=Pi,Tn.drop=function(e,t,n){var r=null==e?0:e.length;return r?qr(e,(t=n||void 0===t?1:ac(t))<0?0:t,r):[]},Tn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?qr(e,0,(t=r-(t=n||void 0===t?1:ac(t)))<0?0:t):[]},Tn.dropRightWhile=function(e,t){return e&&e.length?na(e,Ja(t,3),!0,!0):[]},Tn.dropWhile=function(e,t){return e&&e.length?na(e,Ja(t,3),!0):[]},Tn.fill=function(e,t,n,r){var a=null==e?0:e.length;return a?(n&&"number"!=typeof n&&si(e,t,n)&&(n=0,r=a),function(e,t,n,r){var a=e.length;for((n=ac(n))<0&&(n=-n>a?0:a+n),(r=void 0===r||r>a?a:ac(r))<0&&(r+=a),r=n>r?0:ic(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Tn.filter=function(e,t){return(xo(e)?lt:ir)(e,Ja(t,3))},Tn.flatMap=function(e,t){return or(po(e,t),1)},Tn.flatMapDeep=function(e,t){return or(po(e,t),1/0)},Tn.flatMapDepth=function(e,t,n){return n=void 0===n?1:ac(n),or(po(e,t),n)},Tn.flatten=xi,Tn.flattenDeep=function(e){return(null==e?0:e.length)?or(e,1/0):[]},Tn.flattenDepth=function(e,t){return(null==e?0:e.length)?or(e,t=void 0===t?1:ac(t)):[]},Tn.flip=function(e){return Ha(e,512)},Tn.flow=Wc,Tn.flowRight=qc,Tn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var a=e[t];r[a[0]]=a[1]}return r},Tn.functions=function(e){return null==e?[]:dr(e,Ec(e))},Tn.functionsIn=function(e){return null==e?[]:dr(e,Oc(e))},Tn.groupBy=uo,Tn.initial=function(e){return(null==e?0:e.length)?qr(e,0,-1):[]},Tn.intersection=Mi,Tn.intersectionBy=Li,Tn.intersectionWith=Bi,Tn.invert=bc,Tn.invertBy=_c,Tn.invokeMap=lo,Tn.iteratee=Yc,Tn.keyBy=fo,Tn.keys=Ec,Tn.keysIn=Oc,Tn.map=po,Tn.mapKeys=function(e,t){var n={};return t=Ja(t,3),ur(e,(function(e,r,a){Yn(n,t(e,r,a),e)})),n},Tn.mapValues=function(e,t){var n={};return t=Ja(t,3),ur(e,(function(e,r,a){Yn(n,r,t(e,r,a))})),n},Tn.matches=function(e){return Tr(Jn(e,1))},Tn.matchesProperty=function(e,t){return Ir(e,Jn(t,1))},Tn.memoize=Co,Tn.merge=wc,Tn.mergeWith=Cc,Tn.method=Zc,Tn.methodOf=Qc,Tn.mixin=Jc,Tn.negate=So,Tn.nthArg=function(e){return e=ac(e),Fr((function(t){return Dr(t,e)}))},Tn.omit=Sc,Tn.omitBy=function(e,t){return kc(e,So(Ja(t)))},Tn.once=function(e){return bo(2,e)},Tn.orderBy=function(e,t,n,r){return null==e?[]:(xo(t)||(t=null==t?[]:[t]),xo(n=r?void 0:n)||(n=null==n?[]:[n]),Nr(e,t,n))},Tn.over=$c,Tn.overArgs=Ao,Tn.overEvery=es,Tn.overSome=ts,Tn.partial=ko,Tn.partialRight=jo,Tn.partition=ho,Tn.pick=Ac,Tn.pickBy=kc,Tn.property=ns,Tn.propertyOf=function(e){return function(t){return null==e?void 0:fr(e,t)}},Tn.pull=Hi,Tn.pullAll=Vi,Tn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Rr(e,t,Ja(n,2)):e},Tn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Rr(e,t,void 0,n):e},Tn.pullAt=Ui,Tn.range=rs,Tn.rangeRight=as,Tn.rearg=To,Tn.reject=function(e,t){return(xo(e)?lt:ir)(e,So(Ja(t,3)))},Tn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,a=[],i=e.length;for(t=Ja(t,3);++r<i;){var o=e[r];t(o,r,e)&&(n.push(o),a.push(r))}return Mr(e,a),n},Tn.rest=function(e,t){if("function"!=typeof e)throw new ge(i);return Fr(e,t=void 0===t?t:ac(t))},Tn.reverse=zi,Tn.sampleSize=function(e,t,n){return t=(n?si(e,t,n):void 0===t)?1:ac(t),(xo(e)?Vn:Vr)(e,t)},Tn.set=function(e,t,n){return null==e?e:Ur(e,t,n)},Tn.setWith=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:Ur(e,t,n,r)},Tn.shuffle=function(e){return(xo(e)?Un:Wr)(e)},Tn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&si(e,t,n)?(t=0,n=r):(t=null==t?0:ac(t),n=void 0===n?r:ac(n)),qr(e,t,n)):[]},Tn.sortBy=mo,Tn.sortedUniq=function(e){return e&&e.length?Qr(e):[]},Tn.sortedUniqBy=function(e,t){return e&&e.length?Qr(e,Ja(t,2)):[]},Tn.split=function(e,t,n){return n&&"number"!=typeof n&&si(e,t,n)&&(t=n=void 0),(n=void 0===n?4294967295:n>>>0)?(e=sc(e))&&("string"==typeof t||null!=t&&!Zo(t))&&!(t=Xr(t))&&Ht(e)?la(Kt(e),0,n):e.split(t,n):[]},Tn.spread=function(e,t){if("function"!=typeof e)throw new ge(i);return t=null==t?0:cn(ac(t),0),Fr((function(n){var r=n[t],a=la(n,0,t);return r&&ht(a,r),it(e,this,a)}))},Tn.tail=function(e){var t=null==e?0:e.length;return t?qr(e,1,t):[]},Tn.take=function(e,t,n){return e&&e.length?qr(e,0,(t=n||void 0===t?1:ac(t))<0?0:t):[]},Tn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?qr(e,(t=r-(t=n||void 0===t?1:ac(t)))<0?0:t,r):[]},Tn.takeRightWhile=function(e,t){return e&&e.length?na(e,Ja(t,3),!1,!0):[]},Tn.takeWhile=function(e,t){return e&&e.length?na(e,Ja(t,3)):[]},Tn.tap=function(e,t){return t(e),e},Tn.throttle=function(e,t,n){var r=!0,a=!0;if("function"!=typeof e)throw new ge(i);return Go(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),Eo(e,t,{leading:r,maxWait:t,trailing:a})},Tn.thru=no,Tn.toArray=nc,Tn.toPairs=jc,Tn.toPairsIn=Tc,Tn.toPath=function(e){return xo(e)?pt(e,Ai):Xo(e)?[e]:ba(Si(sc(e)))},Tn.toPlainObject=cc,Tn.transform=function(e,t,n){var r=xo(e),a=r||Bo(e)||$o(e);if(t=Ja(t,4),null==n){var i=e&&e.constructor;n=a?r?new i:[]:Go(e)&&Vo(i)?In(Ue(e)):{}}return(a?ct:ur)(e,(function(e,r,a){return t(n,e,r,a)})),n},Tn.unary=function(e){return go(e,1)},Tn.union=Gi,Tn.unionBy=Wi,Tn.unionWith=qi,Tn.uniq=function(e){return e&&e.length?$r(e):[]},Tn.uniqBy=function(e,t){return e&&e.length?$r(e,Ja(t,2)):[]},Tn.uniqWith=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?$r(e,void 0,t):[]},Tn.unset=function(e,t){return null==e||ea(e,t)},Tn.unzip=Ki,Tn.unzipWith=Yi,Tn.update=function(e,t,n){return null==e?e:ta(e,t,ca(n))},Tn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:ta(e,t,ca(n),r)},Tn.values=Ic,Tn.valuesIn=function(e){return null==e?[]:Dt(e,Oc(e))},Tn.without=Zi,Tn.words=Vc,Tn.wrap=function(e,t){return ko(ca(t),e)},Tn.xor=Qi,Tn.xorBy=Ji,Tn.xorWith=Xi,Tn.zip=$i,Tn.zipObject=function(e,t){return ia(e||[],t||[],Gn)},Tn.zipObjectDeep=function(e,t){return ia(e||[],t||[],Ur)},Tn.zipWith=eo,Tn.entries=jc,Tn.entriesIn=Tc,Tn.extend=lc,Tn.extendWith=dc,Jc(Tn,Tn),Tn.add=cs,Tn.attempt=Uc,Tn.camelCase=Pc,Tn.capitalize=Dc,Tn.ceil=ss,Tn.clamp=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=oc(n))==n?n:0),void 0!==t&&(t=(t=oc(t))==t?t:0),Qn(oc(e),t,n)},Tn.clone=function(e){return Jn(e,4)},Tn.cloneDeep=function(e){return Jn(e,5)},Tn.cloneDeepWith=function(e,t){return Jn(e,5,t="function"==typeof t?t:void 0)},Tn.cloneWith=function(e,t){return Jn(e,4,t="function"==typeof t?t:void 0)},Tn.conformsTo=function(e,t){return null==t||Xn(e,t,Ec(t))},Tn.deburr=Nc,Tn.defaultTo=function(e,t){return null==e||e!=e?t:e},Tn.divide=us,Tn.endsWith=function(e,t,n){e=sc(e),t=Xr(t);var r=e.length,a=n=void 0===n?r:Qn(ac(n),0,r);return(n-=t.length)>=0&&e.slice(n,a)==t},Tn.eq=Io,Tn.escape=function(e){return(e=sc(e))&&F.test(e)?e.replace(L,Bt):e},Tn.escapeRegExp=function(e){return(e=sc(e))&&K.test(e)?e.replace(q,"\\$&"):e},Tn.every=function(e,t,n){var r=xo(e)?ut:rr;return n&&si(e,t,n)&&(t=void 0),r(e,Ja(t,3))},Tn.find=io,Tn.findIndex=Di,Tn.findKey=function(e,t){return _t(e,Ja(t,3),ur)},Tn.findLast=oo,Tn.findLastIndex=Ni,Tn.findLastKey=function(e,t){return _t(e,Ja(t,3),lr)},Tn.floor=ls,Tn.forEach=co,Tn.forEachRight=so,Tn.forIn=function(e,t){return null==e?e:cr(e,Ja(t,3),Oc)},Tn.forInRight=function(e,t){return null==e?e:sr(e,Ja(t,3),Oc)},Tn.forOwn=function(e,t){return e&&ur(e,Ja(t,3))},Tn.forOwnRight=function(e,t){return e&&lr(e,Ja(t,3))},Tn.get=vc,Tn.gt=Po,Tn.gte=Do,Tn.has=function(e,t){return null!=e&&ai(e,t,vr)},Tn.hasIn=gc,Tn.head=Ri,Tn.identity=Kc,Tn.includes=function(e,t,n,r){e=Mo(e)?e:Ic(e),n=n&&!r?ac(n):0;var a=e.length;return n<0&&(n=cn(a+n,0)),Jo(e)?n<=a&&e.indexOf(t,n)>-1:!!a&&Et(e,t,n)>-1},Tn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=null==n?0:ac(n);return a<0&&(a=cn(r+a,0)),Et(e,t,a)},Tn.inRange=function(e,t,n){return t=rc(t),void 0===n?(n=t,t=0):n=rc(n),function(e,t,n){return e>=sn(t,n)&&e<cn(t,n)}(e=oc(e),t,n)},Tn.invoke=yc,Tn.isArguments=No,Tn.isArray=xo,Tn.isArrayBuffer=Ro,Tn.isArrayLike=Mo,Tn.isArrayLikeObject=Lo,Tn.isBoolean=function(e){return!0===e||!1===e||Wo(e)&&hr(e)==l},Tn.isBuffer=Bo,Tn.isDate=Fo,Tn.isElement=function(e){return Wo(e)&&1===e.nodeType&&!Yo(e)},Tn.isEmpty=function(e){if(null==e)return!0;if(Mo(e)&&(xo(e)||"string"==typeof e||"function"==typeof e.splice||Bo(e)||$o(e)||No(e)))return!e.length;var t=ri(e);if(t==m||t==_)return!e.size;if(fi(e))return!Sr(e).length;for(var n in e)if(we.call(e,n))return!1;return!0},Tn.isEqual=function(e,t){return Er(e,t)},Tn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===r?Er(e,t,void 0,n):!!r},Tn.isError=Ho,Tn.isFinite=function(e){return"number"==typeof e&&rn(e)},Tn.isFunction=Vo,Tn.isInteger=Uo,Tn.isLength=zo,Tn.isMap=qo,Tn.isMatch=function(e,t){return e===t||Or(e,t,$a(t))},Tn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:void 0,Or(e,t,$a(t),n)},Tn.isNaN=function(e){return Ko(e)&&e!=+e},Tn.isNative=function(e){if(di(e))throw new Z("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return wr(e)},Tn.isNil=function(e){return null==e},Tn.isNull=function(e){return null===e},Tn.isNumber=Ko,Tn.isObject=Go,Tn.isObjectLike=Wo,Tn.isPlainObject=Yo,Tn.isRegExp=Zo,Tn.isSafeInteger=function(e){return Uo(e)&&e>=-9007199254740991&&e<=9007199254740991},Tn.isSet=Qo,Tn.isString=Jo,Tn.isSymbol=Xo,Tn.isTypedArray=$o,Tn.isUndefined=function(e){return void 0===e},Tn.isWeakMap=function(e){return Wo(e)&&ri(e)==O},Tn.isWeakSet=function(e){return Wo(e)&&"[object WeakSet]"==hr(e)},Tn.join=function(e,t){return null==e?"":an.call(e,t)},Tn.kebabCase=xc,Tn.last=Fi,Tn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=r;return void 0!==n&&(a=(a=ac(n))<0?cn(r+a,0):sn(a,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,a):yt(e,wt,a,!0)},Tn.lowerCase=Rc,Tn.lowerFirst=Mc,Tn.lt=ec,Tn.lte=tc,Tn.max=function(e){return e&&e.length?ar(e,Kc,mr):void 0},Tn.maxBy=function(e,t){return e&&e.length?ar(e,Ja(t,2),mr):void 0},Tn.mean=function(e){return Ct(e,Kc)},Tn.meanBy=function(e,t){return Ct(e,Ja(t,2))},Tn.min=function(e){return e&&e.length?ar(e,Kc,kr):void 0},Tn.minBy=function(e,t){return e&&e.length?ar(e,Ja(t,2),kr):void 0},Tn.stubArray=is,Tn.stubFalse=os,Tn.stubObject=function(){return{}},Tn.stubString=function(){return""},Tn.stubTrue=function(){return!0},Tn.multiply=fs,Tn.nth=function(e,t){return e&&e.length?Dr(e,ac(t)):void 0},Tn.noConflict=function(){return Ke._===this&&(Ke._=je),this},Tn.noop=Xc,Tn.now=vo,Tn.pad=function(e,t,n){e=sc(e);var r=(t=ac(t))?qt(e):0;if(!t||r>=t)return e;var a=(t-r)/2;return Na(en(a),n)+e+Na($t(a),n)},Tn.padEnd=function(e,t,n){e=sc(e);var r=(t=ac(t))?qt(e):0;return t&&r<t?e+Na(t-r,n):e},Tn.padStart=function(e,t,n){e=sc(e);var r=(t=ac(t))?qt(e):0;return t&&r<t?Na(t-r,n)+e:e},Tn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),ln(sc(e).replace(Y,""),t||0)},Tn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&si(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=rc(e),void 0===t?(t=e,e=0):t=rc(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var a=dn();return sn(e+a*(t-e+ze("1e-"+((a+"").length-1))),t)}return Lr(e,t)},Tn.reduce=function(e,t,n){var r=xo(e)?mt:kt,a=arguments.length<3;return r(e,Ja(t,4),n,a,tr)},Tn.reduceRight=function(e,t,n){var r=xo(e)?vt:kt,a=arguments.length<3;return r(e,Ja(t,4),n,a,nr)},Tn.repeat=function(e,t,n){return t=(n?si(e,t,n):void 0===t)?1:ac(t),Br(sc(e),t)},Tn.replace=function(){var e=arguments,t=sc(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Tn.result=function(e,t,n){var r=-1,a=(t=sa(t,e)).length;for(a||(a=1,e=void 0);++r<a;){var i=null==e?void 0:e[Ai(t[r])];void 0===i&&(r=a,i=n),e=Vo(i)?i.call(e):i}return e},Tn.round=ps,Tn.runInContext=e,Tn.sample=function(e){return(xo(e)?Hn:Hr)(e)},Tn.size=function(e){if(null==e)return 0;if(Mo(e))return Jo(e)?qt(e):e.length;var t=ri(e);return t==m||t==_?e.size:Sr(e).length},Tn.snakeCase=Lc,Tn.some=function(e,t,n){var r=xo(e)?gt:Kr;return n&&si(e,t,n)&&(t=void 0),r(e,Ja(t,3))},Tn.sortedIndex=function(e,t){return Yr(e,t)},Tn.sortedIndexBy=function(e,t,n){return Zr(e,t,Ja(n,2))},Tn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=Yr(e,t);if(r<n&&Io(e[r],t))return r}return-1},Tn.sortedLastIndex=function(e,t){return Yr(e,t,!0)},Tn.sortedLastIndexBy=function(e,t,n){return Zr(e,t,Ja(n,2),!0)},Tn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=Yr(e,t,!0)-1;if(Io(e[n],t))return n}return-1},Tn.startCase=Bc,Tn.startsWith=function(e,t,n){return e=sc(e),n=null==n?0:Qn(ac(n),0,e.length),t=Xr(t),e.slice(n,n+t.length)==t},Tn.subtract=hs,Tn.sum=function(e){return e&&e.length?jt(e,Kc):0},Tn.sumBy=function(e,t){return e&&e.length?jt(e,Ja(t,2)):0},Tn.template=function(e,t,n){var r=Tn.templateSettings;n&&si(e,t,n)&&(t=void 0),e=sc(e),t=dc({},t,r,Va);var a,i,o=dc({},t.imports,r.imports,Va),c=Ec(o),s=Dt(o,c),u=0,l=t.interpolate||le,d="__p += '",f=me((t.escape||le).source+"|"+l.source+"|"+(l===U?ne:le).source+"|"+(t.evaluate||le).source+"|$","g"),p="//# sourceURL="+(we.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Fe+"]")+"\n";e.replace(f,(function(t,n,r,o,c,s){return r||(r=o),d+=e.slice(u,s).replace(de,Ft),n&&(a=!0,d+="' +\n__e("+n+") +\n'"),c&&(i=!0,d+="';\n"+c+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=s+t.length,t})),d+="';\n";var h=we.call(t,"variable")&&t.variable;if(h){if(ee.test(h))throw new Z("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(i?d.replace(N,""):d).replace(x,"$1").replace(R,"$1;"),d="function("+(h||"obj")+") {\n"+(h?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=Uc((function(){return fe(c,p+"return "+d).apply(void 0,s)}));if(m.source=d,Ho(m))throw m;return m},Tn.times=function(e,t){if((e=ac(e))<1||e>9007199254740991)return[];var n=4294967295,r=sn(e,4294967295);e-=4294967295;for(var a=Tt(r,t=Ja(t));++n<e;)t(n);return a},Tn.toFinite=rc,Tn.toInteger=ac,Tn.toLength=ic,Tn.toLower=function(e){return sc(e).toLowerCase()},Tn.toNumber=oc,Tn.toSafeInteger=function(e){return e?Qn(ac(e),-9007199254740991,9007199254740991):0===e?e:0},Tn.toString=sc,Tn.toUpper=function(e){return sc(e).toUpperCase()},Tn.trim=function(e,t,n){if((e=sc(e))&&(n||void 0===t))return It(e);if(!e||!(t=Xr(t)))return e;var r=Kt(e),a=Kt(t);return la(r,xt(r,a),Rt(r,a)+1).join("")},Tn.trimEnd=function(e,t,n){if((e=sc(e))&&(n||void 0===t))return e.slice(0,Yt(e)+1);if(!e||!(t=Xr(t)))return e;var r=Kt(e);return la(r,0,Rt(r,Kt(t))+1).join("")},Tn.trimStart=function(e,t,n){if((e=sc(e))&&(n||void 0===t))return e.replace(Y,"");if(!e||!(t=Xr(t)))return e;var r=Kt(e);return la(r,xt(r,Kt(t))).join("")},Tn.truncate=function(e,t){var n=30,r="...";if(Go(t)){var a="separator"in t?t.separator:a;n="length"in t?ac(t.length):n,r="omission"in t?Xr(t.omission):r}var i=(e=sc(e)).length;if(Ht(e)){var o=Kt(e);i=o.length}if(n>=i)return e;var c=n-qt(r);if(c<1)return r;var s=o?la(o,0,c).join(""):e.slice(0,c);if(void 0===a)return s+r;if(o&&(c+=s.length-c),Zo(a)){if(e.slice(c).search(a)){var u,l=s;for(a.global||(a=me(a.source,sc(re.exec(a))+"g")),a.lastIndex=0;u=a.exec(l);)var d=u.index;s=s.slice(0,void 0===d?c:d)}}else if(e.indexOf(Xr(a),c)!=c){var f=s.lastIndexOf(a);f>-1&&(s=s.slice(0,f))}return s+r},Tn.unescape=function(e){return(e=sc(e))&&B.test(e)?e.replace(M,Zt):e},Tn.uniqueId=function(e){var t=++Ce;return sc(e)+t},Tn.upperCase=Fc,Tn.upperFirst=Hc,Tn.each=co,Tn.eachRight=so,Tn.first=Ri,Jc(Tn,(ds={},ur(Tn,(function(e,t){we.call(Tn.prototype,t)||(ds[t]=e)})),ds),{chain:!1}),Tn.VERSION="4.17.21",ct(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Tn[e].placeholder=Tn})),ct(["drop","take"],(function(e,t){Nn.prototype[e]=function(n){n=void 0===n?1:cn(ac(n),0);var r=this.__filtered__&&!t?new Nn(this):this.clone();return r.__filtered__?r.__takeCount__=sn(n,r.__takeCount__):r.__views__.push({size:sn(n,4294967295),type:e+(r.__dir__<0?"Right":"")}),r},Nn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),ct(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Nn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Ja(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),ct(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Nn.prototype[e]=function(){return this[n](1).value()[0]}})),ct(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Nn.prototype[e]=function(){return this.__filtered__?new Nn(this):this[n](1)}})),Nn.prototype.compact=function(){return this.filter(Kc)},Nn.prototype.find=function(e){return this.filter(e).head()},Nn.prototype.findLast=function(e){return this.reverse().find(e)},Nn.prototype.invokeMap=Fr((function(e,t){return"function"==typeof e?new Nn(this):this.map((function(n){return _r(n,e,t)}))})),Nn.prototype.reject=function(e){return this.filter(So(Ja(e)))},Nn.prototype.slice=function(e,t){e=ac(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Nn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),void 0!==t&&(n=(t=ac(t))<0?n.dropRight(-t):n.take(t-e)),n)},Nn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Nn.prototype.toArray=function(){return this.take(4294967295)},ur(Nn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),a=Tn[r?"take"+("last"==t?"Right":""):t],i=r||/^find/.test(t);a&&(Tn.prototype[t]=function(){var t=this.__wrapped__,o=r?[1]:arguments,c=t instanceof Nn,s=o[0],u=c||xo(t),l=function(e){var t=a.apply(Tn,ht([e],o));return r&&d?t[0]:t};u&&n&&"function"==typeof s&&1!=s.length&&(c=u=!1);var d=this.__chain__,f=!!this.__actions__.length,p=i&&!d,h=c&&!f;if(!i&&u){t=h?t:new Nn(this);var m=e.apply(t,o);return m.__actions__.push({func:no,args:[l],thisArg:void 0}),new Dn(m,d)}return p&&h?e.apply(this,o):(m=this.thru(l),p?r?m.value()[0]:m.value():m)})})),ct(["pop","push","shift","sort","splice","unshift"],(function(e){var t=be[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Tn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var a=this.value();return t.apply(xo(a)?a:[],e)}return this[n]((function(n){return t.apply(xo(n)?n:[],e)}))}})),ur(Nn.prototype,(function(e,t){var n=Tn[t];if(n){var r=n.name+"";we.call(yn,r)||(yn[r]=[]),yn[r].push({name:t,func:n})}})),yn[Ta(void 0,2).name]=[{name:"wrapper",func:void 0}],Nn.prototype.clone=function(){var e=new Nn(this.__wrapped__);return e.__actions__=ba(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ba(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ba(this.__views__),e},Nn.prototype.reverse=function(){if(this.__filtered__){var e=new Nn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Nn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=xo(e),r=t<0,a=n?e.length:0,i=function(e,t,n){var r=-1,a=n.length;for(;++r<a;){var i=n[r],o=i.size;switch(i.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=sn(t,e+o);break;case"takeRight":e=cn(e,t-o)}}return{start:e,end:t}}(0,a,this.__views__),o=i.start,c=i.end,s=c-o,u=r?c:o-1,l=this.__iteratees__,d=l.length,f=0,p=sn(s,this.__takeCount__);if(!n||!r&&a==s&&p==s)return ra(e,this.__actions__);var h=[];e:for(;s--&&f<p;){for(var m=-1,v=e[u+=t];++m<d;){var g=l[m],b=g.iteratee,_=g.type,y=b(v);if(2==_)v=y;else if(!y){if(1==_)continue e;break e}}h[f++]=v}return h},Tn.prototype.at=ro,Tn.prototype.chain=function(){return to(this)},Tn.prototype.commit=function(){return new Dn(this.value(),this.__chain__)},Tn.prototype.next=function(){void 0===this.__values__&&(this.__values__=nc(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},Tn.prototype.plant=function(e){for(var t,n=this;n instanceof Pn;){var r=ji(n);r.__index__=0,r.__values__=void 0,t?a.__wrapped__=r:t=r;var a=r;n=n.__wrapped__}return a.__wrapped__=e,t},Tn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Nn){var t=e;return this.__actions__.length&&(t=new Nn(this)),(t=t.reverse()).__actions__.push({func:no,args:[zi],thisArg:void 0}),new Dn(t,this.__chain__)}return this.thru(zi)},Tn.prototype.toJSON=Tn.prototype.valueOf=Tn.prototype.value=function(){return ra(this.__wrapped__,this.__actions__)},Tn.prototype.first=Tn.prototype.head,Je&&(Tn.prototype[Je]=function(){return this}),Tn}();Ke._=Qt,void 0===(a=function(){return Qt}.call(t,n,t,r))||(r.exports=a)}).call(this)}).call(this,n(171),n(298)(e))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return o}));var r=7531722,a=7556576,i=6126832,o=[7598572,7571751,7677811]},function(e,t,n){"use strict";var r;function a(e){return{type:r.SET_DOC_EDIT_INFO,data:e}}function i(e){return{type:r.SET_DOC_UPLOAD_INFO,data:e}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),function(e){e.SET_DOC_EDIT_INFO="SET_DOC_EDIT_INFO",e.SET_DOC_UPLOAD_INFO="SET_DOC_UPLOAD_INFO"}(r||(r={}))},function(e,t,n){"use strict";function r(e,t){var n="vkui_edu_";switch(e){case"horizontal":n+="org_";break;case"vertical":default:n+="school_"}return n+t}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(7),a=n.n(r),i=n(0),o=n.n(i),c=(n(976),n(14)),s=n(1),u=n(29),l=Object(s.Qb)((function(e){var t=e.descLineCount,n=void 0===t?1:t,r=Object(s.Ob)().viewWidth,l=Object(i.useState)(Array(n).fill(n)),d=a()(l,1)[0],f=Object(u.b)(r),p=f?"160px":"128px",h=f?"160px":"187px";return o.a.createElement(s.pb,{className:"VideoListItemSkeleton",before:o.a.createElement(c.a,{width:"142px",height:"80px",className:"VideoListItemSkeleton__image"})},o.a.createElement(c.a,{width:p,className:"VideoListItemSkeleton__title"}),d.map((function(e,t){return o.a.createElement(c.a,{key:"line_".concat(t),width:h,className:"VideoListItemSkeleton__descr"})})))}),{viewWidth:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.detectIOS=a,t.isLandscapePhone=function(){return 90===Math.abs(window.orientation)&&!o},t.checkIPadOS=v,t.isIOSChrome=t.isIPhoneX=t.isScrollBasedViewport=t.isWKWebView=t.iosMinor=t.iosMajor=t.isIPadOS=t.isIOS=t.isIPhone=t.isIPad=t.IOS_NO_KEYBOARD_ALLOWED_OFFSET=t.IPHONE_KEYBOARD_REJECT_OFFSET=t.IPHONE_X_SAFARI_BOTTOM_BAR=t.IPHONE_SAFARI_BOTTOM_BAR=void 0;var r=n(581);t.IPHONE_SAFARI_BOTTOM_BAR=45;t.IPHONE_X_SAFARI_BOTTOM_BAR=85;t.IPHONE_KEYBOARD_REJECT_OFFSET=180;function a(e){e||(e=r.canUseDOM?navigator.userAgent.toLowerCase():"");var t=v(e),n=t||-1!==e.indexOf("ipad"),a=!n&&-1!==e.search(/iphone|ipod/),i=a||n,o=i&&e.match(/OS ([\d_]+) like Mac OS X/i),c=0,s=0;t?(c=13,s=0):o&&(c=+(o=o[1].split("_"))[0],s=+o[1]),o=null;var u=c<13&&!(11===c&&s<3),l=i&&function(e){if(!r.canUseDOM)return!1;var t=window.webkit;if(t&&t.messageHandlers)return!0;var n=/constructor/i.test(String(window.HTMLElement)),a=!!window.indexedDB;if(-1===e.indexOf("safari")||-1===e.indexOf("version")||navigator.standalone){if(!a&&n||!window.statusbar||!window.statusbar.visible);else if(!n||a)return!0}else;return!1}(e),d=!1;return r.canUseDOM&&(d=i&&375===screen.width&&812===screen.height&&3===window.devicePixelRatio),{isIPad:n,isIPhone:a,isIOS:i,isIPadOS:t,iosMajor:c,iosMinor:s,isWKWebView:l,isScrollBasedViewport:u,isIPhoneX:d,isIOSChrome:-1!==e.search(/crios/i)}}t.IOS_NO_KEYBOARD_ALLOWED_OFFSET=70;var i=a(),o=i.isIPad,c=i.isIPhone,s=i.isIOS,u=i.isIPadOS,l=i.iosMajor,d=i.iosMinor,f=i.isWKWebView,p=i.isScrollBasedViewport,h=i.isIPhoneX,m=i.isIOSChrome;function v(e){if(!r.canUseDOM)return!1;var t=!/ipad|iphone|ipod/.test(e);return!(!/mac os/.test(e)||!t||"boolean"!=typeof navigator.standalone)}t.isIOSChrome=m,t.isIPhoneX=h,t.isScrollBasedViewport=p,t.isWKWebView=f,t.iosMinor=d,t.iosMajor=l,t.isIPadOS=u,t.isIOS=s,t.isIPhone=c,t.isIPad=o},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(9),a=Object(r.createStore)({id:"",ovId:"",player:""})},function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"e",(function(){return l}));var r=n(21),a=n.n(r);var i=function(){var e;return(e=[]).concat.apply(e,arguments)},o=function(e,t,n){var r=Math.max(0,t);return i(e.slice(0,r),n,e.slice(r))},c=function(e,t){var n=Math.max(0,t);return i(e.slice(0,n),e.slice(n+1))};function s(e,t){return e.filter((function(e){return e!==t}))}var u=function(e,t){return i(e,[t])},l=function(e){return a()(new Set(e))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));var r=n(2),a=n.n(r),i=n(52),o=n(24),c=n(251);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=i.a.createEffect((function(e){return Object(o.a)("education.getSchoolById",{school_id:e,fields:"description,site,phone,status,members_count",v:"5.124"}).then((function(e){return u(u({},e),{},{canManage:e.admin_level>=c.a.EDITOR,isAdmin:e.admin_level===c.a.ADMINISTRATOR})}))})),d=i.a.createEvent()},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return l}));var r=n(9),a=n(76),i=n(225),o=a.f.createStore(i.a.DEFAULT,{name:"config"}),c=a.f.createStore("",{name:"search"}),s=a.f.createStore([],{name:"members"}),u=a.f.createStore([],{name:"selected"}),l=Object(r.combine)({config:o,search:c,members:s,selected:u,loaded:a.b.pending.map((function(e){return!e})),selectionEmpty:u.map((function(e){return 0===e.length})),notFound:s.map((function(e){return 0===e.length}))},(function(e){return e}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r={MODERATOR:1,EDITOR:2,ADMINISTRATOR:3}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(21),a=n.n(r),i=n(7),o=n.n(i),c=n(0),s=n(92),u=n(51),l=n(162),d=n(13),f=n(55);function p(e){var t=e.initialSearch,n=e.initialItems,r=e.fetch,i=e.onError,p=e.onFetchItems,h=e.isFetchImmediately,m=void 0===h||h,v=Object(f.a)().showAlertConfirm,g=Object(c.useState)(!m),b=o()(g,2),_=b[0],y=b[1],E=Object(c.useState)(m),O=o()(E,2),w=O[0],C=O[1],S=Object(c.useState)(null),A=o()(S,2),k=A[0],j=A[1],T=Object(c.useState)(t||""),I=o()(T,2),P=I[0],D=I[1],N=Object(c.useState)(n||[]),x=o()(N,2),R=x[0],M=x[1],L=Object(c.useState)(!1),B=o()(L,2),F=B[0],H=B[1],V=Object(c.useState)(!1),U=o()(V,2),z=U[0],G=U[1],W=Object(c.useRef)(new AbortController),q=Object(c.useRef)(0),K=Object(c.useRef)(""),Y=Object(c.useRef)(null);function Z(e){q.current=e.length,M(e)}function Q(){return q.current}function J(){Z([])}function X(e){K.current=e,D(e),clearTimeout(Y.current),Y.current=window.setTimeout((function(){w&&(W.current.abort(),W.current=new AbortController),Object(l.a)((function(){J(),C(!0),q.current=0,ee({reset:!0})}))}),400)}function $(){return K.current}function ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.reset&&Object(l.a)((function(){w||C(!0),R.length&&J()}));var t=$().trim();r({itemsCount:Q(),count:e.count,search:t,options:{signal:W.current.signal}}).then((function(n){Object(l.a)((function(){M((function(r){var i=e.reset?n:[].concat(a()(r),a()(n));return q.current=i.length,setTimeout((function(){null==p||p(n,i,t)})),i})),_||H(n.length>0),y(!0),C(!1),G(0===n.length)}))})).catch((function(e){"AbortError"!==e.name&&Object(l.a)((function(){_?Object(s.a)(i)?i(e):v(e):(G(!0),j(e)),y(!0),C(!1)}))}))}return Object(c.useEffect)((function(){m&&ee()}),[]),Object(c.useEffect)((function(){q.current=R.length,K.current=P}),[R,P]),{isLoaded:_,setIsLoaded:y,isFetching:w,setIsFetching:C,globalError:k,canLoadMore:_&&!w&&!z,items:R,setItems:Z,itemsCount:R.length,hasAnyItems:F,getItems:ee,appendItems:function(e){M((function(t){var n=[].concat(a()(t),a()(e));return q.current=n.length,n}))},getItemsCount:Q,resetItems:J,search:P,onSearch:X,handleSearch:function(e){X(Object(d.w)(e)?e:e.currentTarget.value)},getCurrentSearch:$,handleLoadMore:function(){w||(u.b&&console.log("[useItemsProvider] load more"),C(!0),ee())}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r=n(30),a=n.n(r),i=n(31),o=n.n(i),c=n(11),s=n.n(c),u=n(33),l=n.n(u),d=n(39),f=n.n(d),p=n(34),h=n.n(p),m=n(2),v=n.n(m),g=n(0),b=n.n(g),_=n(92);function y(){var e=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight),t=window.pageYOffset,n=document.documentElement.clientHeight;return{scrollTop:t,scrollHeight:e,offsetHeight:n,scrollBottom:e-t-n}}var E=n(1);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}var w=function(e){l()(n,e);var t=O(n);function n(){var e;a()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),v()(s()(e),"containerRef",b.a.createRef()),v()(s()(e),"handleScroll",(function(t){var n=e.props,r=n.canLoad,a=n.onLoadMore,i=n.outerContainer,o=e.containerRef.current;r&&o&&(i?Number(t.target.scrollTop)+document.documentElement.offsetHeight+100>o.offsetHeight&&Object(_.a)(a)&&a():y().scrollTop+document.documentElement.offsetHeight+100>o.offsetHeight&&Object(_.a)(a)&&a())})),e}return o()(n,[{key:"componentDidMount",value:function(){this.props.outerContainer?this.props.outerContainer.addEventListener("scroll",this.handleScroll):window.addEventListener("scroll",this.handleScroll)}},{key:"componentDidUpdate",value:function(e){e.outerContainer!==this.props.outerContainer&&this.props.outerContainer.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){this.props.outerContainer?this.props.outerContainer.removeEventListener("scroll",this.handleScroll):window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.isFetching,r=e.customSpinner,a=e.minHeight;return b.a.createElement("div",{style:{minHeight:a},ref:this.containerRef},t,n&&(r||b.a.createElement(E.bb,null)))}}]),n}(g.Component);v()(w,"defaultProps",{distance:2e3,minHeight:0})},function(e,t,n){"use strict";var r;function a(e){return{type:r.SET_SELECT_SCHOOL_INFO,data:e}}function i(e){return{type:r.SET_SELECT_CLASSES_INFO,data:e}}function o(e){return{type:r.SET_SELECT_PARTICIPANTS_INFO,data:e}}function c(e){return{type:r.SET_SELECT_COUNTRY_INFO,data:e}}function s(e){return{type:r.SET_SELECT_CITY_INFO,data:e}}n.d(t,"a",(function(){return r})),n.d(t,"f",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return s})),function(e){e.SET_SELECT_SCHOOL_INFO="SET_SELECT_SCHOOL_INFO",e.SET_SELECT_CLASSES_INFO="SET_SELECT_CLASSES_INFO",e.SET_SELECT_PARTICIPANTS_INFO="SET_SELECT_PARTICIPANTS_INFO",e.SET_SELECT_COUNTRY_INFO="SET_SELECT_COUNTRY_INFO",e.SET_SELECT_CITY_INFO="SET_SELECT_CITY_INFO"}(r||(r={}))},function(e,t,n){"use strict";function r(e,t){if(Array.prototype.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function a(e,t){for(var n=e.length-1;n>=0;n--)!0===t(e[n])&&e.splice(n,1)}function i(e){throw new Error("Unhandled case for value: '"+e+"'")}n.d(t,"a",(function(){return se})),n.d(t,"b",(function(){return ue})),n.d(t,"d",(function(){return le})),n.d(t,"c",(function(){return de}));var o=function(){function e(e){void 0===e&&(e={}),this.tagName="",this.attrs={},this.innerHTML="",this.whitespaceRegex=/\s+/,this.tagName=e.tagName||"",this.attrs=e.attrs||{},this.innerHTML=e.innerHtml||e.innerHTML||""}return e.prototype.setTagName=function(e){return this.tagName=e,this},e.prototype.getTagName=function(){return this.tagName||""},e.prototype.setAttr=function(e,t){return this.getAttrs()[e]=t,this},e.prototype.getAttr=function(e){return this.getAttrs()[e]},e.prototype.setAttrs=function(e){return Object.assign(this.getAttrs(),e),this},e.prototype.getAttrs=function(){return this.attrs||(this.attrs={})},e.prototype.setClass=function(e){return this.setAttr("class",e)},e.prototype.addClass=function(e){for(var t,n=this.getClass(),a=this.whitespaceRegex,i=n?n.split(a):[],o=e.split(a);t=o.shift();)-1===r(i,t)&&i.push(t);return this.getAttrs().class=i.join(" "),this},e.prototype.removeClass=function(e){for(var t,n=this.getClass(),a=this.whitespaceRegex,i=n?n.split(a):[],o=e.split(a);i.length&&(t=o.shift());){var c=r(i,t);-1!==c&&i.splice(c,1)}return this.getAttrs().class=i.join(" "),this},e.prototype.getClass=function(){return this.getAttrs().class||""},e.prototype.hasClass=function(e){return-1!==(" "+this.getClass()+" ").indexOf(" "+e+" ")},e.prototype.setInnerHTML=function(e){return this.innerHTML=e,this},e.prototype.setInnerHtml=function(e){return this.setInnerHTML(e)},e.prototype.getInnerHTML=function(){return this.innerHTML||""},e.prototype.getInnerHtml=function(){return this.getInnerHTML()},e.prototype.toAnchorString=function(){var e=this.getTagName(),t=this.buildAttrsStr();return["<",e,t=t?" "+t:"",">",this.getInnerHtml(),"</",e,">"].join("")},e.prototype.buildAttrsStr=function(){if(!this.attrs)return"";var e=this.getAttrs(),t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n+'="'+e[n]+'"');return t.join(" ")},e}();var c,s=function(){function e(e){void 0===e&&(e={}),this.newWindow=!1,this.truncate={},this.className="",this.newWindow=e.newWindow||!1,this.truncate=e.truncate||{},this.className=e.className||""}return e.prototype.build=function(e){return new o({tagName:"a",attrs:this.createAttrs(e),innerHtml:this.processAnchorText(e.getAnchorText())})},e.prototype.createAttrs=function(e){var t={href:e.getAnchorHref()},n=this.createCssClass(e);return n&&(t.class=n),this.newWindow&&(t.target="_blank",t.rel="noopener noreferrer"),this.truncate&&this.truncate.length&&this.truncate.length<e.getAnchorText().length&&(t.title=e.getAnchorHref()),t},e.prototype.createCssClass=function(e){var t=this.className;if(t){for(var n=[t],r=e.getCssClassSuffixes(),a=0,i=r.length;a<i;a++)n.push(t+"-"+r[a]);return n.join(" ")}return""},e.prototype.processAnchorText=function(e){return e=this.doTruncate(e)},e.prototype.doTruncate=function(e){var t=this.truncate;if(!t||!t.length)return e;var n=t.length,r=t.location;return"smart"===r?function(e,t,n){var r,a;null==n?(n="&hellip;",a=3,r=8):(a=n.length,r=n.length);var i=function(e){var t="";return e.scheme&&e.host&&(t+=e.scheme+"://"),e.host&&(t+=e.host),e.path&&(t+="/"+e.path),e.query&&(t+="?"+e.query),e.fragment&&(t+="#"+e.fragment),t},o=function(e,t){var r=t/2,a=Math.ceil(r),i=-1*Math.floor(r),o="";return i<0&&(o=e.substr(i)),e.substr(0,a)+n+o};if(e.length<=t)return e;var c=t-a,s=function(e){var t={},n=e,r=n.match(/^([a-z]+):\/\//i);return r&&(t.scheme=r[1],n=n.substr(r[0].length)),(r=n.match(/^(.*?)(?=(\?|#|\/|$))/i))&&(t.host=r[1],n=n.substr(r[0].length)),(r=n.match(/^\/(.*?)(?=(\?|#|$))/i))&&(t.path=r[1],n=n.substr(r[0].length)),(r=n.match(/^\?(.*?)(?=(#|$))/i))&&(t.query=r[1],n=n.substr(r[0].length)),(r=n.match(/^#(.*?)$/i))&&(t.fragment=r[1]),t}(e);if(s.query){var u=s.query.match(/^(.*?)(?=(\?|\#))(.*?)$/i);u&&(s.query=s.query.substr(0,u[1].length),e=i(s))}if(e.length<=t)return e;if(s.host&&(s.host=s.host.replace(/^www\./,""),e=i(s)),e.length<=t)return e;var l="";if(s.host&&(l+=s.host),l.length>=c)return s.host.length==t?(s.host.substr(0,t-a)+n).substr(0,c+r):o(l,c).substr(0,c+r);var d="";if(s.path&&(d+="/"+s.path),s.query&&(d+="?"+s.query),d){if((l+d).length>=c)return(l+d).length==t?(l+d).substr(0,t):(l+o(d,c-l.length)).substr(0,c+r);l+=d}if(s.fragment){var f="#"+s.fragment;if((l+f).length>=c)return(l+f).length==t?(l+f).substr(0,t):(l+o(f,c-l.length)).substr(0,c+r);l+=f}if(s.scheme&&s.host){var p=s.scheme+"://";if((l+p).length<c)return(p+l).substr(0,t)}if(l.length<=t)return l;var h="";return c>0&&(h=l.substr(-1*Math.floor(c/2))),(l.substr(0,Math.ceil(c/2))+n+h).substr(0,c+r)}(e,n):"middle"===r?function(e,t,n){if(e.length<=t)return e;var r,a;null==n?(n="&hellip;",r=8,a=3):(r=n.length,a=n.length);var i=t-a,o="";return i>0&&(o=e.substr(-1*Math.floor(i/2))),(e.substr(0,Math.ceil(i/2))+n+o).substr(0,i+r)}(e,n):function(e,t,n){return function(e,t,n){var r;return e.length>t&&(null==n?(n="&hellip;",r=3):r=n.length,e=e.substring(0,t-r)+n),e}(e,t,n)}(e,n)},e}(),u=function(){function e(e){this.__jsduckDummyDocProp=null,this.matchedText="",this.offset=0,this.tagBuilder=e.tagBuilder,this.matchedText=e.matchedText,this.offset=e.offset}return e.prototype.getMatchedText=function(){return this.matchedText},e.prototype.setOffset=function(e){this.offset=e},e.prototype.getOffset=function(){return this.offset},e.prototype.getCssClassSuffixes=function(){return[this.getType()]},e.prototype.buildTag=function(){return this.tagBuilder.build(this)},e}(),l=n(16),d=function(e){function t(t){var n=e.call(this,t)||this;return n.email="",n.email=t.email,n}return Object(l.c)(t,e),t.prototype.getType=function(){return"email"},t.prototype.getEmail=function(){return this.email},t.prototype.getAnchorHref=function(){return"mailto:"+this.email},t.prototype.getAnchorText=function(){return this.email},t}(u),f=function(e){function t(t){var n=e.call(this,t)||this;return n.serviceName="",n.hashtag="",n.serviceName=t.serviceName,n.hashtag=t.hashtag,n}return Object(l.c)(t,e),t.prototype.getType=function(){return"hashtag"},t.prototype.getServiceName=function(){return this.serviceName},t.prototype.getHashtag=function(){return this.hashtag},t.prototype.getAnchorHref=function(){var e=this.serviceName,t=this.hashtag;switch(e){case"twitter":return"https://twitter.com/hashtag/"+t;case"facebook":return"https://www.facebook.com/hashtag/"+t;case"instagram":return"https://instagram.com/explore/tags/"+t;default:throw new Error("Unknown service name to point hashtag to: "+e)}},t.prototype.getAnchorText=function(){return"#"+this.hashtag},t}(u),p=function(e){function t(t){var n=e.call(this,t)||this;return n.serviceName="twitter",n.mention="",n.mention=t.mention,n.serviceName=t.serviceName,n}return Object(l.c)(t,e),t.prototype.getType=function(){return"mention"},t.prototype.getMention=function(){return this.mention},t.prototype.getServiceName=function(){return this.serviceName},t.prototype.getAnchorHref=function(){switch(this.serviceName){case"twitter":return"https://twitter.com/"+this.mention;case"instagram":return"https://instagram.com/"+this.mention;case"soundcloud":return"https://soundcloud.com/"+this.mention;default:throw new Error("Unknown service name to point mention to: "+this.serviceName)}},t.prototype.getAnchorText=function(){return"@"+this.mention},t.prototype.getCssClassSuffixes=function(){var t=e.prototype.getCssClassSuffixes.call(this),n=this.getServiceName();return n&&t.push(n),t},t}(u),h=function(e){function t(t){var n=e.call(this,t)||this;return n.number="",n.plusSign=!1,n.number=t.number,n.plusSign=t.plusSign,n}return Object(l.c)(t,e),t.prototype.getType=function(){return"phone"},t.prototype.getPhoneNumber=function(){return this.number},t.prototype.getNumber=function(){return this.getPhoneNumber()},t.prototype.getAnchorHref=function(){return"tel:"+(this.plusSign?"+":"")+this.number},t.prototype.getAnchorText=function(){return this.matchedText},t}(u),m=function(e){function t(t){var n=e.call(this,t)||this;return n.url="",n.urlMatchType="scheme",n.protocolUrlMatch=!1,n.protocolRelativeMatch=!1,n.stripPrefix={scheme:!0,www:!0},n.stripTrailingSlash=!0,n.decodePercentEncoding=!0,n.schemePrefixRegex=/^(https?:\/\/)?/i,n.wwwPrefixRegex=/^(https?:\/\/)?(www\.)?/i,n.protocolRelativeRegex=/^\/\//,n.protocolPrepended=!1,n.urlMatchType=t.urlMatchType,n.url=t.url,n.protocolUrlMatch=t.protocolUrlMatch,n.protocolRelativeMatch=t.protocolRelativeMatch,n.stripPrefix=t.stripPrefix,n.stripTrailingSlash=t.stripTrailingSlash,n.decodePercentEncoding=t.decodePercentEncoding,n}return Object(l.c)(t,e),t.prototype.getType=function(){return"url"},t.prototype.getUrlMatchType=function(){return this.urlMatchType},t.prototype.getUrl=function(){var e=this.url;return this.protocolRelativeMatch||this.protocolUrlMatch||this.protocolPrepended||(e=this.url="http://"+e,this.protocolPrepended=!0),e},t.prototype.getAnchorHref=function(){return this.getUrl().replace(/&amp;/g,"&")},t.prototype.getAnchorText=function(){var e=this.getMatchedText();return this.protocolRelativeMatch&&(e=this.stripProtocolRelativePrefix(e)),this.stripPrefix.scheme&&(e=this.stripSchemePrefix(e)),this.stripPrefix.www&&(e=this.stripWwwPrefix(e)),this.stripTrailingSlash&&(e=this.removeTrailingSlash(e)),this.decodePercentEncoding&&(e=this.removePercentEncoding(e)),e},t.prototype.stripSchemePrefix=function(e){return e.replace(this.schemePrefixRegex,"")},t.prototype.stripWwwPrefix=function(e){return e.replace(this.wwwPrefixRegex,"$1")},t.prototype.stripProtocolRelativePrefix=function(e){return e.replace(this.protocolRelativeRegex,"")},t.prototype.removeTrailingSlash=function(e){return"/"===e.charAt(e.length-1)&&(e=e.slice(0,-1)),e},t.prototype.removePercentEncoding=function(e){var t=e.replace(/%22/gi,"&quot;").replace(/%26/gi,"&amp;").replace(/%27/gi,"&#39;").replace(/%3C/gi,"&lt;").replace(/%3E/gi,"&gt;");try{return decodeURIComponent(t)}catch(e){return t}},t}(u),v=function(e){this.__jsduckDummyDocProp=null,this.tagBuilder=e.tagBuilder},g=/[A-Za-z]/,b=/[\d]/,_=/[\D]/,y=/\s/,E=/['"]/,O=/[\x00-\x1F\x7F]/,w=/A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC/.source,C=w+/\u2700-\u27bf\udde6-\uddff\ud800-\udbff\udc00-\udfff\ufe0e\ufe0f\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0\ud83c\udffb-\udfff\u200d\u3299\u3297\u303d\u3030\u24c2\ud83c\udd70-\udd71\udd7e-\udd7f\udd8e\udd91-\udd9a\udde6-\uddff\ude01-\ude02\ude1a\ude2f\ude32-\ude3a\ude50-\ude51\u203c\u2049\u25aa-\u25ab\u25b6\u25c0\u25fb-\u25fe\u00a9\u00ae\u2122\u2139\udc04\u2600-\u26FF\u2b05\u2b06\u2b07\u2b1b\u2b1c\u2b50\u2b55\u231a\u231b\u2328\u23cf\u23e9-\u23f3\u23f8-\u23fa\udccf\u2935\u2934\u2190-\u21ff/.source+/\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D4-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D01-\u0D03\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF5\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F/.source,S=/0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19/.source,A=C+S,k=C+S,j="(?:["+S+"]{1,3}\\.){3}["+S+"]{1,3}",T="["+k+"](?:["+k+"\\-]{0,61}["+k+"])?",I=function(e){return"(?=("+T+"))\\"+e},P=function(e){return"(?:"+I(e)+"(?:\\."+I(e+1)+"){0,126}|"+j+")"},D=(new RegExp("["+k+".\\-]*["+k+"\\-]"),new RegExp("["+k+"]")),N=/(?:xn--vermgensberatung-pwb|xn--vermgensberater-ctb|xn--clchc0ea0b2g2a9gcd|xn--w4r85el8fhu5dnra|northwesternmutual|travelersinsurance|vermögensberatung|xn--3oq18vl8pn36a|xn--5su34j936bgsg|xn--bck1b9a5dre4c|xn--mgbai9azgqp6j|xn--mgberp4a5d4ar|xn--xkc2dl3a5ee0h|vermögensberater|xn--fzys8d69uvgm|xn--mgba7c0bbn0a|xn--xkc2al3hye2a|americanexpress|kerryproperties|sandvikcoromant|xn--i1b6b1a6a2e|xn--kcrx77d1x4a|xn--lgbbat1ad8j|xn--mgba3a4f16a|xn--mgbaakc7dvf|xn--mgbc0a9azcg|xn--nqv7fs00ema|afamilycompany|americanfamily|bananarepublic|cancerresearch|cookingchannel|kerrylogistics|weatherchannel|xn--54b7fta0cc|xn--6qq986b3xl|xn--80aqecdr1a|xn--b4w605ferd|xn--fiq228c5hs|xn--h2breg3eve|xn--jlq61u9w7b|xn--mgba3a3ejt|xn--mgbaam7a8h|xn--mgbayh7gpa|xn--mgbb9fbpob|xn--mgbbh1a71e|xn--mgbca7dzdo|xn--mgbi4ecexp|xn--mgbx4cd0ab|xn--rvc1e0am3e|international|lifeinsurance|spreadbetting|travelchannel|wolterskluwer|xn--eckvdtc9d|xn--fpcrj9c3d|xn--fzc2c9e2c|xn--h2brj9c8c|xn--tiq49xqyj|xn--yfro4i67o|xn--ygbi2ammx|construction|lplfinancial|scholarships|versicherung|xn--3e0b707e|xn--45br5cyl|xn--80adxhks|xn--80asehdb|xn--8y0a063a|xn--gckr3f0f|xn--mgb9awbf|xn--mgbab2bd|xn--mgbgu82a|xn--mgbpl2fh|xn--mgbt3dhd|xn--mk1bu44c|xn--ngbc5azd|xn--ngbe9e0a|xn--ogbpf8fl|xn--qcka1pmc|accountants|barclaycard|blackfriday|blockbuster|bridgestone|calvinklein|contractors|creditunion|engineering|enterprises|foodnetwork|investments|kerryhotels|lamborghini|motorcycles|olayangroup|photography|playstation|productions|progressive|redumbrella|rightathome|williamhill|xn--11b4c3d|xn--1ck2e1b|xn--1qqw23a|xn--2scrj9c|xn--3bst00m|xn--3ds443g|xn--3hcrj9c|xn--42c2d9a|xn--45brj9c|xn--55qw42g|xn--6frz82g|xn--80ao21a|xn--9krt00a|xn--cck2b3b|xn--czr694b|xn--d1acj3b|xn--efvy88h|xn--estv75g|xn--fct429k|xn--fjq720a|xn--flw351e|xn--g2xx48c|xn--gecrj9c|xn--gk3at1e|xn--h2brj9c|xn--hxt814e|xn--imr513n|xn--j6w193g|xn--jvr189m|xn--kprw13d|xn--kpry57d|xn--kpu716f|xn--mgbbh1a|xn--mgbtx2b|xn--mix891f|xn--nyqy26a|xn--otu796d|xn--pbt977c|xn--pgbs0dh|xn--q9jyb4c|xn--rhqv96g|xn--rovu88b|xn--s9brj9c|xn--ses554g|xn--t60b56a|xn--vuq861b|xn--w4rs40l|xn--xhq521b|xn--zfr164b|சிங்கப்பூர்|accountant|apartments|associates|basketball|bnpparibas|boehringer|capitalone|consulting|creditcard|cuisinella|eurovision|extraspace|foundation|healthcare|immobilien|industries|management|mitsubishi|nationwide|newholland|nextdirect|onyourside|properties|protection|prudential|realestate|republican|restaurant|schaeffler|swiftcover|tatamotors|technology|telefonica|university|vistaprint|vlaanderen|volkswagen|xn--30rr7y|xn--3pxu8k|xn--45q11c|xn--4gbrim|xn--55qx5d|xn--5tzm5g|xn--80aswg|xn--90a3ac|xn--9dbq2a|xn--9et52u|xn--c2br7g|xn--cg4bki|xn--czrs0t|xn--czru2d|xn--fiq64b|xn--fiqs8s|xn--fiqz9s|xn--io0a7i|xn--kput3i|xn--mxtq1m|xn--o3cw4h|xn--pssy2u|xn--unup4y|xn--wgbh1c|xn--wgbl6a|xn--y9a3aq|accenture|alfaromeo|allfinanz|amsterdam|analytics|aquarelle|barcelona|bloomberg|christmas|community|directory|education|equipment|fairwinds|financial|firestone|fresenius|frontdoor|fujixerox|furniture|goldpoint|hisamitsu|homedepot|homegoods|homesense|honeywell|institute|insurance|kuokgroup|ladbrokes|lancaster|landrover|lifestyle|marketing|marshalls|melbourne|microsoft|panasonic|passagens|pramerica|richardli|scjohnson|shangrila|solutions|statebank|statefarm|stockholm|travelers|vacations|xn--90ais|xn--c1avg|xn--d1alf|xn--e1a4c|xn--fhbei|xn--j1aef|xn--j1amh|xn--l1acc|xn--ngbrx|xn--nqv7f|xn--p1acf|xn--tckwe|xn--vhquv|yodobashi|abudhabi|airforce|allstate|attorney|barclays|barefoot|bargains|baseball|boutique|bradesco|broadway|brussels|budapest|builders|business|capetown|catering|catholic|chrysler|cipriani|cityeats|cleaning|clinique|clothing|commbank|computer|delivery|deloitte|democrat|diamonds|discount|discover|download|engineer|ericsson|esurance|etisalat|everbank|exchange|feedback|fidelity|firmdale|football|frontier|goodyear|grainger|graphics|guardian|hdfcbank|helsinki|holdings|hospital|infiniti|ipiranga|istanbul|jpmorgan|lighting|lundbeck|marriott|maserati|mckinsey|memorial|merckmsd|mortgage|movistar|observer|partners|pharmacy|pictures|plumbing|property|redstone|reliance|saarland|samsclub|security|services|shopping|showtime|softbank|software|stcgroup|supplies|symantec|training|uconnect|vanguard|ventures|verisign|woodside|xn--90ae|xn--node|xn--p1ai|xn--qxam|yokohama|السعودية|abogado|academy|agakhan|alibaba|android|athleta|auction|audible|auspost|avianca|banamex|bauhaus|bentley|bestbuy|booking|brother|bugatti|capital|caravan|careers|cartier|channel|charity|chintai|citadel|clubmed|college|cologne|comcast|company|compare|contact|cooking|corsica|country|coupons|courses|cricket|cruises|dentist|digital|domains|exposed|express|farmers|fashion|ferrari|ferrero|finance|fishing|fitness|flights|florist|flowers|forsale|frogans|fujitsu|gallery|genting|godaddy|grocery|guitars|hamburg|hangout|hitachi|holiday|hosting|hoteles|hotmail|hyundai|iselect|ismaili|jewelry|juniper|kitchen|komatsu|lacaixa|lancome|lanxess|lasalle|latrobe|leclerc|liaison|limited|lincoln|markets|metlife|monster|netbank|netflix|network|neustar|okinawa|oldnavy|organic|origins|philips|pioneer|politie|realtor|recipes|rentals|reviews|rexroth|samsung|sandvik|schmidt|schwarz|science|shiksha|shriram|singles|staples|starhub|storage|support|surgery|systems|temasek|theater|theatre|tickets|tiffany|toshiba|trading|walmart|wanggou|watches|weather|website|wedding|whoswho|windows|winners|xfinity|yamaxun|youtube|zuerich|католик|اتصالات|الجزائر|العليان|پاکستان|كاثوليك|موبايلي|இந்தியா|abarth|abbott|abbvie|active|africa|agency|airbus|airtel|alipay|alsace|alstom|anquan|aramco|author|bayern|beauty|berlin|bharti|blanco|bostik|boston|broker|camera|career|caseih|casino|center|chanel|chrome|church|circle|claims|clinic|coffee|comsec|condos|coupon|credit|cruise|dating|datsun|dealer|degree|dental|design|direct|doctor|dunlop|dupont|durban|emerck|energy|estate|events|expert|family|flickr|futbol|gallup|garden|george|giving|global|google|gratis|health|hermes|hiphop|hockey|hotels|hughes|imamat|insure|intuit|jaguar|joburg|juegos|kaufen|kinder|kindle|kosher|lancia|latino|lawyer|lefrak|living|locker|london|luxury|madrid|maison|makeup|market|mattel|mobile|mobily|monash|mormon|moscow|museum|mutual|nagoya|natura|nissan|nissay|norton|nowruz|office|olayan|online|oracle|orange|otsuka|pfizer|photos|physio|piaget|pictet|quebec|racing|realty|reisen|repair|report|review|rocher|rogers|ryukyu|safety|sakura|sanofi|school|schule|search|secure|select|shouji|soccer|social|stream|studio|supply|suzuki|swatch|sydney|taipei|taobao|target|tattoo|tennis|tienda|tjmaxx|tkmaxx|toyota|travel|unicom|viajes|viking|villas|virgin|vision|voting|voyage|vuelos|walter|warman|webcam|xihuan|yachts|yandex|zappos|москва|онлайн|ابوظبي|ارامكو|الاردن|المغرب|امارات|فلسطين|مليسيا|भारतम्|இலங்கை|ファッション|actor|adult|aetna|amfam|amica|apple|archi|audio|autos|azure|baidu|beats|bible|bingo|black|boats|bosch|build|canon|cards|chase|cheap|cisco|citic|click|cloud|coach|codes|crown|cymru|dabur|dance|deals|delta|dodge|drive|dubai|earth|edeka|email|epost|epson|faith|fedex|final|forex|forum|gallo|games|gifts|gives|glade|glass|globo|gmail|green|gripe|group|gucci|guide|homes|honda|horse|house|hyatt|ikano|intel|irish|iveco|jetzt|koeln|kyoto|lamer|lease|legal|lexus|lilly|linde|lipsy|lixil|loans|locus|lotte|lotto|lupin|macys|mango|media|miami|money|mopar|movie|nadex|nexus|nikon|ninja|nokia|nowtv|omega|osaka|paris|parts|party|phone|photo|pizza|place|poker|praxi|press|prime|promo|quest|radio|rehab|reise|ricoh|rocks|rodeo|rugby|salon|sener|seven|sharp|shell|shoes|skype|sling|smart|smile|solar|space|sport|stada|store|study|style|sucks|swiss|tatar|tires|tirol|tmall|today|tokyo|tools|toray|total|tours|trade|trust|tunes|tushu|ubank|vegas|video|vodka|volvo|wales|watch|weber|weibo|works|world|xerox|yahoo|zippo|ایران|بازار|بھارت|سودان|سورية|همراه|भारोत|संगठन|বাংলা|భారత్|ഭാരതം|嘉里大酒店|aarp|able|adac|aero|aigo|akdn|ally|amex|arab|army|arpa|arte|asda|asia|audi|auto|baby|band|bank|bbva|beer|best|bike|bing|blog|blue|bofa|bond|book|buzz|cafe|call|camp|care|cars|casa|case|cash|cbre|cern|chat|citi|city|club|cool|coop|cyou|data|date|dclk|deal|dell|desi|diet|dish|docs|doha|duck|duns|dvag|erni|fage|fail|fans|farm|fast|fiat|fido|film|fire|fish|flir|food|ford|free|fund|game|gbiz|gent|ggee|gift|gmbh|gold|golf|goog|guge|guru|hair|haus|hdfc|help|here|hgtv|host|hsbc|icbc|ieee|imdb|immo|info|itau|java|jeep|jobs|jprs|kddi|kiwi|kpmg|kred|land|lego|lgbt|lidl|life|like|limo|link|live|loan|loft|love|ltda|luxe|maif|meet|meme|menu|mini|mint|mobi|moda|moto|name|navy|news|next|nico|nike|ollo|open|page|pars|pccw|pics|ping|pink|play|plus|pohl|porn|post|prod|prof|qpon|raid|read|reit|rent|rest|rich|rmit|room|rsvp|ruhr|safe|sale|sarl|save|saxo|scor|scot|seat|seek|sexy|shaw|shia|shop|show|silk|sina|site|skin|sncf|sohu|song|sony|spot|star|surf|talk|taxi|team|tech|teva|tiaa|tips|town|toys|tube|vana|visa|viva|vivo|vote|voto|wang|weir|wien|wiki|wine|work|xbox|yoga|zara|zero|zone|дети|сайт|بارت|بيتك|ڀارت|تونس|شبكة|عراق|عمان|موقع|भारत|ভারত|ভাৰত|ਭਾਰਤ|ભારત|ଭାରତ|ಭಾರತ|ලංකා|グーグル|クラウド|ポイント|大众汽车|组织机构|電訊盈科|香格里拉|aaa|abb|abc|aco|ads|aeg|afl|aig|anz|aol|app|art|aws|axa|bar|bbc|bbt|bcg|bcn|bet|bid|bio|biz|bms|bmw|bnl|bom|boo|bot|box|buy|bzh|cab|cal|cam|car|cat|cba|cbn|cbs|ceb|ceo|cfa|cfd|com|crs|csc|dad|day|dds|dev|dhl|diy|dnp|dog|dot|dtv|dvr|eat|eco|edu|esq|eus|fan|fit|fly|foo|fox|frl|ftr|fun|fyi|gal|gap|gdn|gea|gle|gmo|gmx|goo|gop|got|gov|hbo|hiv|hkt|hot|how|ibm|ice|icu|ifm|inc|ing|ink|int|ist|itv|jcb|jcp|jio|jll|jmp|jnj|jot|joy|kfh|kia|kim|kpn|krd|lat|law|lds|llc|lol|lpl|ltd|man|map|mba|med|men|mil|mit|mlb|mls|mma|moe|moi|mom|mov|msd|mtn|mtr|nab|nba|nec|net|new|nfl|ngo|nhk|now|nra|nrw|ntt|nyc|obi|off|one|ong|onl|ooo|org|ott|ovh|pay|pet|phd|pid|pin|pnc|pro|pru|pub|pwc|qvc|red|ren|ril|rio|rip|run|rwe|sap|sas|sbi|sbs|sca|scb|ses|sew|sex|sfr|ski|sky|soy|srl|srt|stc|tab|tax|tci|tdk|tel|thd|tjx|top|trv|tui|tvs|ubs|uno|uol|ups|vet|vig|vin|vip|wed|win|wme|wow|wtc|wtf|xin|xxx|xyz|you|yun|zip|бел|ком|қаз|мкд|мон|орг|рус|срб|укр|հայ|קום|عرب|قطر|كوم|مصر|कॉम|नेट|คอม|ไทย|ストア|セール|みんな|中文网|天主教|我爱你|新加坡|淡马锡|诺基亚|飞利浦|ac|ad|ae|af|ag|ai|al|am|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|ελ|бг|ею|рф|გე|닷넷|닷컴|삼성|한국|コム|世界|中信|中国|中國|企业|佛山|信息|健康|八卦|公司|公益|台湾|台灣|商城|商店|商标|嘉里|在线|大拿|娱乐|家電|工行|广东|微博|慈善|手机|手表|招聘|政务|政府|新闻|时尚|書籍|机构|游戏|澳門|点看|珠宝|移动|网址|网店|网站|网络|联通|谷歌|购物|通販|集团|食品|餐厅|香港)/,x=new RegExp("["+k+"!#$%&'*+/=?^_`{|}~-]"),R=new RegExp("^"+N.source+"$"),M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.localPartCharRegex=x,t.strictTldRegex=R,t}return Object(l.c)(t,e),t.prototype.parseMatches=function(e){for(var t=this.tagBuilder,n=this.localPartCharRegex,r=this.strictTldRegex,a=[],o=e.length,c=new L,s={m:"a",a:"i",i:"l",l:"t",t:"o",o:":"},u=0,f=0,p=c;u<o;){var h=e.charAt(u);switch(f){case 0:m(h);break;case 1:v(e.charAt(u-1),h);break;case 2:g(h);break;case 3:b(h);break;case 4:_(h);break;case 5:y(h);break;case 6:E(h);break;case 7:O(h);break;default:i(f)}u++}return S(),a;function m(e){"m"===e?w(1):n.test(e)&&w()}function v(e,t){":"===e?n.test(t)?(f=2,p=new L(Object(l.a)(Object(l.a)({},p),{hasMailtoPrefix:!0}))):C():s[e]===t||(n.test(t)?f=2:"."===t?f=3:"@"===t?f=4:C())}function g(e){"."===e?f=3:"@"===e?f=4:n.test(e)||C()}function b(e){"."===e||"@"===e?C():n.test(e)?f=2:C()}function _(e){D.test(e)?f=5:C()}function y(e){"."===e?f=7:"-"===e?f=6:D.test(e)||S()}function E(e){"-"===e||"."===e?S():D.test(e)?f=5:S()}function O(e){"."===e||"-"===e?S():D.test(e)?(f=5,p=new L(Object(l.a)(Object(l.a)({},p),{hasDomainDot:!0}))):S()}function w(e){void 0===e&&(e=2),f=e,p=new L({idx:u})}function C(){f=0,p=c}function S(){if(p.hasDomainDot){var n=e.slice(p.idx,u);/[-.]$/.test(n)&&(n=n.slice(0,-1));var i=p.hasMailtoPrefix?n.slice("mailto:".length):n;(function(e){var t=(e.split(".").pop()||"").toLowerCase();return r.test(t)})(i)&&a.push(new d({tagBuilder:t,matchedText:n,offset:p.idx,email:i}))}C()}},t}(v),L=function(e){void 0===e&&(e={}),this.idx=void 0!==e.idx?e.idx:-1,this.hasMailtoPrefix=!!e.hasMailtoPrefix,this.hasDomainDot=!!e.hasDomainDot},B=function(){function e(){}return e.isValid=function(e,t){return!(t&&!this.isValidUriScheme(t)||this.urlMatchDoesNotHaveProtocolOrDot(e,t)||this.urlMatchDoesNotHaveAtLeastOneWordChar(e,t)&&!this.isValidIpAddress(e)||this.containsMultipleDots(e))},e.isValidIpAddress=function(e){var t=new RegExp(this.hasFullProtocolRegex.source+this.ipRegex.source);return null!==e.match(t)},e.containsMultipleDots=function(e){var t=e;return this.hasFullProtocolRegex.test(e)&&(t=e.split("://")[1]),t.split("/")[0].indexOf("..")>-1},e.isValidUriScheme=function(e){var t=e.match(this.uriSchemeRegex),n=t&&t[0].toLowerCase();return"javascript:"!==n&&"vbscript:"!==n},e.urlMatchDoesNotHaveProtocolOrDot=function(e,t){return!(!e||t&&this.hasFullProtocolRegex.test(t)||-1!==e.indexOf("."))},e.urlMatchDoesNotHaveAtLeastOneWordChar=function(e,t){return!(!e||!t)&&(!this.hasFullProtocolRegex.test(t)&&!this.hasWordCharAfterProtocolRegex.test(e))},e.hasFullProtocolRegex=/^[A-Za-z][-.+A-Za-z0-9]*:\/\//,e.uriSchemeRegex=/^[A-Za-z][-.+A-Za-z0-9]*:/,e.hasWordCharAfterProtocolRegex=new RegExp(":[^\\s]*?["+w+"]"),e.ipRegex=/[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?(:[0-9]*)?\/?$/,e}(),F=(c=new RegExp("[/?#](?:["+k+"\\-+&@#/%=~_()|'$*\\[\\]{}?!:,.;^✓]*["+k+"\\-+&@#/%=~_()|'$*\\[\\]{}✓])?"),new RegExp(["(?:","(",/(?:[A-Za-z][-.+A-Za-z0-9]{0,63}:(?![A-Za-z][-.+A-Za-z0-9]{0,63}:\/\/)(?!\d+\/?)(?:\/\/)?)/.source,P(2),")","|","(","(//)?",/(?:www\.)/.source,P(6),")","|","(","(//)?",P(10)+"\\.",N.source,"(?![-"+A+"])",")",")","(?::[0-9]+)?","(?:"+c.source+")?"].join(""),"gi")),H=new RegExp("["+k+"]"),V=function(e){function t(t){var n=e.call(this,t)||this;return n.stripPrefix={scheme:!0,www:!0},n.stripTrailingSlash=!0,n.decodePercentEncoding=!0,n.matcherRegex=F,n.wordCharRegExp=H,n.stripPrefix=t.stripPrefix,n.stripTrailingSlash=t.stripTrailingSlash,n.decodePercentEncoding=t.decodePercentEncoding,n}return Object(l.c)(t,e),t.prototype.parseMatches=function(e){for(var t,n=this.matcherRegex,r=this.stripPrefix,a=this.stripTrailingSlash,i=this.decodePercentEncoding,o=this.tagBuilder,c=[],s=function(){var n=t[0],s=t[1],l=t[4],d=t[5],f=t[9],p=t.index,h=d||f,v=e.charAt(p-1);if(!B.isValid(n,s))return"continue";if(p>0&&"@"===v)return"continue";if(p>0&&h&&u.wordCharRegExp.test(v))return"continue";if(/\?$/.test(n)&&(n=n.substr(0,n.length-1)),u.matchHasUnbalancedClosingParen(n))n=n.substr(0,n.length-1);else{var g=u.matchHasInvalidCharAfterTld(n,s);g>-1&&(n=n.substr(0,g))}var b=["http://","https://"].find((function(e){return!!s&&-1!==s.indexOf(e)}));if(b){var _=n.indexOf(b);n=n.substr(_),s=s.substr(_),p+=_}var y=s?"scheme":l?"www":"tld",E=!!s;c.push(new m({tagBuilder:o,matchedText:n,offset:p,urlMatchType:y,url:n,protocolUrlMatch:E,protocolRelativeMatch:!!h,stripPrefix:r,stripTrailingSlash:a,decodePercentEncoding:i}))},u=this;null!==(t=n.exec(e));)s();return c},t.prototype.matchHasUnbalancedClosingParen=function(e){var t,n=e.charAt(e.length-1);if(")"===n)t="(";else if("]"===n)t="[";else{if("}"!==n)return!1;t="{"}for(var r=0,a=0,i=e.length-1;a<i;a++){var o=e.charAt(a);o===t?r++:o===n&&(r=Math.max(r-1,0))}return 0===r},t.prototype.matchHasInvalidCharAfterTld=function(e,t){if(!e)return-1;var n=0;t&&(n=e.indexOf(":"),e=e.slice(n));var r=new RegExp("^((.?//)?[-."+k+"]*[-"+k+"]\\.[-"+k+"]+)").exec(e);return null===r?-1:(n+=r[1].length,e=e.slice(r[1].length),/^[^-.A-Za-z0-9:\/?#]/.test(e)?n:-1)},t}(v),U=new RegExp("#[_"+k+"]{1,139}(?![_"+k+"])","g"),z=new RegExp("[^"+k+"]"),G=function(e){function t(t){var n=e.call(this,t)||this;return n.serviceName="twitter",n.matcherRegex=U,n.nonWordCharRegex=z,n.serviceName=t.serviceName,n}return Object(l.c)(t,e),t.prototype.parseMatches=function(e){for(var t,n=this.matcherRegex,r=this.nonWordCharRegex,a=this.serviceName,i=this.tagBuilder,o=[];null!==(t=n.exec(e));){var c=t.index,s=e.charAt(c-1);if(0===c||r.test(s)){var u=t[0],l=t[0].slice(1);o.push(new f({tagBuilder:i,matchedText:u,offset:c,serviceName:a,hashtag:l}))}}return o},t}(v),W=new RegExp(/(?:(?:(?:(\+)?\d{1,3}[-\040.]?)?\(?\d{3}\)?[-\040.]?\d{3}[-\040.]?\d{4})|(?:(\+)(?:9[976]\d|8[987530]\d|6[987]\d|5[90]\d|42\d|3[875]\d|2[98654321]\d|9[8543210]|8[6421]|6[6543210]|5[87654321]|4[987654310]|3[9643210]|2[70]|7|1)[-\040.]?(?:\d[-\040.]?){6,12}\d+))([,;]+[0-9]+#?)*/.source+"|"+/(0([1-9]{1}-?[1-9]\d{3}|[1-9]{2}-?\d{3}|[1-9]{2}\d{1}-?\d{2}|[1-9]{2}\d{2}-?\d{1})-?\d{4}|0[789]0-?\d{4}-?\d{4}|050-?\d{4}-?\d{4})/.source,"g"),q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.matcherRegex=W,t}return Object(l.c)(t,e),t.prototype.parseMatches=function(e){for(var t,n=this.matcherRegex,r=this.tagBuilder,a=[];null!==(t=n.exec(e));){var i=t[0],o=i.replace(/[^0-9,;#]/g,""),c=!(!t[1]&&!t[2]),s=0==t.index?"":e.substr(t.index-1,1),u=e.substr(t.index+i.length,1),l=!s.match(/\d/)&&!u.match(/\d/);this.testMatch(t[3])&&this.testMatch(i)&&l&&a.push(new h({tagBuilder:r,matchedText:i,offset:t.index,number:o,plusSign:c}))}return a},t.prototype.testMatch=function(e){return _.test(e)},t}(v),K=new RegExp("@[_"+k+"]{1,50}(?![_"+k+"])","g"),Y=new RegExp("@[_."+k+"]{1,30}(?![_"+k+"])","g"),Z=new RegExp("@[-_."+k+"]{1,50}(?![-_"+k+"])","g"),Q=new RegExp("[^"+k+"]"),J=function(e){function t(t){var n=e.call(this,t)||this;return n.serviceName="twitter",n.matcherRegexes={twitter:K,instagram:Y,soundcloud:Z},n.nonWordCharRegex=Q,n.serviceName=t.serviceName,n}return Object(l.c)(t,e),t.prototype.parseMatches=function(e){var t,n=this.serviceName,r=this.matcherRegexes[this.serviceName],a=this.nonWordCharRegex,i=this.tagBuilder,o=[];if(!r)return o;for(;null!==(t=r.exec(e));){var c=t.index,s=e.charAt(c-1);if(0===c||a.test(s)){var u=t[0].replace(/\.+$/g,""),l=u.slice(1);o.push(new p({tagBuilder:i,matchedText:u,offset:c,serviceName:n,mention:l}))}}return o},t}(v);function X(e,t){for(var n,r=t.onOpenTag,a=t.onCloseTag,o=t.onText,c=t.onComment,s=t.onDoctype,u=new $,d=0,f=e.length,p=0,h=0,m=u;d<f;){var v=e.charAt(d);switch(p){case 0:_(v);break;case 1:w(v);break;case 2:S(v);break;case 3:C(v);break;case 4:A(v);break;case 5:k(v);break;case 6:j(v);break;case 7:T(v);break;case 8:I(v);break;case 9:P(v);break;case 10:D(v);break;case 11:N(v);break;case 12:x(v);break;case 13:R(v);break;case 14:M(v);break;case 15:L(v);break;case 16:B(v);break;case 17:F(v);break;case 18:H(v);break;case 19:V(v);break;case 20:U(v);break;default:i(p)}d++}function _(e){"<"===e&&G()}function w(e){"!"===e?p=13:"/"===e?(p=2,m=new $(Object(l.a)(Object(l.a)({},m),{isClosing:!0}))):"<"===e?G():g.test(e)?(p=3,m=new $(Object(l.a)(Object(l.a)({},m),{isOpening:!0}))):(p=0,m=u)}function C(e){y.test(e)?(m=new $(Object(l.a)(Object(l.a)({},m),{name:q()})),p=4):"<"===e?G():"/"===e?(m=new $(Object(l.a)(Object(l.a)({},m),{name:q()})),p=12):">"===e?(m=new $(Object(l.a)(Object(l.a)({},m),{name:q()})),W()):g.test(e)||b.test(e)||":"===e||z()}function S(e){">"===e?z():g.test(e)?p=3:z()}function A(e){y.test(e)||("/"===e?p=12:">"===e?W():"<"===e?G():"="===e||E.test(e)||O.test(e)?z():p=5)}function k(e){y.test(e)?p=6:"/"===e?p=12:"="===e?p=7:">"===e?W():"<"===e?G():E.test(e)&&z()}function j(e){y.test(e)||("/"===e?p=12:"="===e?p=7:">"===e?W():"<"===e?G():E.test(e)?z():p=5)}function T(e){y.test(e)||('"'===e?p=8:"'"===e?p=9:/[>=`]/.test(e)?z():"<"===e?G():p=10)}function I(e){'"'===e&&(p=11)}function P(e){"'"===e&&(p=11)}function D(e){y.test(e)?p=4:">"===e?W():"<"===e&&G()}function N(e){y.test(e)?p=4:"/"===e?p=12:">"===e?W():"<"===e?G():(p=4,d--)}function x(e){">"===e?(m=new $(Object(l.a)(Object(l.a)({},m),{isClosing:!0})),W()):p=4}function R(t){"--"===e.substr(d,2)?(d+=2,m=new $(Object(l.a)(Object(l.a)({},m),{type:"comment"})),p=14):"DOCTYPE"===e.substr(d,7).toUpperCase()?(d+=7,m=new $(Object(l.a)(Object(l.a)({},m),{type:"doctype"})),p=20):z()}function M(e){"-"===e?p=15:">"===e?z():p=16}function L(e){"-"===e?p=18:">"===e?z():p=16}function B(e){"-"===e&&(p=17)}function F(e){p="-"===e?18:16}function H(e){">"===e?W():"!"===e?p=19:"-"===e||(p=16)}function V(e){"-"===e?p=17:">"===e?W():p=16}function U(e){">"===e?W():"<"===e&&G()}function z(){p=0,m=u}function G(){p=1,m=new $({idx:d})}function W(){var t=e.slice(h,m.idx);t&&o(t,h),"comment"===m.type?c(m.idx):"doctype"===m.type?s(m.idx):(m.isOpening&&r(m.name,m.idx),m.isClosing&&a(m.name,m.idx)),z(),h=d+1}function q(){var t=m.idx+(m.isClosing?2:1);return e.slice(t,d).toLowerCase()}h<d&&(n=e.slice(h,d),o(n,h),h=d+1)}var $=function(e){void 0===e&&(e={}),this.idx=void 0!==e.idx?e.idx:-1,this.type=e.type||"tag",this.name=e.name||"",this.isOpening=!!e.isOpening,this.isClosing=!!e.isClosing},ee=new(function(){function e(t){void 0===t&&(t={}),this.version=e.version,this.urls={},this.email=!0,this.phone=!0,this.hashtag=!1,this.mention=!1,this.newWindow=!0,this.stripPrefix={scheme:!0,www:!0},this.stripTrailingSlash=!0,this.decodePercentEncoding=!0,this.truncate={length:0,location:"end"},this.className="",this.replaceFn=null,this.context=void 0,this.sanitizeHtml=!1,this.matchers=null,this.tagBuilder=null,this.urls=this.normalizeUrlsCfg(t.urls),this.email="boolean"==typeof t.email?t.email:this.email,this.phone="boolean"==typeof t.phone?t.phone:this.phone,this.hashtag=t.hashtag||this.hashtag,this.mention=t.mention||this.mention,this.newWindow="boolean"==typeof t.newWindow?t.newWindow:this.newWindow,this.stripPrefix=this.normalizeStripPrefixCfg(t.stripPrefix),this.stripTrailingSlash="boolean"==typeof t.stripTrailingSlash?t.stripTrailingSlash:this.stripTrailingSlash,this.decodePercentEncoding="boolean"==typeof t.decodePercentEncoding?t.decodePercentEncoding:this.decodePercentEncoding,this.sanitizeHtml=t.sanitizeHtml||!1;var n=this.mention;if(!1!==n&&"twitter"!==n&&"instagram"!==n&&"soundcloud"!==n)throw new Error("invalid `mention` cfg - see docs");var r=this.hashtag;if(!1!==r&&"twitter"!==r&&"facebook"!==r&&"instagram"!==r)throw new Error("invalid `hashtag` cfg - see docs");this.truncate=this.normalizeTruncateCfg(t.truncate),this.className=t.className||this.className,this.replaceFn=t.replaceFn||this.replaceFn,this.context=t.context||this}return e.link=function(t,n){return new e(n).link(t)},e.parse=function(t,n){return new e(n).parse(t)},e.prototype.normalizeUrlsCfg=function(e){return null==e&&(e=!0),"boolean"==typeof e?{schemeMatches:e,wwwMatches:e,tldMatches:e}:{schemeMatches:"boolean"!=typeof e.schemeMatches||e.schemeMatches,wwwMatches:"boolean"!=typeof e.wwwMatches||e.wwwMatches,tldMatches:"boolean"!=typeof e.tldMatches||e.tldMatches}},e.prototype.normalizeStripPrefixCfg=function(e){return null==e&&(e=!0),"boolean"==typeof e?{scheme:e,www:e}:{scheme:"boolean"!=typeof e.scheme||e.scheme,www:"boolean"!=typeof e.www||e.www}},e.prototype.normalizeTruncateCfg=function(e){return"number"==typeof e?{length:e,location:"end"}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&void 0===e[n]&&(e[n]=t[n]);return e}(e||{},{length:Number.POSITIVE_INFINITY,location:"end"})},e.prototype.parse=function(e){var t=this,n=["a","style","script"],r=0,a=[];return X(e,{onOpenTag:function(e){n.indexOf(e)>=0&&r++},onText:function(e,n){if(0===r){var i=function(e,t){if(!t.global)throw new Error("`splitRegex` must have the 'g' flag set");for(var n,r=[],a=0;n=t.exec(e);)r.push(e.substring(a,n.index)),r.push(n[0]),a=n.index+n[0].length;return r.push(e.substring(a)),r}(e,/(&nbsp;|&#160;|&lt;|&#60;|&gt;|&#62;|&quot;|&#34;|&#39;)/gi),o=n;i.forEach((function(e,n){if(n%2==0){var r=t.parseText(e,o);a.push.apply(a,r)}o+=e.length}))}},onCloseTag:function(e){n.indexOf(e)>=0&&(r=Math.max(r-1,0))},onComment:function(e){},onDoctype:function(e){}}),a=this.compactMatches(a),a=this.removeUnwantedMatches(a)},e.prototype.compactMatches=function(e){e.sort((function(e,t){return e.getOffset()-t.getOffset()}));for(var t=0;t<e.length-1;t++){var n=e[t],r=n.getOffset(),a=n.getMatchedText().length,i=r+a;if(t+1<e.length){if(e[t+1].getOffset()===r){var o=e[t+1].getMatchedText().length>a?t:t+1;e.splice(o,1);continue}e[t+1].getOffset()<i&&e.splice(t+1,1)}}return e},e.prototype.removeUnwantedMatches=function(e){return this.hashtag||a(e,(function(e){return"hashtag"===e.getType()})),this.email||a(e,(function(e){return"email"===e.getType()})),this.phone||a(e,(function(e){return"phone"===e.getType()})),this.mention||a(e,(function(e){return"mention"===e.getType()})),this.urls.schemeMatches||a(e,(function(e){return"url"===e.getType()&&"scheme"===e.getUrlMatchType()})),this.urls.wwwMatches||a(e,(function(e){return"url"===e.getType()&&"www"===e.getUrlMatchType()})),this.urls.tldMatches||a(e,(function(e){return"url"===e.getType()&&"tld"===e.getUrlMatchType()})),e},e.prototype.parseText=function(e,t){void 0===t&&(t=0),t=t||0;for(var n=this.getMatchers(),r=[],a=0,i=n.length;a<i;a++){for(var o=n[a].parseMatches(e),c=0,s=o.length;c<s;c++)o[c].setOffset(t+o[c].getOffset());r.push.apply(r,o)}return r},e.prototype.link=function(e){if(!e)return"";this.sanitizeHtml&&(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"));for(var t=this.parse(e),n=[],r=0,a=0,i=t.length;a<i;a++){var o=t[a];n.push(e.substring(r,o.getOffset())),n.push(this.createMatchReturnVal(o)),r=o.getOffset()+o.getMatchedText().length}return n.push(e.substring(r)),n.join("")},e.prototype.createMatchReturnVal=function(e){var t;return this.replaceFn&&(t=this.replaceFn.call(this.context,e)),"string"==typeof t?t:!1===t?e.getMatchedText():t instanceof o?t.toAnchorString():e.buildTag().toAnchorString()},e.prototype.getMatchers=function(){if(this.matchers)return this.matchers;var e=this.getTagBuilder(),t=[new G({tagBuilder:e,serviceName:this.hashtag}),new M({tagBuilder:e}),new q({tagBuilder:e}),new J({tagBuilder:e,serviceName:this.mention}),new V({tagBuilder:e,stripPrefix:this.stripPrefix,stripTrailingSlash:this.stripTrailingSlash,decodePercentEncoding:this.decodePercentEncoding})];return this.matchers=t},e.prototype.getTagBuilder=function(){var e=this.tagBuilder;return e||(e=this.tagBuilder=new s({newWindow:this.newWindow,truncate:this.truncate,className:this.className})),e},e.version="3.14.3",e.AnchorTagBuilder=s,e.HtmlTag=o,e.matcher={Email:M,Hashtag:G,Matcher:v,Mention:J,Phone:q,Url:V},e.match={Email:d,Hashtag:f,Match:u,Mention:p,Phone:h,Url:m},e}())({urls:{schemeMatches:!0,wwwMatches:!0,tldMatches:!0},email:!0,phone:!0,mention:!1,hashtag:!1,stripPrefix:!0,stripTrailingSlash:!0,newWindow:!0,truncate:{length:40,location:"end"},className:"vkuiLink Link",replaceFn:function(e){switch(e.getType()){case"url":var t=e.buildTag(),n=t.getAttr("href"),r=decodeURIComponent(n);return!(!/^\/[^/]/.test(r)&&!/^(https?:\/\/)?([a-z0-9_\-.]+\.)?vk.(com|me)(\/.*)?/.test(r))||(t.setAttr("href","https://vk.com/away.php?to="+encodeURIComponent(r)+"&utf=1"),t.setAttr("target","_blank"),t.setAttr("rel","noopener"),t);default:return!0}}}),te=/[&"'<>\n]/g,ne={"&":"&amp;","'":"&apos;",'"':"&quot;","<":"&lt;",">":"&gt;","\n":"<br>"},re=/\[((id|club)\d+)\|(.+?)\]/gi,ae=/\[(.+?)\|(.+?)\]/gi,ie='<a class="vkuiLink Link Link--mention" href="https://vk.com/{0}" target="_blank">{1}</a>';function oe(e){return e?e.replace(/<</g,"«").replace(/>>/g,"»").replace(/ --/g," —").replace(/-- /g,"— "):""}function ce(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.replace(te,(function(e){return t||"\n"!==e?ne[e]:e}))}function se(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e?(e=ce(e=oe(e),t.breaks),t.links&&(e=ee.link(e)),e=t.mentions?e.replace(re,(function(e,t,n,r){return ie.replace("{0}",t).replace("{1}",r)})):e.replace(ae,(function(e,t,n){return n}))):""}var ue=function(e){return"«".concat(e,"»")},le=function(e){return e.replace(/<a[^>]*>(.*?)<\/a>/g,"<b>$1</b>")},de=function(e,t){return e.length>t?e.slice(0,t-3)+"…":e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(0),a=n.n(r),i=(n(1035),n(1)),o=function(e){var t=e.letters,n=e.icon,r=e.color,o=e.size,c=e.className,s=e.dataTestId;return a.a.createElement("div",{className:Object(i.Lb)(c,"GradientAvatar","GradientAvatar--color".concat(r),"GradientAvatar--size".concat(o)),style:{width:"".concat(o,"px"),minWidth:"".concat(o,"px"),height:"".concat(o,"px")},"data-testid":s},null!=t?t:n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(2),a=n.n(r),i=n(87),o=n(9);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=Object(o.createStore)({loading:!1,foreignSchools:[],sferumSchools:[],userSferumSchools:[]}).on(i.e,(function(e){return s(s({},e),{},{loading:!0})})).on(i.g,(function(e){return s(s({},e),{},{loading:!0})})).on(i.e.doneData,(function(e,t){return s(s({},e),{},{foreignSchools:t.reduce((function(e,t){return t.schools.reduce((function(e,t){return e.push(t),e}),[])}),[])})})).on(i.f.doneData,(function(e,t){return s(s({},e),{},{sferumSchools:t.items})})).on(i.g.doneData,(function(e,t){return s(s({},e),{},{userSferumSchools:t.items})})).on(i.d.doneData,(function(e,t){var n=t.statuses;return n?s(s({},e),{},{userSferumSchools:e.userSferumSchools.map((function(e){return s(s({},e),{},{services:n.find((function(t){return t.id===e.id})).services.filter((function(e){return e.is_connected}))})}))}):e})).on(i.e.finally,(function(e){return s(s({},e),{},{loading:!1})})).on(i.g.finally,(function(e){return s(s({},e),{},{loading:!1})}))},function(e,t,n){var r=n(559),a=n(443);e.exports=function(e){return null!=e&&a(e.length)&&!r(e)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c}));var r=n(390),a=n(398),i=Object(r.a)((function(e){var t=Object(a.a)();return{ownerId:e.ownerId,canManage:e.canManage,fileList:t}})),o=i.hook,c=i.Provider},,,,function(e,t,n){"use strict";e.exports=function(e){return"string"==typeof e||"symbol"==typeof e}},function(e,t,n){"use strict";var r=n(73),a=n(541),i=a(r("String.prototype.indexOf"));e.exports=function(e,t){var n=r(e,!!t);return"function"==typeof n&&i(e,".prototype.")>-1?a(n):n}},function(e,t,n){var r=n(266),a=n(886),i=n(887),o=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?a(e):i(e)}},function(e,t,n){var r=n(180).Symbol;e.exports=r},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(e){var t=this;this.receiver=!1,this._requestId=1,this._requests={},this._onMessage=function(e){if(e.origin===t.origin&&e.data&&e.data.embeddedName===t.name){t.target=e.source;var n=e.data,r=n.response;if(r){var a=t._requests[r];a&&a(n.data),t._requests[r]=null}else n.request&&n.action&&Promise.resolve(t.onMessage(n.action,n.data)).then((function(e){t._sendResponse(n.request,n.action,e)}))}},this.name=e.name,this.target=e.target,this.origin=e.origin||"https://"+e.host,this.receiver=e.receiver||!1,this.onMessage=e.onMessage,window.addEventListener("message",this._onMessage,!1)}return e.prototype._sendResponse=function(e,t,n){this.target&&this.target.postMessage({embeddedName:this.name,action:t,response:e,data:n},this.origin)},e.prototype.sendMessage=function(e,t){var n=this;if(void 0===t&&(t={}),!this.target)return Promise.reject();var r=this._requestId,a=new Promise((function(e){n._requestId++,n._requests[r]=e}));return this.target.postMessage({embeddedName:this.name,action:e,data:t,request:r},this.origin),a},e.prototype.destroy=function(){window.removeEventListener("message",this._onMessage,!1),this.target=void 0},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(7),a=n.n(r),i=n(2),o=n.n(i),c=n(0),s=n(152),u=n(28),l=n(24);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(e){var t=Object(l.b)().apiRequest,n=Object(u.b)().schoolGrades,r=Object(u.a)();return{schoolGrades:n,getGrades:Object(c.useCallback)((function(n,i,o){var c=f({group_id:e,q:n},i);return Promise.all([t("education.getGrades",c,f(f({},o),{},{grouping:!1})),t("educationForeign.getServiceList",{host:window.location.origin+window.location.pathname})]).then((function(e){var t=a()(e,2);return[t[0],t[1].services]})).then((function(n){var i=a()(n,2),o=i[0],c=i[1];return t("educationForeign.getGradeStatus",{schoolId:e,grade_ids:o.map((function(e){return e.id}))}).then((function(e){var t=o.map((function(t){var n,r;return f(f({},t),{},{services:null==e||null===(n=e.statuses)||void 0===n||null===(r=n.find((function(e){return e.id===t.id})))||void 0===r?void 0:r.services.map((function(e){var t;return f(f({},e),{},{name:(null===(t=c.find((function(t){return t.id===e.service_id})))||void 0===t?void 0:t.name)||""})}))})}));return r(Object(s.c)(t)),t}))}))}),[e,t,r]),clearGrades:function(){r(Object(s.c)([]))}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(6),a=n.n(r),i=n(12),o=n.n(i),c=n(0),s=n.n(c),u=["width","height"],l=function(e){var t=e.width,n=void 0===t?28:t,r=e.height,i=void 0===r?28:r,c=o()(e,u);return s.a.createElement("svg",a()({width:n,height:i,viewBox:"0 0 28 28",xmlns:"http://www.w3.org/2000/svg"},c),s.a.createElement("path",{d:"M2 14V5.4L12 4v10H2zm11 0h13V2L13 3.8V14zm-1 1H2v7.6L12 24v-9zm1 0v9.2L26 26V15H13z",fill:"currentColor"}))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r="https://vk.com/@-197570194-vozmozhnosti-vk-education",a="https://vk.com/@-197570194-o-translyaciyah"},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(7),a=n.n(r),i=n(0),o=n(13),c=n(5),s=function(){var e=Object(i.useRef)(c.d.getState().params),t=Object(i.useState)({}),n=a()(t,2)[1];return Object(i.useEffect)((function(){var t=function(t){Object(o.t)(e.current,t.toState.params)||(e.current=t.toState.params,n({}))};return c.d.subscribe(t),function(){return c.d.unsubscribe(t)}}),[]),e.current}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e,t,n,r,a){this.message=e,this.path=t,this.query=n,this.clientOnly=r,this.variables=a}},function(e,t,n){"use strict";n.d(t,"a",(function(){return Se}));var r=n(7),a=n.n(r),i=n(2),o=n.n(i),c=n(0),s=n.n(c),u=n(48),l=n(38),d=n(1),f=n(326),p=n(129),h=n(94),m=n(17),v=n.n(m),g=n(18),b=n(10),_=n(19),y="comments_outline_56",E=!1;function O(){E||(Object(b.a)(new v.a({id:y,viewBox:"0 0 56 56",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 56 56" id="comments_outline_56"><path d="M27.234 42.143l.965 1.149zm-10.09 8.477l-.966-1.149zM8.5 15a1.5 1.5 0 000-3zm20.895 20.672l-.965 1.148zm9.462 7.948l.965-1.149zM5 36.5v-18H2v18zm9.5 3.5h-6v3h6zm2.5 9.854V42.5h-3v7.354zm9.27-8.86l-10.092 8.477 1.93 2.297 10.091-8.476zm1.93 2.298c.223-.189.507-.292.8-.292v-3c-.999 0-1.966.352-2.73.995zM14 49.854c0 2.124 2.482 3.28 4.108 1.914l-1.93-2.297a.5.5 0 01.822.383zM14.5 43a.5.5 0 01-.5-.5h3a2.5 2.5 0 00-2.5-2.5zM2 36.5A6.5 6.5 0 008.5 43v-3A3.5 3.5 0 015 36.5zm3-18A3.5 3.5 0 018.5 15v-3A6.5 6.5 0 002 18.5zM46.5 5h-28v3h28zM12 11.5v18h3v-18zm41 18v-18h-3v18zM41.5 36h5v-3h-5zm.5 6.854V35.5h-3v7.354zM18.5 36h7.679v-3H18.5zm9.93.82l9.462 7.948 1.93-2.297-9.463-7.948zM26.179 36a3.5 3.5 0 012.25.82l1.93-2.297A6.5 6.5 0 0026.18 33zM39 42.854a.5.5 0 01.822-.383l-1.93 2.297c1.626 1.366 4.108.21 4.108-1.914zM41.5 33a2.5 2.5 0 00-2.5 2.5h3a.5.5 0 01-.5.5zm8.5-3.5a3.5 3.5 0 01-3.5 3.5v3a6.5 6.5 0 006.5-6.5zm-38 0a6.5 6.5 0 006.5 6.5v-3a3.5 3.5 0 01-3.5-3.5zM18.5 5a6.5 6.5 0 00-6.5 6.5h3A3.5 3.5 0 0118.5 8zm28 3a3.5 3.5 0 013.5 3.5h3A6.5 6.5 0 0046.5 5z" fill="currentColor" /></symbol>'})),E=!0)}var w=function(e){return Object(b.b)((function(){O()}),[]),s.a.createElement(_.a,Object(g.assign)({},e,{viewBox:"0 0 56 56",id:y,width:isNaN(e.width)?56:+e.width,height:isNaN(e.height)?56:+e.height}))};w.mountIcon=O;var C=w,S=n(106),A=n(128),k=(n(1038),function(e){var t=e.isFinished,n=e.placeholderTestId,r=Object(S.c)().getLangKey;return s.a.createElement(d.cb,{className:"BroadcastCommentsPlaceholder",icon:s.a.createElement(C,{className:"BroadcastCommentsPlaceholder__icon"})},s.a.createElement(d.wb,{Component:"span",className:"BroadcastCommentsPlaceholder__text",weight:"regular"},s.a.createElement(A.a,{"data-testid":n},r(t?"vkui_edu_broadcast_comments_empty_placeholder_fihished":"vkui_edu_broadcast_comments_empty_placeholder_started"))))}),j=Object(c.memo)(k),T=!1;function I(){T||(Object(b.a)(new v.a({id:"send_24",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="send_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path d="M5.739 15.754c-.686 1.855-1.117 3.158-1.293 3.91-.553 2.362-.956 2.894 1.107 1.771 2.062-1.122 12.046-6.683 14.274-7.919 2.904-1.611 2.942-1.485-.156-3.196-2.36-1.302-12.227-6.718-14.118-7.782-1.892-1.063-1.66-.59-1.107 1.772.178.761.616 2.076 1.311 3.944a4 4 0 002.988 2.531l5.765 1.117a.1.1 0 010 .196l-5.778 1.116a4 4 0 00-2.993 2.54z" fill="currentColor" /></g></symbol>'})),T=!0)}var P=function(e){return Object(b.b)((function(){I()}),[]),s.a.createElement(_.a,Object(g.assign)({},e,{viewBox:"0 0 24 24",id:"send_24",width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};P.mountIcon=I;var D=P,N=n(169),x=n(287),R=n(288),M=n(89),L=n(256),B=(n(1039),function(e){var t=e.userId,n=e.userName,r=e.userPhoto,i=e.avatarTestId,o=e.gradientAvatarTestId,u=Object(c.useState)(null),l=a()(u,2),f=l[0],p=l[1],h=n[0],m=t%14;return Object(c.useEffect)((function(){var e=document.createElement("img");e.src=r,e.onload=function(){p(!0)},e.onerror=function(){p(!1)}}),[r]),s.a.createElement("div",{className:"BroadcastCommentUserAvatar"},null===f?null:f?s.a.createElement(d.h,{size:24,src:r,"data-testid":i}):s.a.createElement(L.a,{letters:h,size:24,color:m,dataTestId:o}))}),F=Object(c.memo)(B),H=(n(1040),function(e){var t=e.inputHeight,n=e.changeInputHeight,r=e.wrapTestId,a=e.textareaTestId,i=e.counterTestId,o=e.submitTestId,u=e.loaderTestId,f=e.iconTestId,p=Object(S.c)().getLangKey,h=Object(c.useRef)(null),m=Object(l.c)(x.a),v=m.comment,g=m.commentLength,b=m.isCommentValid,_=m.loading,y=Object(M.a)().accountInfo,E=function(){_||Object(N.b)(v)};return Object(c.useEffect)((function(){var e,t;h.current&&(e=h.current,t=n,e.style.height="1px",e.style.height="".concat(e.scrollHeight,"px"),e.scrollTop=e.scrollHeight,t(e.scrollHeight+1<=72?e.scrollHeight+1:72),h.current.focus())}),[v]),s.a.createElement(d.k,{className:"BroadcastCommentInput",level:"1",weight:"medium",style:{height:"".concat(t,"px")},"data-testid":r},s.a.createElement("div",{className:"BroadcastCommentInput__avatar"},s.a.createElement(F,{userId:null==y?void 0:y.id,userName:null==y?void 0:y.firstName,userPhoto:null==y?void 0:y.photo})),s.a.createElement("textarea",{ref:h,className:"BroadcastCommentInput__textarea",onChange:N.a,onKeyDown:function(e){"Enter"===e.key&&E()},value:v,rows:1,placeholder:p("vkui_edu_broadcast_comments_input_placeholder"),disabled:_,"data-testid":a}),s.a.createElement(d.k,{className:Object(d.Lb)("BroadcastCommentInput__counter",{"BroadcastCommentInput__counter--error":!b}),level:"2",weight:"regular","data-testid":i},g,"/",R.a),s.a.createElement("div",{className:"BroadcastCommentInput__button",onClick:E,"data-testid":o},_?s.a.createElement(d.tb,{size:"small","data-testid":u}):s.a.createElement(D,{"data-testid":f})))}),V=Object(c.memo)(H),U=n(255),z=(n(1041),function(e){var t=e.userId,n=e.userName,r=e.userPhoto,i=e.comment,o=e.containerTestId,u=e.userNameTestId,l=e.textTestId,f=e.detailsTestId,p=Object(S.c)().getLangKey,h=Object(c.useState)(i.slice(0,130)),m=a()(h,2),v=m[0],g=m[1],b=v.length<i.length;return s.a.createElement("div",{className:"BroadcastComment","data-testid":o},s.a.createElement(F,{userId:t,userName:n,userPhoto:r}),s.a.createElement("div",{className:"BroadcastComment__content"},s.a.createElement(d.k,{className:"BroadcastComment__username",level:"1",weight:"medium","data-testid":u},n),s.a.createElement(d.k,{className:"BroadcastComment__text",level:"1",weight:"medium"},s.a.createElement(A.a,{"data-testid":l},Object(U.a)(v,{links:!0}))),b&&s.a.createElement(d.L,{className:"BroadcastComment__details",onClick:function(){g(i)},"data-testid":f},p("vkui_edu_broadcast_comment_detail"))))}),G=Object(c.memo)(z),W=!1;function q(){W||(Object(b.a)(new v.a({id:"down_16",viewBox:"0 0 16 16",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="down_16"><g fill="none" fill-rule="evenodd"><path d="M0 16h16V0H0z" /><path d="M8.616 13.794l.095-.083 4-4a1.005 1.005 0 00-1.327-1.505l-.095.083-2.284 2.285V3a1.005 1.005 0 00-2.003-.117L6.995 3v7.576L4.711 8.289a1.005 1.005 0 00-1.327-.083l-.095.083c-.362.363-.39.933-.083 1.327l.083.095 4 4c.363.362.933.39 1.327.083z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),W=!0)}var K=function(e){return Object(b.b)((function(){q()}),[]),s.a.createElement(_.a,Object(g.assign)({},e,{viewBox:"0 0 16 16",id:"down_16",width:isNaN(e.width)?16:+e.width,height:isNaN(e.height)?16:+e.height}))};K.mountIcon=q;var Y=K,Z=(n(1042),function(e){var t=e.onClick,n=e.buttonTestId,r=e.textTestId,a=Object(S.c)().getLangKey;return s.a.createElement("div",{className:"BroadcastCommentsScrollButton"},s.a.createElement(d.j,{className:"BroadcastCommentsScrollButton__btn",before:s.a.createElement(Y,{className:"BroadcastCommentsScrollButton__icon"}),size:"m",mode:"overlay_secondary",onClick:t,"data-testid":n},s.a.createElement("span",{className:"BroadcastCommentsScrollButton__text","data-testid":r},a("vkui_edu_broadcast_comments_new_comments"))))}),Q=Object(c.memo)(Z),J=(n(1043),function(e){var t=e.comments,n=e.inputHeight,r=e.containerTestId,i=e.commentTestId,o=e.listTestId,u=e.scrollButtonTestId,l=Object(c.useRef)(),d=Object(c.useState)(!1),f=a()(d,2),p=f[0],h=f[1],m=Object(c.useState)(!1),v=a()(m,2),g=v[0],b=v[1],_=Object(M.a)().accountInfo,y={maxHeight:540-n},E=function(){h(!1),b(!1)},O=function(){var e;E(),(e=l.current).scrollTop=e.scrollHeight};Object(c.useEffect)((function(){p?b(!0):O();var e=t[t.length-1],n=null==_?void 0:_.id;n&&e&&e.user.id===n&&O()}),[t]);return s.a.createElement("div",{className:"BroadcastCommentsList","data-testid":r},s.a.createElement("div",{ref:l,className:"BroadcastCommentsList__list",style:y,onScroll:function(e){var t=e.currentTarget;t.offsetHeight===t.scrollHeight-t.scrollTop?E():h(!0)},"data-testid":o},t.map((function(e){return s.a.createElement(G,{key:e.id,userId:e.user.id,userName:"".concat(e.user.first_name," ").concat(e.user.last_name),userPhoto:e.user.photo_200,comment:e.text,containerTestId:i?"".concat(i,"-").concat(e.id):""})}))),g&&s.a.createElement(Q,{onClick:O,buttonTestId:u}))}),X=Object(c.memo)(J),$=n(356),ee=(n(1044),function(e){var t=e.onStart,n=e.buttonTestId,r=e.textTestId,a=Object(S.c)().getLangKey;return s.a.createElement("div",{className:"BroadcastCommentsAuthButton"},s.a.createElement(d.j,{className:"BroadcastCommentsAuthButton__button",size:"m",mode:"overlay_primary",stretched:!0,onClick:t,"data-testid":n},s.a.createElement(d.k,{level:"1",weight:"medium","data-testid":r},a("vkui_edu_broadcast_comments_auth_button"))))}),te=Object($.a)(Object(c.memo)(ee)),ne=n(278),re=(n(1045),function(e){var t=e.containerTestId,n=e.commentsListTestId,r=e.placeholderTestId,i=e.inputTestId,o=e.authButtonTestId,u=Object(f.b)().isAuthorized,d=Object(l.c)(ne.a),p=d.comments,m=d.hasComments,v=d.isLoaded,g=d.isFinished,b=d.isStarted,_=Object(c.useMemo)((function(){return u()}),[]),y=Object(c.useState)(_?40:44),E=a()(y,2),O=E[0],w=E[1];return Object(c.useEffect)((function(){g&&w(0)}),[g]),b||g?s.a.createElement("div",{className:"BroadcastComments","data-testid":t},s.a.createElement(h.a,{isLoaded:v,small:!0},m?s.a.createElement(X,{inputHeight:O,comments:p,containerTestId:n}):s.a.createElement(j,{isFinished:g,placeholderTestId:r}),b?_?s.a.createElement(V,{inputHeight:O,changeInputHeight:w,wrapTestId:i}):s.a.createElement(te,{buttonTestId:o}):null)):null}),ae=Object(c.memo)(re),ie=n(205),oe=n(1318),ce=!1;function se(){ce||(Object(b.a)(new v.a({id:"comment_disable_outline_20",viewBox:"0 0 20 20",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="comment_disable_outline_20"><g clip-rule="evenodd" fill="currentColor" fill-rule="evenodd"><path d="M15.33 4.032C14.953 4 14.463 4 13.75 4h-6a.75.75 0 010-1.5h6.031c.674 0 1.224 0 1.672.037.463.037.882.118 1.272.317a3.25 3.25 0 011.42 1.42c.2.391.28.81.318 1.273.037.447.037.998.037 1.672v6.031a.75.75 0 01-1.5 0v-6c0-.712 0-1.202-.032-1.58-.03-.371-.085-.57-.159-.714a1.75 1.75 0 00-.765-.765c-.144-.074-.343-.13-.713-.16zM5.5 17.5a1.5 1.5 0 002.56 1.06l3.032-3.03c.02-.021.041-.03.07-.03h3.277l2.28 2.28a.75.75 0 101.061-1.06L2.28 1.22a.75.75 0 00-1.06 1.06l1.187 1.188a3.2 3.2 0 00-.558.78c-.219.428-.29.857-.32 1.233-.03.346-.029.756-.029 1.19v4.659c0 .433 0 .843.028 1.189.03.376.102.805.32 1.234a3.2 3.2 0 001.4 1.398c.428.219.857.29 1.233.32.3.025.649.029 1.019.029zm1.424-3.118c.076.15.076.346.076.738v2.38l3.031-3.031c.173-.173.26-.26.36-.322a1 1 0 01.29-.12c.115-.027.237-.027.482-.027h1.776L3.468 4.529a1.7 1.7 0 00-.283.4C3 5.291 3 5.767 3 6.72v4.56c0 .952 0 1.428.185 1.792.163.32.423.58.743.743.364.185.84.185 1.792.185h.16c.392 0 .588 0 .738.076a.7.7 0 01.306.306z" /></g></symbol>'})),ce=!0)}var ue=function(e){return Object(b.b)((function(){se()}),[]),s.a.createElement(_.a,Object(g.assign)({},e,{viewBox:"0 0 20 20",id:"comment_disable_outline_20",width:isNaN(e.width)?20:+e.width,height:isNaN(e.height)?20:+e.height}))};ue.mountIcon=se;var le=ue,de=!1;function fe(){de||(Object(b.a)(new v.a({id:"comment_outline_20",viewBox:"0 0 20 20",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="comment_outline_20"><path clip-rule="evenodd" d="M6.426 18.886A1.5 1.5 0 015.5 17.5v-2c-.37 0-.719-.004-1.019-.028-.376-.03-.805-.102-1.234-.32a3.2 3.2 0 01-1.398-1.4c-.219-.428-.29-.857-.32-1.233-.03-.346-.029-.756-.029-1.19V6.67c0-.433 0-.843.028-1.189.03-.376.102-.805.32-1.234a3.2 3.2 0 011.4-1.398c.428-.219.857-.29 1.233-.32.346-.03.756-.029 1.19-.029h8.659c.433 0 .843 0 1.189.028.376.03.805.102 1.234.32a3.2 3.2 0 011.398 1.4c.219.428.29.857.32 1.233.03.346.03.756.029 1.19v4.659c0 .433 0 .843-.028 1.189-.03.376-.102.805-.32 1.234a3.2 3.2 0 01-1.4 1.398c-.428.219-.857.29-1.233.32-.346.03-.756.03-1.19.029h-3.166c-.03 0-.05.009-.071.03l-3.031 3.03a1.5 1.5 0 01-1.635.326zM7 15.12c0-.392 0-.588-.076-.738a.7.7 0 00-.306-.306C6.468 14 6.272 14 5.88 14h-.16c-.952 0-1.428 0-1.792-.185a1.7 1.7 0 01-.743-.743C3 12.708 3 12.232 3 11.28V6.72c0-.952 0-1.428.185-1.792a1.7 1.7 0 01.743-.743C4.292 4 4.768 4 5.72 4h8.56c.952 0 1.428 0 1.792.185.32.163.58.423.743.743.185.364.185.84.185 1.792v4.56c0 .952 0 1.428-.185 1.792a1.7 1.7 0 01-.743.743c-.364.185-.84.185-1.792.185h-3.117c-.245 0-.367 0-.482.028a.998.998 0 00-.29.12c-.1.061-.187.148-.36.32L7 17.5z" fill="currentColor" fill-rule="evenodd" /></symbol>'})),de=!0)}var pe=function(e){return Object(b.b)((function(){fe()}),[]),s.a.createElement(_.a,Object(g.assign)({},e,{viewBox:"0 0 20 20",id:"comment_outline_20",width:isNaN(e.width)?20:+e.width,height:isNaN(e.height)?20:+e.height}))};pe.mountIcon=fe;var he=pe,me=(n(1046),function(e){var t=e.onClose,n=e.onToggleComments,r=e.enableComments,a=e.showComments;return s.a.createElement("div",{className:"BroadcastPlayerActions"},s.a.createElement(d.J,{className:"BroadcastPlayerActions__button",onClick:t},s.a.createElement(oe.a,null)),r&&s.a.createElement(d.J,{className:"BroadcastPlayerActions__button",onClick:n},a?s.a.createElement(le,null):s.a.createElement(he,null)))}),ve=Object(c.memo)(me),ge=(n(1047),function(e){var t=e.player,n=e.onClose,r=e.withComments,i=Object(f.b)().isAuthorized,o=Object(l.c)(ne.a),u=o.isUpcoming,h=o.isStarted,m=o.isFinished,v=Object(c.useState)(!1),g=a()(v,2),b=g[0],_=g[1],y=Object(c.useState)(0),E=a()(y,2),O=E[0],w=E[1],C=Object(c.useState)(r),S=a()(C,2),A=S[0],k=S[1],j=Object(c.useMemo)((function(){return i()}),[]),T=Object(c.useMemo)((function(){return r&&!u&&(b||!j&&m)}),[r,u,m,b]);return Object(c.useEffect)((function(){return Object(ie.c)(r),function(){Object(ie.a)()}}),[]),Object(c.useEffect)((function(){(h||m)&&w(O+1),m&&Object(ie.a)()}),[m,h]),s.a.createElement(d.eb,{alignY:"center",alignX:"center",onClick:n,hasMask:!0},s.a.createElement("div",{className:"BroadcastPlayer__wrap"},s.a.createElement("div",{className:"BroadcastPlayer__in"},s.a.createElement("div",{className:Object(d.Lb)("BroadcastPlayer__player",{"BroadcastPlayer__player--small":T&&A})},!j&&m?s.a.createElement("div",{className:"BroadcastPlayer__stub"}):s.a.createElement(p.a,{updateKey:O,src:t,allowFullScreen:!0,isLoadedCallback:function(e){_(e)},autoplay:h||u})),T&&s.a.createElement("div",{className:Object(d.Lb)("BroadcastPlayer__chat",{"BroadcastPlayer__chat--hide":!A})},s.a.createElement(ae,null))),s.a.createElement(ve,{onClose:n,onToggleComments:function(){k(!A)},enableComments:T,showComments:A})))}),be=Object(c.memo)(ge),_e=n(202),ye=n(5),Ee=n(84),Oe=n(75),we=n(32);function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Se=function(){var e=Object(Ee.a)().getAsyncAccessToken,t=Object(Oe.a)(),n=t.showPopout,r=t.hidePopout,i=Object(we.a)().go,c=function(){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},ye.d.state.params);e.broadcast&&delete e.broadcast,i(ye.d.state.page,e),r()},l=function(t){e().then((function(e){var r=Object(u.g)(t,e);n(s.a.createElement(be,{player:r,onClose:c,withComments:!0}))}))};return{showBroadcastVideo:l,getBroadcastVideo:function(e){var t=e.split("_"),n=a()(t,2),r=n[0],i=n[1];r&&i&&Object(_e.a)({ownerId:r,videoId:i}).then((function(e){var t=e.player;l(t)}))}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l.a}));var r=n(7),a=n.n(r),i=n(0),o=n.n(i),c=n(38),s=n(388),u=function(e){var t=e.children,n=e.name,r=e.fallback,u=function(e){var t=Object(c.c)(s.a);return Object(i.useMemo)((function(){return void 0===t[e]?[!1,{}]:[t[e].enabled,t[e]]}),[t])}(n),l=null!=r?r:null;return a()(u,1)[0]?o.a.createElement(i.Fragment,null,t):l},l=n(367)},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=n.n(r),i=n(1),o=(n(1005),n(14)),c=function(){return a.a.createElement(i.C,{className:"SchoolSidebarFooterSkeleton"},a.a.createElement(i.D,null,a.a.createElement(o.a,{width:"187px"})),a.a.createElement(i.x,null,a.a.createElement(i.w,{top:a.a.createElement(o.a,{width:"93px"})},a.a.createElement(o.a,{width:"272px",height:"44px"}))))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(44),a=n(37);function i(e,t){return Object(a.a)(2,arguments),Object(r.a)(e).getTime()-Object(r.a)(t).getTime()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}};function a(e){return e?r[e]:r.trunc}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(9),a=Object(r.createStore)({isLoaded:!0,isStarted:!1,isFinished:!1,isUpcoming:!0,hasComments:!1,comments:[]})},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(0),a=n.n(r),i=n(1),o=n(1160),c=n(5),s=(n(1077),n(104)),u=n(29),l=n(32),d=function(e){var t=e.sections,n=e.ignoreQuery,r=Object(l.a)().go,d=Object(i.Ob)().viewWidth,f=Object(u.a)(d);return a.a.createElement(i.C,{className:"SidebarNav"},t.map((function(e,t){return a.a.createElement(i.C,{key:t,mode:"plain"},e.map((function(e){var t=e.onClick||function(){return r(e.route,e.routeParams)};return e.disabled?null:a.a.createElement(i.pb,{key:e.route+s.b.create(e.routeParams||{}),before:e.icon,after:!f&&a.a.createElement(o.a,null),className:Object(i.Lb)("SidebarNav__item",{"SidebarNav__item--active":c.d.isActive(e.route,e.routeParams,!e.hasOwnProperty("strictCompare")||e.strictCompare,n)}),onClick:t,indicator:e.counter>0&&a.a.createElement(i.r,{mode:"primary"},e.counter)},e.label)})))})))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return c}));var r=n(9),a=n(24),i=Object(r.createEffect)((function(){return Object(a.a)("educationPolls.getCurrent")})),o=Object(r.createEffect)((function(e){return Object(a.a)("educationPolls.reject",{poll_id:e})})),c=Object(r.createEffect)((function(e){return Object(a.a)("educationPolls.complete",{poll_id:e})}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}));var r=n(9),a=Object(r.createEvent)(),i=Object(r.createEvent)()},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(13);function a(e){var t=null;return function(){var n=e();return t&&Object(r.t)(t,n)?t:(t=n,n)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var r=n(9),a=Object(r.createEvent)(),i=Object(r.createEvent)()},function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return b}));var r,a=n(2),i=n.n(a),o=n(7),c=n.n(o),s=n(5),u=n(62),l=n(117);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=Promise.resolve(),h=function(){return p},m=function(e){e?r&&r():p=new Promise((function(e){r=e}))},v="",g=function(e){var t=s.o.find((function(t){return t.name===e})),n=t||{},r=n.analyticsName,a=void 0===r?"unknown":r,i=n.analyticsEventType,o=void 0===i?"go":i;if("video"===a&&s.d.getState().params.show)return["video_view","show"];if("articles"===a&&s.d.getState().params.show)return["articles_read","show"];if("school_documents"===a&&s.d.getState().params.show)return["school_documents_view","show"];if("documents"===a&&s.d.getState().params.show)return["document_view","show"];if("document_upload"===a&&s.d.getState().params.schoolId)return["school_documents_add","show"];if("articles_editor"===a){var c=s.d.getState();if(c.params.edit&&c.params.edit.endsWith("_0"))return["articles_add","go"]}return[a,o]},b=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=g(e),i=c()(a,1),o=i[0],s=g(t),d=c()(s,2),p=d[0],m=d[1],b=g(v),_=c()(b,1),y=_[0],E=n?"back":m;h().then((function(){var e=f(f({},Object(u.b)()),{},{event_type:E,screen:o,screen_to:p,prev_screen:y,prev_client_time:0,device_id:""});Object(u.f)(l.a.navigation,e,r)})),v=e}},function(e,t,n){"use strict";var r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},r.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},r.getDescription=function(e){var t=r.splitSections(e);return t&&t[0]},r.getMediaSections=function(e){var t=r.splitSections(e);return t.shift(),t},r.matchPrefix=function(e,t){return r.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},r.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1]}return n},r.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},r.parseIceOptions=function(e){return e.substr(14).split(" ")},r.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},r.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},r.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},r.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},r.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),a=0;a<r.length;a++)n[(t=r[a].trim().split("="))[0].trim()]=t[1];return n},r.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},r.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},r.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},r.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},r.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},r.getMid=function(e){var t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},r.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:r.matchPrefix(e+t,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},r.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},r.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?r.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},r.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},r.getCryptoParameters=function(e,t){return r.matchPrefix(e+t,"a=crypto:").map(r.parseCryptoLine)},r.getIceParameters=function(e,t){var n=r.matchPrefix(e+t,"a=ice-ufrag:")[0],a=r.matchPrefix(e+t,"a=ice-pwd:")[0];return n&&a?{usernameFragment:n.substr(12),password:a.substr(10)}:null},r.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=r.splitLines(e)[0].split(" "),a=3;a<n.length;a++){var i=n[a],o=r.matchPrefix(e,"a=rtpmap:"+i+" ")[0];if(o){var c=r.parseRtpMap(o),s=r.matchPrefix(e,"a=fmtp:"+i+" ");switch(c.parameters=s.length?r.parseFmtp(s[0]):{},c.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+i+" ").map(r.parseRtcpFb),t.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(c.name.toUpperCase())}}}return r.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(r.parseExtmap(e))})),t},r.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach((function(e){n+=r.writeRtpMap(e),n+=r.writeFmtp(e),n+=r.writeRtcpFb(e)}));var a=0;return t.codecs.forEach((function(e){e.maxptime>a&&(a=e.maxptime)})),a>0&&(n+="a=maxptime:"+a+"\r\n"),n+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach((function(e){n+=r.writeExtmap(e)})),n},r.parseRtpEncodingParameters=function(e){var t,n=[],a=r.parseRtpParameters(e),i=-1!==a.fecMechanisms.indexOf("RED"),o=-1!==a.fecMechanisms.indexOf("ULPFEC"),c=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),s=c.length>0&&c[0].ssrc,u=r.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===s&&(t=u[0][1]),a.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var r={ssrc:s,codecPayloadType:parseInt(e.parameters.apt,10)};s&&t&&(r.rtx={ssrc:t}),n.push(r),i&&((r=JSON.parse(JSON.stringify(r))).fec={ssrc:s,mechanism:o?"red+ulpfec":"red"},n.push(r))}})),0===n.length&&s&&n.push({ssrc:s});var l=r.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substr(5),10)*.95-16e3:void 0,n.forEach((function(e){e.maxBitrate=l}))),n},r.parseRtcpParameters=function(e){var t={},n=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var a=r.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=a.length>0,t.compound=0===a.length;var i=r.matchPrefix(e,"a=rtcp-mux");return t.mux=i.length>0,t},r.parseMsid=function(e){var t,n=r.matchPrefix(e,"a=msid:");if(1===n.length)return{stream:(t=n[0].substr(7).split(" "))[0],track:t[1]};var a=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return a.length>0?{stream:(t=a[0].value.split(" "))[0],track:t[1]}:void 0},r.parseSctpDescription=function(e){var t,n=r.parseMLine(e),a=r.matchPrefix(e,"a=max-message-size:");a.length>0&&(t=parseInt(a[0].substr(19),10)),isNaN(t)&&(t=65536);var i=r.matchPrefix(e,"a=sctp-port:");if(i.length>0)return{port:parseInt(i[0].substr(12),10),protocol:n.fmt,maxMessageSize:t};if(r.matchPrefix(e,"a=sctpmap:").length>0){var o=r.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(o[0],10),protocol:o[1],maxMessageSize:t}}},r.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(e,t,n){var a=void 0!==t?t:2;return"v=0\r\no="+(n||"thisisadapterortc")+" "+(e||r.generateSessionId())+" "+a+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(e,t,n,a){var i=r.writeRtpDescription(e.kind,t);if(i+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),i+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),i+="a=mid:"+e.mid+"\r\n",e.direction?i+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?i+="a=sendrecv\r\n":e.rtpSender?i+="a=sendonly\r\n":e.rtpReceiver?i+="a=recvonly\r\n":i+="a=inactive\r\n",e.rtpSender){var o="msid:"+a.id+" "+e.rtpSender.track.id+"\r\n";i+="a="+o,i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+o,e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+o,i+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),i},r.getDirection=function(e,t){for(var n=r.splitLines(e),a=0;a<n.length;a++)switch(n[a]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[a].substr(2)}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){return r.splitLines(e)[0].split(" ")[0].substr(2)},r.isRejected=function(e){return"0"===e.split(" ",2)[1]},r.parseMLine=function(e){var t=r.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},r.parseOLine=function(e){var t=r.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},r.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=r.splitLines(e),n=0;n<t.length;n++)if(t[n].length<2||"="!==t[n].charAt(1))return!1;return!0},e.exports=r},function(e,t,n){var r=function(){"undefined"!=typeof document&&document.currentScript&&document.currentScript.src;return function(e){var t,n,r=void 0!==(e=e||{})?e:{};r.ready=new Promise((function(e,r){t=e,n=r}));var a,i={};for(a in r)r.hasOwnProperty(a)&&(i[a]=r[a]);var o,c=[],s="";"undefined"!=typeof document&&document.currentScript&&(s=document.currentScript.src),s=0!==s.indexOf("blob:")?s.substr(0,s.lastIndexOf("/")+1):"";var u=r.print||console.log.bind(console),l=r.printErr||console.warn.bind(console);for(a in i)i.hasOwnProperty(a)&&(r[a]=i[a]);i=null,r.arguments&&(c=r.arguments),r.thisProgram&&r.thisProgram,r.quit&&r.quit;var d,f=0;r.wasmBinary&&(d=r.wasmBinary);var p;r.noExitRuntime;"object"!=typeof WebAssembly&&U("no native wasm support detected");var h=!1;var m="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function v(e,t,n){for(var r=t+n,a=t;e[a]&&!(a>=r);)++a;if(a-t>16&&e.subarray&&m)return m.decode(e.subarray(t,a));for(var i="";t<a;){var o=e[t++];if(128&o){var c=63&e[t++];if(192!=(224&o)){var s=63&e[t++];if((o=224==(240&o)?(15&o)<<12|c<<6|s:(7&o)<<18|c<<12|s<<6|63&e[t++])<65536)i+=String.fromCharCode(o);else{var u=o-65536;i+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else i+=String.fromCharCode((31&o)<<6|c)}else i+=String.fromCharCode(o)}return i}function g(e,t){return e?v(y,e,t):""}var b,_,y,E,O,w,C,S,A,k="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function j(e,t){for(var n=e,r=n>>1,a=r+t/2;!(r>=a)&&O[r];)++r;if((n=r<<1)-e>32&&k)return k.decode(y.subarray(e,n));for(var i="",o=0;!(o>=t/2);++o){var c=E[e+2*o>>1];if(0==c)break;i+=String.fromCharCode(c)}return i}function T(e,t,n){if(void 0===n&&(n=2147483647),n<2)return 0;for(var r=t,a=(n-=2)<2*e.length?n/2:e.length,i=0;i<a;++i){var o=e.charCodeAt(i);E[t>>1]=o,t+=2}return E[t>>1]=0,t-r}function I(e){return 2*e.length}function P(e,t){for(var n=0,r="";!(n>=t/4);){var a=w[e+4*n>>2];if(0==a)break;if(++n,a>=65536){var i=a-65536;r+=String.fromCharCode(55296|i>>10,56320|1023&i)}else r+=String.fromCharCode(a)}return r}function D(e,t,n){if(void 0===n&&(n=2147483647),n<4)return 0;for(var r=t,a=r+n-4,i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o>=55296&&o<=57343)o=65536+((1023&o)<<10)|1023&e.charCodeAt(++i);if(w[t>>2]=o,(t+=4)+4>a)break}return w[t>>2]=0,t-r}function N(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&++n,t+=4}return t}function x(e){b=e,r.HEAP8=_=new Int8Array(e),r.HEAP16=E=new Int16Array(e),r.HEAP32=w=new Int32Array(e),r.HEAPU8=y=new Uint8Array(e),r.HEAPU16=O=new Uint16Array(e),r.HEAPU32=C=new Uint32Array(e),r.HEAPF32=S=new Float32Array(e),r.HEAPF64=A=new Float64Array(e)}r.INITIAL_MEMORY;var R,M=[],L=[],B=[];var F=0,H=null,V=null;function U(e){r.onAbort&&r.onAbort(e),l(e+=""),h=!0,1,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw n(t),t}r.preloadedImages={},r.preloadedAudios={};var z,G;function W(e){return e.startsWith("data:application/octet-stream;base64,")}function q(e){try{if(e==z&&d)return new Uint8Array(d);if(o)return o(e);throw"both async and sync fetching of the wasm failed"}catch(e){U(e)}}function K(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?R.get(n)():R.get(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(r)}}function Y(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}W(z="libvpx.wasm")||(G=z,z=r.locateFile?r.locateFile(G,s):s+G);var Z=void 0;function Q(e){for(var t="",n=e;y[n];)t+=Z[y[n++]];return t}var J={},X={},$={};function ee(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=48&&t<=57?"_"+e:e}function te(e,t){return e=ee(e),function(){return t.apply(this,arguments)}}function ne(e,t){var n=te(t,(function(e){this.name=t,this.message=e;var n=new Error(e).stack;void 0!==n&&(this.stack=this.toString()+"\n"+n.replace(/^Error(:[^\n]*)?\n/,""))}));return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},n}var re=void 0;function ae(e){throw new re(e)}var ie=void 0;function oe(e){throw new ie(e)}function ce(e,t,n){function r(t){var r=n(t);r.length!==e.length&&oe("Mismatched type converter count");for(var a=0;a<e.length;++a)se(e[a],r[a])}e.forEach((function(e){$[e]=t}));var a=new Array(t.length),i=[],o=0;t.forEach((function(e,t){X.hasOwnProperty(e)?a[t]=X[e]:(i.push(e),J.hasOwnProperty(e)||(J[e]=[]),J[e].push((function(){a[t]=X[e],++o===i.length&&r(a)})))})),0===i.length&&r(a)}function se(e,t,n){if(n=n||{},!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var r=t.name;if(e||ae('type "'+r+'" must have a positive integer typeid pointer'),X.hasOwnProperty(e)){if(n.ignoreDuplicateRegistrations)return;ae("Cannot register type '"+r+"' twice")}if(X[e]=t,delete $[e],J.hasOwnProperty(e)){var a=J[e];delete J[e],a.forEach((function(e){e()}))}}function ue(e){if(!(this instanceof Oe))return!1;if(!(e instanceof Oe))return!1;for(var t=this.$$.ptrType.registeredClass,n=this.$$.ptr,r=e.$$.ptrType.registeredClass,a=e.$$.ptr;t.baseClass;)n=t.upcast(n),t=t.baseClass;for(;r.baseClass;)a=r.upcast(a),r=r.baseClass;return t===r&&n===a}function le(e){ae(e.$$.ptrType.registeredClass.name+" instance already deleted")}var de=!1;function fe(e){}function pe(e){e.count.value-=1,0===e.count.value&&function(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}(e)}function he(e){return"undefined"==typeof FinalizationGroup?(he=function(e){return e},e):(de=new FinalizationGroup((function(e){for(var t=e.next();!t.done;t=e.next()){var n=t.value;n.ptr?pe(n):console.warn("object already deleted: "+n.ptr)}})),fe=function(e){de.unregister(e.$$)},(he=function(e){return de.register(e,e.$$,e.$$),e})(e))}function me(){if(this.$$.ptr||le(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e,t=he(Object.create(Object.getPrototypeOf(this),{$$:{value:(e=this.$$,{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType})}}));return t.$$.count.value+=1,t.$$.deleteScheduled=!1,t}function ve(){this.$$.ptr||le(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ae("Object already scheduled for deletion"),fe(this),pe(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function ge(){return!this.$$.ptr}var be=void 0,_e=[];function ye(){for(;_e.length;){var e=_e.pop();e.$$.deleteScheduled=!1,e.delete()}}function Ee(){return this.$$.ptr||le(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ae("Object already scheduled for deletion"),_e.push(this),1===_e.length&&be&&be(ye),this.$$.deleteScheduled=!0,this}function Oe(){}var we={};function Ce(e,t,n){if(void 0===e[t].overloadTable){var r=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||ae("Function '"+n+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[r.argCount]=r}}function Se(e,t,n){r.hasOwnProperty(e)?((void 0===n||void 0!==r[e].overloadTable&&void 0!==r[e].overloadTable[n])&&ae("Cannot register public name '"+e+"' twice"),Ce(r,e,e),r.hasOwnProperty(n)&&ae("Cannot register multiple overloads of a function with the same number of arguments ("+n+")!"),r[e].overloadTable[n]=t):(r[e]=t,void 0!==n&&(r[e].numArguments=n))}function Ae(e,t,n,r,a,i,o,c){this.name=e,this.constructor=t,this.instancePrototype=n,this.rawDestructor=r,this.baseClass=a,this.getActualType=i,this.upcast=o,this.downcast=c,this.pureVirtualFunctions=[]}function ke(e,t,n){for(;t!==n;)t.upcast||ae("Expected null or instance of "+n.name+", got an instance of "+t.name),e=t.upcast(e),t=t.baseClass;return e}function je(e,t){if(null===t)return this.isReference&&ae("null is not a valid "+this.name),0;t.$$||ae('Cannot pass "'+it(t)+'" as a '+this.name),t.$$.ptr||ae("Cannot pass deleted object as a pointer of type "+this.name);var n=t.$$.ptrType.registeredClass;return ke(t.$$.ptr,n,this.registeredClass)}function Te(e,t){var n;if(null===t)return this.isReference&&ae("null is not a valid "+this.name),this.isSmartPointer?(n=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,n),n):0;t.$$||ae('Cannot pass "'+it(t)+'" as a '+this.name),t.$$.ptr||ae("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&ae("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);var r=t.$$.ptrType.registeredClass;if(n=ke(t.$$.ptr,r,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&ae("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?n=t.$$.smartPtr:ae("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:n=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)n=t.$$.smartPtr;else{var a=t.clone();n=this.rawShare(n,nt((function(){a.delete()}))),null!==e&&e.push(this.rawDestructor,n)}break;default:ae("Unsupporting sharing policy")}return n}function Ie(e,t){if(null===t)return this.isReference&&ae("null is not a valid "+this.name),0;t.$$||ae('Cannot pass "'+it(t)+'" as a '+this.name),t.$$.ptr||ae("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&ae("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name);var n=t.$$.ptrType.registeredClass;return ke(t.$$.ptr,n,this.registeredClass)}function Pe(e){return this.fromWireType(C[e>>2])}function De(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function Ne(e){this.rawDestructor&&this.rawDestructor(e)}function xe(e){null!==e&&e.delete()}function Re(){return Object.keys(Be).length}function Me(){var e=[];for(var t in Be)Be.hasOwnProperty(t)&&e.push(Be[t]);return e}function Le(e){be=e,_e.length&&be&&be(ye)}var Be={};function Fe(e,t){return t=function(e,t){for(void 0===t&&ae("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t}(e,t),Be[t]}function He(e,t){return t.ptrType&&t.ptr||oe("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!==!!t.smartPtr&&oe("Both smartPtrType and smartPtr must be specified"),t.count={value:1},he(Object.create(e,{$$:{value:t}}))}function Ve(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var n=Fe(this.registeredClass,t);if(void 0!==n){if(0===n.$$.count.value)return n.$$.ptr=t,n.$$.smartPtr=e,n.clone();var r=n.clone();return this.destructor(e),r}function a(){return this.isSmartPointer?He(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):He(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var i,o=this.registeredClass.getActualType(t),c=we[o];if(!c)return a.call(this);i=this.isConst?c.constPointerType:c.pointerType;var s=function e(t,n,r){if(n===r)return t;if(void 0===r.baseClass)return null;var a=e(t,n,r.baseClass);return null===a?null:r.downcast(a)}(t,this.registeredClass,i.registeredClass);return null===s?a.call(this):this.isSmartPointer?He(i.registeredClass.instancePrototype,{ptrType:i,ptr:s,smartPtrType:this,smartPtr:e}):He(i.registeredClass.instancePrototype,{ptrType:i,ptr:s})}function Ue(e,t,n,r,a,i,o,c,s,u,l){this.name=e,this.registeredClass=t,this.isReference=n,this.isConst=r,this.isSmartPointer=a,this.pointeeType=i,this.sharingPolicy=o,this.rawGetPointee=c,this.rawConstructor=s,this.rawShare=u,this.rawDestructor=l,a||void 0!==t.baseClass?this.toWireType=Te:r?(this.toWireType=je,this.destructorFunction=null):(this.toWireType=Ie,this.destructorFunction=null)}function ze(e,t,n){return e.includes("j")?function(e,t,n){var a=r["dynCall_"+e];return n&&n.length?a.apply(null,[t].concat(n)):a.call(null,t)}(e,t,n):R.get(t).apply(null,n)}function Ge(e,t){var n,r,a,i=(e=Q(e)).includes("j")?(n=e,r=t,a=[],function(){a.length=arguments.length;for(var e=0;e<arguments.length;e++)a[e]=arguments[e];return ze(n,r,a)}):R.get(t);return"function"!=typeof i&&ae("unknown function pointer with signature "+e+": "+t),i}var We=void 0;function qe(e){var t=ht(e),n=Q(t);return ft(t),n}function Ke(e,t){var n=[],r={};throw t.forEach((function e(t){r[t]||X[t]||($[t]?$[t].forEach(e):(n.push(t),r[t]=!0))})),new We(e+": "+n.map(qe).join([", "]))}function Ye(e,t){for(var n=[],r=0;r<e;r++)n.push(w[(t>>2)+r]);return n}function Ze(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function Qe(e,t,n,r,a){var i=t.length;i<2&&ae("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var o=null!==t[1]&&null!==n,c=!1,s=1;s<t.length;++s)if(null!==t[s]&&void 0===t[s].destructorFunction){c=!0;break}var u="void"!==t[0].name,l=i-2,d=new Array(l),f=[],p=[];return function(){var n;arguments.length!==l&&ae("function "+e+" called with "+arguments.length+" arguments, expected "+l+" args!"),p.length=0,f.length=o?2:1,f[0]=a,o&&(n=t[1].toWireType(p,this),f[1]=n);for(var i=0;i<l;++i)d[i]=t[i+2].toWireType(p,arguments[i]),f.push(d[i]);var s=r.apply(null,f);function h(e){if(c)Ze(p);else for(var r=o?1:2;r<t.length;r++){var a=1===r?n:d[r-2];null!==t[r].destructorFunction&&t[r].destructorFunction(a)}if(u)return t[0].fromWireType(e)}return h(s)}}var Je=[],Xe=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function $e(e){e>4&&0==--Xe[e].refcount&&(Xe[e]=void 0,Je.push(e))}function et(){for(var e=0,t=5;t<Xe.length;++t)void 0!==Xe[t]&&++e;return e}function tt(){for(var e=5;e<Xe.length;++e)if(void 0!==Xe[e])return Xe[e];return null}function nt(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=Je.length?Je.pop():Xe.length;return Xe[t]={refcount:1,value:e},t}}function rt(e,t,n){switch(t){case 0:return function(e){var t=n?_:y;return this.fromWireType(t[e])};case 1:return function(e){var t=n?E:O;return this.fromWireType(t[e>>1])};case 2:return function(e){var t=n?w:C;return this.fromWireType(t[e>>2])};default:throw new TypeError("Unknown integer type: "+e)}}function at(e,t){var n=X[e];return void 0===n&&ae(t+" has unknown type "+qe(e)),n}function it(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function ot(e,t){switch(t){case 2:return function(e){return this.fromWireType(S[e>>2])};case 3:return function(e){return this.fromWireType(A[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function ct(e,t,n){switch(t){case 0:return n?function(e){return _[e]}:function(e){return y[e]};case 1:return n?function(e){return E[e>>1]}:function(e){return O[e>>1]};case 2:return n?function(e){return w[e>>2]}:function(e){return C[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function st(e){try{return p.grow(e-b.byteLength+65535>>>16),x(p.buffer),1}catch(e){}}var ut={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=ut.buffers[e];0===t||10===t?((1===e?u:l)(v(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return ut.varargs+=4,w[ut.varargs-4>>2]},getStr:function(e){return g(e)},get64:function(e,t){return e}};!function(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);Z=e}(),re=r.BindingError=ne(Error,"BindingError"),ie=r.InternalError=ne(Error,"InternalError"),Oe.prototype.isAliasOf=ue,Oe.prototype.clone=me,Oe.prototype.delete=ve,Oe.prototype.isDeleted=ge,Oe.prototype.deleteLater=Ee,Ue.prototype.getPointee=De,Ue.prototype.destructor=Ne,Ue.prototype.argPackAdvance=8,Ue.prototype.readValueFromPointer=Pe,Ue.prototype.deleteObject=xe,Ue.prototype.fromWireType=Ve,r.getInheritedInstanceCount=Re,r.getLiveInheritedInstances=Me,r.flushPendingDeletes=ye,r.setDelayFunction=Le,We=r.UnboundTypeError=ne(Error,"UnboundTypeError"),r.count_emval_handles=et,r.get_first_emval=tt;var lt,dt={y:function(e,t,n,r,a){},H:function(e,t,n,r,a){var i=Y(n);se(e,{name:t=Q(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?r:a},argPackAdvance:8,readValueFromPointer:function(e){var r;if(1===n)r=_;else if(2===n)r=E;else{if(4!==n)throw new TypeError("Unknown boolean type size: "+t);r=w}return this.fromWireType(r[e>>i])},destructorFunction:null})},t:function(e,t,n,a,i,o,c,s,u,l,d,f,p){d=Q(d),o=Ge(i,o),s&&(s=Ge(c,s)),l&&(l=Ge(u,l)),p=Ge(f,p);var h=ee(d);Se(h,(function(){Ke("Cannot construct "+d+" due to unbound types",[a])})),ce([e,t,n],a?[a]:[],(function(t){var n,i;t=t[0],i=a?(n=t.registeredClass).instancePrototype:Oe.prototype;var c=te(h,(function(){if(Object.getPrototypeOf(this)!==u)throw new re("Use 'new' to construct "+d);if(void 0===f.constructor_body)throw new re(d+" has no accessible constructor");var e=f.constructor_body[arguments.length];if(void 0===e)throw new re("Tried to invoke ctor of "+d+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(f.constructor_body).toString()+") parameters instead!");return e.apply(this,arguments)})),u=Object.create(i,{constructor:{value:c}});c.prototype=u;var f=new Ae(d,c,u,p,n,o,s,l),m=new Ue(d,f,!0,!1,!1),v=new Ue(d+"*",f,!1,!1,!1),g=new Ue(d+" const*",f,!1,!0,!1);return we[e]={pointerType:v,constPointerType:g},function(e,t,n){r.hasOwnProperty(e)||oe("Replacing nonexistant public symbol"),void 0!==r[e].overloadTable&&void 0!==n?r[e].overloadTable[n]=t:(r[e]=t,r[e].argCount=n)}(h,c),[m,v,g]}))},p:function(e,t,n,r,a,i){var o;t>0||U("Assertion failed: "+o);var c=Ye(t,n);a=Ge(r,a),ce([],[e],(function(e){var n="constructor "+(e=e[0]).name;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new re("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+e.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return e.registeredClass.constructor_body[t-1]=function(){Ke("Cannot construct "+e.name+" due to unbound types",c)},ce([],c,(function(r){return r.splice(1,0,null),e.registeredClass.constructor_body[t-1]=Qe(n,r,null,a,i),[]})),[]}))},e:function(e,t,n,r,a,i,o,c){var s=Ye(n,r);t=Q(t),i=Ge(a,i),ce([],[e],(function(e){var r=(e=e[0]).name+"."+t;function a(){Ke("Cannot call "+r+" due to unbound types",s)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]),c&&e.registeredClass.pureVirtualFunctions.push(t);var u=e.registeredClass.instancePrototype,l=u[t];return void 0===l||void 0===l.overloadTable&&l.className!==e.name&&l.argCount===n-2?(a.argCount=n-2,a.className=e.name,u[t]=a):(Ce(u,t,r),u[t].overloadTable[n-2]=a),ce([],s,(function(a){var c=Qe(r,a,e,i,o);return void 0===u[t].overloadTable?(c.argCount=n-2,u[t]=c):u[t].overloadTable[n-2]=c,[]})),[]}))},G:function(e,t){se(e,{name:t=Q(t),fromWireType:function(e){var t=Xe[e].value;return $e(e),t},toWireType:function(e,t){return nt(t)},argPackAdvance:8,readValueFromPointer:Pe,destructorFunction:null})},L:function(e,t,n,r){var a=Y(n);function i(){}t=Q(t),i.values={},se(e,{name:t,constructor:i,fromWireType:function(e){return this.constructor.values[e]},toWireType:function(e,t){return t.value},argPackAdvance:8,readValueFromPointer:rt(t,a,r),destructorFunction:null}),Se(t,i)},x:function(e,t,n){var r=at(e,"enum");t=Q(t);var a=r.constructor,i=Object.create(r.constructor.prototype,{value:{value:n},constructor:{value:te(r.name+"_"+t,(function(){}))}});a.values[n]=i,a[t]=i},r:function(e,t,n){var r=Y(n);se(e,{name:t=Q(t),fromWireType:function(e){return e},toWireType:function(e,t){if("number"!=typeof t&&"boolean"!=typeof t)throw new TypeError('Cannot convert "'+it(t)+'" to '+this.name);return t},argPackAdvance:8,readValueFromPointer:ot(t,r),destructorFunction:null})},h:function(e,t,n,r,a){t=Q(t),-1===a&&(a=4294967295);var i=Y(n),o=function(e){return e};if(0===r){var c=32-8*n;o=function(e){return e<<c>>>c}}var s=t.includes("unsigned");se(e,{name:t,fromWireType:o,toWireType:function(e,n){if("number"!=typeof n&&"boolean"!=typeof n)throw new TypeError('Cannot convert "'+it(n)+'" to '+this.name);if(n<r||n>a)throw new TypeError('Passing a number "'+it(n)+'" from JS side to C/C++ side to an argument of type "'+t+'", which is outside the valid range ['+r+", "+a+"]!");return s?n>>>0:0|n},argPackAdvance:8,readValueFromPointer:ct(t,i,0!==r),destructorFunction:null})},g:function(e,t,n){var r=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];function a(e){var t=C,n=t[e>>=2],a=t[e+1];return new r(b,a,n)}se(e,{name:n=Q(n),fromWireType:a,argPackAdvance:8,readValueFromPointer:a},{ignoreDuplicateRegistrations:!0})},s:function(e,t){var n="std::string"===(t=Q(t));se(e,{name:t,fromWireType:function(e){var t,r=C[e>>2];if(n)for(var a=e+4,i=0;i<=r;++i){var o=e+4+i;if(i==r||0==y[o]){var c=g(a,o-a);void 0===t?t=c:(t+=String.fromCharCode(0),t+=c),a=o+1}}else{var s=new Array(r);for(i=0;i<r;++i)s[i]=String.fromCharCode(y[e+4+i]);t=s.join("")}return ft(e),t},toWireType:function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var r="string"==typeof t;r||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||ae("Cannot pass non-string to std::string");var a=(n&&r?function(){return function(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}(t)}:function(){return t.length})(),i=pt(4+a+1);if(C[i>>2]=a,n&&r)(function(e,t,n,r){if(!(r>0))return 0;for(var a=n,i=n+r-1,o=0;o<e.length;++o){var c=e.charCodeAt(o);if(c>=55296&&c<=57343&&(c=65536+((1023&c)<<10)|1023&e.charCodeAt(++o)),c<=127){if(n>=i)break;t[n++]=c}else if(c<=2047){if(n+1>=i)break;t[n++]=192|c>>6,t[n++]=128|63&c}else if(c<=65535){if(n+2>=i)break;t[n++]=224|c>>12,t[n++]=128|c>>6&63,t[n++]=128|63&c}else{if(n+3>=i)break;t[n++]=240|c>>18,t[n++]=128|c>>12&63,t[n++]=128|c>>6&63,t[n++]=128|63&c}}t[n]=0})(t,y,i+4,a+1);else if(r)for(var o=0;o<a;++o){var c=t.charCodeAt(o);c>255&&(ft(i),ae("String has UTF-16 code units that do not fit in 8 bits")),y[i+4+o]=c}else for(o=0;o<a;++o)y[i+4+o]=t[o];return null!==e&&e.push(ft,i),i},argPackAdvance:8,readValueFromPointer:Pe,destructorFunction:function(e){ft(e)}})},m:function(e,t,n){var r,a,i,o,c;n=Q(n),2===t?(r=j,a=T,o=I,i=function(){return O},c=1):4===t&&(r=P,a=D,o=N,i=function(){return C},c=2),se(e,{name:n,fromWireType:function(e){for(var n,a=C[e>>2],o=i(),s=e+4,u=0;u<=a;++u){var l=e+4+u*t;if(u==a||0==o[l>>c]){var d=r(s,l-s);void 0===n?n=d:(n+=String.fromCharCode(0),n+=d),s=l+t}}return ft(e),n},toWireType:function(e,r){"string"!=typeof r&&ae("Cannot pass non-string to C++ string type "+n);var i=o(r),s=pt(4+i+t);return C[s>>2]=i>>c,a(r,s+4,i+t),null!==e&&e.push(ft,s),s},argPackAdvance:8,readValueFromPointer:Pe,destructorFunction:function(e){ft(e)}})},I:function(e,t){se(e,{isVoid:!0,name:t=Q(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})},F:function(){throw"longjmp"},k:$e,l:function(e){e>4&&(Xe[e].refcount+=1)},j:function(e,t){return nt((e=at(e,"_emval_take_value")).readValueFromPointer(t))},E:function(){U()},C:function(e,t,n){y.copyWithin(e,t,t+n)},D:function(e){var t,n,r=y.length;if((e>>>=0)>2147483648)return!1;for(var a=1;a<=4;a*=2){var i=r*(1+.2/a);if(i=Math.min(i,e+100663296),st(Math.min(2147483648,((t=Math.max(e,i))%(n=65536)>0&&(t+=n-t%n),t))))return!0}return!1},q:function(e,t,n,r){for(var a=0,i=0;i<n;i++){for(var o=w[t+8*i>>2],c=w[t+(8*i+4)>>2],s=0;s<c;s++)ut.printChar(e,y[o+s]);a+=c}return w[r>>2]=a,0},a:function(){return f},f:function(e){var t=Date.now();return w[e>>2]=t/1e3|0,w[e+4>>2]=t%1e3*1e3|0,0},d:function(e,t,n){var r=mt();try{return R.get(e)(t,n)}catch(e){if(vt(r),e!==e+0&&"longjmp"!==e)throw e;gt(1,0)}},n:function(e,t,n,r){var a=mt();try{return R.get(e)(t,n,r)}catch(e){if(vt(a),e!==e+0&&"longjmp"!==e)throw e;gt(1,0)}},o:function(e,t,n,r,a){var i=mt();try{return R.get(e)(t,n,r,a)}catch(e){if(vt(i),e!==e+0&&"longjmp"!==e)throw e;gt(1,0)}},u:function(e,t,n,r,a,i){var o=mt();try{return R.get(e)(t,n,r,a,i)}catch(e){if(vt(o),e!==e+0&&"longjmp"!==e)throw e;gt(1,0)}},K:function(e,t,n,r,a,i,o,c,s){var u=mt();try{return R.get(e)(t,n,r,a,i,o,c,s)}catch(e){if(vt(u),e!==e+0&&"longjmp"!==e)throw e;gt(1,0)}},B:function(e,t,n,r,a,i,o,c){var s=mt();try{return bt(e,t,n,r,a,i,o,c)}catch(e){if(vt(s),e!==e+0&&"longjmp"!==e)throw e;gt(1,0)}},z:function(e,t,n,r){var a=mt();try{return yt(e,t,n,r)}catch(e){if(vt(a),e!==e+0&&"longjmp"!==e)throw e;gt(1,0)}},i:function(e,t){var n=mt();try{R.get(e)(t)}catch(e){if(vt(n),e!==e+0&&"longjmp"!==e)throw e;gt(1,0)}},w:function(e,t,n){var r=mt();try{R.get(e)(t,n)}catch(e){if(vt(r),e!==e+0&&"longjmp"!==e)throw e;gt(1,0)}},c:function(e,t,n,r,a){var i=mt();try{R.get(e)(t,n,r,a)}catch(e){if(vt(i),e!==e+0&&"longjmp"!==e)throw e;gt(1,0)}},J:function(e,t,n,r,a,i,o){var c=mt();try{R.get(e)(t,n,r,a,i,o)}catch(e){if(vt(c),e!==e+0&&"longjmp"!==e)throw e;gt(1,0)}},v:function(e,t,n,r,a,i,o,c,s){var u=mt();try{R.get(e)(t,n,r,a,i,o,c,s)}catch(e){if(vt(u),e!==e+0&&"longjmp"!==e)throw e;gt(1,0)}},A:function(e,t,n,r,a,i,o,c,s,u){var l=mt();try{_t(e,t,n,r,a,i,o,c,s,u)}catch(e){if(vt(l),e!==e+0&&"longjmp"!==e)throw e;gt(1,0)}},b:function(e){f=e}},ft=(function(){var e={a:dt};function t(e,t){var n,a=e.exports;r.asm=a,x((p=r.asm.M).buffer),R=r.asm.Q,n=r.asm.N,L.unshift(n),function(e){if(F--,r.monitorRunDependencies&&r.monitorRunDependencies(F),0==F&&(null!==H&&(clearInterval(H),H=null),V)){var t=V;V=null,t()}}()}function a(e){t(e.instance)}function i(t){return(d||"function"!=typeof fetch?Promise.resolve().then((function(){return q(z)})):fetch(z,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+z+"'";return e.arrayBuffer()})).catch((function(){return q(z)}))).then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){l("failed to asynchronously prepare wasm: "+e),U(e)}))}if(F++,r.monitorRunDependencies&&r.monitorRunDependencies(F),r.instantiateWasm)try{return r.instantiateWasm(e,t)}catch(e){return l("Module.instantiateWasm callback failed with error: "+e),!1}(d||"function"!=typeof WebAssembly.instantiateStreaming||W(z)||"function"!=typeof fetch?i(a):fetch(z,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(a,(function(e){return l("wasm streaming compile failed: "+e),l("falling back to ArrayBuffer instantiation"),i(a)}))}))).catch(n)}(),r.___wasm_call_ctors=function(){return(r.___wasm_call_ctors=r.asm.N).apply(null,arguments)},r._free=function(){return(ft=r._free=r.asm.O).apply(null,arguments)}),pt=r._malloc=function(){return(pt=r._malloc=r.asm.P).apply(null,arguments)},ht=r.___getTypeName=function(){return(ht=r.___getTypeName=r.asm.R).apply(null,arguments)},mt=(r.___embind_register_native_and_builtin_types=function(){return(r.___embind_register_native_and_builtin_types=r.asm.S).apply(null,arguments)},r.stackSave=function(){return(mt=r.stackSave=r.asm.T).apply(null,arguments)}),vt=r.stackRestore=function(){return(vt=r.stackRestore=r.asm.U).apply(null,arguments)},gt=r._setThrew=function(){return(gt=r._setThrew=r.asm.V).apply(null,arguments)},bt=r.dynCall_iiiijj=function(){return(bt=r.dynCall_iiiijj=r.asm.W).apply(null,arguments)},_t=(r.dynCall_iiijiii=function(){return(r.dynCall_iiijiii=r.asm.X).apply(null,arguments)},r.dynCall_vijjjid=function(){return(_t=r.dynCall_vijjjid=r.asm.Y).apply(null,arguments)}),yt=r.dynCall_iij=function(){return(yt=r.dynCall_iij=r.asm.Z).apply(null,arguments)};r.dynCall_jiji=function(){return(r.dynCall_jiji=r.asm._).apply(null,arguments)};function Et(e){function n(){lt||(lt=!0,r.calledRun=!0,h||(!0,K(L),t(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),function(){if(r.postRun)for("function"==typeof r.postRun&&(r.postRun=[r.postRun]);r.postRun.length;)e=r.postRun.shift(),B.unshift(e);var e;K(B)}()))}e=e||c,F>0||(!function(){if(r.preRun)for("function"==typeof r.preRun&&(r.preRun=[r.preRun]);r.preRun.length;)e=r.preRun.shift(),M.unshift(e);var e;K(M)}(),F>0||(r.setStatus?(r.setStatus("Running..."),setTimeout((function(){setTimeout((function(){r.setStatus("")}),1),n()}),1)):n()))}if(V=function e(){lt||Et(),lt||(V=e)},r.run=Et,r.preInit)for("function"==typeof r.preInit&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return Et(),e.ready}}();e.exports=r,r.getUrl=function(e){return"https://st.mycdn.me/static/libvpx/2-0-9/"+e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(9),a=Object(r.createStore)({loading:!1,comment:"",commentLength:0,isCommentValid:!0})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i}));var r=400,a=function(e){return e.trim().length<=r},i=function(e){var t=e;return t.endsWith("\n")&&(t=t.slice(0,-1)),0===t.trim().length&&(t=""),t.endsWith("  ")&&(t=t.trim()+" "),t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(9),a=Object(r.createStore)({loading:!0,broadcast:null,creator:"",listeners:"",speakers:""})},function(e,t,n){"use strict";var r=n(16);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}"function"==typeof Symbol&&null!=Symbol.iterator&&Symbol.iterator,"function"==typeof Symbol&&null!=Symbol.asyncIterator&&Symbol.asyncIterator;var i="function"==typeof Symbol&&null!=Symbol.toStringTag?Symbol.toStringTag:"@@toStringTag";function o(e,t){for(var n,r=/\r\n|[\n\r]/g,a=1,i=t+1;(n=r.exec(e.body))&&n.index<t;)a+=1,i=t+1-(n.index+n[0].length);return{line:a,column:i}}function c(e){return s(e.source,o(e.source,e.start))}function s(e,t){var n=e.locationOffset.column-1,r=l(n)+e.body,a=t.line-1,i=e.locationOffset.line-1,o=t.line+i,c=1===t.line?n:0,s=t.column+c,d="".concat(e.name,":").concat(o,":").concat(s,"\n"),f=r.split(/\r\n|[\n\r]/g),p=f[a];if(p.length>120){for(var h=Math.floor(s/80),m=s%80,v=[],g=0;g<p.length;g+=80)v.push(p.slice(g,g+80));return d+u([["".concat(o),v[0]]].concat(v.slice(1,h+1).map((function(e){return["",e]})),[[" ",l(m-1)+"^"],["",v[h+1]]]))}return d+u([["".concat(o-1),f[a-1]],["".concat(o),p],["",l(s-1)+"^"],["".concat(o+1),f[a+1]]])}function u(e){var t=e.filter((function(e){e[0];return void 0!==e[1]})),n=Math.max.apply(Math,t.map((function(e){return e[0].length})));return t.map((function(e){var t,r=e[0],a=e[1];return l(n-(t=r).length)+t+(a?" | "+a:" |")})).join("\n")}function l(e){return Array(e+1).join(" ")}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){var t="function"==typeof Map?new Map:void 0;return(m=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return v(e,arguments,_(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),b(r,e)})(e)}function v(e,t,n){return(v=g()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&b(a,n.prototype),a}).apply(null,arguments)}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(m,e);var t,n,r,u,l,d=(t=m,n=g(),function(){var e,r=_(t);if(n){var a=_(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return p(this,e)});function m(e,t,n,r,i,c,s){var u,l,f,v,g;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),g=d.call(this,e);var b,_=Array.isArray(t)?0!==t.length?t:void 0:t?[t]:void 0,y=n;!y&&_&&(y=null===(b=_[0].loc)||void 0===b?void 0:b.source);var E,O=r;!O&&_&&(O=_.reduce((function(e,t){return t.loc&&e.push(t.loc.start),e}),[])),O&&0===O.length&&(O=void 0),r&&n?E=r.map((function(e){return o(n,e)})):_&&(E=_.reduce((function(e,t){return t.loc&&e.push(o(t.loc.source,t.loc.start)),e}),[]));var w,C=s;if(null==C&&null!=c){var S=c.extensions;"object"==a(w=S)&&null!==w&&(C=S)}return Object.defineProperties(h(g),{name:{value:"GraphQLError"},message:{value:e,enumerable:!0,writable:!0},locations:{value:null!==(u=E)&&void 0!==u?u:void 0,enumerable:null!=E},path:{value:null!=i?i:void 0,enumerable:null!=i},nodes:{value:null!=_?_:void 0},source:{value:null!==(l=y)&&void 0!==l?l:void 0},positions:{value:null!==(f=O)&&void 0!==f?f:void 0},originalError:{value:c},extensions:{value:null!==(v=C)&&void 0!==v?v:void 0,enumerable:null!=C}}),(null==c?void 0:c.stack)?(Object.defineProperty(h(g),"stack",{value:c.stack,writable:!0,configurable:!0}),p(g)):(Error.captureStackTrace?Error.captureStackTrace(h(g),m):Object.defineProperty(h(g),"stack",{value:Error().stack,writable:!0,configurable:!0}),g)}return r=m,(u=[{key:"toString",value:function(){return function(e){var t=e.message;if(e.nodes)for(var n=0,r=e.nodes;n<r.length;n++){var a=r[n];a.loc&&(t+="\n\n"+c(a.loc))}else if(e.source&&e.locations)for(var i=0,o=e.locations;i<o.length;i++){var u=o[i];t+="\n\n"+s(e.source,u)}return t}(this)}},{key:i,get:function(){return"Object"}}])&&f(r.prototype,u),l&&f(r,l),m}(m(Error));function E(e,t,n){return new y("Syntax Error: ".concat(n),void 0,e,[t])}var O=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),w=n(78),C=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"}),S=n(392);function A(e,t){if(!Boolean(e))throw new Error(t)}var k=function(e,t){return e instanceof t};function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var T=function(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GraphQL request",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{line:1,column:1};"string"==typeof e||A(0,"Body must be a string. Received: ".concat(Object(S.a)(e),".")),this.body=e,this.name=t,this.locationOffset=n,this.locationOffset.line>0||A(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||A(0,"column in locationOffset is 1-indexed and must be positive.")}var t,n,r;return t=e,(n=[{key:i,get:function(){return"Source"}}])&&j(t.prototype,n),r&&j(t,r),e}();var I=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"}),P=n(393),D=function(){function e(e){var t=new w.b(C.SOF,0,0,0,0,null);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}var t=e.prototype;return t.advance=function(){return this.lastToken=this.token,this.token=this.lookahead()},t.lookahead=function(){var e=this.token;if(e.kind!==C.EOF)do{var t;e=null!==(t=e.next)&&void 0!==t?t:e.next=x(this,e)}while(e.kind===C.COMMENT);return e},e}();function N(e){return isNaN(e)?C.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function x(e,t){for(var n=e.source,r=n.body,a=r.length,i=t.end;i<a;){var o=r.charCodeAt(i),c=e.line,s=1+i-e.lineStart;switch(o){case 65279:case 9:case 32:case 44:++i;continue;case 10:++i,++e.line,e.lineStart=i;continue;case 13:10===r.charCodeAt(i+1)?i+=2:++i,++e.line,e.lineStart=i;continue;case 33:return new w.b(C.BANG,i,i+1,c,s,t);case 35:return M(n,i,c,s,t);case 36:return new w.b(C.DOLLAR,i,i+1,c,s,t);case 38:return new w.b(C.AMP,i,i+1,c,s,t);case 40:return new w.b(C.PAREN_L,i,i+1,c,s,t);case 41:return new w.b(C.PAREN_R,i,i+1,c,s,t);case 46:if(46===r.charCodeAt(i+1)&&46===r.charCodeAt(i+2))return new w.b(C.SPREAD,i,i+3,c,s,t);break;case 58:return new w.b(C.COLON,i,i+1,c,s,t);case 61:return new w.b(C.EQUALS,i,i+1,c,s,t);case 64:return new w.b(C.AT,i,i+1,c,s,t);case 91:return new w.b(C.BRACKET_L,i,i+1,c,s,t);case 93:return new w.b(C.BRACKET_R,i,i+1,c,s,t);case 123:return new w.b(C.BRACE_L,i,i+1,c,s,t);case 124:return new w.b(C.PIPE,i,i+1,c,s,t);case 125:return new w.b(C.BRACE_R,i,i+1,c,s,t);case 34:return 34===r.charCodeAt(i+1)&&34===r.charCodeAt(i+2)?H(n,i,c,s,t,e):F(n,i,c,s,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return L(n,i,o,c,s,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return U(n,i,c,s,t)}throw E(n,i,R(o))}var u=e.line,l=1+i-e.lineStart;return new w.b(C.EOF,a,a,u,l,t)}function R(e){return e<32&&9!==e&&10!==e&&13!==e?"Cannot contain the invalid character ".concat(N(e),"."):39===e?"Unexpected single quote character ('), did you mean to use a double quote (\")?":"Cannot parse the unexpected character ".concat(N(e),".")}function M(e,t,n,r,a){var i,o=e.body,c=t;do{i=o.charCodeAt(++c)}while(!isNaN(i)&&(i>31||9===i));return new w.b(C.COMMENT,t,c,n,r,a,o.slice(t+1,c))}function L(e,t,n,r,a,i){var o=e.body,c=n,s=t,u=!1;if(45===c&&(c=o.charCodeAt(++s)),48===c){if((c=o.charCodeAt(++s))>=48&&c<=57)throw E(e,s,"Invalid number, unexpected digit after 0: ".concat(N(c),"."))}else s=B(e,s,c),c=o.charCodeAt(s);if(46===c&&(u=!0,c=o.charCodeAt(++s),s=B(e,s,c),c=o.charCodeAt(s)),69!==c&&101!==c||(u=!0,43!==(c=o.charCodeAt(++s))&&45!==c||(c=o.charCodeAt(++s)),s=B(e,s,c),c=o.charCodeAt(s)),46===c||function(e){return 95===e||e>=65&&e<=90||e>=97&&e<=122}(c))throw E(e,s,"Invalid number, expected digit but got: ".concat(N(c),"."));return new w.b(u?C.FLOAT:C.INT,t,s,r,a,i,o.slice(t,s))}function B(e,t,n){var r=e.body,a=t,i=n;if(i>=48&&i<=57){do{i=r.charCodeAt(++a)}while(i>=48&&i<=57);return a}throw E(e,a,"Invalid number, expected digit but got: ".concat(N(i),"."))}function F(e,t,n,r,a){for(var i,o,c,s,u=e.body,l=t+1,d=l,f=0,p="";l<u.length&&!isNaN(f=u.charCodeAt(l))&&10!==f&&13!==f;){if(34===f)return p+=u.slice(d,l),new w.b(C.STRING,t,l+1,n,r,a,p);if(f<32&&9!==f)throw E(e,l,"Invalid character within String: ".concat(N(f),"."));if(++l,92===f){switch(p+=u.slice(d,l-1),f=u.charCodeAt(l)){case 34:p+='"';break;case 47:p+="/";break;case 92:p+="\\";break;case 98:p+="\b";break;case 102:p+="\f";break;case 110:p+="\n";break;case 114:p+="\r";break;case 116:p+="\t";break;case 117:var h=(i=u.charCodeAt(l+1),o=u.charCodeAt(l+2),c=u.charCodeAt(l+3),s=u.charCodeAt(l+4),V(i)<<12|V(o)<<8|V(c)<<4|V(s));if(h<0){var m=u.slice(l+1,l+5);throw E(e,l,"Invalid character escape sequence: \\u".concat(m,"."))}p+=String.fromCharCode(h),l+=4;break;default:throw E(e,l,"Invalid character escape sequence: \\".concat(String.fromCharCode(f),"."))}d=++l}}throw E(e,l,"Unterminated string.")}function H(e,t,n,r,a,i){for(var o=e.body,c=t+3,s=c,u=0,l="";c<o.length&&!isNaN(u=o.charCodeAt(c));){if(34===u&&34===o.charCodeAt(c+1)&&34===o.charCodeAt(c+2))return l+=o.slice(s,c),new w.b(C.BLOCK_STRING,t,c+3,n,r,a,Object(P.a)(l));if(u<32&&9!==u&&10!==u&&13!==u)throw E(e,c,"Invalid character within String: ".concat(N(u),"."));10===u?(++c,++i.line,i.lineStart=c):13===u?(10===o.charCodeAt(c+1)?c+=2:++c,++i.line,i.lineStart=c):92===u&&34===o.charCodeAt(c+1)&&34===o.charCodeAt(c+2)&&34===o.charCodeAt(c+3)?(l+=o.slice(s,c)+'"""',s=c+=4):++c}throw E(e,c,"Unterminated string.")}function V(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}function U(e,t,n,r,a){for(var i=e.body,o=i.length,c=t+1,s=0;c!==o&&!isNaN(s=i.charCodeAt(c))&&(95===s||s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122);)++c;return new w.b(C.NAME,t,c,n,r,a,i.slice(t,c))}var z=function(){function e(e,t){var n=function(e){return k(e,T)}(e)?e:new T(e);this._lexer=new D(n),this._options=t}var t=e.prototype;return t.parseName=function(){var e=this.expectToken(C.NAME);return{kind:O.NAME,value:e.value,loc:this.loc(e)}},t.parseDocument=function(){var e=this._lexer.token;return{kind:O.DOCUMENT,definitions:this.many(C.SOF,this.parseDefinition,C.EOF),loc:this.loc(e)}},t.parseDefinition=function(){if(this.peek(C.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else{if(this.peek(C.BRACE_L))return this.parseOperationDefinition();if(this.peekDescription())return this.parseTypeSystemDefinition()}throw this.unexpected()},t.parseOperationDefinition=function(){var e=this._lexer.token;if(this.peek(C.BRACE_L))return{kind:O.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(e)};var t,n=this.parseOperationType();return this.peek(C.NAME)&&(t=this.parseName()),{kind:O.OPERATION_DEFINITION,operation:n,name:t,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(e)}},t.parseOperationType=function(){var e=this.expectToken(C.NAME);switch(e.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(e)},t.parseVariableDefinitions=function(){return this.optionalMany(C.PAREN_L,this.parseVariableDefinition,C.PAREN_R)},t.parseVariableDefinition=function(){var e=this._lexer.token;return{kind:O.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(C.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(C.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(e)}},t.parseVariable=function(){var e=this._lexer.token;return this.expectToken(C.DOLLAR),{kind:O.VARIABLE,name:this.parseName(),loc:this.loc(e)}},t.parseSelectionSet=function(){var e=this._lexer.token;return{kind:O.SELECTION_SET,selections:this.many(C.BRACE_L,this.parseSelection,C.BRACE_R),loc:this.loc(e)}},t.parseSelection=function(){return this.peek(C.SPREAD)?this.parseFragment():this.parseField()},t.parseField=function(){var e,t,n=this._lexer.token,r=this.parseName();return this.expectOptionalToken(C.COLON)?(e=r,t=this.parseName()):t=r,{kind:O.FIELD,alias:e,name:t,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(C.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(n)}},t.parseArguments=function(e){var t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(C.PAREN_L,t,C.PAREN_R)},t.parseArgument=function(){var e=this._lexer.token,t=this.parseName();return this.expectToken(C.COLON),{kind:O.ARGUMENT,name:t,value:this.parseValueLiteral(!1),loc:this.loc(e)}},t.parseConstArgument=function(){var e=this._lexer.token;return{kind:O.ARGUMENT,name:this.parseName(),value:(this.expectToken(C.COLON),this.parseValueLiteral(!0)),loc:this.loc(e)}},t.parseFragment=function(){var e=this._lexer.token;this.expectToken(C.SPREAD);var t=this.expectOptionalKeyword("on");return!t&&this.peek(C.NAME)?{kind:O.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(e)}:{kind:O.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(e)}},t.parseFragmentDefinition=function(){var e,t=this._lexer.token;return this.expectKeyword("fragment"),!0===(null===(e=this._options)||void 0===e?void 0:e.experimentalFragmentVariables)?{kind:O.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}:{kind:O.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},t.parseFragmentName=function(){if("on"===this._lexer.token.value)throw this.unexpected();return this.parseName()},t.parseValueLiteral=function(e){var t=this._lexer.token;switch(t.kind){case C.BRACKET_L:return this.parseList(e);case C.BRACE_L:return this.parseObject(e);case C.INT:return this._lexer.advance(),{kind:O.INT,value:t.value,loc:this.loc(t)};case C.FLOAT:return this._lexer.advance(),{kind:O.FLOAT,value:t.value,loc:this.loc(t)};case C.STRING:case C.BLOCK_STRING:return this.parseStringLiteral();case C.NAME:switch(this._lexer.advance(),t.value){case"true":return{kind:O.BOOLEAN,value:!0,loc:this.loc(t)};case"false":return{kind:O.BOOLEAN,value:!1,loc:this.loc(t)};case"null":return{kind:O.NULL,loc:this.loc(t)};default:return{kind:O.ENUM,value:t.value,loc:this.loc(t)}}case C.DOLLAR:if(!e)return this.parseVariable()}throw this.unexpected()},t.parseStringLiteral=function(){var e=this._lexer.token;return this._lexer.advance(),{kind:O.STRING,value:e.value,block:e.kind===C.BLOCK_STRING,loc:this.loc(e)}},t.parseList=function(e){var t=this,n=this._lexer.token;return{kind:O.LIST,values:this.any(C.BRACKET_L,(function(){return t.parseValueLiteral(e)}),C.BRACKET_R),loc:this.loc(n)}},t.parseObject=function(e){var t=this,n=this._lexer.token;return{kind:O.OBJECT,fields:this.any(C.BRACE_L,(function(){return t.parseObjectField(e)}),C.BRACE_R),loc:this.loc(n)}},t.parseObjectField=function(e){var t=this._lexer.token,n=this.parseName();return this.expectToken(C.COLON),{kind:O.OBJECT_FIELD,name:n,value:this.parseValueLiteral(e),loc:this.loc(t)}},t.parseDirectives=function(e){for(var t=[];this.peek(C.AT);)t.push(this.parseDirective(e));return t},t.parseDirective=function(e){var t=this._lexer.token;return this.expectToken(C.AT),{kind:O.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e),loc:this.loc(t)}},t.parseTypeReference=function(){var e,t=this._lexer.token;return this.expectOptionalToken(C.BRACKET_L)?(e=this.parseTypeReference(),this.expectToken(C.BRACKET_R),e={kind:O.LIST_TYPE,type:e,loc:this.loc(t)}):e=this.parseNamedType(),this.expectOptionalToken(C.BANG)?{kind:O.NON_NULL_TYPE,type:e,loc:this.loc(t)}:e},t.parseNamedType=function(){var e=this._lexer.token;return{kind:O.NAMED_TYPE,name:this.parseName(),loc:this.loc(e)}},t.parseTypeSystemDefinition=function(){var e=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(e.kind===C.NAME)switch(e.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(e)},t.peekDescription=function(){return this.peek(C.STRING)||this.peek(C.BLOCK_STRING)},t.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},t.parseSchemaDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");var n=this.parseDirectives(!0),r=this.many(C.BRACE_L,this.parseOperationTypeDefinition,C.BRACE_R);return{kind:O.SCHEMA_DEFINITION,description:t,directives:n,operationTypes:r,loc:this.loc(e)}},t.parseOperationTypeDefinition=function(){var e=this._lexer.token,t=this.parseOperationType();this.expectToken(C.COLON);var n=this.parseNamedType();return{kind:O.OPERATION_TYPE_DEFINITION,operation:t,type:n,loc:this.loc(e)}},t.parseScalarTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");var n=this.parseName(),r=this.parseDirectives(!0);return{kind:O.SCALAR_TYPE_DEFINITION,description:t,name:n,directives:r,loc:this.loc(e)}},t.parseObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");var n=this.parseName(),r=this.parseImplementsInterfaces(),a=this.parseDirectives(!0),i=this.parseFieldsDefinition();return{kind:O.OBJECT_TYPE_DEFINITION,description:t,name:n,interfaces:r,directives:a,fields:i,loc:this.loc(e)}},t.parseImplementsInterfaces=function(){var e;if(!this.expectOptionalKeyword("implements"))return[];if(!0===(null===(e=this._options)||void 0===e?void 0:e.allowLegacySDLImplementsInterfaces)){var t=[];this.expectOptionalToken(C.AMP);do{t.push(this.parseNamedType())}while(this.expectOptionalToken(C.AMP)||this.peek(C.NAME));return t}return this.delimitedMany(C.AMP,this.parseNamedType)},t.parseFieldsDefinition=function(){var e;return!0===(null===(e=this._options)||void 0===e?void 0:e.allowLegacySDLEmptyFields)&&this.peek(C.BRACE_L)&&this._lexer.lookahead().kind===C.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(C.BRACE_L,this.parseFieldDefinition,C.BRACE_R)},t.parseFieldDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),r=this.parseArgumentDefs();this.expectToken(C.COLON);var a=this.parseTypeReference(),i=this.parseDirectives(!0);return{kind:O.FIELD_DEFINITION,description:t,name:n,arguments:r,type:a,directives:i,loc:this.loc(e)}},t.parseArgumentDefs=function(){return this.optionalMany(C.PAREN_L,this.parseInputValueDef,C.PAREN_R)},t.parseInputValueDef=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName();this.expectToken(C.COLON);var r,a=this.parseTypeReference();this.expectOptionalToken(C.EQUALS)&&(r=this.parseValueLiteral(!0));var i=this.parseDirectives(!0);return{kind:O.INPUT_VALUE_DEFINITION,description:t,name:n,type:a,defaultValue:r,directives:i,loc:this.loc(e)}},t.parseInterfaceTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");var n=this.parseName(),r=this.parseImplementsInterfaces(),a=this.parseDirectives(!0),i=this.parseFieldsDefinition();return{kind:O.INTERFACE_TYPE_DEFINITION,description:t,name:n,interfaces:r,directives:a,fields:i,loc:this.loc(e)}},t.parseUnionTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");var n=this.parseName(),r=this.parseDirectives(!0),a=this.parseUnionMemberTypes();return{kind:O.UNION_TYPE_DEFINITION,description:t,name:n,directives:r,types:a,loc:this.loc(e)}},t.parseUnionMemberTypes=function(){return this.expectOptionalToken(C.EQUALS)?this.delimitedMany(C.PIPE,this.parseNamedType):[]},t.parseEnumTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");var n=this.parseName(),r=this.parseDirectives(!0),a=this.parseEnumValuesDefinition();return{kind:O.ENUM_TYPE_DEFINITION,description:t,name:n,directives:r,values:a,loc:this.loc(e)}},t.parseEnumValuesDefinition=function(){return this.optionalMany(C.BRACE_L,this.parseEnumValueDefinition,C.BRACE_R)},t.parseEnumValueDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),r=this.parseDirectives(!0);return{kind:O.ENUM_VALUE_DEFINITION,description:t,name:n,directives:r,loc:this.loc(e)}},t.parseInputObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");var n=this.parseName(),r=this.parseDirectives(!0),a=this.parseInputFieldsDefinition();return{kind:O.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:n,directives:r,fields:a,loc:this.loc(e)}},t.parseInputFieldsDefinition=function(){return this.optionalMany(C.BRACE_L,this.parseInputValueDef,C.BRACE_R)},t.parseTypeSystemExtension=function(){var e=this._lexer.lookahead();if(e.kind===C.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)},t.parseSchemaExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var t=this.parseDirectives(!0),n=this.optionalMany(C.BRACE_L,this.parseOperationTypeDefinition,C.BRACE_R);if(0===t.length&&0===n.length)throw this.unexpected();return{kind:O.SCHEMA_EXTENSION,directives:t,operationTypes:n,loc:this.loc(e)}},t.parseScalarTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var t=this.parseName(),n=this.parseDirectives(!0);if(0===n.length)throw this.unexpected();return{kind:O.SCALAR_TYPE_EXTENSION,name:t,directives:n,loc:this.loc(e)}},t.parseObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var t=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),a=this.parseFieldsDefinition();if(0===n.length&&0===r.length&&0===a.length)throw this.unexpected();return{kind:O.OBJECT_TYPE_EXTENSION,name:t,interfaces:n,directives:r,fields:a,loc:this.loc(e)}},t.parseInterfaceTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var t=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),a=this.parseFieldsDefinition();if(0===n.length&&0===r.length&&0===a.length)throw this.unexpected();return{kind:O.INTERFACE_TYPE_EXTENSION,name:t,interfaces:n,directives:r,fields:a,loc:this.loc(e)}},t.parseUnionTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseUnionMemberTypes();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:O.UNION_TYPE_EXTENSION,name:t,directives:n,types:r,loc:this.loc(e)}},t.parseEnumTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseEnumValuesDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:O.ENUM_TYPE_EXTENSION,name:t,directives:n,values:r,loc:this.loc(e)}},t.parseInputObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseInputFieldsDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:O.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:n,fields:r,loc:this.loc(e)}},t.parseDirectiveDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(C.AT);var n=this.parseName(),r=this.parseArgumentDefs(),a=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var i=this.parseDirectiveLocations();return{kind:O.DIRECTIVE_DEFINITION,description:t,name:n,arguments:r,repeatable:a,locations:i,loc:this.loc(e)}},t.parseDirectiveLocations=function(){return this.delimitedMany(C.PIPE,this.parseDirectiveLocation)},t.parseDirectiveLocation=function(){var e=this._lexer.token,t=this.parseName();if(void 0!==I[t.value])return t;throw this.unexpected(e)},t.loc=function(e){var t;if(!0!==(null===(t=this._options)||void 0===t?void 0:t.noLocation))return new w.a(e,this._lexer.lastToken,this._lexer.source)},t.peek=function(e){return this._lexer.token.kind===e},t.expectToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t;throw E(this._lexer.source,t.start,"Expected ".concat(W(e),", found ").concat(G(t),"."))},t.expectOptionalToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t},t.expectKeyword=function(e){var t=this._lexer.token;if(t.kind!==C.NAME||t.value!==e)throw E(this._lexer.source,t.start,'Expected "'.concat(e,'", found ').concat(G(t),"."));this._lexer.advance()},t.expectOptionalKeyword=function(e){var t=this._lexer.token;return t.kind===C.NAME&&t.value===e&&(this._lexer.advance(),!0)},t.unexpected=function(e){var t=null!=e?e:this._lexer.token;return E(this._lexer.source,t.start,"Unexpected ".concat(G(t),"."))},t.any=function(e,t,n){this.expectToken(e);for(var r=[];!this.expectOptionalToken(n);)r.push(t.call(this));return r},t.optionalMany=function(e,t,n){if(this.expectOptionalToken(e)){var r=[];do{r.push(t.call(this))}while(!this.expectOptionalToken(n));return r}return[]},t.many=function(e,t,n){this.expectToken(e);var r=[];do{r.push(t.call(this))}while(!this.expectOptionalToken(n));return r},t.delimitedMany=function(e,t){this.expectOptionalToken(e);var n=[];do{n.push(t.call(this))}while(this.expectOptionalToken(e));return n},e}();function G(e){var t=e.value;return W(e.kind)+(null!=t?' "'.concat(t,'"'):"")}function W(e){return function(e){return e===C.BANG||e===C.DOLLAR||e===C.AMP||e===C.PAREN_L||e===C.PAREN_R||e===C.SPREAD||e===C.COLON||e===C.EQUALS||e===C.AT||e===C.BRACKET_L||e===C.BRACKET_R||e===C.BRACE_L||e===C.PIPE||e===C.BRACE_R}(e)?'"'.concat(e,'"'):e}var q=new Map,K=new Map,Y=!0,Z=!1;function Q(e){return e.replace(/[\s,]+/g," ").trim()}function J(e){var t=new Set,n=[];return e.definitions.forEach((function(e){if("FragmentDefinition"===e.kind){var r=e.name.value,a=Q((o=e.loc).source.body.substring(o.start,o.end)),i=K.get(r);i&&!i.has(a)?Y&&console.warn("Warning: fragment with name "+r+" already exists.\ngraphql-tag enforces all fragment names across your application to be unique; read more about\nthis in the docs: http://dev.apollodata.com/core/fragments.html#unique-names"):i||K.set(r,i=new Set),i.add(a),t.has(a)||(t.add(a),n.push(e))}else n.push(e);var o})),Object(r.a)(Object(r.a)({},e),{definitions:n})}function X(e){var t=Q(e);if(!q.has(t)){var n=function(e,t){return new z(e,t).parseDocument()}(e,{experimentalFragmentVariables:Z});if(!n||"Document"!==n.kind)throw new Error("Not a valid GraphQL document.");q.set(t,function(e){var t=new Set(e.definitions);t.forEach((function(e){e.loc&&delete e.loc,Object.keys(e).forEach((function(n){var r=e[n];r&&"object"==typeof r&&t.add(r)}))}));var n=e.loc;return n&&(delete n.startToken,delete n.endToken),e}(J(n)))}return q.get(t)}function $(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];"string"==typeof e&&(e=[e]);var r=e[0];return t.forEach((function(t,n){t&&"Document"===t.kind?r+=t.loc.source.body:r+=t,r+=e[n+1]})),X(r)}var ee,te={gql:$,resetCaches:function(){q.clear(),K.clear()},disableFragmentWarnings:function(){Y=!1},enableExperimentalFragmentVariables:function(){Z=!0},disableExperimentalFragmentVariables:function(){Z=!1}};(ee=$||($={})).gql=te.gql,ee.resetCaches=te.resetCaches,ee.disableFragmentWarnings=te.disableFragmentWarnings,ee.enableExperimentalFragmentVariables=te.enableExperimentalFragmentVariables,ee.disableExperimentalFragmentVariables=te.disableExperimentalFragmentVariables,$.default=$;t.a=$},function(e,t,n){(function(e){var r,a=function(e){"use strict";var t=1e7,n=9007199254740992,r=d(n),i="function"==typeof BigInt;function o(e,t,n,r){return void 0===e?o[0]:void 0!==t&&(10!=+t||n)?H(e,t,n,r):W(e)}function c(e,t){this.value=e,this.sign=t,this.isSmall=!1}function s(e){this.value=e,this.sign=e<0,this.isSmall=!0}function u(e){this.value=e}function l(e){return-n<e&&e<n}function d(e){return e<1e7?[e]:e<1e14?[e%1e7,Math.floor(e/1e7)]:[e%1e7,Math.floor(e/1e7)%1e7,Math.floor(e/1e14)]}function f(e){p(e);var n=e.length;if(n<4&&j(e,r)<0)switch(n){case 0:return 0;case 1:return e[0];case 2:return e[0]+e[1]*t;default:return e[0]+(e[1]+e[2]*t)*t}return e}function p(e){for(var t=e.length;0===e[--t];);e.length=t+1}function h(e){for(var t=new Array(e),n=-1;++n<e;)t[n]=0;return t}function m(e){return e>0?Math.floor(e):Math.ceil(e)}function v(e,n){var r,a,i=e.length,o=n.length,c=new Array(i),s=0,u=t;for(a=0;a<o;a++)s=(r=e[a]+n[a]+s)>=u?1:0,c[a]=r-s*u;for(;a<i;)s=(r=e[a]+s)===u?1:0,c[a++]=r-s*u;return s>0&&c.push(s),c}function g(e,t){return e.length>=t.length?v(e,t):v(t,e)}function b(e,n){var r,a,i=e.length,o=new Array(i),c=t;for(a=0;a<i;a++)r=e[a]-c+n,n=Math.floor(r/c),o[a]=r-n*c,n+=1;for(;n>0;)o[a++]=n%c,n=Math.floor(n/c);return o}function _(e,t){var n,r,a=e.length,i=t.length,o=new Array(a),c=0;for(n=0;n<i;n++)(r=e[n]-c-t[n])<0?(r+=1e7,c=1):c=0,o[n]=r;for(n=i;n<a;n++){if(!((r=e[n]-c)<0)){o[n++]=r;break}r+=1e7,o[n]=r}for(;n<a;n++)o[n]=e[n];return p(o),o}function y(e,t,n){var r,a,i=e.length,o=new Array(i),u=-t;for(r=0;r<i;r++)a=e[r]+u,u=Math.floor(a/1e7),a%=1e7,o[r]=a<0?a+1e7:a;return"number"==typeof(o=f(o))?(n&&(o=-o),new s(o)):new c(o,n)}function E(e,t){var n,r,a,i,o=e.length,c=t.length,s=h(o+c);for(a=0;a<o;++a){i=e[a];for(var u=0;u<c;++u)n=i*t[u]+s[a+u],r=Math.floor(n/1e7),s[a+u]=n-1e7*r,s[a+u+1]+=r}return p(s),s}function O(e,n){var r,a,i=e.length,o=new Array(i),c=t,s=0;for(a=0;a<i;a++)r=e[a]*n+s,s=Math.floor(r/c),o[a]=r-s*c;for(;s>0;)o[a++]=s%c,s=Math.floor(s/c);return o}function w(e,t){for(var n=[];t-- >0;)n.push(0);return n.concat(e)}function C(e,n,r){return new c(e<t?O(n,e):E(n,d(e)),r)}function S(e){var t,n,r,a,i=e.length,o=h(i+i);for(r=0;r<i;r++){n=0-(a=e[r])*a;for(var c=r;c<i;c++)t=a*e[c]*2+o[r+c]+n,n=Math.floor(t/1e7),o[r+c]=t-1e7*n;o[r+i]=n}return p(o),o}function A(e,t){var n,r,a,i,o=e.length,c=h(o);for(a=0,n=o-1;n>=0;--n)a=(i=1e7*a+e[n])-(r=m(i/t))*t,c[n]=0|r;return[c,0|a]}function k(e,n){var r,a=W(n);if(i)return[new u(e.value/a.value),new u(e.value%a.value)];var l,v=e.value,g=a.value;if(0===g)throw new Error("Cannot divide by zero");if(e.isSmall)return a.isSmall?[new s(m(v/g)),new s(v%g)]:[o[0],e];if(a.isSmall){if(1===g)return[e,o[0]];if(-1==g)return[e.negate(),o[0]];var b=Math.abs(g);if(b<t){l=f((r=A(v,b))[0]);var y=r[1];return e.sign&&(y=-y),"number"==typeof l?(e.sign!==a.sign&&(l=-l),[new s(l),new s(y)]):[new c(l,e.sign!==a.sign),new s(y)]}g=d(b)}var E=j(v,g);if(-1===E)return[o[0],e];if(0===E)return[o[e.sign===a.sign?1:-1],o[0]];l=(r=v.length+g.length<=200?function(e,n){var r,a,i,o,c,s,u,l=e.length,d=n.length,p=t,m=h(n.length),v=n[d-1],g=Math.ceil(p/(2*v)),b=O(e,g),_=O(n,g);for(b.length<=l&&b.push(0),_.push(0),v=_[d-1],a=l-d;a>=0;a--){for(r=p-1,b[a+d]!==v&&(r=Math.floor((b[a+d]*p+b[a+d-1])/v)),i=0,o=0,s=_.length,c=0;c<s;c++)i+=r*_[c],u=Math.floor(i/p),o+=b[a+c]-(i-u*p),i=u,o<0?(b[a+c]=o+p,o=-1):(b[a+c]=o,o=0);for(;0!==o;){for(r-=1,i=0,c=0;c<s;c++)(i+=b[a+c]-p+_[c])<0?(b[a+c]=i+p,i=0):(b[a+c]=i,i=1);o+=i}m[a]=r}return b=A(b,g)[0],[f(m),f(b)]}(v,g):function(e,t){for(var n,r,a,i,o,c=e.length,s=t.length,u=[],l=[];c;)if(l.unshift(e[--c]),p(l),j(l,t)<0)u.push(0);else{a=1e7*l[(r=l.length)-1]+l[r-2],i=1e7*t[s-1]+t[s-2],r>s&&(a=1e7*(a+1)),n=Math.ceil(a/i);do{if(j(o=O(t,n),l)<=0)break;n--}while(n);u.push(n),l=_(l,o)}return u.reverse(),[f(u),f(l)]}(v,g))[0];var w=e.sign!==a.sign,C=r[1],S=e.sign;return"number"==typeof l?(w&&(l=-l),l=new s(l)):l=new c(l,w),"number"==typeof C?(S&&(C=-C),C=new s(C)):C=new c(C,S),[l,C]}function j(e,t){if(e.length!==t.length)return e.length>t.length?1:-1;for(var n=e.length-1;n>=0;n--)if(e[n]!==t[n])return e[n]>t[n]?1:-1;return 0}function T(e){var t=e.abs();return!t.isUnit()&&(!!(t.equals(2)||t.equals(3)||t.equals(5))||!(t.isEven()||t.isDivisibleBy(3)||t.isDivisibleBy(5))&&(!!t.lesser(49)||void 0))}function I(e,t){for(var n,r,i,o=e.prev(),c=o,s=0;c.isEven();)c=c.divide(2),s++;e:for(r=0;r<t.length;r++)if(!e.lesser(t[r])&&!(i=a(t[r]).modPow(c,e)).isUnit()&&!i.equals(o)){for(n=s-1;0!=n;n--){if((i=i.square().mod(e)).isUnit())return!1;if(i.equals(o))continue e}return!1}return!0}c.prototype=Object.create(o.prototype),s.prototype=Object.create(o.prototype),u.prototype=Object.create(o.prototype),c.prototype.add=function(e){var t=W(e);if(this.sign!==t.sign)return this.subtract(t.negate());var n=this.value,r=t.value;return t.isSmall?new c(b(n,Math.abs(r)),this.sign):new c(g(n,r),this.sign)},c.prototype.plus=c.prototype.add,s.prototype.add=function(e){var t=W(e),n=this.value;if(n<0!==t.sign)return this.subtract(t.negate());var r=t.value;if(t.isSmall){if(l(n+r))return new s(n+r);r=d(Math.abs(r))}return new c(b(r,Math.abs(n)),n<0)},s.prototype.plus=s.prototype.add,u.prototype.add=function(e){return new u(this.value+W(e).value)},u.prototype.plus=u.prototype.add,c.prototype.subtract=function(e){var t=W(e);if(this.sign!==t.sign)return this.add(t.negate());var n=this.value,r=t.value;return t.isSmall?y(n,Math.abs(r),this.sign):function(e,t,n){var r;return j(e,t)>=0?r=_(e,t):(r=_(t,e),n=!n),"number"==typeof(r=f(r))?(n&&(r=-r),new s(r)):new c(r,n)}(n,r,this.sign)},c.prototype.minus=c.prototype.subtract,s.prototype.subtract=function(e){var t=W(e),n=this.value;if(n<0!==t.sign)return this.add(t.negate());var r=t.value;return t.isSmall?new s(n-r):y(r,Math.abs(n),n>=0)},s.prototype.minus=s.prototype.subtract,u.prototype.subtract=function(e){return new u(this.value-W(e).value)},u.prototype.minus=u.prototype.subtract,c.prototype.negate=function(){return new c(this.value,!this.sign)},s.prototype.negate=function(){var e=this.sign,t=new s(-this.value);return t.sign=!e,t},u.prototype.negate=function(){return new u(-this.value)},c.prototype.abs=function(){return new c(this.value,!1)},s.prototype.abs=function(){return new s(Math.abs(this.value))},u.prototype.abs=function(){return new u(this.value>=0?this.value:-this.value)},c.prototype.multiply=function(e){var n,r,a,i=W(e),s=this.value,u=i.value,l=this.sign!==i.sign;if(i.isSmall){if(0===u)return o[0];if(1===u)return this;if(-1===u)return this.negate();if((n=Math.abs(u))<t)return new c(O(s,n),l);u=d(n)}return r=s.length,a=u.length,new c(-.012*r-.012*a+15e-6*r*a>0?function e(t,n){var r=Math.max(t.length,n.length);if(r<=30)return E(t,n);r=Math.ceil(r/2);var a=t.slice(r),i=t.slice(0,r),o=n.slice(r),c=n.slice(0,r),s=e(i,c),u=e(a,o),l=e(g(i,a),g(c,o)),d=g(g(s,w(_(_(l,s),u),r)),w(u,2*r));return p(d),d}(s,u):E(s,u),l)},c.prototype.times=c.prototype.multiply,s.prototype._multiplyBySmall=function(e){return l(e.value*this.value)?new s(e.value*this.value):C(Math.abs(e.value),d(Math.abs(this.value)),this.sign!==e.sign)},c.prototype._multiplyBySmall=function(e){return 0===e.value?o[0]:1===e.value?this:-1===e.value?this.negate():C(Math.abs(e.value),this.value,this.sign!==e.sign)},s.prototype.multiply=function(e){return W(e)._multiplyBySmall(this)},s.prototype.times=s.prototype.multiply,u.prototype.multiply=function(e){return new u(this.value*W(e).value)},u.prototype.times=u.prototype.multiply,c.prototype.square=function(){return new c(S(this.value),!1)},s.prototype.square=function(){var e=this.value*this.value;return l(e)?new s(e):new c(S(d(Math.abs(this.value))),!1)},u.prototype.square=function(e){return new u(this.value*this.value)},c.prototype.divmod=function(e){var t=k(this,e);return{quotient:t[0],remainder:t[1]}},u.prototype.divmod=s.prototype.divmod=c.prototype.divmod,c.prototype.divide=function(e){return k(this,e)[0]},u.prototype.over=u.prototype.divide=function(e){return new u(this.value/W(e).value)},s.prototype.over=s.prototype.divide=c.prototype.over=c.prototype.divide,c.prototype.mod=function(e){return k(this,e)[1]},u.prototype.mod=u.prototype.remainder=function(e){return new u(this.value%W(e).value)},s.prototype.remainder=s.prototype.mod=c.prototype.remainder=c.prototype.mod,c.prototype.pow=function(e){var t,n,r,a=W(e),i=this.value,c=a.value;if(0===c)return o[1];if(0===i)return o[0];if(1===i)return o[1];if(-1===i)return a.isEven()?o[1]:o[-1];if(a.sign)return o[0];if(!a.isSmall)throw new Error("The exponent "+a.toString()+" is too large.");if(this.isSmall&&l(t=Math.pow(i,c)))return new s(m(t));for(n=this,r=o[1];!0&c&&(r=r.times(n),--c),0!==c;)c/=2,n=n.square();return r},s.prototype.pow=c.prototype.pow,u.prototype.pow=function(e){var t=W(e),n=this.value,r=t.value,a=BigInt(0),i=BigInt(1),c=BigInt(2);if(r===a)return o[1];if(n===a)return o[0];if(n===i)return o[1];if(n===BigInt(-1))return t.isEven()?o[1]:o[-1];if(t.isNegative())return new u(a);for(var s=this,l=o[1];(r&i)===i&&(l=l.times(s),--r),r!==a;)r/=c,s=s.square();return l},c.prototype.modPow=function(e,t){if(e=W(e),(t=W(t)).isZero())throw new Error("Cannot take modPow with modulus 0");var n=o[1],r=this.mod(t);for(e.isNegative()&&(e=e.multiply(o[-1]),r=r.modInv(t));e.isPositive();){if(r.isZero())return o[0];e.isOdd()&&(n=n.multiply(r).mod(t)),e=e.divide(2),r=r.square().mod(t)}return n},u.prototype.modPow=s.prototype.modPow=c.prototype.modPow,c.prototype.compareAbs=function(e){var t=W(e),n=this.value,r=t.value;return t.isSmall?1:j(n,r)},s.prototype.compareAbs=function(e){var t=W(e),n=Math.abs(this.value),r=t.value;return t.isSmall?n===(r=Math.abs(r))?0:n>r?1:-1:-1},u.prototype.compareAbs=function(e){var t=this.value,n=W(e).value;return(t=t>=0?t:-t)===(n=n>=0?n:-n)?0:t>n?1:-1},c.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=W(e),n=this.value,r=t.value;return this.sign!==t.sign?t.sign?1:-1:t.isSmall?this.sign?-1:1:j(n,r)*(this.sign?-1:1)},c.prototype.compareTo=c.prototype.compare,s.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=W(e),n=this.value,r=t.value;return t.isSmall?n==r?0:n>r?1:-1:n<0!==t.sign?n<0?-1:1:n<0?1:-1},s.prototype.compareTo=s.prototype.compare,u.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=this.value,n=W(e).value;return t===n?0:t>n?1:-1},u.prototype.compareTo=u.prototype.compare,c.prototype.equals=function(e){return 0===this.compare(e)},u.prototype.eq=u.prototype.equals=s.prototype.eq=s.prototype.equals=c.prototype.eq=c.prototype.equals,c.prototype.notEquals=function(e){return 0!==this.compare(e)},u.prototype.neq=u.prototype.notEquals=s.prototype.neq=s.prototype.notEquals=c.prototype.neq=c.prototype.notEquals,c.prototype.greater=function(e){return this.compare(e)>0},u.prototype.gt=u.prototype.greater=s.prototype.gt=s.prototype.greater=c.prototype.gt=c.prototype.greater,c.prototype.lesser=function(e){return this.compare(e)<0},u.prototype.lt=u.prototype.lesser=s.prototype.lt=s.prototype.lesser=c.prototype.lt=c.prototype.lesser,c.prototype.greaterOrEquals=function(e){return this.compare(e)>=0},u.prototype.geq=u.prototype.greaterOrEquals=s.prototype.geq=s.prototype.greaterOrEquals=c.prototype.geq=c.prototype.greaterOrEquals,c.prototype.lesserOrEquals=function(e){return this.compare(e)<=0},u.prototype.leq=u.prototype.lesserOrEquals=s.prototype.leq=s.prototype.lesserOrEquals=c.prototype.leq=c.prototype.lesserOrEquals,c.prototype.isEven=function(){return 0==(1&this.value[0])},s.prototype.isEven=function(){return 0==(1&this.value)},u.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},c.prototype.isOdd=function(){return 1==(1&this.value[0])},s.prototype.isOdd=function(){return 1==(1&this.value)},u.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},c.prototype.isPositive=function(){return!this.sign},s.prototype.isPositive=function(){return this.value>0},u.prototype.isPositive=s.prototype.isPositive,c.prototype.isNegative=function(){return this.sign},s.prototype.isNegative=function(){return this.value<0},u.prototype.isNegative=s.prototype.isNegative,c.prototype.isUnit=function(){return!1},s.prototype.isUnit=function(){return 1===Math.abs(this.value)},u.prototype.isUnit=function(){return this.abs().value===BigInt(1)},c.prototype.isZero=function(){return!1},s.prototype.isZero=function(){return 0===this.value},u.prototype.isZero=function(){return this.value===BigInt(0)},c.prototype.isDivisibleBy=function(e){var t=W(e);return!t.isZero()&&(!!t.isUnit()||(0===t.compareAbs(2)?this.isEven():this.mod(t).isZero()))},u.prototype.isDivisibleBy=s.prototype.isDivisibleBy=c.prototype.isDivisibleBy,c.prototype.isPrime=function(e){var t=T(this);if(void 0!==t)return t;var n=this.abs(),r=n.bitLength();if(r<=64)return I(n,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var i=Math.log(2)*r.toJSNumber(),o=Math.ceil(!0===e?2*Math.pow(i,2):i),c=[],s=0;s<o;s++)c.push(a(s+2));return I(n,c)},u.prototype.isPrime=s.prototype.isPrime=c.prototype.isPrime,c.prototype.isProbablePrime=function(e,t){var n=T(this);if(void 0!==n)return n;for(var r=this.abs(),i=void 0===e?5:e,o=[],c=0;c<i;c++)o.push(a.randBetween(2,r.minus(2),t));return I(r,o)},u.prototype.isProbablePrime=s.prototype.isProbablePrime=c.prototype.isProbablePrime,c.prototype.modInv=function(e){for(var t,n,r,i=a.zero,o=a.one,c=W(e),s=this.abs();!s.isZero();)t=c.divide(s),n=i,r=c,i=o,c=s,o=n.subtract(t.multiply(o)),s=r.subtract(t.multiply(s));if(!c.isUnit())throw new Error(this.toString()+" and "+e.toString()+" are not co-prime");return-1===i.compare(0)&&(i=i.add(e)),this.isNegative()?i.negate():i},u.prototype.modInv=s.prototype.modInv=c.prototype.modInv,c.prototype.next=function(){var e=this.value;return this.sign?y(e,1,this.sign):new c(b(e,1),this.sign)},s.prototype.next=function(){var e=this.value;return e+1<n?new s(e+1):new c(r,!1)},u.prototype.next=function(){return new u(this.value+BigInt(1))},c.prototype.prev=function(){var e=this.value;return this.sign?new c(b(e,1),!0):y(e,1,this.sign)},s.prototype.prev=function(){var e=this.value;return e-1>-n?new s(e-1):new c(r,!0)},u.prototype.prev=function(){return new u(this.value-BigInt(1))};for(var P=[1];2*P[P.length-1]<=t;)P.push(2*P[P.length-1]);var D=P.length,N=P[D-1];function x(e){return Math.abs(e)<=t}function R(e,t,n){t=W(t);for(var r=e.isNegative(),i=t.isNegative(),o=r?e.not():e,c=i?t.not():t,s=0,u=0,l=null,d=null,f=[];!o.isZero()||!c.isZero();)s=(l=k(o,N))[1].toJSNumber(),r&&(s=N-1-s),u=(d=k(c,N))[1].toJSNumber(),i&&(u=N-1-u),o=l[0],c=d[0],f.push(n(s,u));for(var p=0!==n(r?1:0,i?1:0)?a(-1):a(0),h=f.length-1;h>=0;h-=1)p=p.multiply(N).add(a(f[h]));return p}c.prototype.shiftLeft=function(e){var t=W(e).toJSNumber();if(!x(t))throw new Error(String(t)+" is too large for shifting.");if(t<0)return this.shiftRight(-t);var n=this;if(n.isZero())return n;for(;t>=D;)n=n.multiply(N),t-=D-1;return n.multiply(P[t])},u.prototype.shiftLeft=s.prototype.shiftLeft=c.prototype.shiftLeft,c.prototype.shiftRight=function(e){var t,n=W(e).toJSNumber();if(!x(n))throw new Error(String(n)+" is too large for shifting.");if(n<0)return this.shiftLeft(-n);for(var r=this;n>=D;){if(r.isZero()||r.isNegative()&&r.isUnit())return r;r=(t=k(r,N))[1].isNegative()?t[0].prev():t[0],n-=D-1}return(t=k(r,P[n]))[1].isNegative()?t[0].prev():t[0]},u.prototype.shiftRight=s.prototype.shiftRight=c.prototype.shiftRight,c.prototype.not=function(){return this.negate().prev()},u.prototype.not=s.prototype.not=c.prototype.not,c.prototype.and=function(e){return R(this,e,(function(e,t){return e&t}))},u.prototype.and=s.prototype.and=c.prototype.and,c.prototype.or=function(e){return R(this,e,(function(e,t){return e|t}))},u.prototype.or=s.prototype.or=c.prototype.or,c.prototype.xor=function(e){return R(this,e,(function(e,t){return e^t}))},u.prototype.xor=s.prototype.xor=c.prototype.xor;function M(e){var n=e.value,r="number"==typeof n?n|1<<30:"bigint"==typeof n?n|BigInt(1<<30):n[0]+n[1]*t|1073758208;return r&-r}function L(e,t){return e=W(e),t=W(t),e.greater(t)?e:t}function B(e,t){return e=W(e),t=W(t),e.lesser(t)?e:t}function F(e,t){if(e=W(e).abs(),t=W(t).abs(),e.equals(t))return e;if(e.isZero())return t;if(t.isZero())return e;for(var n,r,a=o[1];e.isEven()&&t.isEven();)n=B(M(e),M(t)),e=e.divide(n),t=t.divide(n),a=a.multiply(n);for(;e.isEven();)e=e.divide(M(e));do{for(;t.isEven();)t=t.divide(M(t));e.greater(t)&&(r=t,t=e,e=r),t=t.subtract(e)}while(!t.isZero());return a.isUnit()?e:e.multiply(a)}c.prototype.bitLength=function(){var e=this;return e.compareTo(a(0))<0&&(e=e.negate().subtract(a(1))),0===e.compareTo(a(0))?a(0):a(function e(t,n){if(n.compareTo(t)<=0){var r=e(t,n.square(n)),i=r.p,o=r.e,c=i.multiply(n);return c.compareTo(t)<=0?{p:c,e:2*o+1}:{p:i,e:2*o}}return{p:a(1),e:0}}(e,a(2)).e).add(a(1))},u.prototype.bitLength=s.prototype.bitLength=c.prototype.bitLength;var H=function(e,t,n,r){n=n||"0123456789abcdefghijklmnopqrstuvwxyz",e=String(e),r||(e=e.toLowerCase(),n=n.toLowerCase());var a,i=e.length,o=Math.abs(t),c={};for(a=0;a<n.length;a++)c[n[a]]=a;for(a=0;a<i;a++){if("-"!==(l=e[a])&&(l in c&&c[l]>=o)){if("1"===l&&1===o)continue;throw new Error(l+" is not a valid digit in base "+t+".")}}t=W(t);var s=[],u="-"===e[0];for(a=u?1:0;a<e.length;a++){var l;if((l=e[a])in c)s.push(W(c[l]));else{if("<"!==l)throw new Error(l+" is not a valid character");var d=a;do{a++}while(">"!==e[a]&&a<e.length);s.push(W(e.slice(d+1,a)))}}return V(s,t,u)};function V(e,t,n){var r,a=o[0],i=o[1];for(r=e.length-1;r>=0;r--)a=a.add(e[r].times(i)),i=i.times(t);return n?a.negate():a}function U(e,t){if((t=a(t)).isZero()){if(e.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(t.equals(-1)){if(e.isZero())return{value:[0],isNegative:!1};if(e.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-e.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var n=Array.apply(null,Array(e.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return n.unshift([1]),{value:[].concat.apply([],n),isNegative:!1}}var r=!1;if(e.isNegative()&&t.isPositive()&&(r=!0,e=e.abs()),t.isUnit())return e.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(e.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:r};for(var i,o=[],c=e;c.isNegative()||c.compareAbs(t)>=0;){i=c.divmod(t),c=i.quotient;var s=i.remainder;s.isNegative()&&(s=t.minus(s).abs(),c=c.next()),o.push(s.toJSNumber())}return o.push(c.toJSNumber()),{value:o.reverse(),isNegative:r}}function z(e,t,n){var r=U(e,t);return(r.isNegative?"-":"")+r.value.map((function(e){return function(e,t){return e<(t=t||"0123456789abcdefghijklmnopqrstuvwxyz").length?t[e]:"<"+e+">"}(e,n)})).join("")}function G(e){if(l(+e)){var t=+e;if(t===m(t))return i?new u(BigInt(t)):new s(t);throw new Error("Invalid integer: "+e)}var n="-"===e[0];n&&(e=e.slice(1));var r=e.split(/e/i);if(r.length>2)throw new Error("Invalid integer: "+r.join("e"));if(2===r.length){var a=r[1];if("+"===a[0]&&(a=a.slice(1)),(a=+a)!==m(a)||!l(a))throw new Error("Invalid integer: "+a+" is not a valid exponent.");var o=r[0],d=o.indexOf(".");if(d>=0&&(a-=o.length-d-1,o=o.slice(0,d)+o.slice(d+1)),a<0)throw new Error("Cannot include negative exponent part for integers");e=o+=new Array(a+1).join("0")}if(!/^([0-9][0-9]*)$/.test(e))throw new Error("Invalid integer: "+e);if(i)return new u(BigInt(n?"-"+e:e));for(var f=[],h=e.length,v=h-7;h>0;)f.push(+e.slice(v,h)),(v-=7)<0&&(v=0),h-=7;return p(f),new c(f,n)}function W(e){return"number"==typeof e?function(e){if(i)return new u(BigInt(e));if(l(e)){if(e!==m(e))throw new Error(e+" is not an integer.");return new s(e)}return G(e.toString())}(e):"string"==typeof e?G(e):"bigint"==typeof e?new u(e):e}c.prototype.toArray=function(e){return U(this,e)},s.prototype.toArray=function(e){return U(this,e)},u.prototype.toArray=function(e){return U(this,e)},c.prototype.toString=function(e,t){if(void 0===e&&(e=10),10!==e)return z(this,e,t);for(var n,r=this.value,a=r.length,i=String(r[--a]);--a>=0;)n=String(r[a]),i+="0000000".slice(n.length)+n;return(this.sign?"-":"")+i},s.prototype.toString=function(e,t){return void 0===e&&(e=10),10!=e?z(this,e,t):String(this.value)},u.prototype.toString=s.prototype.toString,u.prototype.toJSON=c.prototype.toJSON=s.prototype.toJSON=function(){return this.toString()},c.prototype.valueOf=function(){return parseInt(this.toString(),10)},c.prototype.toJSNumber=c.prototype.valueOf,s.prototype.valueOf=function(){return this.value},s.prototype.toJSNumber=s.prototype.valueOf,u.prototype.valueOf=u.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};for(var q=0;q<1e3;q++)o[q]=W(q),q>0&&(o[-q]=W(-q));return o.one=o[1],o.zero=o[0],o.minusOne=o[-1],o.max=L,o.min=B,o.gcd=F,o.lcm=function(e,t){return e=W(e).abs(),t=W(t).abs(),e.divide(F(e,t)).multiply(t)},o.isInstance=function(e){return e instanceof c||e instanceof s||e instanceof u},o.randBetween=function(e,n,r){e=W(e),n=W(n);var a=r||Math.random,i=B(e,n),c=L(e,n).subtract(i).add(1);if(c.isSmall)return i.add(Math.floor(a()*c));for(var s=U(c,t).value,u=[],l=!0,d=0;d<s.length;d++){var f=l?s[d]:t,p=m(a()*f);u.push(p),p<f&&(l=!1)}return i.add(o.fromArray(u,t,!1))},o.fromArray=function(e,t,n){return V(e.map(W),W(t||10),n)},o}();e.hasOwnProperty("exports")&&(e.exports=a),void 0===(r=function(){return a}.call(t,n,t,e))||(e.exports=r)}).call(this,n(298)(e))},function(e,t){e.exports=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";var r;function a(e){return{type:r.SET_EVENT_FORM_INFO,data:e}}function i(e){return{type:r.SET_EVENT_GRADE_OPTIONS,data:e}}function o(e){return{type:r.SET_EVENT_CHAT_OPTIONS,data:e}}function c(e){return{type:r.SET_EVENT_CONTACTS_OPTIONS,data:e}}n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return c})),function(e){e.SET_EVENT_FORM_INFO="SET_EVENT_FORM_INFO",e.SET_EVENT_GRADE_OPTIONS="SET_EVENT_GRADE_OPTIONS",e.SET_EVENT_CHAT_OPTIONS="SET_EVENT_CHAT_OPTIONS",e.SET_EVENT_CONTACTS_OPTIONS="SET_EVENT_CONTACTS_OPTIONS"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var r={CALLS_DESKTOP_APP_MAIN:"calls_app_main",CALLS_DESKTOP_APP_AUTH:"calls_app_auth",CALLS_DESKTOP_APP_AUTH_PLACEHOLDER:"calls_app_auth_placeholder"},a={MAIN:"main"},i={CREATE_CALL:"create-call",CONFIRM_JOIN:"confirm-join",CALL_JOIN:"call-join",PROFILE_COMPACT:"profile_compact"}},function(e,t,n){"use strict";var r;function a(e){return{type:r.SET_REGISTERED_ACCOUNT_INFO,data:e}}function i(e){return{type:r.UPDATE_REGISTERED_ACCOUNT_INFO,data:e}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),function(e){e.SET_REGISTERED_ACCOUNT_INFO="SET_REGISTERED_ACCOUNT_INFO",e.UPDATE_REGISTERED_ACCOUNT_INFO="UPDATE_REGISTERED_ACCOUNT_INFO"}(r||(r={}))},function(e,t,n){var r=n(902),a=n(938),i=n(456),o=n(148),c=n(948);e.exports=function(e){return"function"==typeof e?e:null==e?i:"object"==typeof e?o(e)?a(e[0],e[1]):r(e):c(e)}},function(e,t,n){var r=n(565),a=n(899),i=n(258);e.exports=function(e){return i(e)?r(e):a(e)}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},,,,,,,,,,function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(308);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(558);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t,n){var r=n(333);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},function(e,t,n){"use strict";var r;function a(e){return{type:r.SET_VIDEO_UPLOAD_INFO,data:e}}function i(e){return{type:r.SET_VIDEO_EDIT_INFO,data:e}}n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i})),function(e){e.SET_VIDEO_UPLOAD_INFO="SET_VIDEO_UPLOAD_INFO",e.SET_VIDEO_EDIT_INFO="SET_VIDEO_EDIT_INFO"}(r||(r={}))},function(e,t,n){var r=n(621),a=n(310);e.exports=function(e,t,n,i){var o=!n;n||(n={});for(var c=-1,s=t.length;++c<s;){var u=t[c],l=i?i(n[u],e[u],u,n,e):void 0;void 0===l&&(l=e[u]),o?a(n,u,l):r(n,u,l)}return n}},function(e,t,n){"use strict";var r;function a(e){return{type:r.SET_CONTACTS,data:e}}function i(e){return{type:r.SET_CONTACTS_BLACK_LIST,data:e}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),function(e){e.SET_CONTACTS="SET_CONTACTS",e.SET_CONTACTS_BLACK_LIST="SET_CONTACTS_BLACK_LIST"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return d}));var r=n(21),a=n.n(r),i=n(7),o=n.n(i),c=n(82),s=n(661),u=n.n(s)()(1,21),l=function(e){var t=o()(e,4),n=t[0],r=t[1],a=t[2],i=t[3];return{schoolId:n,search:a,filters:{is_graduated:r.is_graduated||"0",user_id:i||"0"===r.user_id?void 0:r.user_id,role:"0"!==(null==r?void 0:r.user_id)?c.a.TEACHER:void 0},options:{},count:5e3}},d=function(e){var t=e.schoolGrades,n=e.gradeId,r=e.role,i=e.userIds,o=a()(t),c=o.find((function(e){return e.id===n}));if(c){var s=c.roles_count;return c.roles_count=s.map((function(e){return e.role===r&&(e.count+=i.length),e})),o}return t}},function(e,t,n){(function(t){var n;n=function(){"use strict";function e(e,t){return e(t={exports:{}},t.exports),t.exports}"undefined"!=typeof window?window:void 0!==t||"undefined"!=typeof self&&self;var n=e((function(e,t){e.exports=function(){function e(e){return e&&"object"==typeof e&&"[object RegExp]"!==Object.prototype.toString.call(e)&&"[object Date]"!==Object.prototype.toString.call(e)}function t(t,n){var a;return n&&!0===n.clone&&e(t)?r((a=t,Array.isArray(a)?[]:{}),t,n):t}function n(n,a,i){var o=n.slice();return a.forEach((function(a,c){void 0===o[c]?o[c]=t(a,i):e(a)?o[c]=r(n[c],a,i):-1===n.indexOf(a)&&o.push(t(a,i))})),o}function r(a,i,o){var c=Array.isArray(i),s=(o||{arrayMerge:n}).arrayMerge||n;return c?Array.isArray(a)?s(a,i,o):t(i,o):function(n,a,i){var o={};return e(n)&&Object.keys(n).forEach((function(e){o[e]=t(n[e],i)})),Object.keys(a).forEach((function(c){e(a[c])&&n[c]?o[c]=r(n[c],a[c],i):o[c]=t(a[c],i)})),o}(a,i,o)}return r.all=function(e,t){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce((function(e,n){return r(e,n,t)}))},r}()})),r=e((function(e,t){t.default={svg:{name:"xmlns",uri:"http://www.w3.org/2000/svg"},xlink:{name:"xmlns:xlink",uri:"http://www.w3.org/1999/xlink"}},e.exports=t.default})),a=r.svg,i=r.xlink,o={};o[a.name]=a.uri,o[i.name]=i.uri;var c,s=function(e,t){return void 0===e&&(e=""),"<svg "+function(e){return Object.keys(e).map((function(t){return t+'="'+e[t].toString().replace(/"/g,"&quot;")+'"'})).join(" ")}(n(o,t||{}))+">"+e+"</svg>"},u=r.svg,l=r.xlink,d={attrs:(c={style:["position: absolute","width: 0","height: 0"].join("; "),"aria-hidden":"true"},c[u.name]=u.uri,c[l.name]=l.uri,c)},f=function(e){this.config=n(d,e||{}),this.symbols=[]};f.prototype.add=function(e){var t=this.symbols,n=this.find(e.id);return n?(t[t.indexOf(n)]=e,!1):(t.push(e),!0)},f.prototype.remove=function(e){var t=this.symbols,n=this.find(e);return!!n&&(t.splice(t.indexOf(n),1),n.destroy(),!0)},f.prototype.find=function(e){return this.symbols.filter((function(t){return t.id===e}))[0]||null},f.prototype.has=function(e){return null!==this.find(e)},f.prototype.stringify=function(){var e=this.config.attrs,t=this.symbols.map((function(e){return e.stringify()})).join("");return s(t,e)},f.prototype.toString=function(){return this.stringify()},f.prototype.destroy=function(){this.symbols.forEach((function(e){return e.destroy()}))};var p=function(e){var t=e.id,n=e.viewBox,r=e.content;this.id=t,this.viewBox=n,this.content=r};p.prototype.stringify=function(){return this.content},p.prototype.toString=function(){return this.stringify()},p.prototype.destroy=function(){var e=this;["id","viewBox","content"].forEach((function(t){return delete e[t]}))};var h=function(e){var t=!!document.importNode,n=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement;return t?document.importNode(n,!0):n},m=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={isMounted:{}};return n.isMounted.get=function(){return!!this.node},t.createFromExistingNode=function(e){return new t({id:e.getAttribute("id"),viewBox:e.getAttribute("viewBox"),content:e.outerHTML})},t.prototype.destroy=function(){this.isMounted&&this.unmount(),e.prototype.destroy.call(this)},t.prototype.mount=function(e){if(this.isMounted)return this.node;var t="string"==typeof e?document.querySelector(e):e,n=this.render();return this.node=n,t.appendChild(n),n},t.prototype.render=function(){var e=this.stringify();return h(s(e)).childNodes[0]},t.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},Object.defineProperties(t.prototype,n),t}(p),v={autoConfigure:!0,mountTo:"body",syncUrlsWithBaseTag:!1,listenLocationChangeEvent:!0,locationChangeEvent:"locationChange",locationChangeAngularEmitter:!1,usagesToUpdate:"use[*|href]",moveGradientsOutsideSymbol:!1},g=function(e){return Array.prototype.slice.call(e,0)},b=function(){return/firefox/i.test(navigator.userAgent)},_=function(){return/msie/i.test(navigator.userAgent)||/trident/i.test(navigator.userAgent)},y=function(){return/edge/i.test(navigator.userAgent)},E=function(e){return(e||window.location.href).split("#")[0]},O=function(e){angular.module("ng").run(["$rootScope",function(t){t.$on("$locationChangeSuccess",(function(t,n,r){!function(e,t){var n=document.createEvent("CustomEvent");n.initCustomEvent(e,!1,!1,t),window.dispatchEvent(n)}(e,{oldUrl:r,newUrl:n})}))}])},w=function(e,t){return void 0===t&&(t="linearGradient, radialGradient, pattern, mask, clipPath"),g(e.querySelectorAll("symbol")).forEach((function(e){g(e.querySelectorAll(t)).forEach((function(t){e.parentNode.insertBefore(t,e)}))})),e},C=r.xlink.uri,S=/[{}|\\\^\[\]`"<>]/g;function A(e){return e.replace(S,(function(e){return"%"+e[0].charCodeAt(0).toString(16).toUpperCase()}))}var k=["clipPath","colorProfile","src","cursor","fill","filter","marker","markerStart","markerMid","markerEnd","mask","stroke","style"],j=k.map((function(e){return"["+e+"]"})).join(","),T=function(e,t,n,r){var a=A(n),i=A(r);(function(e,t){return g(e).reduce((function(e,n){if(!n.attributes)return e;var r=g(n.attributes),a=t?r.filter(t):r;return e.concat(a)}),[])})(e.querySelectorAll(j),(function(e){var t=e.localName,n=e.value;return-1!==k.indexOf(t)&&-1!==n.indexOf("url("+a)})).forEach((function(e){return e.value=e.value.replace(new RegExp(a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),i)})),function(e,t,n){g(e).forEach((function(e){var r=e.getAttribute("xlink:href");if(r&&0===r.indexOf(t)){var a=r.replace(t,n);e.setAttributeNS(C,"xlink:href",a)}}))}(t,a,i)},I="mount",P="symbol_mount";return function(e){function t(t){var r=this;void 0===t&&(t={}),e.call(this,n(v,t));var a,i=(a=a||Object.create(null),{on:function(e,t){(a[e]||(a[e]=[])).push(t)},off:function(e,t){a[e]&&a[e].splice(a[e].indexOf(t)>>>0,1)},emit:function(e,t){(a[e]||[]).map((function(e){e(t)})),(a["*"]||[]).map((function(n){n(e,t)}))}});this._emitter=i,this.node=null;var o=this.config;if(o.autoConfigure&&this._autoConfigure(t),o.syncUrlsWithBaseTag){var c=document.getElementsByTagName("base")[0].getAttribute("href");i.on(I,(function(){return r.updateUrls("#",c)}))}var s=this._handleLocationChange.bind(this);this._handleLocationChange=s,o.listenLocationChangeEvent&&window.addEventListener(o.locationChangeEvent,s),o.locationChangeAngularEmitter&&O(o.locationChangeEvent),i.on(I,(function(e){o.moveGradientsOutsideSymbol&&w(e)})),i.on(P,(function(e){var t;o.moveGradientsOutsideSymbol&&w(e.parentNode),(_()||y())&&(t=[],g(e.querySelectorAll("style")).forEach((function(e){e.textContent+="",t.push(e)})))}))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={isMounted:{}};return r.isMounted.get=function(){return!!this.node},t.prototype._autoConfigure=function(e){var t=this.config;void 0===e.syncUrlsWithBaseTag&&(t.syncUrlsWithBaseTag=void 0!==document.getElementsByTagName("base")[0]),void 0===e.locationChangeAngularEmitter&&(t.locationChangeAngularEmitter=void 0!==window.angular),void 0===e.moveGradientsOutsideSymbol&&(t.moveGradientsOutsideSymbol=b())},t.prototype._handleLocationChange=function(e){var t=e.detail,n=t.oldUrl,r=t.newUrl;this.updateUrls(n,r)},t.prototype.add=function(t){var n=e.prototype.add.call(this,t);return this.isMounted&&n&&(t.mount(this.node),this._emitter.emit(P,t.node)),n},t.prototype.attach=function(e){var t=this,n=this;if(n.isMounted)return n.node;var r="string"==typeof e?document.querySelector(e):e;return n.node=r,this.symbols.forEach((function(e){e.mount(n.node),t._emitter.emit(P,e.node)})),g(r.querySelectorAll("symbol")).forEach((function(e){var t=m.createFromExistingNode(e);t.node=e,n.add(t)})),this._emitter.emit(I,r),r},t.prototype.destroy=function(){var e=this.config,t=this.symbols,n=this._emitter;t.forEach((function(e){return e.destroy()})),n.off("*"),window.removeEventListener(e.locationChangeEvent,this._handleLocationChange),this.isMounted&&this.unmount()},t.prototype.mount=function(e,t){if(void 0===e&&(e=this.config.mountTo),void 0===t&&(t=!1),this.isMounted)return this.node;var n="string"==typeof e?document.querySelector(e):e,r=this.render();return this.node=r,t&&n.childNodes[0]?n.insertBefore(r,n.childNodes[0]):n.appendChild(r),this._emitter.emit(I,r),r},t.prototype.render=function(){return h(this.stringify())},t.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},t.prototype.updateUrls=function(e,t){if(!this.isMounted)return!1;var n=document.querySelectorAll(this.config.usagesToUpdate);return T(this.node,n,E(e)+"#",E(t)+"#"),!0},Object.defineProperties(t.prototype,r),t}(f)},e.exports=n()}).call(this,n(171))},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var r=140,a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(e=e.trim()).endsWith("— Live")||!e.length?e:"".concat(e," ").concat("— Live")},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=new RegExp("".concat("— Live"),"gi");return(e=e.trim()).replace(t,"").trim()},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(e=e.trim()).endsWith("— Live")?100:100-"— Live".length}},function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return m}));var r=n(16),a=n(114),i=n(36),o=n(22),c=n(65),s=n(201);function u(e){return void 0!==e.args?e.args:e.field?Object(o.e)(e.field,e.variables):null}var l=function(e,t){var n=e.__typename,r=e.id,a=e._id;if("string"==typeof n&&(t&&(t.keyObject=void 0!==r?{id:r}:void 0!==a?{_id:a}:void 0),void 0===r&&(r=a),void 0!==r))return n+":"+("number"==typeof r||"string"==typeof r?r:JSON.stringify(r))},d=function(){},f=function(e,t){return t.fieldName},p=function(e,t,n){return(0,n.mergeObjects)(e,t)},h=function(e,t){return t},m=function(){function e(e){this.config=e,this.typePolicies=Object.create(null),this.toBeAdded=Object.create(null),this.supertypeMap=new Map,this.fuzzySubtypes=new Map,this.rootIdsByTypename=Object.create(null),this.rootTypenamesById=Object.create(null),this.usingPossibleTypes=!1,this.config=Object(r.a)({dataIdFromObject:l},e),this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),e.possibleTypes&&this.addPossibleTypes(e.possibleTypes),e.typePolicies&&this.addTypePolicies(e.typePolicies)}return e.prototype.identify=function(e,t,n){var r=t&&n?Object(o.v)(e,t,n):e.__typename;if(r===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];for(var a,i={typename:r,selectionSet:t,fragmentMap:n},c=r&&this.getTypePolicy(r),s=c&&c.keyFn||this.config.dataIdFromObject;s;){var u=s(e,i);if(!Array.isArray(u)){a=u;break}s=_(u)}return a=a&&String(a),i.keyObject?[a,i.keyObject]:[a]},e.prototype.addTypePolicies=function(e){var t=this;Object.keys(e).forEach((function(n){var a=e[n],i=a.queryType,o=a.mutationType,s=a.subscriptionType,u=Object(r.f)(a,["queryType","mutationType","subscriptionType"]);i&&t.setRootTypename("Query",n),o&&t.setRootTypename("Mutation",n),s&&t.setRootTypename("Subscription",n),c.c.call(t.toBeAdded,n)?t.toBeAdded[n].push(u):t.toBeAdded[n]=[u]}))},e.prototype.updateTypePolicy=function(e,t){var n=this,r=this.getTypePolicy(e),a=t.keyFields,i=t.fields;function o(e,t){e.merge="function"==typeof t?t:!0===t?p:!1===t?h:e.merge}o(r,t.merge),r.keyFn=!1===a?d:Array.isArray(a)?_(a):"function"==typeof a?a:r.keyFn,i&&Object.keys(i).forEach((function(t){var r=n.getFieldPolicy(e,t,!0),a=i[t];if("function"==typeof a)r.read=a;else{var c=a.keyArgs,s=a.read,u=a.merge;r.keyFn=!1===c?f:Array.isArray(c)?b(c):"function"==typeof c?c:r.keyFn,"function"==typeof s&&(r.read=s),o(r,u)}r.read&&r.merge&&(r.keyFn=r.keyFn||f)}))},e.prototype.setRootTypename=function(e,t){void 0===t&&(t=e);var n="ROOT_"+e.toUpperCase(),r=this.rootTypenamesById[n];t!==r&&(Object(i.b)(!r||r===e,1),r&&delete this.rootIdsByTypename[r],this.rootIdsByTypename[t]=n,this.rootTypenamesById[n]=t)},e.prototype.addPossibleTypes=function(e){var t=this;this.usingPossibleTypes=!0,Object.keys(e).forEach((function(n){t.getSupertypeSet(n,!0),e[n].forEach((function(e){t.getSupertypeSet(e,!0).add(n);var r=e.match(c.a);r&&r[0]===e||t.fuzzySubtypes.set(e,new RegExp(e))}))}))},e.prototype.getTypePolicy=function(e){var t=this;if(!c.c.call(this.typePolicies,e)){var n=this.typePolicies[e]=Object.create(null);n.fields=Object.create(null);var a=this.supertypeMap.get(e);a&&a.size&&a.forEach((function(e){var a=t.getTypePolicy(e),i=a.fields,o=Object(r.f)(a,["fields"]);Object.assign(n,o),Object.assign(n.fields,i)}))}var i=this.toBeAdded[e];return i&&i.length&&this.updateTypePolicy(e,o.j.apply(void 0,i.splice(0))),this.typePolicies[e]},e.prototype.getFieldPolicy=function(e,t,n){if(e){var r=this.getTypePolicy(e).fields;return r[t]||n&&(r[t]=Object.create(null))}},e.prototype.getSupertypeSet=function(e,t){var n=this.supertypeMap.get(e);return!n&&t&&this.supertypeMap.set(e,n=new Set),n},e.prototype.fragmentMatches=function(e,t,n,r){var a=this;if(!e.typeCondition)return!0;if(!t)return!1;var i=e.typeCondition.name.value;if(t===i)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(i))for(var o=this.getSupertypeSet(t,!0),s=[o],u=function(e){var t=a.getSupertypeSet(e,!1);t&&t.size&&s.indexOf(t)<0&&s.push(t)},l=!(!n||!this.fuzzySubtypes.size),d=0;d<s.length;++d){var f=s[d];if(f.has(i))return o.has(i)||o.add(i),!0;f.forEach(u),l&&d===s.length-1&&Object(c.e)(e.selectionSet,n,r)&&(l=!1,!0,this.fuzzySubtypes.forEach((function(e,n){var r=t.match(e);r&&r[0]===t&&u(n)})))}return!1},e.prototype.hasKeyArgs=function(e,t){var n=this.getFieldPolicy(e,t,!1);return!(!n||!n.keyFn)},e.prototype.getStoreFieldName=function(e){var t,n=e.typename,r=e.fieldName,a=this.getFieldPolicy(n,r,!1),i=a&&a.keyFn;if(i&&n)for(var s={typename:n,fieldName:r,field:e.field||null,variables:e.variables},l=u(e);i;){var d=i(l,s);if(!Array.isArray(d)){t=d||r;break}i=b(d)}return void 0===t&&(t=e.field?Object(o.M)(e.field,e.variables):Object(o.u)(r,u(e))),r===Object(c.b)(t)?t:r+":"+t},e.prototype.readField=function(e,t){var n=e.from;if(n&&(e.field||e.fieldName)){if(void 0===e.typename){var r=t.store.getFieldValue(n,"__typename");r&&(e.typename=r)}var a=this.getStoreFieldName(e),i=Object(c.b)(a),u=t.store.getFieldValue(n,a),l=this.getFieldPolicy(e.typename,i,!1),d=l&&l.read;if(d){var f=v(this,n,e,t,t.store.getStorage(Object(o.C)(n)?n.__ref:n,a));return s.a.withValue(this.cache,d,[u,f])}return u}},e.prototype.getMergeFunction=function(e,t,n){var r=this.getFieldPolicy(e,t,!1),a=r&&r.merge;return!a&&n&&(a=(r=this.getTypePolicy(n))&&r.merge),a},e.prototype.runMergeFunction=function(e,t,n,r,a){var i=n.field,o=n.typename,c=n.merge;return c===p?g(r.store.getFieldValue)(e,t):c===h?t:c(e,t,v(this,void 0,{typename:o,fieldName:i.name.value,field:i,variables:r.variables},r,a||Object.create(null)))},e}();function v(e,t,n,a,i){var s=e.getStoreFieldName(n),l=Object(c.b)(s),d=n.variables||a.variables,f=a.store,p=f.getFieldValue,h=f.toReference,m=f.canRead;return{args:u(n),field:n.field||null,fieldName:l,storeFieldName:s,variables:d,isReference:o.C,toReference:h,storage:i,cache:e.cache,canRead:m,readField:function(n,i){var o="string"==typeof n?{fieldName:n,from:i}:Object(r.a)({},n);return void 0===o.from&&(o.from=t),void 0===o.variables&&(o.variables=d),e.readField(o,a)},mergeObjects:g(p)}}function g(e){return function(t,n){if(Array.isArray(t)||Array.isArray(n))throw new i.a(2);if(t&&"object"==typeof t&&n&&"object"==typeof n){var a=e(t,"__typename"),o=e(n,"__typename");return!(a&&o&&a!==o)&&Object(c.f)(t)&&Object(c.f)(n)?Object(r.a)(Object(r.a)({},t),n):n}return n}}function b(e){return function(t,n){return t?n.fieldName+":"+JSON.stringify(y(t,e,!1)):n.fieldName}}function _(e){var t=new a.a(o.h);return function(n,r){var a;if(r.selectionSet&&r.fragmentMap){var i=t.lookupArray([r.selectionSet,r.fragmentMap]);a=i.aliasMap||(i.aliasMap=function e(t,n){var r=Object.create(null),a=new Set([t]);return a.forEach((function(t){t.selections.forEach((function(t){if(Object(o.z)(t)){if(t.alias){var i=t.alias.value,c=t.name.value;if(c!==i)(r.aliases||(r.aliases=Object.create(null)))[c]=i}if(t.selectionSet)(r.subsets||(r.subsets=Object.create(null)))[t.name.value]=e(t.selectionSet,n)}else{var s=Object(o.o)(t,n);s&&a.add(s.selectionSet)}}))})),r}(r.selectionSet,r.fragmentMap))}var c=r.keyObject=y(n,e,!0,a);return r.typename+":"+JSON.stringify(c)}}function y(e,t,n,r){var a,o=Object.create(null);return t.forEach((function(t){if(Array.isArray(t)){if("string"==typeof a){var s=r&&r.subsets,u=s&&s[a];o[a]=y(e[a],t,n,u)}}else{var l=r&&r.aliases,d=l&&l[t]||t;c.c.call(e,d)?o[a=t]=e[d]:(Object(i.b)(!n,3),a=void 0)}})),o}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(0),a=n.n(r),i=(n(970),n(971),n(14)),o=n(25),c=n(1),s=function(){return a.a.createElement(c.F,{size:"s",header:a.a.createElement(a.a.Fragment,null,a.a.createElement(i.a,{width:"56px",className:"SchoolPeopleBlockSkeleton__line"}),a.a.createElement(i.a,{width:"56px",className:"SchoolPeopleBlockSkeleton__line"})),className:"SchoolPeopleBlockSkeleton"},a.a.createElement(o.a,{size:56,shadow:!1,className:"SchoolPeopleBlockSkeleton__avatar"}))},u=function(e){var t=e.top;return a.a.createElement("div",{className:"SchoolPeopleLineSkeleton"},t&&a.a.createElement(c.D,{className:"SchoolPeopleLineSkeleton__top"},t),a.a.createElement("div",{className:"SchoolPeopleLineSkeleton__content"},a.a.createElement(s,null),a.a.createElement(s,null),a.a.createElement(s,null),a.a.createElement(s,null),a.a.createElement(s,null),a.a.createElement(s,null),a.a.createElement(s,null)))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var r=n(51);function a(){return{dsn:"https://29d5ff8d07c147af9dcf4a8bbb435786@stacks.vk-portal.net/19",release:"build-ci-education-production-786"}}function i(){var e={dsn:"https://29d5ff8d07c147af9dcf4a8bbb435786@stacks.vk-portal.net/19",release:"build-ci-education-production-786"}.dsn;return!r.d&&!!e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(0),a=n.n(r),i=(n(987),n(14)),o=n(25),c=n(1),s=function(){return a.a.createElement(c.pb,{before:a.a.createElement(o.a,{mode:"image",size:72,shadow:!1})},a.a.createElement(i.a,{width:"128px",className:"DocumentsItemSkeleton__line"}),a.a.createElement(i.a,{width:"187px",className:"DocumentsItemSkeleton__line"}),a.a.createElement(i.a,{width:"88px"}))}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):void 0;t.a=r},function(e,t,n){"use strict";function r(e){return e.length>=2&&e.every((function(e,t,n){return e.number===n[0].number&&e.end_year===n[0].end_year}))}function a(e){var t=e.selectedId,n=e.schoolId,r=e.members[t];return r?"length"in r?{type:-1===t?"new":"selected",schoolId:n,selected:r}:{type:-1===t?"new":"selected",schoolId:n,selected:[r]}:{type:-1===t?"new":"selected",schoolId:n,selected:[]}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(9),a=Object(r.createStore)({loading:!0,speakers:[],selectedSpeakers:[]})},function(e,t,n){"use strict";n.d(t,"b",(function(){return De})),n.d(t,"c",(function(){return Ne})),n.d(t,"a",(function(){return xe}));var r=n(7),a=n.n(r),i=n(0),o=n.n(i),c=n(2),s=n.n(c),u=n(380),l={profileAddSchool:{errors:{}},profileSchools:null,profileSchoolGradeRequests:[],profileTopContacts:[],profileCompact:{schools:[]},profileChatsStorage:{},profileContactsStorage:{}},d={messagesModal:void 0,messagesMain:void 0,messagesUnreadCount:0,messageToReply:"",messagesEntryPoint:null};function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p(p({},{loaded:{}}),{menuSchoolsLoaded:!1,menuSchools:[],menuSchoolRequestsLoaded:!1,menuSchoolRequests:[]}),{searchFilters:null,searchFilterModalCallback:null}),{calls:[],callsLib:null}),{registeredAccountInfo:{errors:{}}}),u.a),l),{contacts:{items:[],q:"",count:20},contactsBlackList:{items:[],count:0}}),{accountInfo:null}),{inviteLink:null,inviteLinkCreateInfo:null}),{schoolInfo:null,schoolInfoError:null}),{schoolEditInfoOriginal:null,schoolEditInfo:null}),{schoolGradeRequests:[]}),{schoolMembers:[],schoolMemberEditInfo:null}),{schoolGrades:[],schoolGradeEditInfo:null,gradesStorage:{},schoolGradesStorage:{},userGradesStorage:{}}),{qrCodePreviewInfo:null}),{docEditInfo:null,docUploadInfo:null}),{videoEditInfo:null,videoUploadInfo:null}),d),{selectSchoolInfo:null,selectClassesInfo:null,selectParticipantsInfo:null,selectCountryInfo:null,selectCityInfo:null}),{eventFormInfo:null,eventGradeOptions:null,eventChatOptions:null,eventContactsOptions:null}),{userProfilesStorage:{}}),m=n(197);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=n(237);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=n(153);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=n(126);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=n(295);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=n(66),P=n(403);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=n(108);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L=n(314);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=n(238);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z=n(209);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q=n(228);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z=n(465);function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X=n(381);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var te=n(330);function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ae=n(152),ie=n(212),oe=n.n(ie);function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ue=n(488);function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fe=n(243);function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var me=n(312);function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var be=n(61);function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ee=n(254);function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ce=n(293);function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ke=n(489);function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ie,Pe=(Ie={panelLoadedReducer:function(e,t){var n=t.type,r=t.data;switch(n){case m.a.SET_PANEL_LOADED:return g(g({},e),{},{loaded:g(g({},e.loaded),{},s()({},t.data.id,r.isLoaded))});default:return e}},menuSchoolsReducer:function(e,t){var n=t.type,r=t.data;switch(n){case b.a.SET_MENU_SCHOOLS:return y(y({},e),{},{menuSchoolsLoaded:!0,menuSchools:r});case b.a.SET_MENU_SCHOOL_REQUSTS:return y(y({},e),{},{menuSchoolRequestsLoaded:!0,menuSchoolRequests:r});default:return e}},searchFiltersReducer:function(e,t){var n=t.type,r=t.data;switch(n){case E.a.SET_SEARCH_FILTERS:return w(w({},e),{},{searchFilters:r});case E.a.SET_SEARCH_FILTER_VALUES:return w(w({},e),{},{searchFilters:w(w({},e.searchFilters),{},{values:r})});case E.a.UPDATE_SEARCH_FILTER_VALUES:return w(w({},e),{},{searchFilters:w(w({},e.searchFilters),{},{values:w(w({},e.searchFilters.values),r)})});case E.a.SET_SEARCH_FILTER_MODAL_CALLBACK:return w(w({},e),{},{searchFilterModalCallback:t.data});default:return e}},callsReducer:function(e,t){var n=t.type,r=t.data;switch(n){case C.a.SET_CALLS:return A(A({},e),{},{calls:r});case C.a.SET_CALLS_LIB:return A(A({},e),{},{callsLib:r});default:return e}},registeredAccountReducer:function(e,t){var n=t.type,r=t.data;switch(n){case k.a.SET_REGISTERED_ACCOUNT_INFO:return T(T({},e),{},{registeredAccountInfo:T(T({},e.registeredAccountInfo),r)});case k.a.UPDATE_REGISTERED_ACCOUNT_INFO:return T(T({},e),{},{registeredAccountInfo:T(T(T({},e.registeredAccountInfo),r),{},{errors:T(T({},e.registeredAccountInfo.errors),r.errors)})});default:return e}},chatReducer:function(e,t){var n=t.type,r=t.data;switch(n){case I.a.SET_CHAT_ACCESS_RESTRICTED_TYPE:return N(N({},e),{},{chatAccessRestrictedType:t.data});case I.a.SET_CHAT_PREVIEW:return N(N({},e),{},{chatPreview:t.data});case I.a.SET_CREATE_CHAT_INFO:return N(N({},e),{},{createChatInfo:r?N(N({},r),{},{type:r.grade||!r.isAdmin?P.a.GRADE:P.a.SCHOOL,withSchool:!r.school,withGrade:!r.grade||r.withGrade,selectedUserIds:[],selectedUsersStorage:{},errors:{}}):null});case I.a.UPDATE_CREATE_CHAT_INFO:return N(N({},e),{},{createChatInfo:N(N({},e.createChatInfo),r)});case I.a.SET_CHAT_INFO:return N(N({},e),{},{chatInfo:r});case I.a.UPDATE_CHAT_INFO:return N(N({},e),{},{chatInfo:N(N({},e.chatInfo),r)});case I.a.SET_CHAT_INVITE_LINK_INFO:return N(N({},e),{},{chatInviteLinkInfo:t.data});case I.a.SET_EDIT_CHAT_INFO:return N(N({},e),{},{chatEditInfo:r?N(N({},r),{},{errors:{}}):null});case I.a.UPDATE_EDIT_CHAT_INFO:return N(N({},e),{},{chatEditInfo:e.chatEditInfo?N(N({},e.chatEditInfo),r):r});case I.a.SET_CLASS_CHAT_INFO:return N(N({},e),{},{classChatInfo:r});case I.a.SET_CHATS_IN_STORAGE:return N(N({},e),{},{chatsStorage:N(N({},e.chatsStorage),t.data)});default:return e}},profileReducer:function(e,t){var n=t.type,r=t.data;switch(n){case x.a.SET_PROFILE_SCHOOLS:return M(M({},e),{},{profileSchools:r});case x.a.SET_PROFILE_TOP_CONTACTS:return M(M({},e),{},{profileTopContacts:r.items});case x.a.UPDATE_PROFILE_ADD_SCHOOL:return M(M({},e),{},{profileAddSchool:M(M({},e.profileAddSchool),r)});case x.a.RESET_PROFILE_ADD_SCHOOL:return M(M({},e),{},{profileAddSchool:M({},l.profileAddSchool)});case x.a.SET_PROFILE_COMPACT:return r.clean?M(M({},e),{},{profileCompact:r.profile}):M(M({},e),{},{profileCompact:M(M({},e.profileCompact),r.profile)});case x.a.SET_PROFILE_SCHOOL_GRADE_REQUESTS:return M(M({},e),{},{profileSchoolGradeRequests:r});case x.a.SET_PROFILE_CHATS_IN_STORAGE:return M(M({},e),{},{profileChatsStorage:M(M({},e.profileChatsStorage),{},s()({},t.data.schoolId,{items:t.data.items,count:t.data.count}))});case x.a.SET_PROFILE_CONTACTS_IN_STORAGE:return M(M({},e),{},{profileContactsStorage:M(M({},e.profileContactsStorage),{},s()({},t.data.schoolId,t.data.contacts))});default:return e}},contactsReducer:function(e,t){var n=t.type,r=t.data;switch(n){case L.a.SET_CONTACTS:return F(F({},e),{},{contacts:F(F({},e.contacts),r)});case L.a.SET_CONTACTS_BLACK_LIST:return F(F({},e),{},{contactsBlackList:F(F({},e.contactsBlackList),r)});default:return e}},accountReducer:function(e,t){var n=t.type,r=t.data;switch(n){case H.a.SET_ACCOUNT_INFO:return U(U({},e),{},{accountInfo:r});case H.a.UPDATE_ACCOUNT_INFO:return U(U({},e),{},{accountInfo:U(U({},e.accountInfo),r)});default:return e}},inviteLinkReducer:function(e,t){var n=t.type,r=t.data;switch(n){case z.a.SET_INVITE_LINK_INFO:return W(W({},e),{},{inviteLink:r});case z.a.SET_INVITE_LINK_CREATE_INFO:return W(W({},e),{},{inviteLinkCreateInfo:r});case z.a.UPDATE_INVITE_LINK_CREATE_INFO:return W(W({},e),{},{inviteLinkCreateInfo:W(W({},e.inviteLinkCreateInfo),r)});default:return e}},schoolReducer:function(e,t){var n=t.type,r=t.data;switch(n){case q.a.SET_SCHOOL_INFO:return Y(Y({},e),{},{schoolInfo:r});case q.a.SET_SCHOOL_INFO_ERROR:return Y(Y({},e),{},{schoolInfoError:r});default:return e}},schoolEditReducer:function(e,t){var n=t.type,r=t.data;switch(n){case Z.a.SET_SCHOOL_EDIT_INFO:return J(J({},e),{},{schoolEditInfoOriginal:r,schoolEditInfo:r});case Z.a.UPDATE_SCHOOL_EDIT_INFO:return J(J({},e),{},{schoolEditInfo:J(J({},e.schoolEditInfo),r)});default:return e}},schoolGradeRequestsReducer:function(e,t){var n=t.type,r=t.data;switch(n){case X.a.SET_GRADE_SCHOOL_REQUESTS:return ee(ee({},e),{},{schoolGradeRequests:r});default:return e}},schoolMembersReducer:function(e,t){var n=t.type,r=t.data;switch(n){case te.a.SET_SCHOOL_MEMBERS:return re(re({},e),{},{schoolMembers:r});case te.a.SET_SCHOOL_MEMBER_EDIT_INFO:return re(re({},e),{},{schoolMemberEditInfo:r});case te.a.UPDATE_SCHOOL_MEMBER_EDIT_INFO:return re(re({},e),{},{schoolMemberEditInfo:re(re({},e.schoolMemberEditInfo),r)});default:return e}},schoolGradesReducer:function(e,t){var n=t.type,r=t.data;switch(n){case ae.a.SET_SCHOOL_GRADES:return se(se({},e),{},{schoolGrades:r});case ae.a.SET_SCHOOL_GRADE_EDIT_INFO:return se(se({},e),{},{schoolGradeEditInfo:r});case ae.a.SET_GRADES_IN_STORAGE:return se(se({},e),{},{gradesStorage:se(se({},e.gradesStorage),t.data)});case ae.a.SET_SCHOOL_GRADES_IN_STORAGE:return se(se({},e),{},{schoolGradesStorage:se(se({},e.schoolGradesStorage),{},s()({},t.data.schoolId,t.data.gradeIds))});case ae.a.SET_USER_GRADES_IN_STORAGE:return se(se({},e),{},{userGradesStorage:se(se({},e.userGradesStorage),{},s()({},t.data.schoolId,t.data.gradeIds))});case x.a.SET_PROFILE_SCHOOLS:var a=t.data,i=oe()(a.flatMap((function(e){return e.grades})),"id");return se(se({},e),{},{gradesStorage:se(se({},e.gradesStorage),i)});default:return e}},qrCodeReducer:function(e,t){var n=t.type,r=t.data;switch(n){case ue.a.SET_QR_CODE_PREVIEW_INFO:return de(de({},e),{},{qrCodePreviewInfo:r});default:return e}},documentsReducer:function(e,t){var n=t.type,r=t.data;switch(n){case fe.a.SET_DOC_EDIT_INFO:return he(he({},e),{},{docEditInfo:r});case fe.a.SET_DOC_UPLOAD_INFO:return he(he({},e),{},{docUploadInfo:r});default:return e}},videosReducer:function(e,t){var n=t.type,r=t.data;switch(n){case me.a.SET_VIDEO_UPLOAD_INFO:return ge(ge({},e),{},{videoUploadInfo:r});case me.a.SET_VIDEO_EDIT_INFO:return ge(ge({},e),{},{videoEditInfo:r});default:return e}},messagesReducer:function(e,t){var n=t.type,r=t.data;switch(n){case be.a.SET_MESSAGES_MODAL:return ye(ye({},e),{},{messagesModal:r});case be.a.SET_MESSAGES_MAIN:return ye(ye({},e),{},{messagesMain:r});case be.a.RESET_MESSAGES_MAIN:return ye(ye({},e),{},{messagesMain:void 0});case be.a.SET_MESSAGES_UNREAD_COUNT:return ye(ye({},e),{},{messagesUnreadCount:r});case be.a.SET_MESSAGE_TO_REPLY:return ye(ye({},e),{},{messageToReply:r});case be.a.SET_MESSAGES_ENTRY_POINT:return ye(ye({},e),{},{messagesEntryPoint:r});default:return e}},selectInfoReducer:function(e,t){var n=t.type,r=t.data;switch(n){case Ee.a.SET_SELECT_SCHOOL_INFO:return we(we({},e),{},{selectSchoolInfo:r});case Ee.a.SET_SELECT_CLASSES_INFO:return we(we({},e),{},{selectClassesInfo:r});case Ee.a.SET_SELECT_PARTICIPANTS_INFO:return we(we({},e),{},{selectParticipantsInfo:r});case Ee.a.SET_SELECT_COUNTRY_INFO:return we(we({},e),{},{selectCountryInfo:r});case Ee.a.SET_SELECT_CITY_INFO:return we(we({},e),{},{selectCityInfo:r});default:return e}},scheduleReducer:function(e,t){switch(t.type){case Ce.a.SET_EVENT_FORM_INFO:return Ae(Ae({},e),{},{eventFormInfo:t.data,eventGradeOptions:null===t.data?null:e.eventGradeOptions,eventChatOptions:null===t.data?null:e.eventChatOptions,eventContactsOptions:null===t.data?null:e.eventContactsOptions});case Ce.a.SET_EVENT_GRADE_OPTIONS:return Ae(Ae({},e),{},{eventGradeOptions:t.data});case Ce.a.SET_EVENT_CHAT_OPTIONS:return Ae(Ae({},e),{},{eventChatOptions:t.data});case Ce.a.SET_EVENT_CONTACTS_OPTIONS:return Ae(Ae({},e),{},{eventContactsOptions:t.data});default:return e}},userProfilesReducer:function(e,t){switch(t.type){case ke.a.SET_USER_PROFILES_IN_STORAGE:return Te(Te({},e),{},{userProfilesStorage:Te(Te({},e.userProfilesStorage),t.data)});default:return e}}},function(e,t){return Object.values(Ie).reduce((function(e,n){return n(e,t)}),e)}),De=Object(i.createContext)(h),Ne=Object(i.createContext)((function(){})),xe=function(e){var t=e.children,n=Object(i.useReducer)(Pe,h),r=a()(n,2),c=r[0],s=r[1];return Object(i.useEffect)((function(){window.debugStore&&console.log(c)}),[c]),o.a.createElement(De.Provider,{value:c},o.a.createElement(Ne.Provider,{value:s},t))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return W})),n.d(t,"a",(function(){return q}));var r=n(30),a=n.n(r),i=n(31),o=n.n(i),c=n(11),s=n.n(c),u=n(33),l=n.n(u),d=n(39),f=n.n(d),p=n(34),h=n.n(p),m=n(2),v=n.n(m),g=n(0),b=n.n(g),_=n(26),y=n.n(_),E=n(365),O=/\d+:[a-zA-Z_]+:login:auth/,w={domain:"login.vk.com"};var C,S,A={},k={};function j(e,t,n,r,a){var i;void 0===a&&(a={});var o=w;n&&(o=Object.assign({},w,n));var c,s=o.appId+":"+e+":login:auth",u=!k[s]||r;try{c=JSON.parse(localStorage.getItem(s))}catch(f){c={}}if(A[s])return A[s];if(u)try{T(e,n)}catch(f){}else{var l=void 0;try{l=localStorage.getItem(s)}catch(f){console.error(f)}if(l)try{var d=JSON.parse(l);if(1e3*Number(d.expires)-Date.now()>=6e4)return Promise.resolve(d);T(e,n)}catch(f){}}var f,p=o.domain,h=o.onCaptcha,m="https://"+p+"/?act="+e,v={version:(f=o).version||"1",app_id:f.appId},g=Object.assign({},t,v,{access_token:null==c?void 0:c.access_token});return i=Object(E.b)(m,g,a).then((function(r){var a;if(delete A[s],"error"===r.type)return Promise.reject({type:"login_error",error:r.error_info,errorCode:null!==(a=r.error_code)&&void 0!==a?a:"unknown_error"});if("captcha"===r.type){if(!h)return Promise.reject({type:"login_error",error:"captcha"});var i=r.captcha_sid,o=r.captcha_img,c=r.captcha_type;return h({captcha_sid:i,captcha_img:o,captcha_type:c}).then((function(r){var a=Object.assign({},t,r);return j(e,a,n)}))}var u=r.data.expires||1/0;try{localStorage.setItem(s,JSON.stringify(Object(E.a)(Object(E.a)({},r.data),{expires:u})))}catch(r){console.error(r)}return k[s]=!0,r.data}),(function(e){return delete A[s],{type:"network_error",error:e}})),A[s]=i,i}function T(e,t){if(e){var n=w;t&&(n=Object.assign({},w,t));var r=n.appId+":"+e+":login:auth";try{localStorage.removeItem(r)}catch(e){}}else try{Object.keys(localStorage).forEach((function(e){O.test(e)&&localStorage.removeItem(e)}))}catch(e){}}function I(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return j("web_token",{},null,e).then((function(e){return e.access_token?e:Promise.reject(e)})).catch((function(e){return Promise.reject(e)}))}(S=C||(C={})).PASSWORD_CONFIRMATION_REQUIRED="password_confirmation_required",S.PHONE_VALIDATION_REQUIRED="phone_validation_required",S.USER_ALREADY_HAS_EXTERNAL_BINDING="user_already_has_external_binding";var P=n(170),D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;try{localStorage.removeItem("".concat(e,":vkui-common:auth"))}catch(e){console.error(e)}},N=n(51),x=n(1),R=n(223),M=n(120),L=n(642),B=n(377),F=n(282);function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}function z(){throw new Error("AppContext is undefined")}var G=Object(g.createContext)({getAccessToken:function(){z()},getAccessTokenExpires:function(){return z(),0},isAuthorized:function(){return z(),!1},requestAccessToken:function(){return z(),Promise.reject()},requestLogout:function(){return z(),Promise.resolve(void 0)}});function W(){return Object(g.useContext)(G)}var q=function(e){l()(n,e);var t=U(n);function n(e){var r;a()(this,n),r=t.call(this,e),v()(s()(r),"isAccessTokenRequestedByBridge",!1),v()(s()(r),"requestAccessToken",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.force,n=void 0===t||t,a=r.props,i=a.app_id,o=a.scope,c=a.supportsBrowserAuth,s=a.onBrowserAuthFail;if("function"==typeof r.props.onRequestAccessToken){Object(P.c)(P.b);var u=r.getLocalAccessToken({force:n});return u?(r.onAccessTokenReceived(V({},u)),Promise.resolve()):r.customAuth({force:n}).then(r.onAccessTokenReceived).catch((function(e){if(e&&"error"===e.type&&"unauthorized"===e.error_info)r.onAccessTokenReceived({access_token:""});else{if(!e||"error"!==e.type||"reject_captcha"!==e.error_info)return s&&s();r.requestLogout()}}))}if(c&&(N.c||N.g))return Object(P.c)(P.b),I(n).then((function(e){return r.onAccessTokenReceived(V({},e))})).catch((function(e){var t=e&&"login_error"===e.type;if(t&&"unauthorized"===e.error)r.onAccessTokenReceived({access_token:""});else{if(!t||"captcha"!==e.error)return s&&s();r.requestLogout()}}));if(y.a.supports("VKWebAppGetAuthToken")){Object(P.c)(P.b);var l={app_id:i,scope:o};r.props.cacheAccessToken&&(l.use_cache=!0),N.e&&Object(x.Nb)()===x.a&&delete l.use_cache,n&&(l.force=!0),r.isAccessTokenRequestedByBridge=!0,y.a.send("VKWebAppGetAuthToken",l)}return Promise.resolve()})),v()(s()(r),"getLocalAccessToken",(function(e){if(e.force)return D(r.props.app_id),null;var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;try{var t=JSON.parse(localStorage.getItem("".concat(e,":vkui-common:auth")));if(!t.access_token)return{access_token:""};var n=Number(t.expires);return 1e3*n-Date.now()<6e4?(D(e),{access_token:""}):t}catch(e){return{access_token:""}}}(r.props.app_id);return t.access_token?t:null})),v()(s()(r),"customAuth",(function(e){return r.props.onRequestAccessToken(e).then((function(e){return"captcha"===e.type?r.handleCaptcha(e).then(r.customAuth):e}))})),v()(s()(r),"requestLogout",(function(){var e=r.props,t=e.app_id,n=e.onLogout;return T("web_token"),D(t),n?Promise.resolve(n()):Promise.resolve()})),v()(s()(r),"onAccessTokenReceived",(function(e){var t=e.access_token,n=e.user_id,a=e.logout_hash,i=e.expires;r.state.user_id&&n!==r.state.user_id&&r.props.onUserChange&&r.props.onUserChange(n),Object(P.c)(P.a);var o=i||1/0;!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;if(t.expires&&t.access_token)try{localStorage.setItem("".concat(e,":vkui-common:auth"),JSON.stringify(t))}catch(e){console.error(e)}}(r.props.app_id,V(V({},e),{},{expires:o})),r.setState({isAuthReady:!0,access_token:t,user_id:n,logout_hash:a,token_expires:o})})),v()(s()(r),"onAccessTokenFailed",(function(){y.a.send("VKWebAppClose",{status:"error",text:Object(M.b)("vkui_common_api_error_access","Ошибка доступа")})})),v()(s()(r),"handleCaptcha",(function(e){return new Promise((function(t,n){var a=function(){r.setState({captchaPopout:null}),r.handleCaptcha(e).then(t).catch(n)},i=function(){r.setState({captchaPopout:null}),n({type:"error",error_info:"reject_captcha"})},o=function(){r.handleCaptchaClose(a,i)},c=null;"recaptcha"===e.captcha_type?c=b.a.createElement(L.a,{sitekey:e.key,lang_code:e.lang_code,onSubmit:function(e){e?(r.setState({captchaPopout:null}),t({recaptcha:e})):o()}}):"regular"===e.captcha_type&&(c=b.a.createElement(B.a,{captcha_sid:e.captcha_sid,captcha_img:e.captcha_img,onSubmit:function(a){if(r.setState({captchaPopout:null}),!a)return n({type:"error",error_info:"unauthorized"});t({captcha_sid:e.captcha_sid,captcha_key:a})},onCancel:o,onClose:a})),r.setState({captchaPopout:c})}))})),v()(s()(r),"handleCaptchaClose",(function(e,t){var n=b.a.createElement(x.e,{actions:[{title:Object(M.b)("vkui_common_captcha_continue"),mode:"default",action:e},{title:Object(M.b)("vkui_common_captcha_reject"),mode:"cancel",action:t}],header:Object(M.b)("vkui_common_captcha_reject_title"),onClose:e});r.setState({captchaPopout:n})})),v()(s()(r),"getAccessToken",(function(){return r.state.access_token})),v()(s()(r),"getAccessTokenExpires",(function(){return r.isAuthorized()&&r.state.token_expires?r.state.token_expires:0})),v()(s()(r),"isAuthorized",(function(){return!!r.state.access_token})),v()(s()(r),"authContext",Object(F.a)((function(){var e=r.state,t=e.access_token,n=e.isAuthReady,a=e.captchaPopout;return{access_token:t,isAuthReady:n,logout_hash:e.logout_hash,captchaPopout:a,getAccessToken:r.getAccessToken,getAccessTokenExpires:r.getAccessTokenExpires,isAuthorized:r.isAuthorized,requestAccessToken:r.requestAccessToken,requestLogout:r.requestLogout}})));var i=e.app_id,o=e.access_token,c=e.loginHost;return r.state={app_id:i,isAuthReady:!!o||!i,access_token:o,token_expires:o?1/0:0,loginHost:c},function(e){e=Object.assign({},w,e),w=e}({appId:i,domain:c,onCaptcha:r.handleCaptcha}),r}return o()(n,[{key:"componentDidMount",value:function(){var e=this;y.a.subscribe((function(t){if(e.isAccessTokenRequestedByBridge)switch(t.detail.type){case"VKWebAppGetAuthTokenResult":case"VKWebAppAccessTokenReceived":var n=t.detail.data,r=n.access_token,a=n.expires;e.onAccessTokenReceived({access_token:r,expires:a||R.a}),e.isAccessTokenRequestedByBridge=!1;break;case"VKWebAppGetAuthTokenFailed":case"VKWebAppAccessTokenFailed":e.onAccessTokenFailed(),e.isAccessTokenRequestedByBridge=!1}}))}},{key:"render",value:function(){return b.a.createElement(G.Provider,{value:this.authContext()},this.props.children)}}]),n}(g.Component)},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(2),a=n.n(r),i=n(228),o=n(28),c=n(0),s=n(251),u=n(62),l=n(284),d=n(162),f=n(24),p=n(130);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(f.b)(),r=n.apiRequest,a=Object(o.b)(),h=a.schoolInfo,v=Object(o.a)(),g=h&&h.id===e,b=Object(c.useCallback)((function(t){return Object(u.g)({school_id:e}),Object(l.a)(!0),Object(d.a)((function(){v(Object(i.b)(null)),v(Object(i.c)(null))})),r("education.getSchoolById",{school_id:e,fields:"description,site,phone,status,members_count",v:"5.124"},{signal:t}).then((function(e){var t=m(m({},e),{},{canManage:e.admin_level>=s.a.EDITOR,isAdmin:e.admin_level===s.a.ADMINISTRATOR});return v(Object(i.b)(t)),t})).catch((function(e){throw v(Object(i.c)(e)),e}))}),[e]),_=Object(p.a)({requestFn:b,deps:[e]});return Object(c.useEffect)((function(){t&&!g&&e&&_()}),[t,g,e]),{isSchoolInfoLoaded:g,schoolInfo:h,fetchSchoolInfo:_}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return d}));var r=n(2),a=n.n(r),i=n(62),o=n(117);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(e){var t=s(s({},Object(i.b)()),e);Object(i.f)(o.a.registration,t)},l=function(e){var t=s(s({},Object(i.b)()),e);Object(i.f)(o.a.registration,t,!0)},d=function(e,t,n){u({event_type:"field_input",field_name:e,field_value:"".concat(t),field_name_group:n})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0),a=function(e){return Object(r.useCallback)((function(t){return e?"".concat(t,"_channel"):t}),[e])}},function(e,t,n){"use strict";var r;function a(e){return{type:r.SET_SCHOOL_MEMBERS,data:e}}function i(e){return{type:r.SET_SCHOOL_MEMBER_EDIT_INFO,data:e}}function o(e){return{type:r.UPDATE_SCHOOL_MEMBER_EDIT_INFO,data:e}}n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return o})),function(e){e.SET_SCHOOL_MEMBERS="SET_SCHOOL_MEMBERS",e.SET_SCHOOL_MEMBER_EDIT_INFO="SET_SCHOOL_MEMBER_EDIT_INFO",e.UPDATE_SCHOOL_MEMBER_EDIT_INFO="UPDATE_SCHOOL_MEMBER_EDIT_INFO"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(2),a=n.n(r),i=n(87),o=n(132),c=n(9);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=Object(c.createStore)({list:[],loading:!1}).on([o.a,i.e],(function(e){return u(u({},e),{},{loading:!0})})).on([o.a.finally,i.e.finally],(function(e){return u(u({},e),{},{loading:!1})})).on(o.a.done,(function(e,t){var n;return u(u({},e),{},{list:null==t||null===(n=t.result)||void 0===n?void 0:n.services})})).on(i.e.done,(function(e,t){var n;return u(u({},e),{},{list:null===(n=t.params)||void 0===n?void 0:n.map((function(n,r){var a,i,o;return u(u({},null==e||null===(a=e.list)||void 0===a?void 0:a[r]),{},{schools:null===(i=t.result)||void 0===i||null===(o=i[r])||void 0===o?void 0:o.schools})}))})}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(357),a=n(67),i=function(e){if(!e)return null;var t=Object(r.a)(e).isVertical;return e.isTeacherInSchool?t?a.g.TEACHER:a.g.EMPLOYEE:a.g.STUDENT}},function(e,t,n){var r=n(265),a=n(195);e.exports=function(e){return"symbol"==typeof e||a(e)&&"[object Symbol]"==r(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l}));var r=n(2),a=n.n(r),i=n(62),o=n(117);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(e){if(e){var t=e.match(/\d*$/);return Array.isArray(t)&&t.length?+t[0]:void 0}},l=function(e){var t=s(s({},Object(i.b)()),{},{grade_id:0},e);Object(i.f)(o.a.messenger,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(7),a=n.n(r),i=n(26),o=n.n(i),c=n(38),s=n(141),u=n(5),l=n(32),d=n(156),f=n(406),p=n(0),h=n(9),m=Object(h.createStore)([]).on(d.a.doneData,(function(e,t){return t.types})).on(d.d,(function(e){return e.slice(1)})),v=function(){var e=Object(c.c)(Object(h.combine)([s.a,m])),t=a()(e,2),n=t[0],r=t[1],i=Object(l.a)().go;Object(p.useEffect)((function(){if(r.length>0){var e=r[0].type;setTimeout((function(){i(f.d[e],{type:e})}),3e3)}}),[r]);return{getUserOnboardingStatus:function(){o.a.isWebView()||null!==n.activeModal||Object(d.a)()},setUserOnboardingStatus:function(){var e={type:n.params[u.i.INTRO_ONBOARDING].type,status:f.c.Finished};Object(d.c)(e)},incUserOnboardingShowsCounter:function(){var e=n.params[u.i.GRADES_MANAGEMENT_ONBOARDING].type;Object(d.b)(e)}}}},,,,,,,,,function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";var r=n(73)("%TypeError%"),a=n(832),i=n(263),o=n(147);e.exports=function(e,t){if("Object"!==o(e))throw new r("Assertion failed: Type(O) is not Object");if(!i(t))throw new r("Assertion failed: IsPropertyKey(P) is not true, got "+a(t));return e[t]}},function(e,t,n){"use strict";var r=n(73)("%Array%"),a=!r.isArray&&n(264)("Object.prototype.toString");e.exports=r.isArray||function(e){return"[object Array]"===a(e)}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,n){var r=n(904),a=n(905),i=n(906),o=n(907),c=n(908);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=a,s.prototype.get=i,s.prototype.has=o,s.prototype.set=c,e.exports=s},function(e,t,n){var r=n(350);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){var r=n(236)(Object,"create");e.exports=r},function(e,t,n){var r=n(922);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},function(e,t,n){var r=n(934),a=n(447),i=n(935),o=n(574),c=n(936),s=n(265),u=n(561),l=u(r),d=u(a),f=u(i),p=u(o),h=u(c),m=s;(r&&"[object DataView]"!=m(new r(new ArrayBuffer(1)))||a&&"[object Map]"!=m(new a)||i&&"[object Promise]"!=m(i.resolve())||o&&"[object Set]"!=m(new o)||c&&"[object WeakMap]"!=m(new c))&&(m=function(e){var t=s(e),n="[object Object]"==t?e.constructor:void 0,r=n?u(n):"";if(r)switch(r){case l:return"[object DataView]";case d:return"[object Map]";case f:return"[object Promise]";case p:return"[object Set]";case h:return"[object WeakMap]"}return t}),e.exports=m},function(e,t,n){var r=n(148),a=n(455),i=n(940),o=n(943);e.exports=function(e,t){return r(e)?e:a(e,t)?[e]:i(o(e))}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}},function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r=n(6),a=n.n(r),i=n(2),o=n.n(i),c=n(7),s=n.n(c),u=n(0),l=n.n(u),d=n(328),f=n(219),p=n(382),h=n(227),m=n(295),v=n(5),g=n(28),b=n(62),_=n(42),y=n(23),E=n(121),O=n(55),w=n(84),C=n(32);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e){var t=e.displayName||e.name||"Component",n=function(t){var n=Object(u.useContext)(p.a),r=n.loadMainInfo,i=n.startApp,o=Object(C.a)().go,c=Object(w.a)(),S=c.isAuthorized,k=c.requestAccessToken,j=Object(O.a)().showAlertError,T=Object(h.c)().apiRequest,I=Object(g.b)(),P=Object(g.a)(),D=function(e){P(Object(m.b)({id:e.id,firstName:e.firstName,lastName:e.lastName,sex:e.sex||0,bdate:e.bdate||void 0,photo:e.photo,hasPhoto:e.hasPhoto,photoRawId:e.photoRawId,isAdminInSchools:e.isAdminInSchools,signupRequired:e.signupRequired})),e.isAdminInSchools?o(v.i.REGISTRATION_ADMIN):o(v.i.REGISTRATION_PROFILE)},N=function(){return T("education.hasAdminProposal")};return l.a.createElement(e,a()({onStart:function(){Object(E.b)(E.a.RegistrationButtonClick),S()?(Object(d.b)({event_type:"auth_success"}),N().then((function(e){D(A(A({},I.accountInfo),{},{isAdminInSchools:!!e}))}))):(Object(d.a)({event_type:"auth_page_start"}),Object(f.a)().then((function(e){return e.payload&&e.payload.auth?Object(f.b)(e):Promise.reject()})).then((function(){return k()})).then((function(){return S()?Promise.all([r(),N()]):Promise.reject()})).then((function(e){var t,n,r,a=s()(e,2),o=a[0],c=a[1];(Object(b.i)(null==o||null===(t=o.primaryProfile)||void 0===t?void 0:t.id),null!=o&&null!==(n=o.primaryProfile)&&void 0!==n&&n.id)&&Object(_.c)(y.E,"".concat(null==o||null===(r=o.primaryProfile)||void 0===r?void 0:r.id));Object(d.b)({event_type:"auth_success"}),o.signupRequired?D(A(A({},o),{},{isAdminInSchools:!!c})):i()})).catch((function(e){e&&j(e)})))}},t))};return n.displayName="withOnStart(".concat(t,")"),n}},function(e,t,n){"use strict";function r(e){var t,n,r=null==e||null===(t=e.organization_type)||void 0===t?void 0:t.structure;return{orgTitle:null==e||null===(n=e.organization_type)||void 0===n?void 0:n.title,isVertical:"vertical"===r,isHorizontal:"horizontal"===r,orgStructure:r}}n.d(t,"a",(function(){return r}))},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r=n(6),a=n.n(r),i=n(12),o=n.n(i),c=n(675),s=n(401),u=n(1),l=n(0),d=n.n(l),f=n(106),p=n(59),h=n(674),m=n(119),v=n(115),g=n(332),b=n(360),_=n(394),y=n(395),E=n(273),O=n(28),w=n(26),C=n.n(w),S=n(202),A=["call","event","broadcast","hasCurrentCall","now","compact","isMobile","isIcon","startLabelValue"],k=function(e){var t=e.call,n=e.event,r=e.broadcast,i=e.hasCurrentCall,l=e.now,w=e.compact,k=e.isMobile,j=e.isIcon,T=e.startLabelValue,I=o()(e,A),P=Object(f.c)().getLangKey,D=Object(O.b)(),N=D.accountInfo,x=D.callsLib,R=Object(v.a)().profileSchools.find((function(e){return e.id===(null==n?void 0:n.school_id)})),M=!C.a.isWebView()&&!x,L=Object(g.a)(R),B=!!t,F=t&&Object(p.n)(t),H=n&&Object(h.a)(l,{start:n.from,end:n.to})||r&&r.isInProgress,V=(n&&l>n.to||r&&r.isFinished)&&!t,U=n&&Object(m.b)(n,L,N.id)||r&&Object(y.b)(r,N.id),z=n&&!t,G=Object(_.a)(),W=Object(b.a)(),q=Object(E.a)().showBroadcastVideo,K=function(){r&&!U?(Object(S.b)(r.liveVideo),q(r.liveVideo.player)):W({event:n,call:t,broadcast:r})};if(F){var Y=M||!(null!=x&&x.isInActiveCall)||V;return j?d.a.createElement(u.J,{icon:d.a.createElement(c.a,{width:28,height:28}),onClick:G,disabled:Y}):d.a.createElement(u.j,a()({},I,{size:k?"l":"m",mode:"secondary",stretched:w,before:d.a.createElement(c.a,{width:24,height:24}),onClick:G,disabled:Y}),P("vkui_edu_calls_expand_call"))}if(!B&&U){var Z=M||i||V;return j?d.a.createElement(u.J,{icon:d.a.createElement(s.a,null),onClick:K,disabled:Z}):d.a.createElement(u.j,a()({},I,{size:k?"l":"m",mode:H?"commerce":"primary",before:d.a.createElement(s.a,{width:24,height:24}),onClick:K,disabled:Z,stretched:w}),T||P(r?"vkui_edu_broadcast_snippet_start":"vkui_edu_calls_start_event"))}var Q=M||V||i||z;return j?d.a.createElement(u.J,{icon:d.a.createElement(s.a,null),onClick:K,disabled:Q}):d.a.createElement(u.j,a()({},I,{size:k?"l":"m",mode:"commerce",before:d.a.createElement(s.a,{width:24,height:24}),onClick:K,disabled:Q,stretched:w}),P(r?"vkui_edu_broadcast_snippet_join":"vkui_edu_calls_join"))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var r=n(109),a=n.n(r),i=n(7),o=n.n(i),c=n(165),s=n.n(c),u=n(20),l=n(5),d=n(26),f=n.n(d),p=n(369),h=n(48),m=n(32),v=n(55),g=n(24),b=n(210),_=function(){var e=Object(m.a)().go,t=Object(v.a)().showAlertError,n=Object(g.b)().apiRequest,r=Object(b.a)(),i=r.onCallJoinByLink,c=r.onCallGroup;return function(){var r=s()(a.a.mark((function r(s){var d,m,v,g,b,_,y,E,O,w,C,S,A,k,j,T;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(d=s.event,m=s.call,v=s.broadcast,g=s.onCallImmediate,r.prev=1,!m){r.next=7;break}b=m.joinLink,_=m.peerId,r.next=22;break;case 7:if(!d){r.next=15;break}return C=null===(w=d.chat)||void 0===w?void 0:w.toString(),r.next=11,Object(p.b)(n,{link:C},{showSpinner:!0});case 11:S=r.sent,_=Object(h.b)(S.local_id),r.next=16;break;case 15:v&&(_=Object(h.b)(v.eventChat.id),E=v.liveVideo.ov_id);case 16:return r.next=18,n("messages.getConversationsById",{peer_ids:String(_)});case 18:A=r.sent,k=o()(A.items,1),j=k[0],null!==(O=j.call_in_progress)&&void 0!==O&&O.join_link?b=j.call_in_progress.join_link:y={peerId:_,name:j.chat_settings.title,photo:null===(T=j.chat_settings.photo)||void 0===T?void 0:T.photo_100,tab:j.chat_settings.title};case 22:v||f.a.isWebView()?(null==g||g(),b?i(_,b):c(_,y,E)):u.d.isMobile||u.d.isIPad?e(l.i.MOBILE_JOIN_CALL,{joinLink:b,peerId:_,chatInfo:y}):e(l.i.JOIN_CALL,{joinLink:b,peerId:_,chatInfo:y,broadcastOvId:E}),r.next=29;break;case 25:throw r.prev=25,r.t0=r.catch(1),t(r.t0),r.t0;case 29:case"end":return r.stop()}}),r,null,[[1,25]])})));return function(e){return r.apply(this,arguments)}}()}},function(e,t,n){"use strict";var r=n(6),a=n.n(r),i=n(0),o=n.n(i),c=n(106);t.a=function(e){return function(t){var n=Object(c.c)();return o.a.createElement(e,a()({},t,{getLangKey:n.getLangKey,langUtils:n}))}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(26),a=n.n(r),i=n(379),o=n(5),c=n(32),s=function(){var e=Object(c.a)().go;return{showSupport:function(){a.a.isWebView()?a.a.send("VKWebAppOpenApp",i.b):e(o.i.SUPPORT)},hideSupport:function(){var t=o.d.getState();e(t.page,t.params)}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(14),a=n(0),i=n.n(a),o=n(364),c=n(67),s=n(1),u=(n(995),n(579)),l=function(e){return e.mode===c.f.UPCOMING?i.a.createElement(s.C,null,i.a.createElement(o.a,{isInProgress:!0})):i.a.createElement(u.a,{inBorders:!0,top:i.a.createElement(i.a.Fragment,null,i.a.createElement(r.a,{width:"93px",height:"16px",className:"ScheduleEventListSkeleton__titleLine"}),i.a.createElement(r.a,{width:"304px",height:"12px",className:"ScheduleEventListSkeleton__controlLine"})),bottom:i.a.createElement(r.a,{width:"151px",height:"30px",className:"ScheduleEventListSkeleton__createButtonLine"})})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=n.n(r),i=(n(994),n(14)),o=n(1),c=function(e){var t=e.isInProgress,n=e.className,r=Object(o.Lb)("ScheduleEventSkeleton",n);return t?a.a.createElement("div",{className:r},a.a.createElement("div",{className:Object(o.Lb)("ScheduleEventSkeleton__Col","ScheduleEventSkeleton__Col--grow")},a.a.createElement(i.a,{width:"304px",height:"20px"}),a.a.createElement(i.a,{width:"100px",height:"20px"})),a.a.createElement("div",{className:"ScheduleEventSkeleton__Col"},a.a.createElement(i.a,{width:"148px",height:"36px"}))):a.a.createElement("div",{className:r},a.a.createElement("div",{className:"ScheduleEventSkeleton__Col"},a.a.createElement(i.a,{width:"102px",height:"12px"})),a.a.createElement("div",{className:"ScheduleEventSkeleton__Col"},a.a.createElement(i.a,{width:"170px",height:"12px"})))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function a(e){return Object.keys(e).map((function(t){var n=e[t];return(t=encodeURIComponent(t||""))+"="+encodeURIComponent(n||"")})).join("&")}function i(e,t,n){void 0===n&&(n={});var i=a(t);return fetch(e,r({method:"POST",body:i,mode:"cors",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"}},n)).then((function(e){return e.json()}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(6),a=n.n(r),i=n(12),o=n.n(i),c=n(0),s=n.n(c),u=(n(1048),n(1)),l=["className","src","noShadow","children","overlay","emptyIcon"],d=function(e){var t=e.className,n=e.src,r=e.noShadow,i=e.children,c=e.overlay,d=e.emptyIcon,f=o()(e,l),p=n?"img":"div";return s.a.createElement("div",a()({className:Object(u.Lb)(t,"Thumb")},f),s.a.createElement("div",{className:"Thumb__in"},(!!n||!d)&&s.a.createElement(p,{className:"Thumb__image",src:n}),!n&&!!d&&s.a.createElement("div",{className:"Thumb__icon-wrap"},s.a.createElement("div",{className:Object(u.Lb)("Thumb__icon")},d)),!r&&!!n&&s.a.createElement("div",{className:"Thumb__shadow"}),i&&s.a.createElement("div",{className:"Thumb__children"},i),s.a.createElement("div",{className:Object(u.Lb)("Thumb__overlay",{"Thumb__overlay--showed":!!c})},c)))}},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.Test="sfrm_test",e.ProfileId="sfrm_profile_id",e.EJD_1="sfrm_ejd_1"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(114),a=n(22),i=function(){function e(){this.getFragmentDoc=Object(r.c)(a.p)}return e.prototype.recordOptimisticTransaction=function(e,t){this.performTransaction(e,t)},e.prototype.transformDocument=function(e){return e},e.prototype.identify=function(e){},e.prototype.gc=function(){return[]},e.prototype.modify=function(e){return!1},e.prototype.transformForLink=function(e){return e},e.prototype.readQuery=function(e,t){return void 0===t&&(t=!!e.optimistic),this.read({rootId:e.id||"ROOT_QUERY",query:e.query,variables:e.variables,returnPartialData:e.returnPartialData,optimistic:t})},e.prototype.readFragment=function(e,t){return void 0===t&&(t=!!e.optimistic),this.read({query:this.getFragmentDoc(e.fragment,e.fragmentName),variables:e.variables,rootId:e.id,returnPartialData:e.returnPartialData,optimistic:t})},e.prototype.writeQuery=function(e){return this.write({dataId:e.id||"ROOT_QUERY",result:e.data,query:e.query,variables:e.variables,broadcast:e.broadcast})},e.prototype.writeFragment=function(e){return this.write({dataId:e.id,result:e.data,variables:e.variables,query:this.getFragmentDoc(e.fragment,e.fragmentName),broadcast:e.broadcast})},e}()},function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l}));var r=n(2),a=n.n(r),i=n(83);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e){var t=e.grades?e.grades.filter((function(e){return!Object(i.i)(e)})).map(i.b).join(","):void 0,n=e.title;return t?"".concat(e.title," · ").concat(t):n}function u(e){return e.photo}function l(e,t,n){return e("messages.getChatPreview",c(c({},t),{},{device_id:"anyId"}),{grouping:!1,showSpinner:null==n?void 0:n.showSpinner}).then((function(e){return e.preview}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(5),a=n(26),i=n.n(a),o=n(173),c=n(174),s=n(32);function u(e){var t=Object(s.a)().go,n=Object(c.a)().isClientVersionMatches;return function(){if(i.a.isWebView()&&n(o.a.NATIVE_EVENT_MODALS)){var a={action:"plateCreateCall",payload:{schoolId:e}};i.a.send("VKWebAppCustomMessage",a)}else t(r.i.CREATE_CALL_MODAL,{schoolId:e})}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(9),a=Object(r.createStore)({completed:!1,nps:null})},function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var r=n(116),a=Object.prototype.hasOwnProperty;var i=n(36),o=function(e,t){var n;try{n=JSON.stringify(e)}catch(e){var r=new i.a(23);throw r.parseError=e,r}return n},c=n(16),s=n(666),u=n(393);function l(e){return Object(s.b)(e,{leave:d})}var d={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return p(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,r=m("(",p(e.variableDefinitions,", "),")"),a=p(e.directives," "),i=e.selectionSet;return n||a||r||"query"!==t?p([t,p([n,r]),a,i]," "):i},VariableDefinition:function(e){var t=e.variable,n=e.type,r=e.defaultValue,a=e.directives;return t+": "+n+m(" = ",r)+m(" ",p(a," "))},SelectionSet:function(e){return h(e.selections)},Field:function(e){var t=e.alias,n=e.name,r=e.arguments,a=e.directives,i=e.selectionSet,o=m("",t,": ")+n,c=o+m("(",p(r,", "),")");return c.length>80&&(c=o+m("(\n",v(p(r,"\n")),"\n)")),p([c,p(a," "),i]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+m(" ",p(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,r=e.selectionSet;return p(["...",m("on ",t),p(n," "),r]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,r=e.variableDefinitions,a=e.directives,i=e.selectionSet;return"fragment ".concat(t).concat(m("(",p(r,", "),")")," ")+"on ".concat(n," ").concat(m("",p(a," ")," "))+i},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n=e.value;return e.block?Object(u.b)(n,"description"===t?"":"  "):JSON.stringify(n)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+p(e.values,", ")+"]"},ObjectValue:function(e){return"{"+p(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+m("(",p(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:f((function(e){var t=e.directives,n=e.operationTypes;return p(["schema",p(t," "),h(n)]," ")})),OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:f((function(e){return p(["scalar",e.name,p(e.directives," ")]," ")})),ObjectTypeDefinition:f((function(e){var t=e.name,n=e.interfaces,r=e.directives,a=e.fields;return p(["type",t,m("implements ",p(n," & ")),p(r," "),h(a)]," ")})),FieldDefinition:f((function(e){var t=e.name,n=e.arguments,r=e.type,a=e.directives;return t+(b(n)?m("(\n",v(p(n,"\n")),"\n)"):m("(",p(n,", "),")"))+": "+r+m(" ",p(a," "))})),InputValueDefinition:f((function(e){var t=e.name,n=e.type,r=e.defaultValue,a=e.directives;return p([t+": "+n,m("= ",r),p(a," ")]," ")})),InterfaceTypeDefinition:f((function(e){var t=e.name,n=e.interfaces,r=e.directives,a=e.fields;return p(["interface",t,m("implements ",p(n," & ")),p(r," "),h(a)]," ")})),UnionTypeDefinition:f((function(e){var t=e.name,n=e.directives,r=e.types;return p(["union",t,p(n," "),r&&0!==r.length?"= "+p(r," | "):""]," ")})),EnumTypeDefinition:f((function(e){var t=e.name,n=e.directives,r=e.values;return p(["enum",t,p(n," "),h(r)]," ")})),EnumValueDefinition:f((function(e){return p([e.name,p(e.directives," ")]," ")})),InputObjectTypeDefinition:f((function(e){var t=e.name,n=e.directives,r=e.fields;return p(["input",t,p(n," "),h(r)]," ")})),DirectiveDefinition:f((function(e){var t=e.name,n=e.arguments,r=e.repeatable,a=e.locations;return"directive @"+t+(b(n)?m("(\n",v(p(n,"\n")),"\n)"):m("(",p(n,", "),")"))+(r?" repeatable":"")+" on "+p(a," | ")})),SchemaExtension:function(e){var t=e.directives,n=e.operationTypes;return p(["extend schema",p(t," "),h(n)]," ")},ScalarTypeExtension:function(e){return p(["extend scalar",e.name,p(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,a=e.fields;return p(["extend type",t,m("implements ",p(n," & ")),p(r," "),h(a)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,a=e.fields;return p(["extend interface",t,m("implements ",p(n," & ")),p(r," "),h(a)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,r=e.types;return p(["extend union",t,p(n," "),r&&0!==r.length?"= "+p(r," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,r=e.values;return p(["extend enum",t,p(n," "),h(r)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,r=e.fields;return p(["extend input",t,p(n," "),h(r)]," ")}};function f(e){return function(t){return p([t.description,e(t)],"\n")}}function p(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null!==(t=null==e?void 0:e.filter((function(e){return e})).join(n))&&void 0!==t?t:""}function h(e){return m("{\n",v(p(e,"\n")),"\n}")}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return null!=t&&""!==t?e+t+n:""}function v(e){return m("  ",e.replace(/\n/g,"\n  "))}function g(e){return-1!==e.indexOf("\n")}function b(e){return null!=e&&e.some(g)}var _={http:{includeQuery:!0,includeExtensions:!1},headers:{accept:"*/*","content-type":"application/json"},options:{method:"POST"}},y=n(668),E=n(150),O=n(22);var w=function(e){void 0===e&&(e={});var t=e.uri,n=void 0===t?"/graphql":t,s=e.fetch,u=e.includeExtensions,d=e.useGETForQueries,f=e.includeUnusedVariables,p=void 0!==f&&f,h=Object(c.f)(e,["uri","fetch","includeExtensions","useGETForQueries","includeUnusedVariables"]);!function(e){if(!e&&"undefined"==typeof fetch)throw new i.a(22)}(s),s||(s=fetch);var m={http:{includeExtensions:u},options:h.fetchOptions,credentials:h.credentials,headers:h.headers};return new E.ApolloLink((function(e){var t=function(e,t){var n=e.getContext().uri;return n||("function"==typeof t?t(e):t||"/graphql")}(e,n),i=e.getContext(),u={};if(i.clientAwareness){var f=i.clientAwareness,h=f.name,v=f.version;h&&(u["apollographql-client-name"]=h),v&&(u["apollographql-client-version"]=v)}var g,b=Object(c.a)(Object(c.a)({},u),i.headers),E={http:i.http,options:i.fetchOptions,credentials:i.credentials,headers:b},w=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=Object(c.a)(Object(c.a)({},t.options),{headers:t.headers,credentials:t.credentials}),i=t.http||{};n.forEach((function(e){a=Object(c.a)(Object(c.a)(Object(c.a)({},a),e.options),{headers:Object(c.a)(Object(c.a)({},a.headers),e.headers)}),e.credentials&&(a.credentials=e.credentials),i=Object(c.a)(Object(c.a)({},i),e.http)}));var o=e.operationName,s=e.extensions,u=e.variables,d=e.query,f={operationName:o,variables:u};return i.includeExtensions&&(f.extensions=s),i.includeQuery&&(f.query=l(d)),{options:a,body:f}}(e,_,m,E),C=w.options,S=w.body;if(S.variables&&!p){var A=new Set(Object.keys(S.variables));Object(y.visit)(e.query,{Variable:function(e,t,n){n&&"VariableDefinition"!==n.kind&&A.delete(e.name.value)}}),A.size&&(S.variables=Object(c.a)({},S.variables),A.forEach((function(e){delete S.variables[e]})))}if(!C.signal){var k=function(){if("undefined"==typeof AbortController)return{controller:!1,signal:!1};var e=new AbortController;return{controller:e,signal:e.signal}}(),j=k.controller,T=k.signal;(g=j)&&(C.signal=T)}if(d&&!e.query.definitions.some((function(e){return"OperationDefinition"===e.kind&&"mutation"===e.operation}))&&(C.method="GET"),"GET"===C.method){var I=function(e,t){var n=[],r=function(e,t){n.push(e+"="+encodeURIComponent(t))};if("query"in t&&r("query",t.query),t.operationName&&r("operationName",t.operationName),t.variables){var a=void 0;try{a=o(t.variables)}catch(e){return{parseError:e}}r("variables",a)}if(t.extensions){var i=void 0;try{i=o(t.extensions)}catch(e){return{parseError:e}}r("extensions",i)}var c="",s=e,u=e.indexOf("#");-1!==u&&(c=e.substr(u),s=e.substr(0,u));var l=-1===s.indexOf("?")?"?":"&";return{newURI:s+l+n.join("&")+c}}(t,S),P=I.newURI,D=I.parseError;if(D)return Object(r.b)(D);t=P}else try{C.body=o(S)}catch(D){return Object(r.b)(D)}return new O.c((function(n){var i;return s(t,C).then((function(t){return e.setContext({response:t}),t})).then((i=e,function(e){return e.text().then((function(t){try{return JSON.parse(t)}catch(r){var n=r;throw n.name="ServerParseError",n.response=e,n.statusCode=e.status,n.bodyText=t,n}})).then((function(t){return e.status>=300&&Object(r.c)(e,t,"Response not successful: Received status code "+e.status),Array.isArray(t)||a.call(t,"data")||a.call(t,"errors")||Object(r.c)(e,t,"Server response was missing for query '"+(Array.isArray(i)?i.map((function(e){return e.operationName})):i.operationName)+"'."),t}))})).then((function(e){return n.next(e),n.complete(),e})).catch((function(e){"AbortError"!==e.name&&(e.result&&e.result.errors&&e.result.data&&n.next(e.result),n.error(e))})),function(){g&&g.abort()}}))}))},C=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,w(t).request)||this;return n.options=t,n}return Object(c.c)(t,e),t}(E.ApolloLink)},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(16),a=n(36),i=n(71),o=n(74),c=n(22),s=function(){function e(e,t,n,r){this.observer=e,this.options=t,this.fetch=n,this.shouldFetch=r}return e.prototype.reobserve=function(e,t){e?this.updateOptions(e):this.updatePolling();var n=this.fetch(this.options,t);return this.concast&&this.concast.removeObserver(this.observer,!0),n.addObserver(this.observer),(this.concast=n).promise},e.prototype.updateOptions=function(e){return Object.assign(this.options,Object(c.j)(e)),this.updatePolling(),this},e.prototype.stop=function(){this.concast&&(this.concast.removeObserver(this.observer),delete this.concast),this.pollingInfo&&(clearTimeout(this.pollingInfo.timeout),this.options.pollInterval=0,this.updatePolling())},e.prototype.updatePolling=function(){var e=this,t=this.pollingInfo,n=this.options.pollInterval;if(n){if((!t||t.interval!==n)&&(Object(a.b)(n,20),!1!==this.shouldFetch)){(t||(this.pollingInfo={})).interval=n;var r=function(){e.pollingInfo&&(e.shouldFetch&&e.shouldFetch()?e.reobserve({fetchPolicy:"network-only",nextFetchPolicy:e.options.fetchPolicy||"cache-first"},o.a.poll).then(i,i):i())},i=function(){var t=e.pollingInfo;t&&(clearTimeout(t.timeout),t.timeout=setTimeout(r,t.interval))};i()}}else t&&(clearTimeout(t.timeout),delete this.pollingInfo)},e}(),u=function(e){function t(t){var n=t.queryManager,a=t.queryInfo,i=t.options,s=e.call(this,(function(e){return s.onSubscribe(e)}))||this;s.observers=new Set,s.subscriptions=new Set,s.observer={next:function(e){(s.lastError||s.isDifferentFromLastResult(e))&&(s.updateLastResult(e),Object(c.D)(s.observers,"next",e))},error:function(e){s.updateLastResult(Object(r.a)(Object(r.a)({},s.lastResult),{error:e,errors:e.graphQLErrors,networkStatus:o.a.error,loading:!1})),Object(c.D)(s.observers,"error",s.lastError=e)}},s.isTornDown=!1,s.options=i,s.queryId=n.generateQueryId();var u=Object(c.r)(i.query);return s.queryName=u&&u.name&&u.name.value,s.queryManager=n,s.queryInfo=a,s}return Object(r.c)(t,e),Object.defineProperty(t.prototype,"variables",{get:function(){return this.options.variables},enumerable:!1,configurable:!0}),t.prototype.result=function(){var e=this;return new Promise((function(t,n){var r={next:function(n){t(n),e.observers.delete(r),e.observers.size||e.queryManager.removeQuery(e.queryId),setTimeout((function(){a.unsubscribe()}),0)},error:n},a=e.subscribe(r)}))},t.prototype.getCurrentResult=function(e){void 0===e&&(e=!0);var t=this.lastResult,n=this.queryInfo.networkStatus||t&&t.networkStatus||o.a.ready,a=Object(r.a)(Object(r.a)({},t),{loading:Object(o.b)(n),networkStatus:n});if(this.isTornDown)return a;var i=this.options.fetchPolicy,c=void 0===i?"cache-first":i;if("no-cache"===c||"network-only"===c)delete a.partial;else if(!a.data||!this.queryManager.transform(this.options.query).hasForcedResolvers){var s=this.queryInfo.getDiff();a.data=s.complete||this.options.returnPartialData?s.result:void 0,s.complete?(a.networkStatus!==o.a.loading||"cache-first"!==c&&"cache-only"!==c||(a.networkStatus=o.a.ready,a.loading=!1),delete a.partial):a.partial=!0}return e&&this.updateLastResult(a),a},t.prototype.isDifferentFromLastResult=function(e){return!Object(i.a)(this.lastResultSnapshot,e)},t.prototype.getLastResult=function(){return this.lastResult},t.prototype.getLastError=function(){return this.lastError},t.prototype.resetLastResults=function(){delete this.lastResult,delete this.lastResultSnapshot,delete this.lastError,this.isTornDown=!1},t.prototype.resetQueryStoreErrors=function(){this.queryManager.resetErrors(this.queryId)},t.prototype.refetch=function(e){var t={pollInterval:0},n=this.options.fetchPolicy;return"no-cache"!==n&&"cache-and-network"!==n&&(t.fetchPolicy="network-only",t.nextFetchPolicy=n||"cache-first"),e&&!Object(i.a)(this.options.variables,e)&&(t.variables=this.options.variables=Object(r.a)(Object(r.a)({},this.options.variables),e)),this.newReobserver(!1).reobserve(t,o.a.refetch)},t.prototype.fetchMore=function(e){var t=this,n=Object(r.a)(Object(r.a)({},e.query?e:Object(r.a)(Object(r.a)(Object(r.a)({},this.options),e),{variables:Object(r.a)(Object(r.a)({},this.options.variables),e.variables)})),{fetchPolicy:"no-cache"}),a=this.queryManager.generateQueryId();return n.notifyOnNetworkStatusChange&&(this.queryInfo.networkStatus=o.a.fetchMore,this.observe()),this.queryManager.fetchQuery(a,n,o.a.fetchMore).then((function(r){var a=r.data,i=e.updateQuery;return i?t.updateQuery((function(e){return i(e,{fetchMoreResult:a,variables:n.variables})})):t.queryManager.cache.writeQuery({query:n.query,variables:n.variables,data:a}),r})).finally((function(){t.queryManager.stopQuery(a),t.reobserve()}))},t.prototype.subscribeToMore=function(e){var t=this,n=this.queryManager.startGraphQLSubscription({query:e.document,variables:e.variables,context:e.context}).subscribe({next:function(n){var r=e.updateQuery;r&&t.updateQuery((function(e,t){var a=t.variables;return r(e,{subscriptionData:n,variables:a})}))},error:function(t){e.onError&&e.onError(t)}});return this.subscriptions.add(n),function(){t.subscriptions.delete(n)&&n.unsubscribe()}},t.prototype.setOptions=function(e){return this.reobserve(e)},t.prototype.setVariables=function(e){if(Object(i.a)(this.variables,e))return this.observers.size?this.result():Promise.resolve();if(this.options.variables=e,!this.observers.size)return Promise.resolve();var t=this.options.fetchPolicy,n=void 0===t?"cache-first":t,r={fetchPolicy:n,variables:e};return"cache-first"!==n&&"no-cache"!==n&&"network-only"!==n&&(r.fetchPolicy="cache-and-network",r.nextFetchPolicy=n),this.reobserve(r,o.a.setVariables)},t.prototype.updateQuery=function(e){var t,n=this.queryManager,r=e(n.cache.diff({query:this.options.query,variables:this.variables,previousResult:null===(t=this.lastResult)||void 0===t?void 0:t.data,returnPartialData:!0,optimistic:!1}).result,{variables:this.variables});r&&(n.cache.writeQuery({query:this.options.query,data:r,variables:this.variables}),n.broadcastQueries())},t.prototype.startPolling=function(e){this.getReobserver().updateOptions({pollInterval:e})},t.prototype.stopPolling=function(){this.reobserver&&this.reobserver.updateOptions({pollInterval:0})},t.prototype.updateLastResult=function(e){var t=this.lastResult;return this.lastResult=e,this.lastResultSnapshot=this.queryManager.assumeImmutableResults?e:Object(c.i)(e),Object(c.B)(e.errors)||delete this.lastError,t},t.prototype.onSubscribe=function(e){var t=this;if(e===this.observer)return function(){};try{var n=e._subscription._observer;n&&!n.error&&(n.error=l)}catch(e){}var r=!this.observers.size;return this.observers.add(e),this.lastError?e.error&&e.error(this.lastError):this.lastResult&&e.next&&e.next(this.lastResult),r&&this.reobserve().catch((function(e){})),function(){t.observers.delete(e)&&!t.observers.size&&t.tearDownQuery()}},t.prototype.getReobserver=function(){return this.reobserver||(this.reobserver=this.newReobserver(!0))},t.prototype.newReobserver=function(e){var t=this,n=this.queryManager,a=this.queryId;return n.setObservableQuery(this),new s(this.observer,e?this.options:Object(r.a)({},this.options),(function(e,r){return n.setObservableQuery(t),n.fetchQueryObservable(a,e,r)}),!n.ssrMode&&function(){return!Object(o.b)(t.queryInfo.networkStatus)})},t.prototype.reobserve=function(e,t){return this.isTornDown=!1,this.getReobserver().reobserve(e,t)},t.prototype.observe=function(){this.observer.next(this.getCurrentResult(!1))},t.prototype.hasObservers=function(){return this.observers.size>0},t.prototype.tearDownQuery=function(){this.isTornDown||(this.reobserver&&(this.reobserver.stop(),delete this.reobserver),this.subscriptions.forEach((function(e){return e.unsubscribe()})),this.subscriptions.clear(),this.queryManager.stopQuery(this.queryId),this.observers.clear(),this.isTornDown=!0)},t}(c.c);function l(e){}Object(c.l)(u)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={_noConflict:!1,_isSet:!1,get noConflict(){return this._noConflict},set noConflict(e){this._isSet&&e!==this.noConflict&&setTimeout((function(){throw new Error("[vkui]: Single VKUI instance can not have different globalClassName settings")}),0),this._noConflict=e,this._isSet=!0}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=n(104).b.parse(window.location.search||window.location.hash||window.location.href)},function(e,t,n){"use strict";function r(e){return"".concat(e.first_name||""," ").concat(e.last_name||"").trim()}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(30),a=n.n(r),i=n(31),o=n.n(i),c=n(11),s=n.n(c),u=n(33),l=n.n(u),d=n(39),f=n.n(d),p=n(34),h=n.n(p),m=n(2),v=n.n(m),g=n(378),b=n.n(g),_=n(0),y=n.n(_),E=n(1),O=n(361),w=(n(877),{"./CaptchaPopout.css":{CaptchaPopout__image:"CaptchaPopout__image-common-skq0ym","CaptchaPopout--ios":"CaptchaPopout--ios-common-skq0ym"}});function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}var S=function(e){l()(n,e);var t=C(n);function n(){var e;a()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),v()(s()(e),"state",{text:"",v:Math.random()}),v()(s()(e),"onInputChange",(function(t){e.setState({text:t.currentTarget.value})})),v()(s()(e),"onSubmit",(function(t){if(t&&t.preventDefault(),!e.state.text.trim())return e.refreshImage();e.props.onSubmit(e.state.text.trim())})),v()(s()(e),"onCancel",(function(){e.props.onCancel()})),v()(s()(e),"onClose",(function(){e.props.onClose()})),v()(s()(e),"refreshImage",(function(){e.setState({v:Math.random()})})),e}return o()(n,[{key:"render",value:function(){var e=this.props,t=e.getLangKey,n=e.platform;return y.a.createElement(E.e,{actions:[{title:t("vkui_common_cancel"),mode:"cancel",action:this.onCancel},{title:t("vkui_common_send"),mode:"default",action:this.onSubmit}],header:t("vkui_common_captcha_title"),onClose:this.onClose},y.a.createElement("div",{className:b()(Object(E.Mb)("CaptchaPopout"),w,{autoResolveMultipleImports:!0,handleMissingStyleName:"ignore"})},y.a.createElement("div",{className:"CaptchaPopout__image-common-skq0ym",style:{backgroundImage:"url(".concat(this.props.captcha_img,"&").concat(this.state.v,")")},onClick:this.refreshImage}),y.a.createElement(E.x,{onSubmit:this.onSubmit},y.a.createElement(E.K,{value:this.state.text,onChange:this.onInputChange,placeholder:t("vkui_common_captcha_placeholder"),align:n===E.H?"center":"left"}))))}}]),n}(_.Component);t.a=Object(O.a)(Object(E.Tb)(S))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=(r=n(876))&&r.__esModule?r:{default:r};var i=function(e,t){if("throw"===t)throw new Error(e);return"warn"===t&&console.warn(e),null};t.default=function(e,t,n){var r=Object.keys(t),o=n||{},c=o.handleMissingStyleName,s=void 0===c?a.default.handleMissingStyleName:c,u=o.autoResolveMultipleImports,l=void 0===u?a.default.autoResolveMultipleImports:u;return e?e.split(" ").filter((function(e){return e})).map((function(e){if(function(e){return-1!==e.indexOf(".")}(e))return function(e,t,n){var r=e.split("."),o=r[0],c=r[1],s=n||a.default.handleMissingStyleName;return c?t[o]?t[o][c]?t[o][c]:i("CSS module does not exist: "+c,s):i("CSS module import does not exist: "+o,s):i("Invalid style name: "+e,s)}(e,t,s);if(0===r.length)throw new Error("Cannot use styleName attribute for style name '"+e+"' without importing at least one stylesheet.");if(r.length>1){if(!l)throw new Error("Cannot use anonymous style name '"+e+"' with more than one stylesheet import without setting 'autoResolveMultipleImports' to true.");return function(e,t,n){var r=n||a.default.handleMissingStyleName,o=Object.keys(t).map((function(n){return t[n][e]&&n})).filter((function(e){return e}));if(o.length>1)throw new Error('Cannot resolve styleName "'+e+'" because it is present in multiple imports:\n\n\t'+o.join("\n\t")+'\n\nYou can resolve this by using a named import, e.g:\n\n\timport foo from "'+o[0]+'";\n\t<div styleName="foo.'+e+'" />\n\n');return 0===o.length?i("Could not resolve the styleName '"+e+"'.",r):t[o[0]][e]}(e,t,s)}var n=t[r[0]];return n[e]?n[e]:i("Could not resolve the styleName '"+e+"'.",s)})).filter((function(e){return e})).join(" "):""}},function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return _}));var r=n(30),a=n.n(r),i=n(31),o=n.n(i),c=n(33),s=n.n(c),u=n(39),l=n.n(u),d=n(34),f=n.n(d),p=n(0),h=n.n(p),m=n(242),v=n(190);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return l()(this,n)}}var b={app_id:m.d,location:"act=home_education&client=education"},_=function(e){s()(n,e);var t=g(n);function n(e){var r;return a()(this,n),(r=t.call(this,e)).state={miniapp:null},r}return o()(n,[{key:"componentDidMount",value:function(){this.loadMiniapp()}},{key:"componentWillUnmount",value:function(){this.state.miniapp&&this.state.miniapp.close()}},{key:"loadMiniapp",value:function(){var e=this,t=new v.c({app:"app".concat(b.app_id)});t.events.on("hide",(function(){setTimeout((function(){return e.props.onClose()}),0)})),t.open({act:"home_education",client:"education",lang:"ru"}),this.setState({miniapp:t})}},{key:"render",value:function(){return h.a.createElement("div",null)}}]),n}(h.a.Component)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={createChatInfo:null,chatInfo:null,chatPreview:{preview:{admin_id:null,title:null,photo:null,is_member:!1,members:[],local_id:null,members_count:0},invite_link:"",id:null},chatEditInfo:null,chatInviteLinkInfo:null,classChatInfo:null,chatsStorage:{}}},function(e,t,n){"use strict";var r;function a(e){return{type:r.SET_GRADE_SCHOOL_REQUESTS,data:e}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),function(e){e.SET_GRADE_SCHOOL_REQUESTS="SET_GRADE_SCHOOL_REQUESTS"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0),a=n.n(r).a.createContext({})},function(e,t,n){"use strict";(function(e,r){var a,i=n(644);a="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var o=Object(i.a)(a);t.a=o}).call(this,n(171),n(676)(e))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(79),a=n(44),i=n(37);function o(e,t){Object(i.a)(2,arguments);var n=Object(a.a)(e).getTime(),o=Object(r.a)(t);return new Date(n+o)}},function(e,t,n){"use strict";function r(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.match(e.matchPattern);if(!r)return null;var a=r[0],i=t.match(e.parsePattern);if(!i)return null;var o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;var c=t.slice(a.length);return{value:o,rest:c}}}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));Math.pow(10,8);var r=6e4,a=36e5},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(79),a=n(44),i=n(37);function o(e,t){Object(i.a)(2,arguments);var n=Object(a.a)(e),o=Object(r.a)(t);return isNaN(o)?new Date(NaN):o?(n.setDate(n.getDate()+o),n):n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=n(224).a.createStore({})},function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(109),a=n.n(r),i=n(165),o=n.n(i),c=n(2),s=n.n(c),u=n(7),l=n.n(u),d=n(0),f=n(32),p=n(5),h=n(131),m=n(106),v=n(400),g=n(28),b=n(243),_=n(81),y=n(89),E=n(199),O=n(183),w=n(24),C=n(58);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=function(e){var t=Object(d.useRef)(e);return t.current=e,t},j=function(){var e=Object(d.useState)({}),t=l()(e,2),n=t[0],r=t[1],i=Object(d.useRef)(new Set).current,c=Object(g.a)(),u=Object(w.b)().apiRequest,S=Object(C.a)().showSnackbarError,j=Object(f.a)().go,T=Object(h.b)(),I=T.ownerId,P=T.fileList,D=Object(m.c)().getLangKey,N=Object(y.a)().accountInfo,x=null==N?void 0:N.id,R=Object(d.useCallback)((function(e){var t=function(e,t){var n=parseInt(Math.random().toString().slice(2)),r=e.name.slice((Math.max(0,e.name.lastIndexOf("."))||1/0)+1);return{file:e,data:{id:n,type:_.g,owner_id:t,title:e.name,size:e.size,ext:r,date:0}}}(e,x),n=t.data.id;return P.addLocal(n,t),n}),[x,P.addLocal]),M=k(R),L=k(P.getState),B=Object(d.useCallback)((function(){c(Object(b.c)({onFileSelectRef:M})),j(p.i.DOCUMENT_UPLOAD)}),[M,c,j]),F=Object(d.useCallback)((function(e){var t=P.get(e),n=P.getState(e);!t||"error"!==n&&"stopped"!==n||P.setState(t.data.id,"queue")}),[P.get,P.getState,P.setState]),H=Object(d.useCallback)((function(e,t,n){if("uploading"!==L.current(t))return Promise.reject({isCancelled:!0});var a=new FormData;a.append("file",n);var i=Object(v.a)(e,{method:"POST",timeout:6e5,data:a,responseType:"json"});return r((function(e){return A(A({},e),{},s()({},t,i.abort))})),i.promise.then((function(e){return e.error&&e.error.error_code?Promise.reject(e.error):e}))}),[L]),V=Object(d.useCallback)(function(){var e=o()(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u("docs.save",{file:t});case 2:if((n=e.sent).doc){e.next=5;break}return e.abrupt("return",Promise.reject("Unexpected loading error"));case 5:return e.abrupt("return",n.doc);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[u]),U=Object(d.useCallback)((function(){return u("docs.getUploadServer",I<0?{group_id:-I}:{})}),[u,I]),z=Object(d.useCallback)((function(e){return P.setState(e,"stopped")}),[P.setState]);return Object(d.useLayoutEffect)((function(){var e,t=P.getByState("uploading"),n=P.get(t[0]),r=null==n||null===(e=n.data)||void 0===e?void 0:e.id,a=null==n?void 0:n.file;null==n||null==r||null==a||"idle"===P.getState(r)||i.has(r)||(i.add(r),U().then((function(e){return H(e.upload_url,r,a)})).then((function(e){return V(e.file)})).then((function(e){P.moveToStored({data:e},r,e.id);var t=p.d.getState().params;Object(O.a)({event_type:"doc_upload",doc_creator_id:Math.abs(x),doc_id:e.id,section_document_type:t.schoolId?"public_documents":"private_documents",school_id:t.schoolId})})).catch((function(e){e&&e.isCancelled||(P.setState(r,"error"),S(D("vkui_edu_docs_upload_error"),{action:D("vkui_edu_docs_upload_retry"),onActionClick:function(){return F(r)},onClose:function(){}}))})).finally((function(){i.delete(r)})))}),[P.getByState,P.get]),Object(d.useEffect)((function(){P.localList.forEach((function(e){var t=e.data.id,a=n[t];"uploading"!==P.getState(t)&&a&&(a(),r(Object(E.a)(n,t)))}))}),[n,P.getState,P.localList]),{showUploadModal:B,retryUpload:F,cancelUpload:z}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0),a=n.n(r),i=function(e){var t=a.a.createContext(void 0);return{Provider:function(n){var r=e(n);return a.a.createElement(t.Provider,{value:r},n.children)},hook:function(){return Object(r.useContext)(t)}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(2),a=n.n(r),i=n(62),o=n(117);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(e){var t=s(s({},Object(i.b)()),e);Object(i.f)(o.a.articles,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(322);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return o(e,[])}function o(e,t){switch(a(e)){case"string":return JSON.stringify(e);case"function":return e.name?"[function ".concat(e.name,"]"):"[function]";case"object":return null===e?"null":function(e,t){if(-1!==t.indexOf(e))return"[Circular]";var n=[].concat(t,[e]),a=function(e){var t=e[String(r.a)];if("function"==typeof t)return t;if("function"==typeof e.inspect)return e.inspect}(e);if(void 0!==a){var i=a.call(e);if(i!==e)return"string"==typeof i?i:o(i,n)}else if(Array.isArray(e))return function(e,t){if(0===e.length)return"[]";if(t.length>2)return"[Array]";for(var n=Math.min(10,e.length),r=e.length-n,a=[],i=0;i<n;++i)a.push(o(e[i],t));1===r?a.push("... 1 more item"):r>1&&a.push("... ".concat(r," more items"));return"["+a.join(", ")+"]"}(e,n);return function(e,t){var n=Object.keys(e);if(0===n.length)return"{}";if(t.length>2)return"["+function(e){var t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"==typeof e.constructor){var n=e.constructor.name;if("string"==typeof n&&""!==n)return n}return t}(e)+"]";return"{ "+n.map((function(n){return n+": "+o(e[n],t)})).join(", ")+" }"}(e,n)}(e,t);default:return String(e)}}},function(e,t,n){"use strict";function r(e){var t=e.split(/\r\n|[\n\r]/g),n=function(e){for(var t,n=!0,r=!0,a=0,i=null,o=0;o<e.length;++o)switch(e.charCodeAt(o)){case 13:10===e.charCodeAt(o+1)&&++o;case 10:n=!1,r=!0,a=0;break;case 9:case 32:++a;break;default:r&&!n&&(null===i||a<i)&&(i=a),r=!1}return null!==(t=i)&&void 0!==t?t:0}(e);if(0!==n)for(var r=1;r<t.length;r++)t[r]=t[r].slice(n);for(var i=0;i<t.length&&a(t[i]);)++i;for(var o=t.length;o>i&&a(t[o-1]);)--o;return t.slice(i,o).join("\n")}function a(e){for(var t=0;t<e.length;++t)if(" "!==e[t]&&"\t"!==e[t])return!1;return!0}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=-1===e.indexOf("\n"),a=" "===e[0]||"\t"===e[0],i='"'===e[e.length-1],o="\\"===e[e.length-1],c=!r||i||o||n,s="";return!c||r&&a||(s+="\n"+t),s+=t?e.replace(/\n/g,"\n"+t):e,c&&(s+="\n"),'"""'+s.replace(/"""/g,'\\"""')+'"""'}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(26),a=n.n(r),i=n(28),o=function(){var e=Object(i.b)().callsLib;return function(){a.a.isWebView()?a.a.send("VKWebAppCustomMessage",{action:"restoreCall"}):null==e||e.restoreCall()}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r=function(e,t){var n=e.speakersIds,r=e.creatorId===t,a=n.some((function(e){return e===t}));return r||a},a=function(e,t){return r(e,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var r=n(0),a=Object(r.createContext)({isAppReady:function(){return!1}}),i=function(){return Object(r.useContext)(a)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(0),a=n.n(r),i=n(1),o=(n(997),n(14)),c=(n(998),n(25)),s=function(){return a.a.createElement(i.pb,{className:"DashboardChatsListItemSkeleton",before:a.a.createElement(c.a,{shadow:!1,size:56})},a.a.createElement(o.a,{width:"100px",className:"DashboardChatsListItemSkeleton__title"}),a.a.createElement(o.a,{width:"200px"}))},u=n(63),l=function(e){var t=e.itemsCount,n=void 0===t?6:t;return a.a.createElement(i.C,{className:"UserChatsSkeleton"},a.a.createElement(i.D,{mode:"primary",className:"UserChatsSkeleton__head"},a.a.createElement(o.a,{width:"93px",height:"16px"})),a.a.createElement(u.a,{component:a.a.createElement(s,null),itemsCount:n,itemDistance:"20px",top:null,inBorders:!1}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(0),a=n(2),i=n.n(a),o=n(7),c=n.n(o),s=n(248),u=n(199),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=Object(r.useState)(null!=e?e:{}),a=c()(n,2),o=a[0],l=a[1],d=Object(r.useState)((function(){return null!=t&&null!==e?t:Object.keys(e)})),f=c()(d,2),p=f[0],h=f[1],m=Object(r.useMemo)((function(){return p.map((function(e){return o[e]})).filter((function(e){return null!=e}))}),[o,p]),v=Object(r.useCallback)((function(e,t){l(e),h(null!=t?t:Object.keys(e).reverse())}),[]),g=Object(r.useCallback)((function(e,t,n){var r="".concat(e);l((function(e){return Object.assign({},e,i()({},r,t))})),h((function(e){var t=e.indexOf(r),a=t>-1?Object(s.b)(e,t):e,i=n>-1?n:t;return null!=i?Object(s.d)(a,i>t?i-1:i,r):Object(s.a)(a,r)}))}),[]),b=Object(r.useCallback)((function(e){return o[e]}),[o]),_=Object(r.useCallback)((function(e){l((function(t){return Object(u.a)(t,e)})),h((function(t){return Object(s.c)(t,e)}))}),[]),y=Object(r.useCallback)((function(e){return{}.hasOwnProperty.call(o,e)}),[o]);return{map:o,order:p,list:m,remove:_,set:g,get:b,has:y,replaceAll:v}},d=function(e,t){var n=l(e,t),a=l(),i=l({}),o=Object(r.useCallback)((function(e){return"idle"===e?n.order:i.order.filter((function(t){return i.get(t)===e}))}),[n.order,i.order,i.get]),c=Object(r.useCallback)((function(e){return n.has(e)?"idle":i.get(e)}),[i.get,n.has]),s=Object(r.useCallback)((function(e){n.remove(e),a.remove(e),i.remove(e)}),[n.remove,i.remove,a.remove]),u=Object(r.useCallback)((function(e){var t;return null!==(t=n.get(e))&&void 0!==t?t:a.get(e)}),[n.get,a.get]),d=Object(r.useCallback)((function(e,t,r){a.has(e)?a.set(e,t,r):n.set(e,t,r)}),[n.get,a.get]),f=Object(r.useCallback)((function(e,t){a.set(e,t,0),i.set(e,"queue")}),[a.set,i.set]),p=Object(r.useCallback)((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;null!=e&&(a.remove(t),i.remove(t),n.set(r,e,0))}),[a.get,a.remove,n.set,i.set]),h=Object(r.useCallback)((function(e,t){switch(t){case"idle":var r=a.get(e);a.remove(e),i.remove(e),n.set(e,r);break;case"delete":s(e);break;default:i.set(e,t)}}),[a.remove,i.remove,i.set]);return Object(r.useLayoutEffect)((function(){var e=o("queue"),t=o("uploading");if(t.length<1&&e.length>0){var n=e[e.length-1];null==n||t.includes(n)||i.set(n,"uploading")}}),[o,i.set]),{storedList:n.list,localList:a.list,get:u,set:d,addLocal:f,remove:s,replaceAll:n.replaceAll,setState:h,getState:c,getByState:o,moveToStored:p}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(37);function a(e){return Object(r.a)(1,arguments),e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)}var i=n(44);function o(e){if(Object(r.a)(1,arguments),!a(e)&&"number"!=typeof e)return!1;var t=Object(i.a)(e);return!isNaN(Number(t))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(104),a=n(92),i="XMLHttpRequest was aborted",o="XMLHttpRequest failed because of internet connection is offline";function c(e,t){return t?e+(e.includes("?")?"&":"?")+t:e}function s(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=n.method,u=void 0===s?"GET":s,l=n.data,d=void 0===l?null:l,f=n.query,p=n.form,h=n.timeout,m=n.headers,v=void 0===m?{}:m,g=n.responseType,b=void 0===g?"text":g,_=n.cors,y=void 0!==_&&_,E=n.onUploadProgress,O=new XMLHttpRequest,w=u.toUpperCase(),C="";Object(a.b)(f)&&(e=c(e,r.a.create(f))),"GET"===w?Object(a.b)(p)&&(e=c(e,r.a.create(p))):"POST"===w&&(d?C=d:Object(a.b)(p)&&(v["Content-Type"]="application/x-www-form-urlencoded",C=r.a.create(p))),y&&(O.withCredentials=!0),E&&(O.upload.onprogress=E);var S=new Promise((function(t,n){h&&(O.timeout=h),O.open(u,e,!0),Object.keys(v).forEach((function(e){O.setRequestHeader(e,"".concat(v[e]))})),O.onload=function(){t(O.responseText)},O.onerror=function(){!1===navigator.onLine?n(new Error(o)):n(new Error("".concat("XMLHttpRequest failed with status ").concat(O.status)))},O.ontimeout=function(){n(new Error("XMLHttpRequest timeout expires"))},O.send(C)}));return{promise:new Promise((function(e,n){S.then((function(r){t?n(new Error(i)):e("json"===b?JSON.parse(r):r)})).catch((function(e){n(t?new Error(i):e)}))})),abort:function(){t=!0,O&&O.abort()}}}},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="videocam_outline_28",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 29 28",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29 28" id="videocam_outline_28"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.857 5h4.286c1.084 0 1.958 0 2.666.058.729.06 1.369.185 1.961.487a5 5 0 012.185 2.185c.231.454.36.936.433 1.464l.437-.284.903-.585c.239-.155.52-.338.773-.471.255-.134.794-.395 1.482-.348a2.7 2.7 0 011.975 1.07c.415.552.49 1.148.516 1.434.026.285.026.62.026.904v6.172c0 .284 0 .619-.026.904-.026.286-.1.882-.516 1.434a2.7 2.7 0 01-1.975 1.07c-.688.047-1.227-.214-1.482-.348a10.407 10.407 0 01-.773-.47l-.905-.588-.435-.282c-.074.528-.202 1.01-.433 1.464a5 5 0 01-2.185 2.185c-.592.302-1.232.428-1.961.487C16.1 23 15.227 23 14.143 23H9.857c-1.084 0-1.958 0-2.666-.058-.728-.06-1.369-.185-1.96-.487a5 5 0 01-2.186-2.185c-.302-.592-.428-1.232-.487-1.961C2.5 17.6 2.5 16.727 2.5 15.643v-3.286c0-1.084 0-1.958.058-2.666.06-.728.185-1.369.487-1.961A5 5 0 015.23 5.545c.592-.302 1.233-.428 1.961-.487C7.9 5 8.773 5 9.857 5zM21.5 15.643v-4.138l2.27-1.472c.563-.365.844-.548 1.077-.532a.7.7 0 01.513.277c.14.187.14.522.14 1.192v6.06c0 .67 0 1.005-.14 1.192a.7.7 0 01-.513.277c-.233.016-.514-.167-1.077-.532l-2.27-1.472v-.852zM7.354 7.05c-.605.05-.953.142-1.216.276a3 3 0 00-1.311 1.311c-.134.263-.226.611-.276 1.216-.05.617-.051 1.41-.051 2.546v3.2c0 1.137 0 1.929.051 2.546.05.605.142.953.276 1.216a3 3 0 001.311 1.311c.263.134.611.226 1.216.276.617.05 1.41.051 2.546.051h4.2c1.137 0 1.929 0 2.546-.051.605-.05.953-.142 1.216-.276a3 3 0 001.311-1.311c.134-.263.226-.611.276-1.216.05-.617.051-1.41.051-2.546v-3.2c0-1.137 0-1.929-.051-2.546-.05-.605-.142-.953-.276-1.216a3 3 0 00-1.311-1.311c-.263-.134-.611-.226-1.216-.276-.617-.049-1.41-.05-2.546-.05H9.9c-1.137 0-1.929 0-2.546.051z" fill="currentColor" /></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 29 28",id:l,width:isNaN(e.width)?29:+e.width,height:isNaN(e.height)?28:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(2),a=n.n(r),i=n(62),o=n(117);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(e){var t=s(s({},Object(i.b)()),e);Object(i.f)(o.a.usersSchools,t)}},function(e,t,n){"use strict";var r,a;n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a})),function(e){e.Request="request",e.Member="member"}(r||(r={})),function(e){e.SCHOOL="school",e.CHANNEL="channel",e.GRADE="grade"}(a||(a={}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return R})),n.d(t,"e",(function(){return B})),n.d(t,"c",(function(){return F})),n.d(t,"a",(function(){return H})),n.d(t,"d",(function(){return V}));var r=n(7),a=n.n(r),i=n(480),o=n(1364),c=n(387),s=n(674),u=n(37);function l(e,t){Object(u.a)(2,arguments);var n=Object(i.a)(e),r=Object(i.a)(t);return n.getTime()===r.getTime()}var d,f,p,h,m,v=n(0),g=n(640),b=n(97),_=n(185),y=n(665),E=n.n(y),O=n(119),w=n(292),C=n.n(w),S=Object(_.gql)(d||(d=C()(["\n  fragment Attendees on Event {\n    attendees {\n      email\n      name\n      role\n      status\n    }\n  }\n"]))),A=Object(_.gql)(f||(f=C()(["\n  fragment Reminders on Event {\n    reminders {\n      type\n      interval\n    }\n  }\n"]))),k=Object(_.gql)(p||(p=C()(["\n  fragment Recurrence on Event {\n    recurrence {\n      freq\n      interval\n      weekdays {\n        day\n        offset\n      }\n      monthdays\n      months\n      count\n      until\n    }\n  }\n"]))),j=Object(_.gql)(h||(h=C()(["\n  query FetchEvents($from: Time!, $to: Time!, $calendars: [UID!]) {\n    events(from: $from, to: $to, calendars: $calendars, buildVirtual: true) {\n      uid\n      title\n      description\n      from\n      to\n      fullDay\n      recurrenceID\n      status\n      payload\n      chat\n      calendar {\n        uid\n        color\n        type\n        title\n      }\n      call\n      description\n      access\n      ...Attendees\n    }\n  }\n  ","\n"])),S),T=Object(_.gql)(m||(m=C()(["\n  query FetchEvent($eventUID: UID!, $calendarUID: UID!, $recurrentID: Time) {\n    event(eventUID: $eventUID, calendarUID: $calendarUID, recurrentID: $recurrentID) {\n      uid\n      title\n      from\n      to\n      fullDay\n      recurrenceID\n      status\n      organizer {\n        email\n        name\n        role\n        status\n      }\n      call\n      location {\n        description\n      }\n      description\n      payload\n      chat\n      calendar {\n        uid\n        color\n        type\n        title\n      }\n      call\n      access\n      ...Attendees\n      ...Reminders\n      ...Recurrence\n    }\n  }\n  ","\n  ","\n  ","\n"])),S,A,k),I=function(e){var t=e.from,n=e.to,r=e.calendars,a=e.skip,i=e.onCompleted,o=e.onError,c=Object(v.useRef)(1),s=Object(_.useQuery)(j,{variables:{from:t.toISOString(),to:n.toISOString(),calendars:r},context:{get readOnly(){return c.current}},pollInterval:3e4,fetchPolicy:"cache-first",skip:a,onCompleted:i,onError:o}),u=s.data,l=s.loading,d=s.error,f=s.refetch,p=s.client,h=Object(v.useCallback)((function(){return p.cache.evict({id:"ROOT_QUERY",fieldName:"events"}),p.cache.evict({id:"ROOT_QUERY",fieldName:"event"}),c.current=0,f.apply(void 0,arguments).then((function(e){return c.current=1,e}))}),[f]);return{events:null==u?void 0:u.events,loading:l,error:d,refetch:h}},P=n(472),D=n.n(P),N=n(115),x=n(89),R=function(){var e=Object(v.useState)(new Date),t=a()(e,2),n=t[0],r=t[1];return Object(v.useEffect)((function(){var e=setInterval((function(){r(new Date)}),1e3);return function(){clearInterval(e)}}),[]),n},M=function(){var e=Object(N.a)(),t=e.profileSchools,n=e.getProfileSchools,r=e.loaded,i=function(){var e=Object(_.useQuery)(E.a,{fetchPolicy:"cache-first"}),t=e.data,n=e.loading,r=e.error;return{calendars:null==t?void 0:t.calendars,loading:n,error:r}}(),o=i.calendars,c=i.loading,s=i.error;return Object(v.useEffect)((function(){n({showSpinner:!1,reload:!1})}),[]),{calendars:Object(v.useMemo)((function(){if(!o&&!t)return[];var e=new Set(t.filter((function(e){return e.isTeacherInSchool})).map((function(e){return e.id})));return(o||[]).filter((function(t){if(t.type===b.b.PERSONAL)return!0;var n=function(e){var t=/^(?:school_|edu_calendar_s)(\d+)/.exec(e.uid)||[],n=a()(t,2)[1];return n?parseInt(n):null}(t),r=n&&e.has(n);return t.type===b.b.SHARED&&!r})).map((function(e){return e.uid}))}),[o,t]),loading:c||!r,error:s}},L=function(e){Object(v.useEffect)((function(){return window.addEventListener("create_event",e),function(){window.removeEventListener("create_event",e)}}),[e])},B=function(){return function(){window.dispatchEvent(new CustomEvent("create_event"))}},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.schoolId,n=R(),r=Object(i.a)(n).getTime(),u=Object(v.useState)((function(){return Object(i.a)(new Date).getTime()})),l=a()(u,2),d=l[0],f=l[1],p=Object(N.a)(),h=p.profileSchools,m=p.getProfileSchools,b=p.error,_=Object(x.a)(),y=_.accountInfo.id,E=!h;Object(v.useEffect)((function(){m({reload:!1,showSpinner:!1})}),[]),Object(v.useEffect)((function(){f(r)}),[r]);var w=Object(v.useState)((function(){return{from:new Date(d),to:Object(o.a)(d,1)}})),C=a()(w,2),S=C[0],A=S.from,k=S.to,j=C[1];Object(v.useEffect)((function(){d===Object(c.a)(A,-1).getTime()?j((function(e){var t=e.from;return{from:Object(o.a)(t,-1),to:t}})):d===k.getTime()?j((function(e){var t=e.to;return{from:t,to:Object(o.a)(t,1)}})):Object(s.a)(d,{start:A,end:k})||j({from:new Date(d),to:Object(o.a)(d,1)})}),[d]);var T=M(),P=T.calendars,D=T.loading,B=T.error,F=I({from:A,to:k,calendars:P,skip:D}),H=F.events,V=F.loading,U=F.refetch,z=F.error;L(U);var G=Object(v.useMemo)((function(){return H&&h?Object(g.b)({events:H.filter(O.d).map(O.g),from:A,to:k,schoolId:t,profileSchools:h,userId:y}):null}),[H,t,h,y]);return{selectedDate:d,setSelectedDate:f,schedule:G,events:H,loading:D||V||E,error:B||z||b,now:n}},H=function(e){var t=e.events,n=e.now,r=Object(v.useMemo)((function(){return D()(t,(function(e){var t=e.to;return l(e.from,n)&&t>=n}))}),[t,n]),a=Object(v.useMemo)((function(){return D()(t,(function(e){var t=e.from;return l(t,n)&&t>n}))}),[t,n]);return{currentEvents:Object(v.useMemo)((function(){return t.filter((function(e){var t=e.to;return l(e.from,n)&&t>=n}))}),[t,n]),currentEventIndex:r,upcomingEventIndex:a}},V=function(e){var t=function(e,t,n){var r=Object(_.useQuery)(T,{variables:{eventUID:e,calendarUID:t,recurrentID:n},fetchPolicy:"cache-first"}),a=r.data,i=r.loading,o=r.error,c=r.refetch;return{event:null==a?void 0:a.event,loading:i,error:o,refetch:c}}(e.eventId,e.calendarId,e.recurrenceId),n=t.event,r=t.loading,a=t.refetch,i=Object(v.useMemo)((function(){return n&&Object(O.d)(n)?Object(O.g)(n):null}),[n]);return L(a),{event:i,loading:r}}},function(e,t,n){"use strict";function r(){var e=new Date;return e.setFullYear(e.getFullYear()-100),e}function a(){var e=new Date;return e.setFullYear(e.getFullYear()-6),e}function i(e){if(!e||"0.0.0"===e)return{year:0,month:0,day:0};var t=e.split(".").map((function(e){return Number(e)}));return{year:t[2],month:t[1],day:t[0]}}function o(e){return e?"".concat(e.day,".").concat(e.month,".").concat(e.year):""}n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return l}));var r,a,i,o,c=n(2),s=n.n(c),u=n(5);!function(e){e.INTRO_STUDENT="intro_student",e.INTRO_TEACHER="intro_teacher",e.INTRO_PARENT="intro_parent"}(a||(a={})),function(e){e.GRADES_MANAGEMENT_TEACHER="grades_management_teacher",e.GRADES_MANAGEMENT_ADMIN="grades_management_admin"}(i||(i={})),function(e){e[e.Active=0]="Active",e[e.Finished=1]="Finished"}(o||(o={}));var l=(r={},s()(r,i.GRADES_MANAGEMENT_ADMIN,u.i.GRADES_MANAGEMENT_ONBOARDING),s()(r,i.GRADES_MANAGEMENT_TEACHER,u.i.GRADES_MANAGEMENT_ONBOARDING),s()(r,a.INTRO_STUDENT,u.i.INTRO_ONBOARDING),s()(r,a.INTRO_TEACHER,u.i.INTRO_ONBOARDING),s()(r,a.INTRO_PARENT,u.i.INTRO_ONBOARDING),r)},function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return p}));var r=n(104),a=n(46),i=n(5),o=n(203),c=n(47),s=n(23),u=function(e){return"".concat(c.h).concat(a.d.edu_host,"/start?").concat(r.b.create(e))},l=function(e){return"".concat(c.h).concat(a.d.edu_host,"/join?").concat(r.b.create(e))},d=function(e,t){return"".concat(o.a).concat(a.d.edu_host,"/").concat(e,"?").concat(r.b.create(t))},f=function(e){var t=i.d.buildUrl(i.j.DOWNLOAD_MOBILE_APP,e);return"".concat(o.b,"/").concat(t)},p=function(e){return"".concat(s.G,"?id=").concat(e)}},function(e,t,n){(function(e){("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"build-ci-education-production-786"}}).call(this,n(171))},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";if(n(13).b){var r=Element.prototype;r.matches||(r.matches=r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector),r.closest||(r.closest=function(e){for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}return null})}Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if(0===r)return!1;var a,i,o=0|t,c=Math.max(o>=0?o:r-Math.abs(o),0);for(;c<r;){if((a=n[c])===(i=e)||"number"==typeof a&&"number"==typeof i&&isNaN(a)&&isNaN(i))return!0;c++}return!1}}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("callback must be a function");for(var t=Object(this),n=t.length>>>0,r=arguments[1],a=0;a<n;a++){var i=t[a];if(e.call(r,i,a,t))return i}}})},function(e,t,n){var r=n(308);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";var r=n(831);e.exports=Function.prototype.bind||r},function(e,t,n){"use strict";var r=n(73),a=r("%TypeError%"),i=r("%SyntaxError%"),o=n(235),c={"Property Descriptor":function(e,t){if("Object"!==e(t))return!1;var n={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var r in t)if(o(t,r)&&!n[r])return!1;var i=o(t,"[[Value]]"),c=o(t,"[[Get]]")||o(t,"[[Set]]");if(i&&c)throw new a("Property Descriptors may not be both accessor and data descriptors");return!0}};e.exports=function(e,t,n,r){var o=c[t];if("function"!=typeof o)throw new i("unknown record type: "+t);if(!o(e,r))throw new a(n+" must be a "+t)}},function(e,t,n){"use strict";e.exports=Number.isNaN||function(e){return e!=e}},function(e,t,n){"use strict";var r,a,i=Function.prototype.toString,o="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof o&&"function"==typeof Object.defineProperty)try{r=Object.defineProperty({},"length",{get:function(){throw a}}),a={},o((function(){throw 42}),null,r)}catch(e){e!==a&&(o=null)}else o=null;var c=/^\s*class\b/,s=function(e){try{var t=i.call(e);return c.test(t)}catch(e){return!1}},u=Object.prototype.toString,l="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,d="object"==typeof document&&void 0===document.all&&void 0!==document.all?document.all:{};e.exports=o?function(e){if(e===d)return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;try{o(e,null,r)}catch(e){if(e!==a)return!1}return!s(e)}:function(e){if(e===d)return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;if(l)return function(e){try{return!s(e)&&(i.call(e),!0)}catch(e){return!1}}(e);if(s(e))return!1;var t=u.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t}},function(e,t,n){var r=n(896),a=n(195),i=Object.prototype,o=i.hasOwnProperty,c=i.propertyIsEnumerable,s=r(function(){return arguments}())?r:function(e){return a(e)&&o.call(e,"callee")&&!c.call(e,"callee")};e.exports=s},function(e,t,n){(function(e){var r=n(180),a=n(897),i=t&&!t.nodeType&&t,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,c=o&&o.exports===i?r.Buffer:void 0,s=(c?c.isBuffer:void 0)||a;e.exports=s}).call(this,n(298)(e))},function(e,t){var n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&n.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t,n){(function(e){var r=n(560),a=t&&!t.nodeType&&t,i=a&&"object"==typeof e&&e&&!e.nodeType&&e,o=i&&i.exports===a&&r.process,c=function(){try{var e=i&&i.require&&i.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=c}).call(this,n(298)(e))},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t,n){var r=n(348),a=n(909),i=n(910),o=n(911),c=n(912),s=n(913);function u(e){var t=this.__data__=new r(e);this.size=t.size}u.prototype.clear=a,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=c,u.prototype.set=s,e.exports=u},function(e,t,n){var r=n(236)(n(180),"Map");e.exports=r},function(e,t,n){var r=n(914),a=n(921),i=n(923),o=n(924),c=n(925);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=a,s.prototype.get=i,s.prototype.has=o,s.prototype.set=c,e.exports=s},function(e,t,n){var r=n(448),a=n(927),i=n(928);function o(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}o.prototype.add=o.prototype.push=a,o.prototype.has=i,e.exports=o},function(e,t){e.exports=function(e,t){return e.has(t)}},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}},function(e,t,n){var r=n(933),a=n(573),i=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,c=o?function(e){return null==e?[]:(e=Object(e),r(o(e),(function(t){return i.call(e,t)})))}:a;e.exports=c},function(e,t,n){var r=n(354),a=n(311);e.exports=function(e,t){for(var n=0,i=(t=r(t,e)).length;null!=e&&n<i;)e=e[a(t[n++])];return n&&n==i?e:void 0}},function(e,t,n){var r=n(148),a=n(333),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!a(e))||(o.test(e)||!i.test(e)||null!=t&&e in Object(t))}},function(e,t){e.exports=function(e){return e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(20);function a(e){return new Promise((function(t,n){if(r.d.isMobile)n("is_mobile");else if(document.body.focus(),"hidden"===document.visibilityState||document.hidden)n("hidden_page");else{var a,i=function e(){a&&clearTimeout(a),window.removeEventListener("blur",e),t()};if(window.addEventListener("blur",i),a=setTimeout((function(){window.removeEventListener("blur",i),n("timed_out")}),3e3),r.d.BROWSER===r.b.SAFARI||r.d.BROWSER===r.b.FIREFOX){var o=document.createElement("iframe");o.style.display="none",document.body.appendChild(o);var c=o.contentWindow;c?(c.location.href=e,setTimeout((function(){o.parentNode&&o.parentNode.removeChild(o)}),100)):window.location.href=e}else window.location.href=e}}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="school_members"},function(e,t,n){var r=n(565),a=n(1130),i=n(258);e.exports=function(e){return i(e)?r(e,!0):a(e)}},function(e,t,n){var r=n(567)(Object.getPrototypeOf,Object);e.exports=r},function(e,t,n){var r=n(570);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return ja})),n.d(t,"b",(function(){return Fh}));var r=n(6),a=n.n(r),i=n(2),o=n.n(i),c=n(0),s=n.n(c),u=n(70),l=n.n(u),d=n(13),f=n(7),p=n.n(f);function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,h(e,t)}var v=n(15),g=n.n(v),b=s.a.createContext(null);var _=function(e){e()},y={notify:function(){}};function E(){var e=_,t=[],n=[];return{clear:function(){n=null,t=null},notify:function(){var r=t=n;e((function(){for(var e=0;e<r.length;e++)r[e]()}))},get:function(){return n},subscribe:function(e){var r=!0;return n===t&&(n=t.slice()),n.push(e),function(){r&&null!==t&&(r=!1,n===t&&(n=t.slice()),n.splice(n.indexOf(e),1))}}}}var O=function(){function e(e,t){this.store=e,this.parentSub=t,this.unsubscribe=null,this.listeners=y,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=E())},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=y)},e}(),w=function(e){function t(t){var n;n=e.call(this,t)||this;var r=t.store;n.notifySubscribers=n.notifySubscribers.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n));var a=new O(r);return a.onStateChange=n.notifySubscribers,n.state={store:r,subscription:a},n.previousState=r.getState(),n}m(t,e);var n=t.prototype;return n.componentDidMount=function(){this._isMounted=!0,this.state.subscription.trySubscribe(),this.previousState!==this.props.store.getState()&&this.state.subscription.notifyNestedSubs()},n.componentWillUnmount=function(){this.unsubscribe&&this.unsubscribe(),this.state.subscription.tryUnsubscribe(),this._isMounted=!1},n.componentDidUpdate=function(e){if(this.props.store!==e.store){this.state.subscription.tryUnsubscribe();var t=new O(this.props.store);t.onStateChange=this.notifySubscribers,this.setState({store:this.props.store,subscription:t})}},n.notifySubscribers=function(){this.state.subscription.notifyNestedSubs()},n.render=function(){var e=this.props.context||b;return s.a.createElement(e.Provider,{value:this.state},this.props.children)},t}(c.Component);w.propTypes={store:g.a.shape({subscribe:g.a.func.isRequired,dispatch:g.a.func.isRequired,getState:g.a.func.isRequired}),context:g.a.object,children:g.a.any};var C=w;function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function A(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var k=n(478),j=n.n(k),T=n(204),I=n.n(T),P=n(466),D=[],N=[null,null];function x(e,t){var n=e[1];return[t.payload,n+1]}var R=function(){return[null,0]},M="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?c.useLayoutEffect:c.useEffect;function L(e,t){void 0===t&&(t={});var n=t,r=n.getDisplayName,a=void 0===r?function(e){return"ConnectAdvanced("+e+")"}:r,i=n.methodName,o=void 0===i?"connectAdvanced":i,u=n.renderCountProp,l=void 0===u?void 0:u,d=n.shouldHandleStateChanges,f=void 0===d||d,p=n.storeKey,h=void 0===p?"store":p,m=n.withRef,v=void 0!==m&&m,g=n.forwardRef,_=void 0!==g&&g,y=n.context,E=void 0===y?b:y,w=A(n,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]);I()(void 0===l,"renderCountProp is removed. render counting is built into the latest React Dev Tools profiling extension"),I()(!v,"withRef is removed. To access the wrapped instance, use a ref on the connected component");I()("store"===h,"storeKey has been removed and does not do anything. To use a custom Redux store for specific components, create a custom React context with React.createContext(), and pass the context object to React Redux's Provider and specific components like: <Provider context={MyContext}><ConnectedComponent context={MyContext} /></Provider>. You may also pass a {context : MyContext} option to connect");var C=E;return function(t){var n=t.displayName||t.name||"Component",r=a(n),i=S({},w,{getDisplayName:a,methodName:o,renderCountProp:l,shouldHandleStateChanges:f,storeKey:h,displayName:r,wrappedComponentName:n,WrappedComponent:t}),u=w.pure;var d=u?c.useMemo:function(e){return e()};function p(n){var a=Object(c.useMemo)((function(){var e=n.forwardedRef,t=A(n,["forwardedRef"]);return[n.context,e,t]}),[n]),o=a[0],u=a[1],l=a[2],p=Object(c.useMemo)((function(){return o&&o.Consumer&&Object(P.isContextConsumer)(s.a.createElement(o.Consumer,null))?o:C}),[o,C]),h=Object(c.useContext)(p),m=Boolean(n.store),v=Boolean(h)&&Boolean(h.store);I()(m||v,'Could not find "store" in the context of "'+r+'". Either wrap the root component in a <Provider>, or pass a custom React context provider to <Provider> and the corresponding React context consumer to '+r+" in connect options.");var g=n.store||h.store,b=Object(c.useMemo)((function(){return function(t){return e(t.dispatch,i)}(g)}),[g]),_=Object(c.useMemo)((function(){if(!f)return N;var e=new O(g,m?null:h.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[g,m,h]),y=_[0],E=_[1],w=Object(c.useMemo)((function(){return m?h:S({},h,{subscription:y})}),[m,h,y]),k=Object(c.useReducer)(x,D,R),j=k[0][0],T=k[1];if(j&&j.error)throw j.error;var L=Object(c.useRef)(),B=Object(c.useRef)(l),F=Object(c.useRef)(),H=Object(c.useRef)(!1),V=d((function(){return F.current&&l===B.current?F.current:b(g.getState(),l)}),[g,j,l]);M((function(){B.current=l,L.current=V,H.current=!1,F.current&&(F.current=null,E())})),M((function(){if(f){var e=!1,t=null,n=function(){if(!e){var n,r,a=g.getState();try{n=b(a,B.current)}catch(e){r=e,t=e}r||(t=null),n===L.current?H.current||E():(L.current=n,F.current=n,H.current=!0,T({type:"STORE_UPDATED",payload:{latestStoreState:a,error:r}}))}};y.onStateChange=n,y.trySubscribe(),n();return function(){if(e=!0,y.tryUnsubscribe(),t)throw t}}}),[g,y,b]);var U=Object(c.useMemo)((function(){return s.a.createElement(t,S({},V,{ref:u}))}),[u,t,V]);return Object(c.useMemo)((function(){return f?s.a.createElement(p.Provider,{value:w},U):U}),[p,U,w])}var m=u?s.a.memo(p):p;if(m.WrappedComponent=t,m.displayName=r,_){var v=s.a.forwardRef((function(e,t){return s.a.createElement(m,S({},e,{forwardedRef:t}))}));return v.displayName=r,v.WrappedComponent=t,j()(v,t)}return j()(m,t)}}var B=Object.prototype.hasOwnProperty;function F(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function H(e,t){if(F(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=0;a<n.length;a++)if(!B.call(t,n[a])||!F(e[n[a]],t[n[a]]))return!1;return!0}var V=n(383),U=function(){return Math.random().toString(36).substring(7).split("").join(".")},z={INIT:"@@redux/INIT"+U(),REPLACE:"@@redux/REPLACE"+U(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+U()}};function G(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function W(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function");if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(W)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var a=e,i=t,o=[],c=o,s=!1;function u(){c===o&&(c=o.slice())}function l(){if(s)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return i}function d(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(s)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var t=!0;return u(),c.push(e),function(){if(t){if(s)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");t=!1,u();var n=c.indexOf(e);c.splice(n,1)}}}function f(e){if(!G(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(s)throw new Error("Reducers may not dispatch actions.");try{s=!0,i=a(i,e)}finally{s=!1}for(var t=o=c,n=0;n<t.length;n++){(0,t[n])()}return e}function p(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");a=e,f({type:z.REPLACE})}function h(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[V.a]=function(){return this},e}return f({type:z.INIT}),(r={dispatch:f,subscribe:d,getState:l,replaceReducer:p})[V.a]=h,r}function q(e,t){return function(){return t(e.apply(this,arguments))}}function K(e){return function(t,n){var r=e(t,n);function a(){return r}return a.dependsOnOwnProps=!1,a}}function Y(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function Z(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=Y(e);var a=r(t,n);return"function"==typeof a&&(r.mapToProps=a,r.dependsOnOwnProps=Y(a),a=r(t,n)),a},r}}var Q=[function(e){return"function"==typeof e?Z(e):void 0},function(e){return e?void 0:K((function(e){return{dispatch:e}}))},function(e){return e&&"object"==typeof e?K((function(t){return function(e,t){if("function"==typeof e)return q(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(e),r={},a=0;a<n.length;a++){var i=n[a],o=e[i];"function"==typeof o&&(r[i]=q(o,t))}return r}(e,t)})):void 0}];var J=[function(e){return"function"==typeof e?Z(e):void 0},function(e){return e?void 0:K((function(){return{}}))}];function X(e,t,n){return S({},n,e,t)}var $=[function(e){return"function"==typeof e?function(e){return function(t,n){n.displayName;var r,a=n.pure,i=n.areMergedPropsEqual,o=!1;return function(t,n,c){var s=e(t,n,c);return o?a&&i(s,r)||(r=s):(o=!0,r=s),r}}}(e):void 0},function(e){return e?void 0:function(){return X}}];function ee(e,t,n,r){return function(a,i){return n(e(a,i),t(r,i),i)}}function te(e,t,n,r,a){var i,o,c,s,u,l=a.areStatesEqual,d=a.areOwnPropsEqual,f=a.areStatePropsEqual,p=!1;function h(a,p){var h,m,v=!d(p,o),g=!l(a,i);return i=a,o=p,v&&g?(c=e(i,o),t.dependsOnOwnProps&&(s=t(r,o)),u=n(c,s,o)):v?(e.dependsOnOwnProps&&(c=e(i,o)),t.dependsOnOwnProps&&(s=t(r,o)),u=n(c,s,o)):g?(h=e(i,o),m=!f(h,c),c=h,m&&(u=n(c,s,o)),u):u}return function(a,l){return p?h(a,l):(c=e(i=a,o=l),s=t(r,o),u=n(c,s,o),p=!0,u)}}function ne(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,a=t.initMergeProps,i=A(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),o=n(e,i),c=r(e,i),s=a(e,i);return(i.pure?te:ee)(o,c,s,e,i)}function re(e,t,n){for(var r=t.length-1;r>=0;r--){var a=t[r](e);if(a)return a}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function ae(e,t){return e===t}var ie,oe,ce,se,ue,le,de,fe,pe,he,me,ve;ce=(oe=void 0===ie?{}:ie).connectHOC,se=void 0===ce?L:ce,ue=oe.mapStateToPropsFactories,le=void 0===ue?J:ue,de=oe.mapDispatchToPropsFactories,fe=void 0===de?Q:de,pe=oe.mergePropsFactories,he=void 0===pe?$:pe,me=oe.selectorFactory,ve=void 0===me?ne:me;function ge(){var e=Object(c.useContext)(b);return I()(e,"could not find react-redux context value; please ensure the component is wrapped in a <Provider>"),e}function be(){return ge().store}function _e(){return be().dispatch}var ye,Ee="undefined"!=typeof window?c.useLayoutEffect:c.useEffect,Oe=function(e,t){return e===t};function we(e,t){void 0===t&&(t=Oe),I()(e,"You must pass a selector to useSelectors");var n,r=ge(),a=r.store,i=r.subscription,o=Object(c.useReducer)((function(e){return e+1}),0)[1],s=Object(c.useMemo)((function(){return new O(a,i)}),[a,i]),u=Object(c.useRef)(),l=Object(c.useRef)(),d=Object(c.useRef)();try{n=e!==l.current||u.current?e(a.getState()):d.current}catch(e){var f="An error occured while selecting the store state: "+e.message+".";throw u.current&&(f+="\nThe error may be correlated with this previous error:\n"+u.current.stack+"\n\nOriginal stack trace:"),new Error(f)}return Ee((function(){l.current=e,d.current=n,u.current=void 0})),Ee((function(){function e(){try{var e=l.current(a.getState());if(t(e,d.current))return;d.current=e}catch(e){u.current=e}o({})}return s.onStateChange=e,s.trySubscribe(),e(),function(){return s.tryUnsubscribe()}}),[a,s]),n}ye=u.unstable_batchedUpdates,_=ye;var Ce,Se=n(3),Ae=n(12),ke=n.n(Ae),je=["icon","text","type","className"];function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.POSITIVE="positive",e.NEGATIVE="negative",e.REGULAR="regular",e.ON="on",e.OFF="off",e.CLEAR="clear",e.DISABLED="disabled"}(Ce||(Ce={}));var Pe=function(e){var t=e.icon,n=e.text,r=e.type,i=e.className,o=ke()(e,je),c=Object(d.c)("CallButton","CallButton--".concat(r),i,{"CallButton--withText":!!n},"CallButton--withAnimation"),u=Object(d.c)("CallButton__icon","CallButton__icon--withAnimation"),l=Ie(Ie({},o),{},{onMouseDown:function(e){e.preventDefault(),o.onMouseDown&&o.onMouseDown(e)}});return s.a.createElement("button",a()({className:palettePrefix(c)},l,{disabled:r===Ce.DISABLED}),s.a.createElement("figure",{className:palettePrefix(u)},t),n)},De=function(e){var t=a()({},e);return s.a.createElement("svg",a()({height:"14",width:"21",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},t),s.a.createElement("path",{d:"M11.154 0c1.337 0 1.822.14 2.311.4.49.262.873.646 1.134 1.135.262.489.401.974.401 2.31v6.31c0 1.336-.14 1.821-.4 2.31a2.726 2.726 0 01-1.135 1.134c-.489.262-.974.401-2.31.401h-7.31c-1.336 0-1.821-.14-2.31-.4A2.726 2.726 0 01.4 12.464C.139 11.976 0 11.491 0 10.155v-6.31c0-1.336.14-1.821.4-2.31A2.726 2.726 0 011.536.4C2.024.139 2.509 0 3.845 0zM20.8 2.897a1 1 0 01.2.6v7.006a1 1 0 01-1.6.8L17.2 9.65a.5.5 0 01-.2-.4v-4.5a.5.5 0 01.2-.4l2.2-1.652a1 1 0 011.4.199z"}))},Ne=function(e){var t=a()({},e);return s.a.createElement("svg",a()({height:"18",width:"18",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},t),s.a.createElement("path",{d:"M11.112 12.259c1.354-1.354 3.486-1.48 4.903-.287l1.025.863c1.168.983 1.287 2.757.263 3.96a3.318 3.318 0 01-2.195 1.133c-3.273.44-6.707-1.137-10.303-4.733C1.21 9.6-.369 6.165.072 2.892a3.25 3.25 0 01.159-.752c.19-.56.527-1.058.974-1.443C2.41-.327 4.181-.21 5.165.96l.862 1.024c1.194 1.416 1.07 3.55-.284 4.903l-.736.735a.712.712 0 00-.164.748c.267.732.95 1.645 2.046 2.74 1.096 1.097 2.01 1.78 2.74 2.048.26.095.553.03.749-.166z"}))},xe=function(e){var t=a()({},e);return s.a.createElement("svg",a()({height:"14",width:"14",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},t),s.a.createElement("path",{d:"M13.3.7a.99.99 0 00-1.4 0L7 5.6 2.1.7A.99.99 0 00.7 2.1L5.6 7 .7 11.9a.99.99 0 001.4 1.4L7 8.4l4.9 4.9a.99.99 0 001.4-1.4L8.4 7l4.9-4.9a.99.99 0 000-1.4z"}))},Re=function(e){var t=e.id,n=e.className,r=e.children,a=Object(c.useMemo)((function(){var e=48+Math.abs(t)%3*4,n=48+Math.abs(t)%4*5,r=52+Math.abs(t)%5*6;return"radial-gradient(circle, rgb(".concat(e,",").concat(n,",").concat(r,") 40%, #0a0a0a 100%)")}),[]),i=Object(d.c)("BlurredBackground",n);return s.a.createElement("div",{className:palettePrefix(i),style:{background:a}},r)},Me=["id","size","text","specificType","className"],Le=function(e){var t=e.id,n=e.size,r=void 0===n?"m":n,i=e.text,o=e.specificType,c=e.className,u=ke()(e,Me),l=o||Math.abs(t%6)+1,f=Object(d.c)("ConversationNoPhoto","ConversationNoPhoto--".concat(l),"ConversationNoPhoto--".concat(r),c);return s.a.createElement("figure",a()({},u,{className:palettePrefix(f),dangerouslySetInnerHTML:{__html:i}}))},Be=function(e){var t=a()({},e);return s.a.createElement("svg",a()({width:"10",height:"10",viewBox:"0 0 10 10",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),s.a.createElement("path",{d:"M6.80486 3.06621L9.19457 3.30079C10.0261 3.38241 10.2811 4.21346 9.63901 4.75944L7.76813 6.35033L8.46267 8.94201C8.69075 9.79313 7.98312 10.3084 7.27435 9.79614L5.0011 8.15325L2.72785 9.79614C2.02194 10.3063 1.31141 9.79324 1.53953 8.94201L2.23406 6.35033L0.363183 4.75944C-0.281598 4.21116 -0.0275869 3.38278 0.807493 3.30079L3.19677 3.06621L4.24943 0.583062C4.57908 -0.194562 5.42332 -0.194173 5.75269 0.583142L6.80486 3.06621Z"}))},Fe=function(e){var t=e.className,n=e.type;return s.a.createElement("div",{className:palettePrefix(Object(d.c)("UserBadge","UserBadge--".concat(n),t))},s.a.createElement(Be,null))},He=s.a.createContext({isModalView:!0,withAnimation:!0,allowAddMembers:!1,debugLog:!1,incomingCall:!1,streaming:!0,streamingPrivacy:!0,fullHD:!1,anonymPhoto:!0,allowBanParticipant:!1,showFeedbackScreen:!1,enableVideoSlots:!1,videoSlotsCount:Se.Sc,allowCallByName:!1,nativeApp:!1,nativeAppJoin:!1,enableScreenTrack:!1,enableProducerScreenTrack:!1,allowWaitingHall:!1,allowPushToTalk:!1,badNetwork:!1,badNetworkP2P:!1,desktopAppNotification:!1,sferum:!1,enableVirtualBackground:!1}),Ve=n(21),Ue=n.n(Ve);function ze(e){return e>0&&e<2e9}function Ge(e){return e>2e9}var We=n(8),qe=function(e){return 0===e||Ge(e)||null===e};function Ke(e){return e&&e.attaches&&e.attaches[0]&&"group_call_in_progress"===e.attaches[0].type}function Ye(e){return e.conversationOptions.includes(We.ConversationOption.WAITING_HALL)}function Ze(e){return{peerId:0,canAddMembers:!0,tab:e("calls_new_call_title"),photo:Se.y}}function Qe(e){return!!e.groupId}function Je(e){var t=e.audio,n=e.video,r=[];return t&&r.push(We.MediaOption.AUDIO),n&&r.push(We.MediaOption.VIDEO),r}function Xe(e){return!!e.speakers[e.me]}function $e(){var e,t=Number(null!==(e=d.y.getItem(Se.b))&&void 0!==e?e:0)+1;d.y.setItem(Se.b,String(t))}var et=n(30),tt=n.n(et),nt=n(31),rt=n.n(nt);function at(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function it(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ot=new(function(){function e(){tt()(this,e),o()(this,"actionStatCollector",void 0),o()(this,"eventCommonData",{})}return rt()(e,[{key:"setActionStatCollector",value:function(e){this.actionStatCollector=e}},{key:"setEventCommonData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.eventCommonData=e}},{key:"logEvent",value:function(e){var t=e.peer_id,n=Bt(t)?t:0,r=it(it({},e),{},{peer_id:e.peer_id.toString(),session_id:e.session_id||"",lib_version:"calls_v2",group_id:n},this.eventCommonData);this.actionStatCollector&&this.actionStatCollector.logEvent(o()({type:"type_voip_call_item"},"type_voip_call_item",r))}}]),e}());function ct(e,t){return new Promise((function(n){setTimeout(n.bind(null,t),1e3*e)}))}var st=[["&amp;","&"],["&lt;","<"],["&gt;",">"],["&quot;",'"']];function ut(e){return st.reduce((function(e,t){var n=t[0],r=t[1];return e.replace(new RegExp(r,"ig"),n)}),e)}function lt(e){return st.reduce((function(e,t){var n=t[0],r=t[1];return e.replace(new RegExp(n,"ig"),r)}),e).replace(/&#(\d+);/g,(function(e,t){return String.fromCodePoint(t)}))}var dt=["callInProgress"];function ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ht(e){var t=e.shortName,n=e.firstName;e.lastName;if(!t||!n){var r=e.name.split(" "),a=p()(r,2);t=mt(n=a[0],a[1],e.name)}return pt(pt({},e),{},{peerId:+e.id,tab:e.name,shortName:t,firstName:n})}function mt(e,t,n){if(e){var r=t?t.length>2?t.substring(0,1)+".":t:"";return r?"".concat(e," ").concat(r):e}return n}function vt(e){var t=p()(e,2),n=t[0],r=t[1],a=n&&function(e){var t=e.callInProgress,n=void 0!==t&&t,r=ke()(e,dt);return!r.call_in_progress&&n&&(r.call_in_progress=n),r}(n);return[a&&("peerId"in a?a:ht(a)),r?r.map(ht):[]]}function gt(e){var t,n=e.items,r=e.profiles,a=p()(n,1)[0],i=function(e){if(e.chat_settings){var t={peerId:e.peer.id,tab:e.chat_settings.title,name:e.chat_settings.title,canAddMembers:e.chat_settings.acl.can_invite,adminIds:e.chat_settings.admin_ids,ownerId:e.chat_settings.owner_id||-1};return e.chat_settings.photo&&(t.photo=e.chat_settings.photo.photo_100),t}return{canAddMembers:!0,peerId:e.peer.id}}(a),o=function(e){return e.map(Pt)}(r);return[pt(pt({},i),{},{tab:i.name}),ze(null!==(t=i.peerId)&&void 0!==t?t:0)?[pt(pt({},o&&o.filter((function(e){return e.peerId===i.peerId}))[0]),i)]:o,a]}function bt(e){var t=e.caller_info,n=e.chat_info;return n?2e9+n.chat_id:t.user_id}function _t(e){return!!e.payload.chat_info}function yt(e){return!!Object.values(e.participants).find((function(t){return(t.peerId===e.me||t.wasConnected)&&t.mediaSettings&&sn(t)}))}function Et(e,t,n){switch(+e){case Se.Sb:return n("calls_join_error_require_access");case Se.Tb:return n("calls_join_error_text");case Se.Vb:return n("calls_privacy_error");case Se.Ob:return n(t?"calls_chat_busy_error":"calls_busy_error");case Se.Pb:return n("calls_flood_error");case Se.Wb:return n("calls_join_error_require_auth");case Se.Xb:case Se.Rb:case Se.Qb:case Se.Ub:default:return n("calls_start_error")}}function Ot(e,t,n){var r,a,i=0===e.search("EXTERNAL_API_ERROR"),o=e.match(/\d+/g),c=o?Number(null===(r=e.match(/\d+/g))||void 0===r?void 0:r[1]):Se.m,s=o?Number(null===(a=e.match(/\d+/g))||void 0===a?void 0:a[0]):Se.m;if(!i||Number.isNaN(c)){switch(s){case Se.Nb:return n("calls_start_error_auth")}return function(e,t,n){switch(!0){case-1!==e.search("error.webrtc.auth.required"):return n("calls_join_error_require_auth");case-1!==e.search("error.webrtc.auth.banned"):case-1!==e.search("error.webrtc.participant.check.privacy"):return n("calls_join_error_banned");case-1!==e.search("error.webrtc.participant.check.killed_call"):return n("calls_join_error_killed_call");case-1!==e.search("not.found.webrtc.conversation"):return n("calls_join_error_not_found_conversation");default:return n("calls_start_error")}}(e,0,n)}switch(e){case We.HangupType.CANCELED:return n("calls_hangup_error_canceled");case We.HangupType.REJECTED:return n("calls_hangup_error_rejected");case We.HangupType.REMOVED:return n("calls_hangup_error_removed");case We.HangupType.HUNGUP:return n("calls_hangup_error_hangup");case We.HangupType.MISSED:return n("calls_hangup_error_missed");case We.HangupType.BUSY:return n("calls_hangup_error_busy");case We.HangupType.FAILED:return n("calls_hangup_error_failed");case We.HangupType.NETWORK_ERROR:return n("calls_hangup_error_network_error");case We.HangupType.CALLER_IS_BLOCKED:return n("calls_hangup_error_caller_is_blocked");case We.HangupType.NOT_FRIENDS:return n("calls_hangup_error_not_friends");case We.HangupType.CALLEE_IS_OFFLINE:return n("calls_hangup_error_callee_is_offline");case We.HangupType.UNKNOWN_ERROR:return n("calls_hangup_error_unknown_error");case We.HangupType.UNSUPPORTED:return n("calls_hangup_error_unsupported");case We.HangupType.OLD_VERSION:return n("calls_hangup_error_old_version");case We.HangupType.SERVICE_DISABLED:return n("calls_hangup_error_service_disabled");case We.HangupType.EXTERNAL_API_ERROR:return n("calls_hangup_error_external_api_error");case We.HangupType.SOCKET_CLOSED:return n("calls_hangup_error_socket_closed")}return Et(+c,t,n)}function wt(e,t){return JSON.stringify({is_video:t.includes(We.MediaOption.VIDEO),chat_id:Ge(e)?e-2e9:void 0,with_join_link:qe(e),join_by_link:qe(e)})}var Ct=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){return n.reduce((function(e,t){return t(e)}),e).apply(void 0,arguments)}};function St(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{attempts:10,timeout:0};return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t.attempts>0?ct(t.timeout,null).then((function(){return e.apply(void 0,r)})).catch((function(n){return!t.timeout&&(t.timeout=1),t.attempts=n.type===Se.yc.API?0:t.attempts-1,t.timeout=Math.min(2*t.timeout,300),St(e,t).apply(void 0,r)})):Promise.reject(Se.q.CANT_REACH_API)}}var At=function(e,t){return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t.apply(void 0,r).catch((function(n){if(n.error===Se.N.AUTH)return e().then((function(){return t.apply(void 0,r)}));throw n}))}};function kt(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:3,c=", ",s=function(e){return lt(n(e)||"")};if(0===i&&e.length>0&&(i=e.length),i>t.length){var u=i-t.length,l=e.slice(0,o).map(s).join(c);return a(u,"calls_members_list_label",r("calls_members_list_label",u)).replace("{name}",l)}if(t.length>1){var d=t.length>2?e.slice(0,2).map(s).join(c):s(e[0]),f=s(e[t.length-1]);return r("calls_and").replace("{before}",d).replace("{after}",f)}return 1===t.length?s(e[0]):""}function jt(e){return"current"in e?e.current:e}function Tt(e,t){var n=t.join_link,r=t.preview,a=t.profiles,i=t.anonyms,o=[].concat(Ue()(i),Ue()(a)).map(Pt);return{joinLink:n,title:r.title,membersCount:r.members_count,photo_100:r.photo.photo_100,photo_200:r.photo.photo_200,members:o,conversationData:{peerId:0,canAddMembers:!0,tab:e("calls_new_call_title"),photo:"https://vk.com/images/call_convo_stub.png"}}}function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Pt=function(e){var t=e.id,n=e.sex,r=e.first_name,a=e.last_name,i=e.screen_name,o=e.first_name_gen,c=e.name,s=e.photo_400,u=e.photo_200,l=e.can_call,d=e.online_info;return Bt(+t)&&(r=ut(r)),{id:+t,peerId:+t,name:c||"".concat(r," ").concat(a),firstName:r,shortName:mt(r,a,c),shortNameGen:mt(o,a,c),link:i&&"/".concat(i),sex:n,canCall:l,photo:s||u,onlineInfo:d||null}},Dt=function(e){var t=e.id,n=e.name,r=e.screen_name,a=e.photo_400,i=e.photo_200,o=e.photo_100;return{id:-t,peerId:-t,name:ut(n),firstName:"",lastName:"",shortName:"",shortNameGen:"",link:r&&"/".concat(r),photo:a||i||o,photo_100:o}};function Nt(e){return e.reduce((function(e,t){return e[t.id]=!0,e}),{})}function xt(e){return e.participants[e.me]}function Rt(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?It(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t);return e.photo&&(n.photo=e.photo),e.name&&(n.name=e.name),e.link&&(n.link=e.link),n}function Mt(e){var t=e.name||"";return e.photo?{src:e.photo,alt:t,key:e.peerId}:{id:e.peerId,text:t.slice(0,1)}}var Lt=function(e){return e>-19e8&&e<-189e7},Bt=function(e){return e<0&&e>-1e9},Ft=function(e){return null!=e&&e.peerId?Lt(e.peerId)?e.peerId.toString():{id:e.peerId.toString(),type:We.ExternalIdType.USER}:null},Ht={},Vt=function(e,t,n,r,a,i,o,c){var s=arguments.length>8&&void 0!==arguments[8]&&arguments[8],u=r.peerId===e.me,l=Lt(r.peerId),d=qe(e.peer),f=e.participants[e.me],p=!!e.groupId,h=[],m=[],v=e.config.isModalView,g=Bt(r.peerId);if(u||!a||l||void 0===c||h.push({text:i(g?"calls_go_to_community":"calls_go_to_profile"),onClick:function(e){c(e,r.link)}}),u||l||Lt(e.me)||void 0===o||p||h.push({text:i(g?"calls_go_to_chat_with_community":"calls_go_to_chat_with_participant"),onClick:function(){v&&n({type:Se.k,mode:Se.Ic.COLLAPSED}),n({type:Se.qb,isOpen:!1}),o(r.peerId)}}),!u&&d&&!Lt(e.me)&&Jt(f)&&!en(r)){var b={negative:!0,text:i("calls_participant_menu_kick"),onClick:function(){n({type:Se.Fc,data:{type:Se.kb.CALL,participant:r}})}};s?m.push(b):h.push(b)}if(!u&&d&&!Lt(e.me)&&tn(f)&&h.push({text:i("calls_participant_menu_mute_audio_video"),onClick:function(){n({type:Se.Gc,data:{mode:Se.Jb.SINGLE,participant:r}})}}),u||d||Lt(e.me)||!tn(f)||h.push({text:i("calls_participant_menu_mute"),onClick:function(){var e=Ft(r);e&&t.muteParticipant(e,[We.MediaOption.AUDIO],!1).catch(console.log)}}),u||!d||Lt(e.me)||!tn(e.participants[e.me])||rn(r)||h.push({text:i("calls_participant_menu_enable_media_request"),onClick:function(){t.unmuteRequest(Ft(r),[We.MediaOption.AUDIO,We.MediaOption.VIDEO,We.MediaOption.SCREEN_SHARING]).catch(console.log),ot.logEvent({call_event_type:Se.p.ASK_USER_TO_UNMUTE,session_id:e.callData.callId,peer_id:e.peer,is_group_call:qe(e.peer)})}}),u||!d||Lt(e.me)||Lt(r.peerId)||!nn(e.participants[e.me])||$t(r)||en(r)||r.status!==We.ParticipantStatus.CONNECTED||h.push({text:i("calls_participant_menu_assign_admin_role"),onClick:function(){n({type:Se.Cc,data:{participant:r}})}}),!u&&d&&!Lt(e.me)&&nn(e.participants[e.me])&&$t(r)&&h.push({text:i("calls_participant_menu_revoke_admin_role"),onClick:function(){var a=Ft(r);a&&(t.grantRoles(a,[We.UserRole.ADMIN],!0).then((function(){n({type:Se.i,participantId:r.peerId,data:r.roles.filter((function(e){return e!==We.UserRole.ADMIN}))})})).catch(console.log),ot.logEvent({call_event_type:Se.p.RETRIEVE_ADMIN,session_id:e.callData.callId,peer_id:e.peer,is_group_call:qe(e.peer)}))}}),d&&!Lt(e.me)&&Xt(e.participants[e.me])&&!Qt(e,r)&&h.push({text:i("calls_participant_menu_pin"),onClick:function(){var a=Ft(r);a&&(t.pinParticipant(a,!1).then((function(){n({type:Se.Yb,data:r.peerId}),n({type:Se.Dc,isOratorMode:!0})})).catch(console.log),ot.logEvent({call_event_type:Se.p.ADMIN_PIN,session_id:e.callData.callId,peer_id:e.peer,is_group_call:qe(e.peer)}))}}),d&&!Lt(e.me)&&Xt(e.participants[e.me])&&Qt(e,r)&&h.push({text:i("calls_participant_menu_pin_cancel"),onClick:function(){var a=Ft(r);a&&(t.pinParticipant(a,!0).then((function(){n({type:Se.Yb,data:null})})).catch(console.log),ot.logEvent({call_event_type:Se.p.ADMIN_UNPIN,session_id:e.callData.callId,peer_id:e.peer,is_group_call:qe(e.peer)}))}}),s&&m.length>0&&(h.push({separator:!0}),h=h.concat(m)),Ht[r.peerId]){var _=h.length===Ht[r.peerId].length;if(_)for(var y=0;y<h.length;y++)h[y].text!==Ht[r.peerId][y].text&&(_=!1);_?h=Ht[r.peerId]:Ht[r.peerId]=h}else Ht[r.peerId]=h;return h},Ut=function(e,t){var n=e.participants[t];return n&&(n.peerId===e.me||!!n.status)},zt=function(e,t){return!!e.unableToCallGroupMembersIds&&e.unableToCallGroupMembersIds.indexOf(t)>-1};function Gt(e,t){var n,r=qe(e.peer)?e.adminPinnedParticipant||e.screenSharingPinnedParticipant||e.pinnedParticipant||e.orator:e.peer;if(r)return e.participants[r];for(var a=e.participants[e.me],i=0,o=Object.values(e.participants);i<o.length;i++){var c=o[i];if(c.peerId!==e.me&&c.wasConnected&&(a||(a=c),!t||sn(c)))return c}return null!==(n=a)&&void 0!==n?n:e.participants[e.me]}var Wt=[];function qt(e,t){for(var n=e.participants,r=e.me,a=e.groupId,i=e.meGroup,o=e.adminPinnedParticipant,c=e.isOratorMode?e.oratorScrollFirstVisible:e.gridScrollFirstVisible,s=e.isOratorMode?e.oratorScrollNumberOfVisible:30,u=e.isOratorMode?30:60,l=[],d=[],f=[],p=[],h=[],m=[],v=0,g=Object.values(n);v<g.length;v++){var b,_,y,E,O=g[v];O.status&&(null!==(b=O.statusData)&&void 0!==b&&null!==(_=b.hand)&&void 0!==_&&_.state?l.push(O):O.peerId===o?d.push(O):O.peerId===r?f.push(a&&i?Rt(i,n[r]):n[r]):null!==(y=O.mediaSettings)&&void 0!==y&&y.isScreenSharingEnabled?p.push(O):null!==(E=O.mediaSettings)&&void 0!==E&&E.isVideoEnabled?h.push(O):m.push(O))}var w=[].concat(Ue()(l.sort((function(e,t){var n,r,a,i,o,c;return(null!==(n=null===(r=e.statusData)||void 0===r||null===(a=r.hand)||void 0===a?void 0:a.ts)&&void 0!==n?n:0)-(null!==(i=null==t||null===(o=t.statusData)||void 0===o||null===(c=o.hand)||void 0===c?void 0:c.ts)&&void 0!==i?i:0)}))),d,f,p,h,m);if(w.length!==Wt.length)Wt=w;else for(var C=0;C<w.length;C++)if(w[C]!==Wt[C]){Wt=w;break}return t?Wt:Wt.slice(c<u?0:c-u,c+s+u>=Wt.length?Wt.length:c+s+u)}function Kt(e){var t=e.participants,n=0;for(var r in t)t.hasOwnProperty(r)&&Zt(e,t[r])&&n++;return n}function Yt(e){return Object.values(e.participants).filter((function(e){return e.status===We.ParticipantStatus.CONNECTED})).concat(e.participants[e.me])}function Zt(e,t){return t.peerId===e.me||t.status}function Qt(e,t){return e.adminPinnedParticipant===t.peerId}function Jt(e){return an(e)}function Xt(e){return $t(e)||en(e)}function $t(e){return!(null==e||!e.roles)&&e.roles.some((function(e){return e===We.UserRole.ADMIN}))}function en(e){return!(null==e||!e.roles)&&e.roles.some((function(e){return e===We.UserRole.CREATOR}))}function tn(e){return!!e.roles&&(en(e)||$t(e))}function nn(e){return!!e.roles&&(en(e)||$t(e))}function rn(e){if(!e.mediaSettings)return!1;var t=e.mediaSettings,n=t.isAudioEnabled,r=t.isVideoEnabled,a=t.isScreenSharingEnabled;return n&&(r||a)}function an(e){return $t(e)||en(e)}function on(e){var t=e.permissions||{};return[t.audio,t.video,t.screenSharing].some((function(e){return e===Se.tb.DENY}))}function cn(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?e.stream:e.screenSharingStream?e.screenSharingStream:e.stream}function sn(e){var t;return!(null===(t=e.mediaSettings)||void 0===t||!t.isVideoEnabled)||function(e){var t;return!(null===(t=e.mediaSettings)||void 0===t||!t.isScreenSharingEnabled)&&!!e.screenSharingStream}(e)}function un(e){var t;return null!==(t=e.participants[e.adminPinnedParticipant||e.screenSharingPinnedParticipant||e.pinnedParticipant||e.orator||e.me])&&void 0!==t?t:{}}var ln=function(e){var t,n=e.id,r=e.waves,a=void 0!==r&&r,i=e.size,u=e.photo,l=void 0===u?"":u,f=e.alt,p=e.letter,h=e.showCreatorBadge,m=e.showAdminBadge,v=e.className,g=Object(c.useContext)(He),b=g.withAnimation,_=g.anonymPhoto,y=Lt(n),E=Object(d.c)("CallPhoto",v,o()({"CallPhoto--waves":b&&!!a},"CallPhoto--".concat(i),!!i)),O=null!=p?p:String.fromCodePoint(null!==(t=f.codePointAt(0))&&void 0!==t?t:32);return!l||l.includes(Se.x)||y&&!_?s.a.createElement(s.a.Fragment,null,s.a.createElement(Le,{id:Math.abs(n),text:O,size:i,className:palettePrefix(E)}),h?s.a.createElement(Fe,{className:palettePrefix("CallPhoto__badge"),type:"creator"}):m?s.a.createElement(Fe,{className:palettePrefix("CallPhoto__badge"),type:"admin"}):null):s.a.createElement(s.a.Fragment,null,s.a.createElement("img",{src:l,className:palettePrefix(E),alt:f}),h?s.a.createElement(Fe,{className:palettePrefix("CallPhoto__badge"),type:"creator"}):m?s.a.createElement(Fe,{className:palettePrefix("CallPhoto__badge"),type:"admin"}):null)};function dn(e){var t=e.title,n=e.description,r=e.className;return s.a.createElement("header",{className:palettePrefix(Object(d.c)("IncomingCallHeader",r))},s.a.createElement("h1",{className:palettePrefix("IncomingCallHeader__title")},t),s.a.createElement("div",{className:palettePrefix("IncomingCallHeader__description")},n))}var fn=["type","isActive","icon","className"];function pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pn(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mn=Object(c.forwardRef)((function(e,t){var n=e.type,r=e.isActive,i=e.icon,c=e.className,u=ke()(e,fn),l=Object(d.c)("CallIconButton",c,"CallIconButton--withAnimation",o()({"CallIconButton--active":r},"CallIconButton--".concat(n),!!n)),f=hn(hn({},u),{},{onMouseDown:function(e){e.preventDefault(),u.onMouseDown&&u.onMouseDown(e)}});return s.a.createElement("button",a()({},f,{className:palettePrefix(l),ref:t}),i)})),vn=n(11),gn=n.n(vn),bn=n(33),_n=n.n(bn),yn=n(39),En=n.n(yn),On=n(34),wn=n.n(On),Cn=["x","y","text","position","align","removed","maxWidth","appearance","className","tooltipRef","tooltipInRef","arrow"],Sn=function(e){var t,n=e.x,r=e.y,i=e.text,l=e.position,f=void 0===l?"b":l,p=e.align,h=void 0===p?"center":p,m=e.removed,v=e.maxWidth,g=e.appearance,b=void 0===g?"dark":g,_=e.className,y=e.tooltipRef,E=e.tooltipInRef,O=e.arrow,w=ke()(e,Cn),C=Object(c.useRef)(null);w.static||C.current||(C.current=document.createElement("div"),document.body.appendChild(C.current));var S=Object(d.c)("Tooltip","Tooltip--".concat(f),"Tooltip--".concat(b),(t={"Tooltip--static":w.static,"Tooltip--removed":!!m},o()(t,"Tooltip--align-".concat(h),"t"===f||"b"===f),o()(t,"Tooltip--arrow-".concat(O),"r"===f||"l"===f||"hide"===O),t),_),A=s.a.createElement("div",a()({},w,{className:palettePrefix(S),ref:y,style:w.static?{}:{top:r,left:n}}),"string"==typeof i&&s.a.createElement("div",{className:palettePrefix("Tooltip__in"),ref:E,style:{maxWidth:v},dangerouslySetInnerHTML:{__html:i}}),"string"!=typeof i&&s.a.createElement("div",{className:palettePrefix("Tooltip__in"),ref:E,style:{maxWidth:v}},i));return w.static?A:C.current?Object(u.createPortal)(A,C.current):A};function An(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?An(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):An(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wn()(e);if(t){var a=wn()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return En()(this,n)}}var Tn=function(e){var t=e.position,n=e.align,r=e.text,a=e.rect,i=e.marginTop,o=e.marginLeft,c=e.maxWidth,s=e.appearance,u=e.className,l=a.left,d=a.top;switch(t){case"t":l+=.5*a.width;break;case"r":l+=a.width,d+=.5*a.height;break;case"b":l+=.5*a.width,d+=a.height;break;case"l":d+=.5*a.height}return{tooltip:{position:t,align:n,text:r,x:l=Math.round(l+(o||0)),y:d=Math.round(d+(i||0)),maxWidth:c,appearance:s,className:u}}},In=function(e){_n()(n,e);var t=jn(n);function n(e){var r;return tt()(this,n),r=t.call(this,e),o()(gn()(r),"tooltipRef",c.createRef()),o()(gn()(r),"openDelayTimeout",void 0),o()(gn()(r),"closeDelayTimeout",void 0),o()(gn()(r),"onMouseEnter",(function(){r.state.tooltip?(clearTimeout(r.closeDelayTimeout),r.state.tooltip.removed&&r.setState(kn(kn({},r.state),{},{tooltip:kn(kn({},r.state.tooltip),{},{removed:!1})}))):r.props.delay?r.openDelayTimeout=window.setTimeout((function(){r.openDelayTimeout=0,r.drawTooltip()}),r.props.delay):r.drawTooltip()})),o()(gn()(r),"onMouseLeave",(function(){if(r.state.tooltip)r.props.delayHide?r.closeDelayTimeout=window.setTimeout((function(){r.update()}),r.props.delayHide):r.update();else if(r.openDelayTimeout)return clearTimeout(r.openDelayTimeout),void(r.openDelayTimeout=0)})),o()(gn()(r),"onTransitionEnd",(function(e){"visibility"===e.propertyName&&r.state.tooltip&&r.setState({tooltip:void 0})})),r.state={el:null},r}return rt()(n,[{key:"componentDidMount",value:function(){var e=u.findDOMNode(this);this.setState({el:e}),null==e||e.addEventListener("mouseenter",this.onMouseEnter),null==e||e.addEventListener("mouseleave",this.onMouseLeave)}},{key:"componentDidUpdate",value:function(e,t){var n,r;!t.tooltip&&this.state.tooltip&&this.props.allowMouseOverTooltipContent&&(null===(n=this.tooltipRef.current)||void 0===n||n.addEventListener("mouseenter",this.onMouseEnter),null===(r=this.tooltipRef.current)||void 0===r||r.addEventListener("mouseleave",this.onMouseLeave))}},{key:"componentWillUnmount",value:function(){var e,t,n,r;null===(e=this.state.el)||void 0===e||e.removeEventListener("mouseenter",this.onMouseEnter),null===(t=this.state.el)||void 0===t||t.removeEventListener("mouseleave",this.onMouseLeave),null===(n=this.tooltipRef.current)||void 0===n||n.removeEventListener("mouseenter",this.onMouseEnter),null===(r=this.tooltipRef.current)||void 0===r||r.removeEventListener("mouseleave",this.onMouseLeave),clearTimeout(this.closeDelayTimeout),clearTimeout(this.openDelayTimeout)}},{key:"drawTooltip",value:function(){if(this.state.el&&!this.state.tooltip){var e=this.props,t=e.text,n=e.position,r=e.align,a=e.marginTop,i=e.marginLeft,o=e.maxWidth,c=e.appearance,s=e.className,u=Object(d.j)(this.state.el instanceof HTMLElement?this.state.el:null);this.update({text:t,position:n,align:r,rect:u,marginTop:a,marginLeft:i,maxWidth:o,appearance:c,className:s})}}},{key:"update",value:function(e){e?this.setState(Tn(e)):this.setState({tooltip:Object.assign({},this.state.tooltip,{removed:!0})})}},{key:"render",value:function(){var e=this.state.tooltip?kn(kn({},this.state.tooltip),{},{className:Object(d.c)(this.state.tooltip.className,{"Tooltip--noPointerEvents":!this.props.allowMouseOverTooltipContent})}):null;return e&&"undefined"!=typeof window?c.createElement(c.Fragment,null,this.props.children,c.createElement(Sn,a()({tooltipInRef:this.tooltipRef},e,{onTransitionEnd:this.onTransitionEnd}))):this.props.children}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.tooltip&&(e.text!==t.tooltip.text||e.position!==t.tooltip.position||e.align!==t.tooltip.align||e.maxWidth!==t.tooltip.maxWidth||e.appearance!==t.tooltip.appearance)?Tn(kn(kn({},e),{},{rect:Object(d.j)(t.el instanceof HTMLElement?t.el:null)})):null}}]),n}(c.Component);o()(In,"defaultProps",{position:"b",align:"center",marginTop:0,marginLeft:0,appearance:"dark",delay:0,delayHide:0,allowMouseOverTooltipContent:!1});var Pn=s.a.createContext({getLang:function(e){return e},langSex:function(e,t){return t},langNumeric:function(e,t){return"".concat(t)},langShortDateTime:function(e){return"".concat(e)},langShortDate:function(e){return"".concat(e)}});function Dn(e){var t=e.id,n=e.photo,r=e.title,a=e.description,i=e.onCollapseCall,o=e.children,c=s.a.useContext(Pn).getLang;return s.a.createElement("section",{className:palettePrefix("IncomingCall")},s.a.createElement(Re,{id:t}),s.a.createElement(In,{position:"b",text:c("calls_collapse"),marginTop:-6},s.a.createElement(mn,{type:"collapse",className:palettePrefix("IncomingCall__collapse"),onClick:i})),s.a.createElement(dn,{title:r,description:a}),s.a.createElement(ln,{id:t,waves:!0,photo:n,alt:r||"",className:palettePrefix("IncomingCall__photo")}),s.a.createElement("footer",{className:palettePrefix("IncomingCall__footer")},o))}function Nn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wn()(e);if(t){var a=wn()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return En()(this,n)}}var xn=function(e){_n()(n,e);var t=Nn(n);function n(){var e;tt()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),o()(gn()(e),"getScrollbarWidth",(function(){var t=document.createElement("div");t.classList.add(e._scrollbarMeasureClass),document.body.appendChild(t);var n=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),n})),o()(gn()(e),"hideScrollBar",(function(){var t=document.body.getBoundingClientRect(),n=t.left+t.right<window.innerWidth,r=e.getScrollbarWidth();e.calculatedPadding=window.getComputedStyle(document.body)["padding-right"],n&&(document.body.style.paddingRight="".concat(parseFloat(e.calculatedPadding)+r,"px")),document.body.classList.add(e._bodyHiddenOverflowClass)})),o()(gn()(e),"showScrollBar",(function(){document.body.style.paddingRight=e.calculatedPadding,document.body.classList.remove(e._bodyHiddenOverflowClass)})),o()(gn()(e),"onDocumentKeyDown",(function(t){var n=e.props.onClose;"Escape"===t.key&&n()})),o()(gn()(e),"onBackdropClick",(function(){var t=e.props,n=t.onClose,r=t.onBackdropClick;t.disableBackdropClick||(r?r():n())})),e}return rt()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.disableEscapeClose,n=e.disableBodyScroll;t||document.body.addEventListener("keydown",this.onDocumentKeyDown),n&&(this._scrollbarMeasureClass=s.a.createElement("div",{className:palettePrefix("BaseModal__scrollbarMeasure")}).props.className,this._bodyHiddenOverflowClass=s.a.createElement("div",{className:palettePrefix("BaseModal__bodyHiddenOverflow")}).props.className,this.hideScrollBar())}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.disableEscapeClose,n=e.disableBodyScroll;t||document.body.removeEventListener("keydown",this.onDocumentKeyDown),n&&this.showScrollBar()}},{key:"renderModal",value:function(){var e=this.props.className,t=Object(d.c)("BaseModal",e);return s.a.createElement("div",{className:palettePrefix(t),"aria-modal":"true"},s.a.createElement("div",{className:palettePrefix("BaseModal__backdrop"),onClick:this.onBackdropClick}),s.a.createElement("div",{className:palettePrefix("BaseModal__content")},this.props.children))}},{key:"render",value:function(){return l.a.createPortal(this.renderModal(),document.body)}}]),n}(s.a.Component);xn.defaultProps={className:"",children:null,disableBackdropClick:!1,disableEscapeClose:!1,disableBodyScroll:!1},xn.propTypes={onClose:g.a.func.isRequired,onBackdropClick:g.a.func,children:g.a.oneOfType([g.a.arrayOf(g.a.node),g.a.node]),className:g.a.string,disableBackdropClick:g.a.bool,disableBodyScroll:g.a.bool,disableEscapeClose:g.a.bool};var Rn=xn,Mn=n(57),Ln=n.n(Mn),Bn=function(){function e(e,t,n){this.delimiter=new RegExp("[\\s\\-\\.,\\\"\\'\\«\\(\\)\\[\\]\\{\\}\\#\\+\\?\\\\]+","g"),this.trimmer=new RegExp("^[\\s\\-\\.,\\\"\\'\\«\\(\\)\\[\\]\\{\\}\\+\\?\\\\]+|[\\s\\-,\\\"\\'\\«\\(\\)\\[\\]\\{\\}\\\\]+$","g"),this.toTranslit={1072:"a",1073:"b",1074:"v",1075:"g",1076:"d",1077:"e",1078:"zh",1079:"z",1080:"i",1081:"y",1082:"k",1083:"l",1084:"m",1085:"n",1086:"o",1087:"p",1088:"r",1089:"s",1090:"t",1091:"u",1092:"f",1093:"h",1094:"ts",1095:"ch",1096:"sh",1097:"sh",1099:"y",1101:"e",1102:"yu",1103:"ya",1105:"e",1098:"",1100:""},this.toLocalCase={f:"a",",":"b","<":"b",d:"v",u:"g",l:"d",t:"e",";":"zh",":":"zh",p:"z",b:"i",q:"y",r:"k",k:"l",v:"m",y:"n",j:"o",g:"p",h:"r",c:"s",n:"t",e:"u",a:"f","[":"h","{":"kh",w:"ts",x:"ch",i:"sh",o:"sh",s:"y","'":"e",'"':"e",".":"yu",">":"yu",z:"ya","`":"e","~":"e",m:"","]":"","}":""},this.toLocalTranslit={1072:"f",1074:"d",1075:"u",1076:"l",1077:"t",1079:"p",1080:"b",1081:"q",1082:"r",1083:"k",1084:"v",1085:"y",1086:"j",1087:"g",1088:"h",1089:"c",1090:"n",1091:"e",1092:"a",1094:"w",1095:"x",1096:"i",1097:"o",1099:"s",1103:"z",1098:"m"},this.list=e||[],this.iterCur=0,this.iterEnd=e?e.length:0,this.index={},this.callback=n||function(){},this.prepareFunc=t||function(e){return e},setTimeout(this.indexIteration.bind(this),10)}return e.prototype.indexIteration=function(){for(var e=Math.min(this.iterEnd,this.iterCur+200),t=this.iterCur;t<e;t++){var n=this.list[t];try{n._order=t}catch(e){}this.add(n)}this.iterCur=t,t>=this.iterEnd?this.callback(this):setTimeout(this.indexIteration.bind(this),10)},e.prototype.strToPrefixes=function(e){for(var t,n={},r=(t=e,t.replace(/&#(\d\d+);/g,(function(e,t){return(t=!0===(n=t)?1:parseInt(n)||0)>=32?String.fromCharCode(t):e;var n})).replace(/&quot;/gi,'"').replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&amp;/gi,"&")).toLowerCase().split(this.delimiter),a=r.length;a--;){var i=r[a],o="";if(i){for(var c=0;c<6;c++){var s=i.charCodeAt(c);if(s){var u=this.toTranslit[s],l=i.substr(c,1);o+=null!=u?u:l}}n[o]=1}}return n},e.prototype.strToSearchPrefixes=function(e){for(var t=[],n=e.toLowerCase().split(this.delimiter),r=n.length;r--;){var a={},i=n[r],o="",c="",s="",u=i.length>1;if(i){for(var l=0;l<6;l++){var d=i.charCodeAt(l);if(d){var f=this.toTranslit[d],p=i.substr(l,1);if(o+=null!=f?f:p,u){var h=this.toLocalCase[p],m=this.toLocalTranslit[d];c+=null!=h?h:p,s+=null!=m?m:p}}}a[o]=1,u&&(a[c]=2,a[s]=3),t.push(a)}}return t},e.prototype.toIndexTree=function(e,t){for(var n=this.index,r=0;r<6;r++){var a=e.substr(r,1)||-1;n=n[a]?n[a]:n[a]=5==r?[]:{}}n.push(t)},e.prototype.remove=function(e){var t=this.prepareFunc(e),n=this.strToPrefixes(t);for(var r in n)if(n.hasOwnProperty(r)){for(var a=this.index,i=0;i<6;i++){var o=r.substr(i,1)||-1;if(!a[o])break;a=a[o]}if(a.length)for(var i in a)if(this.equals(a[i],e)){a.splice(i,1);break}}},e.prototype.equals=function(e,t){for(var n in e)if(e.hasOwnProperty(n))switch(Ln()(e[n])){case"object":if(!this.equals(e[n],t[n]))return!1;break;case"function":if(void 0===e[n]||e[n].toString()!=t[n].toString())return!1;break;default:if(e[n]!=t[n])return!1}for(var n in t)if(void 0===t[n])return!1;return!0},e.prototype.intersect=function(e,t){var n=[];if(Fn(e[0])||Fn(t[0]))return e.filter((function(e){return-1!==t.indexOf(e)}));for(;e.length>0&&t.length>0;)if(e[0]._order<t[0]._order)e.shift();else if(e[0]._order>t[0]._order)t.shift();else{if(this.equals(e[0],t[0])){var r=e.shift();r&&n.push(r)}t.shift()}return n},e.prototype.add=function(e){var t=this.prepareFunc(e),n=this.strToPrefixes(t);for(var r in n)n.hasOwnProperty(r)&&this.toIndexTree(r,e)},e.prototype.search=function(e){var t=this.index,n=this.strToSearchPrefixes(e),r=[],a=!1;for(var i in n)if(n.hasOwnProperty(i)){if(a&&!r)break;var o=this.localSearch(n[i],0,t);o.sort((function(e,t){return e._order-t._order})),r=a?this.intersect(r,o):o,a=!0}for(var c=r[0],s=r.length+1,u=[],l=1;l<s;l++){var d=r[l];d!=c&&(u.push(c),c=d)}return u},e.prototype.localSearch=function(e,t,n){if(!n)return[];var r={};for(var a in e)e.hasOwnProperty(a)&&(r[o=a.substr(t,1)||-1]||(r[o]={}),r[o][a]=1);if(6==t++)return n;var i=[];for(var o in r)if("-1"===o)for(var c in n)n.hasOwnProperty(c)&&i.push.apply(i,this.localSearch(r[o],t,n[c]));else{var s=this.localSearch(r[o],t,n[o]);i.push.apply(i,s)}return i},e}();function Fn(e){return!isNaN(e)}var Hn=function(e,t,n){var r=Object(c.useRef)(null);r.current=r.current?r.current:new Bn(e,t);var a=r.current,i=Object(c.useCallback)((function(e){return e.reduce((function(e,t){return e[n(t)]=!0,e}),{})}),[]),o=Object(c.useState)(e),s=p()(o,2),u=s[0],l=s[1],d=Object(c.useState)(i(e)),f=p()(d,2),h=f[0],m=f[1];return Object(c.useEffect)((function(){var t=i(e),r=e.filter((function(e){return!h[n(e)]})),o=u.filter((function(e){return!t[n(e)]}));(r.length||o.length)&&(r.forEach((function(e){a.add(e)})),o.forEach((function(e){a.remove(e)})),l(e),m(t))}),[e]),a};var Vn=function(e){var t=e.onClose,n=e.onBackdropClick,r=e.isIncoming,a=void 0!==r&&r,i=e.isCautionBoxShown,o=void 0!==i&&i,u=e.children,l=_e(),f=Object(c.useContext)(He).withAnimation,p=Object(d.c)("CallModal",{"CallModal--withAnimation":f});Object(c.useEffect)((function(){return document.body.classList.add("layers_shown"),function(){document.body.classList.remove("layers_shown")}}),[]);var h=Object(c.useCallback)((function(){return o?void l({type:Se.wc,isOpen:!0,isIncoming:a||!1}):t()}),[o]);return s.a.createElement(Rn,{className:palettePrefix(p),disableBodyScroll:!0,onClose:h,onBackdropClick:n},u)};function Un(e){var t,n,r=e.SDK,a=e.bridge,i=we((function(e){return e})),o=i.peer,c=i.callData,u=i.participants,l=i.caller,d=_e(),f=s.a.useContext(Pn).getLang,p=l;p||(p=qe(o)?c.conversation:u[o]);var h=c.type===Se.w.VIDEO,m=f(h?"calls_incoming_videocall":"calls_incoming_audiocall"),v=f(h?"calls_reply_with_audio":"calls_reply"),g=f(h?"calls_reject_call":"calls_reject"),b=function(){r.declineCall(),ot.logEvent({call_event_type:Se.p.CALL_DECLINED_OR_HANGED_LOCALLY,session_id:c.callId,peer_id:o,is_group_call:qe(o),reason:"none"})};return s.a.createElement(Vn,{onClose:b,isIncoming:!0,isCautionBoxShown:!0},s.a.createElement(Dn,{id:o,title:(null===(t=p)||void 0===t?void 0:t.tab)||"",description:m,photo:(null===(n=p)||void 0===n?void 0:n.photo)||"",onCollapseCall:function(){d({type:Se.k,mode:Se.Ic.COLLAPSED})}},s.a.createElement(s.a.Fragment,null,h&&s.a.createElement(Pe,{text:f("calls_reply_with_video"),type:Ce.POSITIVE,icon:s.a.createElement(De,null),onClick:function(){return a.acceptCall(!0,!0)}}),s.a.createElement(Pe,{text:v,type:h?Ce.REGULAR:Ce.POSITIVE,icon:s.a.createElement(Ne,null),onClick:function(){return a.acceptCall(!1,!0)}}),s.a.createElement(Pe,{text:g,type:Ce.NEGATIVE,icon:s.a.createElement(xe,null),onClick:b}))))}function zn(e,t){return"/video".concat(e,"_").concat(t)}function Gn(e){var t=document.createElement("video");return t.addEventListener("loadeddata",(function e(){t.classList.add("Video--visible"),t.removeEventListener("loadeddata",e)})),t.autoplay=!0,t.controls=!1,t.crossOrigin="anonymous",t.playsInline=!0,t.preload="metadata",t.srcObject=e,t.volume=0,t}var Wn=new WeakMap,qn=Object(c.memo)((function(e){var t=e.stream,n=e.isMirrored,r=void 0!==n&&n,a=e.isContained,i=void 0!==a&&a,o=e.isStartWithVisible,u=void 0!==o&&o,l=e.className,f=s.a.useRef(null),p=s.a.useRef(null),h=s.a.useRef(t);return s.a.useEffect((function(){var e;if(null===(e=f.current)||void 0===e||!e.lastElementChild||h.current!==t){var n,a,o=u;if(t)if(Wn.has(t))if(null===(null===(n=Wn.get(t))||void 0===n?void 0:n.closest("body")))p.current=null!==(a=Wn.get(t))&&void 0!==a?a:null,o=!0;else p.current=Gn(t);else p.current=Gn(t),Wn.set(t,p.current);if(p.current&&f.current&&f.current.lastElementChild!==p.current){var c,s=Object(d.c)("Video",{"Video--contain":i,"Video--mirrored":r,"Video--visible":o||(null===(c=p.current)||void 0===c?void 0:c.classList.contains("Video--visible"))});f.current.lastElementChild&&(f.current.innerHTML=""),p.current.className=s,f.current.appendChild(p.current),p.current.play()}return function(){p.current&&p.current!==Wn.get(t)&&(p.current.srcObject=null,p.current.src="",p.current.pause(),p.current.removeAttribute("src"),p.current.load()),f.current&&(f.current.innerHTML="")}}}),[t,f.current]),Object(c.useEffect)((function(){p.current&&p.current.classList.toggle("Video--mirrored",r)}),[r]),s.a.createElement("div",{ref:f,className:palettePrefix(l)})})),Kn=function(e){var t=a()({},e);return s.a.createElement("svg",a()({width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 21 24"},t),s.a.createElement("path",{d:"M21.442 10.058c.513.77.588 1.831.192 2.663l-2.679 5.625C17.435 21.538 13.54 24 9.998 24H9c-4.422 0-8-3.58-8-8.009V8.128a2.746 2.746 0 013.5-2.642v-.732a2.75 2.75 0 013.571-2.629A2.749 2.749 0 0110.75 0c1.47 0 2.67 1.15 2.746 2.604A2.748 2.748 0 0117 5.254v4.264c1.299-1.278 3.357-1.087 4.442.54zM3.75 7.383a.746.746 0 00-.75.745v7.863A5.998 5.998 0 009 22h.998c2.773 0 5.964-2.02 7.152-4.514l2.678-5.625a.787.787 0 00-.05-.694c-.428-.642-1.123-.65-1.55-.01l-2.177 3.267c-.576.864-1.051.726-1.051-.323V5.255a.748.748 0 00-.75-.755.746.746 0 00-.75.747v5.757c0 .55-.448.996-1 .996-.556 0-1-.446-1-.995V2.752a.75.75 0 10-1.5 0v8.253c0 .54-.448.995-1 .995-.556 0-1-.446-1-.997v-6.25A.756.756 0 007.25 4a.75.75 0 00-.75.754v6.738c0 .551-.448 1.008-1 1.008-.556 0-1-.447-1-.999V8.138a.751.751 0 00-.75-.755z"}))},Yn=function(e){var t=a()({},e);return s.a.createElement("svg",a()({width:"12",height:"20",xmlns:"http://www.w3.org/2000/svg"},t),s.a.createElement("path",{d:"M4 3a2 2 0 104 0 2 2 0 00-4 0zm0 7a2 2 0 104 0 2 2 0 00-4 0zm2 9a2 2 0 110-4 2 2 0 010 4z",fill:"currentColor"}))},Zn=["children","portalContainerParent","renderNodeFactory"],Qn=function(){return document.createElement("div")},Jn=Object(c.forwardRef)((function(e,t){var n=e.children,r=e.portalContainerParent,i=void 0===r?document.body:r,o=e.renderNodeFactory,u=void 0===o?Qn:o,d=ke()(e,Zn),f=Object(c.useRef)(null);return f.current||(f.current=u(),i.appendChild(f.current)),Object(c.useEffect)((function(){return function(){f.current&&f.current.remove()}}),[]),l.a.createPortal(s.a.createElement("div",a()({},d,{ref:t}),n),f.current)}));var Xn=["open","position","mode","align","attachTarget","content","children"];function $n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function er(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$n(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$n(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tr=s.a.forwardRef((function(e,t){var n=e.open,r=void 0===n||n,i=e.position,o=void 0===i?"auto":i,u=e.mode,l=void 0===u?"side":u,f=e.align,h=void 0===f?"auto":f,m=e.attachTarget,v=void 0===m?document.body:m,g=e.content,b=e.children,_=ke()(e,Xn),y=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Object(c.useRef)(null);return s.a.useEffect((function(){t.forEach((function(e){null!==e&&null!==r&&(e.current=r.current)}))}),[t]),r}(t,Object(c.useRef)(null)),E=Object(c.useState)(null),O=p()(E,2),w=O[0],C=O[1],S=Object(c.useState)(null),A=p()(S,2),k=A[0],j=A[1],T=Object(c.useState)(null),I=p()(T,2),P=I[0],D=I[1],N=er(er({},b.props),{},{ref:y});return Object(c.useEffect)((function(){if(y&&y.current){var e=function(e,t,n,r,a,i){if(!i)return[null,null,null];if(!e)return[{top:0,left:0,width:0,height:0},"auto"===a?"left":a,"auto"===r?"b":r];var o=Object(d.j)(e),c=Object(d.j)(t),s="auto"===r||"auto"===a,u=s?window.innerWidth:0,l=s?window.innerHeight:0,f=s?window.pageYOffset||document.documentElement.scrollTop:0,p=s?window.pageXOffset||document.documentElement.scrollLeft:0;if("auto"===r){var h=o.top-f,m=f+l-o.top-o.height;r=m>h?"b":"t"}if("auto"===a){var v=o.left+.5*o.width,g=p+2*u/3;a=v>=p+u/3&&v<=g?"center":v>g?"right":"left"}var b=o.left,_=o.top;if("side"===n)return[{top:("b"===r?_+o.height:_)-c.top,left:("r"===r?b+o.width:b)-c.left,width:"t"===r||"b"===r?o.width:0,height:"l"===r||"r"===r?o.height:0},a,r];switch(r){case"t":b+=.5*o.width;break;case"r":b+=o.width,_+=.5*o.height;break;case"b":b+=.5*o.width,_+=o.height;break;case"l":_+=.5*o.height}return[{top:_-c.top,left:b-c.left,width:0,height:0},a,r]}(y.current,v,l,o,h,r),t=p()(e,3),n=t[0],a=t[1],i=t[2];C(n),j(a),D(i)}}),[l,o,h,y.current,r,v]),s.a.createElement(s.a.Fragment,null,s.a.cloneElement(b,N),r&&s.a.createElement(Jn,a()({},_,{className:palettePrefix(Object(d.c)("Popper",k&&"Popper--".concat(k),P&&"Popper--".concat(P),_.className)),"data-align":k,"data-position":P,portalContainerParent:v,style:w||void 0}),g))}));function nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nr(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ar=function(e){var t=e.children,n=e.items,r=e.open,a=void 0!==r&&r,i=e.setOpen,o=Object(c.useRef)(null),u=Object(c.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),i(!a)}),[a]),l=function(e){o.current&&o.current.contains(e.target)||i(!1)};return Object(c.useEffect)((function(){return a?document.documentElement.addEventListener("click",l,!0):document.documentElement.removeEventListener("click",l,!0),function(){return document.documentElement.removeEventListener("click",l,!0)}}),[a]),a?s.a.createElement(tr,{content:s.a.createElement("ul",{className:palettePrefix("CallsDropdown"),ref:o},n.map((function(e,t,n){return s.a.createElement("li",{className:palettePrefix("CallsDropdown__item"),key:e.key||t},"separator"in e?(r=!t||n.length-1===t,s.a.createElement("div",{className:palettePrefix(Object(d.c)({CallsDropdown__separator:!r}))})):function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Object(d.c)("CallsDropdown__button",{"CallsDropdown__button--disabled":n});return"href"in e&&"onClick"in e&&void 0!==e.onClick?s.a.createElement("a",{href:e.href,rel:"noopener noreferrer",target:"_blank",onClick:n?void 0:function(n){n.stopPropagation(),e.onClick(n),t(!1)},className:palettePrefix(r)},e.text):"href"in e?s.a.createElement("a",{href:e.href,rel:"noopener noreferrer",target:"_blank",onClick:n?void 0:function(e){e.stopPropagation(),t(!1)},className:palettePrefix(r)},e.text):"onClick"in e?s.a.createElement("button",{onClick:n?void 0:function(n){n.stopPropagation(),e.onClick(n),t(!1)},className:palettePrefix(r)},e.text):null}(e,i,e.disabled));var r}))),mode:"point"},s.a.cloneElement(t,rr(rr({},t.props),{},{onClick:u,"data-active":a}))):s.a.cloneElement(t,rr(rr({},t.props),{},{onClick:u}))},ir=function(e){var t=a()({},e);return s.a.createElement("svg",a()({width:"25",height:"24",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},t),s.a.createElement("path",{d:"M10 8a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"}),s.a.createElement("path",{d:"M6.558 10a.024.024 0 00-.017.04l3.254 3.255-2.947 2.948a1 1 0 001.414 1.414l2.948-2.948 3.25 3.25c.015.015.04.005.04-.017v-2.114c0-1.81.72-3.547 2-4.828l1.658-.414a.2.2 0 00.093-.336l-4-4a.2.2 0 00-.336.093L13.5 8a6.828 6.828 0 01-4.829 2H6.558z"}))},or=function(e){var t=a()({},e);return s.a.createElement("svg",a()({width:"56",height:"56",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),s.a.createElement("path",{d:"M28.5 37.5A1.5 1.5 0 0030 36V22.622l4.94 4.939a1.5 1.5 0 002.007.103l.114-.103a1.5 1.5 0 000-2.122l-7.5-7.5a1.5 1.5 0 00-2.122 0l-7.5 7.5a1.5 1.5 0 002.122 2.122l4.938-4.939L27 36a1.5 1.5 0 001.355 1.493l.145.007z"}),s.a.createElement("path",{d:"M19.883 8c-5.019 0-7.117.465-9.244 1.603a10.924 10.924 0 00-4.536 4.536C4.965 16.266 4.5 18.364 4.5 23.383v9.234c0 5.019.465 7.117 1.603 9.244a10.924 10.924 0 004.536 4.536C12.766 47.535 14.864 48 19.883 48h17.234c5.019 0 7.117-.465 9.244-1.603a10.924 10.924 0 004.536-4.536c1.138-2.127 1.603-4.225 1.603-9.244v-9.234c0-5.019-.465-7.117-1.603-9.244a10.924 10.924 0 00-4.536-4.536C44.234 8.465 42.136 8 37.117 8H19.883zm-7.83 4.248c1.486-.794 3-1.248 7.83-1.248h17.234c4.83 0 6.344.454 7.83 1.248a7.925 7.925 0 013.305 3.306c.794 1.485 1.248 3 1.248 7.83v9.233c0 4.83-.454 6.344-1.248 7.83a7.925 7.925 0 01-3.306 3.305c-1.485.794-3 1.248-7.83 1.248H19.884c-4.83 0-6.344-.454-7.83-1.248a7.925 7.925 0 01-3.305-3.306c-.794-1.485-1.248-3-1.248-7.83v-9.233c0-4.83.454-6.344 1.248-7.83a7.925 7.925 0 013.306-3.305z"}))};function cr(e){var t=e.isInverted,n=Object(d.c)("CallingStatus",{"CallingStatus--inverted":!!t}),r=Object(d.c)("CallingStatus__part","CallingStatus__part--withAnimation");return s.a.createElement("div",{className:palettePrefix(n)},s.a.createElement("span",{className:palettePrefix(r)}),s.a.createElement("span",{className:palettePrefix(r)}),s.a.createElement("span",{className:palettePrefix(r)}))}var sr=n(17),ur=n.n(sr),lr=n(18),dr=n(10),fr=n(19),pr=!1;function hr(){pr||(Object(dr.a)(new ur.a({id:"connection_16",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="connection_16"><g fill="currentColor"><path d="M12 3a1 1 0 00-1 1v8a1 1 0 102 0V4a1 1 0 00-1-1zM7 6a1 1 0 012 0v6a1 1 0 11-2 0zM3 8a1 1 0 012 0v4a1 1 0 11-2 0z" /></g></symbol>'})),pr=!0)}var mr=function(e){return Object(dr.b)((function(){hr()}),[]),s.a.createElement(fr.a,Object(lr.assign)({},e,{viewBox:"0 0 16 16",id:"connection_16",width:isNaN(e.width)?16:+e.width,height:isNaN(e.height)?16:+e.height}))};mr.mountIcon=hr;var vr=mr;function gr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function br(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gr(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _r={queryOption:function(e){return _r.getOptions()[e]},getOptions:function(){try{var e=localStorage.getItem(Se.ob.VIDEO_OPTIONS);if("string"!=typeof e)throw new Error("no value stored");return JSON.parse(e)}catch(e){return _r.getDefaultOptions()}},saveOption:function(e,t){var n=br(br({},_r.getOptions()),{},o()({},e,t));return localStorage.setItem(Se.ob.VIDEO_OPTIONS,JSON.stringify(n)),n},saveOptions:function(e){return localStorage.setItem(Se.ob.VIDEO_OPTIONS,JSON.stringify(e)),e},getDefaultOptions:function(){return{calls_is_video_mirrored:!0}}};function yr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Er(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yr(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Or,wr=function(){var e=we((function(e){return e.virtualBackgroundSettings.videoOptions})),t=_e(),n=Object(c.useState)(_r.getOptions),r=p()(n,2),a=r[0],i=r[1],s=Object(c.useCallback)((function(){i(_r.getOptions())}),[]),u=Object(c.useCallback)((function(){_r.saveOptions(a),t({type:Se.Qc,videoOptions:a})}),[a]),l=Object(c.useCallback)((function(e,t){i((function(n){return Er(Er({},n),{},o()({},e,t))}))}),[]);return Object(c.useEffect)((function(){Object(d.t)(e,a)||t({type:Se.Qc,videoOptions:a})}),[]),{videoOptions:a,storedVideoOptions:e,setVideoOptions:i,onRestoreSettings:s,onSaveSettings:u,onChangeVideoOption:l}},Cr=Object(c.memo)((function(e){var t=e.id,n=e.isVisible,r=void 0===n||n,a=e.isOrator,i=void 0!==a&&a,o=e.isInfoShown,u=e.isPinned,l=e.isPinnedByAdmin,f=e.isHandRaised,h=e.photo,m=e.hasVideo,v=e.hasAudio,g=e.isSharingScreen,b=e.isSpeaking,_=void 0!==b&&b,y=e.stream,E=void 0===y?null:y,O=e.isMe,w=void 0!==O&&O,C=e.name,S=e.letter,A=e.status,k=void 0===A?We.ParticipantStatus.CONNECTED:A,j=e.wasConnected,T=void 0===j||j,I=e.networkStatus,P=void 0===I?1:I,D=e.onClickParticipant,N=e.onDblClickParticipant,x=e.onStopScreenShare,R=e.allowContain,M=e.actions,L=s.a.useContext(Pn).getLang,B=Object(c.useContext)(He),F=B.withAnimation,H=B.anonymPhoto,V=s.a.useRef(null),U=Lt(t),z=wr().storedVideoOptions,G=!!D||!!N,W=i&&g&&w,q=Object(d.c)("Participant",{"Participant--isInteractive":G,"Participant--isPinned":u,"Participant--isSpeaking":_,"Participant--isOrator":i,"Participant--withAnimation":F}),K=Object(d.c)("Participant__more",{"Participant__more--withAnimation":F}),Y=s.a.useState(!1),Z=p()(Y,2),Q=Z[0],J=Z[1],X=Object(c.useCallback)((function(e){D&&D(e,Number(t))}),[D]),$=Object(c.useCallback)((function(e){N&&N(e,t)}),[N]),ee=Object(d.c)({Participant__offsetCard:o,Participant__oratorPhoto:i});return s.a.createElement("article",{ref:V,className:palettePrefix(q),onClick:X,onDoubleClick:$,"participant-id":String(t)},!r&&s.a.createElement(s.a.Fragment,null,s.a.createElement(Re,{id:t,className:palettePrefix("Participant__main")},s.a.createElement(ln,{id:t,photo:!H&&U?"":h,alt:C||"",letter:S,className:palettePrefix(ee)})),o&&s.a.createElement("footer",{className:palettePrefix("Participant__footer")},s.a.createElement("span",{className:palettePrefix("Participant__name")},C),(T||w)&&!v&&s.a.createElement("span",{className:palettePrefix("Participant__statusIcon Participant__statusIcon--mic")}))),r&&s.a.createElement(s.a.Fragment,null,M&&M.length>0&&s.a.createElement(ar,{items:M,open:Q,setOpen:J},s.a.createElement("button",{className:palettePrefix(K),"aria-label":L("calls_actions")},s.a.createElement(Yn,null))),!(m&&i)&&s.a.createElement(Re,{id:t,className:palettePrefix("Participant__main")},s.a.createElement(ln,{id:t,photo:!H&&U?"":h,alt:C||"",className:palettePrefix(ee)})),f&&s.a.createElement("div",{className:palettePrefix("Participant__handIndicator")},s.a.createElement(Kn,{className:palettePrefix("Participant__handIcon")})),W&&s.a.createElement("div",{className:palettePrefix("Participant__screenSharer")},s.a.createElement(or,null),s.a.createElement("div",{className:palettePrefix("Participant__screenSharerText")},L("calls_you_are_screen_sharer")),s.a.createElement("button",{className:palettePrefix("Participant__screenSharerButton"),onClick:x},L("calls_screen_share_stop"))),E&&m&&!W&&s.a.createElement(qn,{className:palettePrefix("Participant__main"),stream:E,isMirrored:w&&!g&&z[Se.I.IS_VIDEO_MIRRORED],isContained:R||g,isStartWithVisible:w}),k!==We.ParticipantStatus.CONNECTED&&!w&&s.a.createElement("div",{className:palettePrefix("Participant__status")},s.a.createElement(cr,{isInverted:!0})),!i&&o&&s.a.createElement("footer",{className:palettePrefix("Participant__footer")},(v||E||g)&&P<.6&&s.a.createElement(vr,{fill:P<=.3?"#ff5c5c":"#FECE00"}),s.a.createElement("span",{className:palettePrefix("Participant__name")},C),(T||w)&&!v&&s.a.createElement("span",{className:palettePrefix("Participant__statusIcon Participant__statusIcon--mic")}))),!l&&u&&s.a.createElement("header",{className:palettePrefix("Participant__header")},s.a.createElement("div",{className:palettePrefix("Participant__pin")})),l&&s.a.createElement("header",{className:palettePrefix("Participant__header")},s.a.createElement(ir,{className:palettePrefix("Participant__icon")})))})),Sr=function(e){var t=e.id,n=e.name,r=e.letter,a=e.hasAudio,i=e.hasVideo,o=e.isSharingScreen,c=e.stream,u=e.wasConnected,l=e.networkStatus,f=e.opponentId,p=e.opponentHasAudio,h=e.opponentHasVideo,m=e.opponentIsSharingScreen,v=e.opponentStream,g=e.opponentPhoto,b=e.opponentName,_=e.opponentWasConnected,y=e.opponentNetworkStatus,E=Object(d.c)("OneToOne",{"OneToOne--hasVideo":i,"OneToOne--opponentHasVideo":h});return s.a.createElement("div",{className:palettePrefix(E)},s.a.createElement("aside",{className:palettePrefix("OneToOne__local")},s.a.createElement(Cr,{id:t,hasVideo:i,hasAudio:a,isSharingScreen:o,stream:c,isMe:!0,name:n,letter:r,wasConnected:u,allowContain:!0,networkStatus:l})),s.a.createElement("main",{className:palettePrefix("OneToOne__remote")},s.a.createElement(Cr,{id:f,hasVideo:h,hasAudio:p,isSharingScreen:m,stream:v,photo:g,name:b,allowContain:!0,wasConnected:_,networkStatus:y})))},Ar=["children","className","alignX","alignY","size"],kr=Object(c.forwardRef)((function(e,t){var n=e.children,r=e.className,i=e.alignX,o=e.alignY,c=e.size,u=void 0===c?"m":c,l=ke()(e,Ar),f=Object(d.c)("CallIconButtonGroup","CallIconButtonGroup--".concat(i),"CallIconButtonGroup--".concat(o),"CallIconButtonGroup--size-".concat(u),r);return s.a.createElement("div",a()({className:palettePrefix(f),ref:t},l),n)})),jr=function(e){var t=a()({},e);return s.a.createElement("svg",a()({width:"24",height:"24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),s.a.createElement("path",{d:"M4.3 4.3a1 1 0 011.4 0l6.3 6.29 6.3-6.3a1 1 0 111.4 1.42L13.42 12l6.3 6.3a1 1 0 01-1.42 1.4L12 13.42l-6.3 6.3a1 1 0 01-1.4-1.42L10.58 12l-6.3-6.3a1 1 0 010-1.4z"}))},Tr=["unreadCount"],Ir=Object(c.forwardRef)((function(e,t){var n=e.unreadCount,r=void 0===n?0:n,i=ke()(e,Tr),o=Object(c.useContext)(He).withAnimation,u="",l="";switch(!0){case!r:u="none";break;case r<=9:u="single",l=r.toString();break;case r<=99:u="double",l=r.toString();break;case r>99:u="max",l="99+"}var f=Object(d.c)("ChatIconButton","ChatIconButton--".concat(u),{"ChatIconButton--withAnimation":o});return s.a.createElement("button",a()({className:palettePrefix(f)},i,{ref:t}),l&&s.a.createElement("div",{className:palettePrefix("ChatIconButton__count ")},l))})),Pr=function(e){var t=a()({},e);return s.a.createElement("svg",a()({height:"20",width:"16",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},t),s.a.createElement("path",{d:"M1.721 2.307L4 4.586v-.002l7.029 7.029 4.693 4.695a1 1 0 01-1.414 1.414l-1.938-1.937A8.482 8.482 0 019 16.941V19a1 1 0 01-1.993.117L7.001 19v-2.06c-3.234-.384-5.995-2.611-6.955-5.646a.995.995 0 01.681-1.25 1.035 1.035 0 011.287.662C2.808 13.216 5.257 15 7.999 15c1.03 0 2.016-.25 2.89-.695l-1.538-1.539A4 4 0 014 9V7.414L.307 3.721a1 1 0 011.414-1.414zm13.55 7.737c.544.162.85.72.684 1.249a7.825 7.825 0 01-.75 1.666l-1.51-1.51c.113-.239.21-.487.29-.742a1.035 1.035 0 011.287-.663zM8 0a4 4 0 014 4v5c0 .237-.02.468-.06.694L4.433 2.188A4 4 0 018 0z"}))},Dr=function(e){var t=a()({},e);return s.a.createElement("svg",a()({height:"20",width:"16",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},t),s.a.createElement("path",{d:"M8 0a4 4 0 00-4 4v5a4 4 0 008 0V4a4 4 0 00-4-4z"}),s.a.createElement("path",{d:"M1.1 10c-.551 0-.982.486-.843 1.02A8.007 8.007 0 007.1 16.95v2.15a.9.9 0 101.8 0v-2.15a8.007 8.007 0 006.843-5.93c.139-.534-.292-1.02-.843-1.02-.45 0-.826.329-.953.76a6.203 6.203 0 01-11.894 0C1.926 10.33 1.55 10 1.1 10z"}))},Nr=function(e){var t=a()({},e);return s.a.createElement("svg",a()({width:"24",height:"24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),s.a.createElement("path",{d:"M20.465 4.4c-.489-.26-.974-.4-2.31-.4H5.844c-1.336 0-1.821.14-2.31.4A2.726 2.726 0 002.4 5.536C2.139 6.024 2 6.509 2 7.845v8.31c0 1.336.14 1.821.4 2.31.262.49.646.873 1.135 1.134.489.262.974.401 2.31.401h12.31c1.336 0 1.821-.14 2.31-.4a2.726 2.726 0 001.134-1.135c.262-.489.401-.974.401-2.31v-8.31c0-1.336-.14-1.821-.4-2.31A2.726 2.726 0 0020.464 4.4zm-11.81 5.728l2.97-2.978c.207-.2.543-.2.75 0l2.97 2.978c.33.318.077.872-.376.872H13v4.979c0 .564-.442 1.021-1 1.021s-1-.457-1-1.021V11H9.031c-.44 0-.715-.545-.375-.872z"}))},xr=function(e){var t=a()({},e);return s.a.createElement("svg",a()({width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},t),s.a.createElement("path",{d:"M6 5.18c.65 0 1 .54 1 1.2v5.48c0 .22.26.4.47.4.23 0 .52-.18.52-.4V4c0-.66.33-1.2.99-1.2.65 0 1.02.54 1.02 1.2v7.08c0 .22.29.4.5.4.22 0 .5-.18.5-.4V3.19c0-.66.31-1.2.97-1.2.66 0 1.04.54 1.04 1.2v7.88c0 .22.24.4.46.4.22 0 .52-.18.52-.4V4.79c0-.67.32-1.18.98-1.18.66 0 1.02.51 1.02 1.17v10.73l2.29-2.67c.33-.45 1-.68 1.65-.26.34.2.86.81.2 1.68 0 0-2.45 3.09-3.81 4.74-1.3 1.65-3.81 2.5-5.51 2.5C5.25 21.5 5 17.71 5 16.43V6.37c0-.65.33-1.19 1-1.19z"}))},Rr=function(e){var t=a()({},e);return s.a.createElement("svg",a()({height:"16",width:"16",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},t),s.a.createElement("path",{d:"M6.1 9a.9.9 0 01.9.9v4.2a.9.9 0 11-1.8 0v-2.027l-3.664 3.663a.9.9 0 11-1.272-1.272L3.927 10.8H1.9a.9.9 0 110-1.8zM15.736.264a.9.9 0 010 1.272L12.073 5.2h2.025a.9.9 0 010 1.8H9.9a.9.9 0 01-.9-.9V1.9a.9.9 0 111.8 0v2.027L14.464.264a.9.9 0 011.272 0z"}))},Mr=function(e){var t=a()({},e);return s.a.createElement("svg",a()({height:"16",width:"16",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},t),s.a.createElement("path",{d:"M6.5 15a1 1 0 01-1 1H1a1 1 0 01-1-1v-4.5a1 1 0 012 0v2.071l3.363-3.364a1 1 0 011.414 0l.016.016a1 1 0 010 1.414L3.428 14H5.5a1 1 0 011 1zM14 3.428l-3.363 3.365a1 1 0 01-1.414 0l-.016-.016a1 1 0 010-1.414L12.571 2H10.5a1 1 0 010-2H15a1 1 0 011 1v4.5a1 1 0 01-2 0z"}))},Lr=function(e){var t=a()({},e);return s.a.createElement("svg",a()({height:"16",width:"22",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},t),s.a.createElement("path",{d:"M1.514.242A.9.9 0 00.286 1.558l1.092 1.02C1.13 3.053 1 3.548 1 4.846v6.308c0 1.338.14 1.822.4 2.311.262.49.646.873 1.135 1.134.489.262.974.401 2.31.401h7.31c1.207 0 1.72-.114 2.168-.328l1.163 1.086a.9.9 0 001.228-1.316L1.514.242zM15.999 11.346L4.924 1h7.23c1.338 0 1.822.14 2.311.4.49.262.873.646 1.134 1.135.262.489.401.974.401 2.31 0 2.167.023 4.335-.001 6.501zM22 4.497v7.006c0 .815-.964 1.277-1.6.8l-2.2-1.653a.5.5 0 01-.2-.4v-4.5a.5.5 0 01.2-.4l2.2-1.652c.651-.49 1.6.003 1.6.8z"}))},Br=["children","content","position","align","appearance","open","onOpen","onClose","delay"];function Fr(e){var t=e.children,n=e.content,r=e.position,i=void 0===r?"auto":r,o=e.align,u=void 0===o?"auto":o,l=e.appearance,f=void 0===l?"dark":l,h=e.open,m=void 0!==h&&h,v=e.onOpen,g=e.onClose,b=e.delay,_=void 0===b?50:b,y=ke()(e,Br),E=Object(c.useState)(m?Or.OPENED:Or.CLOSED),O=p()(E,2),w=O[0],C=O[1],S=Object(c.useRef)(null);Object(c.useEffect)((function(){var e=null,t=null,n=function(){e&&(clearTimeout(e),e=null)},r=function(){n(),e=window.setTimeout((function(){C(Or.OPENED),v&&v()}),_)},a=function(){n(),t=window.setTimeout((function(){w===Or.OPENED?C(Or.IS_CLOSING):(C(Or.CLOSED),g&&g())}),0)};return S&&S.current&&(S.current.addEventListener("mouseenter",r),S.current.addEventListener("mouseleave",a)),function(){S&&S.current&&(S.current.removeEventListener("mouseenter",r),S.current.removeEventListener("mouseleave",a)),n(),t&&(window.clearTimeout(t),t=null)}}),[S,w]),Object(c.useEffect)((function(){var e=m?Or.OPENED:Or.CLOSED;w!==e&&C(e)}),[m]);var A=Object(c.useCallback)((function(){w===Or.IS_CLOSING&&(C(Or.CLOSED),g&&g())}),[w]),k=Object(d.c)("TooltipNew",{"TooltipNew--removed":"isClosing"===w,"TooltipNew--dark":"dark"===f,"TooltipNew--light":"light"===f}),j=s.a.createElement("div",{className:palettePrefix(k),onTransitionEnd:A},n);return s.a.createElement(tr,a()({open:w!==Or.CLOSED,position:i,align:u,content:j,ref:S},y),t)}!function(e){e.OPENED="opened",e.IS_CLOSING="isClosing",e.CLOSED="closed"}(Or||(Or={}));var Hr=n(184),Vr=function(){var e=Object(Hr.classNames)({MicIconWithSpeakingIndicator__scale:!0});return s.a.createElement("svg",{height:"20",width:"16",xmlns:"http://www.w3.org/2000/svg",className:palettePrefix("MicIconWithSpeakingIndicator")},s.a.createElement("mask",{id:"MicIconWithSpeakingIndicatorMask"},s.a.createElement("path",{d:"M8 0a4 4 0 00-4 4v5a4 4 0 008 0V4a4 4 0 00-4-4z"})),s.a.createElement("path",{d:"M1.1 10c-.55 0-.98.49-.84 1.02a8 8 0 006.84 5.93v2.15a.9.9 0 101.8 0v-2.15a8 8 0 006.84-5.93c.14-.53-.29-1.02-.84-1.02-.45 0-.83.33-.95.76a6.2 6.2 0 01-11.9 0c-.12-.43-.5-.76-.95-.76z"}),s.a.createElement("g",{mask:"url(#MicIconWithSpeakingIndicatorMask)"},s.a.createElement("g",{className:palettePrefix(e)},s.a.createElement("path",{d:"M8 0a4 4 0 00-4 4v7h8V4a4 4 0 00-4-4z"}),s.a.createElement("path",{d:"M8 7a4 4 0 00-4 4v5a4 4 0 008 0v-5a4 4 0 00-4-4z",className:palettePrefix("MicIconWithSpeakingIndicator__filled")}))))},Ur=function(e){var t=a()({},e);return s.a.createElement("svg",a()({width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},t),s.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.49 4.293a4.402 4.402 0 116.225 6.225l-1.072 1.072a.9.9 0 01-1.273-1.273l1.071-1.072a2.601 2.601 0 10-3.678-3.678l-3.537 3.537a2.601 2.601 0 000 3.678.9.9 0 01-1.274 1.273 4.402 4.402 0 010-6.225l3.537-3.537zm-.708 5.66a.9.9 0 011.273 0 4.402 4.402 0 010 6.225l-3.537 3.537a4.402 4.402 0 11-6.225-6.226l1.122-1.121a.9.9 0 111.273 1.273l-1.121 1.122a2.601 2.601 0 103.678 3.678l3.537-3.537a2.601 2.601 0 000-3.678.9.9 0 010-1.274z",fill:"#fff"}))},zr=!1;function Gr(){zr||(Object(dr.a)(new ur.a({id:"live_24",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="live_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path d="M12 22.5C6.201 22.5 1.5 17.799 1.5 12S6.201 1.5 12 1.5 22.5 6.201 22.5 12 17.799 22.5 12 22.5zm0-2a8.5 8.5 0 100-17 8.5 8.5 0 000 17zm0-2a6.5 6.5 0 110-13 6.5 6.5 0 010 13zm0-2a4.5 4.5 0 100-9 4.5 4.5 0 000 9zm0-2a2.5 2.5 0 110-5 2.5 2.5 0 010 5z" fill="currentColor" /></g></symbol>'})),zr=!0)}var Wr=function(e){return Object(dr.b)((function(){Gr()}),[]),s.a.createElement(fr.a,Object(lr.assign)({},e,{viewBox:"0 0 24 24",id:"live_24",width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};Wr.mountIcon=Gr;var qr=Wr,Kr=function(e){var t=a()({},e);return s.a.createElement("svg",a()({width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},t),s.a.createElement("path",{d:"M17 12.5c2.294 0 6.5.857 6.5 4.286 0 1.5-.382 1.714-1.147 1.714h-6.09c.158-.488.237-1.062.237-1.714 0-1.723-.631-3.067-1.672-4.062.783-.16 1.548-.224 2.172-.224zm-9 0c2.294 0 6.5.857 6.5 4.286 0 1.5-.382 1.714-1.147 1.714H2.647c-.765 0-1.147-.214-1.147-1.714C1.5 13.357 5.706 12.5 8 12.5zM8 5a3 3 0 110 6 3 3 0 110-6zm9 0a3 3 0 110 6 3 3 0 110-6z"}))},Yr=function(e){var t=e.participantCount,n=e.onClick,r=e.isParticipantControlActive,a=s.a.createElement(Kr,null);if(t&&t>0){var i="";(i=t>99?"99+":null==t?void 0:t.toString())&&(a=s.a.createElement("div",null,s.a.createElement("div",{className:palettePrefix("ParticipantIconButton__count")},i),a))}return s.a.createElement(Pe,{type:r?Ce.OFF:Ce.ON,icon:a,onClick:n,className:palettePrefix("Call__footerButton")})};function Zr(e){var t,n,r=e.info,a=e.chatUnreadCount,i=void 0===a?0:a,o=e.callMenuActions,c=e.isAudioAllowed,u=void 0!==c&&c,l=e.isVideoAllowed,f=void 0!==l&&l,h=e.isVideoEnabled,m=void 0!==h&&h,v=e.isAudioEnabled,g=void 0!==v&&v,b=e.isScreenSharingEnabled,_=void 0!==b&&b,y=e.isOratorMode,E=void 0===y||y,O=e.isFullScreen,w=void 0!==O&&O,C=e.onToggleVideo,S=e.onToggleAudio,A=e.onLeaveCall,k=e.onCollapseCall,j=e.onToggleOratorMode,T=e.onChat,I=e.onHandClick,P=e.onToggleScreenShare,D=e.onFullScreenToggle,N=e.onDeferredStreamStart,x=e.isParticipantControlActive,R=void 0!==x&&x,M=e.isLayoutSwitchShown,L=void 0!==M&&M,B=e.isScreenShareControlShown,F=void 0!==B&&B,H=e.isHandRaised,V=void 0!==H&&H,U=e.isHandControlShown,z=void 0!==U&&U,G=e.isChatControlShown,W=void 0!==G&&G,q=e.isStreamingControlShown,K=void 0!==q&&q,Y=e.isChainControlShown,Z=void 0===Y||Y,Q=e.onParticipantsClick,J=e.onTooltipChange,X=e.onHidePanel,$=e.notification,ee=e.tooltips,te=e.amISpeaking,ne=void 0!==te&&te,re=e.onChainClick,ae=e.notificationWithButton,ie=e.withoutPadding,oe=void 0!==ie&&ie,ce=e.participantCount,se=void 0===ce?0:ce,ue=e.children,le=e.isPopupOrModalOpen,de=s.a.useContext(He),fe=de.withAnimation,pe=de.isModalView,he=s.a.useContext(Pn).getLang,me=Object(d.c)("Call",{"Call--fullscreen":w||!pe}),ve=Object(d.c)("Call__content",{"Call__content--withoutPadding":oe}),ge=null===(t=window.location)||void 0===t||null===(n=t.host)||void 0===n?void 0:n.includes("vk.com"),be=s.a.useRef(null),_e=s.a.useRef(null),ye=s.a.useRef(null),Ee=s.a.useRef(null),Oe=s.a.useState(!1),we=p()(Oe,2),Se=we[0],Ae=we[1],ke=function(e,t,n,r,a,i){var o=s.a.useState(!0),c=p()(o,2),u=c[0],l=c[1],f=s.a.useRef(null),h=s.a.useRef(!1),m=s.a.useRef(!1),v=s.a.useRef(!1);v.current!==i&&(v.current=i);var g=s.a.useRef(!1),b=function(){h.current||g.current?g.current=!1:(f.current&&window.clearTimeout(f.current),l(!0),m.current||v.current||(f.current=window.setTimeout((function(){l(!1),f.current=null,a&&a()}),5e3)))};return s.a.useEffect((function(){b();var a=Object(d.D)((function(){b()}),1e3),i=function(){m.current=!0},o=function(){m.current=!1};return t.current.addEventListener("mouseenter",i),t.current.addEventListener("mouseleave",o),n.current.addEventListener("mouseenter",i),n.current.addEventListener("mouseleave",o),r.current.addEventListener("mouseenter",i),r.current.addEventListener("mouseleave",o),e.current.addEventListener("mousemove",a),function(){h.current=!0,f.current&&window.clearTimeout(f.current),t.current&&(t.current.removeEventListener("mouseenter",i),t.current.removeEventListener("mouseleave",o)),n.current&&(n.current.removeEventListener("mouseenter",i),n.current.removeEventListener("mouseleave",o)),r.current&&(r.current.removeEventListener("mouseenter",i),r.current.removeEventListener("mouseleave",o)),e.current&&e.current.removeEventListener("mousemove",a)}}),[m,v.current]),[u,function(e){e?l(!0):(l(!1),g.current=!0)}]}(be,_e,ye,Ee,X,Se),je=p()(ke,2),Te=je[0],Ie=je[1],Ne=Object(d.c)({"Call__controlPanel--withAnimation":fe,"Call__controlPanel--hideBottomWithAnimation":fe,"Call__controlPanel--hideBottom":!Te}),xe=Object(d.c)({"Call__controlPanel--withAnimation":fe,"Call__controlPanel--hideBottomWithAnimation":fe,"Call__controlPanel--hideBottom":!Te},"Call__curtain"),Re=Object(d.c)("Call__buttons",{"Call__controlPanel--withAnimation":fe,"Call__controlPanel--hideBottomWithAnimation":fe,"Call__controlPanel--hideBottom":!Te}),Me=s.a.useCallback((function(){return Ie(!0)}),[]),Le=s.a.useCallback((function(){le||(Ie(!1),ee.streaming&&J("streaming",!1))}),[le,ee.streaming]);return s.a.createElement("section",{className:palettePrefix(me),onMouseEnter:Me,onMouseLeave:Le,ref:be},r,$,s.a.createElement("div",{className:palettePrefix(ve),"data-calls-id":"content"},ue),s.a.createElement("div",{className:palettePrefix(xe)}),s.a.createElement(kr,{alignX:"l",alignY:"b",className:palettePrefix(Ne),ref:ye},s.a.createElement(s.a.Fragment,null,W&&s.a.createElement(Fr,{content:he("calls_chat"),open:ee.chat,delay:300,onOpen:function(){return J("chat",!0)},onClose:function(){return J("chat",!1)}},s.a.createElement(Ir,{unreadCount:i,onClick:T})),z&&s.a.createElement(Fr,{content:he(V?"calls_tooltip_lower_hand":"calls_tooltip_raise_hand"),open:ee.hand,delay:300,onOpen:function(){return J("hand",!0)},onClose:function(){return J("hand",!1)}},s.a.createElement(mn,{icon:s.a.createElement(xr,null),type:"hand",isActive:V,onClick:I})),F&&s.a.createElement(Fr,{content:he(_?"calls_stop_screen_share":"calls_start_screen_share"),open:ee.screenShare,delay:300,onOpen:function(){return J("screenShare",!0)},onClose:function(){return J("screenShare",!1)}},s.a.createElement(mn,{icon:s.a.createElement(Nr,null),isActive:_,onClick:P})),K&&s.a.createElement(Fr,{content:he("calls_call_menu_translation"),open:ee.streaming,delay:300,onOpen:function(){return J("streaming",!0)},onClose:function(){return J("streaming",!1)}},s.a.createElement(mn,{icon:s.a.createElement(qr,null),isActive:K,onClick:N})))),s.a.createElement(kr,{alignX:"r",alignY:"b",style:w&&ge?{right:"78px"}:void 0,className:palettePrefix(Ne),ref:Ee},s.a.createElement(s.a.Fragment,null,L&&s.a.createElement(Fr,{content:he(E?"calls_show_grid":"calls_show_orator"),open:ee.layout,delay:300,onOpen:function(){return J("layout",!0)},onClose:function(){return J("layout",!1)}},s.a.createElement(mn,{type:E?"changeToGrid":"changeToOrator",onClick:j})),o&&s.a.createElement(ar,{items:o,open:Se,setOpen:Ae},s.a.createElement(mn,{type:"settings"})),k&&s.a.createElement(Fr,{content:he("calls_collapse"),open:ee.collapse,delay:300,onOpen:function(){return J("collapse",!0)},onClose:function(){return J("collapse",!1)}},s.a.createElement(mn,{type:"collapse",onClick:k})),D&&s.a.createElement(Fr,{content:he(w?"calls_tooltip_fullscreen_off":"calls_tooltip_fullscreen_on"),open:ee.fullscreen,delay:300,onOpen:function(){return J("fullscreen",!0)},onClose:function(){return J("fullscreen",!1)}},s.a.createElement(mn,{onClick:D,icon:w?s.a.createElement(Rr,null):s.a.createElement(Mr,null)})))),s.a.createElement("footer",{className:palettePrefix("Call__footer"),ref:_e},s.a.createElement("div",{className:palettePrefix(Re)},Z&&re&&s.a.createElement(Pe,{type:Ce.ON,icon:s.a.createElement(Ur,null),onClick:re,className:palettePrefix("Call__footerButton")}),Q&&s.a.createElement(Yr,{isParticipantControlActive:R,onClick:Q,participantCount:se}),s.a.createElement(Pe,{type:f?m?Ce.ON:Ce.OFF:Ce.DISABLED,icon:m?s.a.createElement(De,null):s.a.createElement(Lr,null),onClick:C,className:palettePrefix("Call__footerButton")}),S&&s.a.createElement(Pe,{type:u?g?Ce.ON:Ce.OFF:Ce.DISABLED,icon:g?ne?s.a.createElement(Vr,null):s.a.createElement(Dr,null):s.a.createElement(Pr,null),onClick:S,className:palettePrefix("Call__footerButton")}),s.a.createElement(Pe,{type:Ce.NEGATIVE,icon:s.a.createElement(jr,null),onClick:A,className:palettePrefix("Call__footerButton")}))),ae&&ae)}function Qr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wn()(e);if(t){var a=wn()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return En()(this,n)}}var Jr=function(e){_n()(n,e);var t=Qr(n);function n(e){var r;return tt()(this,n),(r=t.call(this,e)).id=Math.round(1e6*Math.random()).toString(16),r.setSpinnerParams(e),r}return rt()(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setSpinnerParams(e)}},{key:"setSpinnerParams",value:function(e){this.offset=Math.round(Math.PI*e.size),this.c=.5*e.size,this.animation=function(e,t){if(!e||!t)return"";var n=Object.keys(t).map((function(e){return e+" {"+Object.keys(t[e]).map((function(n){return n+":"+t[e][n]})).join(";")+"}"})).join("");return"@-webkit-keyframes ".concat(e," {").concat(n,"} @keyframes ").concat(e," {").concat(n,"}")}("dash"+this.id,{"0%":{"stroke-dashoffset":this.offset},"50%":{"stroke-dashoffset":Math.round(.25*this.offset),transform:"rotate(135deg)"},"100%":{"stroke-dashoffset":this.offset,transform:"rotate(360deg)"}})}},{key:"render",value:function(){var e=this.props,t=e.style,n=e.color,r=void 0===n?"var(--icon_secondary)":n,a=e.size,i=e.duration,o=e.strokeWidth,c=e.className,u=this.id,l=this.offset,f=this.animation,p=Object(d.c)("Spinner",c);return s.a.createElement("div",{className:palettePrefix(p),style:t},s.a.createElement("svg",{className:palettePrefix("Spinner__svg"),width:a,height:a,viewBox:"0 0 ".concat(a," ").concat(a),xmlns:"http://www.w3.org/2000/svg"},s.a.createElement("g",{style:{width:a,height:a,transformOrigin:.5*a+"px "+.5*a+"px"}},s.a.createElement("style",{dangerouslySetInnerHTML:{__html:f}}),s.a.createElement("circle",{className:palettePrefix("Spinner__path"),fill:"none",stroke:r,strokeDasharray:l,strokeDashoffset:l,strokeWidth:o,style:{animationName:"dash"+u,animationTimingFunction:"ease-in-out",animationDuration:i+"s",animationIterationCount:"infinite"},cx:.5*a,cy:.5*a,r:.5*a-.5*o}))))}}]),n}(s.a.Component);Jr.propTypes={color:g.a.string,size:g.a.number,strokeWidth:g.a.number,duration:g.a.number,className:g.a.string,style:g.a.object},Jr.defaultProps={color:"#5181b8",size:19,strokeWidth:2,duration:1.4,className:""};var Xr=function(e){var t=e.onScroll,n=e.scrollPosition,r=e.participantsCount,a=e.participantsShiftCount,i=e.children,o=c.Children.toArray(i),u=Object(d.c)("CallGridNew","CallGridNew--c".concat(r)),l=Object(c.useRef)(null);Object(c.useEffect)((function(){var e=function(){null!==l.current&&t(l.current.scrollTop)};return null!==l.current&&l.current.addEventListener("scroll",e),function(){l.current&&l.current.removeEventListener("scroll",e)}}),[]),Object(c.useEffect)((function(){var e;null===(e=l.current)||void 0===e||e.scrollTo(0,n)}),[l.current]);var f=Object(c.useMemo)((function(){return new Array(a).fill(0).map((function(e,t){return s.a.createElement("article",{className:palettePrefix("CallGridNew__item CallGridNew__item--empty"),key:-t})}))}),[a]),p=r-a-o.length>0;return s.a.createElement("section",{className:palettePrefix(u),ref:l},s.a.createElement("div",{className:palettePrefix("CallGridNew__in")},f,o.map((function(e,t){return s.a.createElement("article",{className:palettePrefix("CallGridNew__item"),key:e.key||t,"data-calls-id":"grid-item"},e)}))),p&&s.a.createElement(Jr,{color:"white",size:64,duration:1,className:palettePrefix("CallGridNew__spinner")}))},$r=function(e){var t=e.children,n=e.orator,r=e.oratorTitle,a=e.onToggleParticipantsAside,i=e.isShownParticipantsAside,o=e.onScroll,u=e.scrollPosition,l=e.participantsAsideCount,f=e.participantsAsideShift,p=s.a.Children.toArray(t),h=Object(d.c)({CallOrator__toggleIcon:!0,"CallOrator__toggleIcon--withAnimation":!0}),m=Object(d.c)({CallOrator:!0,"CallOrator--withoutOthers":!i}),v=Object(d.c)({CallOrator__others:!0,"CallOrator__others--hide":!i}),g=Object(d.c)({CallOrator__toggleArrow:!0,"CallOrator__toggleArrow--toLeft":i,"CallOrator__toggleArrow--toRight":!i}),b=Object(c.useRef)(null);return Object(c.useEffect)((function(){var e=function(){null!==b.current&&o(b.current.scrollTop)};return null!==b.current&&b.current.addEventListener("scroll",e),function(){b.current&&b.current.removeEventListener("scroll",e)}}),[]),Object(c.useEffect)((function(){var e;null===(e=b.current)||void 0===e||e.scrollTo(0,u)}),[b.current]),s.a.createElement("article",{className:palettePrefix(m),ref:b},s.a.createElement("main",{className:palettePrefix("CallOrator__orator")},n),s.a.createElement("button",{className:palettePrefix("CallOrator__toggleOthers"),onClick:a},s.a.createElement("div",{className:palettePrefix(h)},s.a.createElement("div",{className:palettePrefix(g)}))),s.a.createElement("aside",{className:palettePrefix(v)},s.a.createElement("ul",{className:palettePrefix("CallOrator__list"),style:{height:"".concat(148*l-8,"px")}},f>0&&s.a.createElement("li",{className:palettePrefix("CallOrator__participant"),key:-1,"data-calls-id":"participant",style:{height:"".concat(f,"px")}}),p.map((function(e){return s.a.createElement("li",{className:palettePrefix("CallOrator__participant"),key:"key"in e?e.key:void 0,"data-calls-id":"participant"},e)})))),r)},ea=["children","className"],ta=function(e){var t=e.children,n=e.className,r=ke()(e,ea);return s.a.createElement("div",a()({},r,{className:palettePrefix(Object(d.c)("Stub",n))}),t||"No results.")};function na(e,t){var n=e.browser.hasMicrophonePermission(),r=e.browser.hasCameraPermission(),a=t.includes(We.MediaOption.AUDIO)&&!n,i=t.includes(We.MediaOption.VIDEO)&&!r;return(a||i)&&function(e,t,n){e.browser.getUserMedia(t,n).then((function(e){e.getTracks().forEach((function(e){return e.stop()}))}))}(e,i,a),Promise.resolve()}var ra=function(e){var t=a()({},e);return s.a.createElement("svg",a()({width:"14",height:"12",fill:"currentColor"},t,{xmlns:"http://www.w3.org/2000/svg"}),s.a.createElement("path",{d:"M9.574 11.13a.751.751 0 001.061-1.06L1.48.92A.75.75 0 10.42 1.98l.82.82c-.153.282-.24.606-.24.95v4.5a2 2 0 002 2h5a2 2 0 00.601-.092l.973.972zM13.897 3.664A.454.454 0 0114 3.95v4.075c0 .415-.392.602-.825.382-.475-.24-1.572-.789-1.572-.789a.233.233 0 01-.103-.19v-2.88c0-.075.038-.146.103-.19 0 0 1.378-.694 1.572-.79.193-.094.55-.115.722.096zM10 7.425V3.75a2 2 0 00-2-2H4.32L10 7.425z"}))},aa=function(e){var t=e.children,n=e.className,r=Object(d.c)("CallNotification",n);return s.a.createElement("div",{className:palettePrefix(r)},t)},ia=function(e){var t=e.duration;return s.a.createElement("div",{className:palettePrefix("CallTimer"),"aria-label":t,"data-duration":t})},oa=["children","className"],ca=function(e){var t=e.children,n=e.className,r=ke()(e,oa),i=Object(d.c)("ActivityIndicator",n);return s.a.createElement("span",a()({},r,{className:palettePrefix(i)}),t)};ca.propTypes={className:g.a.string,children:g.a.node};var sa=ca,ua=function(e){var t=e.status,n=s.a.useContext(Pn).getLang;switch(t){case We.ParticipantStatus.WAITING:return s.a.createElement(sa,null,n("calls_status_waiting"));case We.ParticipantStatus.CONNECTING:case We.ParticipantStatus.RECONNECT:return s.a.createElement(sa,null,n("calls_status_connecting"));case We.ParticipantStatus.ERROR:return n("calls_error");case We.ParticipantStatus.HANGUP:return s.a.createElement(sa,null,n("calls_status_hangup"));case We.ParticipantStatus.PERMISSIONS:return n("calls_status_no_permissions");case We.ParticipantStatus.CONNECTED:default:return null}};function la(e){return e?s.a.createElement(ia,{duration:(t=e,n=Date.now(),r=Math.max(0,Math.floor((n-t)/1e3)),0===r?"00:00":r<=599?"0"+Object(d.h)(r):Object(d.h)(r))}):null;var t,n,r}function da(e,t){if(e.hangupType)switch(e.hangupType){case Se.R:return t("calls_busy");case Se.S:return t("calls_callee_is_offline");case Se.bb:return t("calls_rejected_status");case Se.U:case Se.Y:case Se.X:case Se.cb:return null;case Se.T:case Se.V:case Se.W:case Se.Z:case Se.ab:case Se.db:case Se.eb:case Se.fb:return t("calls_error")}return null}var fa=function(e,t){return e?da(e,t)||function(e,t){var n,r=e.participants[t];return r&&r.status===We.ParticipantStatus.CONNECTED||r&&r.status===We.ParticipantStatus.WAITING_HALL||Kt(e)<2?null:s.a.createElement(ua,{status:null!==(n=null==r?void 0:r.status)&&void 0!==n?n:We.ParticipantStatus.WAITING})}(e,qe(e.peer)?e.me:e.peer)||function(e,t){return void 0===(qe(e.peer)?e.callData.ts:e.callData.localTimeStamp)?s.a.createElement(sa,null,t("calls_status_waiting")):null}(e,t):""},pa=function(e){var t=e.dispatch,n=e.notification,r=e.participant,a=s.a.useContext(Pn),i=a.getLang,o=a.langSex,u=we((function(e){return e})),l=Object(c.useMemo)((function(){return function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{name:"",sex:"0",shortName:""};if(!e)return null;switch(e.type){case Se.wb.SPEAKING_ON_MUTE:return t("calls_notification_mic_is_mute");case Se.wb.SCREEN_SHARING_STARTED:if(!r||!r.name)return s.a.createElement("span",null,t("calls_notification_screen_sharing_started"));var a=n(r.sex,"calls_notification_user_started_screen_sharing",t("calls_notification_user_started_screen_sharing",!0));return s.a.createElement("span",null,a.replace("{user}",r.name));case Se.wb.RAISED_HAND:if(!r||!r.name)return null;var i=n(r.sex,"calls_notification_raised_hand",t("calls_notification_raised_hand",!0));return s.a.createElement("span",null,i.replace("{user}",r.name));case Se.wb.BAD_NETWORK_CONNECTION:return s.a.createElement("span",null,t("calls_notification_bad_network_connection"));case Se.wb.BAD_NETWORK_CONNECTION_DISABLE_CAMERA:return[s.a.createElement(ra,{key:"icon"}),s.a.createElement("span",{key:"text"},t("calls_notification_bad_network_connection_disable_camera"))];case Se.wb.ADMIN_MUTE:return s.a.createElement("span",{key:"text"},t("calls_notification_admin_mute"));case Se.wb.ADMIN_MUTE_PERMANENT:return s.a.createElement("span",{key:"text"},t("calls_notification_admin_permanent_mute"));case Se.wb.ADMIN_ROLE_GRANTED:return s.a.createElement("span",{key:"text"},t("calls_notification_admin_role_granted"));case Se.wb.USER_GRANTED_WITH_ADMIN_ROLE:var o=t("calls_notification_user_granted_with_admin_role").replace("{name}",r.shortName||r.name);return s.a.createElement("span",{key:"text"},o);case Se.wb.PINNED_BY_ADMIN:return s.a.createElement("span",{key:"text"},t("calls_notification_admin_pinned_self"));case Se.wb.USER_PINNED_BY_ADMIN:var c=t("calls_notification_admin_pinned_user").replace("{name}",r.shortName||r.name);return s.a.createElement("span",{key:"text"},c);case Se.wb.PUSH_TO_TALK:var u=t("calls_notification_push_to_talk_enabled"),l=e.data;return[l?s.a.createElement(Vr,{key:"icon"}):s.a.createElement(Dr,{key:"icon"}),s.a.createElement("div",{key:"text",className:palettePrefix("CallNotification__pushToTalkText")},u)];case Se.wb.LINK_COPIED_TO_CLIPBOARD:var d=t("calls_create_call_by_link_copied");return s.a.createElement("span",{key:"text"},d);default:return null}}(n,i,o,r)}),[n]),d=Object(c.useRef)(0);Object(c.useEffect)((function(){return d.current&&window.clearTimeout(d.current),n&&0!==n.timer&&(d.current=window.setTimeout((function(){t({type:Se.d,notification:null}),d.current=0}),n.timer||Se.Xc)),function(){d.current&&window.clearTimeout(d.current)}}),[n]);var f=Object(c.useMemo)((function(){return qt(u,!0)}),[u.participants,u.me,u.groupId,u.meGroup]),h=Object(c.useMemo)((function(){return qe(u.peer)}),[u.peer]),m=f.length>1,v=h||f.length>2,g=m||sn(u.participants[u.me]),b=v&&g&&u.isOratorMode,_=Object(Hr.classNames)("",{CallNotification__pushToTalk:(null==n?void 0:n.type)===Se.wb.PUSH_TO_TALK,CallNotification__orator:b&&u.isShownParticipantsAside}),y=u.peer,E=qe(y)?u.callData.conversation:u.participants[y],O=s.a.useState(),w=p()(O,2),C=w[0],S=w[1],A=s.a.useState(""),k=p()(A,2),j=k[0],T=k[1];return(null==E?void 0:E.status)!==C&&(T(fa(u,i)),S(null==E?void 0:E.status)),s.a.useEffect((function(){T(fa(u,i))}),[u]),n||j?s.a.createElement(aa,{className:palettePrefix(_)},j||l):null};var ha=function(e){var t=a()({},e);return s.a.createElement("svg",a()({width:"28px",height:"10px",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 28 10"},t),s.a.createElement("path",{fill:"#F2F3F5",fillRule:"evenodd",d:"M1 0a1 1 0 00-1 1v8a1 1 0 001 1h4a1 1 0 100-2H2V1a1 1 0 00-1-1zm7 1a1 1 0 112 0v8a1 1 0 11-2 0V1zm15-1a1 1 0 00-1 1v8a1 1 0 001 1h4a1 1 0 100-2h-3V6h3a1 1 0 100-2h-3V2h3a1 1 0 100-2h-4zm-8.325 9.31l-2.55-7.824a.993.993 0 01-.117-.363L12 1.1h.005A1 1 0 1113.995.9L14 .9l2 6.4 2-6.4h.005a1 1 0 011.99.2H20l-.008.023a.993.993 0 01-.118.363l-2.55 7.824a1 1 0 01-.95.69h-.748a1 1 0 01-.95-.69z",clipRule:"evenodd"}))},ma=function(e){var t=a()({},e);return s.a.createElement("svg",a()({width:"16",height:"10",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),s.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 0C4.546 0 1.596 2.073.4 5c1.196 2.927 4.146 5 7.6 5 3.455 0 6.405-2.073 7.6-5-1.195-2.927-4.145-5-7.6-5zm3.5 5a3.5 3.5 0 11-7 0 3.5 3.5 0 017 0zM8 7a2 2 0 100-4 2 2 0 000 4z",fill:"#F5F5F5"}))};function va(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wn()(e);if(t){var a=wn()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return En()(this,n)}}var ga=function(e){_n()(n,e);var t=va(n);function n(e){var r;return tt()(this,n),r=t.call(this,e),o()(gn()(r),"onClick",(function(){if(!r.state.dropdown||r.state.dropdown.removed){var e=r.props,t=e.text,n=e.position,a=e.align,i=e.marginTop,o=e.marginLeft,c=e.horizontalPosition,s=Object(d.j)(r.el);r.update({text:t,position:n,horizontalPosition:c,align:a,rect:s,marginTop:i,marginLeft:o})}else r.update()})),o()(gn()(r),"onMouseEnter",(function(){r.callerHovered=!0,r.timeouts.appear=setTimeout((function(){if(r.el&&r.callerHovered){var e=r.props,t=e.position,n=e.align,a=e.marginTop,i=e.marginLeft,o=e.horizontalPosition,c=Object(d.j)(r.el);r.update({position:t,align:n,horizontalPosition:o,rect:c,marginTop:a,marginLeft:i})}}),80)})),o()(gn()(r),"onMouseLeave",(function(){r.callerHovered=!1,r.timeouts.callerDisappear=setTimeout((function(){r.callerHovered||r.hovered||r.update()}),250)})),o()(gn()(r),"onDropdownMouseEnter",(function(){"hover"===r.props.trigger&&(r.hovered=!0)})),o()(gn()(r),"onDropdownMouseLeave",(function(){"hover"===r.props.trigger&&(r.hovered=!1,r.timeouts.disappear=setTimeout((function(){r.callerHovered||r.hovered||r.update()}),250))})),o()(gn()(r),"onDocumentClick",(function(e){!r.state.dropdown||r.state.dropdown.removed||r.el.contains(e.target)||r.update()})),o()(gn()(r),"onResize",(function(){if(r.state.dropdown&&!r.state.dropdown.removed){var e=r.props,t=e.text,n=e.position,a=e.align,i=e.marginTop,o=e.marginLeft,c=e.horizontalPosition,s=Object(d.j)(r.el);r.update({text:t,position:n,align:a,horizontalPosition:c,rect:s,marginTop:i,marginLeft:o})}})),o()(gn()(r),"onTransitionEnd",(function(e){"visibility"===e.propertyName&&r.state.dropdown&&r.state.dropdown.removed&&r.setState({dropdown:void 0})})),o()(gn()(r),"onItemClick",(function(e,t){t.separator||(r.update(),t.onClick&&t.onClick(e))})),r.state={},r.timeouts={},r}return rt()(n,[{key:"componentDidMount",value:function(){this.el=l.a.findDOMNode(this),"click"===this.props.trigger?(this.el.addEventListener("click",this.onClick),document.addEventListener("mousedown",this.onDocumentClick),window.addEventListener("resize",this.onResize)):(this.el.addEventListener("mouseenter",this.onMouseEnter),this.el.addEventListener("mouseleave",this.onMouseLeave))}},{key:"componentWillUnmount",value:function(){var e=this;Object.keys(this.timeouts).forEach((function(t){clearTimeout(e.timeouts[t])})),"click"===this.props.trigger?(this.el.removeEventListener("click",this.onClick),document.removeEventListener("mousedown",this.onDocumentClick),window.removeEventListener("resize",this.onResize)):(this.el.removeEventListener("mouseenter",this.onMouseEnter),this.el.removeEventListener("mouseleave",this.onMouseLeave)),this.defaultNode&&(this.defaultNode.parentNode.removeChild(this.defaultNode),delete this.defaultNode)}},{key:"update",value:function(e){if(!e)return this.setState({dropdown:Object.assign({},this.state.dropdown,{removed:!0})});var t=e.position,n=e.align,r=e.horizontalPosition,a=e.rect,i=e.marginTop,o=e.marginLeft,c=a.left,s=a.top;switch(t){case"t":"center"===r?c+=.5*a.width:"right"===r&&(c+=a.width);break;case"r":c+=a.width,s+=.5*a.height;break;case"b":s+=a.height,"center"===r?c+=.5*a.width:"right"===r&&(c+=a.width);break;case"l":s+=.5*a.height}c=Math.round(c+o),s=Math.round(s+i),this.setState({dropdown:{position:t,align:n,x:c,y:s}})}},{key:"renderDropdown",value:function(){var e=this;if(!this.state.dropdown)return null;var t=this.state.dropdown,n=t.x,r=t.y,a=t.position,i=t.align,c=t.removed,u=Object(d.c)("Dropdown","Dropdown--".concat(a),o()({"Dropdown--removed":!!c},"Dropdown--align-".concat(i),"t"===a||"b"===a),this.props.className);return s.a.createElement("div",{className:palettePrefix(u),style:{top:r,left:n},onTransitionEnd:function(t){return e.onTransitionEnd(t)},onMouseEnter:this.onDropdownMouseEnter,onMouseLeave:this.onDropdownMouseLeave},s.a.createElement("ul",{className:palettePrefix("Dropdown__in")},this.props.data.map((function(t,n){return s.a.createElement("li",{className:palettePrefix(Object(d.c)("Dropdown__item",{Dropdown__itemSeparator:t.separator},{Dropdown__itemNegative:t.negative},{Dropdown__itemNoHover:t.noHover})),onClick:function(n){return e.onItemClick(n,t)},key:void 0!==t.id?t.id:n},t.text)}))))}},{key:"render",value:function(){var e=this.renderDropdown();return e?(this.defaultNode||"undefined"==typeof window||(this.defaultNode=document.createElement("div"),document.body.appendChild(this.defaultNode)),s.a.createElement(s.a.Fragment,null,this.props.children,l.a.createPortal(e,this.defaultNode))):this.props.children}}]),n}(s.a.Component);ga.propTypes={data:g.a.arrayOf(g.a.shape({id:g.a.oneOfType([g.a.string,g.a.number]),text:g.a.oneOfType([g.a.string,g.a.element]),separator:g.a.bool,negative:g.a.bool,noHover:g.a.bool,onClick:g.a.func})).isRequired,position:g.a.oneOf(["t","r","b","l"]),horizontalPosition:g.a.oneOf(["left","center","right"]),align:g.a.oneOf(["left","center","right"]),marginTop:g.a.number,marginLeft:g.a.number,trigger:g.a.oneOf(["click","hover"]),className:g.a.oneOfType([g.a.string,g.a.object])},ga.defaultProps={position:"b",horizontalPosition:"center",align:"center",marginTop:0,marginLeft:0,trigger:"click",className:""};var ba=function(e){var t=a()({},e);return s.a.createElement("svg",a()({xmlns:"http://www.w3.org/2000/svg",width:"8",height:"4",viewBox:"0 0 10 5",fill:"currentColor","aria-hidden":"true"},t),s.a.createElement("path",{d:"M5 4.8c-.2 0-.3 0-.4-.1l-4.3-3.2c-.3-.3-.4-.8-.2-1.1.2-.3.7-.4 1-.2l3.9 2.9 3.8-2.9c.3-.3.8-.2 1 .1.3.3.2.8-.1 1.1l-4.2 3.2c-.2.1-.3.2-.5.2z"}))},_a=function(e){var t=e.translationTimer,n=e.viewersCount,r=void 0===n?0:n,a=e.isLiveIndicatorOff,i=void 0!==a&&a,o=e.actions,c=void 0===o?[]:o,u=e.tooltipText,l=void 0===u?"":u,f=Object(d.c)("TranslationStatus__translationIndicator",{"TranslationStatus__translationIndicator--disabled":i}),p=(null==c?void 0:c.length)>0,h=Object(d.c)("TranslationStatus__translationTimer",{"TranslationStatus__translationTimer--hasIndicator":!i}),m=s.a.createElement("div",{className:palettePrefix("TranslationStatus__translation"),key:"translation"},s.a.createElement(ha,{className:palettePrefix(f)}),s.a.createElement(s.a.Fragment,null,!!t&&s.a.createElement("div",{className:palettePrefix(h)},t),!i&&s.a.createElement("div",{className:palettePrefix("TranslationStatus__translationViewersCount")},s.a.createElement(ma,null),s.a.createElement("div",{className:palettePrefix("TranslationStatus__translationViewersCountNumber")},r)),p&&s.a.createElement("div",{className:palettePrefix("TranslationStatus__translationDropdown")},s.a.createElement(ba,null))));return p?m=s.a.createElement(ga,{position:"b",align:"center",horizontalPosition:"right",trigger:"hover",marginLeft:-10,data:c,className:palettePrefix("TranslationStatus_dropdown")},m):l&&(m=s.a.createElement(Fr,{content:s.a.createElement(s.a.Fragment,null,l)},m)),s.a.createElement("div",{className:palettePrefix("TranslationStatus")},m)},ya=function(e){var t=a()({},e);return s.a.createElement("svg",a()({width:"20",height:"20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),s.a.createElement("path",{d:"M9.978 3.423a1.792 1.792 0 00-1.645 1.785v1.765l-.1.021a8.254 8.254 0 00-6.44 8.917.75.75 0 001.343.379l.175-.22a7.577 7.577 0 015.022-2.721v2.08a1.792 1.792 0 002.897 1.41l6.52-5.11a1.792 1.792 0 000-2.82l-6.52-5.11a1.791 1.791 0 00-1.105-.382l-.147.006zm.147 1.494c.065 0 .129.021.18.062l6.52 5.11a.292.292 0 010 .459l-6.52 5.11a.292.292 0 01-.472-.23v-2.873a.75.75 0 00-.767-.75l-.215.005-.305.016a9.065 9.065 0 00-5.162 2.056l-.037.032.004-.027a6.752 6.752 0 015.823-5.533.75.75 0 00.659-.744V5.208c0-.16.13-.291.292-.291z",fill:"#99A2AD"}))},Ea=function(e){var t=a()({},e);return s.a.createElement("svg",a()({width:"20",height:"20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),s.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.72 4.72a.75.75 0 011.06 0L10 8.94l4.22-4.22a.75.75 0 111.06 1.06L11.06 10l4.22 4.22a.75.75 0 11-1.06 1.06L10 11.06l-4.22 4.22a.75.75 0 01-1.06-1.06L8.94 10 4.72 5.78a.75.75 0 010-1.06z",fill:"#99A2AD"}))};var Oa=null,wa=null,Ca=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e?Oa:wa};function Sa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Aa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sa(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ka=["photo_200","sex","screen_name","first_name_gen"].join(","),ja=["photo_200","sex","screen_name","first_name_gen"].join(","),Ta=["name","photo_100","photo_200","can_upload_video"].join(","),Ia=function(e){return Ca()()("messages.getConversationsById",{peer_ids:e,extended:1,fields:ja})},Pa=0,Da=[],Na=[],xa=St((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return Da.push(e),new Promise((function(e){Na.push(e),Pa||(Pa=window.setTimeout((function(){Ia(Da).then((function(e){Na.forEach((function(t){t(e)})),Na=[]})),Da=[],Pa=0}),t))}))})),Ra=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"request",method:"messages.getCallToken",data:{isDev:e,groupId:t}}),Ca()()("messages.getCallToken",{env:e?"development":"production",group_id:t},{version:"5.149"}).then((function(e){return Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"response",method:"messages.getCallToken",data:e}),e}))},Ma=(St(Ra),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r={call_id:e,invalidate:t?1:0,group_id:n};return Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"request",method:"messages.getCallToken",data:r}),Ca()()("messages.getJoinLink",r).then((function(e){return Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"response",method:"messages.getJoinLink",data:e}),e}))}),La=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"request",method:"messages.getCallPreview",data:{link:e,fields:ja,device_id:"anyId"}}),Ca(!t)()("messages.getCallPreview",{link:e,fields:ja,device_id:"anyId"}).then((function(e){return Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"response",method:"messages.getCallPreview",data:e}),e}))},Ba=function(e){return Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"request",method:"messages.forceCallFinish",data:{call_id:e}}),Ca()()("messages.forceCallFinish",{call_id:e}).then((function(e){return Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"response",method:"messages.forceCallFinish",data:e}),e}))},Fa=function(e){return Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"request",method:"messages.getConversationsByCall",data:{call_ids:e,fields:ja}}),Ca()()("messages.getConversationsByCall",{call_ids:e,fields:ja}).then((function(e){return Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"response",method:"messages.getConversationsByCall",data:e}),e}))},Ha=function(e){return Ca()()("groups.getById",{group_id:e,fields:Ta},{version:"5.149"})},Va=function(e){return Ca()()("users.get",e)},Ua=function(e){return Ca()()("messages.callReceived",{call_id:e})},za=function(){return Object(We.stopStream)()},Ga=function(){return Ca()()("messages.getGroupsForCall",{count:200})},Wa=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"request",method:"users.search",data:{groupId:e,q:t}}),Ca()()("users.search",{fields:ka.concat(",can_call_from_group"),group_id:e,q:t}).then((function(e){return Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"response",method:"users.search",data:e}),e}))};function qa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"all",a={count:e,start_from:t,fields:ka+",last_name_gen",filter:r,group_id:n};return Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"request",method:"messages.getCallHistory",data:a}),Ca()()("messages.getCallHistory",a).then((function(e){return Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"response",method:"messages.getCallHistory",response:e}),e}))}var Ka=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Ca(!0)();return Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"request",method:"photos.get",params:e}),t("photos.get",Aa({album_id:"-166"},e)).then((function(e){return Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"response",method:"photos.get",response:e}),e}))},Ya=function(e){return["error_msg","error_code"].some((function(t){return function(e,t){if(Object(d.w)(e)||Object(d.p)(e))for(var n=Object(d.p)(e)?e:e.split(".").filter(Boolean),r=n.length-1,a=t,i=0;i<n.length;i+=1){if(!Object(d.v)(a))return;var o=a[n[i]];if(!o)return;if(i===r)return o;a=o}}(t,e)}))?Promise.reject(e):Promise.resolve(e)},Za=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"hints",r={fields:ka.concat(",can_call,online_info"),count:e,offset:t,order:n};return Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"request",method:"friends.get",data:r}),Ca()()("friends.get",r).then((function(e){return Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"response",method:"friends.get",data:e}),e}))},Qa=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a={user_id:e,q:t,fields:ka.concat(",can_call,online_info"),count:n,offset:r};return Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"request",method:"friends.search",data:a}),Ca()()("friends.search",a).then((function(e){return Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"response",method:"friends.search",data:e}),e}))};function Ja(e){var t,n,r,a,i=xt(e);return!(!$t(i)&&!en(i))||!(null===(t=e.translation)||void 0===t||null===(n=t.host)||void 0===n||!n.id)&&+(null===(r=e.translation)||void 0===r||null===(a=r.host)||void 0===a?void 0:a.id)===function(e){return Qe(e)?e.groupId:e.me}(e)}function Xa(){var e=Object(c.useContext)(Pn),t=e.getLang,n=e.langNumeric,r=we((function(e){return e})),a=_e(),i=Object(c.useState)(null),o=p()(i,2),u=o[0],l=o[1],d=Object(c.useState)(!1),f=p()(d,2),h=f[0],m=f[1],v=Object(c.useState)(""),g=p()(v,2),b=g[0],_=g[1],y=Object(c.useState)(0),E=p()(y,2),O=E[0],w=E[1],C=Object(c.useState)([]),S=p()(C,2),A=S[0],k=S[1],j=Object(c.useState)(ri(r.translation.startTime)),T=p()(j,2),I=T[0],P=T[1],D=Object(c.useState)(ni(I)),N=p()(D,2),x=N[0],R=N[1],M=Object(c.useState)(""),L=p()(M,2),B=L[0],F=L[1],H=Object(c.useState)(!1),V=p()(H,2),U=V[0],z=V[1];return Object(c.useEffect)((function(){var e=Ja(r);m(e)}),[r.translation,r.participants[r.me]]),Object(c.useEffect)((function(){var e;if(null!==(e=r.translation.host)&&void 0!==e&&e.id){var t,n=r.participants[null===(t=r.translation.host)||void 0===t?void 0:t.id],a=(null==n?void 0:n.shortName)||(null==n?void 0:n.name);a!==u&&l(a)}else u&&l(null)}),[r.translation,r.participants]),Object(c.useEffect)((function(){var e=[];if(h){if(x){var n={text:s.a.createElement("div",{className:palettePrefix("TranslationStatus__dropdownItemWillStartSoon")},t("calls_info_translation_will_start_soon"))};e.push(n)}e.push($a(s.a.createElement(ya,null),t("calls_info_translation_share_menu_item"),(function(){return a({type:Se.Hc,data:Se.Cb})}))),e.push($a(s.a.createElement(Ea,null),t("calls_translation_stop_menu_item"),(function(){return a({type:Se.Hc,data:Se.Eb})})))}k(e)}),[h,x]),Object(c.useEffect)((function(){var e=ni(I);e&&I>-4&&h&&!U&&(z(!0),a({type:Se.Hc,data:Se.Db})),R(e)}),[I]),Object(c.useEffect)((function(){var e=ri(r.translation.startTime);P(e);var t=setInterval((function(){return P(ri(r.translation.startTime))}),1e3);return function(){return clearInterval(t)}}),[r.translation.startTime]),Object(c.useEffect)((function(){var e="";if(x){var r=Math.abs(I);if(r>86400){var a=Math.floor(r/86400);e=n(a,"calls_translation_upcoming_time_more_day_short",t("calls_translation_upcoming_time_more_day_short",a)).replace("%s",a)}else e=ei("-"+ti(r))}else e=ei(ti(I));_(e)}),[I,x]),Object(c.useEffect)((function(){var e,t=r.translation,n=t.ownerId,a=t.videoId;if(n&&a&&!x){var i=function(){(function(e){return Ca()()("video.liveGetSpectators",{owner_id:e.owner_id,video_id:e.video_id})})({owner_id:n,video_id:a}).then((function(e){var t;w(null===(t=e.spectators)||void 0===t?void 0:t.count)}))};i(),e=setInterval(i,15e3)}return function(){return clearInterval(e)}}),[x,r.translation.ownerId,r.translation.videoId]),Object(c.useEffect)((function(){if(!h){var e="";e=x?t("calls_info_translation_will_start_soon"):u?t("calls_translation_host_info").replace("{name}",u):t("calls_translation_host_info_unknown"),F(e)}}),[x,u,h]),s.a.createElement(_a,{translationTimer:b,viewersCount:O,isLiveIndicatorOff:x,actions:A,tooltipText:B})}function $a(e,t,n){return{text:s.a.createElement("div",{className:palettePrefix("TranslationStatus__dropdownItem")},e,s.a.createElement("div",{className:palettePrefix("TranslationStatus__dropdownItemText")},t)),onClick:n}}function ei(e){return s.a.createElement(ia,{duration:e})}function ti(e){return 0===e?"00:00":e<=599?"0"+Object(d.h)(e):Object(d.h)(e)}function ni(e){return e<0}function ri(e){var t=Date.now();return Math.floor((t-e)/1e3)}var ai=function(e){var t=a()({},e);return s.a.createElement("svg",a()({width:"10px",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 10 11"},t),s.a.createElement("path",{fill:"#F5F5F5",d:"M.5 2.5A.5.5 0 011 3v2.5a.5.5 0 001 0v-4a.5.5 0 011 0V5a.5.5 0 001 0V1a.5.5 0 011 0v4.063a.5.5 0 001 0V1.938a.5.5 0 011 0V7.5l-.28-.032L8.494 5.57a.67.67 0 01.995.9 232.32 232.32 0 00-2.615 3.029C5.935 10.624 4.56 11 3.526 11 .15 11 0 8.727 0 7.958V3a.5.5 0 01.5-.5z"}))},ii=Object(c.memo)((function(e){var t=e.translation,n=e.speakers,r=e.hands,a=e.time,i=e.network,o=e.networkTooltipText,c=Object(d.c)("CallHeader__hands",{"CallHeader__hands--visible":r>0});return s.a.createElement("div",{className:palettePrefix("CallHeader")},s.a.createElement("div",{className:palettePrefix("CallHeader__main")},s.a.createElement("div",{className:palettePrefix("CallHeader__timeAndNetwork")},i<.6&&s.a.createElement(In,{text:o,align:"left",className:palettePrefix("Call__oldTooltip")},s.a.createElement("div",{className:palettePrefix("CallHeader__network")},s.a.createElement(vr,{fill:i<=.3?"#ff5c5c":"#FECE00"}))),a),t&&s.a.createElement("div",{className:palettePrefix("CallHeader__translation")},t)),s.a.createElement("div",{className:palettePrefix("CallHeader__aside")},s.a.createElement("div",{className:palettePrefix("CallHeader__participants")},n),s.a.createElement("div",{className:palettePrefix(c)},s.a.createElement(ai,null)," ",r)))}));function oi(e){var t,n,r=e.onHandCountChanged,a=we((function(e){return e})),i=qe(a.peer),o=Object(c.useContext)(Pn),u=o.getLang,l=o.langNumeric,d=Object(c.useState)(null),f=p()(d,2),h=f[0],m=f[1],v=Object(c.useState)(0),g=p()(v,2),b=g[0],_=g[1],y=Object(c.useState)(null),E=p()(y,2),O=E[0],w=E[1],C=Object(c.useState)(""),S=p()(C,2),A=S[0],k=S[1];return s.a.useEffect((function(){var e=qe(a.peer)?a.callData.ts:a.callData.localTimeStamp;w(la(e));var t=setInterval((function(){return w(la(e))}),1e3);return function(){return clearInterval(t)}}),[a.peer,a.callData.localTimeStamp,a.callData.ts]),Object(c.useEffect)((function(){var e=function(e){var t=e.participants,n=0;for(var r in t){var a,i,o;t.hasOwnProperty(r)&&Zt(e,t[r])&&null!==(a=t[r])&&void 0!==a&&null!==(i=a.statusData)&&void 0!==i&&null!==(o=i.hand)&&void 0!==o&&o.state&&n++}return n}(a);e!==b&&(_(e),r&&r(e))}),[a.participants]),Object(c.useEffect)((function(){if(i){var e=a.speakersInHeader.reduce((function(e,t){return a.participants[t]&&(a.participants[t].shortName||a.participants[t].name)&&e.push(a.participants[t]),e}),[]);if(e.length>0){var t=u("calls_participants_speak",e.length).split(" ");m(s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:palettePrefix("CallHeader__speak")},t[0]," "),kt(e,e.slice(0,2),(function(e){return e.shortName||e.name}),u,l,0,2)))}else m(null)}}),[a.participants,a.speakersInHeader]),Object(c.useEffect)((function(){var e="";a.translation.isOn&&(e=s.a.createElement(Xa,null)),k(e)}),[a.translation.isOn]),s.a.createElement(ii,{translation:A,speakers:i?h:null,hands:b,time:O,network:null!==(t=null===(n=a.participants[a.me])||void 0===n?void 0:n.networkStatus)&&void 0!==t?t:1,networkTooltipText:u("calls_status_bad_internet_connection")})}var ci=n(673),si=function(e){var t=e.className,n=e.title,r=e.onClose,a=e.backText,i=e.onBack,o=Object(d.c)("ModalHeader",t);return s.a.createElement("div",{className:palettePrefix(o)},a&&s.a.createElement("button",{className:palettePrefix("ModalHeader__back"),onClick:i},a),s.a.createElement("h1",{className:palettePrefix("ModalHeader__title")},n),s.a.createElement("button",{className:palettePrefix("ModalHeader__cross"),type:"button",onClick:r},s.a.createElement(ci.a,{width:22,height:22}),"Закрыть"))},ui=function(e){var t=e.className,n=e.actionButtons,r=e.hint,a=e.children;return s.a.createElement("div",{className:palettePrefix(Object(d.c)("ModalFooter",t))},s.a.createElement("div",{className:palettePrefix("ModalFooter__inner")},r&&s.a.createElement("div",{className:palettePrefix("ModalFooter__hint")},r),a&&s.a.createElement("div",{className:palettePrefix("ModalFooter__content")},a),n))},li=function(e){var t=e.title,n=e.onCloseModal,r=e.hint,a=e.actionButtons,i=e.isWithBackButton,o=e.onBackClick,c=e.children,u=s.a.useContext(Pn).getLang;return s.a.createElement(Rn,{className:palettePrefix("CallManagementModal"),disableBodyScroll:!1,onClose:n},s.a.createElement(si,{title:t,onClose:n,backText:i?u("calls_back"):void 0,onBack:o}),s.a.createElement("div",{className:palettePrefix("CallManagementModal__content")},s.a.Children.toArray(c).map((function(e,t){return s.a.createElement("div",{className:palettePrefix("CallManagementModal__section"),key:t},e)}))),(a||r)&&s.a.createElement(ui,{actionButtons:a||[],hint:r}))};function di(e){var t={"List--border":!!e.border};return s.a.createElement("ul",{className:palettePrefix(Object(d.c)("List",t,e.className)),style:e.style},e.children)}di.propTypes={className:g.a.string,children:g.a.node,style:g.a.object,border:g.a.bool},di.defaultProps={border:!0};var fi=!1;function pi(){fi||(Object(dr.a)(new ur.a({id:"chevron_right_outline_28",viewBox:"0 0 28 28",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="chevron_right_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path d="M11 7.5l6.5 6.5-6.5 6.5" stroke="#8BC1FF" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" /><path d="M16.086 14l-5.793 5.793a1 1 0 001.414 1.414l6.5-6.5a1 1 0 000-1.414l-6.5-6.5a1 1 0 00-1.414 1.414L16.086 14z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),fi=!0)}var hi=function(e){return Object(dr.b)((function(){pi()}),[]),s.a.createElement(fr.a,Object(lr.assign)({},e,{viewBox:"0 0 28 28",id:"chevron_right_outline_28",width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};hi.mountIcon=pi;var mi,vi=hi,gi=["icon","aside","chevron","selectable","border","className","children","active","canBeHovered"],bi=function(e){var t=e.icon,n=void 0===t?null:t,r=e.aside,i=void 0===r?null:r,o=e.chevron,c=void 0!==o&&o,u=e.selectable,l=void 0===u||u,f=e.border,p=void 0===f||f,h=e.className,m=e.children,v=e.active,g=e.canBeHovered,b=void 0===g||g,_=ke()(e,gi),y={"ListItem--chevron":c,"ListItem--selectable":l,"ListItem--border":p,"ListItem--active":v,"ListItem--can-be-hovered":b};return s.a.createElement("li",a()({},_,{className:palettePrefix(Object(d.c)("ListItem",y,h))}),n&&s.a.createElement("div",{className:palettePrefix("ListItem__icon")},n),s.a.createElement("div",{className:palettePrefix("ListItem__main")},m),s.a.createElement("div",{className:palettePrefix("ListItem__aside")},i),c&&s.a.createElement(vi,{width:26,height:26,style:{color:"var(--icon_tertiary)"}}))};!function(e){e.BLUE="blue",e.GREEN="green",e.GRAY="gray",e.RED="red"}(mi||(mi={}));var _i=function(e){var t=e.icon,n=e.color;return s.a.createElement("div",{className:palettePrefix(Object(d.c)("ListIcon","ListIcon--".concat(n)))},t)},yi=function(e){var t=a()({},e);return s.a.createElement("svg",a()({width:"14",height:"14",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},t,{"aria-hidden":"true"}),s.a.createElement("path",{d:"M6.022 9.184a.837.837 0 01-1.187-.001 3.861 3.861 0 010-5.419l2.618-2.643a3.772 3.772 0 015.366 0c1.261 1.274 1.557 3.033.67 4.508-.296.49-.947.47-1.325.09-.275-.276-.254-.707-.077-1.019.465-.817.24-1.683-.456-2.379a2.094 2.094 0 00-2.997 0L6.023 4.956a2.143 2.143 0 00-.001 3.025.83.83 0 010 1.202zm1.95-3.166c.833.835.832 2.19-.001 3.025L5.36 11.68a2.094 2.094 0 01-2.998 0c-.695-.696-.91-1.555-.446-2.371.178-.313.199-.744-.076-1.019-.379-.38-1.03-.4-1.325.09-.888 1.474-.602 3.226.659 4.5a3.772 3.772 0 005.367 0l2.617-2.643a3.861 3.861 0 000-5.419.837.837 0 00-1.187 0 .83.83 0 000 1.2z"}))},Ei=function(e){var t=e.text,n=e.onCopyDone,r=e.children,a=Object(c.useRef)(null),i=Object(c.useCallback)((function(e){a.current&&(a.current.focus(),a.current.select(),document.execCommand("copy"),e.preventDefault(),e.stopPropagation(),n&&n())}),[n]);return s.a.createElement("div",{className:palettePrefix("CopyText"),onClick:i},s.a.createElement("input",{type:"text",readOnly:!0,value:t||"",ref:a,className:palettePrefix("CopyText__input")}),r)},Oi=["children","className"];function wi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ci(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wi(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Si=function(e){var t=e.children,n=e.className,r=ke()(e,Oi),i=Object(d.c)("LinkButton",n),o=Ci(Ci({},r),{},{onMouseDown:function(e){e.preventDefault(),r.onMouseDown&&r.onMouseDown(e)}});return s.a.createElement("button",a()({},o,{className:palettePrefix(i)}),t)};Si.propTypes={className:g.a.string,children:g.a.node};var Ai=Si,ki=["shown","callback","duration","className","children"];function ji(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wn()(e);if(t){var a=wn()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return En()(this,n)}}var Ti=function(e){_n()(n,e);var t=ji(n);function n(e){var r;return tt()(this,n),r=t.call(this,e),o()(gn()(r),"onTransitionEnd",(function(e){r.state.shown&&"opacity"===e.propertyName&&(r.timeout=setTimeout((function(){r.setState({shown:!1}),r.props.callback()}),r.props.duration))})),r.state={shown:e.shown},r}return rt()(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){!this.props.shown&&e.shown&&this.setState({shown:!0})}},{key:"componentWillUnmount",value:function(){this.timeout&&clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this.props,t=(e.shown,e.callback,e.duration,e.className),n=e.children,r=ke()(e,ki),i=Object(d.c)("BlinkText",{"BlinkText--shown":this.state.shown},t);return s.a.createElement("span",a()({},r,{className:palettePrefix(i),onTransitionEnd:this.onTransitionEnd,"aria-hidden":!0}),n)}}]),n}(s.a.Component);Ti.propTypes={className:g.a.string,children:g.a.node,duration:g.a.number,shown:g.a.bool.isRequired,callback:g.a.func.isRequired},Ti.defaultProps={duration:2e3};var Ii=function(e){var t=e.value,n=e.copyText,r=e.doneText,a=e.className,i=Object(c.useState)(!1),o=p()(i,2),u=o[0],l=o[1],f=Object(c.useCallback)((function(){l(!0)}),[]),h=Object(c.useCallback)((function(){l(!1)}),[]),m=Object(d.c)("ListCopyControl",a,{"ListCopyControl--copied":u});return s.a.createElement("div",{className:palettePrefix(m)},s.a.createElement(Ei,{text:t,onCopyDone:f},s.a.createElement(Ai,{className:palettePrefix("ListCopyControl__copyButton")},n)),s.a.createElement(Ti,{shown:u,callback:h,className:palettePrefix("ListCopyControl__copyDone")},r))},Pi=function(e){var t=e.isLinkBlockShown,n=e.linkBlockTitle,r=e.onLinkBlockClick,a=e.callUrlLink,i=Object(c.useContext)(He).allowWaitingHall,o=s.a.useContext(Pn).getLang;return s.a.createElement(di,null,t&&s.a.createElement(bi,{onClick:r,chevron:!0,icon:s.a.createElement(_i,{icon:s.a.createElement(yi,null),color:mi.GREEN}),aside:i?s.a.createElement("span",{className:palettePrefix("CallManagementMenu__asideHint")},o("calls_menu_link_setup")):""},n,a&&s.a.createElement(Ii,{value:a,copyText:o("calls_menu_link_copy"),doneText:o("calls_menu_link_copied")})))},Di=n(138),Ni=["isSingleLine","className","children"],xi=function(e){var t=e.isSingleLine,n=e.className,r=e.children,i=ke()(e,Ni),o=Object(d.c)("InputStub",n,{"InputStub--singleLine":t});return s.a.createElement("div",a()({className:palettePrefix(o)},i),r)},Ri=["inverted","size","className"],Mi=function(e){var t=e.inverted,n=e.size,r=e.className,i=ke()(e,Ri),o=Object(d.c)("Progress",{"Progress--inverted":!!t},"Progress--size-".concat(n),r);return s.a.createElement("div",a()({className:palettePrefix(o)},i),s.a.createElement("div",{className:palettePrefix("Progress__item")}),s.a.createElement("div",{className:palettePrefix("Progress__item")}),s.a.createElement("div",{className:palettePrefix("Progress__item")}))};Mi.defaultProps={inverted:!1,size:"s"};var Li=Mi,Bi=function(e){var t=e.link,n=void 0===t?"":t,r=e.isLinkLoading,a=e.isCopied,i=e.hideCopiedText,o=s.a.useContext(Pn).getLang;return s.a.createElement("div",{className:palettePrefix("CallLink")},s.a.createElement("p",{className:palettePrefix("CallLink__info")},o("calls_management_link_info_desc")),r?s.a.createElement(xi,{className:palettePrefix("CallLink__input")},s.a.createElement(Li,null)):s.a.createElement("div",{className:palettePrefix("CallLink__input")},s.a.createElement(Di.default,{readOnly:"readonly",value:n}),s.a.createElement("div",null,s.a.createElement("div",{className:palettePrefix("CallLink__hint")},o("calls_management_add_warning"),s.a.createElement(Ti,{className:palettePrefix("CallLink__copied"),shown:a,callback:i},o("calls_link_copied"))))))},Fi=["className"],Hi=Object(c.forwardRef)((function(e,t){var n=e.className,r=ke()(e,Fi);return s.a.createElement(Di.default,a()({},r,{className:palettePrefix(Object(d.c)(n,"BlockSearchInput")),ref:t}))})),Vi=function(e){var t=e.headingElement,n=void 0===t?"h3":t,r=e.extra,a=e.right,i=e.className,o=e.children,c=n;return s.a.createElement("header",{className:palettePrefix(Object(d.c)("ListHeader",i))},s.a.createElement(c,{className:palettePrefix("ListHeader__text")},o),s.a.createElement("span",{className:palettePrefix("ListHeader__extra")},r),a&&s.a.createElement("span",{className:palettePrefix("ListHeader__right")},a))},Ui=function(e){var t=e.searchQuery,n=e.onSearchChange,r=e.length,a=e.children,i=e.waitingHallList,o=s.a.useContext(Pn).getLang;return s.a.createElement("div",{className:palettePrefix("CallParticipantList")},s.a.createElement(Hi,{value:t,placeholder:o("calls_search_participants_placeholder"),onChange:n,onInput:n,onPaste:n,className:palettePrefix("CallParticipantList__input")}),!!i&&i,s.a.createElement(Vi,{extra:r||""},o("calls_participant_list_header")),s.a.createElement(di,{border:!1,className:palettePrefix("CallParticipantList__list")},a))},zi=["onClick","hovered","className","children"];function Gi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wn()(e);if(t){var a=wn()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return En()(this,n)}}var Wi=function(e){_n()(n,e);var t=Gi(n);function n(){return tt()(this,n),t.apply(this,arguments)}return rt()(n,[{key:"render",value:function(){var e=this.props,t=e.onClick,n=e.hovered,r=e.className,i=e.children,o=ke()(e,zi),c=Object(d.c)("Link",{"Link--hovered":!!n},r);return this.props.href?s.a.createElement("a",a()({onClick:t},o,{className:palettePrefix(c)}),i):s.a.createElement("span",a()({onClick:t},o,{className:palettePrefix(c)}),i)}}]),n}(s.a.Component);Wi.propTypes={className:g.a.string,children:g.a.node,href:g.a.string,hovered:g.a.bool,onClick:g.a.func},Wi.defaultProps={href:void 0,hovered:!1,onClick:function(){}};var qi=[["&amp;","&"],["&lt;","<"],["&gt;",">"],["&quot;",'"'],["&#33;","!"]];function Ki(e){return qi.reduce((function(e,t){var n=p()(t,2),r=n[0],a=n[1];return e.replace(new RegExp(r,"ig"),a)}),e).replace(/&#(\d+);/g,(function(e,t){return String.fromCodePoint(t)}))}function Yi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wn()(e);if(t){var a=wn()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return En()(this,n)}}var Zi=function(e){_n()(n,e);var t=Yi(n);function n(e){var r;return tt()(this,n),r=t.call(this,e),o()(gn()(r),"onError",(function(){r.setState({errored:!0})})),r.state={},r}return rt()(n,[{key:"getPhotoImage",value:function(){var e=this.props,t=e.photo,n=e.title;return s.a.createElement("img",{src:this.state.errored?"/images/camera_c.gif":t,alt:n,onError:this.onError,className:palettePrefix("Entity__photo")})}},{key:"render",value:function(){var e=this.props,t=e.onLinkClick,n=e.className,r=e.style,a=e.size,i=e.photo,c=e.href,u=e.title,l=e.description,f=e.target,p=e.linkClassName,h=e.ignoreDecodeHTML,m=o()({},"Entity--size".concat(a),!!a),v=h?u:Ki(u);return s.a.createElement("div",{className:palettePrefix(Object(d.c)("Entity",n,m)),style:r},s.a.createElement("div",{className:palettePrefix("Entity__aside")},"string"==typeof i?c?s.a.createElement("a",{href:c,target:f},this.getPhotoImage()):this.getPhotoImage():i),s.a.createElement("div",{className:palettePrefix("Entity__main")},u&&c?s.a.createElement("div",{className:palettePrefix("Entity__title")},s.a.createElement(Wi,{onClick:t,className:palettePrefix(p),href:c,target:f},v)):s.a.createElement("div",{className:palettePrefix("Entity__title")},v),"string"!=typeof l?s.a.createElement("div",{className:palettePrefix("Entity__description")},l):s.a.createElement("div",{className:palettePrefix("Entity__description")},Ki(l))))}}]),n}(s.a.PureComponent);Zi.propTypes={size:g.a.oneOf([null,"28","34"]),photo:g.a.oneOfType([g.a.string,g.a.element]),title:g.a.string.isRequired,description:g.a.oneOfType([g.a.string,g.a.element]),ignoreDecodeHTML:g.a.bool,href:g.a.string,target:g.a.oneOf(["_blank","_self","_parent","_top"]),className:g.a.string,linkClassName:g.a.string,style:g.a.object,onLinkClick:g.a.func},Zi.defaultProps={size:null,photo:"",title:"",description:"",href:"",target:null,ignoreDecodeHTML:!1,onLinkClick:function(){}};var Qi=["element","alt","className"],Ji=function(e){var t=e.element,n=void 0===t?"span":t,r=e.alt,i=e.className,o=ke()(e,Qi),c=n,u=Object(d.c)("ListActionsControl",i);return s.a.createElement(c,a()({"aria-label":r,className:palettePrefix(u)},o),s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"5",viewBox:"0 0 10 5",fill:"currentColor","aria-hidden":"true"},s.a.createElement("path",{d:"M5 4.8c-.2 0-.3 0-.4-.1l-4.3-3.2c-.3-.3-.4-.8-.2-1.1.2-.3.7-.4 1-.2l3.9 2.9 3.8-2.9c.3-.3.8-.2 1 .1.3.3.2.8-.1 1.1l-4.2 3.2c-.2.1-.3.2-.5.2z"})))},Xi=function(e){var t=e.position,n=e.align,r=e.trigger,a=e.marginTop,i=e.marginLeft,o=e.actions;return o.length>0?s.a.createElement(ga,{position:t,align:n,trigger:r,marginTop:a,marginLeft:i,className:palettePrefix("ParticipantMenu__dropdown"),data:o},s.a.createElement(Ji,null)):null},$i=function(e){var t=e.SDK,n=e.participant,r=e.navigateToConvo,a=e.navigateToProfile,i=we((function(e){return e})),o=_e(),c=s.a.useContext(Pn).getLang,u=Vt(i,t,o,n,!1,c,r,a,!0);return u.length>0?s.a.createElement(Xi,{position:"b",align:"right",trigger:"hover",marginTop:-8,marginLeft:1,actions:u}):null},eo=function(e){var t=a()({},e);return s.a.createElement("svg",a()({height:"13",width:"12",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 13",fill:"currentColor"},t),s.a.createElement("path",{d:"M3.497 5.06v.44a2.501 2.501 0 002.91 2.467l1.199 1.198a4.005 4.005 0 01-5.521-2.822.75.75 0 00-1.469.314A5.508 5.508 0 005.25 10.95v1.301a.75.75 0 001.501 0v-1.3a5.472 5.472 0 001.973-.669l1.25 1.25a.751.751 0 001.062-1.061L1.88 1.32A.75.75 0 10.82 2.38l2.677 2.68zM9.672 7.097l1.117 1.117a5.463 5.463 0 00.594-1.557.75.75 0 10-1.468-.314 3.963 3.963 0 01-.243.754zM3.827 1.258l4.644 4.64c.02-.13.031-.263.031-.398v-3a2.502 2.502 0 00-4.675-1.242z"}))},to=function(e){var t=a()({},e);return s.a.createElement("svg",a()({width:"15",height:"15",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),s.a.createElement("path",{d:"M2.75 3a.75.75 0 01.75.75V7.5a.5.5 0 001 0V2A.75.75 0 016 2v4.75a.5.5 0 001 0v-5.5a.75.75 0 011.5 0v5.5a.5.5 0 001 0V2.5a.75.75 0 011.5 0v7.25l1.614-1.796a.9.9 0 011.36 1.177c-.73.873-2.044 2.449-2.809 3.367C9.913 14 8.08 14.5 6.701 14.5 2.2 14.5 2 11.47 2 10.444V3.75A.75.75 0 012.75 3z"}))},no=function(){var e=Object(Hr.classNames)("VolumeMeterAnimation","VolumeMeterAnimation--withAnimation");return s.a.createElement("div",{className:palettePrefix(e)})},ro=function(e){var t=e.showSpeaking,n=e.showAudioDisabled,r=e.showRaisedHand,a=e.showConnecting,i=e.showRaisedHandTooltip,o=e.onRaisedHandClick,u=Object(c.useContext)(Pn).getLang,l=s.a.createElement("span",{className:palettePrefix(Object(d.c)("ParticipantIndicators__item",{"ParticipantIndicators__item--interactive":void 0!==o})),onClick:null!=o?o:void 0},s.a.createElement(to,{className:palettePrefix("ParticipantIndicators__hand")}));return s.a.createElement("span",{className:palettePrefix("ParticipantIndicators")},t&&s.a.createElement("span",{className:palettePrefix("ParticipantIndicators__item")},s.a.createElement(no,null)),n&&s.a.createElement("span",{className:palettePrefix("ParticipantIndicators__item")},s.a.createElement(eo,{className:palettePrefix("ParticipantIndicators__muted")})),r?i?s.a.createElement(In,{className:palettePrefix("ParticipantIndicators__tooltip"),text:u("calls_participant_menu_enable_media_request"),position:"t",align:"center",appearance:"light"},l):l:null,a&&s.a.createElement("span",{className:palettePrefix("ParticipantIndicators__item")},s.a.createElement(cr,null)))},ao=["className","children"],io=function(e){var t=e.className,n=e.children,r=ke()(e,ao),i=Object(d.c)("ListAddControl",t);return s.a.createElement("button",a()({className:palettePrefix(i)},r),s.a.createElement("span",{className:palettePrefix("ListAddControl__icon")},s.a.createElement("svg",{height:"16",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0},s.a.createElement("path",{d:"M9 7h6c.552 0 1 .448 1 1s-.448 1-1 1h-6v6c0 .552-.448 1-1 1s-1-.448-1-1v-6h-6c-.552 0-1-.448-1-1s.448-1 1-1h6v-6c0-.552.448-1 1-1s1 .448 1 1z",fill:"currentColor"}))),n)},oo=["className","appearance","wide","overflow","size"];function co(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wn()(e);if(t){var a=wn()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return En()(this,n)}}var so=function(e){_n()(n,e);var t=co(n);function n(){return tt()(this,n),t.apply(this,arguments)}return rt()(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.appearance,r=e.wide,i=e.overflow,o=e.size,s=ke()(e,oo),u=e.disabled,l=d.c.apply(void 0,["Button"].concat(Ue()(function(e){return Array.isArray(e)?e.map((function(e){return"Button--".concat(e)})):["Button--".concat(e)]}(n)),["Button--size-".concat(o),{"Button--wide":r,"Button--overflow":!!i,"Button--disabled":u},t]));return c.createElement("button",a()({},s,{className:palettePrefix(l)}),e.children)}}]),n}(c.Component);o()(so,"defaultProps",{appearance:"primary",size:"m",wide:!1,disabled:!1});var uo=function(e){var t=e.members,n=void 0===t?[]:t,r=e.totalCount,a=void 0===r?0:r,i=e.navigateToProfile,o=e.onPromote,c=e.onForbid,u=s.a.useContext(Pn).getLang;return 0===n.length?s.a.createElement(s.a.Fragment,null):s.a.createElement(s.a.Fragment,null,s.a.createElement(Vi,{extra:a||""},u("calls_waiting_hall_list_header")),s.a.createElement(di,{border:!1,className:palettePrefix("CallParticipantList__list CallParticipantList__list--waitingList")},n.map((function(e){return s.a.createElement(bi,{selectable:!1,border:!1,key:e.peerId,aside:s.a.createElement(s.a.Fragment,null,s.a.createElement(so,{onClick:function(){return c(e.peerId)},appearance:"secondary"},u("calls_waiting_hall_forbid")),s.a.createElement(so,{onClick:function(){return o(e.peerId)}},u("calls_waiting_hall_join")))},s.a.createElement(Zi,{onLinkClick:i,photo:s.a.createElement(ln,{id:e.peerId,photo:e.photo,alt:e.name||""}),title:e.name,href:e.link,target:"_blank"}))}))))},lo=["children","className"],fo=function(e){var t=e.children,n=e.className,r=ke()(e,lo);return s.a.createElement("button",a()({className:palettePrefix(Object(d.c)("ListMore",n))},r),t)};function po(e){return new Promise((function(t,n){var r=new Image;r.src=e,r.onload=t,r.onerror=n}))}function ho(e){return Promise.resolve(e)}function mo(e,t,n){var r=function(e){var t=We.ExternalIdType.USER;return Bt(e)&&(t=We.ExternalIdType.GROUP),{id:e.toString(),type:t}}(e);return Object(We.promoteParticipant)(r).then((function(){vo(e,t,n)}))}function vo(e,t,n){t&&(t.totalCount-=1,t.members.delete(e),n({type:Se.vc,data:t}))}function go(e,t,n,r){return new Promise((function(n){0!==t.length?e>t.length?Object(We.getWaitingHall)(null,e).then((function(e){n(e.participants)})):n(t):n([])})).then((function(t){var r={totalCount:e,members:new Map,hasNew:!1},a=[];if(n.waitingHall){var i=n.waitingHall,o=i.members,c=i.hasNew;r.hasNew=c,t.forEach((function(e){var t=+e.id;if(o.has(t)){var n=o.get(t);n&&r.members.set(t,n)}else a.push(t)}))}else a=t.map((function(e){return+e.id}));if(a.length>0){r.hasNew=!0;var s=n.me,u=n.callData,l=n.anonymSecret,d=s<0;return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i={call_id:e,peer_ids:t.join(","),fields:ja};return n&&(i=Aa(Aa({},i),{},{device_id:"anyId",secret:r,user_id:a})),Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"request",method:"messages.getCallParticipants",data:i}),Ca(!n)()("messages.getCallParticipants",i,{version:"5.149"}).then((function(e){return Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"response",method:"messages.getCallParticipant",response:e}),e}))}(u.callId||"",a,d,l,d?s:0).then((function(e){var t=e.profiles,n=void 0===t?[]:t,a=e.anonyms,i=void 0===a?[]:a,o=e.groups,c=void 0===o?[]:o,s=[].concat(Ue()(i),Ue()(n)).map(Pt);return(null==c?void 0:c.length)>0&&(s=[].concat(Ue()(s),Ue()(c.map(Dt)))),ho([{},s]),s.forEach((function(e){e&&e.peerId&&r.members.set(e.peerId,e)})),r})).catch((function(){return r}))}return r})).then((function(e){e.members&&r({type:Se.vc,data:e})}))}function bo(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(r)n=void 0;else{if(!e.waitingHall)return Promise.resolve();var a=(n=e.waitingHall.totalCount)>e.waitingHall.members.size;if(!a)return Promise.resolve()}return new Promise((function(r){Object(We.getWaitingHall)(null,n).then((function(n){go(n.totalCount,n.participants,e,t).then((function(){r()}))}))}))}var _o=function(e){var t,n,r,a,i,o=e.isModal,u=e.onMore,l=e.navigateToProfile,d=e.isWithBackButton,f=e.onBackClick,h=d?f:function(){},m=we((function(e){return e})),v=_e(),g=s.a.useContext(Pn).getLang,b=Object(c.useState)(yo(m,o)),_=p()(b,2),y=_[0],E=_[1],O=Object(c.useState)(""),w=p()(O,2),C=w[0],S=w[1],A=m.waitingHall?Array.from(null===(t=m.waitingHall)||void 0===t?void 0:t.members.values()):[],k=Object(c.useCallback)((function(e){return e.name}),[]),j=Object(c.useCallback)((function(e){return e.peerId}),[]),T=Hn(o?A:[],k,j),I=Object(c.useCallback)((function(e){S(e.target.value)}),[]),P=o?A:A.slice(0,5);C&&(P=T.search(C)),Object(c.useEffect)((function(){E(yo(m,o))}),[null===(n=m.waitingHall)||void 0===n?void 0:n.totalCount]);var D=Object(c.useCallback)((function(e){var t,n=null===(t=m.waitingHall)||void 0===t?void 0:t.members.get(e);n&&v({type:Se.Fc,data:{type:Se.kb.WAITING_HALL,participant:n}})}),[null===(r=m.waitingHall)||void 0===r?void 0:r.members]),N=Object(c.useCallback)((function(e){m.waitingHall&&mo(e,m.waitingHall,v)}),[null===(a=m.waitingHall)||void 0===a?void 0:a.members]),x=Object(c.useCallback)((function(){u&&u()}),[m.waitingHall]),R=s.a.createElement(s.a.Fragment,null,s.a.createElement(uo,{members:P,totalCount:null===(i=m.waitingHall)||void 0===i?void 0:i.totalCount,navigateToProfile:l,onPromote:N,onForbid:D}),y&&s.a.createElement(fo,{onClick:x},g("calls_waiting_hall_more_text")));return o?s.a.createElement(li,{title:g("calls_waiting_hall_title"),onCloseModal:function(){v({type:Se.O,open:!1,preselectedIds:null}),v({type:Se.qb,isOpen:!1})},isWithBackButton:d,onBackClick:h},s.a.createElement("div",{className:palettePrefix("CallParticipantList")},A.length>0&&s.a.createElement(s.a.Fragment,null,s.a.createElement(Hi,{value:C,placeholder:g("calls_search_participants_placeholder"),onChange:I,onInput:I,onPaste:I,className:palettePrefix("CallParticipantList__input")}),R,C&&0===P.length&&s.a.createElement(ta,null,g("calls_participants_not_found"))),0===A.length&&s.a.createElement(ta,null,g("calls_waiting_hall_not_users")))):R};function yo(e,t){if(t)return!1;var n=e.waitingHall;return!!n&&n.totalCount>5}var Eo=function(e){var t=e.SDK,n=e.onAddClick,r=e.navigateToProfile,a=e.navigateToConvo,i=e.onShowMoreWaitingHall,o=we((function(e){return e})),u=s.a.useContext(Pn).getLang,l=function(e){var t=!!e.groupId;return Object.values(e.participants).reduce((function(n,r){var a=r,i=!1;return r.peerId===e.me?(t&&null!=e&&e.meGroup&&(a=Rt(e.meGroup,r)),i=!0):r.status&&(i=!0),i&&(n[0].push(a),a.name&&n[1].push(a)),n}),[[],[]])}(o),d=p()(l,2),f=d[0],h=d[1],m=Object(c.useState)(""),v=p()(m,2),g=v[0],b=v[1],_=Object(c.useState)(100),y=p()(_,2),E=y[0],O=y[1],w=Object(c.useCallback)((function(e){return e.name}),[]),C=Object(c.useCallback)((function(e){return e.peerId}),[]),S=Hn(h,w,C),A=tn(o.participants[o.me]),k=g?S.search(g):f,j=Object(c.useCallback)((function(e){b(e.target.value)}),[]),T=!Lt(o.me);return s.a.createElement(Ui,{searchQuery:g,onSearchChange:j,length:k.length,waitingHallList:o.waitingHall&&s.a.createElement(_o,{isModal:!1,navigateToProfile:r,onMore:i})},!g&&T&&s.a.createElement(bi,{selectable:!1,border:!1,key:"add"},s.a.createElement(io,{onClick:n},u("calls_add_participants"))),k.length>0&&k.slice(0,E).map((function(e){var n,i,c,u,l=e.peerId!==o.me&&e.status===We.ParticipantStatus.WAITING,d=!(l||null!==(n=e.mediaSettings)&&void 0!==n&&n.isAudioEnabled),f=!(l||null!==(i=e.mediaSettings)&&void 0!==i&&i.isVideoEnabled),p=!l&&!(null===(c=e.statusData)||void 0===c||null===(u=c.hand)||void 0===u||!u.state),h=!!o.speakers[e.peerId],m=l||d||p||h,v=e.peerId===o.me,g=!l&&(d||f)&&A&&!v;return s.a.createElement(bi,{selectable:!1,border:!1,key:e.peerId,aside:s.a.createElement(s.a.Fragment,null,m&&s.a.createElement(ro,{showSpeaking:h,showRaisedHand:p,showAudioDisabled:d,showConnecting:l,showRaisedHandTooltip:g,onRaisedHandClick:g?function(){return function(e){var n=o.participants[e],r=Ft(n);r&&t.unmuteRequest(r,[We.MediaOption.AUDIO,We.MediaOption.VIDEO,We.MediaOption.SCREEN_SHARING]).catch(console.log)}(e.peerId)}:void 0,key:"indicators"}),s.a.createElement($i,{SDK:t,participant:e,key:"menu",navigateToConvo:a,navigateToProfile:r}))},s.a.createElement(Zi,{onLinkClick:r,photo:s.a.createElement(ln,{id:e.peerId,photo:e.photo,alt:e.name||"",showCreatorBadge:en(e),showAdminBadge:$t(e)}),title:e.name,href:e.link,target:"_blank"}))})),k.length>E&&s.a.createElement(bi,{key:"limit"},s.a.createElement(fo,{className:palettePrefix("CallParticipantList__more"),onClick:function(){O(E+100)}},u("calls_participants_show_more").replace("{n}","100"))),g&&0===k.length&&s.a.createElement(ta,null,u("calls_participants_not_found")))};function Oo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wn()(e);if(t){var a=wn()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return En()(this,n)}}var wo=function(e){_n()(n,e);var t=Oo(n);function n(e){var r;return tt()(this,n),r=t.call(this,e),o()(gn()(r),"checkLoad",Object(d.D)((function(e){var t=p()(e,3),n=t[0],a=t[1],i=t[2];if(!r.loading)return r.props.virtualized||r.props.hasMore?void(a-n-i<=r.props.threshold&&(r.loading=!0,r.props.loadMore().then((function(){r.loading=!1})))):r.detachListeners()}),34)),o()(gn()(r),"onScroll",(function(){var e=r.getScrollData();r.props.virtualized&&r.processChildren(r.props.children,e),r.props.hasMore&&r.checkLoad(e)})),o()(gn()(r),"getRef",(function(e){r.container=e,r.props.virtualized&&r.setState(r.getChildrenData(r.props.children,r.getScrollData()))})),r.useWindowScroll=e.useWindowScroll,e.virtualized&&(r.state={before:0,after:e.children.length,start:0,end:0}),r}return rt()(n,[{key:"getScrollData",value:function(){var e=this.useWindowScroll?document.documentElement:this.container;return[this.getScrollTop(),e?e.scrollHeight:0,e?e.clientHeight:0]}},{key:"getScrollTop",value:function(){var e=document.documentElement||document.body.parentNode||document.body;return this.useWindowScroll?void 0!==window.pageYOffset?window.pageYOffset:e.scrollTop:this.container?this.container.scrollTop:0}},{key:"attachListeners",value:function(){var e=this.useWindowScroll?window:this.container;this.container&&(e.addEventListener("scroll",this.onScroll,this.props.useCapture),e.addEventListener("resize",this.onScroll,this.props.useCapture))}},{key:"detachListeners",value:function(){var e=this.useWindowScroll?window:this.container;this.container&&(e.removeEventListener("scroll",this.onScroll,this.props.useCapture),e.removeEventListener("resize",this.onScroll,this.props.useCapture))}},{key:"processChildren",value:function(e,t){var n=this.state,r=this.getChildrenData(e,t||this.getScrollData()),a=r.start,i=r.end,o=r.before,c=r.after;a===n.start&&i===n.end&&o===n.before&&c===n.after||this.setState(r)}},{key:"getChildrenData",value:function(e,t){var n=p()(t,3),r=n[0],a=n[1],i=n[2],o=this.useWindowScroll?window:this.container,c=o&&o.offsetHeight;if(!o||0===a||0===i)return{start:0,end:0,before:0,after:e.length};i=Math.max(i,c);var s=e.length,u=Math.max(Math.floor(r/this.props.itemHeight)-1,0),l=Math.min(Math.floor((r+2*i)/this.props.itemHeight+1),s);return{start:u,end:l,before:u,after:s-l}}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.virtualized&&this.processChildren(e.children)}},{key:"componentDidMount",value:function(){this.attachListeners()}},{key:"componentWillUnmount",value:function(){this.detachListeners()}},{key:"render",value:function(){return s.a.createElement("div",{className:palettePrefix(Object(d.c)("InfiniteScroll",this.props.className)),ref:this.getRef,style:this.props.style},this.props.virtualized&&this.state.before>0&&s.a.createElement("div",{style:{height:this.state.before*this.props.itemHeight},key:"before"}),this.props.virtualized?[].concat(this.props.children).slice(this.state.start,this.state.end):this.props.children,this.props.virtualized&&this.state.after>0&&s.a.createElement("div",{style:{height:this.state.after*this.props.itemHeight},key:"after"}),this.props.hasMore&&(this.props.loader||s.a.createElement("div",{className:palettePrefix("InfiniteScroll__loader"),key:"loader"},s.a.createElement(Jr,null))))}}]),n}(s.a.Component);wo.propTypes={useWindowScroll:g.a.bool,virtualized:g.a.bool,hasMore:g.a.bool,loadMore:g.a.func.isRequired,useCapture:g.a.bool,threshold:g.a.number,itemHeight:g.a.number},wo.defaultProps={useWindowScroll:!1,virtualized:!1,hasMore:!0,useCapture:!1,threshold:100,itemHeight:55};var Co=["id","name","tokens","onRemoveToken","removeTokenTooltip","removeTokenAriaLabel","renderToken","onChange","value","placeholder","onSubmit","className"];function So(e){var t=e.id,n=e.name,r=e.tokens,i=e.onRemoveToken,o=e.removeTokenTooltip,c=e.removeTokenAriaLabel,u=e.renderToken,l=e.onChange,f=e.value,p=e.placeholder,h=e.onSubmit,m=e.className,v=ke()(e,Co),g=s.a.useRef(),b=s.a.useCallback((function(e){return l(e)}),[l]),_=s.a.useCallback((function(e){"Esc"===e.key&&g.current&&(g.current.value="",g.current.blur(),l(e),e.stopPropagation()),"Enter"===e.key&&h()}),[h]),y=s.a.useCallback((function(e){var t=e.target.dataset.id;i(t),g.current&&g.current.focus()}),[i]);return s.a.createElement("div",{className:palettePrefix(Object(d.c)("TokenInput",m))},s.a.createElement("label",{htmlFor:t,className:palettePrefix("TokenInput__back")}),r.map((function(e){return s.a.createElement("span",{key:e.id,className:palettePrefix("TokenInput__token")},s.a.createElement("input",{type:"hidden",name:n+"[]",value:e.value||e.id}),s.a.createElement("span",{className:palettePrefix("TokenInput__label")},u?u(e):e.text),!e.locked&&o&&s.a.createElement(In,{text:o},s.a.createElement("button",{"data-id":e.id,className:palettePrefix("TokenInput__remove"),onClick:y,"aria-label":c})),!e.locked&&!o&&s.a.createElement("button",{"data-id":e.id,className:palettePrefix("TokenInput__remove"),onClick:y,"aria-label":c}))})),s.a.createElement("div",{className:palettePrefix("TokenInput__caret")},s.a.createElement("div",{className:palettePrefix("TokenInput__caretIn")},s.a.createElement("input",a()({},v,{id:t,type:"text",value:f,onChange:b,onPaste:b,placeholder:0===r.length?p:"",onKeyDown:_,className:palettePrefix("TokenInput__input"),ref:g})))))}So.propTypes={id:g.a.string,name:g.a.string,tokens:g.a.arrayOf(g.a.shape({id:g.a.string.isRequired,text:g.a.string.isRequired,value:g.a.string,locked:g.a.bool})).isRequired,onRemoveToken:g.a.func.isRequired,removeTokenTooltip:g.a.string,removeTokenAriaLabel:g.a.string,renderToken:g.a.func,onChange:g.a.func.isRequired,value:g.a.string.isRequired,placeholder:g.a.string,onSubmit:g.a.func.isRequired,className:g.a.any},So.defaultProps={id:"token-input",name:"tokens",removeTokenTooltip:"",removeTokenAriaLabel:"Remove item",placeholder:"",className:""};var Ao=["className","tokens","onSelect","renderToken","onRemoveToken","removeTokenPlaceholder","value","placeholder","useInfiniteScroll","loadMore","hasMore","virtualized","notFoundText","children","emptyText","isSearching","renderSuggest","useSuggestsWrapper","data","renderInput","opened","badge"];function ko(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wn()(e);if(t){var a=wn()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return En()(this,n)}}var jo=function(e){_n()(n,e);var t=ko(n);function n(e){var r;return tt()(this,n),r=t.call(this,e),o()(gn()(r),"onRemoveToken",(function(e){var t=r.searchContainer&&r.searchContainer.offsetHeight;r.props.onRemoveToken(e.target.getAttribute("data-id")).then((function(){(t||0===t)&&r.updateScroll(t)}))})),o()(gn()(r),"onChange",(function(e){var t=e.target.value;t!==r.value&&(r.value=t,r.props.onChange(e),r.scrollContainer.scrollTop=0)})),o()(gn()(r),"onSelect",(function(e){var t=r.searchContainer&&r.searchContainer.offsetHeight;r.props.onSelect(e.currentTarget.getAttribute("data-id")).then((function(){(t||0===t)&&r.updateScroll(t)}))})),o()(gn()(r),"updateScroll",(function(e){var t=r.searchContainer.offsetHeight;r.searchContainer.querySelector("#"+r.inputId).focus(),r.searchContainer.scrollTop=r.searchContainer.scrollHeight,e!==t&&(r.scrollContainer.scrollTop=r.scrollContainer.scrollTop+t-e)})),o()(gn()(r),"searchContainerRef",(function(e){r.searchContainer=e})),o()(gn()(r),"scrollContainerRef",(function(e){var t=e;if(e&&e.container)for(t=e;t.container;)t=t.container;r.scrollContainer=t})),r.value=e.value,r.inputId="token-input-"+Math.floor(1e6*Math.random()).toString(16),r}return rt()(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.tokens,i=(t.onSelect,t.renderToken),o=t.onRemoveToken,c=t.removeTokenPlaceholder,u=t.value,l=t.placeholder,f=t.useInfiniteScroll,p=t.loadMore,h=t.hasMore,m=t.virtualized,v=t.notFoundText,g=t.children,b=t.emptyText,_=t.isSearching,y=t.renderSuggest,E=t.useSuggestsWrapper,O=t.data,w=t.renderInput,C=t.opened,S=t.badge,A=ke()(t,Ao),k=f?wo:"div",j=f?{loadMore:p,hasMore:h,virtualized:m,useCapture:!1}:{},T=g?[].concat(g):[],I=!O&&0===T.length||!!O&&0===O.length&&(u||b)&&!_,P=s.a.createElement(s.a.Fragment,null,I&&s.a.createElement("div",{className:palettePrefix("MultiSelect__empty")},s.a.createElement("div",{className:palettePrefix("MultiSelect__emptyIn")},u?v:b)),s.a.createElement(k,a()({className:palettePrefix("MultiSelect__scroll"),ref:this.scrollContainerRef},j),O?O.map((function(t){return y(t,e.onSelect)})):T.map((function(t){return y?y(t,e.onSelect):s.a.createElement(bi,{className:palettePrefix("MultiSelect__suggestsItem"),"data-id":t.props["data-id"],onClick:e.onSelect,key:t.key},t)})))),D=w?w():s.a.createElement("div",{className:palettePrefix("MultiSelect__search"),ref:this.searchContainerRef},s.a.createElement(So,a()({id:this.inputId,tokens:r,onRemoveToken:o,removeTokenTooltip:c,removeTokenAriaLabel:c,placeholder:l,onChange:this.onChange,onSubmit:function(){},renderToken:i,value:u},A,{className:palettePrefix("MultiSelect__searchInput")})));return s.a.createElement("div",{className:palettePrefix(Object(d.c)("MultiSelect",n))},D,S,(void 0===C||!0===C)&&(E?s.a.createElement("div",{className:palettePrefix("MultiSelect__suggestsWrapper")},P):P))}}]),n}(s.a.PureComponent);jo.propTypes={tokens:g.a.arrayOf(g.a.shape({id:g.a.string.isRequired,text:g.a.string.isRequired,value:g.a.string,locked:g.a.bool})).isRequired,renderToken:g.a.func,removeTokenPlaceholder:g.a.string,placeholder:g.a.string,value:g.a.string,onChange:g.a.func.isRequired,useInfiniteScroll:g.a.bool,loadMore:g.a.func,hasMore:g.a.bool,onSelect:g.a.func.isRequired,notFoundText:g.a.string,emptyText:g.a.string,renderSuggest:g.a.func,useSuggestsWrapper:g.a.bool,data:g.a.array,renderInput:g.a.func,opened:g.a.bool,badge:g.a.node},jo.defaultProps={removeTokenPlaceholder:"",placeholder:"",value:"",useInfiniteScroll:!1,notFoundText:"Not found",useSuggestsWrapper:!1};var To=function(e){var t=e.tokens,n=e.onRemoveToken,r=e.value,a=e.onChange,i=e.onSelect,o=e.renderSuggest,c=e.data,u=s.a.useContext(Pn).getLang;return s.a.createElement(jo,{className:palettePrefix("CallsMultiSelect"),tokens:t,removeTokenPlaceholder:u("calls_remove_token"),onRemoveToken:n,placeholder:u("calls_search_participants_placeholder"),value:r,onChange:a,onSelect:i,useInfiniteScroll:!1,hasMore:!1,virtualized:!1,loadMore:function(){},notFoundText:u("calls_participants_not_found"),autoFocus:!0,isSearching:!1,renderSuggest:o,data:c})};function Io(e){var t=e.member,n=e.selected,r=void 0!==n&&n,a=e.disabled,i=void 0!==a&&a,o=Object(d.c)("ParticipantSuggest",{"ParticipantSuggest--selected":r,"ParticipantSuggest--disabled":i});return s.a.createElement("div",{className:palettePrefix(o),"data-id":t.id},s.a.createElement(Zi,{size:"34",title:t.name,photo:t.photo}))}var Po=function(e){var t=a()({},e);return s.a.createElement("svg",a()({width:"16",height:"16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),s.a.createElement("path",{d:"M9.3 9.99c.93-.93 2.32-.75 3.63.35.94.79.82 2.85-1.18 3.12s-4.11-.7-6.32-2.9c-2.2-2.2-3.1-4.1-2.9-6.3a1.8 1.8 0 013.12-1.18c1.06 1.25 1.38 2.6.36 3.62-.48.48-.67.6-.56.91.41 1.1 2.19 2.65 2.94 2.93.35.13.46-.1.9-.55z"}))},Do=function(e){var t=e.data,n=e.onClick,r=e.selected,a=e.disabled;if("type"in t)switch(t.type){case Se.Ac.HEADER:return s.a.createElement(Vi,{className:palettePrefix("CallsSearchResult CallsSearchResult--header"),extra:t.count},t.text);case Se.Ac.CALL_ALL_IN_CHAT:return s.a.createElement("div",{className:palettePrefix("CallsSearchResult CallsSearchResult--select")},s.a.createElement(so,{appearance:"secondary",wide:!0,onClick:n},s.a.createElement("span",{className:palettePrefix("CallsSearchResult__icon")},s.a.createElement(Po,null)),t.text));case Se.Ac.MEMBERS_MORE:case Se.Ac.FRIENDS_MORE:case Se.Ac.GROUP_MEMBERS_MORE:return s.a.createElement(fo,{onClick:n},t.text)}return s.a.createElement(bi,{"data-id":t.peerId,onClick:n,selectable:!a},s.a.createElement(Io,{member:t,selected:r,disabled:a}))};function No(e,t,n){if(e.authorizedGroupId)return Promise.resolve();if(jt(t).friends.length>0)return Promise.resolve();if(e.getFriends){var r=e.getFriends();if(null!==r)return n({type:Se.cc,data:r}),Promise.resolve()}return(Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"request",method:"friends.get",data:{fields:ka,order:"hints"}}),Ca()()("friends.get",{fields:ka.concat(",can_call"),order:"hints"}).then((function(e){return Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"response",method:"friends.get",data:e}),e}))).then((function(e){return e.items.map(Pt)})).then((function(e){n({type:Se.cc,data:e})}))}function xo(e,t,n,r){return function(e){return Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"request",method:"messages.getConversationMembers",data:{peerId:e}}),Ca()()("messages.getConversationMembers",{peer_id:e,fields:ka.concat(",can_call")}).then((function(e){return Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"response",method:"messages.getConversationMembers",data:e}),e}))}(n).then((function(n){var a=n.profiles;a&&t({type:Se.Zb,data:a.map(Pt).sort((function(t,n){var r=jt(e).me;return t.peerId===r?-1:n.peerId===r?1:0})),conversation:r})}))}function Ro(e,t,n){return e.authorizedGroupId?t.groupMembers.length>0?Promise.resolve():function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r={fields:ka.concat(",can_call_from_group"),group_id:e,offset:t,count:n,sort:"time_asc"};return Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"request",method:"groups.getMembers",params:r}),Ca()()("groups.getMembers",r).then((function(e){return Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"response",method:"groups.getMembers",data:e}),e}))}(-e.authorizedGroupId,0,Se.o).then((function(e){var t=e.items,n=e.count,r=[],a=[];return t.forEach((function(e){e.deactivated||(r.push(Pt(e)),e.can_call_from_group||a.push(e.id))})),[r,a,n]})).then((function(e){var t=p()(e,3),r=t[0],a=t[1],i=t[2];return n({type:Se.fc,groupMembersCount:i,groupMembers:r,unableToCallGroupMembersIds:a}),Promise.resolve()})):Promise.resolve()}function Mo(e,t,n){return xa(n).then((function(e){var n=gt(e),r=p()(n,3),a=r[0],i=r[1],o=r[2];return Uo(t,o),ho([a,i])})).then((function(e){var r=p()(e,2),a=r[0],i=r[1];t({type:Se.lb,conversation:a,members:i,peerId:n})}))}function Lo(e,t,n){return n?function(e){return Ca()()("messages.getConversationsById",{peer_ids:[e],extended:1,fields:ja})}(n).then((function(e){var n=e.items,r=p()(n,1)[0];Uo(t,r)})):Promise.resolve()}var Bo={acc:[],timer:0,tasks:0,timeout:100};function Fo(e,t,n,r,a,i){var o;(o=Bo.acc).push.apply(o,Ue()(a)),Bo.timer&&clearTimeout(Bo.timer),Bo.timer=window.setTimeout((function(){var a=Bo.acc;Bo.acc=[],Ho(e,t,n,r,a,i).catch((function(e){n.eventHandlers.onError&&e&&n.eventHandlers.onError(e),Object(We.debugMessage)(We.DebugMessageType.ERROR,e),console.error(e)}))}),Bo.timeout)}function Ho(e,t,n,r,a,i){var o=jt(e).me,c=jt(e).anonymSecret;return function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,i=[],o=Array.from(new Set(t));o.length;)o.length>1e3?(i.push(o.slice(0,1e3)),o=o.slice(1e3)):(i.push(o),o=[]);function c(t,a){var i=r?{call_id:e,peer_ids:a.join(","),fields:ja,device_id:"anyId",secret:t.secret,user_id:n}:{call_id:e,peer_ids:a.join(","),fields:ja};return Ca(!r)()("messages.getCallParticipants",i,{version:"5.149"}).then((function(e){return{count:e.count+t.count,secret:e.secret,profiles:(t.profiles||[]).concat(e.profiles||[]),anonyms:(t.anonyms||[]).concat(e.anonyms||[]),groups:(t.groups||[]).concat(e.groups||[])}}))}var s=St(c),u=Promise.resolve({secret:a,count:0});return i.reduce((function(e,t){return e.then((function(e){return s(e,t)}))}),u)}(r,a,o<0?o:void 0,o<0,c).then((function(e){var o=e.profiles,c=void 0===o?[]:o,s=e.anonyms,u=void 0===s?[]:s,l=e.secret,d=e.groups,f=void 0===d?[]:d;l&&t({type:Se.Kc,secret:l});var p=[].concat(Ue()(c),Ue()(u),Ue()(f)),h=a.filter((function(e){return!p.find((function(t){return t&&t.id===e}))}));h.length>0&&n.eventHandlers.onError&&n.eventHandlers.onError(new Error("callId: ".concat(r,", timestamp: ").concat(Date.now(),", cant find in participants: ").concat(h.join(", "))));var m=[].concat(Ue()(u),Ue()(c)).map(Pt);(null==f?void 0:f.length)>0&&(m=[].concat(Ue()(m),Ue()(f.map(Dt))));var v=ho([{},m]);return i.awaitImages?v.then((function(){return[null,m]})):[null,m]})).then((function(e){var n=p()(e,2)[1];n.length>0&&t({type:Se.lb,members:n})})).catch((function(e){n.eventHandlers.onError&&e&&n.eventHandlers.onError(e),Object(We.debugMessage)(We.DebugMessageType.ERROR,e),console.error(e)}))}function Vo(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return Ma(t,n,r).then((function(t){var n=t.join_link;return e({type:Se.e,callData:{callUrlLink:n}}),n}))}function Uo(e,t){if(t&&t.call_in_progress){var n=t.unread_count,r=t.last_message_id,a=t.call_in_progress.has_link,i=t.call_in_progress.can_finish_call;e({type:Se.e,callData:{canFinishCall:i,hasUrlLink:a}}),(n||r)&&e({type:Se.uc,chatUnreadCount:n,chatUpToMsgId:r})}}function zo(e){return Object(We.startStream)(!1,null,e).catch((function(e){Object(We.debugMessage)(We.DebugMessageType.ERROR,e),console.error(e)}))}function Go(e){return function(e){return Ca()()("video.startStreaming",e)}(e).then((function(e){return Object(We.startStream)(!1,null,e.stream.ov_id)})).catch((function(e){Object(We.debugMessage)(We.DebugMessageType.ERROR,e),console.error(e)}))}function Wo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Vo(e,t,!1,n).then((function(t){Object(d.d)(t).then((function(t){t&&e({type:Se.d,notification:{type:Se.wb.LINK_COPIED_TO_CLIPBOARD}})}))})).catch(console.log)}function qo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ko(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qo(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Yo,Zo=function(e){return e?ut(e.replace(/\t/g,"\n")):""},Qo=!1,Jo=function(e){var t=e.onChange,n=e.onClickCallAll,r=e.groupId,a=we((function(e){return e})),i=s.a.useContext(Pn).getLang,u=_e(),l=Object(c.useState)(""),d=p()(l,2),f=d[0],h=d[1],m=Object(c.useState)({}),v=p()(m,2),g=v[0],b=v[1],_=Object(c.useState)(!1),y=p()(_,2),E=y[0],O=y[1],w=Object(c.useState)(!1),C=p()(w,2),S=C[0],A=C[1],k=Object(c.useState)(!1),j=p()(k,2),T=j[0],I=j[1],P=Object(c.useState)(Xo(a.chatMembers,r?[]:a.friends)),D=p()(P,1)[0],N=Object(c.useState)($o(a.chatMembers,D,a.groupMembers)),x=p()(N,2),R=x[0],M=x[1],L=Object(c.useState)(Xo(a.chatMembers,a.groupMembers)),B=p()(L,2),F=B[0],H=B[1],V=(a.preselectedIds||[]).filter((function(e){return!Lt(e)&&R[e]})),U=Object(c.useState)(V),z=p()(U,2),G=z[0],W=z[1],q=Object(c.useState)(!1),K=p()(q,2),Y=K[0],Z=K[1],Q=Object(c.useCallback)((function(e){return e.name}),[]),J=Object(c.useCallback)((function(e){return e.peerId}),[]),X=Hn([].concat(Ue()(a.chatMembers),Ue()(D),Ue()(F)),Q,J),$=a.groupMembersCount>Se.o,ee=Object(c.useCallback)((function(e){if(e){var t=X.search(e);if(Qo){var n={};return t.forEach((function(e){n[e.id]=e})),Object.values(n)}return t}return function(e,t,n,r,a,i,o,c,s){var u={type:Se.Ac.MEMBERS_MORE,text:s("calls_show_all_members")},l={type:Se.Ac.FRIENDS_MORE,text:s("calls_show_all_friends")},d={type:Se.Ac.GROUP_MEMBERS_MORE,text:s("calls_show_all_group_members")},f={type:Se.Ac.HEADER,text:s("calls_chat_members"),count:e.length},p={type:Se.Ac.HEADER,text:s("calls_chat_group_members"),count:o},h={type:Se.Ac.HEADER,text:s("calls_friends")},m={type:Se.Ac.CALL_ALL_IN_CHAT,text:s("calls_call_all")},v=[];if(e.length>0)if(v.push(f),e.length<=c&&v.push(m),r||e.length<=5)v.push.apply(v,Ue()(e));else{for(var g=0;g<5;g++)v.push(e[g]);v.push(u)}if(t.length>0)if(v.push(h),a||t.length<=10)v.push.apply(v,Ue()(t));else{for(var b=0;b<10;b++)v.push(t[b]);v.push(l)}if(n.length>0)if(v.push(p),i||n.length<=10)v.push.apply(v,Ue()(n));else{for(var _=0;_<10;_++)v.push(n[_]);v.push(d)}return v}(a.chatMembers,D,F,E,S,T,a.groupMembersCount,a.participantLimit,i)}),[a,E,S,T]),te=Object(c.useState)(ee(f)),ne=p()(te,2),re=ne[0],ae=ne[1],ie=function(e){W(e),t(e)},oe=Object(c.useCallback)((function(e){return ie([].concat(Ue()(G),[+e]))}),[G]),ce=Object(c.useCallback)((function(e){return ie(G.filter((function(t){return t!==+e})))}),[G]),se=qt(a,!0).map((function(e){return{id:e.peerId.toString(),text:Zo(e.name),locked:!0}})).concat(G.map((function(e){return{text:Zo(R[e].name),id:e.toString(),locked:!1}})));Object(c.useEffect)((function(){b(G.reduce((function(e,t){return e[t]=!0,e}),{}))}),[]),Object(c.useEffect)((function(){ae(ee(f))}),[G,E,S,T]),Object(c.useEffect)((function(){var e=f;return $&&(e.length>=3&&!Y?Yo=setTimeout((function(){(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return Wa(e,t).then((function(e){var t=e.items,a=[],i=[];return t&&t.forEach((function(e){e.deactivated||e.id in n.groupMembersCache||(a.push(Pt(e)),e.can_call_from_group||i.push(e.id))})),a.length>0&&r({type:Se.fc,groupMembersCount:n.groupMembersCount,groupMembers:[].concat(Ue()(n.groupMembers),a),unableToCallGroupMembersIds:[].concat(Ue()(n.unableToCallGroupMembersIds),i)}),a}))})(-a.groupId,e,a,u).then((function(t){if(Z(!1),t.length>0){Qo=!0;var n=[].concat(Ue()(F),Ue()(t));H(Xo(a.chatMembers,n)),M($o(a.chatMembers,D,n)),t.forEach((function(e){X.add(e)})),ae(ee(e))}}))}),1e3):Yo&&(Z(!1),clearTimeout(Yo))),function(){clearTimeout(Yo)}}),[f]);var ue=Object(c.useCallback)((function(e){h(e.target.value),ae(ee(e.target.value))}),[]),le=Object(c.useCallback)((function(e){return ce(e),b(Ko(Ko({},g),{},o()({},e,!1))),Promise.resolve()}),[g]),de=Object(c.useCallback)((function(e){return ec(e,a,g)?(ce(e),b(Ko(Ko({},g),{},o()({},e,!1)))):tc(R[e],a,se,g,Qe(a))||(oe(e),b(Ko(Ko({},g),{},o()({},e,!0))),h(""),ae(ee(""))),Promise.resolve()}),[G,a,g]),fe=Object(c.useCallback)((function(){var e=qt(a,!0).reduce((function(e,t){return e[t.peerId]=!0,e}),{}),t=a.chatMembers.reduce((function(t,n){var r=n.peerId;return e[r]||tc(n,a,se,g,Qe(a))||t.push(r),t}),[]);n(t)}),[a,G,g]),pe=Object(c.useCallback)((function(e,t){if(!("type"in e))return t;switch(e.type){case Se.Ac.CALL_ALL_IN_CHAT:return function(){return fe()};case Se.Ac.MEMBERS_MORE:return function(){return O(!0)};case Se.Ac.FRIENDS_MORE:return function(){return A(!0)};case Se.Ac.GROUP_MEMBERS_MORE:return function(){return I(!0)};default:return function(){}}}),[fe]);return s.a.createElement(To,{tokens:se,onRemoveToken:le,value:f,onChange:ue,onSelect:de,renderSuggest:function(e,t){return function(e,t){var n="peerId"in e?e.peerId:0;return s.a.createElement(Do,{data:e,onClick:pe(e,t),selected:ec(n,a,g),disabled:tc(R[n],a,se,g,Qe(a)),key:n||"text"in e&&e.text||void 0})}(e,t)},data:re})};function Xo(e,t){var n=e.reduce((function(e,t){return e[t.id]=!0,e}),{});return t.filter((function(e){return!n[e.id]}))}function $o(e,t,n){return[].concat(t,e,n).reduce((function(e,t){return e[t.id]=t,e}),{})}function ec(e,t,n){return n&&n[e]||Ut(t,e)}function tc(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=(null==e?void 0:e.peerId)||0;if(Ut(t,i))return!0;if(ec(i,t,r))return!1;if(a){if(zt(t,i))return!0}else if(null==e||!e.canCall)return!0;return n.length>=t.participantLimit||!ze(i)}var nc=function(e){var t=e.SDK,n=e.bridge,r=e.isWithBackButton,a=e.onBackClick,i=we((function(e){return e})),o=_e(),u=s.a.useContext(Pn).getLang,l=Object(c.useState)(i.preselectedIds||[]),d=p()(l,2),f=d[0],h=d[1],m=Object(c.useState)(Kt(i)),v=p()(m,1)[0]+f.length,g=function(){o({type:Se.O,open:!1,preselectedIds:null}),o({type:Se.qb,isOpen:!1})},b=0===f.length,_=function(e){g(),o({type:Se.rb,participants:e});var n=e.map((function(e){return new Promise((function(n){t.addParticipant(String(e)).then(n).catch((function(t){"auth.banned"===t.message?n(e):"vk-participant-is-rejected-error"===t.message?o({type:Se.G,text:u("calls_error_cant_add_because_of_privacy")}):n(null)}))}))}));Promise.all(n).then((function(e){if((e=e.filter((function(e){return void 0!==e}))).length){var t=function(e,t){var n=[].concat(Ue()(e.friends),Ue()(e.chatMembers),Ue()(e.groupMembers)),r=[];return n.filter((function(e){var n=e.id;return!(!t.includes(n)||r.includes(n))&&(r.push(n),!0)}))}(i,e);o({type:Se.Jc,data:{members:t}})}}));var r=vt(function(e,t){var n=e.chatData||e.callData.conversation,r=t.reduce((function(t,n){return e.participants[n]||t.set(n,!0),t}),new Map);if(0===r.size)return[n,[]];var a=e.chatMembers.length<e.friends.length?e.chatMembers:e.friends,i=e.chatMembers.length<e.friends.length?e.friends:e.chatMembers,o=a.reduce((function(e,t){return r.get(t.id)&&(e.smallerListData.push(t),e.smallerListMap.set(t.id,!0)),e}),{smallerListData:[],smallerListMap:new Map}),c=o.smallerListData,s=o.smallerListMap;if(c.length===r.size)return[n,c];var u=i.filter((function(e){return!s.get(e.id)&&r.get(e.id)}));return[n,[].concat(Ue()(c),Ue()(u))]}(i,e)),a=p()(r,2),c=a[0],s=a[1];o({type:Se.lb,conversation:c,members:s}),ot.logEvent({call_event_type:Se.p.OUTGOING_CALL_ADD_PARTICIPANTS_SENT,session_id:i.callData.callId,peer_id:i.peer.toString(),is_group_call:qe(i.peer),group_call_users_count:f.length})},y=Object(c.useCallback)((function(){_(f)}),[f]);return s.a.createElement(li,{title:u("calls_add_participants_to_call"),onCloseModal:g,actionButtons:s.a.createElement(so,{key:"add",disabled:b,onClick:y},u("calls_add")),hint:rc(v,i.participantLimit,u),isWithBackButton:r,onBackClick:r?a:function(){}},s.a.createElement(Jo,{groupId:n.authorizedGroupId||0,onChange:h,onClickCallAll:function(e){_(e)}}))};function rc(e,t,n){return e<2?n("calls_management_add_warning"):n("calls_selected").replace("{selected}","".concat(e)).replace("{limit}","".concat(t))}function ac(e,t,n,r){var a=t.callData.callId||"";n({type:Se.xc,isLoaderVisible:!0}),Ba(a).catch((function(e){console.error(e),n({type:Se.G,text:r("calls_error_force_call_finish"),handleType:Se.J.FATAL})})).finally((function(){n({type:Se.xc,isLoaderVisible:!1})}))}var ic=["children","checked","disabled","name","type","id"];function oc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wn()(e);if(t){var a=wn()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return En()(this,n)}}var cc=function(e){_n()(n,e);var t=oc(n);function n(){var e;tt()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),o()(gn()(e),"onChange",(function(t){var n=e.props.onChange;n&&(e.props.native?n(t):n(e.props.name,t.target.checked))})),e}return rt()(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.checked,r=e.disabled,i=e.name,o=e.type,c=void 0===o?"checkbox":o,u=e.id,l=ke()(e,ic),f=Object(d.c)("Switch",l.className,{"Switch--disabled":r,"Switch--last":!t});return s.a.createElement("label",{className:palettePrefix(f),htmlFor:u,tabIndex:"-1","aria-checked":!!n,role:"checkbox"},s.a.createElement("input",a()({},l,{className:palettePrefix("Switch__input"),id:u,type:c,checked:n,name:i,disabled:r,onChange:this.onChange})),s.a.createElement("span",{className:palettePrefix("Switch__indicator"),"aria-hidden":!0}),t)}}]),n}(s.a.Component);cc.propTypes={checked:g.a.oneOfType([g.a.bool,g.a.string]),disabled:g.a.bool,id:g.a.oneOfType([g.a.string,g.a.number]),name:g.a.oneOfType([g.a.string,g.a.number]),type:g.a.string,onChange:g.a.func,children:g.a.oneOfType([g.a.string,g.a.node]),native:g.a.bool};var sc=function(e){var t=a()({},e);return s.a.createElement("svg",a()({width:"28",height:"28",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),s.a.createElement("circle",{cx:"14",cy:"14",r:"14",fill:"url(#paint0_linear)"}),s.a.createElement("path",{d:"M6.746 14.391c-.165-1.078-.204-1.206-.493-1.614-.363-.513-.415-1.1.38-1.255 2.042-.397 4.252-.1 6.265.268a5.546 5.546 0 002.204 0c2.013-.368 4.223-.665 6.264-.268.796.154.744.742.38 1.255-.288.408-.327.536-.492 1.614-.248 1.617-1.607 2.275-3.29 2.276-1.85 0-2.465-1.055-3.04-2.494-.557-1.398-1.29-1.398-1.849 0-.574 1.439-1.19 2.494-3.038 2.494-1.684 0-3.043-.66-3.29-2.276z",fill:"#fff"}),s.a.createElement("defs",null,s.a.createElement("linearGradient",{id:"paint0_linear",x1:"0",y1:"0",x2:"28.733",y2:".773",gradientUnits:"userSpaceOnUse"},s.a.createElement("stop",{stopColor:"#99A2AD"}),s.a.createElement("stop",{offset:"1",stopColor:"#99A2AD"}))))},uc=["hint","className","children"],lc=function(e){var t=e.hint,n=e.className,r=e.children,i=ke()(e,uc),o=!!t,c={"ListItem--withHint":o};return s.a.createElement(bi,a()({},i,{className:palettePrefix(Object(Hr.classNames)(c,n))}),r,o&&s.a.createElement("div",{className:palettePrefix("ListItem--hint")},t))},dc=!1;function fc(){dc||(Object(dr.a)(new ur.a({id:"door_arrow_left_outline_24",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="door_arrow_left_outline_24"><path fill-rule="evenodd" clip-rule="evenodd" d="M18.754 20.366c-.763.407-1.512.534-3.082.534H13a.9.9 0 110-1.8h2.672c1.487 0 1.87-.128 2.233-.322.336-.18.594-.437.773-.773.194-.362.322-.746.322-2.233V8.228c0-1.487-.128-1.87-.322-2.233a1.847 1.847 0 00-.773-.774c-.362-.193-.746-.321-2.233-.321H13a.9.9 0 110-1.8h2.672c1.57 0 2.32.127 3.082.534.65.348 1.164.863 1.512 1.512.407.762.534 1.512.534 3.082v7.544c0 1.57-.127 2.32-.534 3.082a3.646 3.646 0 01-1.512 1.512zm-9.39-5.002l2.463-2.464H3.9a.9.9 0 110-1.8h7.927L9.364 8.636a.9.9 0 111.272-1.272l4 4a.9.9 0 010 1.272l-4 4a.9.9 0 11-1.272-1.272z" fill="currentColor" /></symbol>'})),dc=!0)}var pc=function(e){return Object(dr.b)((function(){fc()}),[]),s.a.createElement(fr.a,Object(lr.assign)({},e,{viewBox:"0 0 24 24",id:"door_arrow_left_outline_24",width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};pc.mountIcon=fc;var hc,mc=pc,vc=function(e){var t=e.requireAuthToJoin,n=void 0!==t&&t,r=e.onRequireAuthToJoinChanged,a=e.isWaitingHallBlockShown,i=void 0!==a&&a,o=e.isWaitingHallEnabled,u=void 0!==o&&o,l=e.onWaitingHallEnabledChanged,d=Object(c.useContext)(Pn).getLang,f=Object(c.useState)(!n),h=p()(f,2),m=h[0],v=h[1],g=Object(c.useState)(u),b=p()(g,2),_=b[0],y=b[1],E=!1,O=Object(c.useCallback)((function(){if(!E){E=!0;var e=!m;v(e),r&&r(!e)}}),[n]),w=!1,C=Object(c.useCallback)((function(){if(!w){w=!0;var e=!_;y(e),l&&l(e)}}),[u]);return s.a.createElement(di,null,i&&s.a.createElement(lc,{onClick:C,canBeHovered:!1,icon:s.a.createElement(_i,{icon:s.a.createElement(mc,{width:20,height:20}),color:mi.BLUE}),hint:d("calls_menu_waiting_hall_description"),selectable:!0,aside:s.a.createElement(cc,{onChange:C,checked:_})},d("calls_menu_waiting_hall_title")),s.a.createElement(bi,{border:!0,canBeHovered:!1,onClick:O,selectable:!0,icon:s.a.createElement(sc,null),aside:s.a.createElement(cc,{onChange:O,checked:m})},d("calls_management_link_allow_anonymous")))};!function(e){e[e.MAIN=0]="MAIN",e[e.CALL_LINK=1]="CALL_LINK",e[e.ADD_PARTICIPANTS=2]="ADD_PARTICIPANTS",e[e.WAITING_HALL=3]="WAITING_HALL"}(hc||(hc={}));var gc=function(e){var t,n,r=e.bridge,a=e.SDK,i=e.navigateToConvo,u=e.navigateToProfile,l=e.allowAddMembers,d=void 0!==l&&l,f=we((function(e){return e})),h=_e(),m=Object(c.useContext)(He).allowWaitingHall,v=Object(c.useState)(f.callData.callUrlLink||""),g=p()(v,2),b=g[0],_=g[1],y=f.managementView||hc.MAIN,E=Object(c.useState)(y),O=p()(E,2),w=O[0],C=O[1],S=Object(c.useState)(!1),A=p()(S,2),k=A[0],j=A[1],T=Object(c.useState)(!1),I=p()(T,2),P=I[0],D=I[1],N=Object(c.useState)(!1),x=p()(N,2),R=x[0],M=x[1],L=Object(c.useState)(!1),B=p()(L,2),F=B[0],H=B[1],V=Object(c.useState)(!1),U=p()(V,2),z=U[0],G=U[1],W=d||!(null===(t=f.callData.conversation)||void 0===t||!t.canAddMembers),q=null===(n=f.callData)||void 0===n?void 0:n.canFinishCall,K=s.a.useContext(Pn).getLang,Y=function(e){return e.conversationOptions.includes(We.ConversationOption.REQUIRE_AUTH_TO_JOIN)}(f),Z=Ye(f),Q=Object(c.useCallback)((function(){h({type:Se.qb,isOpen:!1})}),[]),J=Object(c.useCallback)((function(){C(hc.MAIN)}),[]),X=function(e){var t=f.callData.callId||"";return j(!0),Vo(h,t,e,Qe(f)?f.groupId:0).then((function(e){_(e),j(!1)})).catch((function(e){console.error(e),j(!1),h({type:Se.G,text:K("calls_get_url_link_error_text")})}))},$=Object(c.useCallback)((function(){C(hc.CALL_LINK),b||X(!1).catch((function(){C(hc.MAIN)}))}),[f.callData.callId,b]),ee=Object(c.useCallback)((function(){h({type:Se.xc,isLoaderVisible:!0});var e=[No(r,f,h)].concat(Ge(f.peer)?[xo(f,h,f.peer,f.callData.conversation)]:[]).concat(r.authorizedGroupId?[Ro(r,f,h)]:[]);return Promise.all(e).then((function(){h({type:Se.xc,isLoaderVisible:!1}),C(hc.ADD_PARTICIPANTS)})).catch((function(e){console.error(e),h({type:Se.xc,isLoaderVisible:!1})}))}),[f.peer,f.callData,f.friends,f.groupMembers]),te=Object(c.useCallback)((function(){h({type:Se.xc,isLoaderVisible:!0});var e=[bo(f,h)];return Promise.all(e).then((function(){h({type:Se.xc,isLoaderVisible:!1}),C(hc.WAITING_HALL)})).catch((function(e){console.error(e),h({type:Se.xc,isLoaderVisible:!1})}))}),[f.waitingHall]),ne=Object(c.useCallback)((function(){h({type:Se.Hc}),ac(0,f,h,K)}),[f.callData.callId,f.imHash]);Object(c.useEffect)((function(){y===hc.CALL_LINK&&$()}),[]),Object(c.useEffect)((function(){var e=an(f.participants[f.me]),t=e;M(e),H(t),G(m&&e)}),[f.participants[f.me]]);var re=Object(c.useCallback)((function(e){!function(e){Object(We.changeConversationOptions)(o()({},We.ConversationOption.REQUIRE_AUTH_TO_JOIN,e))}(e)}),[]),ae=Object(c.useCallback)((function(e){!function(e){Object(We.changeConversationOptions)(o()({},We.ConversationOption.WAITING_HALL,e))}(e)}),[]),ie=Object(c.useCallback)((function(){return D(!0)}),[]),oe=Object(c.useCallback)((function(){return D(!1)}),[]),ce=Object(c.useCallback)((function(){X(!0).catch((function(){C(hc.MAIN)}))}),[f.callData.callId,b]);return s.a.createElement(s.a.Fragment,null,w===hc.MAIN&&s.a.createElement(li,{title:K("calls_management_participants"),actionButtons:(q?[s.a.createElement(so,{onClick:ne,key:"forceCallFinish",appearance:"secondary"},K("calls_force_call_finish"))]:[]).concat([s.a.createElement(so,{onClick:a.hangup,key:"leave"},K("calls_leave_call"))]),onCloseModal:Q},s.a.createElement(Pi,{isLinkBlockShown:W,linkBlockTitle:K("calls_menu_link"),onLinkBlockClick:$,callUrlLink:b}),s.a.createElement(Eo,{SDK:a,onAddClick:ee,onShowMoreWaitingHall:te,navigateToProfile:u,navigateToConvo:i})),w===hc.CALL_LINK&&s.a.createElement(li,{title:K("calls_management_link"),hint:Y?K("calls_management_link_anonymous_disallowed_hint"):"",onCloseModal:Q,isWithBackButton:y!==hc.CALL_LINK,onBackClick:J,actionButtons:(F?[s.a.createElement(so,{key:"invalidate-link",appearance:"tertiary",onClick:ce},K("calls_link_invalidate"))]:[]).concat([s.a.createElement(Ei,{key:"copy-link",text:b},s.a.createElement(so,{className:palettePrefix("CallManagementModal__copyTextButton"),disabled:k,onClick:ie},K("calls_link_copy")))])},s.a.createElement(Bi,{link:b,isLinkLoading:k,isCopied:P,hideCopiedText:oe}),R&&s.a.createElement(vc,{onRequireAuthToJoinChanged:re,requireAuthToJoin:Y,isWaitingHallBlockShown:z,onWaitingHallEnabledChanged:ae,isWaitingHallEnabled:Z})),w===hc.ADD_PARTICIPANTS&&s.a.createElement(nc,{bridge:r,SDK:a,isWithBackButton:!0,onBackClick:J}),w===hc.WAITING_HALL&&s.a.createElement(_o,{isModal:!0,isWithBackButton:!0,onBackClick:J,navigateToProfile:u}))};function bc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bc(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var yc={acc:{},timer:0,tasks:0};function Ec(e,t,n,r){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,a=arguments.length>4?arguments[4]:void 0;a.acc[e]=a.acc[e]&&"object"===Ln()(a.acc[e])?_c(_c({},a.acc[e]),t):t,a.tasks++,a.timer&&clearTimeout(a.timer);a.timer=window.setTimeout((function(){a.tasks>0&&(n(a.acc),a.acc={},a.tasks=0),a.timer=0}),r)}(t,n,(function(t){e({type:Se.Mc,data:t})}),r,yc)}var Oc=!1;function wc(){Oc||(Object(dr.a)(new ur.a({id:"cancel_outline_12",viewBox:"0 0 12 12",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" id="cancel_outline_12"><path clip-rule="evenodd" d="M9.03 2.97a.75.75 0 010 1.06L7.06 6l1.97 1.97a.75.75 0 01-1.06 1.06L6 7.06 4.03 9.03a.75.75 0 01-1.06-1.06L4.94 6 2.97 4.03a.75.75 0 011.06-1.06L6 4.94l1.97-1.97a.75.75 0 011.06 0z" fill="currentColor" fill-rule="evenodd" /></symbol>'})),Oc=!0)}var Cc=function(e){return Object(dr.b)((function(){wc()}),[]),s.a.createElement(fr.a,Object(lr.assign)({},e,{viewBox:"0 0 12 12",id:"cancel_outline_12",width:isNaN(e.width)?12:+e.width,height:isNaN(e.height)?12:+e.height}))};Cc.mountIcon=wc;var Sc=Cc,Ac=function(e){var t=e.children,n=e.className,r=Object(d.c)("NotificationWithButton",n);return s.a.createElement("div",{className:palettePrefix(r)},t)},kc=n(50),jc=function(e,t){var n=document.createElement("a");n.download=t,n.href=e,document.body.appendChild(n),n.click(),n.remove()};function Tc(){var e=null;return kc.d.OS===kc.c.MAC?e={url:Se.A[kc.c.MAC],filename:Se.C[kc.c.MAC]}:kc.d.OS===kc.c.WINDOWS?e={url:Se.A[kc.c.WINDOWS],filename:Se.C[kc.c.WINDOWS]}:kc.d.OS===kc.c.LINUX&&(e={url:Se.A[kc.c.LINUX].deb[kc.a.X64],filename:Se.C[kc.c.LINUX].deb[kc.a.X64]}),e}var Ic=function(e){var t=a()({},e);return s.a.createElement("svg",a()({width:"56",height:"56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),s.a.createElement("path",{d:"M36.587 0C52.267 0 56 3.733 56 19.413v17.174C56 52.267 52.267 56 36.587 56H19.413C3.733 56 0 52.267 0 36.587V19.413C0 3.733 3.733 0 19.413 0h17.174Z",fill:"url(#a)"}),s.a.createElement("path",{d:"M55.75 42.571a32.585 32.585 0 0 1-11.884 2.23 32.514 32.514 0 0 1-17.04-4.791 1.491 1.491 0 0 0-1.384-.087c-3.084 1.37-6.552 2.091-10.434 2.403-1.071.086-1.793-1.048-1.333-2.02 1.533-3.243 2.537-6.178 3.148-9.098a1.402 1.402 0 0 0-.212-1.06 32.514 32.514 0 0 1-5.412-18.015c0-4.192.79-8.2 2.23-11.883C15.196.075 17.183 0 19.411 0h17.174c15.68 0 19.413 3.733 19.413 19.413v17.174c0 2.228-.075 4.215-.25 5.984Z",fill:"url(#b)"}),s.a.createElement("path",{d:"M43.867 49.467c3.768 0 7.411-.56 10.847-1.602.502-1.499.835-3.251 1.036-5.294A32.583 32.583 0 0 1 43.867 44.8a32.514 32.514 0 0 1-17.04-4.79 1.491 1.491 0 0 0-1.384-.088c-2.257 1.004-4.72 1.659-7.4 2.06l-.021.003c-.203.03-.406.06-.611.087-.783.104-1.583.188-2.402.254-1.072.086-1.793-1.048-1.334-2.02a50.648 50.648 0 0 0 1.16-2.643l.003-.006c.9-2.23 1.545-4.344 1.986-6.45a1.403 1.403 0 0 0-.212-1.06A32.515 32.515 0 0 1 11.2 12.134c0-4.192.79-8.2 2.229-11.883-2.043.201-3.795.534-5.294 1.036a37.33 37.33 0 0 0-1.602 10.847 37.18 37.18 0 0 0 5.427 19.394c-.54 2.118-1.34 4.322-2.504 6.785-1.847 3.908.944 9.065 5.926 8.665 3.642-.292 7.143-.93 10.424-2.163a37.185 37.185 0 0 0 18.06 4.653Z",fill:"#fff"}),s.a.createElement("path",{d:"M28.902 11.332c-.723-1.445-1.974-2.684-3.48-2.507a3.524 3.524 0 0 0-2.14 1.042c-1.554 1.554-1.803 4.285-.836 7.47.964 3.175 3.123 6.749 6.296 9.921 3.172 3.172 6.746 5.332 9.92 6.296 3.186.967 5.917.718 7.471-.836a3.525 3.525 0 0 0 1.042-2.14c.177-1.506-1.062-2.757-2.507-3.48l-1.621-.81a3.967 3.967 0 0 0-5.191 1.532.585.585 0 0 1-.829.192 32.7 32.7 0 0 1-4.963-4.076 32.696 32.696 0 0 1-4.076-4.963.585.585 0 0 1 .192-.829 3.967 3.967 0 0 0 1.533-5.19l-.81-1.622Z",fill:"#fff"}),s.a.createElement("defs",null,s.a.createElement("linearGradient",{id:"a",x1:"0",y1:"0",x2:"56",y2:"56",gradientUnits:"userSpaceOnUse"},s.a.createElement("stop",{offset:".208",stopColor:"#2B72F6"}),s.a.createElement("stop",{offset:".599",stopColor:"#1657D0"}),s.a.createElement("stop",{offset:"1",stopColor:"#0040B8"})),s.a.createElement("linearGradient",{id:"b",x1:"15.635",y1:"0",x2:"55.999",y2:"40.364",gradientUnits:"userSpaceOnUse"},s.a.createElement("stop",{offset:".214",stopColor:"#8FC3FF"}),s.a.createElement("stop",{offset:".771",stopColor:"#3E92F2"}),s.a.createElement("stop",{offset:"1",stopColor:"#1E7EED"}))))},Pc=function(e){var t=a()({},e);return s.a.createElement("svg",a()({width:"12",height:"13",viewBox:"0 0 12 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),s.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.21967 2.96967C4.51256 2.67678 4.98744 2.67678 5.28033 2.96967L8.28033 5.96967C8.57322 6.26256 8.57322 6.73744 8.28033 7.03033L5.28033 10.0303C4.98744 10.3232 4.51256 10.3232 4.21967 10.0303C3.92678 9.73744 3.92678 9.26256 4.21967 8.96967L6.68934 6.5L4.21967 4.03033C3.92678 3.73744 3.92678 3.26256 4.21967 2.96967Z",fill:"white",fillOpacity:"0.64"}))},Dc=function(e){var t=e.onClose,n=s.a.useContext(Pn).getLang,r=Tc(),a=kc.d.OS===kc.c.MAC?"macOS":kc.d.OS===kc.c.WINDOWS?"Windows":null,i=a?n("calls_notification_native_app_button_for").replace("{name}",a):n("calls_notification_native_app_button");return s.a.createElement("div",{className:palettePrefix("NotificationDesktopApp")},s.a.createElement(Sc,{className:palettePrefix("NotificationDesktopApp--close"),onClick:t,width:16,height:16}),s.a.createElement(Ic,{className:palettePrefix("NotificationDesktopApp--icon")}),s.a.createElement("span",{className:palettePrefix("NotificationDesktopApp--text")},n("calls_notification_native_app_text")),null!==a&&s.a.createElement(so,{onClick:function(){r&&jc(r.url,r.filename),t()},appearance:"overlay_primary",className:palettePrefix("NotificationDesktopApp--button")},i," ",s.a.createElement(Pc,{className:palettePrefix("NotificationDesktopApp--angleIcon")})),null===a&&s.a.createElement("a",{href:Se.B,rel:"noopener noreferrer",target:"_blank",className:palettePrefix("NotificationDesktopApp--button")},i," ",s.a.createElement(Pc,{className:palettePrefix("NotificationDesktopApp--angleIcon")})))},Nc=function(){var e,t,n,r=we((function(e){return e})),a=_e(),i=s.a.useContext(Pn),o=i.getLang,u=i.langNumeric,l=Object(c.useContext)(He).desktopAppNotification,d=Object(c.useCallback)((function(e){var t,n=null===(t=r.waitingHall)||void 0===t?void 0:t.members.get(e);n&&a({type:Se.Fc,data:{type:Se.kb.WAITING_HALL,participant:n}})}),[null===(e=r.waitingHall)||void 0===e?void 0:e.members]),f=Object(c.useCallback)((function(){var e=[bo(r,a)];return Promise.all(e).then((function(){a({type:Se.qb,isOpen:!0,managementView:hc.WAITING_HALL})}))}),[r.waitingHall]),p=Object(c.useCallback)((function(e){r.waitingHall&&mo(e,r.waitingHall,a)}),[null===(t=r.waitingHall)||void 0===t?void 0:t.members]),h=Object(c.useCallback)((function(){!function(e,t){e&&(e.hasNew=!1,t({type:Se.vc,data:e}))}(r.waitingHall,a)}),[null===(n=r.waitingHall)||void 0===n?void 0:n.hasNew]);if(r.waitingHall&&0!==r.waitingHall.members.size&&r.waitingHall.hasNew){var m=Array.from(r.waitingHall.members.values()),v=o("calls_notification_users_in_waiting_hall_notification",r.waitingHall.totalCount).replace("{names}",kt(m,m.slice(0,3),(function(e){return e.shortName||e.name}),o,u,r.waitingHall.totalCount)),g=null;if(1===m.length){var b=m[0];g=s.a.createElement(s.a.Fragment,null,s.a.createElement(so,{onClick:function(){return p(b.peerId)},appearance:"overlay_primary"},o("calls_waiting_hall_join")),s.a.createElement(so,{onClick:function(){return d(b.peerId)},appearance:"overlay_secondary"},o("calls_waiting_hall_forbid")))}else g=s.a.createElement(so,{onClick:function(){return f()},appearance:"overlay_primary"},o("calls_waiting_show_participants"));return s.a.createElement(Ac,null,s.a.createElement("div",null,s.a.createElement(Sc,{className:palettePrefix("NotificationWithButton--close"),onClick:h}),s.a.createElement("span",null,v),s.a.createElement("div",{className:palettePrefix("NotificationWithButton--buttons")},g)))}if(l&&r.shouldShowDesktopAppNotification){return s.a.createElement(Dc,{onClose:function(){a({type:Se.pc,data:!1})}})}return null},xc=!1,Rc=!0;function Mc(e){Rc=e}function Lc(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(Rc)if(e){var r=!(!t||!t.isAudioEnabled);n&&(xc=r),r&&Object(We.toggleLocalAudio)(!1)}else xc&&Object(We.toggleLocalAudio)(!0);else Mc(!0)}var Bc,Fc=!1;function Hc(e,t,n,r){var a=e.keyCode,i=e.type,o=e.repeat,c="keydown"===i;if(32===a){if(e&&e.target){if(["FCComposer__input","FCSearch__input","fc_editable","fc_clist_filter_text"].some((function(t){return e.target.classList.contains(t)})))return}if(e.preventDefault(),o)return;if(Fc)return clearTimeout(Bc),void(Fc=!1);Fc=!0,Bc=setTimeout((function(){(function(e,t,n,r){var a=function(){var t,a=(null===(t=r.notification)||void 0===t?void 0:t.type)===Se.wb.PUSH_TO_TALK,i=!1;if(e&&!a)i=!0;else if(e&&a){var o;i=(null===(o=r.notification)||void 0===o?void 0:o.data)!==Xe(r)}else!e&&a&&(i=!0);if(i){var c=null;e&&(c={type:Se.wb.PUSH_TO_TALK,timer:0,data:Xe(r)}),n({type:Se.d,notification:c})}};return e&&t||!e&&!t?Promise.resolve().then(a):Object(We.toggleLocalAudio)(e).then(a)})(c,t,n,r).then((function(){Fc=!1}))}),c?200:100)}}var Vc=!1;function Uc(){Vc||(Object(dr.a)(new ur.a({id:"microphone_slash_16",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="microphone_slash_16"><path d="M5.498 7.06v.44a2.501 2.501 0 002.909 2.467l1.2 1.198a4.005 4.005 0 01-5.521-2.822.75.75 0 00-1.47.314A5.508 5.508 0 007.25 12.95v1.301a.75.75 0 001.502 0v-1.3a5.473 5.473 0 001.972-.669l1.25 1.25a.751.751 0 001.062-1.061L3.88 3.32a.75.75 0 10-1.06 1.06l2.678 2.68zm6.356 1.529c-.089.314-.03.66.2.89.37.37.993.284 1.16-.211a5.44 5.44 0 00.17-.61.75.75 0 10-1.469-.315 3.943 3.943 0 01-.061.246zM6.303 2.662c-.332.307-.254.818.066 1.138l3.428 3.424a.4.4 0 00.683-.279l.022-2.445a2.501 2.501 0 00-4.199-1.838z" fill="currentColor" /></symbol>'})),Vc=!0)}var zc=function(e){return Object(dr.b)((function(){Uc()}),[]),s.a.createElement(fr.a,Object(lr.assign)({},e,{viewBox:"0 0 16 16",id:"microphone_slash_16",width:isNaN(e.width)?16:+e.width,height:isNaN(e.height)?16:+e.height}))};zc.mountIcon=Uc;var Gc=zc,Wc=!1;function qc(){Wc||(Object(dr.a)(new ur.a({id:"pin_dot_16",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="pin_dot_16"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.25 4a1.25 1.25 0 100-2.5 1.25 1.25 0 000 2.5zm7.642 1.77l-3.657-3.664c-.231-.232-.634-.057-.634.263v.526a.896.896 0 01-.263.634L7.623 5.244a.895.895 0 01-.633.262H3.995c-.565 0-.847.71-.455 1.102l2.29 2.29-3.569 3.574a.894.894 0 001.263 1.264l3.57-3.572 2.301 2.301c.402.402 1.101.098 1.101-.456V9.013a.9.9 0 01.262-.633l1.715-1.715a.895.895 0 01.633-.263h.523c.327 0 .488-.407.263-.633z" fill="currentColor" /></symbol>'})),Wc=!0)}var Kc=function(e){return Object(dr.b)((function(){qc()}),[]),s.a.createElement(fr.a,Object(lr.assign)({},e,{viewBox:"0 0 16 16",id:"pin_dot_16",width:isNaN(e.width)?16:+e.width,height:isNaN(e.height)?16:+e.height}))};Kc.mountIcon=qc;var Yc=Kc,Zc=!1;function Qc(){Zc||(Object(dr.a)(new ur.a({id:"pin_16",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="pin_16"><path d="M10.235 2.106l3.657 3.663c.225.226.064.633-.263.633h-.523a.895.895 0 00-.633.263L10.758 8.38a.896.896 0 00-.262.633v2.996c0 .554-.7.858-1.1.456l-2.301-2.3-3.57 3.57a.893.893 0 11-1.264-1.263L5.83 8.898l-2.29-2.29c-.391-.392-.109-1.102.456-1.102H6.99a.895.895 0 00.633-.262L9.338 3.53a.896.896 0 00.263-.634V2.37c0-.32.403-.495.634-.263z" fill="currentColor" /></symbol>'})),Zc=!0)}var Jc=function(e){return Object(dr.b)((function(){Qc()}),[]),s.a.createElement(fr.a,Object(lr.assign)({},e,{viewBox:"0 0 16 16",id:"pin_16",width:isNaN(e.width)?16:+e.width,height:isNaN(e.height)?16:+e.height}))};Jc.mountIcon=Qc;var Xc=Jc,$c=Object(c.memo)((function(e){var t,n,r,a,i,o=e.orator,u=e.me,l=e.isPinned,d=e.isPinnedByAdmin,f=e.isPinnedByShareScreen,p=e.isUnpinAllowed,h=e.onTooltipChange,m=e.onUnpin,v=e.tooltips,g=Object(c.useContext)(Pn).getLang,b=d||f||l,_=Object(c.useCallback)((function(){h("oratorPin",!1),m()}),[m]),y=Object(c.useCallback)((function(){return h("oratorPin",!0)}),[]),E=Object(c.useCallback)((function(){return h("oratorPin",!1)}),[]),O=(o.wasConnected||o.peerId===u)&&!(null!==(t=o.mediaSettings)&&void 0!==t&&t.isAudioEnabled),w=null===(n=o.mediaSettings)||void 0===n?void 0:n.isScreenSharingEnabled,C=o.shortName||o.name,S=o.shortNameGen||o.shortName||o.name,A=((null===(r=o.mediaSettings)||void 0===r?void 0:r.isAudioEnabled)||(null===(a=o.mediaSettings)||void 0===a?void 0:a.isScreenSharingEnabled)||(null===(i=o.mediaSettings)||void 0===i?void 0:i.isVideoEnabled))&&o.networkStatus<.6,k=s.a.createElement(s.a.Fragment,null,A&&s.a.createElement(vr,{fill:o.networkStatus<=.3?"#ff5c5c":"#FECE00"}),w&&s.a.createElement("span",{className:palettePrefix("OratorTitle__additionInfo")},g("calls_orator_screen_sharing")),w?S:C,O&&s.a.createElement(Gc,null),d&&s.a.createElement(Yc,null),!d&&(f||l)&&s.a.createElement(Xc,null));return b?s.a.createElement(Fr,{position:"b",align:"center",content:g(d&&p?"calls_hint_admin_pin_for_admin":d?"calls_hint_admin_pin_for_user":"calls_hint_user_pin"),open:v.oratorPin,delay:300,onOpen:y,onClose:E},s.a.createElement("button",{className:palettePrefix("OratorTitle OratorTitle--button"),onClick:_,disabled:!p},k)):s.a.createElement("div",{className:palettePrefix("OratorTitle")},k)})),es=Object(c.memo)((function(e){var t=e.id,n=e.isInfoShown,r=e.isPinned,a=e.isPinnedByAdmin,i=e.isHandRaised,o=void 0!==i&&i,u=e.photo,l=e.hasAudio,f=e.isMe,p=void 0!==f&&f,h=e.name,m=e.letter,v=e.wasConnected,g=void 0===v||v,b=e.onClickParticipant,_=e.onDblClickParticipant,y=Object(c.useContext)(He).anonymPhoto,E=s.a.useRef(null),O=Lt(t),w=Object(d.c)("Participant","Participant--withAnimation",{"Participant--isPinned":r}),C=Object(c.useCallback)((function(e){b&&b(e,Number(t))}),[b,t]),S=Object(c.useCallback)((function(e){_&&_(e,t)}),[_,t]);return s.a.createElement("article",{ref:E,className:palettePrefix(w),onClick:C,onDoubleClick:S,"participant-id":String(t)},s.a.createElement(Re,{id:t,className:palettePrefix("Participant__main")},s.a.createElement(ln,{id:t,photo:!y&&O?"":u,alt:h||"",letter:m,className:palettePrefix(n?"Participant__offsetCard":"")})),o&&s.a.createElement("div",{className:palettePrefix("Participant__handIndicator")},s.a.createElement(Kn,{className:palettePrefix("Participant__handIcon")})),n&&s.a.createElement("footer",{className:palettePrefix("Participant__footer")},s.a.createElement("span",{className:palettePrefix("Participant__name")},h),(g||p)&&!l&&s.a.createElement("span",{className:palettePrefix("Participant__statusIcon Participant__statusIcon--mic")})),!a&&r&&s.a.createElement("header",{className:palettePrefix("Participant__header")},s.a.createElement("div",{className:palettePrefix("Participant__pin")})),a&&s.a.createElement("header",{className:palettePrefix("Participant__header")},s.a.createElement(ir,{className:palettePrefix("Participant__icon")})))}));function ts(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ns(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ns(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){throw e})),f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){c=!0,i=e})),f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function ns(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function as(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rs(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function is(e){var t,n,r,a,i,u,l,f=e.SDK,h=e.navigateToConvo,m=e.navigateToProfile,v=e.onHandCountChanged,g=e.isVirtualBackgroundSupported,b=we((function(e){return e})),_=_e(),y=Object(c.useContext)(Pn).getLang,E=Object(c.useContext)(He),O=E.isModalView,w=E.debugLog,C=E.enableScreenTrack,S=E.enableProducerScreenTrack,A=E.allowPushToTalk,k=E.enableVirtualBackground,j=b.peer,T=Object(c.useMemo)((function(){var e,t,n,r;return qe(j)||(null===(e=b.participants[b.me])||void 0===e||null===(t=e.mediaSettings)||void 0===t?void 0:t.isScreenSharingEnabled)||(null===(n=b.participants[j])||void 0===n||null===(r=n.mediaSettings)||void 0===r?void 0:r.isScreenSharingEnabled)}),[b.peer,b.participants]),I=T?b.callData.conversation:b.participants[j],P=b.participants[b.me],D=P.mediaSettings||{isAudioEnabled:!1,isVideoEnabled:!1,isScreenSharingEnabled:!1},N=P.permissions,x=Object(c.useMemo)((function(){return Kt(b)}),[b.participants]),R=x>1,M=R||sn(P),L=function(e){return Yt(e).filter((function(e){return!Lt(e.peerId)})).length}(b),B=T&&($t(P)||en(P))&&L>1&&1===function(e){return Yt(e).filter((function(e){return $t(e)||en(e)})).length}(b),F=T||x>2,H=F&&M&&!b.isOratorMode,V=F&&M&&b.isOratorMode,U=null!==b.adminPinnedParticipant,z=!U&&null!==b.pinnedParticipant,G=!z&&null!==b.screenSharingPinnedParticipant,W=b.uiMode===Se.Ic.FULLSCREEN,q=Object(c.useMemo)((function(){return f.browser.isScreenCapturingSupported()}),[]),K=(null===(t=b.callData)||void 0===t?void 0:t.canFinishCall)||T&&0===j&&an(P),Y=!!b.translation.deferredId&&!b.translation.isOn,Z=Object(c.useState)(!1),Q=p()(Z,2),J=Q[0],X=Q[1],$=Object(c.useState)(!1),ee=p()($,2),te=ee[0],ne=ee[1],re=Object(c.useState)(0),ae=p()(re,2),ie=ae[0],oe=ae[1],ce=Object(c.useMemo)((function(){return qt(b)}),[b.participants,b.me,b.groupId,b.meGroup,b.adminPinnedParticipant,b.screenSharingPinnedParticipant,b.pinnedParticipant,b.speakers,b.gridScrollPosition,b.gridScrollFirstVisible,b.oratorScrollPosition,b.oratorScrollFirstVisible,b.isOratorMode,b.uiMode]),se=Object(c.useMemo)((function(){return qt(b,!0)}),[b.participants,b.me,b.groupId,b.meGroup,b.adminPinnedParticipant,b.screenSharingPinnedParticipant,b.pinnedParticipant]),ue=Object(c.useCallback)((function(e,t){var n=b.pinnedParticipant===t?null:t;b.screenSharingPinnedParticipant===t&&(n=null),b.screenSharingPinnedParticipant&&_({type:Se.oc,screenSharingPinnedParticipant:null}),_({type:Se.kc,pinnedParticipant:n})}),[b.pinnedParticipant,b.screenSharingPinnedParticipant]),le=Object(c.useCallback)((function(e,t){b.isOratorMode||_({type:Se.Dc,isOratorMode:!0}),b.pinnedParticipant!==t&&_({type:Se.kc,pinnedParticipant:t})}),[b.isOratorMode,b.pinnedParticipant]),de=Object(c.useMemo)((function(){return ce.map((function(e){var t,n,r,a,i,o,c,u,l,d,p=e.mediaSettings||{},v=p.isAudioEnabled,g=p.isScreenSharingEnabled,E=e.peerId===b.me,O=E?y("calls_own_label"):e.shortName?e.shortName:e.name;if(!e.visible)return s.a.createElement(es,{id:e.peerId,key:e.peerId,isInfoShown:!0,isMe:E,isHandRaised:e.wasConnected&&(null===(c=e.statusData)||void 0===c||null===(u=c.hand)||void 0===u?void 0:u.state),hasAudio:!!v,photo:e.photo,name:O,letter:null!==(l=null==e||null===(d=e.name)||void 0===d?void 0:d[0])&&void 0!==l?l:"",wasConnected:e.wasConnected,onClickParticipant:ue,isPinned:b.isOratorMode&&(Number(e.peerId)===Number(b.pinnedParticipant)||Number(e.peerId)===Number(b.screenSharingPinnedParticipant)),isPinnedByAdmin:b.isOratorMode&&e.peerId===Number(b.adminPinnedParticipant)});var w=b.isOratorMode&&(C||S),A=cn(e,w&&(null===(t=e.mediaSettings)||void 0===t?void 0:t.isVideoEnabled)),k=!(w&&null!==(n=e.mediaSettings)&&void 0!==n&&n.isVideoEnabled)&&g,j=sn(e),T=b.localStatus===We.ParticipantStatus.CONNECTED?e.status:We.ParticipantStatus.CONNECTED,I=Vt(b,f,_,e,!0,y,h,m,!1);return s.a.createElement(Cr,{id:e.peerId,key:e.peerId,isVisible:e.visible,isInfoShown:!0,isMe:E,isHandRaised:null===(r=e.statusData)||void 0===r||null===(a=r.hand)||void 0===a?void 0:a.state,hasVideo:!!j,hasAudio:!!v,isSharingScreen:!!k,isSpeaking:v&&b.speakers[e.peerId]&&e.visible,stream:A,photo:e.photo,name:O,letter:null!==(i=null==e||null===(o=e.name)||void 0===o?void 0:o[0])&&void 0!==i?i:"",status:T,allowContain:!1,wasConnected:e.wasConnected,networkStatus:e.networkStatus,onClickParticipant:b.isOratorMode?ue:void 0,onDblClickParticipant:b.isOratorMode?void 0:le,actions:I,isPinned:b.isOratorMode&&(Number(e.peerId)===Number(b.pinnedParticipant)||Number(e.peerId)===Number(b.screenSharingPinnedParticipant)),isPinnedByAdmin:b.isOratorMode&&e.peerId===Number(b.adminPinnedParticipant)})}))}),[ce,se]),fe=function(e){return _({type:Se.k,mode:e})},pe=function(){na(f,[We.MediaOption.AUDIO,We.MediaOption.VIDEO]).then((function(){_({type:Se.Hc,data:Se.zb})}))},he=function(){_({type:Se.Hc,data:Se.Bb})},me=Object(c.useCallback)((function(){O&&(b.uiMode===Se.Ic.FULLSCREEN?(ct(.3,null).then((function(){fe(Se.Ic.COLLAPSED)})),fe(Se.Ic.DEFAULT)):fe(Se.Ic.COLLAPSED))}),[b.uiMode]),ve=Object(c.useCallback)((function(){_({type:Se.Dc,isOratorMode:!b.isOratorMode})}),[b.isOratorMode]),ge=Object(c.useCallback)((function(){_({type:Se.Ec,isShownParticipantsAside:!b.isShownParticipantsAside})}),[b.isShownParticipantsAside]),be=Object(c.useCallback)((function(){_({type:Se.qb,isOpen:!0})}),[]),ye=Object(c.useCallback)((function(){_({type:Se.qb,isOpen:!0,managementView:hc.CALL_LINK})}),[]),Ee=Object(c.useCallback)((function(){if(!te){var e=!D.isVideoEnabled||D.isScreenSharingEnabled&&!C;(e?na(f,[We.MediaOption.VIDEO]):Promise.resolve()).then((function(){ne(!0),C||D.isScreenSharingEnabled&&f.captureScreen(!1),f.toggleLocalVideo(e).finally((function(){ne(!1)}))})),ot.logEvent({call_event_type:e?Se.p.VIDEO_ENABLED:Se.p.VIDEO_DISABLED,session_id:b.callData.callId,peer_id:b.peer,is_group_call:qe(b.peer),reason:e?void 0:"manual"})}}),[D,te]),Oe=Object(c.useCallback)((function(){f.captureScreen(!D.isScreenSharingEnabled).catch((function(e){var t=Object(kc.e)().name;Se.sb.SCREEN_PERMISSION==e&&(null==t?void 0:t.toLowerCase())!==kc.b.FIREFOX||_({type:Se.G,text:y("calls_error_disabled_screen_sharing")})})),ot.logEvent({call_event_type:D.isScreenSharingEnabled?Se.p.SCREEN_SHARING_STOPPED:Se.p.SCREEN_SHARING_STARTED,session_id:b.callData.callId,peer_id:b.peer,is_group_call:qe(b.peer)})}),[D.isScreenSharingEnabled,b.screenSharers,b.callData.callId,b.peer]),Ce=Object(c.useCallback)((function(){me(),h(b.peer)}),[b.peer,b.uiMode]),Ae=Object(c.useCallback)((function(){if(!J){var e=!D.isAudioEnabled;(e?na(f,[We.MediaOption.AUDIO]):Promise.resolve()).then((function(){var t;X(!0),(null===(t=b.notification)||void 0===t?void 0:t.type)===Se.wb.SPEAKING_ON_MUTE&&_({type:Se.d,notification:null}),f.toggleLocalAudio(e).finally((function(){X(!1)}))}))}}),[D,J]),ke=Object(c.useCallback)((function(){var e,t,n,r,a=!(null!==(e=P.statusData)&&void 0!==e&&null!==(t=e.hand)&&void 0!==t&&t.state);f.changeParticipantState({hand:a?Se.zc.RAISED:Se.zc.LOWERED}),_({type:Se.j,participantId:P.peerId,data:as(as({},P.statusData),{},{hand:{state:!(null!==(n=P.statusData)&&void 0!==n&&null!==(r=n.hand)&&void 0!==r&&r.state),ts:Date.now()}})}),ot.logEvent({call_event_type:a?Se.p.HAND_RAISED:Se.p.HAND_LOWERED,session_id:b.callData.callId,peer_id:b.peer,is_group_call:qe(b.peer)})}),[null===(n=P.statusData)||void 0===n||null===(r=n.hand)||void 0===r?void 0:r.state]),je=Object(c.useCallback)((function(){_({type:Se.Hc,data:Se.yb})}),[]),Te=Object(c.useCallback)((function(){_({type:Se.Hc,data:Se.Ab})}),[]),Ie=Object(c.useCallback)((function(){f.hangup(),ot.logEvent({call_event_type:Se.p.CALL_DECLINED_OR_HANGED_LOCALLY,session_id:b.callData.callId,peer_id:b.peer,is_group_call:qe(b.peer),reason:"none",group_call_users_count:x})}),[b.callData.callId,b.peer,x]),Pe=Object(c.useCallback)((function(){_({type:Se.k,mode:W?Se.Ic.DEFAULT:Se.Ic.FULLSCREEN}),_({type:Se.sc,tooltips:null})}),[b.uiMode]),De=Object(c.useCallback)((function(e,t){_({type:Se.sc,tooltips:o()({},e,t)})}),[]),Ne=Object(c.useCallback)((function(){_({type:Se.sc,tooltips:null})}),[]);Object(c.useEffect)((function(){Y&&De("streaming",!0)}),[Y]);Object(c.useEffect)((function(){b.isOratorMode||function(e){for(var t,n=(null===(t=document.querySelectorAll('[data-calls-id="grid-item"]')[0])||void 0===t?void 0:t.offsetWidth)||1/0,r=6*Math.floor(e/n),a=0;a<se.length;a++){var i=a>=r&&a<r+30;se[a].visible!==i&&Ec(_,se[a].peerId,{visible:i})}}(b.gridScrollPosition)}),[b.isOratorMode,b.uiMode,b.gridScrollPosition,se]),Object(c.useEffect)((function(){b.isOratorMode&&function(e){for(var t,n=(null===(t=document.querySelectorAll('[data-calls-id="content"]')[0])||void 0===t?void 0:t.offsetHeight)||0,r=Math.floor(e/148)-1,a=Math.min(b.config.videoSlotsCount,n/148+3),i=0;i<se.length;i++){var o=i>=r&&i<r+a;se[i].visible!==o&&Ec(_,se[i].peerId,{visible:o})}}(b.oratorScrollPosition)}),[b.isOratorMode,b.uiMode,b.oratorScrollPosition,se]);var xe=Object(c.useCallback)(Object(d.e)((function(e){var t,n=(null===(t=document.querySelectorAll('[data-calls-id="grid-item"]')[0])||void 0===t?void 0:t.offsetWidth)||1/0,r=6*Math.floor(e/n);_({type:Se.dc,position:e,firstVisible:r})}),200),[]),Re=Object(c.useCallback)(Object(d.D)((function(e){var t,n=document.querySelectorAll('[data-calls-id="participant"]')[0],r=n?n.offsetWidth+8:1/0,a=(null===(t=document.querySelectorAll('[data-calls-id="content"]')[0])||void 0===t?void 0:t.offsetHeight)||0,i=Math.floor(e/r)-1,o=Math.min(b.config.videoSlotsCount,a/r+3);_({type:Se.jc,position:e,firstVisible:i,numberOfVisible:o})}),100),[b.config]),Me=Object(c.useMemo)((function(){var e,t=[{text:y("calls_call_menu_settings"),key:"settings",onClick:pe,disabled:!1}];b.config.streaming&&!Lt(b.me)&&t.push({text:y("calls_call_menu_translation"),key:"translation",onClick:he,disabled:!(null===(e=b.translation)||void 0===e||!e.isOn)&&Ja(b)});tn(P)&&T&&t.push({text:y("calls_call_menu_mute_audio_video_all"),key:"muteAll",onClick:function(){_({type:Se.Gc,data:{mode:Se.Jb.ALL}})}}),tn(P)&&T&&R&&t.push({text:y("calls_call_menu_enable_media_request"),key:"unmuteRequest",onClick:function(){f.unmuteRequest(void 0,[We.MediaOption.AUDIO,We.MediaOption.VIDEO,We.MediaOption.SCREEN_SHARING]).catch(console.log),ot.logEvent({call_event_type:Se.p.ASK_ALL_TO_UNMUTE,session_id:b.callData.callId,peer_id:b.peer,is_group_call:qe(b.peer)})}});return w&&t.push({text:y("calls_call_menu_debug"),key:"debugLog",onClick:function(){window.__VKCallsSDKLogs__()},disabled:!1}),k&&g&&(t.push({separator:!0}),t.push({text:y("calls_virtual_background"),key:Se.Ib,onClick:function(){_({type:Se.Hc,data:Se.Ib})}}),t.push({separator:!0})),t}),[b.config.streaming,b.me,null===(a=b.translation)||void 0===a?void 0:a.isOn,b.participants[b.me],b.conversationOptions]);Object(c.useEffect)((function(){return function(){_({type:Se.sc,tooltips:null})}}),[]);var Le=Object(c.useCallback)((function(){U&&Xt(P)?(f.pinParticipant(b.adminPinnedParticipant,!0).then((function(){_({type:Se.Yb,data:null})})).catch(console.log),ot.logEvent({call_event_type:Se.p.ADMIN_UNPIN,session_id:b.callData.callId,peer_id:b.peer,is_group_call:qe(b.peer)})):(_({type:Se.oc,screenSharingPinnedParticipant:null}),_({type:Se.kc,pinnedParticipant:null}))}),[b.adminPinnedParticipant,b.participants[b.me].roles,b.peer,b.callData.callId]),Be=Object(c.useCallback)((function(e){N.audio>0&&Hc(e,D.isAudioEnabled,_,b)}),[N.audio,D.isAudioEnabled,b.notification]);Object(c.useEffect)((function(){A&&N.audio>0&&Lc(b.pushToTalkEnabled,D,!0)}),[]),Object(c.useEffect)((function(){return A&&!function(e){return e.uiMode===Se.Ic.COLLAPSED}(b)&&b.pushToTalkEnabled?(e=Be,window.addEventListener("keydown",e),window.addEventListener("keyup",e),function(){!function(e){window.removeEventListener("keydown",e),window.removeEventListener("keyup",e)}(Be)}):function(){};var e}),[b.uiMode,b.pushToTalkEnabled,Be]);var Fe=Object(c.useMemo)((function(){var e;return s.a.createElement(pa,{dispatch:_,notification:b.notification,participant:b.participants[null===(e=b.notification)||void 0===e?void 0:e.data]})}),[b.notification,b.participants[null===(i=b.notification)||void 0===i?void 0:i.data]]),Ve=Object(c.useMemo)((function(){return s.a.createElement(Nc,null)}),[b.waitingHall,b.shouldShowDesktopAppNotification]);return Object(c.useEffect)((function(){if(!b.callData.localTimeStamp&&!qe(b.peer)&&!da(b,y)){var e=b.participants[b.peer];e&&e.status===We.ParticipantStatus.CONNECTED&&_({type:Se.nb,data:Date.now()})}}),[b]),Object(c.useEffect)((function(){T&&oe(x)}),[x]),Object(c.useEffect)((function(){var e,t=[],n=function(e){return!b.participants[e]||!b.participants[e].mediaSettings||!b.participants[e].name},r=ts(ce);try{for(r.s();!(e=r.n()).done;){var a=e.value,i=Number(a.peerId);n(i)&&t.push(i)}}catch(e){r.e(e)}finally{r.f()}var o,c=ts(b.speakersInHeader);try{for(c.s();!(o=c.n()).done;){var s=o.value;n(Number(s))&&t.push(Number(s))}}catch(e){c.e(e)}finally{c.f()}if(window.Calls&&t.length>0){var u=b.callData.callId||"",l={withConversation:!b.callData.conversation,awaitImages:!1};Ho(b,_,window.Calls,u,t,l).catch((function(e){var t,n;null!==(t=window.Calls)&&void 0!==t&&t.eventHandlers.onError&&e&&(null===(n=window.Calls)||void 0===n||n.eventHandlers.onError(e));Object(We.debugMessage)(We.DebugMessageType.ERROR,e),console.error(e)}))}}),[b.peer,b.speakersInHeader,ce]),s.a.createElement(Vn,{onClose:B?Te:Ie,isCautionBoxShown:!B,onBackdropClick:me},s.a.createElement(Zr,{info:s.a.createElement(oi,{onHandCountChanged:v}),callMenuActions:Me,isVideoAllowed:D.isVideoEnabled||N.video>0,isAudioAllowed:D.isAudioEnabled||N.audio>0,isVideoEnabled:C?D.isVideoEnabled:D.isVideoEnabled&&!D.isScreenSharingEnabled,isAudioEnabled:D.isAudioEnabled,isScreenSharingEnabled:D.isScreenSharingEnabled,isOratorMode:b.isOratorMode,isFullScreen:W,onToggleVideo:Ee,onToggleAudio:Ae,onToggleScreenShare:Oe,onLeaveCall:B?Te:K?je:Ie,onCollapseCall:O?me:null,onToggleOratorMode:ve,onFullScreenToggle:Pe,onTooltipChange:De,onHidePanel:Ne,onChat:Ce,onHandClick:ke,isParticipantControlActive:b.isManagementOpen,isLayoutSwitchShown:T&&R,isHandRaised:null===(u=P.statusData)||void 0===u||null===(l=u.hand)||void 0===l?void 0:l.state,isHandControlShown:T,isChatControlShown:!!j&&!b.groupId,isScreenShareControlShown:N.screenSharing>0&&q,isStreamingControlShown:Y,isChainControlShown:!Lt(P.peerId),onDeferredStreamStart:function(){if(b.translation.deferredId){var e={isOn:!1,startStreamParams:{upcomingStreamParams:{ovId:b.translation.deferredId}}};_({type:Se.tc,data:e}),_({type:Se.Hc,data:Se.Db})}},onParticipantsClick:be,chatUnreadCount:b.chatUnreadCount,notification:Fe,tooltips:b.tooltips,amISpeaking:!!b.speakers[b.me],onChainClick:ye,notificationWithButton:Ve,participantCount:ie,isPopupOrModalOpen:!(!b.popup&&!b.isManagementOpen)},s.a.createElement(s.a.Fragment,null,!F&&s.a.createElement(Sr,function(e,t,n,r){var a,i=e[t]||{},o=e[n]||{},c=i.mediaSettings,s=o&&o.mediaSettings?o.mediaSettings:{isAudioEnabled:!1,isVideoEnabled:!1,isScreenSharingEnabled:!1},u=sn(i),l=cn(i),d=sn(o),f=cn(o);return{hasAudio:!(null==c||!c.isAudioEnabled),hasVideo:u,isSharingScreen:!(null==c||!c.isScreenSharingEnabled),stream:l,id:t,name:r("calls_own_label"),letter:null===(a=i.name)||void 0===a?void 0:a.slice(0,1),wasConnected:!!i.wasConnected,networkStatus:i.networkStatus,opponentHasAudio:!(null==s||!s.isAudioEnabled),opponentHasVideo:d,opponentIsSharingScreen:!(null==s||!s.isScreenSharingEnabled),opponentStream:f,opponentPhoto:o.photo,opponentId:n,opponentName:o.name||n.toString(),opponentWasConnected:!!o.wasConnected,opponentNetworkStatus:o.networkStatus}}(b.participants,b.me,b.peer,y)),H&&s.a.createElement(Xr,{onScroll:xe,scrollPosition:b.gridScrollPosition,participantsCount:x,participantsShiftCount:b.gridScrollFirstVisible<60?0:b.gridScrollFirstVisible-60},de),V&&s.a.createElement($r,{orator:os(b,y,Oe),oratorTitle:s.a.createElement($c,{orator:un(b),me:b.me,isPinned:z,isPinnedByAdmin:U,isPinnedByShareScreen:G,isUnpinAllowed:Xt(P)||!U,onUnpin:Le,tooltips:b.tooltips,onTooltipChange:De}),onToggleParticipantsAside:ge,isShownParticipantsAside:b.isShownParticipantsAside,onScroll:Re,scrollPosition:b.oratorScrollPosition,participantsAsideCount:x,participantsAsideShift:b.oratorScrollFirstVisible<30?0:148*(b.oratorScrollFirstVisible-30)-8},de),F&&!M&&s.a.createElement(ta,null,s.a.createElement(ln,{id:j,photo:I&&I.photo||"",waves:!0,alt:I&&I.tab||"",className:palettePrefix("CallPhoto--orator")})))))}function os(e,t,n){var r,a=null!==(r=e.participants[e.adminPinnedParticipant||e.screenSharingPinnedParticipant||e.pinnedParticipant||e.orator||e.me])&&void 0!==r?r:{},i=a.mediaSettings||{},o=i.isAudioEnabled,c=i.isScreenSharingEnabled,u=a.peerId===e.me;u&&e.groupId&&e.meGroup&&(a=Rt(e.meGroup,a));var l=sn(a),d=cn(a);return s.a.createElement(Cr,{id:a.peerId,key:a.peerId,isOrator:!0,isInfoShown:!0,isMe:u,hasVideo:!!l,hasAudio:!!o,isSharingScreen:!!c,stream:d,photo:a.photo,name:u?t("calls_own_label"):a.name,status:a.status,wasConnected:a.wasConnected,networkStatus:a.networkStatus,allowContain:!0,onStopScreenShare:n})}var cs=function(e){var t=e.children,n=Object(c.useContext)(He).withAnimation,r=Object(d.c)("CollapsedCall",{"CollapsedCall--withAnimation":n});return s.a.createElement("div",{className:palettePrefix(r)},t)},ss=function(e){var t=e.id,n=e.photo,r=e.title,a=e.status,i=e.isIncoming,o=e.onClick,c=e.children;return s.a.createElement("div",{className:palettePrefix("CallWidget"),onClick:o},s.a.createElement(Re,{id:t,className:palettePrefix("CallWidget__background")}),s.a.createElement(ln,{id:t,photo:n,waves:i,alt:r||"",className:palettePrefix("CallWidget__photo")}),s.a.createElement("h1",{className:palettePrefix("CallWidget__name")},r),s.a.createElement("div",{className:palettePrefix("CallWidget__status")},a),c)},us=function(e){var t=e.localVideoStream,n=e.isLocalAudioEnabled,r=e.isLocalAudioAllowed,a=e.isLocalScreenSharing,i=e.participantId,o=e.isMe,u=void 0!==o&&o,l=e.isWithVideo,d=e.isWithAudio,f=e.isScreenSharing,h=e.stream,m=e.photo,v=e.name,g=e.status,b=void 0===g?We.ParticipantStatus.CONNECTED:g,_=e.networkStatus,y=e.onRestoreCall,E=e.onToggleAudio,O=e.children,w=s.a.useContext(Pn).getLang,C=Object(c.useState)(!1),S=p()(C,2),A=S[0],k=S[1],j=wr().storedVideoOptions;Object(c.useEffect)((function(){t||k(!1)}),[t,A]);var T=Object(c.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),y()}),[y]),I=Object(c.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),E&&E()}),[E]);return s.a.createElement("div",{className:palettePrefix("CallVideoWidget"),onClick:y},t&&s.a.createElement(qn,{className:palettePrefix("CallVideoWidget__local"),stream:t,isMirrored:!a&&j[Se.I.IS_VIDEO_MIRRORED],isContained:!1,isStartWithVisible:!0}),s.a.createElement(Cr,{id:i,hasVideo:l,hasAudio:d,isSharingScreen:f,isMe:u,stream:h,photo:m,name:v,status:b,allowContain:!1,networkStatus:_}),O,s.a.createElement(kr,{alignX:"l",alignY:"b",size:"s",className:palettePrefix("CallVideoWidget__buttons")},s.a.createElement(In,{position:"t",align:"left",marginTop:6,text:w(n?"calls_mute":"calls_unmute")},s.a.createElement(mn,{type:n?"mute":"unmute",onClick:I,disabled:!r}))),s.a.createElement(kr,{alignX:"r",alignY:"b",size:"s",className:palettePrefix("CallVideoWidget__buttons")},s.a.createElement(In,{position:"t",align:"right",text:w("calls_restore"),marginTop:6},s.a.createElement(mn,{type:"restore",onClick:T}))))},ls=function(e){var t,n,r,i,o=e.SDK,u=we((function(e){return e})),l=_e(),d=s.a.useContext(Pn).getLang,f=u.peer,p=yt(u),h=qe(f)?u.callData.conversation:u.participants[f],m=u.participants[u.me],v=Gt(u,p),g=sn(m)&&v&&v.peerId!==u.me,b=Object(c.useCallback)((function(){l({type:Se.k,mode:Se.Ic.DEFAULT}),Mc(!1)}),[]),_=(null==m||null===(t=m.mediaSettings)||void 0===t?void 0:t.isAudioEnabled)||(null===(n=m.permissions)||void 0===n?void 0:n.audio)>0,y=Object(c.useCallback)((function(){var e;o.toggleLocalAudio(!(null!==(e=m.mediaSettings)&&void 0!==e&&e.isAudioEnabled))}),[u]);return s.a.createElement(cs,null,u.mode===Se.ub.INCOMING&&s.a.createElement(ss,{id:f,title:(null==h?void 0:h.tab)||"",photo:(null==h?void 0:h.photo)||"",status:d("calls_incoming_collapsed"),isIncoming:!0,onClick:b}),u.mode!==Se.ub.INCOMING&&s.a.createElement(us,a()({localVideoStream:g?cn(m):void 0,isLocalAudioEnabled:!(null===(r=m.mediaSettings)||void 0===r||!r.isAudioEnabled),isLocalAudioAllowed:_,isLocalScreenSharing:!(null===(i=m.mediaSettings)||void 0===i||!i.isScreenSharingEnabled)},function(e,t,n){var r,a;return e?{participantId:e.peerId,isMe:e.peerId===n,isWithVideo:sn(e),isWithAudio:!(null===(r=e.mediaSettings)||void 0===r||!r.isAudioEnabled),isScreenSharing:!(null===(a=e.mediaSettings)||void 0===a||!a.isScreenSharingEnabled),stream:cn(e),photo:e.photo,name:e.name,status:e.status,networkStatus:e.networkStatus}:{participantId:t&&t.peerId||0,isMe:!1,isWithVideo:!1,isWithAudio:!1,isScreenSharing:!1,stream:void 0,photo:t&&t.photo||"",name:t&&t.tab||"",status:t&&t.status||We.ParticipantStatus.CONNECTED,networkStatus:1}}(v,h,u.me),{onRestoreCall:b,onToggleAudio:y})))};var ds=navigator.userAgent.toLowerCase(),fs=((ds.match(/.+(?:me|ox|on|rv|it|era|opr|ie|edge)[\/: ]([\d.]+)/)||[0,"0"])[1],!/chrome/i.test(ds)&&/webkit|safari|khtml/i.test(ds));function ps(e){var t,n=e.onBeforeCallStart,r=e.onAfterCallFinish,i=e.callSounds,u=we((function(e){return e})),l=Object(c.useRef)(),d=(t={},o()(t,"incoming",Object(c.useRef)(null)),o()(t,"outgoing",Object(c.useRef)(null)),o()(t,"connecting",Object(c.useRef)(null)),o()(t,"connected",Object(c.useRef)(null)),o()(t,"end",Object(c.useRef)(null)),t),f={controls:!1,preload:"auto"},p=Object(c.useCallback)((function(e){var t=d[e].current;t&&t.paused&&t.play().catch((function(){}))}),[]),h=Object(c.useCallback)((function(e){var t=d[e].current;t&&!t.paused&&(t.pause(),t.currentTime=0)}),[]),m=Object(c.useCallback)((function(){Object.keys(d).forEach(h)}),[]),v=Object(c.useCallback)((function(e){var t=d[e].current;if(t){var n=t.volume;t.volume=0,t.play().catch((function(){})),t.pause(),t.currentTime=0,t.volume=n}}),[]),g=Object(c.useCallback)((function(){n&&n()}),[n]),b=Object(c.useCallback)((function(){r&&r()}),[r]);return Object(c.useEffect)((function(){return fs&&document.body.addEventListener("mousedown",(function e(){Object.keys(d).forEach(v),document.body.removeEventListener("mousedown",e)})),function(){m(),b()}}),[]),Object(c.useEffect)((function(){var e,t,n=l.current||u,r=u;n.mode!==r.mode&&(n.mode!==Se.ub.READY||r.mode!==Se.ub.INCOMING&&r.mode!==Se.ub.CALL||g(),n.mode===Se.ub.INCOMING&&h("incoming"),r.mode===Se.ub.INCOMING&&p("incoming"),r.mode!==Se.ub.READY||n.mode!==Se.ub.INCOMING&&n.mode!==Se.ub.CALL||(m(),p("end"),b()));var a=r.me,i=n.participants,o=r.participants,c=null===(e=i[a])||void 0===e?void 0:e.status,s=null===(t=o[a])||void 0===t?void 0:t.status;c!==s&&(c===We.ParticipantStatus.CONNECTING&&h("connecting"),s===We.ParticipantStatus.CONNECTING&&p("connecting"));var d=Object.keys(o).some((function(e){return i[e]&&i[e].status===We.ParticipantStatus.CONNECTED})),f=Object.keys(o).some((function(e){var t=i[e],n=o[e];return t&&t.status!==n.status&&n.status===We.ParticipantStatus.CONNECTED}));!d&&f&&p("connected"),r.mode===Se.ub.CALL&&(!function(e,t,n,r){for(var a=!1,i=0,o=Object.values(e);i<o.length;i++){var c=o[i];if(c.peerId!==t){if(c.status===We.ParticipantStatus.CONNECTED)return!1;c.status===We.ParticipantStatus.WAITING&&(!r||n.has(c.peerId))&&(a=!0)}}return a}(o,a,r.participantsAddedByMe,qe(u.peer))?h("outgoing"):p("outgoing")),l.current=u}),[u]),s.a.createElement(s.a.Fragment,null,s.a.createElement("audio",a()({src:i.incoming,ref:d.incoming,loop:!0},f)),s.a.createElement("audio",a()({src:i.outgoing,ref:d.outgoing,loop:!0},f)),s.a.createElement("audio",a()({src:i.connected,ref:d.connected,loop:!1},f)),s.a.createElement("audio",a()({src:i.connecting,ref:d.connecting,loop:!0},f)),s.a.createElement("audio",a()({src:i.end,ref:d.end,loop:!1},f)))}function hs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wn()(e);if(t){var a=wn()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return En()(this,n)}}var ms=n(138).default,vs=function(e){_n()(n,e);var t=hs(n);function n(e){var r,i;return tt()(this,n),r=t.call(this,e),o()(gn()(r),"mounted",void 0),o()(gn()(r),"el",void 0),o()(gn()(r),"handleMouseDown",(function(e){r.props.onFocus&&"function"==typeof r.props.onFocus&&r.props.onFocus(r.state.opened),"mousedown"===e.type&&0!==e.button||(e.stopPropagation(),e.preventDefault(),r.props.disabled||r.props.alwaysOpened||r.toggle(!r.state.opened))})),o()(gn()(r),"getOptionByValue",(function(e,t){for(var n=0;n<e.length;n++)if(e.hasOwnProperty(n)){var a=e[n];if("object"===Ln()(a)){if("group"===a.type&&void 0!==a.items){var i=r.getOptionByValue(a.items||[],t);if(i)return i}if(a.value===t)return a}else if(a===t)return a}})),o()(gn()(r),"setValue",(function(e,t,n){n&&n.stopPropagation(),"object"===Ln()(t)&&r.props.searchable&&(t=t.props.title);var a={value:e,label:"object"===Ln()(t)?t:t.toString()},i={selected:a};r.fireChangeEvent(a),r.setState(i),r.props.alwaysOpened||r.toggle(!1)})),o()(gn()(r),"fireChangeEvent",(function(e){e!==r.state.selected&&r.props.onChange&&r.props.onChange({name:r.props.name,selected:e})})),o()(gn()(r),"renderOption",(function(e){var t=Object(d.c)("Select__option",{"Select__option--selected":e===r.state.selected}),n=void 0!==e.value?e.value:e.label||e,a=void 0!==e.label?e.label:e;return c.createElement("div",{key:n,className:palettePrefix(t),onMouseDown:function(e){return r.setValue(n,a,e)},onClick:function(e){return r.setValue(n,a,e)},title:e.title},a)})),o()(gn()(r),"buildMenu",(function(){var e=r.state.filteredOptions.map((function(e){return"string"!=typeof e&&"group"===e.type?c.createElement("div",{className:palettePrefix("Select__group"),key:e.name},e.name&&c.createElement("div",{className:palettePrefix("Select__title")},e.name),e.items&&e.items.map((function(e){return r.renderOption(e)}))):r.renderOption(e)}));return e.length?e:c.createElement("div",{className:palettePrefix("Select__noresults")},r.props.searchPlaceholder)})),o()(gn()(r),"renderMenu",(function(){return r.props.customMenu?r.props.customMenu(r.state.filteredOptions,r.setValue,r.state.selected):c.createElement("div",{className:palettePrefix("Select__menu")},r.buildMenu())})),o()(gn()(r),"filterOptions",(function(e,t){var n=e.toLowerCase();return t.filter((function(e){return"string"==typeof e?e.toLowerCase().includes(n):"string"==typeof e.label?e.label.toLowerCase().includes(n):"object"===Ln()(e.label)&&e.label.props.title.toLowerCase().indexOf(n)>=0}))})),o()(gn()(r),"handleSearchType",(function(e){var t=r.filterOptions(e.target.value,r.state.allOptions);r.setState({selected:{value:e.target.value,label:e.target.value},filteredOptions:t}),r.toggle(!0),r.props.onType&&r.props.onType(e.target.value)})),o()(gn()(r),"handleEditableType",(function(e){r.setState({opened:!0}),r.props.onEdit&&r.props.onEdit(e.target.value)})),o()(gn()(r),"buildControl",(function(e){var t,n="",i=r.props,o=i.searchable,s=i.editable,u=i.inputOtherProps,l=Object(d.c)("Select__input",u&&u.className);return e&&"string"==typeof e&&(n=e),e&&"object"===Ln()(e)&&(e&&"string"==typeof e.label&&(n=e.label),e&&"object"===Ln()(e.label)&&o&&(n=e.label.props.title||""),e&&"object"===Ln()(e.label)&&!o&&(t=e.label)),o?c.createElement("div",{className:palettePrefix("Select__control"),onClick:r.handleMouseDown},c.createElement(ms,a()({placeholder:r.props.placeholder,value:n||"",onChange:r.handleSearchType.bind(gn()(r)),onFocus:r.props.onInputFocus,onBlur:function(e){var t,n;return null===(t=(n=r.props).onInputBlur)||void 0===t?void 0:t.call(n,e,r.state.filteredOptions)},disabled:r.props.disabled,isControlledOutside:!0},u,{className:palettePrefix(l)})),c.createElement("span",{className:palettePrefix("Select__arrow")})):s?c.createElement("div",{className:palettePrefix("Select__control"),onClick:r.handleMouseDown},c.createElement(ms,a()({placeholder:r.props.placeholder,id:r.props.id,value:n||"",onChange:r.handleEditableType,onFocus:r.props.onInputFocus,onBlur:r.props.onInputBlur,disabled:r.props.disabled,isControlledOutside:!0,autoComplete:"off"},u,{className:palettePrefix(l)})),c.createElement("span",{className:palettePrefix("Select__arrow")})):c.createElement("div",{className:palettePrefix("Select__control"),onClick:r.handleMouseDown},c.createElement("div",{className:palettePrefix("Select__placeholder")},n||t),c.createElement("span",{className:palettePrefix("Select__arrow")}))})),o()(gn()(r),"handleDocumentClick",(function(e){r.mounted&&r.state.opened&&!r.props.alwaysOpened&&r.el&&!r.el.contains(e.target)&&r.toggle(!1)})),i=void 0!==e.value?e.editable&&void 0!==e.customValue?{label:e.customValue,value:e.customValue}:r.getOptionByValue(e.options,e.value):{label:r.getLabel(e),value:""},r.state={filteredOptions:e.options,allOptions:e.options,selected:i,opened:!!e.alwaysOpened},r.mounted=!0,r}return rt()(n,[{key:"getLabel",value:function(e){return this.props.searchable?this.props.value||"":e.placeholder||"Select..."}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({filteredOptions:e.options,allOptions:e.options}),this.props.editable&&void 0!==e.customValue?this.setState({selected:{label:e.customValue,value:e.customValue}}):void 0!==e.value&&e.value!==this.state.selected?this.setState({selected:this.getOptionByValue(e.options,e.value)}):void 0===e.value&&this.setState({selected:{label:this.getLabel(e),value:""}})}},{key:"componentDidMount",value:function(){this.el=u.findDOMNode(this),document.addEventListener("mousedown",this.handleDocumentClick,!1),document.addEventListener("touchend",this.handleDocumentClick,!1)}},{key:"componentWillUnmount",value:function(){this.mounted=!1,document.removeEventListener("mousedown",this.handleDocumentClick,!1),document.removeEventListener("touchend",this.handleDocumentClick,!1)}},{key:"toggle",value:function(e){var t=this;this.setState({opened:e},(function(){var e,n,r,a;t.state.opened?null===(e=(n=t.props).onShow)||void 0===e||e.call(n):null===(r=(a=t.props).onHide)||void 0===r||r.call(a)}))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.appearance,r=e.style,a=e.searchable,i=e.editable,o=e.disabled,s=this.state,u=s.selected,l=s.opened,f=u&&"object"===Ln()(u)&&!u.value||!1,p=a||i?"secondary":n,h=Object(d.c)("Select","Select--".concat(p),{"Select--opened":!!l,"Select--disabled":!!o,"Select--empty":f},t),m=this.buildControl(u);return c.createElement("div",{className:palettePrefix(h),style:r},m,this.state.opened&&this.renderMenu())}}]),n}(c.Component);o()(vs,"defaultProps",{appearance:"primary",searchPlaceholder:"No options found",searchable:!1,editable:!1,inputOtherProps:{},onShow:function(){},onHide:function(){}});var gs=["className"],bs=function(e){var t=e.className,n=ke()(e,gs);return s.a.createElement("div",a()({className:palettePrefix(Object(d.c)("HintIcon",t))},n))};bs.propTypes={className:g.a.string};var _s=bs,ys=["children","checked","disabled","indeterminate","name","id"];function Es(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wn()(e);if(t){var a=wn()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return En()(this,n)}}var Os=function(e){_n()(n,e);var t=Es(n);function n(){var e;tt()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),o()(gn()(e),"onChange",(function(t){e.props.onChange&&e.props.onChange(e.props.name,t.target.checked,t)})),e}return rt()(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.checked,r=e.disabled,i=e.indeterminate,o=e.name,c=e.id,u=ke()(e,ys),l=Object(d.c)("CheckBox",u.className,{"CheckBox--disabled":r,"CheckBox--indeterminate":i});return s.a.createElement("label",{className:palettePrefix(l)},s.a.createElement("input",a()({},u,{className:palettePrefix("CheckBox__input"),id:c,type:"checkbox",checked:n,name:o,disabled:r,onChange:this.onChange})),s.a.createElement("span",{className:palettePrefix("CheckBox__indicator"),"aria-hidden":!0}),t)}}]),n}(s.a.Component);function ws(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ws(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ws(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ss(e){var t=e.cameras,n=e.mics,r=e.noiseCancellationOptions,i=e.videoResolutionOptions,o=e.currentCamId,u=e.currentMicId,l=e.currentNoiseCancellation,d=e.currentVideoResolution,f=e.isCamAvailable,p=void 0!==f&&f,h=e.isMicAvailable,m=void 0!==h&&h,v=e.onCameraChange,g=e.onMicChange,b=e.onNoiseCancellationChange,_=e.onVideoResolutionChange,y=e.pushToTalkEnabled,E=e.onPushToTalkChange,O=s.a.useContext(Pn).getLang,w=s.a.useContext(He).allowPushToTalk,C=Object(c.useRef)(null),S=Object(c.useRef)(null),A=Object(c.useRef)(null),k=Object(c.useRef)(null),j={controls:!1,crossOrigin:"anonymous",playsInline:!0};return ks({kind:"video",resolution:d,mediaElRef:C,streamRef:A,deviceId:o,isActive:p}),ks({kind:"audio",mediaElRef:S,streamRef:k,deviceId:u,isActive:m}),s.a.createElement("div",{className:palettePrefix("CallSettings")},s.a.createElement("div",{className:palettePrefix("CallSettings__camera")},p?s.a.createElement("video",a()({ref:C},j,{className:palettePrefix("CallSettings__cameraStream CallSettings__cameraContent")})):s.a.createElement("div",{className:palettePrefix("CallSettings__cameraStub CallSettings__cameraContent")},O("calls_no_camera"))),m&&s.a.createElement("audio",a()({ref:S},j)),s.a.createElement("div",{className:palettePrefix("CallSettings__block")},s.a.createElement("div",{className:palettePrefix("CallSettings__label")},O("calls_settings_camera")),p?s.a.createElement(vs,{options:t.map(As),value:o,onChange:function(e){var t=e.selected;return v(t.value)},appearance:"secondary",className:palettePrefix("CallSettings__field")}):s.a.createElement(xi,{className:palettePrefix("CallSettings__field")},O("calls_settings_no_camera"))),p&&s.a.createElement("div",{className:palettePrefix("CallSettings__block")},s.a.createElement("div",{className:palettePrefix("CallSettings__label")},O("calls_settings_video_resolution")),s.a.createElement(vs,{options:i,value:d,onChange:function(e){var t=e.selected;return _(t.value)},appearance:"secondary",className:palettePrefix("CallSettings__field")})),s.a.createElement("div",{className:palettePrefix("CallSettings__block")},s.a.createElement("div",{className:palettePrefix("CallSettings__label")},O("calls_settings_mic")),m?s.a.createElement(vs,{options:n.map(As),value:u,onChange:function(e){var t=e.selected;return g(t.value)},appearance:"secondary",className:palettePrefix("CallSettings__field")}):s.a.createElement(xi,{className:palettePrefix("CallSettings__field")},O("calls_settings_no_mic"))),w&&s.a.createElement("div",{className:palettePrefix("CallSettings__block")},s.a.createElement("div",{className:palettePrefix("CallSettings__label")}),s.a.createElement(Os,{className:palettePrefix("CallSettings__field"),onChange:E,checked:y},O("calls_settings_push_to_talk_mode_description")),s.a.createElement(In,{className:palettePrefix("CallSettings__tooltip"),text:O("calls_settings_push_to_talk_mode_hint"),position:"t",appearance:"light",maxWidth:320},s.a.createElement(_s,{className:palettePrefix("CallSettings__hint"),"aria-label":O("calls_settings_push_to_talk_mode_hint")}))),s.a.createElement("div",{className:palettePrefix("CallSettings__block")},s.a.createElement("div",{className:palettePrefix("CallSettings__label")},s.a.createElement("span",{dangerouslySetInnerHTML:{__html:O("calls_settings_noise")}})),m?s.a.createElement(vs,{options:r,value:l,onChange:function(e){var t=e.selected;return b(t.value)},appearance:"secondary",className:palettePrefix("CallSettings__field")}):s.a.createElement(xi,{className:palettePrefix("CallSettings__field")},O("calls_settings_no_mic")),s.a.createElement(In,{className:palettePrefix("CallSettings__tooltip"),text:O("calls_settings_noise_description"),position:"t",appearance:"light",maxWidth:320},s.a.createElement(_s,{className:palettePrefix("CallSettings__hint"),"aria-label":O("calls_settings_noise_description")}))))}function As(e){return{value:e.deviceId,label:e.label}}function ks(e){var t=e.kind,n=e.resolution,r=e.mediaElRef,a=e.streamRef,i=e.deviceId,s=e.isActive,u={video:!1,audio:!1},l={deviceId:i};"video"===t&&n&&(l.width={min:428,max:Se.Wc[n]||Se.Wc.SD,ideal:Se.Wc[n]||Se.Wc.SD},l.height={min:240,max:Se.Uc[n]||Se.Uc.SD,ideal:Se.Uc[n]||Se.Uc.SD}),Object(c.useEffect)((function(){s&&navigator.mediaDevices.getUserMedia(Cs(Cs({},u),{},o()({},t,l))).then((function(e){var t=a.current;t&&t.getTracks().forEach((function(e){return e.stop()}));var n=r.current;n&&(a.current=e,n.srcObject=e,n.volume=0,n.play())})).catch((function(e){console.error("Error occurred: "+e)}))}),[i,s,n]),Object(c.useEffect)((function(){return function(){var e=a.current;e&&e.getTracks().forEach((function(e){return e.stop()}));var t=r.current;t&&(t.srcObject=null)}}),[])}Os.propTypes={checked:g.a.oneOfType([g.a.bool,g.a.string]),disabled:g.a.bool,indeterminate:g.a.bool,id:g.a.oneOfType([g.a.string,g.a.number]),name:g.a.oneOfType([g.a.string,g.a.number]),onChange:g.a.func,children:g.a.oneOfType([g.a.string,g.a.node]),className:g.a.string};var js=["children","isNative","isShadows","neverHide","className"];function Ts(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wn()(e);if(t){var a=wn()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return En()(this,n)}}var Is=s.a.createContext({}),Ps=function(e){_n()(n,e);var t=Ts(n);function n(){var e;tt()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),o()(gn()(e),"getWrapperRef",(function(t){e.wrapper=t})),e}return rt()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isNative,n=e.isShadows,r=e.neverHide,a=e.onScroll;!this.scroller&&this.context&&this.context.createScroll&&(this.scroller=this.context.createScroll(this.wrapper,{shadows:n,nativeScroll:t,hidden:!r,onScroll:a}))}},{key:"componentDidUpdate",value:function(){this.scroller&&this.scroller.update()}},{key:"componentWillUnmount",value:function(){this.scroller&&(this.scroller.destroy(),this.scroller=null)}},{key:"render",value:function(){var e=this.props,t=e.children,n=(e.isNative,e.isShadows,e.neverHide,e.className),r=void 0===n?"":n,i=ke()(e,js);return s.a.createElement("div",a()({},i,{className:palettePrefix(Object(d.c)("Scroll",r)),ref:this.getWrapperRef}),t)}}]),n}(s.a.Component);Ps.propTypes={className:g.a.string,children:g.a.oneOfType([g.a.element,g.a.string]).isRequired,isNative:g.a.bool,isShadows:g.a.bool,neverHide:g.a.bool,onScroll:g.a.func},Ps.defaultProps={isNative:!1,isShadows:!1,neverHide:!1,onScroll:null},Ps.contextType=Is;var Ds=function(e){var t=e.children,n=e.hasScroll;return void 0===n||n?s.a.createElement(Ps,{className:palettePrefix("ModalBody")},t):s.a.createElement("div",{className:palettePrefix("ModalBody")},t)};function Ns(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ns(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ns(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rs=function(e){var t=e.className,n=e.appearance,r=void 0===n?"white":n,i=e.title,o=e.actionButtons,c=e.onClose,u=e.children,l=e.footerHint,f=e.hasScroll,p=Object(d.c)("Modal","Modal--".concat(r),t);return s.a.createElement(Rn,a()({},e,{className:palettePrefix(p)}),s.a.createElement(si,{title:i,onClose:c}),Boolean(u)&&s.a.createElement(Ds,{hasScroll:f},u),s.a.createElement(ui,{actionButtons:o,hint:l}))};Rs.Header=si,Rs.Body=Ds,Rs.Footer=ui,Rs.propTypes=xs(xs({},Rn.propTypes),{},{actionButtons:g.a.oneOfType([g.a.arrayOf(g.a.node),g.a.node]).isRequired,onClose:g.a.func.isRequired,title:g.a.oneOfType([g.a.arrayOf(g.a.node),g.a.node]).isRequired,appearance:g.a.oneOf(["white","blue"]),hasScroll:g.a.bool,footerHint:g.a.node});var Ms=Rs;function Ls(e){var t=e.onClose,n=e.onSubmit,r=e.children,a=s.a.useContext(Pn).getLang;return s.a.createElement(Ms,{onClose:t,title:a("calls_settings"),appearance:"blue",actionButtons:s.a.createElement(s.a.Fragment,null,s.a.createElement(so,{onClick:t,appearance:"tertiary"},a("calls_cancel")),s.a.createElement(so,{onClick:n},a("calls_save"))),className:palettePrefix("CallSettingsModal")},r)}var Bs=s.a.useState;function Fs(e){var t=e.SDK,n=s.a.useContext(Pn).getLang,r=s.a.useContext(He).fullHD,a=[{label:n("calls_noise_neural"),value:Se.vb.NEURAL,data:{denoise:!0,denoiseAnn:!0}},{label:n("calls_noise_simple"),value:Se.vb.SIMPLE,data:{denoise:!0,denoiseAnn:!1}},{label:n("calls_noise_none"),value:Se.vb.NONE,data:{denoise:!1,denoiseAnn:!1}}],i=[{label:n("calls_video_resolution_sd"),value:Se.Vc.SD},{label:n("calls_video_resolution_hd"),value:Se.Vc.HD}];r&&i.push({label:n("calls_video_resolution_fhd"),value:Se.Vc.FHD});var o=we((function(e){return e})),c=we((function(e){var t;return[e.mode,null===(t=e.participants[e.me].mediaSettings)||void 0===t?void 0:t.isVideoEnabled]})),u=p()(c,2),l=u[0],f=u[1],h=_e(),m=t.browser.getCameras(),v=t.browser.getMicrophones(),g=t.browser.hasCamera()&&t.browser.hasCameraPermission(),b=t.browser.hasMicrophone()&&t.browser.hasMicrophonePermission(),_=t.browser.getSavedCamera(),y=t.browser.getSavedMicrophone(),E=g&&(_&&_.deviceId||m[0].deviceId),O=b&&(y&&y.deviceId||v[0].deviceId),w=Bs(!1===E?void 0:E),C=p()(w,2),S=C[0],A=C[1],k=Bs(!1===O?void 0:O),j=p()(k,2),T=j[0],I=j[1],P=Bs(o.noiseCancellation),D=p()(P,2),N=D[0],x=D[1],R=d.y.getItem(Se.Rc),M=Bs(R===Se.Vc.FHD?Se.Vc.FHD:R===Se.Vc.HD?Se.Vc.HD:Se.Vc.SD),L=p()(M,2),B=L[0],F=L[1],H=Bs(o.pushToTalkEnabled),V=p()(H,2),U=V[0],z=V[1];return s.a.createElement(Ls,{onClose:function(){h({type:Se.Hc})},onSubmit:function(){var e,n=[Promise.resolve()];(!_&&E===S&&l!==Se.ub.READY&&!f||!S||_&&_.deviceId===S||n.push(t.changeDevice("videoinput",S)),!T||y&&y.deviceId===T||n.push(t.changeDevice("audioinput",T)),o.noiseCancellation!==N)&&n.push(t.setMediaModifiers((null===(e=a.find((function(e){return e.value===N})))||void 0===e?void 0:e.data)||{denoise:!0,denoiseAnn:!0}).then((function(){h({type:Se.hc,data:N})})));if(o.localVideoResolution!==B&&(console.debug("set resolution from -> to: ",o.localVideoResolution,B,Se.Wc[B],Se.Uc[B]),n.push(t.setLocalResolution(Se.Wc[B],Se.Uc[B]).catch((function(e){console.error(e)})).finally((function(){d.y.setItem(Se.Rc,B),h({type:Se.f,data:B})})))),o.pushToTalkEnabled!==U){var r=o.participants[o.me];r.permissions.audio>0&&Lc(U,r.mediaSettings),h({type:Se.mc,data:U})}Promise.all(n).then((function(){h({type:Se.Hc})})).catch((function(e){console.error("Device change failed",e),h({type:Se.Hc})}))}},s.a.createElement(Ss,{mics:v,cameras:m,noiseCancellationOptions:a,videoResolutionOptions:i,currentCamId:S,currentMicId:T,currentNoiseCancellation:N,currentVideoResolution:B,isCamAvailable:g,isMicAvailable:b,onCameraChange:function(e){return A(e)},onMicChange:function(e){return I(e)},onNoiseCancellationChange:function(e){return x(e)},onVideoResolutionChange:function(e){return F(e)},pushToTalkEnabled:U,onPushToTalkChange:function(){z(!U)}}))}function Hs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wn()(e);if(t){var a=wn()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return En()(this,n)}}var Vs=function(e){_n()(n,e);var t=Hs(n);function n(e){var r;return tt()(this,n),(r=t.call(this,e)).state={hasError:!1},r}return rt()(n,[{key:"componentDidCatch",value:function(e){switch(this.props.mode){case Se.ub.CALL:this.props.SDK.hangup();break;case Se.ub.INCOMING:this.props.SDK.declineCall()}this.props.onReset(),this.setState({hasError:!1}),console.error("Calls crashed:",e,e)}},{key:"render",value:function(){return this.state.hasError?null:this.props.children}}],[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),n}(s.a.Component),Us=function(e){var t=e.children;return s.a.createElement("h2",{className:palettePrefix("JoinHeader")},t)},zs=function(e){var t=e.children;return s.a.createElement("div",{className:palettePrefix("VisuallyHidden")},t)},Gs=function(e){var t=e.items;return s.a.createElement("figure",{className:palettePrefix("AvatarsStack")},s.a.createElement(zs,null,s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg"},s.a.createElement("defs",null,s.a.createElement("clipPath",{id:"users-mask"},s.a.createElement("path",{d:"M43.56 8.25a25 25 0 100 33.5A27.88 27.88 0 0138 25c0-6.28 2.07-12.08 5.56-16.75z"}))))),t.map((function(e,t){return"src"in e?s.a.createElement("img",{src:e.src,className:palettePrefix("AvatarsStack__item"),alt:e.alt,key:e.key||t}):s.a.createElement(Le,{text:e.text,id:e.id,size:"50",className:palettePrefix("AvatarsStack__item"),key:e.key||t})})))},Ws=function(e){var t=a()({},e);return s.a.createElement("svg",a()({width:"16",height:"16",fill:"currentColor"},t,{xmlns:"http://www.w3.org/2000/svg"}),s.a.createElement("path",{d:"M3.14 3C1.96 3 1 3.96 1 5.14v5.72C1 12.04 1.96 13 3.14 13h5.72c1.18 0 2.14-.96 2.14-2.14V5.14C11 3.96 10.04 3 8.86 3H3.14zM14.95 4.87c.23-.17.55 0 .55.28v5.7c0 .28-.32.45-.55.28L12 9.01V6.99l2.95-2.12z"}))},qs=n(1333),Ks=n(1334),Ys=function(e){var t=e.isAnonym,n=e.title,r=e.label,a=e.items,i=e.onChangeName,o=e.name,c=e.namePlaceholder,u=e.joinWithVideoText,l=e.joinWithAudioText,f=e.onJoinWithVideo,p=e.onJoinWithAudio,h=e.disabled,m=e.inputDisabled,v=e.callByNameShow,g=e.onCallByNameClick,b=e.onCallViaNativeAppClick,_=e.callViaNativeAppShow,y=e.callByNameTitle,E=e.callViaNativeAppTitle;return s.a.createElement("div",{className:palettePrefix(Object(d.c)("JoinScreen",{"JoinScreen--anonym":t}))},s.a.createElement(Us,null,n),s.a.createElement("div",{className:palettePrefix("JoinScreen__members")},s.a.createElement(Gs,{items:a}),s.a.createElement("div",{className:palettePrefix("JoinScreen__membersLabel")},r)),s.a.createElement("footer",{className:palettePrefix("JoinScreen__footer")},t&&s.a.createElement(Di.default,{onChange:i,className:palettePrefix("JoinScreen__input"),value:o,placeholder:c,disabled:m,maxLength:25,onKeyDown:function(e){"Enter"===e.key&&f()}}),s.a.createElement(so,{appearance:"primary",onClick:f,disabled:h,type:"submit"},s.a.createElement(Ws,{className:palettePrefix("JoinScreen__icon")}),s.a.createElement("span",null,u)),s.a.createElement(so,{appearance:"primary",title:l,"aria-label":l,onClick:p,disabled:h},s.a.createElement(Po,{className:palettePrefix("JoinScreen__icon")}))),(v||_)&&s.a.createElement(di,{border:!1,className:palettePrefix("JoinScreen__options")},_&&s.a.createElement(bi,{border:!1,selectable:!0,chevron:!0,onClick:b,icon:s.a.createElement(qs.a,{className:palettePrefix("JoinScreen__optionIcon")})},E),v&&s.a.createElement(bi,{border:!1,selectable:!0,chevron:!0,onClick:g,icon:s.a.createElement(Ks.a,{className:palettePrefix("JoinScreen__optionIcon")})},y)))};function Zs(e){var t=e.onVolumeLevelReached,n=e.needCheckMicEnabled,r=e.vectorLength,a=e.volumeLevelDetection,i=e.callbackFactorStep,o=e.sensitivityCoefficient,c=e.onVolumeLevelUpdated,s=e.debugCallback,u=function(e){var t=[],n=0;return function(r){if(t.push(r),n+=r,t.length>e){var a=t.shift();n-=a||0}return n/t.length}}(r),l=0,d=!1;return function(){for(var e=arguments.length,r=new Array(e),f=0;f<e;f++)r[f]=arguments[f];s&&s(r);var p=r[0],h=r[1],m=p>a;d!==m&&c&&c(m),d=m,0!==l&&h&&(l=0);var v=u(p);n&&h||p/v>(1+l)/o&&p>a&&(l+=i,t())}}function Qs(e,t){var n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every((function(e){return t[e]}))}function Js(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))}function Xs(e){d.y.setItem("calls_token",e)}function $s(e){var t=d.y.getItem("calls_token");return t?Promise.resolve(t):Ra(e).then((function(e){return e.token}))}function eu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eu(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nu={timeStart:null,entryPoint:null,startType:null,isGroupCall:!1,hadVideoEnabled:!1,isOutgoingCall:!1,connectionStep:null};function ru(e){switch(e){case We.ParticipantStatus.WAITING:return 1;case We.ParticipantStatus.CONNECTING:return 2;case We.ParticipantStatus.CONNECTED:return 3;default:return 0}}var au,iu=function(){return nu},ou=function(e){var t,n;nu=tu(tu(tu({},nu),e),{},{connectionStep:(t=e.connectionStep,n=nu.connectionStep,t&&ru(t)&&ru(t)>ru(n)?t:n)})},cu=function(){nu={timeStart:null,entryPoint:null,startType:null,isGroupCall:!1,hadVideoEnabled:!1,isOutgoingCall:!1,connectionStep:null}};function su(e){au=e}function uu(e,t,n,r){var a,i,o,c=iu(),s=c.startType,u=c.entryPoint,l=c.timeStart,d=c.isGroupCall,f=c.hadVideoEnabled,p=c.isOutgoingCall,h=!e||e===Se.X&&!n,m={type:s&&function(e,t,n){var r;r=e===Se.w.VIDEO?t?Se.t.GROUP_VIDEO:Se.t.VIDEO:n?t?Se.t.GROUP_AUDIO_TO_VIDEO:Se.t.AUDIO_TO_VIDEO:t?Se.t.GROUP_AUDIO:Se.t.AUDIO;return r}(s,d,f),result:h?Se.u.SUCCESS:Se.u.FAIL,failReason:h?null:lu(e,n),callSource:u,totalDuration:l?Date.now()-l:0};p&&(r&&console.log(m),a=t,o=[(i=m).type||"",i.result,i.failReason||"",i.callSource||"",i.totalDuration],au&&au({name:"call_stats",value:a,keys:o}))}function lu(e,t){var n=iu().isOutgoingCall,r=iu().connectionStep;switch(!0){case t:return Se.r.CONNECTION_LOST;case e===Se.U:return Se.r.LOCAL_DECLINE;case e===Se.bb:return Se.r.REMOTE_DECLINE;case e===Se.R:return Se.r.REMOTE_BUSY;case e===Se.Y:return n?Se.r.REMOTE_TIMEOUT:null;case r===We.ParticipantStatus.CONNECTING:return Se.r.REMOTE_FAILED_ACCEPT;case!r:return Se.r.REMOTE_NO_CONNECT;default:return null}}function du(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r="";return e&&t?r=n("calls_error_no_cam_and_mic"):e?r=n("calls_error_no_cam"):t&&(r=n("calls_error_no_mic")),r}function fu(e,t){var n;return(n={},o()(n,Se.sb.CAMERA_PERMISSION,t("calls_error_no_cam")),o()(n,Se.sb.MIC_PERMISSION,t("calls_error_no_mic")),o()(n,Se.sb.CAMERA_ACCESS,t("calls_error_cameralock")),o()(n,Se.sb.MIC_ACCESS,t("calls_error_miclock")),o()(n,Se.sb.MIC_NOT_FOUND,t("calls_error_nomic")),o()(n,Se.sb.SCREEN_PERMISSION,t("calls_error_screenpermission")),o()(n,Se.sb.SCREEN_ACCESS,t("calls_error_screenlock")),n)[e]}function pu(e,t){return function(n){e&&e({msg:n}),null!=t&&t.onError&&t.onError(new Error(n)),console.error(n)}}function hu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hu(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vu(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return gu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gu(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function gu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bu(e,t,n,r,a,i){var o,c,s,u,l,f,h,m,v=r.dispatch,g=r.getState(),b=g.me,_=Ct(wu,At.bind(null,yu.bind(null,t,e,r))),y=Ct(t.joinCallByLink,At.bind(null,yu.bind(null,t,e,r))),E={apiKey:n.key,apiEnv:n.is_dev?"VIDEOTEST":"PROD",anonymToken:n.is_anonym?n.token:"",filteredMessages:!0,batchParticipantsOnStart:!0,participantStateMapped:!0,voiceParams:{speakerLevelMultiplier:1.3,smoothing:.5},domain:i?"vk_corp":void 0,videoTracksCount:g.config.enableVideoSlots?g.config.videoSlotsCount:void 0,videoMaxHeight:g.localVideoResolution===Se.Vc.SD?Se.Uc.SD:Se.Uc.HD,videoMaxWidth:g.localVideoResolution===Se.Vc.SD?Se.Wc.SD:Se.Wc.HD,debugLog:g.config.debugLog,consumerScreenTrack:g.config.enableScreenTrack,producerScreenTrack:g.config.enableProducerScreenTrack,onLocalStream:function(t,n){e.debug&&console.warn("onLocalStream",t,n),Ec(v,b,{stream:t,mediaSettings:n}),ou({hadVideoEnabled:n.isVideoEnabled})},onLocalStreamUpdate:function(t,n){e.debug&&console.warn("onLocalStreamUpdate",t,n);var a=r.getState(),i=a.participants[b],o=i.mediaSettings,c=i.permissions,s={mediaSettings:t};c.audio!==Se.tb.ONCE&&c.video!==Se.tb.ONCE&&c.screenSharing!==Se.tb.ONCE||(s.permissions={},c.audio===Se.tb.ONCE&&null!=o&&o.isAudioEnabled&&!t.isAudioEnabled&&(s.permissions.audio=Se.tb.DENY),c.video===Se.tb.ONCE&&null!=o&&o.isVideoEnabled&&!t.isVideoEnabled&&(s.permissions.video=Se.tb.DENY),c.screenSharing===Se.tb.ONCE&&null!=o&&o.isScreenSharingEnabled&&!t.isScreenSharingEnabled&&(s.permissions.screenSharing=Se.tb.DENY)),Ec(v,b,s),t.isScreenSharingEnabled!==(null==o?void 0:o.isScreenSharingEnabled)&&(ju(a,v,t.isScreenSharingEnabled,b),t.isScreenSharingEnabled?e.eventHandlers.onScreenSharingEnabled&&e.eventHandlers.onScreenSharingEnabled():e.eventHandlers.onScreenSharingDisabled&&e.eventHandlers.onScreenSharingDisabled()),ou({hadVideoEnabled:t.isVideoEnabled})},onRemoteStream:function(t,n){e.debug&&console.warn("onRemoteStream",t.id,n),Ec(v,t.id,{stream:n})},onScreenStream:function(t,n){e.debug&&console.warn("onScreenStream",t,n),Ec(v,b,{screenSharingStream:t,mediaSettings:n})},onRemoteScreenStream:function(t,n){e.debug&&console.warn("onRemoteScreenStream",t.id,n),Ec(v,t.id,{screenSharingStream:n})},onConversation:function(n,a,i){if(e.debug&&(Object(We.debugMessage)(We.DebugMessageType.LOG,{type:"start call info",os:kc.d.OS,arch:kc.d.ARCH,isMobile:kc.d.isMobile,browser:Object(kc.e)(),config:r.getState().config,cameras:t.browser.getCameras(),microphones:t.browser.getMicrophones(),hasMicrophonePermission:t.browser.hasMicrophonePermission(),hasCameraPermission:t.browser.hasCameraPermission(),screenHeight:window.screen.availHeight,screenWidth:window.screen.availWidth,windowHeight:window.screen.height,windowWidth:window.screen.width}),console.warn("onConversation",n,a,i)),!r.getState().callData.ts){var o=Date.now();v({type:Se.Bc,data:o})}var c=r.getState().peer;if(0!==c&&Lo(0,v,c),i){v({type:Se.lb,members:i.map((function(e){return{peerId:Number(e.uid.id),mediaSettings:e.mediaSettings,status:e.status||We.ParticipantStatus.CONNECTING,statusData:e.participantState?Tu(e.participantState):void 0,wasConnected:!1}}))});var s,u=vu(i);try{for(u.s();!(s=u.n()).done;){var l,d,f,p,h=s.value,m=(null===(l=g.participants[h.uid.id])||void 0===l||null===(d=l.mediaSettings)||void 0===d?void 0:d.isScreenSharingEnabled)||!1;if((null==h||null===(f=h.mediaSettings)||void 0===f?void 0:f.isScreenSharingEnabled)!==m)ju(g,v,null==h||null===(p=h.mediaSettings)||void 0===p?void 0:p.isScreenSharingEnabled,Number(h.uid.id),!0)}}catch(e){u.e(e)}finally{u.f()}}},onRemoteMediaSettings:function(t,n){var a,i,o,c=+t.id,s=r.getState(),u=null===(a=s.participants[c])||void 0===a?void 0:a.mediaSettings;if((null==u?void 0:u.isVideoEnabled)!==n.isVideoEnabled||(null==u?void 0:u.isAudioEnabled)!==n.isAudioEnabled||(null==u?void 0:u.isScreenSharingEnabled)!==n.isScreenSharingEnabled){e.debug&&console.warn("onRemoteMediaSettings",t.id,n);var l=(null===(i=s.participants[c])||void 0===i||null===(o=i.mediaSettings)||void 0===o?void 0:o.isScreenSharingEnabled)||!1;n.isScreenSharingEnabled!==l&&ju(s,v,n.isScreenSharingEnabled,c,!0),Ec(v,c,{mediaSettings:n}),ou({hadVideoEnabled:n.isVideoEnabled})}},onRemoteStatus:function(t,n,a){var i=r.getState(),o=n;e.debug&&console.warn("onRemoteStatus",t,n,a);var c,s=[],u={},l=vu(t);try{for(l.s();!(c=l.n()).done;){var d=c.value,f=Number(d.id);i.participants[f]&&i.participants[f].mediaSettings&&i.participants[f].shortName||s.push(f),u[String(f)]={status:o,statusData:a}}}catch(e){l.e(e)}finally{l.f()}if(e&&s.length>0){var p=i.callData.callId||"",h={withConversation:!i.callData.conversation,awaitImages:!1};Fo(i,v,e,p,s,h)}if(v({type:Se.Mc,data:u}),ou({connectionStep:o}),Number(null==t?void 0:t[0].id)===i.peer){var m=function(e,t){var n={call_event_type:e,session_id:i.callData.callId,peer_id:i.peer,is_group_call:!1};t&&(n.reason=t),ot.logEvent(n)};if(o===We.ParticipantStatus.CONNECTED){if(m(Se.p.CALL_CONNECTED),!i.participants[i.peer].wasConnected&&en(i.participants[i.me])){var g=iu().startType;m(Se.p.OUTGOING_CALL_ACCEPTED_REMOTELY,null==g?void 0:g.toString())}}else o===We.ParticipantStatus.WAITING&&m(Se.p.OUTGOING_CALL_REMOTE_RINGING)}},onPermissionsError:function(n){if(e.debug&&console.warn("onPermissionsError",n),r.getState().mode===Se.ub.CALL){switch(n){case Se.sb.CAMERA_PERMISSION:case Se.sb.CAMERA_ACCESS:t.toggleLocalVideo(!1);break;case Se.sb.MIC_ACCESS:case Se.sb.MIC_NOT_FOUND:t.toggleLocalAudio(!1);break;case Se.sb.SCREEN_PERMISSION:case Se.sb.SCREEN_ACCESS:t.captureScreen(!1)}v({type:Se.G,text:fu(n,a)})}},onPermissionsRequested:function(){e.debug&&console.warn("onPermissionsRequested")},onRemoteRemoved:function(t){e.debug&&console.warn("onRemoteRemoved",t.id),v({type:Se.Lb,participantId:+t.id})},onCallState:function(t,n,a){var i,o,c;e.debug&&console.warn("onCallState",t,n,a);var s=a.id,u=a.direction;if(!s||!r.getState().callData.callId){if(v({type:Se.e,callData:{callId:s}}),!r.getState().peer){var l=Object.keys(r.getState().participants||{}).map((function(e){return Number(e)}));l.length&&Fo(g,v,e,s,[].concat(Ue()(l),[r.getState().me]),{withConversation:!0,withChatMembers:!0,withCallParticipants:!0,awaitImages:!1})}!qe(r.getState().peer||0)||"JOINING"!==u&&"OUTGOING"!==u||ot.logEvent({call_event_type:Se.p.CALL_CONNECTED,session_id:s,peer_id:r.getState().peer||0,is_group_call:!0}),null!==(i=r.getState())&&void 0!==i&&i.startOptions&&null!==(o=r.getState())&&void 0!==o&&null!==(c=o.startOptions)&&void 0!==c&&c.createLink&&Wo(v,s,r.getState().groupId)}},onRateNeeded:function(){e.debug&&console.warn("onRateNeeded")},onSpeakerChanged:function(t){var n=t.id;e.debug&&console.warn("onSpeakerChanged",n),v({type:Se.ic,orator:+n})},onJoinStatus:function(t,n){e.debug&&console.warn("onJoinStatus",t,n)},onHangup:function(n,a){var i=n.hangup;e.debug&&console.warn("onHangup",i,a);var o=i&&![Se.U,Se.Y,Se.X,Se.cb].includes(i),c=i&&i===Se.X,s=qe(r.getState().peer);if(r.getState().mode===Se.ub.CALL&&o||r.getState().localStatus===We.ParticipantStatus.WAITING_HALL&&i===Se.cb)v({type:Se.P,data:i}),ct(Se.Q,null).finally((function(){v({type:Se.g,mode:Se.ub.READY})}));else if(g.config.showFeedbackScreen&&c){var u=r.getState().callData.ts,l=(u?Math.floor((Date.now()-u)/1e3):0)>10&&0===Math.floor(3*Math.random()),d=0===Math.floor(5*Math.random());s&&l||d?(v({type:Se.qb,isOpen:!1}),v({type:Se.g,mode:Se.ub.FEEDBACK})):r.getState().mode!==Se.ub.ERROR&&v({type:Se.g,mode:Se.ub.READY})}else r.getState().mode!==Se.ub.ERROR&&v({type:Se.g,mode:Se.ub.READY});e.isInActiveCall=!1;var f=function(e){return!!Object.values(e.participants).find((function(e){return e.status===We.ParticipantStatus.RECONNECT}))}(r.getState());if(uu(i,a=a||"",f,e.debug),!f&&!s){var p="none";i===We.HangupType.MISSED?p="timeout":i===We.HangupType.BUSY&&(p="busy");var h=r.getState().callData.conversation,m={call_event_type:Se.p.CALL_DECLINED_OR_HANGED_REMOTELY,session_id:a,peer_id:(null==h?void 0:h.peerId)||0,is_group_call:!1,reason:p};ot.logEvent(m)}e.authorizedGroupId&&function(e,t,n,r){Ou(e,t,n,0,r)}(t,e,r,v),cu()},onCallAccepted:function(){e.debug&&console.warn("onCallAccepted"),qe(r.getState().peer)&&ot.logEvent({call_event_type:Se.p.CALL_CONNECTED,session_id:r.getState().callData.callId,peer_id:r.getState().peer,is_group_call:qe(r.getState().peer)})},onTokenExpired:function(){e.debug&&console.warn("onTokenExpired"),(e.tokenAttempts||0)<3&&(yu(t,e,r),e.tokenAttempts=(e.tokenAttempts||0)+1)},onDeviceChange:function(){e.debug&&console.warn("onDeviceChange")},onMultipartyChatCreated:function(){e.debug&&console.warn("onMultipartyChatCreated")},onFingerprintChange:function(t){e.debug&&console.warn("onFingerprintChange",t)},onVolumesDetected:(o={onUpdate:function(e){v({type:Se.qc,data:e})},volumeLevelDetection:Se.Tc,debugCallback:function(){e.debug}},c=o.onUpdate,s=o.volumeLevelDetection,u=o.debugCallback,l={},f=[],h={},m=[],function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];u&&u(t);var r=t[0];h=Object.keys(h).reduce((function(e,t){return h[t]-1>0&&(e[t]=h[t]-1),e}),{});var a=r.reduce((function(e,t){var n=t.uid.id;return t.volume>s&&(e[n]=!0,h[n]=3),e}),{});m=Object.keys(h);var i=!1,o={speakers:null,speakersInHeader:null};Qs(l,a)||(o.speakers=a,l=a,i=!0),Js(f,m)||(o.speakersInHeader=m,f=m,i=!0),i&&c(o)}),onLocalVolume:Zs({onVolumeLevelReached:function(){var e=r.getState();v({type:Se.d,notification:{type:Se.wb.SPEAKING_ON_MUTE}}),ot.logEvent({call_event_type:Se.p.MIC_OFF_WHILE_TALKING_ALERT,session_id:e.callData.callId,peer_id:e.peer,is_group_call:qe(e.peer)})},onVolumeLevelUpdated:function(e){var t,n=null===(t=r.getState().participants[b].mediaSettings)||void 0===t?void 0:t.isAudioEnabled,a=r.getState().speakers,i=Object.assign({},a);e&&n?i[b]=!0:e||delete i[b],i[b]!==a[b]&&v({type:Se.qc,data:{speakers:i}})},needCheckMicEnabled:!0,volumeLevelDetection:Se.Tc,vectorLength:5,callbackFactorStep:0,sensitivityCoefficient:.45,debugCallback:function(){e.debug}}),onChatMessage:function(t,n,r){e.debug&&console.warn("onChatMessage",t,n,r)},onCustomData:function(t,n){e.debug&&console.warn("onCustomData",t,n)},onNetworkStatusChanged:function(t){if(e.debug&&console.warn("onNetworkStatusChanged",t),qe(g.peer)&&g.config.badNetwork||!qe(g.peer)&&g.config.badNetworkP2P){var n,r=vu(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;Ec(v,+a.uid.id,{networkStatus:a.rating})}}catch(e){r.e(e)}finally{r.f()}}},onLocalNetworkStatusChanged:function(t){e.debug&&console.warn("onLocalNetworkStatusChanged",t),(qe(g.peer)&&g.config.badNetwork||!qe(g.peer)&&g.config.badNetworkP2P)&&Ec(v,g.me,{networkStatus:t})},onDebugMessage:function(t){if(e.debug){for(var n,r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];(n=console).warn.apply(n,["onDebugMessage",t].concat(a))}},onRemoteParticipantState:function(t,n){var a,i,o,c,s,u,l,d;n=Tu(n);var f=t.id,p=!(null===(a=r.getState().participants[f])||void 0===a||null===(i=a.statusData)||void 0===i||null===(o=i.hand)||void 0===o||!o.state);if(p!==!(null===(c=n)||void 0===c||null===(s=c.hand)||void 0===s||!s.state)){e.debug&&console.warn("onRemoteParticipantState",t,n);var h=!(null===(u=r.getState().participants[f])||void 0===u||!u.name);Ec(v,f,{statusData:n}),null!==(l=n)&&void 0!==l&&null!==(d=l.hand)&&void 0!==d&&d.state&&!p&&h&&v({type:Se.d,notification:{type:Se.wb.RAISED_HAND,data:f}})}},onRolesChanged:function(t,n){e.debug&&console.warn("onRolesChanged",t,n);var a=r.getState().participants[t.id];n.includes(We.UserRole.ADMIN)&&a&&v({type:Se.d,notification:{type:Se.wb.USER_GRANTED_WITH_ADMIN_ROLE,data:t.id}}),Ec(v,t.id,{roles:n})},onLocalRolesChanged:function(t){e.debug&&console.warn("onLocalRolesChanged",t),(t.includes(We.UserRole.ADMIN)||t.includes(We.UserRole.CREATOR))&&Ec(v,b,{permissions:{audio:Se.tb.ALLOW,video:Se.tb.ALLOW,screenSharing:Se.tb.ALLOW}}),t.includes(We.UserRole.ADMIN)&&v({type:Se.d,notification:{type:Se.wb.ADMIN_ROLE_GRANTED}}),t.includes(We.UserRole.ADMIN)||t.includes(We.UserRole.CREATOR)?g.config.allowWaitingHall&&Ye(r.getState())&&bo(r.getState(),v,!0):r.getState().waitingHall&&function(e){e({type:Se.vc,data:null})}(v),v({type:Se.i,participantId:b,data:t})},onDeviceSwitched:function(t,n){e.debug&&console.warn("onDeviceSwitched",t,n)},onUnmutePermission:function(t){e.debug&&console.warn("onUnmutePermission",t);var n=r.getState(),a=n.participants[b],i=n.popup;if(t||i!==Se.Fb||v({type:Se.Hc}),!$t(a)&&!en(a)){var o=a.permissions,c=o.audio,s=o.video,u=o.screenSharing;c===Se.tb.DENY&&s===Se.tb.DENY&&u===Se.tb.DENY||v({type:Se.d,notification:{type:t?Se.wb.ADMIN_MUTE:Se.wb.ADMIN_MUTE_PERMANENT}}),Ec(v,b,{permissions:{audio:t?Se.tb.ALLOW:Se.tb.DENY,video:t?Se.tb.ALLOW:Se.tb.DENY,screenSharing:t?Se.tb.ALLOW:Se.tb.DENY}}),t&&ot.logEvent({call_event_type:Se.p.MIC_OFF_WHILE_TALKING_ENABLE_CLICK,session_id:n.callData.callId,peer_id:n.peer,is_group_call:qe(n.peer)})}},onUnmuteRequest:function(n){var a,i;if(e.debug&&console.warn("onUnmuteRequest",n),n!==We.MediaOption.VIDEO){var o=r.getState(),c=o.participants[o.me],s=c.permissions,u=s.audio,l=s.video,d=s.screenSharing,f=on(c),p=!(null===(a=c.statusData)||void 0===a||null===(i=a.hand)||void 0===i||!i.state);p&&t.changeParticipantState({hand:Se.zc.LOWERED}).catch(console.log),Ec(v,b,mu({permissions:{audio:f?Se.tb.ONCE:u,video:f?Se.tb.ONCE:l,screenSharing:f?Se.tb.ONCE:d}},p&&{statusData:mu(mu({},c.statusData),{},{hand:{ts:Date.now(),state:!1}})})),v({type:Se.Hc,data:Se.Fb})}},onRecordStarted:function(t,n,r,a,i,o){e.debug&&console.warn("onRecordStarted",t,n,r,a);var c={isOn:!0,videoId:parseInt(i),ownerId:parseInt(o),host:t,startTime:r,link:"https://".concat(window.location.host).concat(zn(o,i)),startStreamParams:void 0};v({type:Se.tc,data:c})},onRecordStopped:function(){e.debug&&console.warn("onRecordStopped"),v({type:Se.tc,data:{isOn:!1,hasPermission:!1}})},onLocalPin:function(t){var n;e.debug&&console.warn("onLocalPin",{unpin:t});var a=r.getState(),i=a.participants[b];t||v({type:Se.d,notification:{type:Se.wb.PINNED_BY_ADMIN}}),!t&&on(i)&&Ec(v,b,{permissions:{audio:Se.tb.ONCE,video:Se.tb.ONCE,screenSharing:Se.tb.ONCE}}),t||null!==(n=i.mediaSettings)&&void 0!==n&&n.isAudioEnabled||v({type:Se.Hc,data:Se.xb}),t||a.isOratorMode||v({type:Se.Dc,isOratorMode:!0}),v({type:Se.Yb,data:t?null:b})},onPinnedParticipant:function(t,n){e.debug&&console.warn("onPinnedParticipant",t,n);var a=r.getState(),i=a.participants[t.id];!n&&i&&(null!=i&&i.shortName||null!=i&&i.name)&&v({type:Se.d,notification:{type:Se.wb.USER_PINNED_BY_ADMIN,data:t.id}}),a.isOratorMode||v({type:Se.Dc,isOratorMode:!0}),v({type:Se.Yb,data:n?null:Number(t.id)})},onOptionsChanged:function(t){e.debug&&console.warn("onOptionsChanged",t),v({type:Se.ac,data:t})},onLocalStatus:function(t){e.debug&&console.warn("onLocalStatus",t);var n=r.getState(),a=n.callData,i=n.me;n.participants[i].status!==We.ParticipantStatus.WAITING_HALL||t!==We.ParticipantStatus.WAITING||Lt(i)||null!=a&&a.callId&&Fa([a.callId]).then((function(e){var t=e.items,n=p()(t,1)[0].peer.id;return Cu(r,n,void 0).then((function(e){return ho(e)})).then((function(){return n}))})).catch((function(e){var t;8===(null==e||null===(t=e.error)||void 0===t?void 0:t.error_code)&&Promise.resolve(0)})),v({type:Se.gc,data:t}),Ec(v,n.me,{status:t,wasConnected:!0})},onChatRoomUpdated:function(t,n,a){e.debug&&console.warn("onChatRoomUpdated",t,n,a),t===We.ChatRoomEventType.ATTENDEE&&go(n,a,r.getState(),v)}};e.authorized=!1,e.authorizedGroupId=0,e.debugMessage=We.debugMessage,e.call=function(e,t,n,r,a){var i=r.dispatch;return function(o,c,s,u){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,d=Je({video:c,audio:!0});return e.isInActiveCall?Promise.reject(Se.q.ALREADY_IN_CALL).catch(_u):(e.isInActiveCall=!0,Promise.resolve().then((function(){i({type:Se.xc,isLoaderVisible:!0})})).then((function(){return Eu(e)})).then((function(){return Ou(t,e,r,l,i)})).then((function(){return na(t,d)})).then((function(){return Cu(r,o,s)})).then((function(n){return Promise.all([ho(n),a(e,t,r,d,o)])})).then((function(){i({type:Se.xc,isLoaderVisible:!1}),i({type:Se.g,mode:Se.ub.CALL,peerId:o}),ou({timeStart:Date.now(),isOutgoingCall:!0,entryPoint:u,startType:c?Se.w.VIDEO:Se.w.AUDIO}),ot.logEvent({call_event_type:c?Se.p.OUTGOING_CALL_STARTED_VIDEO:Se.p.OUTGOING_CALL_STARTED_AUDIO,session_id:r.getState().callData.callId,peer_id:o,is_group_call:!1,source:u,group_call_users_count:2}),Su(r,o,s)})).catch((function(r){e.isInActiveCall=!1,i({type:Se.xc,isLoaderVisible:!1}),ku(r,t,e,qe(o),n,i)})))}}(e,t,a,r,_),e.startGroupCall=function(e,t,n,r,a){var i=r.dispatch;return function(o,c,s,u,l){var d=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,p=Je({video:u,audio:!0}),h=s?s.filter(ze):[];return e.debug&&s&&s.length!==h.length&&console.warn("Some ids cannot get into the call.",s.filter((function(e){return!ze(e)}))),e.isInActiveCall?Promise.reject(Se.q.ALREADY_IN_CALL).catch(_u):(e.isInActiveCall=!0,Promise.resolve().then((function(){i({type:Se.xc,isLoaderVisible:!0})})).then((function(){return Eu(e)})).then((function(){return Ou(t,e,r,0,i)})).then((function(){return na(t,p)})).then((function(){return Cu(r,o,c)})).then((function(e){return xo(r.getState(),i,o,e[0])})).then((function(){return a(e,t,r,p,o)})).then((function(){i({type:Se.xc,isLoaderVisible:!1}),i({type:Se.g,mode:Se.ub.CALL,peerId:o}),d&&(h&&h.length?i({type:Se.O,open:!0,peerId:o,preselectedIds:h}):i({type:Se.qb,isOpen:!0})),f&&i({type:Se.tc,data:{deferredId:f}}),Su(r,o,c),ou({timeStart:Date.now(),isOutgoingCall:!0,startType:u?Se.w.VIDEO:Se.w.AUDIO,entryPoint:l,isGroupCall:!0}),ot.logEvent({call_event_type:u?Se.p.OUTGOING_CALL_STARTED_VIDEO:Se.p.OUTGOING_CALL_STARTED_AUDIO,session_id:r.getState().callData.callId,peer_id:o,is_group_call:!0,source:l,group_call_users_count:1})})).catch((function(r){e.isInActiveCall=!1,i({type:Se.xc,isLoaderVisible:!1}),ku(r,t,e,qe(o),n,i)})))}}(e,t,a,r,_),e.startCall=function(e,t,n,r,a){var i=r.dispatch;return function(o,c){var s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},d=Je({video:o,audio:!0});if(e.isInActiveCall)return Promise.reject(Se.q.ALREADY_IN_CALL).catch(_u);e.isInActiveCall=!0;var f=Ze(n);return Promise.resolve().then((function(){i({type:Se.xc,isLoaderVisible:!0})})).then((function(){return Eu(e)})).then((function(){return Ou(t,e,r,u,i)})).then((function(){return na(t,d)})).then((function(){return Promise.all([a(e,t,r,d),ho([f])])})).then((function(){l&&l.conversationOptions&&Object.keys(l.conversationOptions).length>0&&t.changeConversationOptions(l.conversationOptions)})).then((function(){i({type:Se.xc,isLoaderVisible:!1}),i({type:Se.lb,conversation:f,members:[],peerId:0}),i({type:Se.g,mode:Se.ub.CALL}),s&&i({type:Se.qb,isOpen:!0});var e=r.getState().callData.callId;null!=l&&l.createLink&&(e?Wo(i,e,u):i({type:Se.rc,data:l})),ou({timeStart:Date.now(),isOutgoingCall:!0,entryPoint:c,startType:o?Se.w.VIDEO:Se.w.AUDIO,isGroupCall:!0}),ot.logEvent({call_event_type:o?Se.p.OUTGOING_CALL_STARTED_VIDEO:Se.p.OUTGOING_CALL_STARTED_AUDIO,session_id:e,peer_id:0,is_group_call:!0,source:c,group_call_users_count:1})})).catch((function(r){e.isInActiveCall=!1,i({type:Se.xc,isLoaderVisible:!1}),ku(r,t,e,!0,n,i)}))}}(e,t,a,r,_),e.joinCallByLink=function(e,t,n,r,a){var i=r.dispatch;return function(o,c){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=arguments.length>3?arguments[3]:void 0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,f=Je({video:s,audio:!0});return e.isInActiveCall?Promise.reject(Se.q.ALREADY_IN_CALL).catch(_u):(e.isInActiveCall=!0,Lt(r.getState().me)?Promise.resolve().then((function(){i({type:Se.xc,isLoaderVisible:!0})})).then((function(){return Eu(e)})).then((function(){return na(t,f)})).then((function(){return a(o,f).then((function(){i({type:Se.xc,isLoaderVisible:!1}),i({type:Se.g,mode:Se.ub.CALL})}))})).catch((function(r){e.isInActiveCall=!1,i({type:Se.xc,isLoaderVisible:!1}),ku(r,t,e,!0,n,i)})):Promise.resolve().then((function(){i({type:Se.xc,isLoaderVisible:!0})})).then((function(){return Eu(e)})).then((function(){return Ou(t,e,r,l,i)})).then((function(){return na(t,f)})).then((function(){return a(o,f)})).then((function(e){var t=e.id;return Fa([t])})).then((function(e){var t=e.items,n=p()(t,1)[0].peer.id;return Cu(r,n,c).then((function(e){return ho(e)})),n})).catch((function(e){var t,n;if(8===(null==e||null===(t=e.error)||void 0===t?void 0:t.error_code))return 0;if(951===(null==e||null===(n=e.error)||void 0===n?void 0:n.error_code))return 0;throw e})).then((function(e){i({type:Se.xc,isLoaderVisible:!1}),i({type:Se.g,mode:Se.ub.CALL,peerId:e}),d&&i({type:Se.tc,data:{deferredId:d}}),e&&Su(r,e,c),ot.logEvent({call_event_type:Se.p.GROUP_CALL_JOINED,session_id:r.getState().callData.callId,peer_id:null!=e?e:0,is_group_call:!0,source:u,group_call_users_count:Kt(r.getState())})})).catch((function(r){e.isInActiveCall=!1,i({type:Se.xc,isLoaderVisible:!1}),ku(r,t,e,!0,n,i)})))}}(e,t,a,r,y),e.showJoinPopup=function(e,t,n){var r=n.dispatch;return function(a,i){var o=n.getState().mode;return o===Se.ub.CALL||o===Se.ub.INCOMING?Promise.reject(Se.q.ALREADY_IN_CALL).catch((function(){r({type:Se.G,text:t("calls_already_in_call_error")})})):(r({type:Se.xc,isLoaderVisible:!0}),La(a).then(Tt.bind(null,t)).then((function(e){r({type:Se.xc,isLoaderVisible:!1}),r({type:Se.jb,data:mu(mu({},e),{},{entryPoint:i})})})).catch((function(n){var a;e.eventHandlers.onError&&n&&e.eventHandlers.onError(n),e.debug&&console.warn("getJoinLinkDetails",n);var i=Et(null==n||null===(a=n.error)||void 0===a?void 0:a.error_code,!0,t);console.error(i),r({type:Se.xc,isLoaderVisible:!1}),r({type:Se.G,text:i,handleType:Se.J.FATAL})})))}}(e,a,r),e.acceptCall=function(e,t,n,r){var a=r.dispatch;return function(i,o){var c=r.getState(),s=c.peer,u=c.callData,l=Je({video:i,audio:o});return na(t,l).then((function(){return t.acceptCall(l)})).then((function(t){var n=t.acceptTime;a({type:Se.g,mode:Se.ub.CALL,ts:n}),e.isInActiveCall=!0,ot.logEvent({call_event_type:Se.p.INCOMING_CALL_ACCEPTED,session_id:u.callId,peer_id:s,is_group_call:qe(s),reason:i?Se.w.VIDEO:Se.w.AUDIO})})).catch((function(t){a({type:Se.G,text:du(i,!0,n),handleType:Se.J.DECLINE}),e.eventHandlers.onError&&t&&e.eventHandlers.onError(t),Object(We.debugMessage)(We.DebugMessageType.ERROR,t),console.error(t)}))}}(e,t,a,r),e.showCallByNamePopup=function(e,t,n,r){var a=r.dispatch;return function(e,t,i){var o=r.getState().mode;return o===Se.ub.CALL||o===Se.ub.INCOMING?Promise.reject(Se.q.ALREADY_IN_CALL).catch((function(){a({type:Se.G,text:n("calls_already_in_call_error")})})):Promise.resolve().then((function(){a({type:Se.xc,isLoaderVisible:!0})})).then((function(){a({type:Se.xc,isLoaderVisible:!1}),a({type:Se.c,data:{peerId:e,joinLink:i,entryPoint:t}})})).catch((function(){a({type:Se.xc,isLoaderVisible:!1})}))}}(0,0,a,r),e.showCreateCallByLinkPopup=function(e,t,n,r){var a=r.dispatch;return function(e){var t=r.getState().mode;return t===Se.ub.CALL||t===Se.ub.INCOMING?Promise.reject(Se.q.ALREADY_IN_CALL).catch(_u):Promise.resolve().then((function(){a({type:Se.g,mode:Se.ub.CREATE_CALL,entryPoint:e})}))}}(0,0,0,r),e.store=r;var O=n.token?Promise.resolve(n.token):$s(n.is_dev),w=function(n){return Promise.resolve().then((function(){return Lt(r.getState().me)?Promise.resolve():t.authorize(n).then((function(){return Xs(n)})).then((function(){return e.authorized=!0})).catch((function(e){throw d.y.removeItem("calls_token"),e}))}))};return O.then((function(n){return t.init(E).then((function(){g.config.debugLog&&e.setDebug(!0)})).then((function(){return w(n)}))}))}function _u(e){switch(e){case Se.q.ALREADY_IN_CALL:console.log("Already in call");break;default:console.log(e)}}function yu(e,t,n){return function(e,t,n){return Ra(n.getState().isDev).then((function(n){var r=n.token;return e.authorize(r).then((function(){return Xs(r)})).then((function(){return t.authorized=!0}))}))}(e,t,n).catch((function(e){t.eventHandlers.onError&&e&&t.eventHandlers.onError(e),console.error("Could not authorize with token request",e)}))}function Eu(e){return new Promise((function(t){e.initializing.finally((function(){t()}))}))}function Ou(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return new Promise((function(o,c){r||t.authorizedGroupId||o(),r&&t.authorizedGroupId===r&&o(),i||(ot.setEventCommonData(),a({type:Se.fc,groupMembersCount:0,groupMembers:[],unableToCallGroupMembersIds:[]})),Ra(n.getState().isDev,r).then((function(n){var s=n.token;e.authorize(s).then((function(){t.authorizedGroupId=r,i?o():r?Ha(-r).then((function(e){if(e.groups){var t=e.groups[0];a({type:Se.ec,groupId:r,meGroup:Dt(t)}),ot.setEventCommonData({group_id:r}),o()}})).catch((function(e){c(e)})):o()}))}))}))}function wu(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],o=wt(a,r);if(!a)return t.callTo(void 0,r,o,!0);if(!qe(a))return Iu(e,n,a).then((function(e){return t.forceRelayPolicy(e),t.callTo(a.toString(),r,o)}));var c=i.filter((function(e){return ze(e=Number(e))&&e!==n.getState().me}));return t.callTo(c,r,o,!0)}function Cu(e,t,n){var r=e.dispatch;return!!n||t?(n?Promise.resolve(vt(n)):xa(t).then(gt)).then((function(e){var n=p()(e,3),a=n[0],i=n[1],o=n[2];return Uo(r,o||a),r({type:Se.lb,conversation:a,members:i,peerId:t}),e})):Promise.reject("Cannot load data")}function Su(e,t,n){var r=e.dispatch;return!!n&&t?xa(t).then((function(e){var t=gt(e),n=p()(t,2),a=n[0],i=n[1];return Uo(r,e.items[0]),ho([a,i])})).then((function(e){var t=p()(e,2),n=t[0],a=t[1];r({type:Se.lb,conversation:n,members:a})})):Promise.resolve()}function Au(e,t,n){switch(!0){case function(e){var t=e||{},n=t.hangup,r=t.message;return!(!n||!r)}(e):case function(e){var t=e||{},n=t.hangup;return t.message&&void 0===n}(e):return Ot(e.message,t,n);case function(e){var t;return["TypeError","SyntaxError","RangeError","EvalError","URIError"].includes(null==e||null===(t=e.__proto__)||void 0===t?void 0:t.name)}(e):return n("calls_error");case function(e){return!!e.error_msg}(e):return Ot(e.error_msg,t,n);case function(e){return"number"==typeof e}(e):return function(e,t,n){return n("calls_sorry_error")}(0,0,n);case function(e){return!!e}(e):default:return n("calls_sorry_error")}}function ku(e,t,n,r,a,i){try{var o,c,s=Au(e,r,a);if(t.hangup(),n.eventHandlers.onError&&e&&n.eventHandlers.onError(e),Object(We.debugMessage)(We.DebugMessageType.ERROR,e),console.error(e),i({type:Se.G,text:s,handleType:Se.J.FATAL}),null!==(o=n.eventHandlers)&&void 0!==o&&o.onErrorStartCall)null===(c=n.eventHandlers)||void 0===c||c.onErrorStartCall()}catch(n){throw Object(We.debugMessage)(We.DebugMessageType.ERROR,n),console.error(n),t.hangup(),e}}function ju(e,t,n,r,a){var i,o,c=Object.keys(e.screenSharers).filter((function(t){return e.screenSharers[t]})).length,s=function(n,r){var a=function(e){t({type:Se.Dc,isOratorMode:e})},i=function(e){t({type:Se.kc,pinnedParticipant:e})};n&&!e.isOratorMode&&a(!0),!n&&e.screenSharingNeedDisableOratorModeAfterStop&&a(!1),t({type:Se.oc,screenSharingPinnedParticipant:r,screenSharingNeedDisableOratorModeAfterStop:!e.isOratorMode,screenSharingOldPinnedParticipant:e.pinnedParticipant}),r&&e.pinnedParticipant&&i(null),r||e.pinnedParticipant||!e.screenSharingOldPinnedParticipant||i(e.screenSharingOldPinnedParticipant)};0===c&&n?s(!0,r):1!==c||n||s(!(!e.adminPinnedParticipant&&!e.pinnedParticipant),null),!(null===(i=e.participants[r])||void 0===i||null===(o=i.mediaSettings)||void 0===o||!o.isScreenSharingEnabled)!==n&&t({type:Se.nc,participantId:r,isScreenSharingEnabled:n}),n&&a&&t({type:Se.d,notification:{type:Se.wb.SCREEN_SHARING_STARTED,data:r}})}function Tu(e){var t,n;return e.hand?mu(mu({},e),{},{hand:{state:(null==e||null===(t=e.hand)||void 0===t?void 0:t.state)===Se.zc.RAISED,ts:null==e||null===(n=e.hand)||void 0===n?void 0:n.ts}}):e}function Iu(e,t,n){var r=t.getState();return r.ipSettingEnabled&&"all"!==r.privacySettings.callsIp?Ge(n)?Promise.resolve(!0):e.isFriend?Promise.resolve(!e.isFriend(n)):Object.keys(r.friendsCache).length>0?Promise.resolve(!r.friendsCache[n]):St(No)(e,r,t.dispatch).then((function(){return Iu(e,t,n)})):Promise.resolve(!1)}var Pu=function(e){var t=e.isAnonym,n=e.joinLink,r=e.vkJoinLink,a=e.title,i=e.members,o=e.membersCount,u=e.conversationData,l=e.withPopup,d=e.onBeforeCallStart,f=e.onAfterCallFinish,h=e.onClose,m=e.bridge,v=e.entryPoint,g=e.tabIsMaster,b=e.tabIsIdle,_=e.onError,y=e.isDev,E=e.okPublicKey,O=s.a.useContext(Pn),w=O.getLang,C=O.langNumeric,S=Object(c.useState)(""),A=p()(S,2),k=A[0],j=A[1],T=Object(c.useState)(null),I=p()(T,2),P=I[0],D=I[1],N=Object(c.useState)(!1),x=p()(N,2),R=x[0],M=x[1],L=!1,B=s.a.useContext(He),F=B.allowCallByName,H=B.nativeAppJoin,V=i?i.slice(0,3).map((function(e){var t=e.firstName||e.shortName||e.name||"";return e.photo_100?{src:e.photo_100,alt:t,key:e.peerId}:{id:e.peerId,text:t.slice(0,1)}})):[],U=Object(c.useCallback)((function(e){j(e.target.value)}),[]),z=Object(c.useCallback)((function(e){if(t)return L?Promise.resolve():(L=!0,function(e,t,n,r,a,i){if(e)return Promise.resolve(e);return La(n,!0).then((function(e){var o=e.secret,c=void 0===o?"":o,s=e.user_id,u=void 0===s?0:s,l=e.preview;return function(e,t,n,r){return Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"request",method:"messages.getAnonymCallToken",data:{link:e,user_id:t,name:n,secret:r,device_id:"anyId"}}),Ca(!1)()("messages.getAnonymCallToken",{link:e,user_id:t,name:n,secret:r,device_id:"anyId"}).then((function(e){return Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"response",method:"messages.getAnonymCallToken",data:e}),e}))}(n,u,r,c).then((function(e){var n=e.token,o=e.secret,c=void 0===o?"":o,s={is_dev:Du(i),key:a,token:n,ok_user:u,secret:c,is_anonym:!0,me:{canAddMembers:!1,firstName:r,peerId:u,id:u,sex:"0",shortName:r,name:r,lastName:"",link:"",photo:"",photo_100:""}},d={callPreview:{tab:l.title,photo:l.photo.photo_200},callsCredentials:s,participantLimit:128,callsOkStaging:Du(i),callsLogging:!1,CallsIncomingCall:!1,callsAllowBanParticipant:!1,callsFeedbackScreenEnabled:!1,callsVideoSlotsEnabled:!0,videoSlotsCount:Se.Sc,callsAllowCallByName:!1,callsNativeApp:!1,callsNativeAppJoin:!1,callsEnableScreenTrack:!0,callsEnableProducerScreenTrack:!0,callsAllowWaitingHall:!1,callsAllowPushToTalk:!1,callsBadNetwork:!1,callsBadNetworkP2P:!1,callsDesktopAppNotification:!1};return t(d),d}))}))}(P,D,r,k,E,y).then((function(e){return function(e){var t=e.bridge,n=e.inited,r=e.setInited,a=e.data,i=e.onBeforeCallStart,o=e.onAfterCallFinish,c=e.tabIsMaster,s=e.tabIsIdle,u=e.langUtils;if(n)return Promise.resolve();var l=a.callPreview,d=a.callsCredentials,f=a.participantLimit,p=a.callsOkStaging,h=a.callsLogging,m=a.CallsIncomingCall,v=a.callsAllowBanParticipant,g=a.callsFeedbackScreenEnabled,b=a.callsVideoSlotsEnabled,_=a.videoSlotsCount,y=a.callsAllowCallByName,E=a.callsNativeApp,O=a.callsNativeAppJoin,w=a.callsEnableScreenTrack,C=a.callsEnableProducerScreenTrack,S=a.callsAllowWaitingHall,A=a.callsAllowPushToTalk,k=a.callsBadNetwork,j=a.callsBadNetworkP2P,T=a.callsDesktopAppNotification;return t.init({callPreview:l,callsCredentials:d,imHash:"",participantLimit:f,callsOkStaging:p,onBeforeCallStart:i,onAfterCallFinish:o,tabIsMaster:c,tabIsIdle:s,langUtils:u,toggles:{debugLog:h,incomingCall:m,allowBanParticipant:v,showFeedbackScreen:g,enableVideoSlots:b,videoSlotsCount:_,allowCallByName:y,nativeApp:E,nativeAppJoin:O,enableScreenTrack:w,enableProducerScreenTrack:C,allowWaitingHall:S,allowPushToTalk:A,badNetwork:k,badNetworkP2P:j,desktopAppNotification:T}}).then((function(){return r(!0)}))}({bridge:m,inited:R,setInited:M,data:e,onBeforeCallStart:d,onAfterCallFinish:f,tabIsMaster:g,tabIsIdle:b,langUtils:O})})).then((function(){return m.joinCallByLink(n,null,e,v)})).catch((function(e){m.eventHandlers.onError&&e&&m.eventHandlers.onError(e);var t="";t="string"==typeof e?e:e&&e.error&&e.error.error_code?Et(e.error.error_code,!0,w):Au(e,!0,w)||w("calls_unknown_error"),_&&_(t)})).finally((function(){L=!1})));if(h&&h(),!u)throw Error("no peer_id to join");return m.joinCallByLink(n,[u,i],e,v).catch((function(e){var t="";t="string"==typeof e?e:e&&e.error&&e.error.error_code?Et(e.error.error_code,!0,w):w("calls_unknown_error"),_&&_(t)})),Promise.resolve()}),[n,h,k,P,R,E]),G=Object(c.useCallback)((function(){h&&h()}),[h]),W=Object(c.useMemo)((function(){return ut(lt(a))}),[a]),q=Object(c.useCallback)((function(){m.showCallByNamePopup(null,v,n)}),[]),K=Object(c.useCallback)((function(){m.showStartCallModal(null,n)}),[]),Y=s.a.createElement(Ys,{isAnonym:t,name:k,onChangeName:U,namePlaceholder:w("calls_name_placeholder"),title:W,label:kt(i||[],V,(function(e){return Bt(e.peerId)?e.name:e.firstName}),w,C,o),items:V,joinWithVideoText:w("calls_join_with_video"),joinWithAudioText:w("calls_join_with_audio"),onJoinWithVideo:function(){return z(!0)},onJoinWithAudio:function(){return z(!1)},disabled:t&&!/^[A-Za-zА-Яа-яЁё0-9_\- ]{2,25}$/.test(k),inputDisabled:!!P,callByNameShow:F&&!t,callByNameTitle:w("calls_call_by_name_join_by"),callByNameDescription:"",onCallByNameClick:q,callViaNativeAppShow:H&&!t,callViaNativeAppTitle:w("calls_call_via_native_app_join"),onCallViaNativeAppClick:K});return l?s.a.createElement(Rn,{onClose:G},s.a.createElement(si,{title:w("calls_invite"),onClose:G}),Y):Y},Du=function(e){return void 0!==e?e:!(!window.vk||void 0===window.vk.isCallsDevEnv)&&window.vk.isCallsDevEnv};var Nu,xu=function(e){var t=e.children;return s.a.createElement("div",{className:palettePrefix("ErrorPopupText")},t)},Ru=function(e){var t=e.title,n=e.onClose,r=e.actionButtons,a=e.text;return s.a.createElement(Ms,{appearance:"blue",title:t,onClose:n,actionButtons:r,className:palettePrefix("CallError")},s.a.createElement(xu,null,a))},Mu=function(e){var t=e.title,n=e.text,r=e.onCloseFatal,a=e.handleType,i=e.callId,o=e.bridge,c=_e(),u=s.a.useContext(Pn).getLang,l=function(){switch(c({type:Se.G,isClosed:!0}),a){case Se.J.FATAL:r();break;case Se.J.DECLINE:Object(We.declineCall)().catch((function(){}));break;case Se.J.PROCESS:Object(We.processPush)(i||"").then((function(){Object(We.declineCall)().catch((function(){}))})).catch((function(e){o.debug&&console.error("Delayed by error push process error",e)}))}},d=n||u("calls_error"),f=d.match(/<\s?[a-zA-Z0-9]+\s?\/?>/)?s.a.createElement("span",{dangerouslySetInnerHTML:{__html:d}}):d;return s.a.createElement(Ru,{title:t||u("calls_oops"),onClose:l,actionButtons:s.a.createElement(so,{onClick:l},u("calls_close")),text:f})},Lu=function(e){var t=e.onClose,n=e.actionButtons,r=s.a.useContext(Pn).getLang;return s.a.createElement(Ms,{onClose:t,title:r("calls_exit_menu"),appearance:"blue",actionButtons:n,className:palettePrefix("CallExitModal")},s.a.createElement("div",{className:palettePrefix("CallExitModal__text")},r("calls_sure_leave_call")))},Bu=function(e){var t=e.SDK,n=we((function(e){return e})),r=_e(),a=s.a.useContext(Pn).getLang,i=function(){return ot.logEvent({call_event_type:Se.p.CALL_DECLINED_OR_HANGED_LOCALLY,session_id:n.callData.callId,peer_id:n.peer,is_group_call:qe(n.peer),reason:"none",group_call_users_count:Kt(n)})},o=Object(c.useCallback)((function(){r({type:Se.Hc})}),[]);return s.a.createElement(Lu,{onClose:o,actionButtons:[s.a.createElement(so,{onClick:function(){r({type:Se.Hc}),i(),ac(0,n,r,a)},key:"forceCallFinish",appearance:"secondary"},a("calls_force_call_finish")),s.a.createElement(so,{onClick:function(){return r({type:Se.Hc}),i(),t.hangup()},key:"leave"},a("calls_leave_call"))]})};!function(e){e.CONTAIN="cn",e.COVER="cv"}(Nu||(Nu={}));function Fu(e,t,n){return qe(e.peer)?e.uiMode===Se.Ic.COLLAPSED?function(e){var t=yt(e),n=Gt(e,t),r=qt(e,!0),a=e.config,i=a.enableScreenTrack,o=a.enableProducerScreenTrack;return r.reduce((function(t,r){var a=r.peerId,c=r.mediaSettings;if(a===e.me)return t;if(i||o){var s=Boolean(null==c?void 0:c.isScreenSharingEnabled),u=Boolean(null==c?void 0:c.isVideoEnabled),l=a===(null==n?void 0:n.peerId);l&&s&&(t.set(Ku(a,We.MediaType.SCREEN),Uu(n,We.MediaType.SCREEN)),t.set(Ku(a,We.MediaType.CAMERA),Vu(r,We.MediaType.CAMERA))),l&&!s&&u&&(t.set(Ku(a,We.MediaType.CAMERA),Uu(n,We.MediaType.CAMERA)),t.set(Ku(a,We.MediaType.SCREEN),Vu(r,We.MediaType.SCREEN))),l&&(s||u)||(t.set(Ku(a,We.MediaType.SCREEN),Vu(r,We.MediaType.SCREEN)),t.set(Ku(a,We.MediaType.CAMERA),Vu(r,We.MediaType.CAMERA)))}else a===(null==n?void 0:n.peerId)&&qu(c)?t.set(a,Uu(n)):t.set(a,Vu(r));return t}),new Map)}(e):e.isOratorMode?function(e,t,n){var r=e.adminPinnedParticipant||e.screenSharingPinnedParticipant||e.pinnedParticipant||e.orator||e.me,a=qt(e,!0),i=0,o=e.config,c=o.enableScreenTrack,s=o.enableProducerScreenTrack;if(c||s){var u,l,d,f,p=new Map,h=Boolean(null===(u=e.participants[r])||void 0===u||null===(l=u.mediaSettings)||void 0===l?void 0:l.isScreenSharingEnabled),m=Boolean(null===(d=e.participants[r])||void 0===d||null===(f=d.mediaSettings)||void 0===f?void 0:f.isVideoEnabled),v=e.uiMode===Se.Ic.FULLSCREEN,g=r!==e.me;return h&&g&&(i++,p.set(Ku(r,We.MediaType.SCREEN),Gu(e.participants[r],v,!1,t,n,We.MediaType.SCREEN))),h&&m&&g&&(i++,p.set(Ku(r,We.MediaType.CAMERA),Wu(e.participants[r],We.MediaType.CAMERA))),h&&!m&&g&&p.set(Ku(r,We.MediaType.CAMERA),Vu(e.participants[r],We.MediaType.CAMERA)),!h&&m&&g&&(i++,p.set(Ku(r,We.MediaType.CAMERA),Gu(e.participants[r],v,!1,t,n,We.MediaType.CAMERA)),p.set(Ku(r,We.MediaType.SCREEN),Vu(e.participants[r],We.MediaType.SCREEN))),h||m||!g||(p.set(Ku(r,We.MediaType.CAMERA),Vu(e.participants[r],We.MediaType.CAMERA)),p.set(Ku(r,We.MediaType.SCREEN),Vu(e.participants[r],We.MediaType.SCREEN))),a.reduce((function(t,n){var a=n.peerId,o=n.mediaSettings;if(a===e.me||a===r)return t;var c=Boolean(null==o?void 0:o.isScreenSharingEnabled),s=Boolean(null==o?void 0:o.isVideoEnabled),u=n.visible&&i<=e.config.videoSlotsCount;return u&&s&&(i++,t.set(Ku(a,We.MediaType.CAMERA),Wu(n,We.MediaType.CAMERA)),t.set(Ku(a,We.MediaType.SCREEN),Vu(n,We.MediaType.SCREEN))),u&&!s&&c&&(i++,t.set(Ku(a,We.MediaType.SCREEN),Wu(n,We.MediaType.SCREEN)),t.set(Ku(a,We.MediaType.CAMERA),Vu(n,We.MediaType.CAMERA))),u&&(s||c)||(t.set(Ku(a,We.MediaType.SCREEN),Vu(n,We.MediaType.SCREEN)),t.set(Ku(a,We.MediaType.CAMERA),Vu(n,We.MediaType.CAMERA))),t}),p),p}return a.reduce((function(a,o){var c=o.peerId,s=o.mediaSettings;if(c===e.me)return a;if(r===c&&qu(s)){var u=Gu(o,e.uiMode===Se.Ic.FULLSCREEN,!1,t,n);a.set(o.peerId,u)}else qu(s)&&o.visible&&i<=e.config.videoSlotsCount?(i++,a.set(o.peerId,Wu(o))):a.set(o.peerId,Vu(o));return a}),new Map)}(e,t,n):function(e,t,n){var r=e.uiMode===Se.Ic.FULLSCREEN,a=r?t:900,i=r?n:504,o=qt(e,!0),c=function(e,t,n){switch(n){case 1:return t;case 2:return Math.round(e/2);case 3:return Math.round(e/3);case 4:case 5:case 6:return Math.round(t/2);case 7:case 8:return Math.round(e/4);case 9:case 10:return Math.round(e/5);case 11:case 12:case 13:case 14:case 15:return Math.round(t/3);default:return Math.round(e/6)}}(a,i,o.length),s=c<200?1:2,u=0,l=e.config,d=l.enableScreenTrack,f=l.enableProducerScreenTrack;return o.reduce((function(t,n){if(!Ft(n)||n.peerId===e.me)return t;var r=n.peerId,a=n.mediaSettings;if(d||f){var i=Boolean(null==a?void 0:a.isScreenSharingEnabled),o=Boolean(null==a?void 0:a.isVideoEnabled),l=n.visible&&u<=e.config.videoSlotsCount;return l&&i&&(u++,t.set(Ku(r,We.MediaType.SCREEN),zu(n,c,s,We.MediaType.SCREEN)),t.set(Ku(r,We.MediaType.CAMERA),Vu(n,We.MediaType.CAMERA))),l&&!i&&o&&(u++,t.set(Ku(r,We.MediaType.CAMERA),zu(n,c,s,We.MediaType.CAMERA)),t.set(Ku(r,We.MediaType.SCREEN),Vu(n,We.MediaType.SCREEN))),l&&(i||o)||(t.set(Ku(r,We.MediaType.CAMERA),Vu(n,We.MediaType.CAMERA)),t.set(Ku(r,We.MediaType.SCREEN),Vu(n,We.MediaType.SCREEN))),t}return qu(a)&&n.visible&&u<=e.config.videoSlotsCount?(t.set(n.peerId,zu(n,c,s)),u++):t.set(n.peerId,Vu(n)),t}),new Map)}(e,t,n):function(e,t,n){var r=new Map,a=e.participants[e.peer];if(!a)return r;var i=e.config,o=i.enableScreenTrack,c=i.enableProducerScreenTrack,s=e.uiMode===Se.Ic.FULLSCREEN,u=e.uiMode===Se.Ic.COLLAPSED,l=a.peerId,d=a.mediaSettings;if(l===e.me)return r;if(o||c){var f=Boolean(null==d?void 0:d.isScreenSharingEnabled),p=Boolean(null==d?void 0:d.isVideoEnabled);if(f&&p&&(r.set(Ku(l,We.MediaType.SCREEN),Gu(a,s,u,t,n,We.MediaType.SCREEN)),r.set(Ku(l,We.MediaType.CAMERA),Wu(a,We.MediaType.CAMERA))),f!==p){var h=f?We.MediaType.SCREEN:We.MediaType.CAMERA,m=f?We.MediaType.CAMERA:We.MediaType.SCREEN;r.set(Ku(l,h),Gu(a,s,u,t,n,h)),r.set(Ku(l,m),Vu(a,m))}return f||p||(r.set(Ku(l,We.MediaType.SCREEN),Vu(a,We.MediaType.SCREEN)),r.set(Ku(l,We.MediaType.CAMERA),Vu(a,We.MediaType.CAMERA))),r}return r.set(a.peerId,qu(d)?Gu(a,s,u,t,n):Vu(a)),r}(e,t,n)}function Hu(e){return e&&!e.stopStream}function Vu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Ft(e);return{stopStream:!0,uid:n||"",mediaType:t}}function Uu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Ft(e);return{fit:Nu.CONTAIN,width:265,height:200,priority:2,uid:n||"",keyFrame:!1,mediaType:t}}function zu(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=Ft(e);return{fit:Nu.COVER,width:t,height:t,priority:n,uid:a||"",keyFrame:!1,mediaType:r}}function Gu(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=Ft(e);return{fit:Nu.CONTAIN,width:t?r:n?265:900,height:t?a:n?200:504,priority:3,uid:o||"",keyFrame:!1,mediaType:i}}function Wu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.mediaSettings,r=Ft(e);return{fit:null!=n&&n.isScreenSharingEnabled?Nu.CONTAIN:Nu.COVER,width:140,height:140,priority:1,uid:r||"",keyFrame:!1,mediaType:t}}function qu(e){var t;return null!==(t=!(null==e||!e.isVideoEnabled)||!(null==e||!e.isScreenSharingEnabled))&&void 0!==t&&t}function Ku(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?e+":"+t:e}var Yu=function(e,t){var n=Object(c.useState)([0,0]),r=p()(n,2),a=p()(r[0],2),i=a[0],o=a[1],s=r[1],u=Object(c.useRef)(new Map);Object(c.useEffect)((function(){var e=function(){return s([window.innerWidth,window.innerHeight])};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),Object(c.useEffect)((function(){if(t.mode===Se.ub.CALL){var n=Fu(t,i,o),r=function(e,t){var n=[];return t.forEach((function(t,r){var a=e.get(r);(Hu(a)||Hu(t))&&(a&&function(e,t){var n=e,r=t;if(!0===n.stopStream&&!0===r.stopStream)return!0;if(!0===n.stopStream||!0===r.stopStream)return!1;var a=e,i=t;return a.fit===i.fit&&a.width===i.width&&a.height===i.height&&a.priority===i.priority}(a,t)||n.push(t))})),n}(u.current,n);r.length>0&&(u.current=n,e.updateDisplayLayout(r))}else u.current=new Map}),[i,o,t.participants,t.mode,t.uiMode,t.isOratorMode,t.orator,t.pinnedParticipant,t.adminPinnedParticipant,t.screenSharingPinnedParticipant,t.translation])};var Zu,Qu=function(e){var t=e.isIncoming,n=void 0!==t&&t,r=we((function(e){return e})),a=_e(),i=Object(c.useContext)(Pn).getLang,o=i(n?"calls_reject_title":"calls_hangup_description"),u=i(n?"calls_reject_description":"calls_hangup_description"),l=Object(c.useCallback)((function(){a({type:Se.wc,isOpen:!1})}),[]),d=function(){l(),n?Object(We.declineCall)().catch((function(){})):(Object(We.hangup)().catch((function(){})),ot.logEvent({call_event_type:Se.p.CALL_DECLINED_OR_HANGED_LOCALLY,session_id:r.callData.callId,peer_id:r.peer,is_group_call:qe(r.peer),reason:"none",group_call_users_count:Kt(r)}))},f=s.a.createElement(s.a.Fragment,null,s.a.createElement(so,{appearance:"secondary",onClick:l},i("calls_cancel_reject")),s.a.createElement(so,{onClick:d},i("calls_reject"))),p=s.a.createElement(s.a.Fragment,null,s.a.createElement(so,{onClick:d},i("calls_yes")),s.a.createElement(so,{onClick:l},i("calls_no")));return s.a.createElement(Ru,{title:o,onClose:l,actionButtons:n?f:p,text:s.a.createElement("span",{dangerouslySetInnerHTML:{__html:u}})})},Ju=function(e){var t=e.onClose,n=e.onUnmuteToggle,r=e.allowUnmute,a=e.unmuteToggleDisabled,i=e.actionButtons,o=e.title,c=e.description,u=e.toggleSign;return s.a.createElement(Ms,{className:palettePrefix("MuteParticipantModal"),appearance:"blue",title:o,actionButtons:i,onClose:t},s.a.createElement("div",{className:palettePrefix("MuteParticipantModal__content")},c,s.a.createElement(Os,{className:palettePrefix("MuteParticipantModal__checkbox"),onChange:n,checked:r,disabled:a},u)))},Xu=function(e){var t,n,r,a=e.SDK,i=we((function(e){return e})),o=Object(c.useState)(!0),u=p()(o,2),l=u[0],d=u[1],f=Object(c.useState)(""),h=p()(f,2),m=h[0],v=h[1],g=Object(c.useState)(!0),b=p()(g,2),_=b[0],y=b[1],E=_e(),O=s.a.useContext(Pn).getLang,w=null===(t=i.participantsManagement)||void 0===t?void 0:t.mode,C=null===(n=i.participantsManagement)||void 0===n?void 0:n.participant,S=w===Se.Jb.SINGLE&&($t(C)||en(C));Object(c.useEffect)((function(){if(w!==Se.Jb.SINGLE||Lt((null==C?void 0:C.peerId)||0))d(!1);else{var e;E({type:Se.xc,isLoaderVisible:!0});var t=null===(e=i.participantsManagement)||void 0===e?void 0:e.participant;new Promise((function(e,n){t&&t.peerId<0?Ha(-t.peerId).then((function(t){var n,r=t.groups;e(r&&r.length>0?null===(n=r[0])||void 0===n?void 0:n.name:"")})).catch((function(e){return n(e)})):Va({user_ids:t&&String(t.peerId),name_case:"acc"}).then((function(t){var n=p()(t,1)[0];e(null==n?void 0:n.first_name)})).catch((function(e){return n(e)}))})).then((function(e){v(e),d(!1),E({type:Se.xc,isLoaderVisible:!1})})).catch(console.log)}}),[w,null===(r=i.participantsManagement)||void 0===r?void 0:r.participant]);var A=Object(c.useCallback)((function(){E({type:Se.Gc})}),[]),k=Object(c.useCallback)((function(){if(w===Se.Jb.SINGLE){var e=Ft(C);a.muteParticipant(e,[We.MediaOption.AUDIO,We.MediaOption.VIDEO,We.MediaOption.SCREEN_SHARING],!_).catch(console.log).finally(A),ot.logEvent({call_event_type:Se.p.USER_MICS_AND_VIDEO_DISABLED,session_id:i.callData.callId,peer_id:i.peer,is_group_call:qe(i.peer),mute_permanent:_?Se.s.ONCE:Se.s.PERMANENT})}else w===Se.Jb.ALL&&(a.muteParticipant(void 0,[We.MediaOption.AUDIO,We.MediaOption.VIDEO,We.MediaOption.SCREEN_SHARING],!_).catch(console.log).finally(A),ot.logEvent({call_event_type:Se.p.ALL_MICS_AND_VIDEO_DISABLED,session_id:i.callData.callId,peer_id:i.peer,is_group_call:qe(i.peer),mute_permanent:_?Se.s.ONCE:Se.s.PERMANENT}))}),[_]);return w===Se.Jb.SINGLE&&l?null:s.a.createElement(Ju,{onClose:A,allowUnmute:_,unmuteToggleDisabled:S,onUnmuteToggle:function(e,t){return y(t)},title:w===Se.Jb.SINGLE?O("calls_mute_participant_dialog_title").replace("{name}",null!=m?m:null==C?void 0:C.name):O("calls_mute_all_participants_dialog_title"),description:w===Se.Jb.SINGLE?O("calls_mute_participant_dialog_description").replace("{name}",null!=m?m:null==C?void 0:C.name):O("calls_mute_all_participants_dialog_description"),toggleSign:w===Se.Jb.SINGLE?O("calls_mute_participant_dialog_permanent_toggle"):O("calls_mute_all_participants_dialog_permanent_toggle"),actionButtons:[s.a.createElement(so,{onClick:A,appearance:"secondary",key:"cancel"},O("calls_cancel")),s.a.createElement(so,{onClick:k,key:"disable"},O("calls_mute_participant_dialog_action"))]})},$u=function(e){var t=e.onClose,n=e.actionButtons,r=e.title,a=e.description;return s.a.createElement(Ms,{className:palettePrefix("UnmuteRequestModal"),appearance:"blue",title:r,actionButtons:n,onClose:t},s.a.createElement("div",{className:palettePrefix("UnmuteRequestModal__content")},a))},el=function(e){var t=e.SDK,n=_e(),r=s.a.useContext(Pn).getLang,a=we((function(e){return e})),i=a.participants[a.me],o=i.mediaSettings||{isAudioEnabled:!1,isVideoEnabled:!1,isScreenSharingEnabled:!1},c=function(){n({type:Se.Hc})},u=function(){var e=i.mediaSettings;null!=e&&e.isAudioEnabled||(o.isAudioEnabled?Promise.resolve():na(t,[We.MediaOption.AUDIO])).then((function(){var e;(null===(e=a.notification)||void 0===e?void 0:e.type)===Se.wb.SPEAKING_ON_MUTE&&n({type:Se.d,notification:null}),t.toggleLocalAudio(!0).catch(console.log)}))};return s.a.createElement($u,{onClose:c,title:r("calls_dialog_unmute_request_title"),description:r("calls_dialog_unmute_request_description"),actionButtons:[s.a.createElement(so,{onClick:function(){u(),c()},appearance:"secondary",key:"mic"},r("calls_dialog_unmute_request_mic_only_action")),s.a.createElement(so,{onClick:function(){var e;u(),null!=(e=i.mediaSettings)&&e.isVideoEnabled||null!=e&&e.isScreenSharingEnabled||(!o.isVideoEnabled||o.isScreenSharingEnabled?na(t,[We.MediaOption.VIDEO]):Promise.resolve()).then((function(){t.toggleLocalVideo(!0).catch(console.log)})),c()},key:"all"},r("calls_dialog_unmute_request_action"))]})},tl=function(e){var t=e.title,n=e.description,r=e.onClose,a=e.actionButtons;return s.a.createElement(Ms,{className:palettePrefix("AssignAdminModal"),appearance:"blue",title:t,actionButtons:a,onClose:r},s.a.createElement("div",{className:palettePrefix("AssignAdminModal__content")},n))},nl=function(e){var t=e.SDK,n=we((function(e){return e.adminAssignment?e.participants[e.adminAssignment.participant.peerId]:void 0})),r=we((function(e){return e})),a=_e(),i=Object(c.useState)(!0),o=p()(i,2),u=o[0],l=o[1],d=Object(c.useState)(""),f=p()(d,2),h=f[0],m=f[1],v=s.a.useContext(Pn).getLang;Object(c.useEffect)((function(){a({type:Se.xc,isLoaderVisible:!0}),new Promise((function(e,t){n&&n.peerId<0?Ha(-n.peerId).then((function(t){var n,r=t.groups;e(r&&r.length>0?null===(n=r[0])||void 0===n?void 0:n.name:"")})).catch((function(e){return t(e)})):Va({user_ids:n&&String(n.peerId),name_case:"dat"}).then((function(t){var n=p()(t,1)[0];e("".concat(null==n?void 0:n.first_name," ").concat(null==n?void 0:n.last_name))})).catch((function(e){return t(e)}))})).then((function(e){m(e),l(!1),a({type:Se.xc,isLoaderVisible:!1})})).catch(console.log)}),[n]);var g=Object(c.useCallback)((function(){a({type:Se.Cc})}),[]),b=Object(c.useCallback)((function(){var e=Ft(n);e?(t.grantRoles(e,[We.UserRole.ADMIN],!1).then((function(){n&&a({type:Se.i,participantId:n.peerId,data:n.roles?[].concat(Ue()(n.roles),[We.UserRole.ADMIN]):[We.UserRole.ADMIN]})})).catch(console.log),ot.logEvent({call_event_type:Se.p.ASSIGN_ADMIN,session_id:r.callData.callId,peer_id:r.peer,is_group_call:qe(r.peer)}),g()):g()}),[]);return u?null:s.a.createElement(tl,{onClose:g,title:v("calls_dialog_assign_admin_role_title"),description:v("calls_dialog_assign_admin_role_description").replace("{name}",h),actionButtons:[s.a.createElement(so,{onClick:g,appearance:"secondary",key:"cancel"},v("calls_dialog_assign_admin_role_action_later")),s.a.createElement(so,{onClick:b,key:"primary"},v("calls_dialog_assign_admin_role_action_primary"))]})},rl=function(e){var t=e.className,n=s.a.useState(!1),r=p()(n,2),a=r[0],i=r[1];return s.a.useEffect((function(){var e=setTimeout((function(){i(!0)}),140);return function(){return clearTimeout(e)}}),[]),a?s.a.createElement("div",{className:palettePrefix(Object(d.c)("ModalPreloader",t))},s.a.createElement("div",{className:palettePrefix("ModalPreloader__animation")},s.a.createElement("div",{className:palettePrefix("ModalPreloader__dot")}),s.a.createElement("div",{className:palettePrefix("ModalPreloader__dot")}),s.a.createElement("div",{className:palettePrefix("ModalPreloader__dot")})),s.a.createElement("div",{className:palettePrefix("ModalPreloader__background")})):null},al="wakeLock"in navigator&&!0,il=null,ol=!1,cl=function(){null!==il&&"visible"===document.visibilityState&&ul()},sl=function(){var e,t,n,r;Zu||((Zu=document.createElement("video")).setAttribute("title","Wake lock"),Zu.setAttribute("playsinline",""),e=Zu,t="mp4",n="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA=",(r=document.createElement("source")).src=n,r.type="video/".concat(t),e.appendChild(r),Zu.addEventListener("loadedmetadata",(function(){Zu&&Zu.addEventListener("timeupdate",(function(){Zu&&Zu.currentTime>.5&&(Zu.currentTime=Math.random())}))}))),Zu.play().catch((function(){}))};function ul(){if(!al)return sl();ol||(ol=!0,document.addEventListener("visibilitychange",cl));try{navigator.wakeLock.request("screen").then((function(e){(il=e).addEventListener("release",(function(){}))}))}catch(e){console.error("".concat(e.name,", ").concat(e.message))}}function ll(){al?il&&il.release().then((function(){il=null})):Zu&&Zu.pause()}var dl=["className","initialValue","grow","style","onResize","value"];function fl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fl(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wn()(e);if(t){var a=wn()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return En()(this,n)}}var ml=function(e){_n()(n,e);var t=hl(n);function n(e){var r;return tt()(this,n),r=t.call(this,e),o()(gn()(r),"getRef",(function(e){r.element=e})),o()(gn()(r),"resize",(function(){var e=r.element;if(e){var t=e.offsetHeight,n=e.scrollHeight,a=0;n+a<=t&&(a=0),e.value&&r.setState({height:n-a}),r.setState({height:0},(function(){var t=e.scrollHeight-a;r.setState({height:t}),r.props.onResize(e)}))}})),o()(gn()(r),"onChange",(function(e){r.props.grow&&r.resize(),r.isControlledOutside||r.setState({value:e.target.value}),r.props.onChange&&r.props.onChange(e)})),r.state={value:void 0===e.value?e.initialValue||"":void 0},void 0!==e.value&&(r.isControlledOutside=!0),r}return rt()(n,[{key:"componentDidMount",value:function(){this.props.grow&&this.resize()}},{key:"render",value:function(){var e=this.props,t=e.className,n=(e.initialValue,e.grow,e.style),r=(e.onResize,e.value),i=ke()(e,dl),o=this.isControlledOutside?r:this.state.value,c=this.state.height||n.height||66;return s.a.createElement("textarea",a()({},i,{value:o,onChange:this.onChange,onInput:this.onChange,onPaste:this.onChange,ref:this.getRef,style:pl(pl({},n),{},{height:c}),className:palettePrefix(Object(d.c)("Textarea",t))}))}}]),n}(s.a.Component);function vl(e){var t=e.onClose,n=e.onSubmit,r=e.title,a=e.children,i=e.isWithBackButton,o=e.onBackClick,c=e.contentClassName,u=void 0===c?"TranslationCreateModal__content":c,l=s.a.useContext(Pn).getLang,d=n&&t;return s.a.createElement(Rn,{disableBodyScroll:!0,onClose:t,className:palettePrefix("TranslationCreateModal"),hasScroll:!1},s.a.createElement(si,{title:r,onClose:t,backText:i?l("calls_back"):void 0,onBack:o}),s.a.createElement("div",{className:palettePrefix(u)},a),d&&s.a.createElement(ui,{actionButtons:s.a.createElement(s.a.Fragment,null,s.a.createElement(so,{onClick:t,appearance:"tertiary"},l("calls_cancel")),s.a.createElement(so,{onClick:n},l("calls_translation_start")))}))}ml.propTypes={value:g.a.string,initialValue:g.a.string,grow:g.a.bool,onChange:g.a.func,onResize:g.a.func,style:g.a.object,className:g.a.string},ml.defaultProps={initialValue:"",grow:!0,onResize:function(){},style:{}};var gl,bl,_l=function(e){var t=a()({},e);return s.a.createElement("svg",a()({width:"20",height:"20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),s.a.createElement("path",{d:"M4 9.6c0-.56 0-.84.109-1.054a1 1 0 01.437-.437C4.76 8 5.04 8 5.6 8h8.8c.56 0 .84 0 1.054.109a1 1 0 01.437.437C16 8.76 16 9.04 16 9.6v4.8c0 .56 0 .84-.109 1.054a1 1 0 01-.437.437C15.24 16 14.96 16 14.4 16H5.6c-.56 0-.84 0-1.054-.109a1 1 0 01-.437-.437C4 15.24 4 14.96 4 14.4V9.6z",fill:"#fff"}),s.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.2 6a2.2 2.2 0 00-4.4 0v4a2.2 2.2 0 104.4-.001V6zM10 2a4 4 0 00-4 4v4a4 4 0 108-.001V6A4 4 0 0010 2z",fill:"#fff"}))},yl=function(e){var t=a()({},e);return s.a.createElement("svg",a()({width:"16",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),s.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.8 8a6.2 6.2 0 1112.4 0A6.2 6.2 0 011.8 8zM0 8a8 8 0 1116 0A8 8 0 010 8zm8.9-3a.9.9 0 00-1.8 0v4a.9.9 0 00.498.805l2 1a.9.9 0 10.804-1.61L8.9 8.444V5z",fill:"#fff"}))};function El(e){var t=e.onSubmit,n=e.onClose,r=Object(c.useContext)(Pn),a=r.getLang,i=r.langShortDateTime,o=we((function(e){return e})),u=function(){var e=(new Date).toISOString().split("T")[0];return a("calls_translation_title_default_value").replace("%s",e)},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{id:e,name:t,photo:n,isGroup:e<0}},d=function(e){var t=[{value:gl.ONLY_ME,label:a("calls_translation_privacy_only_me_and_chat")},{value:gl.FRIENDS,label:a("calls_translation_privacy_friends_and_chat")}];return e&&t.push({value:gl.ALL,label:a("calls_translation_privacy_all_users")}),t},f=xt(o),h=o.config,m=Object(c.useState)(u()),v=p()(m,2),g=v[0],b=v[1],_=Object(c.useState)(""),y=p()(_,2),E=y[0],O=y[1],w=Object(c.useState)(o.groupId?gl.ALL:gl.ONLY_ME),C=p()(w,2),S=C[0],A=C[1],k=Object(c.useState)((function(){return d(!f.isClosed||!!o.groupId)})),j=p()(k,2),T=j[0],I=j[1],P=Object(c.useState)((function(){var e,t;return o.groupId?l(o.groupId,null===(e=o.meGroup)||void 0===e?void 0:e.name,null===(t=o.meGroup)||void 0===t?void 0:t.photo):l(f.peerId,f.name,f.photo)})),D=p()(P,2),N=D[0],x=D[1],R=Object(c.useState)(bl.MAIN),M=p()(R,2),L=M[0],B=M[1],F=Object(c.useState)({}),H=p()(F,2),V=H[0],U=H[1],z=Object(c.useState)((function(){return o.groupId&&o.meGroup?[{value:o.meGroup.peerId,label:o.meGroup.name}]:[{value:f.peerId,label:f.name}]})),G=p()(z,2),W=G[0],q=G[1],K=Object(c.useState)([]),Y=p()(K,2),Z=Y[0],Q=Y[1],J=Object(c.useState)(!1),X=p()(J,2),$=X[0],ee=X[1],te=Object(c.useState)([]),ne=p()(te,2),re=ne[0],ae=ne[1],ie=Object(c.useState)([]),oe=p()(ie,2),ce=oe[0],se=oe[1],ue=function(e){var t,n,r;e.owner_id>0&&(t=e.owner_id,n=[e.owner_id+"_"+e.id],r=!0,Ca()()("video.get",{owner_id:t,videos:n,need_privacy:r})).then((function(t){if(t.count>0){var n=t.items.filter((function(t){return t.id==e.id}));n.length>0&&(e.privacy_view=n[0].privacy_view,U(e),e.privacy_view&&A(e.privacy_view.category))}})),U(e),B(bl.MAIN),b(e.title),O(e.description)},le=Object(c.useCallback)((function(){var e=g.trim(),n=E.trim(),r={};if(Object.keys(V).length>0){e||(e=V.title),n||(n=V.description);var a=n!=V.title||e!=V.description;a||(a=N.id>0&&V.privacy_view.category!=S),a&&function(e,t,n,r,a){return Ca()()("video.edit",{owner_id:e,video_id:t,name:n,desc:r,privacy_view:a})}(N.id,V.id,e,n,S).catch((function(e){return console.error(e)}));var i={ovId:V.ov_id};V.live_start_time&&(i.startTime=V.live_start_time),r.upcomingStreamParams=i}else r.streamParams={name:e||u(),description:n,privacy_view:S,group_id:N.id<0?-N.id:0,call:!0};t(r)}),[g,E,S,N,V]);Object(c.useEffect)((function(){o.groupId||(Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"request",method:"video.getGroupsForStreaming"}),Ca()()("video.getGroupsForStreaming",null).then((function(e){return Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"response",method:"video.getGroupsForStreaming",response:e}),e}))).then((function(e){var t=Ue()(W);e.length>0&&(e.forEach((function(e){t.push({value:-e.id,label:e.name})})),q(t),Q(e))})).catch(console.error)}),[]),Object(c.useEffect)((function(){var e;U({}),ee(!1),ae([]),(e=[N.id],Ca()()("video.getUpcomingLives",{owner_ids:e})).then((function(e){var t=[];e.count>0&&(t=e.items.filter((function(e){return""!==e.ov_id})));var n=t.length>0;if(ee(n),ae(t),n){var r=[];t.forEach((function(e){e.owner_id&&e.owner_id>0&&r.push(e.owner_id.toString())})),r&&Va({user_ids:r.join(",")}).then((function(e){var t=[];e.forEach((function(e){t.push({id:e.id,name:e.first_name+" "+e.last_name})})),se(t)})).catch((function(e){return console.error(e)}))}})).catch((function(e){return console.error(e)}))}),[N]);var de=function(e){var t=e.date;e.live_start_time&&(t=e.live_start_time);var n=t-Date.now()/1e3;return n>0&&n<604800?a("calls_translation_date_label_soon"):""};return s.a.createElement(s.a.Fragment,null,L===bl.MAIN&&s.a.createElement(vl,{onClose:n,onSubmit:le,title:a("calls_translation_box_title")},s.a.createElement("div",{className:palettePrefix("TranslationCreateForm__link")},s.a.createElement(di,null,W.length>0&&s.a.createElement(bi,{border:!0,canBeHovered:!1,selectable:!1,icon:s.a.createElement(_i,{icon:s.a.createElement("img",{className:palettePrefix("TranslationCreateForm__ownerIcon"),src:N.photo,alt:N.name}),color:mi.GRAY}),aside:s.a.createElement(vs,{className:palettePrefix("TranslationCreateFormOptions__longselect"),options:W,value:N.id,onChange:function(e){var t=e.selected.value;t<0?Z.forEach((function(e){e.id==-t&&(A(gl.ALL),I(d(!0)),x(l(-e.id,e.name,e.photo_100)))})):(I(d(!f.isClosed)),A(gl.ONLY_ME),x(l(f.peerId,f.name,f.photo)))},disabled:W.length<=1})},a("calls_translation_owner_title")),$&&s.a.createElement(bi,{onClick:function(){$&&B(bl.SELECT_POSTPONE)},chevron:!0,border:!0,icon:s.a.createElement(_i,{icon:s.a.createElement(yl,null),color:mi.GREEN})},a("calls_translation_postponed_title"),Object.keys(V).length>0&&s.a.createElement("div",{className:palettePrefix("TranslationCreateForm__copyControl")},s.a.createElement(Ai,{className:palettePrefix("TranslationCreateForm__copyButton"),onClick:function(e){e.preventDefault(),e.stopPropagation(),U({}),b(u()),O("")}},a("calls_translation_postponed_reset")))),!h.sferum&&s.a.createElement(bi,{border:!1,canBeHovered:!1,selectable:!1,icon:s.a.createElement(_i,{icon:s.a.createElement(_l,null),color:mi.GRAY}),aside:s.a.createElement(vs,{className:palettePrefix("TranslationCreateForm__privacySelector TranslationCreateFormOptions__longselect"),disabled:N.isGroup,options:T,value:S,onChange:function(e){A(e.selected.value)}})},a("calls_translation_who_can_see_video_privacy"))),s.a.createElement("div",{className:palettePrefix("TranslationCreateForm__privacyHint")},a("calls_translation_who_can_see_video_privacy_hint"))),s.a.createElement("form",{className:palettePrefix("TranslationCreateForm__main"),onSubmit:le},s.a.createElement("div",{className:palettePrefix("TranslationCreateForm__section")},s.a.createElement("div",{className:palettePrefix("TranslationCreateForm__block")},s.a.createElement("label",{className:palettePrefix("TranslationCreateForm__label")},a("calls_translation_title"),s.a.createElement(Di.default,{className:palettePrefix("TranslationCreateForm__field"),value:g,onChange:function(e){var t=e.target;b(t.value)},placeholder:a("calls_translation_name_placeholder")}))),s.a.createElement("div",{className:palettePrefix("TranslationCreateForm__block")},s.a.createElement("label",{className:palettePrefix("TranslationCreateForm__label")},a("calls_translation_description"),s.a.createElement(ml,{className:palettePrefix("TranslationCreateForm__field"),placeholder:a("calls_translation_description_placeholder"),value:E,onChange:function(e){var t=e.target;O(t.value)}})))),s.a.createElement("div",{className:palettePrefix("TranslationCreateForm__tabSection")},s.a.createElement("div",{className:palettePrefix("TranslationCreateForm__warning")},a("calls_translation_notification_warning"))))),L===bl.SELECT_POSTPONE&&s.a.createElement(vl,{title:a("calls_translation_select_upcoming_box_title"),isWithBackButton:!0,onBackClick:function(){return B(bl.MAIN)},onClose:n,contentClassName:"TranslationCreateForm__modalVideo"},s.a.createElement("div",null,re.length>0&&s.a.createElement(di,{className:palettePrefix("TranslationCreateForm__VideoList")},re.map((function(e,t){return s.a.createElement(bi,{className:palettePrefix("TranslationCreateForm__videoItem"),active:e.id===V,key:t,border:!0,canBeHovered:!0,selectable:!0,onClick:function(){return ue(e)},aside:s.a.createElement("span",{className:palettePrefix("TranslationCreateForm__videoLink")},a("calls_translation_select_video_link"))},s.a.createElement("div",{className:palettePrefix("TranslationCreateForm__videoImagePreview")},s.a.createElement("img",{className:palettePrefix("TranslationCreateForm__videoImage"),src:e.image&&e.image[0]&&e.image[0].url?e.image[0].url:"",alt:e.title}),de(e)&&s.a.createElement("span",{className:palettePrefix("TranslationCreateForm__videoImageLabel")},de(e))),s.a.createElement("div",{className:palettePrefix("TranslationCreateForm__videoDescription")},s.a.createElement("div",{className:palettePrefix("TranslationCreateForm__videoTitle")},e.title),s.a.createElement("div",{className:palettePrefix("TranslationCreateForm__videoOwner")},function(e){if(!(e>0))return N.name;var t=ce.filter((function(t){return t.id==e}));if(t.length>0){var n=t[0];if(n)return n.name}return""}(e.owner_id)),s.a.createElement("div",{className:palettePrefix("TranslationCreateForm__videoDate")},(r=(n=e).date,n.live_start_time&&(r=n.live_start_time),i(1e3*r)))));var n,r}))))))}function Ol(){var e,t=we((function(e){return e})),n=_e(),r=s.a.useContext(Pn).getLang,a=Object(c.useCallback)((function(){n({type:Se.Hc})}),[]),i=Ja(t),o=Object(c.useCallback)((function(){n({type:Se.Hc,data:Se.Eb})}),[]),u=Object(c.useCallback)((function(e){if(null!=e&&e.upcomingStreamParams){var t=e.upcomingStreamParams,r=t.startTime,i=t.ovId;if(r&&r>Date.now()/1e3+4)return zo(i).finally(a)}var o={isOn:!1,startStreamParams:e};return n({type:Se.tc,data:o}),n({type:Se.Hc,data:Se.Db}),Promise.resolve()}),[]),l=Object(c.useCallback)((function(){n({type:Se.Hc,data:Se.Cb})}),[]);return null!==(e=t.translation)&&void 0!==e&&e.isOn?s.a.createElement(li,{title:r("calls_translation_menu_title"),actionButtons:i?[s.a.createElement(so,{onClick:o,appearance:"negative",key:"stop"},r("calls_translation_menu_stop"))]:[],onCloseModal:a},s.a.createElement(Pi,{isLinkBlockShown:!0,linkBlockTitle:r("calls_translation_menu_link"),onLinkBlockClick:l,callUrlLink:t.translation.link})):s.a.createElement(El,{onSubmit:u,onClose:a})}!function(e){e.ONLY_ME="only_me",e.FRIENDS="friends",e.ALL="all"}(gl||(gl={})),function(e){e[e.MAIN=0]="MAIN",e[e.SELECT_POSTPONE=1]="SELECT_POSTPONE"}(bl||(bl={}));var wl=function(e){var t=e.onClose,n=e.actionButtons,r=s.a.useContext(Pn).getLang;return s.a.createElement(Ms,{onClose:t,title:r("calls_translation_stop_confirmation"),appearance:"blue",actionButtons:n,className:palettePrefix("TranslationStopModal")},s.a.createElement("div",{className:palettePrefix("TranslationStopModal__text")},r("calls_translation_stop_sure")))},Cl=function(){var e=_e(),t=s.a.useContext(Pn).getLang,n=Object(c.useCallback)((function(){e({type:Se.Hc})}),[]);return s.a.createElement(wl,{onClose:n,actionButtons:[s.a.createElement(so,{onClick:n,appearance:"secondary",key:"cancel"},t("calls_cancel")),s.a.createElement(so,{onClick:function(){za().then((function(){e({type:Se.Hc})}))},key:"stop"},t("calls_translation_stop"))]})},Sl=function(e){var t=e.link,n=s.a.useContext(Pn).getLang,r=Object(c.useState)(!1),a=p()(r,2),i=a[0],o=a[1],u=Object(c.useCallback)((function(){return o(!0)}),[]),l=Object(c.useCallback)((function(){return o(!1)}),[]);return s.a.createElement("div",{className:palettePrefix("TranslationLink")},s.a.createElement("p",{className:palettePrefix("TranslationLink__info")},n("calls_translation_link_info")),s.a.createElement(Di.default,{readOnly:"readonly",className:palettePrefix("TranslationLink__input"),value:t}),t&&s.a.createElement(Ei,{text:t,onCopyDone:u},s.a.createElement(so,null,n("calls_translation_link_copy"))),s.a.createElement(Ti,{className:palettePrefix("TranslationLink__copied"),shown:i,callback:l},n("calls_translation_link_copied")))},Al=function(e){var t,n=e.onBack,r=e.link,a=e.linkExtractor,i=_e(),o=s.a.useContext(Pn).getLang,u=we((function(e){return e.translation})),l=Object(c.useCallback)((function(){i({type:Se.Hc})}),[]);return s.a.createElement(li,{title:o("calls_translation_link"),onCloseModal:l,isWithBackButton:!!n,onBackClick:n},s.a.createElement(Sl,{link:null!==(t=null==a?void 0:a(u))&&void 0!==t?t:r}))},kl=function(e){var t=e.onClose,n=e.actionButtons,r=e.title,a=e.description;return s.a.createElement(Ms,{className:palettePrefix("AdminPinUnmuteRequestModal"),appearance:"blue",title:r,actionButtons:n,onClose:t},s.a.createElement("div",{className:palettePrefix("AdminPinUnmuteRequestModal__content")},a))},jl=function(e){var t=e.SDK,n=_e(),r=s.a.useContext(Pn).getLang,a=we((function(e){return e})),i=a.participants[a.me].mediaSettings||{isAudioEnabled:!1,isVideoEnabled:!1,isScreenSharingEnabled:!1},o=function(){n({type:Se.Hc})};return s.a.createElement(kl,{onClose:o,title:r("calls_admin_pin_dialog_title"),description:r("calls_admin_pin_dialog_description"),actionButtons:[s.a.createElement(so,{onClick:o,appearance:"secondary",key:"cancel"},r("calls_admin_pin_dialog_cancel")),s.a.createElement(so,{onClick:function(){(i.isAudioEnabled?Promise.resolve():na(t,[We.MediaOption.AUDIO])).then((function(){var e;(null===(e=a.notification)||void 0===e?void 0:e.type)===Se.wb.SPEAKING_ON_MUTE&&n({type:Se.d,notification:null}),t.toggleLocalAudio(!0).catch(console.log)})).then((function(){return o()}))},key:"mic"},r("calls_admin_pin_dialog_action"))]})},Tl=function(e){var t=e.participants,n=e.selected,r=e.onSelect,a=e.onClose,i=e.onCallForceFinish,o=e.onRightsTransfer,u=e.onSearch,l=Object(c.useContext)(Pn).getLang,d=we((function(e){return e.me}));return s.a.createElement(Rn,{className:palettePrefix("TransferAdminRightsModal"),disableBodyScroll:!1,onClose:a},s.a.createElement(si,{title:l("calls_dialog_creator_exit_title"),onClose:a}),s.a.createElement("div",{className:palettePrefix("TransferAdminRightsModal__content")},s.a.createElement(Di.default,{onChange:function(e){return u(e.target.value)},placeholder:l("calls_search_participants_placeholder"),className:palettePrefix("TransferAdminRightsModal__searchInput")}),s.a.createElement(di,{border:!1},s.a.createElement(Vi,{extra:t.length},l("calls_call_participants")),0===t.filter((function(e){return e.peerId!==d})).length&&s.a.createElement(ta,null,l("calls_participants_not_found")),t.filter((function(e){return e.peerId!==d})).map((function(e){return s.a.createElement(bi,{key:e.peerId,className:palettePrefix("TransferAdminRightsModal__item"),onClick:function(){return r(n!==e.peerId?e:null)},aside:s.a.createElement("span",{className:palettePrefix("TransferAdminRightsModal__label"),"aria-selected":n===e.peerId},n===e.peerId?l("calls_dialog_creator_exit_selected"):l("calls_dialog_creator_exit_select"))},s.a.createElement(Zi,{size:"34",title:e.name,photo:e.photo}))})))),s.a.createElement(ui,{actionButtons:[s.a.createElement(so,{key:"force",appearance:"secondary",onClick:i},l("calls_force_call_finish")),s.a.createElement(so,{key:"action",onClick:o},l(null===n?"calls_leave_call":"calls_dialog_creator_exit_action"))]}))},Il=function(e){var t=e.SDK,n=_e(),r=we((function(e){return e})),a=s.a.useContext(Pn).getLang,i=Object(c.useState)(Object.values(r.participants).filter((function(e){return e.peerId===r.me||e.status===We.ParticipantStatus.CONNECTED&&!Lt(e.peerId)}))),o=p()(i,2),u=o[0],l=o[1],d=Object(c.useState)(null),f=p()(d,2),h=f[0],m=f[1],v=Object(c.useCallback)((function(e){return e.name}),[]),g=Object(c.useCallback)((function(e){return e.peerId}),[]),b=Hn(u,v,g),_=Object(c.useMemo)((function(){return Kt(r)}),[r.participants]),y=function(){return ot.logEvent({call_event_type:Se.p.CALL_DECLINED_OR_HANGED_LOCALLY,session_id:r.callData.callId,peer_id:r.peer,is_group_call:qe(r.peer),reason:"none",group_call_users_count:_})},E=Object(c.useCallback)((function(e){l(e?b.search(e):b.list),m(null)}),[r]),O=function(){n({type:Se.Hc})},w=function(){n({type:Se.Hc}),y(),t.hangup().catch(console.log)},C=Object(c.useCallback)((function(e){m(null===e?null:e.peerId)}),[]);return Object(c.useEffect)((function(){h&&!u.find((function(e){return e.peerId===h}))&&m(null)}),[h]),s.a.createElement(Tl,{participants:u,onClose:O,onSelect:C,selected:h,onCallForceFinish:function(){n({type:Se.Hc}),y(),t.hangup(),ac(0,r,n,a)},onRightsTransfer:function(){if(null!==h){var e=Ft(r.participants[h]);e&&(t.grantRoles(e,[We.UserRole.ADMIN],!1).then((function(){return w()})).catch(console.log),O())}else w()},onSearch:E})},Pl=function(e){var t=e.onCloseModal,n=e.counter,r=e.onStopTranslation,a=s.a.useContext(Pn).getLang;return s.a.createElement(Rn,{disableBackdropClick:!0,disableEscapeClose:!0,className:palettePrefix("TranslationStartCountdownModal"),onClose:t},s.a.createElement("div",{className:palettePrefix("TranslationStartCountdownModal__content")},s.a.createElement("div",{className:palettePrefix("TranslationStartCountdownModal__counter")},n),s.a.createElement(so,{className:palettePrefix("TranslationStartCountdownModal__stop"),onClick:r,appearance:"overlay_secondary"},a("calls_translation_cancel_button"))))};function Dl(){var e=_e(),t=we((function(e){return e})),n=Object(c.useState)(3),r=p()(n,2),a=r[0],i=r[1],o=Object(c.useCallback)((function(){e({type:Se.Hc})}),[]),u=Object(c.useCallback)((function(){var e,n=null===(e=t.translation)||void 0===e?void 0:e.startTime;n&&n>=Date.now()&&za(),o()}),[]);return Object(c.useEffect)((function(){var e=setInterval((function(){return i(a-1)}),1e3);return function(){return clearInterval(e)}}),[a]),Object(c.useEffect)((function(){if(a<=0){var e,n=null===(e=t.translation)||void 0===e?void 0:e.startStreamParams;null!=n&&n.streamParams?Go(n.streamParams):null!=n&&n.upcomingStreamParams&&zo(n.upcomingStreamParams.ovId),o()}}),[a]),s.a.createElement(Pl,{onCloseModal:o,counter:a,onStopTranslation:u})}var Nl,xl=function(e){var t=e.onClose,n=e.actionButtons,r=e.onAllowReconnectChange,a=e.description,i=e.allowBan,o=e.banText,u=Object(c.useContext)(Pn).getLang,l=Object(c.useContext)(He).allowBanParticipant,d=Object(c.useState)(!0),f=p()(d,2),h=f[0],m=f[1],v=Object(c.useCallback)((function(e,t){r&&r(t),m(t)}),[]);return s.a.createElement(Ms,{className:palettePrefix("KickParticipantModal"),appearance:"blue",title:u("calls_kick_participant_title"),actionButtons:n,onClose:t,hasScroll:!1},s.a.createElement("div",{className:palettePrefix("KickParticipantModal__content")},a,l&&i&&s.a.createElement("div",null,s.a.createElement(Os,{className:palettePrefix("KickParticipantModal__checkbox"),onChange:v,checked:h},o))))},Rl=function(){var e,t,n,r=_e(),a=s.a.useContext(Pn),i=a.getLang,o=a.langSex,u=we((function(e){return e})),l=null===(e=u.participantKick)||void 0===e?void 0:e.participant,d=(null===(t=u.participantKick)||void 0===t?void 0:t.type)===Se.kb.CALL,f=Object(c.useState)(!0),h=p()(f,2),m=h[0],v=h[1],g=!!l&&(!an(l)&&!function(e,t){if(!t)return!1;var n=null==e?void 0:e.peerId;return!!n&&(n===t.ownerId||!!t.adminIds&&t.adminIds.includes(n))}(l,u.callData.conversation)),b=Object(c.useCallback)((function(){r({type:Se.Fc})}),[]),_=Object(c.useCallback)((function(){(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Ft(e);return n?Object(We.removeParticipant)(n,t):Promise.resolve()})(l,!m).then((function(){!d&&u.waitingHall&&null!=l&&l.peerId&&vo(null==l?void 0:l.peerId,u.waitingHall,r)})),b()}),[u.participantKick,m]),y=Object(c.useCallback)((function(e){v(e)}),[]),E=d?"calls_kick_participant_text":"calls_kick_participant_from_waiting_hall_text",O=o(null==l?void 0:l.sex,E,i(E,!0)).replace("{user}",null!==(n=null==l?void 0:l.name)&&void 0!==n?n:""),w=i(d?"calls_kick_participant_kick_button_text":"calls_kick_participant_from_waiting_hall_button_text"),C=i(d?"calls_kick_participant_with_ban_setting":"calls_kick_participant_from_waiting_hall_with_ban_setting");return s.a.createElement(xl,{onClose:b,onAllowReconnectChange:y,description:O,allowBan:g,banText:C,actionButtons:[s.a.createElement(so,{onClick:b,appearance:"secondary",key:"cancel"},i("calls_cancel")),s.a.createElement(so,{onClick:_,key:"stop"},w)]})},Ml=function(e){var t=e.title,n=e.children,r=e.sendButtonClick,a=e.skipButtonClick,i=e.sendButtonDisabled,o=void 0===i||i,c=s.a.useContext(Pn).getLang;return s.a.createElement("div",{className:palettePrefix("FeedbackScreen")},s.a.createElement("div",{className:palettePrefix("FeedbackScreen__close"),onClick:a}),s.a.createElement("div",{className:palettePrefix("FeedbackScreen__title")},t),n,s.a.createElement("div",{className:palettePrefix("FeedbackScreen__actions")},s.a.createElement(so,{appearance:"overlay_secondary",onClick:a},c("calls_feedback_skip")),s.a.createElement(so,{appearance:"overlay_primary",onClick:r,disabled:o},c("calls_feedback_send"))))},Ll=function(e){var t=a()({},e);return s.a.createElement("svg",a()({height:"28",width:"28",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},t),s.a.createElement("path",{d:"M14 19.2l5.7 3.5a.2.2 0 00.3-.3L18.4 16l5.1-4.3a.2.2 0 00-.1-.4l-6.7-.5-2.5-6.1a.2.2 0 00-.4 0l-2.5 6.1-6.7.5a.2.2 0 00-.1.4l5 4.3L8 22.4a.2.2 0 00.3.3zm0 2.3l-4.6 2.9A2.2 2.2 0 016 22l1.2-5.3L3.2 13a2.2 2.2 0 011.2-3.8l5.5-.5 2-5a2.2 2.2 0 014.1 0l2.1 5 5.5.5a2.2 2.2 0 011.2 3.8l-4.1 3.6 1.2 5.3a2.2 2.2 0 01-3.3 2.4z"}))},Bl=function(e){var t=a()({},e);return s.a.createElement("svg",a()({height:"28",width:"28",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},t),s.a.createElement("path",{d:"M14 21.5l-4.6 2.9A2.2 2.2 0 016 22l1.2-5.3L3.2 13a2.2 2.2 0 011.2-3.8l5.5-.5 2-5a2.2 2.2 0 014.1 0l2.1 5 5.5.5a2.2 2.2 0 011.2 3.8l-4.1 3.6 1.2 5.3a2.2 2.2 0 01-3.3 2.4L14 21.5z"}))};function Fl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fl(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ADVANCE=1]="ADVANCE"}(Nl||(Nl={}));var Vl=function(e){var t=e.onSuccessFeedback,n=_e(),r=we((function(e){return e})),a=s.a.useContext(Pn).getLang,i=Object(c.useState)(Nl.DEFAULT),o=p()(i,2),u=o[0],l=o[1],f=Object(c.useState)(!0),h=p()(f,2),m=h[0],v=h[1],g=Object(c.useState)(!1),b=p()(g,2),_=b[0],y=b[1],E=new Map([["DID_NOT_HEAR_INTERLOCUTOR",a("calls_feedback_reason_did_not_hear_interlocutor")],["DID_NOT_SEE_INTERLOCUTOR",a("calls_feedback_reason_did_not_see_interlocutor")],["BAD_VIDEO_QUALITY",a("calls_feedback_reason_bad_video_quality")],["VIDEO_FREEZES",a("calls_feedback_reason_video_freezes")],["VERY_QUIET_SOUND",a("calls_feedback_reason_very_quiet_sound")],["BAD_SOUND_QUALITY",a("calls_feedback_reason_bad_sound_quality")],["SOUND_DID_NOT_MATCH_THE_VIDEO",a("calls_feedback_reason_sound_did_not_match_the_video")],["FAILED_TO_TURN_ON_CAMERA_OR_MICROPHONE",a("calls_feedback_reason_failed_to_turn_on_camera_or_microphone")]]),O=Object(c.useState)({user_response:0,feedback:[],custom_feedback:void 0}),w=p()(O,2),C=w[0],S=w[1],A=Object(c.useState)(Array.from(E,(function(e){return{name:p()(e,1)[0],checked:!1}}))),k=p()(A,1)[0],j=function(){n({type:Se.g,mode:Se.ub.READY})},T=function(e){var t=e.target.getAttribute("data-response");if(t){var n=parseInt(t,10);n<=3&&l(Nl.ADVANCE),S(Hl(Hl({},C),{},{user_response:n})),v(!1)}},I=function(e,t){k.forEach((function(n){n.name===e&&(n.checked=t)})),S((function(e){return Hl(Hl({},e),{},{feedback:k.filter((function(e){return e.checked})).map((function(e){return e.name}))})}))},P=function(e,t){y(t)},D=function(e){S(Hl(Hl({},C),{},{custom_feedback:e.currentTarget.value}))};return s.a.createElement(Vn,{onClose:j,onBackdropClick:j},s.a.createElement("section",{className:palettePrefix("Call")},s.a.createElement(Ml,{title:u===Nl.DEFAULT?a("calls_feedback_default_title"):a("calls_feedback_advance_title"),sendButtonClick:function(){var e=r.lastCallData?r.lastCallData.peerId:0;ot.logEvent({call_event_type:Se.p.USER_FEEDBACK_RECEIVED,session_id:r.lastCallData?r.lastCallData.callId:"",peer_id:e,is_group_call:qe(e),user_response:C.user_response,feedback:C.feedback,custom_feedback:_&&C.custom_feedback?C.custom_feedback:void 0}),n({type:Se.g,mode:Se.ub.READY}),t&&t()},skipButtonClick:j,sendButtonDisabled:m},u===Nl.DEFAULT?s.a.createElement("div",{className:palettePrefix("FeedbackScreen__stars"),onClick:T},[1,2,3,4,5].map((function(e,t){return s.a.createElement("div",{className:palettePrefix(Object(d.c)("FeedbackScreen__star",{"FeedbackScreen__star--active":e<=C.user_response})),"data-response":e,key:t},s.a.createElement(Ll,{className:palettePrefix("FeedbackScreen__starIcon FeedbackScreen__starIcon--outline")}),s.a.createElement(Bl,{className:palettePrefix("FeedbackScreen__starIcon FeedbackScreen__starIcon--filled")}))}))):s.a.createElement("div",{className:palettePrefix("FeedbackScreen__voting")},Array.from(E,(function(e){var t=p()(e,2),n=t[0],r=t[1];return s.a.createElement("div",{className:palettePrefix("FeedbackScreen__votingItem"),key:n},s.a.createElement(Os,{name:n,className:palettePrefix("FeedbackScreen__votingItemCheckbox"),onChange:I},r))})),s.a.createElement("div",{className:palettePrefix("FeedbackScreen__votingItem FeedbackScreen__votingItem--custom")},s.a.createElement(Os,{name:"CUSTOM_FEEDBACK",className:palettePrefix("FeedbackScreen__votingItemCheckbox"),onChange:P}),s.a.createElement(ml,{className:palettePrefix("FeedbackScreen__votingItemTextArea"),placeholder:a("calls_feedback_custom_reason_placeholder"),grow:!1,disabled:!_,onChange:D}))))))},Ul=function(e){var t=e.onClose,n=e.actionButtons,r=e.description,a=e.subDescription,i=e.avatarsItems,o=Object(c.useContext)(Pn).getLang;return s.a.createElement(Ms,{className:palettePrefix("UnbanMembersModal"),appearance:"blue",title:o("calls_unban_participant_title"),actionButtons:n,onClose:t,hasScroll:!1},s.a.createElement("div",{className:palettePrefix("UnbanMembersModal__content")},s.a.createElement(Gs,{items:i}),s.a.createElement("div",{className:palettePrefix("UnbanMembersModal__description")},r),s.a.createElement("div",{className:palettePrefix("UnbanMembersModal__subDescription")},a)))},zl=function(e){var t,n=e.SDK,r=_e(),a=s.a.useContext(Pn),i=a.getLang,o=a.langNumeric,u=a.langSex,l=we((function(e){return e})),d=an(l.participants[l.me]),f=null===(t=l.membersUnban)||void 0===t?void 0:t.members,p=Object(c.useCallback)((function(){r({type:Se.Jc})}),[]),h=Object(c.useCallback)((function(){null==f||f.forEach((function(e){n.addParticipant(String(e.id),{unban:!0})})),p()}),[l.membersUnban]);if(!f||0===f.length)return s.a.createElement(s.a.Fragment,null);var m=null==f?void 0:f.length,v=o(m,"calls_unban_participant_text",i("calls_unban_participant_text",!0)),g="",b=[];if(1===m){var _=f[0];g=u(_.sex,"calls_unban_participant_description_text_one_person",i("calls_unban_participant_description_text_one_person",!0)).replace("{user}",_.name),b.push(Mt(_))}else{var y=[f[0].name,f[1].name];b=f.slice(0,2).map((function(e){return Mt(e)}));if(m<=3)3===m&&(y.push(f[2].name),b.push(Mt(f[2]))),g=i("calls_unban_participant_description_text_two_persons").replace("{users}",y.join(", "));else{var E=m-2;g=o(E,"calls_unban_participant_description_text_more_persons",i("calls_unban_participant_description_text_more_persons",!0)).replace("{users}",y.join(", ")).replace("{users_count}",E),b.push({id:E,text:"+"+E})}}var O=d?[s.a.createElement(so,{onClick:p,appearance:"secondary",key:"cancel"},i("calls_unban_participant_cancel_button_text")),s.a.createElement(so,{onClick:h,key:"stop"},i("calls_unban_participant_ok_button_text"))]:[s.a.createElement(so,{onClick:p,key:"cancel"},i("calls_unban_participant_disallowed_button_text"))];return s.a.createElement(Ul,{onClose:p,description:v,subDescription:g,actionButtons:O,avatarsItems:b})},Gl=n(1),Wl=n(1335),ql=n(401);function Kl(e){return new Promise((function(t,n){if(kc.d.isMobile)n("is_mobile");else if(document.body.focus(),"hidden"===document.visibilityState||document.hidden)n("hidden_page");else{var r,a=function e(){r&&clearTimeout(r),window.removeEventListener("blur",e),t(!0)};if(window.addEventListener("blur",a),r=setTimeout((function(){window.removeEventListener("blur",a),n("timed_out")}),3e3),kc.d.BROWSER===kc.b.SAFARI||kc.d.BROWSER===kc.b.FIREFOX){var i=document.createElement("iframe");i.style.display="none",document.body.appendChild(i);var o=i.contentWindow;o?(o.location.href=e,setTimeout((function(){i.parentNode&&i.parentNode.removeChild(i)}),100)):window.location.href=e}else window.location.href=e}}))}var Yl=["children","element","className"],Zl=function(e){var t=e.children,n=e.element,r=void 0===n?"span":n,i=e.className,o=ke()(e,Yl),c=t?String(t):"",u=r;return s.a.createElement(u,a()({},o,{dangerouslySetInnerHTML:{__html:c},className:palettePrefix(i||"")}))};function Ql(){var e,t=we((function(e){return e})),n=_e(),r=s.a.useContext(Pn).getLang,a=!(null!==(e=t.join)&&void 0!==e&&e.joinLink),i=Object(c.useState)(null!==d.y.getItem(Se.mb)),o=p()(i,2),u=o[0],l=o[1],f=Object(c.useState)(!u),h=p()(f,2),m=h[0],v=h[1],g=Object(c.useRef)(Tc()),b=null!==g.current,_=Object(c.useState)(!u),y=p()(_,2),E=y[0],O=y[1],w=function(){d.y.setItem(Se.mb,"true")},C=function(){var e,n,r,a,i;return null!==(e=t.join)&&void 0!==e&&e.joinLink?Kl((r={joinLink:null===(n=t.join)||void 0===n?void 0:n.joinLink,userId:window.vk.id},a=r.joinLink,i=r.userId,"".concat(Se.E).concat(Se.D,"/join?joinLink=").concat(a,"&userId=").concat(i))):Kl(function(e){var t=e.peerId,n=e.userId,r="".concat(Se.E).concat(Se.D,"/start?peerId=").concat(t,"&userId=").concat(n);return console.log("deeplink: ",r),r}({peerId:t.peer,userId:window.vk.id}))};Object(c.useEffect)((function(){C().then((function(){v(!1)})).catch((function(){v(!1)}))}),[u]);var S=function(){n({type:Se.g,mode:Se.ub.READY})};return s.a.createElement(Vn,{onClose:S,onBackdropClick:S},s.a.createElement(Gl.O,{nav:"StartCallModal",header:s.a.createElement(Zl,null,r(m&&b?"calls_download_started":u?"calls_app_title":a?"calls_start_call_after_install_app":"calls_join_call_after_install_app")),subheader:E?r("calls_download_and_install_app_for_pc"):u?r(a?"calls_try_manual_start_lesson":"calls_try_manual_join_lesson"):m?r("calls_wait_until_app_downloaded"):"",className:palettePrefix("StartCallModal")},m&&b&&g.current?s.a.createElement(s.a.Fragment,null,s.a.createElement(Gl.tb,{size:"large",className:palettePrefix("StartCallModal__action")}),s.a.createElement("div",{className:palettePrefix("StartCallModal__text")},r("calls_downloading_file").replace("{file}",g.current.filename))):E?g.current&&b?s.a.createElement(Gl.j,{size:"l",before:s.a.createElement(Wl.a,null),onClick:function(){return e=g.current.url,t=g.current.filename,w(),jc(e,t),v(!0),void setTimeout((function(){l(!0),v(!1),O(!1)}),3e3);var e,t},className:palettePrefix("StartCallModal__action")},r("calls_download_app")):s.a.createElement(Gl.j,{size:"l",before:s.a.createElement(Wl.a,null),href:Se.B,target:"_blank",onClick:function(){w(),O(!1)},className:palettePrefix("StartCallModal__action")},r("calls_download_app")):s.a.createElement(Gl.j,{mode:"secondary",size:"l",before:s.a.createElement(ql.a,null),onClick:C,className:palettePrefix("StartCallModal__action")},r(a?"calls_start_in_app":"calls_join_call_in_app")),!E&&s.a.createElement(Gl.wb,{weight:"regular",className:palettePrefix("StartCallModal__text")},s.a.createElement("div",null,r("calls_apps_for_all_platform")),s.a.createElement(Gl.L,{href:Se.B,target:"_blank"},r("calls_open_app_list"))),s.a.createElement(Gl.wb,{weight:"regular",className:palettePrefix("StartCallModal__text")},r("calls_calls_troubles_with_app"),s.a.createElement("br",null),s.a.createElement(Gl.L,{onClick:function(){var e,n,r=t.peer;if(window.Calls)if(null!==(e=t.join)&&void 0!==e&&e.joinLink){var a,i,o=null!==(a=t.entryPoint)&&void 0!==a?a:Se.v.CONVO_JOIN_SNIPPET;window.Calls.joinCallByLink(null===(i=t.join)||void 0===i?void 0:i.joinLink,void 0,!1,o)}else{var c=null!==(n=t.entryPoint)&&void 0!==n?n:Se.v.CONVO_LIST;if(r)r>2e9?window.Calls.startGroupCall(r,void 0,null,!1,c):window.Calls.call(r,!1,void 0,c);else window.Calls.startCall(!1,c)}}},r(a?"calls_calls_start_lesson_in_browser":"calls_join_call_in_browser")))))}var Jl=function(e){var t=e.items,n=e.actionButtons,r=e.onListItemClick,a=e.selectedId,i=e.onClose,o=e.onSearchChange,c=s.a.useContext(Pn).getLang;return s.a.createElement(Rn,{className:palettePrefix("CallByNameModal"),onClose:i},s.a.createElement(si,{title:c("calls_call_by_name_title"),onClose:i}),s.a.createElement("div",{className:palettePrefix("CallByNameModal__content")},s.a.createElement(Hi,{className:palettePrefix("CallByNameModalList__input"),placeholder:c("calls_call_by_name_search_placeholder"),onChange:o,onInput:o,onPaste:o}),s.a.createElement(Vi,{extra:t.length||""},c("calls_call_by_name_list_header")),0!==t.length&&s.a.createElement(di,{border:!1,className:palettePrefix("CallByNameModalList__list")},t.map((function(e){return function(e,t){var n=null;return n=t===e.id?s.a.createElement("span",{className:palettePrefix("CallByNameModalList__selected")},c("calls_call_by_name_selected")):s.a.createElement("span",{className:palettePrefix("CallByNameModalList__select")},c("calls_call_by_name_select")),s.a.createElement(bi,{key:e.id,onClick:function(){return r(e.id)},className:palettePrefix("CallByNameModalList__listItem"),aside:n},s.a.createElement(Zi,{photo:s.a.createElement(ln,{id:e.id,photo:e.photo,alt:e.name||"",className:palettePrefix("CallByNameModalList__photo")}),title:e.name,href:e.link,target:"_blank"}))}(e,a)}))),0===t.length&&s.a.createElement(ta,null,c("calls_call_by_name_not_found"))),s.a.createElement(ui,{actionButtons:n}))},Xl=function(e){var t=e.bridge,n=we((function(e){return e})),r=_e(),a=Object(c.useState)([]),i=p()(a,2),o=i[0],u=i[1],l=Object(c.useState)(n.me),d=p()(l,2),f=d[0],h=d[1],m=s.a.useContext(Pn).getLang,v=Object(c.useState)(""),g=p()(v,2),b=g[0],_=g[1],y=Object(c.useCallback)((function(e){return e.name}),[]),E=Object(c.useCallback)((function(e){return e.id}),[]),O=Hn([],y,E),w=n.participants[n.me],C=b?O.search(b):o,S=Object(c.useCallback)((function(e){_(e.target.value)}),[]),A=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="id"in e?e.id:e.peerId,r="screen_name"in e?"/"+e.screen_name:e.link,a="photo_100"in e?e.photo_100:e.photo;return{id:t?n:-n,name:ut(e.name),link:r,photo:a}};Object(c.useEffect)((function(){var e=[A(w,!0)];Ga().then((function(t){t.count>0&&t.items.forEach((function(t){e.push(A(t))}))})).finally((function(){u(e),e.forEach((function(e){return O.add(e)}))}))}),[]);var k=Object(c.useCallback)((function(e){if(n.callByName){var r=n.callByName,a=r.peerId,i=r.entryPoint,o=r.joinLink;o?t.joinCallByLink(o,void 0,e,i,f>0?0:f):a?t.call(a,e,void 0,i,f>0?0:f):t.startCall(e,i,!0,f>0?0:f)}}),[f]);if(!o.length)return s.a.createElement(rl,null);var j=[s.a.createElement(so,{onClick:function(){return k(!1)},key:"callByNameByAudio",appearance:"secondary"},m("calls_call_by_name_audio_button")),s.a.createElement(so,{onClick:function(){return k(!0)},key:"callByNameByVideo"},m("calls_call_by_name_video_button"))];return s.a.createElement(Jl,{items:C,actionButtons:j,selectedId:f,onListItemClick:function(e){h(e)},onClose:function(){r({type:Se.g,mode:Se.ub.READY})},participantMe:w,onSearchChange:S})},$l=function(e){var t,n,r,i,o=e.SDK,u=we((function(e){return e})),l=_e(),d=u.participants[u.me],f=Object(c.useCallback)((function(){l({type:Se.k,mode:Se.Ic.DEFAULT})}),[]),p=Object(c.useCallback)((function(){var e;o.toggleLocalAudio(!(null!==(e=d.mediaSettings)&&void 0!==e&&e.isAudioEnabled))}),[u]);return s.a.createElement(cs,null,s.a.createElement(us,a()({},{participantId:(n=d).peerId,isMe:!0,isWithVideo:sn(n),isWithAudio:!(null===(r=n.mediaSettings)||void 0===r||!r.isAudioEnabled),isScreenSharing:!(null===(i=n.mediaSettings)||void 0===i||!i.isScreenSharingEnabled),stream:cn(n),photo:n.photo,name:n.name,status:n.status,networkStatus:n.networkStatus},{onRestoreCall:f,isMe:!0,isLocalAudioEnabled:!(null===(t=d.mediaSettings)||void 0===t||!t.isAudioEnabled),isLocalAudioAllowed:!0,isLocalScreenSharing:!1,onToggleAudio:p})))};var ed=function(e){var t=e.id,n=e.name,r=e.letter,a=e.hasAudio,i=e.hasVideo,o=e.stream,c=e.wasConnected;return s.a.createElement("div",{className:palettePrefix("WaitingHall")},s.a.createElement("main",{className:palettePrefix("WaitingHall__main")},s.a.createElement(Cr,{id:t,hasVideo:i,hasAudio:a,isSharingScreen:!1,stream:o,isMe:!0,name:n,letter:r,allowContain:!0,wasConnected:c,networkStatus:1})))},td=function(e){var t=e.text;return s.a.createElement("div",{className:palettePrefix("WaitingHallInfo")},s.a.createElement("div",{className:palettePrefix("WaitingHallInfo__text")},t))};function nd(e){var t,n=e.SDK,r=e.navigateToConvo,a=we((function(e){return e})),i=_e(),u=Object(c.useContext)(Pn).getLang,l=Object(c.useContext)(He),d=l.isModalView,f=l.enableScreenTrack,h=a.peer,m=a.participants[a.me].mediaSettings||{isAudioEnabled:!1,isVideoEnabled:!1,isScreenSharingEnabled:!1},v=Object(c.useMemo)((function(){return qt(a)}),[a.participants,a.me,a.groupId,a.meGroup]),g=a.uiMode===Se.Ic.FULLSCREEN,b=Object(c.useState)(!1),_=p()(b,2),y=_[0],E=_[1],O=Object(c.useState)(!1),w=p()(O,2),C=w[0],S=w[1],A=function(e){return i({type:Se.k,mode:e})},k=Object(c.useCallback)((function(){d&&(a.uiMode===Se.Ic.FULLSCREEN?(ct(.3,null).then((function(){A(Se.Ic.COLLAPSED)})),A(Se.Ic.DEFAULT)):A(Se.Ic.COLLAPSED))}),[a.uiMode]),j=Object(c.useCallback)((function(){if(!y){var e=!m.isAudioEnabled;(e?na(n,[We.MediaOption.AUDIO]):Promise.resolve()).then((function(){var t;E(!0),(null===(t=a.notification)||void 0===t?void 0:t.type)===Se.wb.SPEAKING_ON_MUTE&&i({type:Se.d,notification:null}),n.toggleLocalAudio(e).finally((function(){E(!1)}))}))}}),[m,y]),T=Object(c.useCallback)((function(){if(!C){var e=!m.isVideoEnabled||m.isScreenSharingEnabled&&!f;(e?na(n,[We.MediaOption.VIDEO]):Promise.resolve()).then((function(){S(!0),f||m.isScreenSharingEnabled&&n.captureScreen(!1),n.toggleLocalVideo(e).finally((function(){S(!1)}))}))}}),[m,C]),I=Object(c.useCallback)((function(){k(),r(a.peer)}),[a.peer,a.uiMode]),P=Object(c.useCallback)((function(){n.hangup()}),[a.callData.callId,a.peer,v]),D=Object(c.useCallback)((function(){i({type:Se.k,mode:g?Se.Ic.DEFAULT:Se.Ic.FULLSCREEN}),i({type:Se.sc,tooltips:null})}),[a.uiMode]),N=Object(c.useCallback)((function(e,t){i({type:Se.sc,tooltips:o()({},e,t)})}),[]),x=Object(c.useCallback)((function(){i({type:Se.sc,tooltips:null})}),[]);Object(c.useEffect)((function(){return function(){i({type:Se.sc,tooltips:null})}}),[]);var R,M,L,B,F,H,V,U=Object(c.useMemo)((function(){var e;return s.a.createElement(pa,{dispatch:i,notification:a.notification,participant:a.participants[null===(e=a.notification)||void 0===e?void 0:e.data]})}),[a.notification,a.participants[null===(t=a.notification)||void 0===t?void 0:t.data]]),z=a.hangupType===Se.cb?u("calls_waiting_hall_removed"):u("calls_waiting_hall_info");return s.a.createElement(Vn,{onClose:P,onBackdropClick:k},s.a.createElement(Zr,{info:null,isVideoAllowed:!0,isAudioAllowed:!0,isVideoEnabled:m.isVideoEnabled,isAudioEnabled:m.isAudioEnabled,isFullScreen:g,onToggleAudio:j,onToggleVideo:T,onLeaveCall:P,onCollapseCall:d?k:null,onFullScreenToggle:D,onTooltipChange:N,onHidePanel:x,onChat:I,isChatControlShown:!!h&&!a.groupId,chatUnreadCount:a.chatUnreadCount,notification:U,tooltips:a.tooltips,amISpeaking:!!a.speakers[a.me],notificationWithButton:null,withoutPadding:!0},s.a.createElement(s.a.Fragment,null,m.isVideoEnabled&&s.a.createElement(ed,(R=a.participants,M=a.me,B=R[M],F=B.mediaSettings,H=sn(B),V=cn(B),{id:M,name:"",letter:null===(L=B.name)||void 0===L?void 0:L.slice(0,1),hasAudio:!(null==F||!F.isAudioEnabled),hasVideo:H,stream:V,wasConnected:!!B.wasConnected})),s.a.createElement(td,{text:z}))))}var rd=function(e){var t=e.onClose,n=e.onSubmit,r=e.children,a=Object(c.useContext)(Pn).getLang;return s.a.createElement(Ms,{onClose:t,title:a("calls_virtual_background"),appearance:"blue",actionButtons:s.a.createElement(s.a.Fragment,null,s.a.createElement(so,{onClick:t,appearance:"tertiary"},a("calls_cancel")),s.a.createElement(so,{onClick:n},a("calls_save"))),className:palettePrefix("VirtualBackgroundSettingsModal")},r)},ad=n(109),id=n.n(ad),od=n(165),cd=n.n(od),sd={audio:!1,video:{frameRate:25,height:382,width:510}},ud=function(e){var t;return null===(t=e.sizes)||void 0===t?void 0:t.reduce((function(e,t){return e[t.type]=t.url,e}),{})},ld=function(e){var t=ud(e);return(null==t?void 0:t.x)||(null==t?void 0:t.m)||(null==t?void 0:t.s)||""},dd=function(){var e=d.y.getItem(Se.ob.VIRTUAL_BACKGROUND_EFFECT);return"string"!=typeof e?Se.H.NONE:/^\d+$/.test(e)?+e:e},fd=function(e){d.y.setItem(Se.ob.VIRTUAL_BACKGROUND_EFFECT,"".concat(e))},pd=function(e,t){if(t){var n=t.find((function(t){return t.id===e}));if(n)return Promise.resolve(n)}return Ka({photo_ids:"".concat(e)}).then((function(e){try{var t=e.items[0];return t||null}catch(e){return null}}))},hd=function(){var e=cd()(id.a.mark((function e(t){return id.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=document.createElement("img");r.crossOrigin="anonymous",r.onerror=function(e){n("Failed image loading: ".concat(e))},r.onload=function(){return e(r)},r.src=t})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),md=["className","children"],vd=function(e){var t=e.className,n=e.children,r=ke()(e,md),i=Object(d.c)("Radio",t,{"Radio--disabled":e.disabled});return s.a.createElement("label",{className:palettePrefix(i)},s.a.createElement("input",a()({className:palettePrefix("Radio__input Radio__visuallyHidden"),type:"radio"},r)),s.a.createElement("span",{className:palettePrefix("Radio__control")}),Boolean(n)&&s.a.createElement("span",{className:palettePrefix("Radio__text")},n))};vd.defaultProps={className:"",name:void 0,onChange:void 0,checked:void 0,defaultChecked:void 0,autoFocus:!1,disabled:!1,children:null},vd.propTypes={value:g.a.oneOfType([g.a.number,g.a.string]),className:g.a.string,name:g.a.string,onChange:g.a.func,checked:g.a.oneOfType([g.a.bool,g.a.string]),defaultChecked:g.a.bool,autoFocus:g.a.bool,disabled:g.a.bool,children:g.a.oneOfType([g.a.node,g.a.arrayOf(g.a.node)])};var gd=vd,bd=["children","className","style"],_d=function(e){var t=e.children,n=e.className,r=e.style,i=ke()(e,bd),o=Object(c.useCallback)((function(){}),[]);return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:palettePrefix(Object(d.c)(n)),style:r},t),s.a.createElement("div",{className:palettePrefix("VirtualBackgroundSettings__item--radio")},s.a.createElement(gd,a()({},i,{onChange:o}))))},yd=function(e){var t=Object(c.useContext)(Pn).getLang;return s.a.createElement(_d,a()({},e,{className:palettePrefix(Object(d.c)("VirtualBackgroundSettings__item","VirtualBackgroundSettings__item--with-border"))}),t("calls_virtual_background_settings_no_background"))},Ed=Object(c.memo)(yd),Od=function(e){return s.a.createElement(_d,a()({},e,{className:palettePrefix(Object(d.c)("VirtualBackgroundSettings__item","VirtualBackgroundSettings__item--blur"))}))},wd=Object(c.memo)(Od),Cd=function(){return s.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 11V2C11 1.44772 11.4477 1 12 1C12.5523 1 13 1.44772 13 2V11H22C22.5523 11 23 11.4477 23 12C23 12.5523 22.5523 13 22 13H13V22C13 22.5523 12.5523 23 12 23C11.4477 23 11 22.5523 11 22V13H2C1.44772 13 1 12.5523 1 12C1 11.4477 1.44772 11 2 11H11Z",fill:"#8FADC8"}))},Sd=function(){return s.a.createElement("div",{className:palettePrefix(Object(d.c)("VirtualBackgroundSettings__item","VirtualBackgroundSettings__item--add-image"))},s.a.createElement(Cd,null))},Ad=Object(c.memo)(Sd),kd=Object(c.forwardRef)((function(e,t){var n=a()({},e);return s.a.createElement("div",a()({},n,{ref:t,style:{width:18,height:18}}),s.a.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s.a.createElement("rect",{width:"18",height:"18",rx:"2",fill:"black",fillOpacity:"0.4"}),s.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.10202 5L5 6.10202L7.89798 9L5 11.898L6.10202 13L9 10.102L11.898 13L13 11.898L10.102 9L13 6.10202L11.898 5L9.10108 7.7969L9 7.89798L6.10202 5Z",fill:"white",fillOpacity:"0.72"})))})),jd=["backgroundUrl","checked","onDelete","photoId"],Td=function(e){var t=e.backgroundUrl,n=e.checked,r=e.onDelete,i=e.photoId,o=ke()(e,jd),u=Object(c.useContext)(Pn).getLang,l=Object(c.useMemo)((function(){return s.a.createElement("div",{dangerouslySetInnerHTML:{__html:u(n?"calls_cant_remove_background":"calls_delete_background")}})}),[n]),f=Object(c.useCallback)((function(e){e.stopPropagation(),n||r(i)}),[n,i]);return s.a.createElement(_d,a()({},o,{checked:n,className:palettePrefix(Object(d.c)("VirtualBackgroundSettings__item","VirtualBackgroundSettings__item--background")),style:{backgroundImage:"url(".concat(t,")")}}),s.a.createElement("div",{className:palettePrefix(Object(d.c)("VirtualBackgroundSettings__item--background__deletebtn",{"VirtualBackgroundSettings__item--background__deletebtn--disabled":n})),onClick:f},s.a.createElement(Fr,{content:l,className:palettePrefix("VirtualBackgroundSettings__item__popper"),position:"t",align:"center"},s.a.createElement(kd,null))))},Id=Object(c.memo)(Td),Pd=function(e){var t=e.onDeleteBackground,n=e.backgroundList,r=e.chosen,a=e.onUpdateVideoEffectsSettings,i=e.onChooseBackground;Object(c.useEffect)((function(){r!==Se.H.NONE&&a(r)}),[]);var o=Object(c.useCallback)((function(e){i(e),a(e)}),[i,a]),u=Object(c.useMemo)((function(){return n.map((function(e){var n=function(e){var t=ud(e);return(null==t?void 0:t.m)||(null==t?void 0:t.x)||(null==t?void 0:t.s)||""}(e);return{id:e.id,onClick:o,content:s.a.createElement(Id,{checked:r===e.id,backgroundUrl:n,onDelete:t,photoId:e.id})}}))}),[r,n,o]);return{carouselItems:Object(c.useMemo)((function(){return[{id:Se.H.NONE,onClick:o,content:s.a.createElement(Ed,{checked:r===Se.H.NONE})},{id:Se.H.BLUR,onClick:o,content:s.a.createElement(wd,{checked:r===Se.H.BLUR})},{id:Se.H.ADD,onClick:o,content:s.a.createElement(Ad,null)}].concat(Ue()(u))}),[r,u,o])}},Dd=function(e,t){return(Dd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Nd(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Dd(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function xd(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}s((r=r.apply(e,t||[])).next())}))}function Rd(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}var Md=function(){function e(){this._backgroundCanvas=document.createElement("canvas")}return e.prototype.resize=function(e,t,n,r){var a=(void 0===r?{}:r).ctxOptions;return xd(this,void 0,void 0,(function(){var r,i,o,c,s,u,l;return Rd(this,(function(d){return this._backgroundCanvas.width=t,this._backgroundCanvas.height=n,r=e.width,i=e.height,c=(r*(o=r/i<t/n?t/r:n/i)-t)/2,s=(i*o-n)/2,(u=this._backgroundCanvas.getContext("2d",a))?(u.drawImage(e,c/o,s/o,t/o,n/o,0,0,t,n),(l=new Image(t,n)).src=this._backgroundCanvas.toDataURL(),[2,new Promise((function(e){l.onload=function(){e(l)}}))]):[2,Promise.reject("ctx did not initialized")]}))}))},e}();function Ld(e){var t={exports:{}};return e(t,t.exports),t.exports}var Bd,Fd,Hd=Ld((function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,a=void 0!==(e=e||{})?e:{};a.ready=new Promise((function(e,r){t=e,n=r}));var i,o={};for(i in a)a.hasOwnProperty(i)&&(o[i]=a[i]);var c,s="./this.program",u=function(e,t){throw t},l="";"undefined"!=typeof document&&document.currentScript&&(l=document.currentScript.src),void 0!==r&&r&&(l=r),l=0!==l.indexOf("blob:")?l.substr(0,l.lastIndexOf("/")+1):"",c=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText};var d,f=a.print||console.log.bind(console),p=a.printErr||console.warn.bind(console);for(i in o)o.hasOwnProperty(i)&&(a[i]=o[i]);o=null,a.arguments,a.thisProgram&&(s=a.thisProgram),a.quit&&(u=a.quit),a.wasmBinary&&(d=a.wasmBinary);var h,m=a.noExitRuntime||!0;"object"!=typeof WebAssembly&&M("no native wasm support detected");var v,g,b,_,y,E=!1,O="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function w(e,t,n){for(var r=t+n,a=t;e[a]&&!(a>=r);)++a;if(a-t>16&&e.subarray&&O)return O.decode(e.subarray(t,a));for(var i="";t<a;){var o=e[t++];if(128&o){var c=63&e[t++];if(192!=(224&o)){var s=63&e[t++];if((o=224==(240&o)?(15&o)<<12|c<<6|s:(7&o)<<18|c<<12|s<<6|63&e[t++])<65536)i+=String.fromCharCode(o);else{var u=o-65536;i+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else i+=String.fromCharCode((31&o)<<6|c)}else i+=String.fromCharCode(o)}return i}function C(e,t){return e?w(b,e,t):""}function S(e,t,n,r){if(!(r>0))return 0;for(var a=n,i=n+r-1,o=0;o<e.length;++o){var c=e.charCodeAt(o);if(c>=55296&&c<=57343&&(c=65536+((1023&c)<<10)|1023&e.charCodeAt(++o)),c<=127){if(n>=i)break;t[n++]=c}else if(c<=2047){if(n+1>=i)break;t[n++]=192|c>>6,t[n++]=128|63&c}else if(c<=65535){if(n+2>=i)break;t[n++]=224|c>>12,t[n++]=128|c>>6&63,t[n++]=128|63&c}else{if(n+3>=i)break;t[n++]=240|c>>18,t[n++]=128|c>>12&63,t[n++]=128|c>>6&63,t[n++]=128|63&c}}return t[n]=0,n-a}function A(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}function k(e){v=e,a.HEAP8=g=new Int8Array(e),a.HEAP16=new Int16Array(e),a.HEAP32=_=new Int32Array(e),a.HEAPU8=b=new Uint8Array(e),a.HEAPU16=new Uint16Array(e),a.HEAPU32=new Uint32Array(e),a.HEAPF32=new Float32Array(e),a.HEAPF64=new Float64Array(e)}a.INITIAL_MEMORY;var j=[],T=[],I=[],P=[];T.push({func:function(){le()}});var D=0,N=null;function x(e){D++,a.monitorRunDependencies&&a.monitorRunDependencies(D)}function R(e){if(D--,a.monitorRunDependencies&&a.monitorRunDependencies(D),0==D&&N){var t=N;N=null,t()}}function M(e){a.onAbort&&a.onAbort(e),p(e+=""),E=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw n(t),t}function L(e){return t=e,n="data:application/octet-stream;base64,",String.prototype.startsWith?t.startsWith(n):0===t.indexOf(n);var t,n}a.preloadedImages={},a.preloadedAudios={};var B,F,H,V="https://stest.mycdn.me/static/callseffects/0-0-2/tflite-simd.wasm";function U(e){try{if(e==V&&d)return new Uint8Array(d);throw"both async and sync fetching of the wasm failed"}catch(e){M(e)}}function z(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?y.get(n)():y.get(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(a)}}L(V)||(B=V,V=a.locateFile?a.locateFile(B,l):l+B);var G;function W(e){this.excPtr=e,this.ptr=e-16,this.set_type=function(e){_[this.ptr+8>>2]=e},this.get_type=function(){return _[this.ptr+8>>2]},this.set_destructor=function(e){_[this.ptr+0>>2]=e},this.get_destructor=function(){return _[this.ptr+0>>2]},this.set_refcount=function(e){_[this.ptr+4>>2]=e},this.set_caught=function(e){e=e?1:0,g[this.ptr+12>>0]=e},this.get_caught=function(){return 0!=g[this.ptr+12>>0]},this.set_rethrown=function(e){e=e?1:0,g[this.ptr+13>>0]=e},this.get_rethrown=function(){return 0!=g[this.ptr+13>>0]},this.init=function(e,t){this.set_type(e),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var e=_[this.ptr+4>>2];_[this.ptr+4>>2]=e+1},this.release_ref=function(){var e=_[this.ptr+4>>2];return _[this.ptr+4>>2]=e-1,1===e}}function q(e){return _[pe()>>2]=e,e}function K(e){try{return h.grow(e-v.byteLength+65535>>>16),k(h.buffer),1}catch(e){}}G=function(){return performance.now()};var Y={};function Z(){if(!Z.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:s||"./this.program"};for(var t in Y)e[t]=Y[t];var n=[];for(var t in e)n.push(t+"="+e[t]);Z.strings=n}return Z.strings}var Q={splitPath:function(e){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1)},normalizeArray:function(e,t){for(var n=0,r=e.length-1;r>=0;r--){var a=e[r];"."===a?e.splice(r,1):".."===a?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},normalize:function(e){var t="/"===e.charAt(0),n="/"===e.substr(-1);return(e=Q.normalizeArray(e.split("/").filter((function(e){return!!e})),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},dirname:function(e){var t=Q.splitPath(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},basename:function(e){if("/"===e)return"/";var t=(e=(e=Q.normalize(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)},extname:function(e){return Q.splitPath(e)[3]},join:function(){var e=Array.prototype.slice.call(arguments,0);return Q.normalize(e.join("/"))},join2:function(e,t){return Q.normalize(e+"/"+t)}},J={resolve:function(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var r=n>=0?arguments[n]:ee.cwd();if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";e=r+"/"+e,t="/"===r.charAt(0)}return(t?"/":"")+(e=Q.normalizeArray(e.split("/").filter((function(e){return!!e})),!t).join("/"))||"."},relative:function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=J.resolve(e).substr(1),t=J.resolve(t).substr(1);for(var r=n(e.split("/")),a=n(t.split("/")),i=Math.min(r.length,a.length),o=i,c=0;c<i;c++)if(r[c]!==a[c]){o=c;break}var s=[];for(c=o;c<r.length;c++)s.push("..");return(s=s.concat(a.slice(o))).join("/")}},X={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){X.ttys[e]={input:[],output:[],ops:t},ee.registerDevice(e,X.stream_ops)},stream_ops:{open:function(e){var t=X.ttys[e.node.rdev];if(!t)throw new ee.ErrnoError(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.flush(e.tty)},flush:function(e){e.tty.ops.flush(e.tty)},read:function(e,t,n,r,a){if(!e.tty||!e.tty.ops.get_char)throw new ee.ErrnoError(60);for(var i=0,o=0;o<r;o++){var c;try{c=e.tty.ops.get_char(e.tty)}catch(e){throw new ee.ErrnoError(29)}if(void 0===c&&0===i)throw new ee.ErrnoError(6);if(null==c)break;i++,t[n+o]=c}return i&&(e.node.timestamp=Date.now()),i},write:function(e,t,n,r,a){if(!e.tty||!e.tty.ops.put_char)throw new ee.ErrnoError(60);try{for(var i=0;i<r;i++)e.tty.ops.put_char(e.tty,t[n+i])}catch(e){throw new ee.ErrnoError(29)}return r&&(e.node.timestamp=Date.now()),i}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n"),!t)return null;e.input=se(t,!0)}return e.input.shift()},put_char:function(e,t){null===t||10===t?(f(w(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(f(w(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){null===t||10===t?(p(w(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(p(w(e.output,0)),e.output=[])}}};var $={ops_table:null,mount:function(e){return $.createNode(null,"/",16895,0)},createNode:function(e,t,n,r){if(ee.isBlkdev(n)||ee.isFIFO(n))throw new ee.ErrnoError(63);$.ops_table||($.ops_table={dir:{node:{getattr:$.node_ops.getattr,setattr:$.node_ops.setattr,lookup:$.node_ops.lookup,mknod:$.node_ops.mknod,rename:$.node_ops.rename,unlink:$.node_ops.unlink,rmdir:$.node_ops.rmdir,readdir:$.node_ops.readdir,symlink:$.node_ops.symlink},stream:{llseek:$.stream_ops.llseek}},file:{node:{getattr:$.node_ops.getattr,setattr:$.node_ops.setattr},stream:{llseek:$.stream_ops.llseek,read:$.stream_ops.read,write:$.stream_ops.write,allocate:$.stream_ops.allocate,mmap:$.stream_ops.mmap,msync:$.stream_ops.msync}},link:{node:{getattr:$.node_ops.getattr,setattr:$.node_ops.setattr,readlink:$.node_ops.readlink},stream:{}},chrdev:{node:{getattr:$.node_ops.getattr,setattr:$.node_ops.setattr},stream:ee.chrdev_stream_ops}});var a=ee.createNode(e,t,n,r);return ee.isDir(a.mode)?(a.node_ops=$.ops_table.dir.node,a.stream_ops=$.ops_table.dir.stream,a.contents={}):ee.isFile(a.mode)?(a.node_ops=$.ops_table.file.node,a.stream_ops=$.ops_table.file.stream,a.usedBytes=0,a.contents=null):ee.isLink(a.mode)?(a.node_ops=$.ops_table.link.node,a.stream_ops=$.ops_table.link.stream):ee.isChrdev(a.mode)&&(a.node_ops=$.ops_table.chrdev.node,a.stream_ops=$.ops_table.chrdev.stream),a.timestamp=Date.now(),e&&(e.contents[t]=a,e.timestamp=a.timestamp),a},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage:function(e,t){var n=e.contents?e.contents.length:0;if(!(n>=t)){t=Math.max(t,n*(n<1048576?2:1.125)>>>0),0!=n&&(t=Math.max(t,256));var r=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(r.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,t){if(e.usedBytes!=t)if(0==t)e.contents=null,e.usedBytes=0;else{var n=e.contents;e.contents=new Uint8Array(t),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=ee.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,ee.isDir(e.mode)?t.size=4096:ee.isFile(e.mode)?t.size=e.usedBytes:ee.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&$.resizeFileStorage(e,t.size)},lookup:function(e,t){throw ee.genericErrors[44]},mknod:function(e,t,n,r){return $.createNode(e,t,n,r)},rename:function(e,t,n){if(ee.isDir(e.mode)){var r;try{r=ee.lookupNode(t,n)}catch(e){}if(r)for(var a in r.contents)throw new ee.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=n,t.contents[n]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink:function(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir:function(e,t){var n=ee.lookupNode(e,t);for(var r in n.contents)throw new ee.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir:function(e){var t=[".",".."];for(var n in e.contents)e.contents.hasOwnProperty(n)&&t.push(n);return t},symlink:function(e,t,n){var r=$.createNode(e,t,41471,0);return r.link=n,r},readlink:function(e){if(!ee.isLink(e.mode))throw new ee.ErrnoError(28);return e.link}},stream_ops:{read:function(e,t,n,r,a){var i=e.node.contents;if(a>=e.node.usedBytes)return 0;var o=Math.min(e.node.usedBytes-a,r);if(o>8&&i.subarray)t.set(i.subarray(a,a+o),n);else for(var c=0;c<o;c++)t[n+c]=i[a+c];return o},write:function(e,t,n,r,a,i){if(t.buffer===g.buffer&&(i=!1),!r)return 0;var o=e.node;if(o.timestamp=Date.now(),t.subarray&&(!o.contents||o.contents.subarray)){if(i)return o.contents=t.subarray(n,n+r),o.usedBytes=r,r;if(0===o.usedBytes&&0===a)return o.contents=t.slice(n,n+r),o.usedBytes=r,r;if(a+r<=o.usedBytes)return o.contents.set(t.subarray(n,n+r),a),r}if($.expandFileStorage(o,a+r),o.contents.subarray&&t.subarray)o.contents.set(t.subarray(n,n+r),a);else for(var c=0;c<r;c++)o.contents[a+c]=t[n+c];return o.usedBytes=Math.max(o.usedBytes,a+r),r},llseek:function(e,t,n){var r=t;if(1===n?r+=e.position:2===n&&ee.isFile(e.node.mode)&&(r+=e.node.usedBytes),r<0)throw new ee.ErrnoError(28);return r},allocate:function(e,t,n){$.expandFileStorage(e.node,t+n),e.node.usedBytes=Math.max(e.node.usedBytes,t+n)},mmap:function(e,t,n,r,a,i){if(0!==t)throw new ee.ErrnoError(28);if(!ee.isFile(e.node.mode))throw new ee.ErrnoError(43);var o,c,s=e.node.contents;if(2&i||s.buffer!==v){if((r>0||r+n<s.length)&&(s=s.subarray?s.subarray(r,r+n):Array.prototype.slice.call(s,r,r+n)),c=!0,!(o=function(e){for(var t=function(e,t){return t||(t=16),Math.ceil(e/t)*t}(e,16384),n=fe(t);e<t;)g[n+e++]=0;return n}(n)))throw new ee.ErrnoError(48);g.set(s,o)}else c=!1,o=s.byteOffset;return{ptr:o,allocated:c}},msync:function(e,t,n,r,a){if(!ee.isFile(e.node.mode))throw new ee.ErrnoError(43);return 2&a||$.stream_ops.write(e,t,0,r,n,!1),0}}},ee={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(e,t){if(t=t||{},!(e=J.resolve(ee.cwd(),e)))return{path:"",node:null};var n={follow_mount:!0,recurse_count:0};for(var r in n)void 0===t[r]&&(t[r]=n[r]);if(t.recurse_count>8)throw new ee.ErrnoError(32);for(var a=Q.normalizeArray(e.split("/").filter((function(e){return!!e})),!1),i=ee.root,o="/",c=0;c<a.length;c++){var s=c===a.length-1;if(s&&t.parent)break;if(i=ee.lookupNode(i,a[c]),o=Q.join2(o,a[c]),ee.isMountpoint(i)&&(!s||s&&t.follow_mount)&&(i=i.mounted.root),!s||t.follow)for(var u=0;ee.isLink(i.mode);){var l=ee.readlink(o);if(o=J.resolve(Q.dirname(o),l),i=ee.lookupPath(o,{recurse_count:t.recurse_count}).node,u++>40)throw new ee.ErrnoError(32)}}return{path:o,node:i}},getPath:function(e){for(var t;;){if(ee.isRoot(e)){var n=e.mount.mountpoint;return t?"/"!==n[n.length-1]?n+"/"+t:n+t:n}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:function(e,t){for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(e+n>>>0)%ee.nameTable.length},hashAddNode:function(e){var t=ee.hashName(e.parent.id,e.name);e.name_next=ee.nameTable[t],ee.nameTable[t]=e},hashRemoveNode:function(e){var t=ee.hashName(e.parent.id,e.name);if(ee.nameTable[t]===e)ee.nameTable[t]=e.name_next;else for(var n=ee.nameTable[t];n;){if(n.name_next===e){n.name_next=e.name_next;break}n=n.name_next}},lookupNode:function(e,t){var n=ee.mayLookup(e);if(n)throw new ee.ErrnoError(n,e);for(var r=ee.hashName(e.id,t),a=ee.nameTable[r];a;a=a.name_next){var i=a.name;if(a.parent.id===e.id&&i===t)return a}return ee.lookup(e,t)},createNode:function(e,t,n,r){var a=new ee.FSNode(e,t,n,r);return ee.hashAddNode(a),a},destroyNode:function(e){ee.hashRemoveNode(e)},isRoot:function(e){return e===e.parent},isMountpoint:function(e){return!!e.mounted},isFile:function(e){return 32768==(61440&e)},isDir:function(e){return 16384==(61440&e)},isLink:function(e){return 40960==(61440&e)},isChrdev:function(e){return 8192==(61440&e)},isBlkdev:function(e){return 24576==(61440&e)},isFIFO:function(e){return 4096==(61440&e)},isSocket:function(e){return 49152==(49152&e)},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(e){var t=ee.flagModes[e];if(void 0===t)throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:function(e){var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:function(e,t){return ee.ignorePermissions||(-1===t.indexOf("r")||292&e.mode)&&(-1===t.indexOf("w")||146&e.mode)&&(-1===t.indexOf("x")||73&e.mode)?0:2},mayLookup:function(e){return ee.nodePermissions(e,"x")||(e.node_ops.lookup?0:2)},mayCreate:function(e,t){try{return ee.lookupNode(e,t),20}catch(e){}return ee.nodePermissions(e,"wx")},mayDelete:function(e,t,n){var r;try{r=ee.lookupNode(e,t)}catch(e){return e.errno}var a=ee.nodePermissions(e,"wx");if(a)return a;if(n){if(!ee.isDir(r.mode))return 54;if(ee.isRoot(r)||ee.getPath(r)===ee.cwd())return 10}else if(ee.isDir(r.mode))return 31;return 0},mayOpen:function(e,t){return e?ee.isLink(e.mode)?32:ee.isDir(e.mode)&&("r"!==ee.flagsToPermissionString(t)||512&t)?31:ee.nodePermissions(e,ee.flagsToPermissionString(t)):44},MAX_OPEN_FDS:4096,nextfd:function(e,t){e=e||0,t=t||ee.MAX_OPEN_FDS;for(var n=e;n<=t;n++)if(!ee.streams[n])return n;throw new ee.ErrnoError(33)},getStream:function(e){return ee.streams[e]},createStream:function(e,t,n){ee.FSStream||(ee.FSStream=function(){},ee.FSStream.prototype={object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}});var r=new ee.FSStream;for(var a in e)r[a]=e[a];e=r;var i=ee.nextfd(t,n);return e.fd=i,ee.streams[i]=e,e},closeStream:function(e){ee.streams[e]=null},chrdev_stream_ops:{open:function(e){var t=ee.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:function(){throw new ee.ErrnoError(70)}},major:function(e){return e>>8},minor:function(e){return 255&e},makedev:function(e,t){return e<<8|t},registerDevice:function(e,t){ee.devices[e]={stream_ops:t}},getDevice:function(e){return ee.devices[e]},getMounts:function(e){for(var t=[],n=[e];n.length;){var r=n.pop();t.push(r),n.push.apply(n,r.mounts)}return t},syncfs:function(e,t){"function"==typeof e&&(t=e,e=!1),ee.syncFSRequests++,ee.syncFSRequests>1&&p("warning: "+ee.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var n=ee.getMounts(ee.root.mount),r=0;function a(e){return ee.syncFSRequests--,t(e)}function i(e){if(e)return i.errored?void 0:(i.errored=!0,a(e));++r>=n.length&&a(null)}n.forEach((function(t){if(!t.type.syncfs)return i(null);t.type.syncfs(t,e,i)}))},mount:function(e,t,n){var r,a="/"===n,i=!n;if(a&&ee.root)throw new ee.ErrnoError(10);if(!a&&!i){var o=ee.lookupPath(n,{follow_mount:!1});if(n=o.path,r=o.node,ee.isMountpoint(r))throw new ee.ErrnoError(10);if(!ee.isDir(r.mode))throw new ee.ErrnoError(54)}var c={type:e,opts:t,mountpoint:n,mounts:[]},s=e.mount(c);return s.mount=c,c.root=s,a?ee.root=s:r&&(r.mounted=c,r.mount&&r.mount.mounts.push(c)),s},unmount:function(e){var t=ee.lookupPath(e,{follow_mount:!1});if(!ee.isMountpoint(t.node))throw new ee.ErrnoError(28);var n=t.node,r=n.mounted,a=ee.getMounts(r);Object.keys(ee.nameTable).forEach((function(e){for(var t=ee.nameTable[e];t;){var n=t.name_next;-1!==a.indexOf(t.mount)&&ee.destroyNode(t),t=n}})),n.mounted=null;var i=n.mount.mounts.indexOf(r);n.mount.mounts.splice(i,1)},lookup:function(e,t){return e.node_ops.lookup(e,t)},mknod:function(e,t,n){var r=ee.lookupPath(e,{parent:!0}).node,a=Q.basename(e);if(!a||"."===a||".."===a)throw new ee.ErrnoError(28);var i=ee.mayCreate(r,a);if(i)throw new ee.ErrnoError(i);if(!r.node_ops.mknod)throw new ee.ErrnoError(63);return r.node_ops.mknod(r,a,t,n)},create:function(e,t){return t=void 0!==t?t:438,t&=4095,t|=32768,ee.mknod(e,t,0)},mkdir:function(e,t){return t=void 0!==t?t:511,t&=1023,t|=16384,ee.mknod(e,t,0)},mkdirTree:function(e,t){for(var n=e.split("/"),r="",a=0;a<n.length;++a)if(n[a]){r+="/"+n[a];try{ee.mkdir(r,t)}catch(e){if(20!=e.errno)throw e}}},mkdev:function(e,t,n){return void 0===n&&(n=t,t=438),t|=8192,ee.mknod(e,t,n)},symlink:function(e,t){if(!J.resolve(e))throw new ee.ErrnoError(44);var n=ee.lookupPath(t,{parent:!0}).node;if(!n)throw new ee.ErrnoError(44);var r=Q.basename(t),a=ee.mayCreate(n,r);if(a)throw new ee.ErrnoError(a);if(!n.node_ops.symlink)throw new ee.ErrnoError(63);return n.node_ops.symlink(n,r,e)},rename:function(e,t){var n,r,a=Q.dirname(e),i=Q.dirname(t),o=Q.basename(e),c=Q.basename(t);if(n=ee.lookupPath(e,{parent:!0}).node,r=ee.lookupPath(t,{parent:!0}).node,!n||!r)throw new ee.ErrnoError(44);if(n.mount!==r.mount)throw new ee.ErrnoError(75);var s,u=ee.lookupNode(n,o),l=J.relative(e,i);if("."!==l.charAt(0))throw new ee.ErrnoError(28);if("."!==(l=J.relative(t,a)).charAt(0))throw new ee.ErrnoError(55);try{s=ee.lookupNode(r,c)}catch(e){}if(u!==s){var d=ee.isDir(u.mode),f=ee.mayDelete(n,o,d);if(f)throw new ee.ErrnoError(f);if(f=s?ee.mayDelete(r,c,d):ee.mayCreate(r,c))throw new ee.ErrnoError(f);if(!n.node_ops.rename)throw new ee.ErrnoError(63);if(ee.isMountpoint(u)||s&&ee.isMountpoint(s))throw new ee.ErrnoError(10);if(r!==n&&(f=ee.nodePermissions(n,"w")))throw new ee.ErrnoError(f);try{ee.trackingDelegate.willMovePath}catch(n){p("FS.trackingDelegate['willMovePath']('"+e+"', '"+t+"') threw an exception: "+n.message)}ee.hashRemoveNode(u);try{n.node_ops.rename(u,r,c)}catch(e){throw e}finally{ee.hashAddNode(u)}try{ee.trackingDelegate.onMovePath}catch(n){p("FS.trackingDelegate['onMovePath']('"+e+"', '"+t+"') threw an exception: "+n.message)}}},rmdir:function(e){var t=ee.lookupPath(e,{parent:!0}).node,n=Q.basename(e),r=ee.lookupNode(t,n),a=ee.mayDelete(t,n,!0);if(a)throw new ee.ErrnoError(a);if(!t.node_ops.rmdir)throw new ee.ErrnoError(63);if(ee.isMountpoint(r))throw new ee.ErrnoError(10);try{ee.trackingDelegate.willDeletePath}catch(t){p("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+t.message)}t.node_ops.rmdir(t,n),ee.destroyNode(r);try{ee.trackingDelegate.onDeletePath}catch(t){p("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+t.message)}},readdir:function(e){var t=ee.lookupPath(e,{follow:!0}).node;if(!t.node_ops.readdir)throw new ee.ErrnoError(54);return t.node_ops.readdir(t)},unlink:function(e){var t=ee.lookupPath(e,{parent:!0}).node,n=Q.basename(e),r=ee.lookupNode(t,n),a=ee.mayDelete(t,n,!1);if(a)throw new ee.ErrnoError(a);if(!t.node_ops.unlink)throw new ee.ErrnoError(63);if(ee.isMountpoint(r))throw new ee.ErrnoError(10);try{ee.trackingDelegate.willDeletePath}catch(t){p("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+t.message)}t.node_ops.unlink(t,n),ee.destroyNode(r);try{ee.trackingDelegate.onDeletePath}catch(t){p("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+t.message)}},readlink:function(e){var t=ee.lookupPath(e).node;if(!t)throw new ee.ErrnoError(44);if(!t.node_ops.readlink)throw new ee.ErrnoError(28);return J.resolve(ee.getPath(t.parent),t.node_ops.readlink(t))},stat:function(e,t){var n=ee.lookupPath(e,{follow:!t}).node;if(!n)throw new ee.ErrnoError(44);if(!n.node_ops.getattr)throw new ee.ErrnoError(63);return n.node_ops.getattr(n)},lstat:function(e){return ee.stat(e,!0)},chmod:function(e,t,n){var r;if(!(r="string"==typeof e?ee.lookupPath(e,{follow:!n}).node:e).node_ops.setattr)throw new ee.ErrnoError(63);r.node_ops.setattr(r,{mode:4095&t|-4096&r.mode,timestamp:Date.now()})},lchmod:function(e,t){ee.chmod(e,t,!0)},fchmod:function(e,t){var n=ee.getStream(e);if(!n)throw new ee.ErrnoError(8);ee.chmod(n.node,t)},chown:function(e,t,n,r){var a;if(!(a="string"==typeof e?ee.lookupPath(e,{follow:!r}).node:e).node_ops.setattr)throw new ee.ErrnoError(63);a.node_ops.setattr(a,{timestamp:Date.now()})},lchown:function(e,t,n){ee.chown(e,t,n,!0)},fchown:function(e,t,n){var r=ee.getStream(e);if(!r)throw new ee.ErrnoError(8);ee.chown(r.node,t,n)},truncate:function(e,t){if(t<0)throw new ee.ErrnoError(28);var n;if(!(n="string"==typeof e?ee.lookupPath(e,{follow:!0}).node:e).node_ops.setattr)throw new ee.ErrnoError(63);if(ee.isDir(n.mode))throw new ee.ErrnoError(31);if(!ee.isFile(n.mode))throw new ee.ErrnoError(28);var r=ee.nodePermissions(n,"w");if(r)throw new ee.ErrnoError(r);n.node_ops.setattr(n,{size:t,timestamp:Date.now()})},ftruncate:function(e,t){var n=ee.getStream(e);if(!n)throw new ee.ErrnoError(8);if(0==(2097155&n.flags))throw new ee.ErrnoError(28);ee.truncate(n.node,t)},utime:function(e,t,n){var r=ee.lookupPath(e,{follow:!0}).node;r.node_ops.setattr(r,{timestamp:Math.max(t,n)})},open:function(e,t,n,r,i){if(""===e)throw new ee.ErrnoError(44);var o;if(n=void 0===n?438:n,n=64&(t="string"==typeof t?ee.modeStringToFlags(t):t)?4095&n|32768:0,"object"==typeof e)o=e;else{e=Q.normalize(e);try{o=ee.lookupPath(e,{follow:!(131072&t)}).node}catch(e){}}var c=!1;if(64&t)if(o){if(128&t)throw new ee.ErrnoError(20)}else o=ee.mknod(e,n,0),c=!0;if(!o)throw new ee.ErrnoError(44);if(ee.isChrdev(o.mode)&&(t&=-513),65536&t&&!ee.isDir(o.mode))throw new ee.ErrnoError(54);if(!c){var s=ee.mayOpen(o,t);if(s)throw new ee.ErrnoError(s)}512&t&&ee.truncate(o,0),t&=-131713;var u=ee.createStream({node:o,path:ee.getPath(o),flags:t,seekable:!0,position:0,stream_ops:o.stream_ops,ungotten:[],error:!1},r,i);u.stream_ops.open&&u.stream_ops.open(u),!a.logReadFiles||1&t||(ee.readFiles||(ee.readFiles={}),e in ee.readFiles||(ee.readFiles[e]=1,p("FS.trackingDelegate error on read file: "+e)));try{ee.trackingDelegate.onOpenFile}catch(t){p("FS.trackingDelegate['onOpenFile']('"+e+"', flags) threw an exception: "+t.message)}return u},close:function(e){if(ee.isClosed(e))throw new ee.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{ee.closeStream(e.fd)}e.fd=null},isClosed:function(e){return null===e.fd},llseek:function(e,t,n){if(ee.isClosed(e))throw new ee.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new ee.ErrnoError(70);if(0!=n&&1!=n&&2!=n)throw new ee.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,n),e.ungotten=[],e.position},read:function(e,t,n,r,a){if(r<0||a<0)throw new ee.ErrnoError(28);if(ee.isClosed(e))throw new ee.ErrnoError(8);if(1==(2097155&e.flags))throw new ee.ErrnoError(8);if(ee.isDir(e.node.mode))throw new ee.ErrnoError(31);if(!e.stream_ops.read)throw new ee.ErrnoError(28);var i=void 0!==a;if(i){if(!e.seekable)throw new ee.ErrnoError(70)}else a=e.position;var o=e.stream_ops.read(e,t,n,r,a);return i||(e.position+=o),o},write:function(e,t,n,r,a,i){if(r<0||a<0)throw new ee.ErrnoError(28);if(ee.isClosed(e))throw new ee.ErrnoError(8);if(0==(2097155&e.flags))throw new ee.ErrnoError(8);if(ee.isDir(e.node.mode))throw new ee.ErrnoError(31);if(!e.stream_ops.write)throw new ee.ErrnoError(28);e.seekable&&1024&e.flags&&ee.llseek(e,0,2);var o=void 0!==a;if(o){if(!e.seekable)throw new ee.ErrnoError(70)}else a=e.position;var c=e.stream_ops.write(e,t,n,r,a,i);o||(e.position+=c);try{e.path&&ee.trackingDelegate.onWriteToFile&&ee.trackingDelegate.onWriteToFile(e.path)}catch(t){p("FS.trackingDelegate['onWriteToFile']('"+e.path+"') threw an exception: "+t.message)}return c},allocate:function(e,t,n){if(ee.isClosed(e))throw new ee.ErrnoError(8);if(t<0||n<=0)throw new ee.ErrnoError(28);if(0==(2097155&e.flags))throw new ee.ErrnoError(8);if(!ee.isFile(e.node.mode)&&!ee.isDir(e.node.mode))throw new ee.ErrnoError(43);if(!e.stream_ops.allocate)throw new ee.ErrnoError(138);e.stream_ops.allocate(e,t,n)},mmap:function(e,t,n,r,a,i){if(0!=(2&a)&&0==(2&i)&&2!=(2097155&e.flags))throw new ee.ErrnoError(2);if(1==(2097155&e.flags))throw new ee.ErrnoError(2);if(!e.stream_ops.mmap)throw new ee.ErrnoError(43);return e.stream_ops.mmap(e,t,n,r,a,i)},msync:function(e,t,n,r,a){return e&&e.stream_ops.msync?e.stream_ops.msync(e,t,n,r,a):0},munmap:function(e){return 0},ioctl:function(e,t,n){if(!e.stream_ops.ioctl)throw new ee.ErrnoError(59);return e.stream_ops.ioctl(e,t,n)},readFile:function(e,t){if((t=t||{}).flags=t.flags||0,t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error('Invalid encoding type "'+t.encoding+'"');var n,r=ee.open(e,t.flags),a=ee.stat(e).size,i=new Uint8Array(a);return ee.read(r,i,0,a,0),"utf8"===t.encoding?n=w(i,0):"binary"===t.encoding&&(n=i),ee.close(r),n},writeFile:function(e,t,n){(n=n||{}).flags=n.flags||577;var r=ee.open(e,n.flags,n.mode);if("string"==typeof t){var a=new Uint8Array(A(t)+1),i=S(t,a,0,a.length);ee.write(r,a,0,i,void 0,n.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");ee.write(r,t,0,t.byteLength,void 0,n.canOwn)}ee.close(r)},cwd:function(){return ee.currentPath},chdir:function(e){var t=ee.lookupPath(e,{follow:!0});if(null===t.node)throw new ee.ErrnoError(44);if(!ee.isDir(t.node.mode))throw new ee.ErrnoError(54);var n=ee.nodePermissions(t.node,"x");if(n)throw new ee.ErrnoError(n);ee.currentPath=t.path},createDefaultDirectories:function(){ee.mkdir("/tmp"),ee.mkdir("/home"),ee.mkdir("/home/web_user")},createDefaultDevices:function(){ee.mkdir("/dev"),ee.registerDevice(ee.makedev(1,3),{read:function(){return 0},write:function(e,t,n,r,a){return r}}),ee.mkdev("/dev/null",ee.makedev(1,3)),X.register(ee.makedev(5,0),X.default_tty_ops),X.register(ee.makedev(6,0),X.default_tty1_ops),ee.mkdev("/dev/tty",ee.makedev(5,0)),ee.mkdev("/dev/tty1",ee.makedev(6,0));var e=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return function(){return crypto.getRandomValues(e),e[0]}}return function(){M("randomDevice")}}();ee.createDevice("/dev","random",e),ee.createDevice("/dev","urandom",e),ee.mkdir("/dev/shm"),ee.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){ee.mkdir("/proc");var e=ee.mkdir("/proc/self");ee.mkdir("/proc/self/fd"),ee.mount({mount:function(){var t=ee.createNode(e,"fd",16895,73);return t.node_ops={lookup:function(e,t){var n=+t,r=ee.getStream(n);if(!r)throw new ee.ErrnoError(8);var a={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return r.path}}};return a.parent=a,a}},t}},{},"/proc/self/fd")},createStandardStreams:function(){a.stdin?ee.createDevice("/dev","stdin",a.stdin):ee.symlink("/dev/tty","/dev/stdin"),a.stdout?ee.createDevice("/dev","stdout",null,a.stdout):ee.symlink("/dev/tty","/dev/stdout"),a.stderr?ee.createDevice("/dev","stderr",null,a.stderr):ee.symlink("/dev/tty1","/dev/stderr"),ee.open("/dev/stdin",0),ee.open("/dev/stdout",1),ee.open("/dev/stderr",1)},ensureErrnoError:function(){ee.ErrnoError||(ee.ErrnoError=function(e,t){this.node=t,this.setErrno=function(e){this.errno=e},this.setErrno(e),this.message="FS error"},ee.ErrnoError.prototype=new Error,ee.ErrnoError.prototype.constructor=ee.ErrnoError,[44].forEach((function(e){ee.genericErrors[e]=new ee.ErrnoError(e),ee.genericErrors[e].stack="<generic error, no stack>"})))},staticInit:function(){ee.ensureErrnoError(),ee.nameTable=new Array(4096),ee.mount($,{},"/"),ee.createDefaultDirectories(),ee.createDefaultDevices(),ee.createSpecialDirectories(),ee.filesystems={MEMFS:$}},init:function(e,t,n){ee.init.initialized=!0,ee.ensureErrnoError(),a.stdin=e||a.stdin,a.stdout=t||a.stdout,a.stderr=n||a.stderr,ee.createStandardStreams()},quit:function(){ee.init.initialized=!1;var e=a._fflush;e&&e(0);for(var t=0;t<ee.streams.length;t++){var n=ee.streams[t];n&&ee.close(n)}},getMode:function(e,t){var n=0;return e&&(n|=365),t&&(n|=146),n},findObject:function(e,t){var n=ee.analyzePath(e,t);return n.exists?n.object:null},analyzePath:function(e,t){try{e=(r=ee.lookupPath(e,{follow:!t})).path}catch(e){}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var r=ee.lookupPath(e,{parent:!0});n.parentExists=!0,n.parentPath=r.path,n.parentObject=r.node,n.name=Q.basename(e),r=ee.lookupPath(e,{follow:!t}),n.exists=!0,n.path=r.path,n.object=r.node,n.name=r.node.name,n.isRoot="/"===r.path}catch(e){n.error=e.errno}return n},createPath:function(e,t,n,r){e="string"==typeof e?e:ee.getPath(e);for(var a=t.split("/").reverse();a.length;){var i=a.pop();if(i){var o=Q.join2(e,i);try{ee.mkdir(o)}catch(e){}e=o}}return o},createFile:function(e,t,n,r,a){var i=Q.join2("string"==typeof e?e:ee.getPath(e),t),o=ee.getMode(r,a);return ee.create(i,o)},createDataFile:function(e,t,n,r,a,i){var o=t?Q.join2("string"==typeof e?e:ee.getPath(e),t):e,c=ee.getMode(r,a),s=ee.create(o,c);if(n){if("string"==typeof n){for(var u=new Array(n.length),l=0,d=n.length;l<d;++l)u[l]=n.charCodeAt(l);n=u}ee.chmod(s,146|c);var f=ee.open(s,577);ee.write(f,n,0,n.length,0,i),ee.close(f),ee.chmod(s,c)}return s},createDevice:function(e,t,n,r){var a=Q.join2("string"==typeof e?e:ee.getPath(e),t),i=ee.getMode(!!n,!!r);ee.createDevice.major||(ee.createDevice.major=64);var o=ee.makedev(ee.createDevice.major++,0);return ee.registerDevice(o,{open:function(e){e.seekable=!1},close:function(e){r&&r.buffer&&r.buffer.length&&r(10)},read:function(e,t,r,a,i){for(var o=0,c=0;c<a;c++){var s;try{s=n()}catch(e){throw new ee.ErrnoError(29)}if(void 0===s&&0===o)throw new ee.ErrnoError(6);if(null==s)break;o++,t[r+c]=s}return o&&(e.node.timestamp=Date.now()),o},write:function(e,t,n,a,i){for(var o=0;o<a;o++)try{r(t[n+o])}catch(e){throw new ee.ErrnoError(29)}return a&&(e.node.timestamp=Date.now()),o}}),ee.mkdev(a,i,o)},forceLoadFile:function(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!c)throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=se(c(e.url),!0),e.usedBytes=e.contents.length}catch(e){throw new ee.ErrnoError(29)}},createLazyFile:function(e,t,n,r,a){function i(){this.lengthKnown=!1,this.chunks=[]}if(i.prototype.get=function(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,n=e/this.chunkSize|0;return this.getter(n)[t]}},i.prototype.setDataGetter=function(e){this.getter=e},i.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",n,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+n+". Status: "+e.status);var t,r=Number(e.getResponseHeader("Content-length")),a=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,i=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,o=1048576;a||(o=r);var c=this;c.setDataGetter((function(e){var t=e*o,a=(e+1)*o-1;if(a=Math.min(a,r-1),void 0===c.chunks[e]&&(c.chunks[e]=function(e,t){if(e>t)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>r-1)throw new Error("only "+r+" bytes available! programmer error!");var a=new XMLHttpRequest;if(a.open("GET",n,!1),r!==o&&a.setRequestHeader("Range","bytes="+e+"-"+t),"undefined"!=typeof Uint8Array&&(a.responseType="arraybuffer"),a.overrideMimeType&&a.overrideMimeType("text/plain; charset=x-user-defined"),a.send(null),!(a.status>=200&&a.status<300||304===a.status))throw new Error("Couldn't load "+n+". Status: "+a.status);return void 0!==a.response?new Uint8Array(a.response||[]):se(a.responseText||"",!0)}(t,a)),void 0===c.chunks[e])throw new Error("doXHR failed!");return c.chunks[e]})),!i&&r||(o=r=1,r=this.getter(0).length,o=r,f("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=r,this._chunkSize=o,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var o={isDevice:!1,url:n},c=ee.createFile(e,t,o,r,a);o.contents?c.contents=o.contents:o.url&&(c.contents=null,c.url=o.url),Object.defineProperties(c,{usedBytes:{get:function(){return this.contents.length}}});var s={};return Object.keys(c.stream_ops).forEach((function(e){var t=c.stream_ops[e];s[e]=function(){return ee.forceLoadFile(c),t.apply(null,arguments)}})),s.read=function(e,t,n,r,a){ee.forceLoadFile(c);var i=e.node.contents;if(a>=i.length)return 0;var o=Math.min(i.length-a,r);if(i.slice)for(var s=0;s<o;s++)t[n+s]=i[a+s];else for(s=0;s<o;s++)t[n+s]=i.get(a+s);return o},c.stream_ops=s,c},createPreloadedFile:function(e,t,n,r,i,o,c,s,u,l){Browser.init();var d=t?J.resolve(Q.join2(e,t)):e;function f(n){function f(n){l&&l(),s||ee.createDataFile(e,t,n,r,i,u),o&&o(),R()}var p=!1;a.preloadPlugins.forEach((function(e){p||e.canHandle(d)&&(e.handle(n,d,f,(function(){c&&c(),R()})),p=!0)})),p||f(n)}x(),"string"==typeof n?Browser.asyncLoad(n,(function(e){f(e)}),c):f(n)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(e,t,n){t=t||function(){},n=n||function(){};var r=ee.indexedDB();try{var a=r.open(ee.DB_NAME(),ee.DB_VERSION)}catch(e){return n(e)}a.onupgradeneeded=function(){f("creating db"),a.result.createObjectStore(ee.DB_STORE_NAME)},a.onsuccess=function(){var r=a.result.transaction([ee.DB_STORE_NAME],"readwrite"),i=r.objectStore(ee.DB_STORE_NAME),o=0,c=0,s=e.length;function u(){0==c?t():n()}e.forEach((function(e){var t=i.put(ee.analyzePath(e).object.contents,e);t.onsuccess=function(){++o+c==s&&u()},t.onerror=function(){c++,o+c==s&&u()}})),r.onerror=n},a.onerror=n},loadFilesFromDB:function(e,t,n){t=t||function(){},n=n||function(){};var r=ee.indexedDB();try{var a=r.open(ee.DB_NAME(),ee.DB_VERSION)}catch(e){return n(e)}a.onupgradeneeded=n,a.onsuccess=function(){var r=a.result;try{var i=r.transaction([ee.DB_STORE_NAME],"readonly")}catch(e){return void n(e)}var o=i.objectStore(ee.DB_STORE_NAME),c=0,s=0,u=e.length;function l(){0==s?t():n()}e.forEach((function(e){var t=o.get(e);t.onsuccess=function(){ee.analyzePath(e).exists&&ee.unlink(e),ee.createDataFile(Q.dirname(e),Q.basename(e),t.result,!0,!0,!0),++c+s==u&&l()},t.onerror=function(){s++,c+s==u&&l()}})),i.onerror=n},a.onerror=n}},te={mappings:{},DEFAULT_POLLMASK:5,umask:511,calculateAt:function(e,t,n){if("/"===t[0])return t;var r;if(-100===e)r=ee.cwd();else{var a=ee.getStream(e);if(!a)throw new ee.ErrnoError(8);r=a.path}if(0==t.length){if(!n)throw new ee.ErrnoError(44);return r}return Q.join2(r,t)},doStat:function(e,t,n){try{var r=e(t)}catch(e){if(e&&e.node&&Q.normalize(t)!==Q.normalize(ee.getPath(e.node)))return-54;throw e}return _[n>>2]=r.dev,_[n+4>>2]=0,_[n+8>>2]=r.ino,_[n+12>>2]=r.mode,_[n+16>>2]=r.nlink,_[n+20>>2]=r.uid,_[n+24>>2]=r.gid,_[n+28>>2]=r.rdev,_[n+32>>2]=0,H=[r.size>>>0,(F=r.size,+Math.abs(F)>=1?F>0?(0|Math.min(+Math.floor(F/4294967296),4294967295))>>>0:~~+Math.ceil((F-+(~~F>>>0))/4294967296)>>>0:0)],_[n+40>>2]=H[0],_[n+44>>2]=H[1],_[n+48>>2]=4096,_[n+52>>2]=r.blocks,_[n+56>>2]=r.atime.getTime()/1e3|0,_[n+60>>2]=0,_[n+64>>2]=r.mtime.getTime()/1e3|0,_[n+68>>2]=0,_[n+72>>2]=r.ctime.getTime()/1e3|0,_[n+76>>2]=0,H=[r.ino>>>0,(F=r.ino,+Math.abs(F)>=1?F>0?(0|Math.min(+Math.floor(F/4294967296),4294967295))>>>0:~~+Math.ceil((F-+(~~F>>>0))/4294967296)>>>0:0)],_[n+80>>2]=H[0],_[n+84>>2]=H[1],0},doMsync:function(e,t,n,r,a){var i=b.slice(e,e+n);ee.msync(t,i,a,n,r)},doMkdir:function(e,t){return"/"===(e=Q.normalize(e))[e.length-1]&&(e=e.substr(0,e.length-1)),ee.mkdir(e,t,0),0},doMknod:function(e,t,n){switch(61440&t){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return ee.mknod(e,t,n),0},doReadlink:function(e,t,n){if(n<=0)return-28;var r=ee.readlink(e),a=Math.min(n,A(r)),i=g[t+a];return S(r,b,t,n+1),g[t+a]=i,a},doAccess:function(e,t){if(-8&t)return-28;var n;if(!(n=ee.lookupPath(e,{follow:!0}).node))return-44;var r="";return 4&t&&(r+="r"),2&t&&(r+="w"),1&t&&(r+="x"),r&&ee.nodePermissions(n,r)?-2:0},doDup:function(e,t,n){var r=ee.getStream(n);return r&&ee.close(r),ee.open(e,t,0,n,n).fd},doReadv:function(e,t,n,r){for(var a=0,i=0;i<n;i++){var o=_[t+8*i>>2],c=_[t+(8*i+4)>>2],s=ee.read(e,g,o,c,r);if(s<0)return-1;if(a+=s,s<c)break}return a},doWritev:function(e,t,n,r){for(var a=0,i=0;i<n;i++){var o=_[t+8*i>>2],c=_[t+(8*i+4)>>2],s=ee.write(e,g,o,c,r);if(s<0)return-1;a+=s}return a},varargs:void 0,get:function(){return te.varargs+=4,_[te.varargs-4>>2]},getStr:function(e){return C(e)},getStreamFromFD:function(e){var t=ee.getStream(e);if(!t)throw new ee.ErrnoError(8);return t},get64:function(e,t){return e}};function ne(e){return e%4==0&&(e%100!=0||e%400==0)}function re(e,t){for(var n=0,r=0;r<=t;n+=e[r++]);return n}var ae=[31,29,31,30,31,30,31,31,30,31,30,31],ie=[31,28,31,30,31,30,31,31,30,31,30,31];function oe(e,t){for(var n=new Date(e.getTime());t>0;){var r=ne(n.getFullYear()),a=n.getMonth(),i=(r?ae:ie)[a];if(!(t>i-n.getDate()))return n.setDate(n.getDate()+t),n;t-=i-n.getDate()+1,n.setDate(1),a<11?n.setMonth(a+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1))}return n}var ce=function(e,t,n,r){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=ee.nextInode++,this.name=t,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=r};function se(e,t,n){var r=n>0?n:A(e)+1,a=new Array(r),i=S(e,a,0,a.length);return t&&(a.length=i),a}Object.defineProperties(ce.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return ee.isDir(this.mode)}},isDevice:{get:function(){return ee.isChrdev(this.mode)}}}),ee.FSNode=ce,ee.staticInit();var ue={d:function(e){return fe(e+16)+16},c:function(e,t,n){throw new W(e).init(t,n),e},a:function(){M()},n:function(e,t){var n;if(0===e)n=Date.now();else{if(1!==e&&4!==e)return q(28),-1;n=G()}return _[t>>2]=n/1e3|0,_[t+4>>2]=n%1e3*1e3*1e3|0,0},i:function(e,t){M("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},g:function(e,t){M("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},l:function(e,t,n){b.copyWithin(e,t,t+n)},m:function(e){var t,n=b.length,r=2147483648;if(e>r)return!1;for(var a=1;a<=4;a*=2){var i=n*(1+.2/a);if(i=Math.min(i,e+100663296),K(Math.min(r,((t=Math.max(e,i))%65536>0&&(t+=65536-t%65536),t))))return!0}return!1},o:function(e){for(var t=G();G()-t<e;);},q:function(e,t){try{var n=0;return Z().forEach((function(r,a){var i=t+n;_[e+4*a>>2]=i,function(e,t,n){for(var r=0;r<e.length;++r)g[t++>>0]=e.charCodeAt(r);g[t>>0]=0}(r,i),n+=r.length+1})),0}catch(e){return void 0!==ee&&e instanceof ee.ErrnoError||M(e),e.errno}},r:function(e,t){try{var n=Z();_[e>>2]=n.length;var r=0;return n.forEach((function(e){r+=e.length+1})),_[t>>2]=r,0}catch(e){return void 0!==ee&&e instanceof ee.ErrnoError||M(e),e.errno}},j:function(e){!function(e,t){m||(a.onExit&&a.onExit(e),E=!0),u(e,new he(e))}(e)},s:function(e){try{var t=te.getStreamFromFD(e);return ee.close(t),0}catch(e){return void 0!==ee&&e instanceof ee.ErrnoError||M(e),e.errno}},t:function(e,t,n,r){try{var a=te.getStreamFromFD(e),i=te.doReadv(a,t,n);return _[r>>2]=i,0}catch(e){return void 0!==ee&&e instanceof ee.ErrnoError||M(e),e.errno}},k:function(e,t,n,r,a){try{var i=te.getStreamFromFD(e),o=4294967296*n+(t>>>0),c=9007199254740992;return o<=-c||o>=c?-61:(ee.llseek(i,o,r),H=[i.position>>>0,(F=i.position,+Math.abs(F)>=1?F>0?(0|Math.min(+Math.floor(F/4294967296),4294967295))>>>0:~~+Math.ceil((F-+(~~F>>>0))/4294967296)>>>0:0)],_[a>>2]=H[0],_[a+4>>2]=H[1],i.getdents&&0===o&&0===r&&(i.getdents=null),0)}catch(e){return void 0!==ee&&e instanceof ee.ErrnoError||M(e),e.errno}},e:function(e,t,n,r){try{var a=te.getStreamFromFD(e),i=te.doWritev(a,t,n);return _[r>>2]=i,0}catch(e){return void 0!==ee&&e instanceof ee.ErrnoError||M(e),e.errno}},f:function(){return 6},h:function(){return 28},p:function(e,t,n,r){return function(e,t,n,r){var a=_[r+40>>2],i={tm_sec:_[r>>2],tm_min:_[r+4>>2],tm_hour:_[r+8>>2],tm_mday:_[r+12>>2],tm_mon:_[r+16>>2],tm_year:_[r+20>>2],tm_wday:_[r+24>>2],tm_yday:_[r+28>>2],tm_isdst:_[r+32>>2],tm_gmtoff:_[r+36>>2],tm_zone:a?C(a):""},o=C(n),c={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var s in c)o=o.replace(new RegExp(s,"g"),c[s]);var u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=["January","February","March","April","May","June","July","August","September","October","November","December"];function d(e,t,n){for(var r="number"==typeof e?e.toString():e||"";r.length<t;)r=n[0]+r;return r}function f(e,t){return d(e,t,"0")}function p(e,t){function n(e){return e<0?-1:e>0?1:0}var r;return 0===(r=n(e.getFullYear()-t.getFullYear()))&&0===(r=n(e.getMonth()-t.getMonth()))&&(r=n(e.getDate()-t.getDate())),r}function h(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function m(e){var t=oe(new Date(e.tm_year+1900,0,1),e.tm_yday),n=new Date(t.getFullYear(),0,4),r=new Date(t.getFullYear()+1,0,4),a=h(n),i=h(r);return p(a,t)<=0?p(i,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var v={"%a":function(e){return u[e.tm_wday].substring(0,3)},"%A":function(e){return u[e.tm_wday]},"%b":function(e){return l[e.tm_mon].substring(0,3)},"%B":function(e){return l[e.tm_mon]},"%C":function(e){return f((e.tm_year+1900)/100|0,2)},"%d":function(e){return f(e.tm_mday,2)},"%e":function(e){return d(e.tm_mday,2," ")},"%g":function(e){return m(e).toString().substring(2)},"%G":function(e){return m(e)},"%H":function(e){return f(e.tm_hour,2)},"%I":function(e){var t=e.tm_hour;return 0==t?t=12:t>12&&(t-=12),f(t,2)},"%j":function(e){return f(e.tm_mday+re(ne(e.tm_year+1900)?ae:ie,e.tm_mon-1),3)},"%m":function(e){return f(e.tm_mon+1,2)},"%M":function(e){return f(e.tm_min,2)},"%n":function(){return"\n"},"%p":function(e){return e.tm_hour>=0&&e.tm_hour<12?"AM":"PM"},"%S":function(e){return f(e.tm_sec,2)},"%t":function(){return"\t"},"%u":function(e){return e.tm_wday||7},"%U":function(e){var t=new Date(e.tm_year+1900,0,1),n=0===t.getDay()?t:oe(t,7-t.getDay()),r=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(p(n,r)<0){var a=re(ne(r.getFullYear())?ae:ie,r.getMonth()-1)-31,i=31-n.getDate()+a+r.getDate();return f(Math.ceil(i/7),2)}return 0===p(n,t)?"01":"00"},"%V":function(e){var t,n=new Date(e.tm_year+1900,0,4),r=new Date(e.tm_year+1901,0,4),a=h(n),i=h(r),o=oe(new Date(e.tm_year+1900,0,1),e.tm_yday);return p(o,a)<0?"53":p(i,o)<=0?"01":(t=a.getFullYear()<e.tm_year+1900?e.tm_yday+32-a.getDate():e.tm_yday+1-a.getDate(),f(Math.ceil(t/7),2))},"%w":function(e){return e.tm_wday},"%W":function(e){var t=new Date(e.tm_year,0,1),n=1===t.getDay()?t:oe(t,0===t.getDay()?1:7-t.getDay()+1),r=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(p(n,r)<0){var a=re(ne(r.getFullYear())?ae:ie,r.getMonth()-1)-31,i=31-n.getDate()+a+r.getDate();return f(Math.ceil(i/7),2)}return 0===p(n,t)?"01":"00"},"%y":function(e){return(e.tm_year+1900).toString().substring(2)},"%Y":function(e){return e.tm_year+1900},"%z":function(e){var t=e.tm_gmtoff,n=t>=0;return t=(t=Math.abs(t)/60)/60*100+t%60,(n?"+":"-")+String("0000"+t).slice(-4)},"%Z":function(e){return e.tm_zone},"%%":function(){return"%"}};for(var s in v)o.indexOf(s)>=0&&(o=o.replace(new RegExp(s,"g"),v[s](i)));var b=se(o,!1);return b.length>t?0:(function(e,t){g.set(e,t)}(b,e),b.length-1)}(e,t,n,r)},b:function(e){switch(e){case 30:case 75:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:case 80:case 81:case 79:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==typeof navigator&&navigator.hardwareConcurrency||1}return q(28),-1}};!function(){var e={a:ue};function t(e,t){var n=e.exports;a.asm=n,k((h=a.asm.u).buffer),y=a.asm.I,R()}function r(e){t(e.instance)}function i(t){return(d||"function"!=typeof fetch?Promise.resolve().then((function(){return U(V)})):fetch(V,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+V+"'";return e.arrayBuffer()})).catch((function(){return U(V)}))).then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){p("failed to asynchronously prepare wasm: "+e),M(e)}))}if(x(),a.instantiateWasm)try{return a.instantiateWasm(e,t)}catch(e){return p("Module.instantiateWasm callback failed with error: "+e),!1}(d||"function"!=typeof WebAssembly.instantiateStreaming||L(V)||"function"!=typeof fetch?i(r):fetch(V,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(r,(function(e){return p("wasm streaming compile failed: "+e),p("falling back to ArrayBuffer instantiation"),i(r)}))}))).catch(n)}();var le=a.___wasm_call_ctors=function(){return(le=a.___wasm_call_ctors=a.asm.v).apply(null,arguments)};a._getModelBufferMemoryOffset=function(){return(a._getModelBufferMemoryOffset=a.asm.w).apply(null,arguments)},a._getInputImageBufferOffset=function(){return(a._getInputImageBufferOffset=a.asm.x).apply(null,arguments)},a._getOutputImageBufferOffset=function(){return(a._getOutputImageBufferOffset=a.asm.y).apply(null,arguments)},a._getGrayedImageBufferOffset=function(){return(a._getGrayedImageBufferOffset=a.asm.z).apply(null,arguments)},a._setSmoothingR=function(){return(a._setSmoothingR=a.asm.A).apply(null,arguments)},a._setKernelSize=function(){return(a._setKernelSize=a.asm.B).apply(null,arguments)},a._setUseSoftmax=function(){return(a._setUseSoftmax=a.asm.C).apply(null,arguments)},a._setUsePadding=function(){return(a._setUsePadding=a.asm.D).apply(null,arguments)},a._setThresholdWithoutSoftmax=function(){return(a._setThresholdWithoutSoftmax=a.asm.E).apply(null,arguments)},a._setInterpolation=function(){return(a._setInterpolation=a.asm.F).apply(null,arguments)},a._exec=function(){return(a._exec=a.asm.G).apply(null,arguments)},a._loadModel=function(){return(a._loadModel=a.asm.H).apply(null,arguments)};var de,fe=a._malloc=function(){return(fe=a._malloc=a.asm.J).apply(null,arguments)},pe=a.___errno_location=function(){return(pe=a.___errno_location=a.asm.K).apply(null,arguments)};function he(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function me(e){function n(){de||(de=!0,a.calledRun=!0,E||(a.noFSInit||ee.init.initialized||ee.init(),z(T),ee.ignorePermissions=!1,z(I),t(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),function(){if(a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)e=a.postRun.shift(),P.unshift(e);var e;z(P)}()))}D>0||(function(){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)e=a.preRun.shift(),j.unshift(e);var e;z(j)}(),D>0||(a.setStatus?(a.setStatus("Running..."),setTimeout((function(){setTimeout((function(){a.setStatus("")}),1),n()}),1)):n()))}if(N=function e(){de||me(),de||(N=e)},a.run=me,a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();return me(),e.ready}})),Vd=Ld((function(e,t){e.exports=function(e){var t,n,r="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,a=void 0!==(e=e||{})?e:{};a.ready=new Promise((function(e,r){t=e,n=r}));var i,o={};for(i in a)a.hasOwnProperty(i)&&(o[i]=a[i]);var c,s="./this.program",u=function(e,t){throw t},l="";"undefined"!=typeof document&&document.currentScript&&(l=document.currentScript.src),void 0!==r&&r&&(l=r),l=0!==l.indexOf("blob:")?l.substr(0,l.lastIndexOf("/")+1):"",c=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText};var d,f=a.print||console.log.bind(console),p=a.printErr||console.warn.bind(console);for(i in o)o.hasOwnProperty(i)&&(a[i]=o[i]);o=null,a.arguments,a.thisProgram&&(s=a.thisProgram),a.quit&&(u=a.quit),a.wasmBinary&&(d=a.wasmBinary);var h,m=a.noExitRuntime||!0;"object"!=typeof WebAssembly&&M("no native wasm support detected");var v,g,b,_,y,E=!1,O="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function w(e,t,n){for(var r=t+n,a=t;e[a]&&!(a>=r);)++a;if(a-t>16&&e.subarray&&O)return O.decode(e.subarray(t,a));for(var i="";t<a;){var o=e[t++];if(128&o){var c=63&e[t++];if(192!=(224&o)){var s=63&e[t++];if((o=224==(240&o)?(15&o)<<12|c<<6|s:(7&o)<<18|c<<12|s<<6|63&e[t++])<65536)i+=String.fromCharCode(o);else{var u=o-65536;i+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else i+=String.fromCharCode((31&o)<<6|c)}else i+=String.fromCharCode(o)}return i}function C(e,t){return e?w(b,e,t):""}function S(e,t,n,r){if(!(r>0))return 0;for(var a=n,i=n+r-1,o=0;o<e.length;++o){var c=e.charCodeAt(o);if(c>=55296&&c<=57343&&(c=65536+((1023&c)<<10)|1023&e.charCodeAt(++o)),c<=127){if(n>=i)break;t[n++]=c}else if(c<=2047){if(n+1>=i)break;t[n++]=192|c>>6,t[n++]=128|63&c}else if(c<=65535){if(n+2>=i)break;t[n++]=224|c>>12,t[n++]=128|c>>6&63,t[n++]=128|63&c}else{if(n+3>=i)break;t[n++]=240|c>>18,t[n++]=128|c>>12&63,t[n++]=128|c>>6&63,t[n++]=128|63&c}}return t[n]=0,n-a}function A(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}function k(e){v=e,a.HEAP8=g=new Int8Array(e),a.HEAP16=new Int16Array(e),a.HEAP32=_=new Int32Array(e),a.HEAPU8=b=new Uint8Array(e),a.HEAPU16=new Uint16Array(e),a.HEAPU32=new Uint32Array(e),a.HEAPF32=new Float32Array(e),a.HEAPF64=new Float64Array(e)}a.INITIAL_MEMORY;var j=[],T=[],I=[],P=[];T.push({func:function(){le()}});var D=0,N=null;function x(e){D++,a.monitorRunDependencies&&a.monitorRunDependencies(D)}function R(e){if(D--,a.monitorRunDependencies&&a.monitorRunDependencies(D),0==D&&N){var t=N;N=null,t()}}function M(e){a.onAbort&&a.onAbort(e),p(e+=""),E=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw n(t),t}function L(e){return t=e,n="data:application/octet-stream;base64,",String.prototype.startsWith?t.startsWith(n):0===t.indexOf(n);var t,n}a.preloadedImages={},a.preloadedAudios={};var B,F,H,V="https://stest.mycdn.me/static/callseffects/0-0-2/tflite.wasm";function U(e){try{if(e==V&&d)return new Uint8Array(d);throw"both async and sync fetching of the wasm failed"}catch(e){M(e)}}function z(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?y.get(n)():y.get(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(a)}}L(V)||(B=V,V=a.locateFile?a.locateFile(B,l):l+B);var G;function W(e){this.excPtr=e,this.ptr=e-16,this.set_type=function(e){_[this.ptr+8>>2]=e},this.get_type=function(){return _[this.ptr+8>>2]},this.set_destructor=function(e){_[this.ptr+0>>2]=e},this.get_destructor=function(){return _[this.ptr+0>>2]},this.set_refcount=function(e){_[this.ptr+4>>2]=e},this.set_caught=function(e){e=e?1:0,g[this.ptr+12>>0]=e},this.get_caught=function(){return 0!=g[this.ptr+12>>0]},this.set_rethrown=function(e){e=e?1:0,g[this.ptr+13>>0]=e},this.get_rethrown=function(){return 0!=g[this.ptr+13>>0]},this.init=function(e,t){this.set_type(e),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var e=_[this.ptr+4>>2];_[this.ptr+4>>2]=e+1},this.release_ref=function(){var e=_[this.ptr+4>>2];return _[this.ptr+4>>2]=e-1,1===e}}function q(e){return _[pe()>>2]=e,e}function K(e){try{return h.grow(e-v.byteLength+65535>>>16),k(h.buffer),1}catch(e){}}G=function(){return performance.now()};var Y={};function Z(){if(!Z.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:s||"./this.program"};for(var t in Y)e[t]=Y[t];var n=[];for(var t in e)n.push(t+"="+e[t]);Z.strings=n}return Z.strings}var Q={splitPath:function(e){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1)},normalizeArray:function(e,t){for(var n=0,r=e.length-1;r>=0;r--){var a=e[r];"."===a?e.splice(r,1):".."===a?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},normalize:function(e){var t="/"===e.charAt(0),n="/"===e.substr(-1);return(e=Q.normalizeArray(e.split("/").filter((function(e){return!!e})),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},dirname:function(e){var t=Q.splitPath(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},basename:function(e){if("/"===e)return"/";var t=(e=(e=Q.normalize(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)},extname:function(e){return Q.splitPath(e)[3]},join:function(){var e=Array.prototype.slice.call(arguments,0);return Q.normalize(e.join("/"))},join2:function(e,t){return Q.normalize(e+"/"+t)}},J={resolve:function(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var r=n>=0?arguments[n]:ee.cwd();if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";e=r+"/"+e,t="/"===r.charAt(0)}return(t?"/":"")+(e=Q.normalizeArray(e.split("/").filter((function(e){return!!e})),!t).join("/"))||"."},relative:function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=J.resolve(e).substr(1),t=J.resolve(t).substr(1);for(var r=n(e.split("/")),a=n(t.split("/")),i=Math.min(r.length,a.length),o=i,c=0;c<i;c++)if(r[c]!==a[c]){o=c;break}var s=[];for(c=o;c<r.length;c++)s.push("..");return(s=s.concat(a.slice(o))).join("/")}},X={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){X.ttys[e]={input:[],output:[],ops:t},ee.registerDevice(e,X.stream_ops)},stream_ops:{open:function(e){var t=X.ttys[e.node.rdev];if(!t)throw new ee.ErrnoError(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.flush(e.tty)},flush:function(e){e.tty.ops.flush(e.tty)},read:function(e,t,n,r,a){if(!e.tty||!e.tty.ops.get_char)throw new ee.ErrnoError(60);for(var i=0,o=0;o<r;o++){var c;try{c=e.tty.ops.get_char(e.tty)}catch(e){throw new ee.ErrnoError(29)}if(void 0===c&&0===i)throw new ee.ErrnoError(6);if(null==c)break;i++,t[n+o]=c}return i&&(e.node.timestamp=Date.now()),i},write:function(e,t,n,r,a){if(!e.tty||!e.tty.ops.put_char)throw new ee.ErrnoError(60);try{for(var i=0;i<r;i++)e.tty.ops.put_char(e.tty,t[n+i])}catch(e){throw new ee.ErrnoError(29)}return r&&(e.node.timestamp=Date.now()),i}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n"),!t)return null;e.input=se(t,!0)}return e.input.shift()},put_char:function(e,t){null===t||10===t?(f(w(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(f(w(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){null===t||10===t?(p(w(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(p(w(e.output,0)),e.output=[])}}};var $={ops_table:null,mount:function(e){return $.createNode(null,"/",16895,0)},createNode:function(e,t,n,r){if(ee.isBlkdev(n)||ee.isFIFO(n))throw new ee.ErrnoError(63);$.ops_table||($.ops_table={dir:{node:{getattr:$.node_ops.getattr,setattr:$.node_ops.setattr,lookup:$.node_ops.lookup,mknod:$.node_ops.mknod,rename:$.node_ops.rename,unlink:$.node_ops.unlink,rmdir:$.node_ops.rmdir,readdir:$.node_ops.readdir,symlink:$.node_ops.symlink},stream:{llseek:$.stream_ops.llseek}},file:{node:{getattr:$.node_ops.getattr,setattr:$.node_ops.setattr},stream:{llseek:$.stream_ops.llseek,read:$.stream_ops.read,write:$.stream_ops.write,allocate:$.stream_ops.allocate,mmap:$.stream_ops.mmap,msync:$.stream_ops.msync}},link:{node:{getattr:$.node_ops.getattr,setattr:$.node_ops.setattr,readlink:$.node_ops.readlink},stream:{}},chrdev:{node:{getattr:$.node_ops.getattr,setattr:$.node_ops.setattr},stream:ee.chrdev_stream_ops}});var a=ee.createNode(e,t,n,r);return ee.isDir(a.mode)?(a.node_ops=$.ops_table.dir.node,a.stream_ops=$.ops_table.dir.stream,a.contents={}):ee.isFile(a.mode)?(a.node_ops=$.ops_table.file.node,a.stream_ops=$.ops_table.file.stream,a.usedBytes=0,a.contents=null):ee.isLink(a.mode)?(a.node_ops=$.ops_table.link.node,a.stream_ops=$.ops_table.link.stream):ee.isChrdev(a.mode)&&(a.node_ops=$.ops_table.chrdev.node,a.stream_ops=$.ops_table.chrdev.stream),a.timestamp=Date.now(),e&&(e.contents[t]=a,e.timestamp=a.timestamp),a},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage:function(e,t){var n=e.contents?e.contents.length:0;if(!(n>=t)){t=Math.max(t,n*(n<1048576?2:1.125)>>>0),0!=n&&(t=Math.max(t,256));var r=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(r.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,t){if(e.usedBytes!=t)if(0==t)e.contents=null,e.usedBytes=0;else{var n=e.contents;e.contents=new Uint8Array(t),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=ee.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,ee.isDir(e.mode)?t.size=4096:ee.isFile(e.mode)?t.size=e.usedBytes:ee.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&$.resizeFileStorage(e,t.size)},lookup:function(e,t){throw ee.genericErrors[44]},mknod:function(e,t,n,r){return $.createNode(e,t,n,r)},rename:function(e,t,n){if(ee.isDir(e.mode)){var r;try{r=ee.lookupNode(t,n)}catch(e){}if(r)for(var a in r.contents)throw new ee.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=n,t.contents[n]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink:function(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir:function(e,t){var n=ee.lookupNode(e,t);for(var r in n.contents)throw new ee.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir:function(e){var t=[".",".."];for(var n in e.contents)e.contents.hasOwnProperty(n)&&t.push(n);return t},symlink:function(e,t,n){var r=$.createNode(e,t,41471,0);return r.link=n,r},readlink:function(e){if(!ee.isLink(e.mode))throw new ee.ErrnoError(28);return e.link}},stream_ops:{read:function(e,t,n,r,a){var i=e.node.contents;if(a>=e.node.usedBytes)return 0;var o=Math.min(e.node.usedBytes-a,r);if(o>8&&i.subarray)t.set(i.subarray(a,a+o),n);else for(var c=0;c<o;c++)t[n+c]=i[a+c];return o},write:function(e,t,n,r,a,i){if(t.buffer===g.buffer&&(i=!1),!r)return 0;var o=e.node;if(o.timestamp=Date.now(),t.subarray&&(!o.contents||o.contents.subarray)){if(i)return o.contents=t.subarray(n,n+r),o.usedBytes=r,r;if(0===o.usedBytes&&0===a)return o.contents=t.slice(n,n+r),o.usedBytes=r,r;if(a+r<=o.usedBytes)return o.contents.set(t.subarray(n,n+r),a),r}if($.expandFileStorage(o,a+r),o.contents.subarray&&t.subarray)o.contents.set(t.subarray(n,n+r),a);else for(var c=0;c<r;c++)o.contents[a+c]=t[n+c];return o.usedBytes=Math.max(o.usedBytes,a+r),r},llseek:function(e,t,n){var r=t;if(1===n?r+=e.position:2===n&&ee.isFile(e.node.mode)&&(r+=e.node.usedBytes),r<0)throw new ee.ErrnoError(28);return r},allocate:function(e,t,n){$.expandFileStorage(e.node,t+n),e.node.usedBytes=Math.max(e.node.usedBytes,t+n)},mmap:function(e,t,n,r,a,i){if(0!==t)throw new ee.ErrnoError(28);if(!ee.isFile(e.node.mode))throw new ee.ErrnoError(43);var o,c,s=e.node.contents;if(2&i||s.buffer!==v){if((r>0||r+n<s.length)&&(s=s.subarray?s.subarray(r,r+n):Array.prototype.slice.call(s,r,r+n)),c=!0,!(o=function(e){for(var t=function(e,t){return t||(t=16),Math.ceil(e/t)*t}(e,16384),n=fe(t);e<t;)g[n+e++]=0;return n}(n)))throw new ee.ErrnoError(48);g.set(s,o)}else c=!1,o=s.byteOffset;return{ptr:o,allocated:c}},msync:function(e,t,n,r,a){if(!ee.isFile(e.node.mode))throw new ee.ErrnoError(43);return 2&a||$.stream_ops.write(e,t,0,r,n,!1),0}}},ee={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(e,t){if(t=t||{},!(e=J.resolve(ee.cwd(),e)))return{path:"",node:null};var n={follow_mount:!0,recurse_count:0};for(var r in n)void 0===t[r]&&(t[r]=n[r]);if(t.recurse_count>8)throw new ee.ErrnoError(32);for(var a=Q.normalizeArray(e.split("/").filter((function(e){return!!e})),!1),i=ee.root,o="/",c=0;c<a.length;c++){var s=c===a.length-1;if(s&&t.parent)break;if(i=ee.lookupNode(i,a[c]),o=Q.join2(o,a[c]),ee.isMountpoint(i)&&(!s||s&&t.follow_mount)&&(i=i.mounted.root),!s||t.follow)for(var u=0;ee.isLink(i.mode);){var l=ee.readlink(o);if(o=J.resolve(Q.dirname(o),l),i=ee.lookupPath(o,{recurse_count:t.recurse_count}).node,u++>40)throw new ee.ErrnoError(32)}}return{path:o,node:i}},getPath:function(e){for(var t;;){if(ee.isRoot(e)){var n=e.mount.mountpoint;return t?"/"!==n[n.length-1]?n+"/"+t:n+t:n}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:function(e,t){for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(e+n>>>0)%ee.nameTable.length},hashAddNode:function(e){var t=ee.hashName(e.parent.id,e.name);e.name_next=ee.nameTable[t],ee.nameTable[t]=e},hashRemoveNode:function(e){var t=ee.hashName(e.parent.id,e.name);if(ee.nameTable[t]===e)ee.nameTable[t]=e.name_next;else for(var n=ee.nameTable[t];n;){if(n.name_next===e){n.name_next=e.name_next;break}n=n.name_next}},lookupNode:function(e,t){var n=ee.mayLookup(e);if(n)throw new ee.ErrnoError(n,e);for(var r=ee.hashName(e.id,t),a=ee.nameTable[r];a;a=a.name_next){var i=a.name;if(a.parent.id===e.id&&i===t)return a}return ee.lookup(e,t)},createNode:function(e,t,n,r){var a=new ee.FSNode(e,t,n,r);return ee.hashAddNode(a),a},destroyNode:function(e){ee.hashRemoveNode(e)},isRoot:function(e){return e===e.parent},isMountpoint:function(e){return!!e.mounted},isFile:function(e){return 32768==(61440&e)},isDir:function(e){return 16384==(61440&e)},isLink:function(e){return 40960==(61440&e)},isChrdev:function(e){return 8192==(61440&e)},isBlkdev:function(e){return 24576==(61440&e)},isFIFO:function(e){return 4096==(61440&e)},isSocket:function(e){return 49152==(49152&e)},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(e){var t=ee.flagModes[e];if(void 0===t)throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:function(e){var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:function(e,t){return ee.ignorePermissions||(-1===t.indexOf("r")||292&e.mode)&&(-1===t.indexOf("w")||146&e.mode)&&(-1===t.indexOf("x")||73&e.mode)?0:2},mayLookup:function(e){return ee.nodePermissions(e,"x")||(e.node_ops.lookup?0:2)},mayCreate:function(e,t){try{return ee.lookupNode(e,t),20}catch(e){}return ee.nodePermissions(e,"wx")},mayDelete:function(e,t,n){var r;try{r=ee.lookupNode(e,t)}catch(e){return e.errno}var a=ee.nodePermissions(e,"wx");if(a)return a;if(n){if(!ee.isDir(r.mode))return 54;if(ee.isRoot(r)||ee.getPath(r)===ee.cwd())return 10}else if(ee.isDir(r.mode))return 31;return 0},mayOpen:function(e,t){return e?ee.isLink(e.mode)?32:ee.isDir(e.mode)&&("r"!==ee.flagsToPermissionString(t)||512&t)?31:ee.nodePermissions(e,ee.flagsToPermissionString(t)):44},MAX_OPEN_FDS:4096,nextfd:function(e,t){e=e||0,t=t||ee.MAX_OPEN_FDS;for(var n=e;n<=t;n++)if(!ee.streams[n])return n;throw new ee.ErrnoError(33)},getStream:function(e){return ee.streams[e]},createStream:function(e,t,n){ee.FSStream||(ee.FSStream=function(){},ee.FSStream.prototype={object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}});var r=new ee.FSStream;for(var a in e)r[a]=e[a];e=r;var i=ee.nextfd(t,n);return e.fd=i,ee.streams[i]=e,e},closeStream:function(e){ee.streams[e]=null},chrdev_stream_ops:{open:function(e){var t=ee.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:function(){throw new ee.ErrnoError(70)}},major:function(e){return e>>8},minor:function(e){return 255&e},makedev:function(e,t){return e<<8|t},registerDevice:function(e,t){ee.devices[e]={stream_ops:t}},getDevice:function(e){return ee.devices[e]},getMounts:function(e){for(var t=[],n=[e];n.length;){var r=n.pop();t.push(r),n.push.apply(n,r.mounts)}return t},syncfs:function(e,t){"function"==typeof e&&(t=e,e=!1),ee.syncFSRequests++,ee.syncFSRequests>1&&p("warning: "+ee.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var n=ee.getMounts(ee.root.mount),r=0;function a(e){return ee.syncFSRequests--,t(e)}function i(e){if(e)return i.errored?void 0:(i.errored=!0,a(e));++r>=n.length&&a(null)}n.forEach((function(t){if(!t.type.syncfs)return i(null);t.type.syncfs(t,e,i)}))},mount:function(e,t,n){var r,a="/"===n,i=!n;if(a&&ee.root)throw new ee.ErrnoError(10);if(!a&&!i){var o=ee.lookupPath(n,{follow_mount:!1});if(n=o.path,r=o.node,ee.isMountpoint(r))throw new ee.ErrnoError(10);if(!ee.isDir(r.mode))throw new ee.ErrnoError(54)}var c={type:e,opts:t,mountpoint:n,mounts:[]},s=e.mount(c);return s.mount=c,c.root=s,a?ee.root=s:r&&(r.mounted=c,r.mount&&r.mount.mounts.push(c)),s},unmount:function(e){var t=ee.lookupPath(e,{follow_mount:!1});if(!ee.isMountpoint(t.node))throw new ee.ErrnoError(28);var n=t.node,r=n.mounted,a=ee.getMounts(r);Object.keys(ee.nameTable).forEach((function(e){for(var t=ee.nameTable[e];t;){var n=t.name_next;-1!==a.indexOf(t.mount)&&ee.destroyNode(t),t=n}})),n.mounted=null;var i=n.mount.mounts.indexOf(r);n.mount.mounts.splice(i,1)},lookup:function(e,t){return e.node_ops.lookup(e,t)},mknod:function(e,t,n){var r=ee.lookupPath(e,{parent:!0}).node,a=Q.basename(e);if(!a||"."===a||".."===a)throw new ee.ErrnoError(28);var i=ee.mayCreate(r,a);if(i)throw new ee.ErrnoError(i);if(!r.node_ops.mknod)throw new ee.ErrnoError(63);return r.node_ops.mknod(r,a,t,n)},create:function(e,t){return t=void 0!==t?t:438,t&=4095,t|=32768,ee.mknod(e,t,0)},mkdir:function(e,t){return t=void 0!==t?t:511,t&=1023,t|=16384,ee.mknod(e,t,0)},mkdirTree:function(e,t){for(var n=e.split("/"),r="",a=0;a<n.length;++a)if(n[a]){r+="/"+n[a];try{ee.mkdir(r,t)}catch(e){if(20!=e.errno)throw e}}},mkdev:function(e,t,n){return void 0===n&&(n=t,t=438),t|=8192,ee.mknod(e,t,n)},symlink:function(e,t){if(!J.resolve(e))throw new ee.ErrnoError(44);var n=ee.lookupPath(t,{parent:!0}).node;if(!n)throw new ee.ErrnoError(44);var r=Q.basename(t),a=ee.mayCreate(n,r);if(a)throw new ee.ErrnoError(a);if(!n.node_ops.symlink)throw new ee.ErrnoError(63);return n.node_ops.symlink(n,r,e)},rename:function(e,t){var n,r,a=Q.dirname(e),i=Q.dirname(t),o=Q.basename(e),c=Q.basename(t);if(n=ee.lookupPath(e,{parent:!0}).node,r=ee.lookupPath(t,{parent:!0}).node,!n||!r)throw new ee.ErrnoError(44);if(n.mount!==r.mount)throw new ee.ErrnoError(75);var s,u=ee.lookupNode(n,o),l=J.relative(e,i);if("."!==l.charAt(0))throw new ee.ErrnoError(28);if("."!==(l=J.relative(t,a)).charAt(0))throw new ee.ErrnoError(55);try{s=ee.lookupNode(r,c)}catch(e){}if(u!==s){var d=ee.isDir(u.mode),f=ee.mayDelete(n,o,d);if(f)throw new ee.ErrnoError(f);if(f=s?ee.mayDelete(r,c,d):ee.mayCreate(r,c))throw new ee.ErrnoError(f);if(!n.node_ops.rename)throw new ee.ErrnoError(63);if(ee.isMountpoint(u)||s&&ee.isMountpoint(s))throw new ee.ErrnoError(10);if(r!==n&&(f=ee.nodePermissions(n,"w")))throw new ee.ErrnoError(f);try{ee.trackingDelegate.willMovePath}catch(n){p("FS.trackingDelegate['willMovePath']('"+e+"', '"+t+"') threw an exception: "+n.message)}ee.hashRemoveNode(u);try{n.node_ops.rename(u,r,c)}catch(e){throw e}finally{ee.hashAddNode(u)}try{ee.trackingDelegate.onMovePath}catch(n){p("FS.trackingDelegate['onMovePath']('"+e+"', '"+t+"') threw an exception: "+n.message)}}},rmdir:function(e){var t=ee.lookupPath(e,{parent:!0}).node,n=Q.basename(e),r=ee.lookupNode(t,n),a=ee.mayDelete(t,n,!0);if(a)throw new ee.ErrnoError(a);if(!t.node_ops.rmdir)throw new ee.ErrnoError(63);if(ee.isMountpoint(r))throw new ee.ErrnoError(10);try{ee.trackingDelegate.willDeletePath}catch(t){p("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+t.message)}t.node_ops.rmdir(t,n),ee.destroyNode(r);try{ee.trackingDelegate.onDeletePath}catch(t){p("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+t.message)}},readdir:function(e){var t=ee.lookupPath(e,{follow:!0}).node;if(!t.node_ops.readdir)throw new ee.ErrnoError(54);return t.node_ops.readdir(t)},unlink:function(e){var t=ee.lookupPath(e,{parent:!0}).node,n=Q.basename(e),r=ee.lookupNode(t,n),a=ee.mayDelete(t,n,!1);if(a)throw new ee.ErrnoError(a);if(!t.node_ops.unlink)throw new ee.ErrnoError(63);if(ee.isMountpoint(r))throw new ee.ErrnoError(10);try{ee.trackingDelegate.willDeletePath}catch(t){p("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+t.message)}t.node_ops.unlink(t,n),ee.destroyNode(r);try{ee.trackingDelegate.onDeletePath}catch(t){p("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+t.message)}},readlink:function(e){var t=ee.lookupPath(e).node;if(!t)throw new ee.ErrnoError(44);if(!t.node_ops.readlink)throw new ee.ErrnoError(28);return J.resolve(ee.getPath(t.parent),t.node_ops.readlink(t))},stat:function(e,t){var n=ee.lookupPath(e,{follow:!t}).node;if(!n)throw new ee.ErrnoError(44);if(!n.node_ops.getattr)throw new ee.ErrnoError(63);return n.node_ops.getattr(n)},lstat:function(e){return ee.stat(e,!0)},chmod:function(e,t,n){var r;if(!(r="string"==typeof e?ee.lookupPath(e,{follow:!n}).node:e).node_ops.setattr)throw new ee.ErrnoError(63);r.node_ops.setattr(r,{mode:4095&t|-4096&r.mode,timestamp:Date.now()})},lchmod:function(e,t){ee.chmod(e,t,!0)},fchmod:function(e,t){var n=ee.getStream(e);if(!n)throw new ee.ErrnoError(8);ee.chmod(n.node,t)},chown:function(e,t,n,r){var a;if(!(a="string"==typeof e?ee.lookupPath(e,{follow:!r}).node:e).node_ops.setattr)throw new ee.ErrnoError(63);a.node_ops.setattr(a,{timestamp:Date.now()})},lchown:function(e,t,n){ee.chown(e,t,n,!0)},fchown:function(e,t,n){var r=ee.getStream(e);if(!r)throw new ee.ErrnoError(8);ee.chown(r.node,t,n)},truncate:function(e,t){if(t<0)throw new ee.ErrnoError(28);var n;if(!(n="string"==typeof e?ee.lookupPath(e,{follow:!0}).node:e).node_ops.setattr)throw new ee.ErrnoError(63);if(ee.isDir(n.mode))throw new ee.ErrnoError(31);if(!ee.isFile(n.mode))throw new ee.ErrnoError(28);var r=ee.nodePermissions(n,"w");if(r)throw new ee.ErrnoError(r);n.node_ops.setattr(n,{size:t,timestamp:Date.now()})},ftruncate:function(e,t){var n=ee.getStream(e);if(!n)throw new ee.ErrnoError(8);if(0==(2097155&n.flags))throw new ee.ErrnoError(28);ee.truncate(n.node,t)},utime:function(e,t,n){var r=ee.lookupPath(e,{follow:!0}).node;r.node_ops.setattr(r,{timestamp:Math.max(t,n)})},open:function(e,t,n,r,i){if(""===e)throw new ee.ErrnoError(44);var o;if(n=void 0===n?438:n,n=64&(t="string"==typeof t?ee.modeStringToFlags(t):t)?4095&n|32768:0,"object"==typeof e)o=e;else{e=Q.normalize(e);try{o=ee.lookupPath(e,{follow:!(131072&t)}).node}catch(e){}}var c=!1;if(64&t)if(o){if(128&t)throw new ee.ErrnoError(20)}else o=ee.mknod(e,n,0),c=!0;if(!o)throw new ee.ErrnoError(44);if(ee.isChrdev(o.mode)&&(t&=-513),65536&t&&!ee.isDir(o.mode))throw new ee.ErrnoError(54);if(!c){var s=ee.mayOpen(o,t);if(s)throw new ee.ErrnoError(s)}512&t&&ee.truncate(o,0),t&=-131713;var u=ee.createStream({node:o,path:ee.getPath(o),flags:t,seekable:!0,position:0,stream_ops:o.stream_ops,ungotten:[],error:!1},r,i);u.stream_ops.open&&u.stream_ops.open(u),!a.logReadFiles||1&t||(ee.readFiles||(ee.readFiles={}),e in ee.readFiles||(ee.readFiles[e]=1,p("FS.trackingDelegate error on read file: "+e)));try{ee.trackingDelegate.onOpenFile}catch(t){p("FS.trackingDelegate['onOpenFile']('"+e+"', flags) threw an exception: "+t.message)}return u},close:function(e){if(ee.isClosed(e))throw new ee.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{ee.closeStream(e.fd)}e.fd=null},isClosed:function(e){return null===e.fd},llseek:function(e,t,n){if(ee.isClosed(e))throw new ee.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new ee.ErrnoError(70);if(0!=n&&1!=n&&2!=n)throw new ee.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,n),e.ungotten=[],e.position},read:function(e,t,n,r,a){if(r<0||a<0)throw new ee.ErrnoError(28);if(ee.isClosed(e))throw new ee.ErrnoError(8);if(1==(2097155&e.flags))throw new ee.ErrnoError(8);if(ee.isDir(e.node.mode))throw new ee.ErrnoError(31);if(!e.stream_ops.read)throw new ee.ErrnoError(28);var i=void 0!==a;if(i){if(!e.seekable)throw new ee.ErrnoError(70)}else a=e.position;var o=e.stream_ops.read(e,t,n,r,a);return i||(e.position+=o),o},write:function(e,t,n,r,a,i){if(r<0||a<0)throw new ee.ErrnoError(28);if(ee.isClosed(e))throw new ee.ErrnoError(8);if(0==(2097155&e.flags))throw new ee.ErrnoError(8);if(ee.isDir(e.node.mode))throw new ee.ErrnoError(31);if(!e.stream_ops.write)throw new ee.ErrnoError(28);e.seekable&&1024&e.flags&&ee.llseek(e,0,2);var o=void 0!==a;if(o){if(!e.seekable)throw new ee.ErrnoError(70)}else a=e.position;var c=e.stream_ops.write(e,t,n,r,a,i);o||(e.position+=c);try{e.path&&ee.trackingDelegate.onWriteToFile&&ee.trackingDelegate.onWriteToFile(e.path)}catch(t){p("FS.trackingDelegate['onWriteToFile']('"+e.path+"') threw an exception: "+t.message)}return c},allocate:function(e,t,n){if(ee.isClosed(e))throw new ee.ErrnoError(8);if(t<0||n<=0)throw new ee.ErrnoError(28);if(0==(2097155&e.flags))throw new ee.ErrnoError(8);if(!ee.isFile(e.node.mode)&&!ee.isDir(e.node.mode))throw new ee.ErrnoError(43);if(!e.stream_ops.allocate)throw new ee.ErrnoError(138);e.stream_ops.allocate(e,t,n)},mmap:function(e,t,n,r,a,i){if(0!=(2&a)&&0==(2&i)&&2!=(2097155&e.flags))throw new ee.ErrnoError(2);if(1==(2097155&e.flags))throw new ee.ErrnoError(2);if(!e.stream_ops.mmap)throw new ee.ErrnoError(43);return e.stream_ops.mmap(e,t,n,r,a,i)},msync:function(e,t,n,r,a){return e&&e.stream_ops.msync?e.stream_ops.msync(e,t,n,r,a):0},munmap:function(e){return 0},ioctl:function(e,t,n){if(!e.stream_ops.ioctl)throw new ee.ErrnoError(59);return e.stream_ops.ioctl(e,t,n)},readFile:function(e,t){if((t=t||{}).flags=t.flags||0,t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error('Invalid encoding type "'+t.encoding+'"');var n,r=ee.open(e,t.flags),a=ee.stat(e).size,i=new Uint8Array(a);return ee.read(r,i,0,a,0),"utf8"===t.encoding?n=w(i,0):"binary"===t.encoding&&(n=i),ee.close(r),n},writeFile:function(e,t,n){(n=n||{}).flags=n.flags||577;var r=ee.open(e,n.flags,n.mode);if("string"==typeof t){var a=new Uint8Array(A(t)+1),i=S(t,a,0,a.length);ee.write(r,a,0,i,void 0,n.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");ee.write(r,t,0,t.byteLength,void 0,n.canOwn)}ee.close(r)},cwd:function(){return ee.currentPath},chdir:function(e){var t=ee.lookupPath(e,{follow:!0});if(null===t.node)throw new ee.ErrnoError(44);if(!ee.isDir(t.node.mode))throw new ee.ErrnoError(54);var n=ee.nodePermissions(t.node,"x");if(n)throw new ee.ErrnoError(n);ee.currentPath=t.path},createDefaultDirectories:function(){ee.mkdir("/tmp"),ee.mkdir("/home"),ee.mkdir("/home/web_user")},createDefaultDevices:function(){ee.mkdir("/dev"),ee.registerDevice(ee.makedev(1,3),{read:function(){return 0},write:function(e,t,n,r,a){return r}}),ee.mkdev("/dev/null",ee.makedev(1,3)),X.register(ee.makedev(5,0),X.default_tty_ops),X.register(ee.makedev(6,0),X.default_tty1_ops),ee.mkdev("/dev/tty",ee.makedev(5,0)),ee.mkdev("/dev/tty1",ee.makedev(6,0));var e=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return function(){return crypto.getRandomValues(e),e[0]}}return function(){M("randomDevice")}}();ee.createDevice("/dev","random",e),ee.createDevice("/dev","urandom",e),ee.mkdir("/dev/shm"),ee.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){ee.mkdir("/proc");var e=ee.mkdir("/proc/self");ee.mkdir("/proc/self/fd"),ee.mount({mount:function(){var t=ee.createNode(e,"fd",16895,73);return t.node_ops={lookup:function(e,t){var n=+t,r=ee.getStream(n);if(!r)throw new ee.ErrnoError(8);var a={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return r.path}}};return a.parent=a,a}},t}},{},"/proc/self/fd")},createStandardStreams:function(){a.stdin?ee.createDevice("/dev","stdin",a.stdin):ee.symlink("/dev/tty","/dev/stdin"),a.stdout?ee.createDevice("/dev","stdout",null,a.stdout):ee.symlink("/dev/tty","/dev/stdout"),a.stderr?ee.createDevice("/dev","stderr",null,a.stderr):ee.symlink("/dev/tty1","/dev/stderr"),ee.open("/dev/stdin",0),ee.open("/dev/stdout",1),ee.open("/dev/stderr",1)},ensureErrnoError:function(){ee.ErrnoError||(ee.ErrnoError=function(e,t){this.node=t,this.setErrno=function(e){this.errno=e},this.setErrno(e),this.message="FS error"},ee.ErrnoError.prototype=new Error,ee.ErrnoError.prototype.constructor=ee.ErrnoError,[44].forEach((function(e){ee.genericErrors[e]=new ee.ErrnoError(e),ee.genericErrors[e].stack="<generic error, no stack>"})))},staticInit:function(){ee.ensureErrnoError(),ee.nameTable=new Array(4096),ee.mount($,{},"/"),ee.createDefaultDirectories(),ee.createDefaultDevices(),ee.createSpecialDirectories(),ee.filesystems={MEMFS:$}},init:function(e,t,n){ee.init.initialized=!0,ee.ensureErrnoError(),a.stdin=e||a.stdin,a.stdout=t||a.stdout,a.stderr=n||a.stderr,ee.createStandardStreams()},quit:function(){ee.init.initialized=!1;var e=a._fflush;e&&e(0);for(var t=0;t<ee.streams.length;t++){var n=ee.streams[t];n&&ee.close(n)}},getMode:function(e,t){var n=0;return e&&(n|=365),t&&(n|=146),n},findObject:function(e,t){var n=ee.analyzePath(e,t);return n.exists?n.object:null},analyzePath:function(e,t){try{e=(r=ee.lookupPath(e,{follow:!t})).path}catch(e){}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var r=ee.lookupPath(e,{parent:!0});n.parentExists=!0,n.parentPath=r.path,n.parentObject=r.node,n.name=Q.basename(e),r=ee.lookupPath(e,{follow:!t}),n.exists=!0,n.path=r.path,n.object=r.node,n.name=r.node.name,n.isRoot="/"===r.path}catch(e){n.error=e.errno}return n},createPath:function(e,t,n,r){e="string"==typeof e?e:ee.getPath(e);for(var a=t.split("/").reverse();a.length;){var i=a.pop();if(i){var o=Q.join2(e,i);try{ee.mkdir(o)}catch(e){}e=o}}return o},createFile:function(e,t,n,r,a){var i=Q.join2("string"==typeof e?e:ee.getPath(e),t),o=ee.getMode(r,a);return ee.create(i,o)},createDataFile:function(e,t,n,r,a,i){var o=t?Q.join2("string"==typeof e?e:ee.getPath(e),t):e,c=ee.getMode(r,a),s=ee.create(o,c);if(n){if("string"==typeof n){for(var u=new Array(n.length),l=0,d=n.length;l<d;++l)u[l]=n.charCodeAt(l);n=u}ee.chmod(s,146|c);var f=ee.open(s,577);ee.write(f,n,0,n.length,0,i),ee.close(f),ee.chmod(s,c)}return s},createDevice:function(e,t,n,r){var a=Q.join2("string"==typeof e?e:ee.getPath(e),t),i=ee.getMode(!!n,!!r);ee.createDevice.major||(ee.createDevice.major=64);var o=ee.makedev(ee.createDevice.major++,0);return ee.registerDevice(o,{open:function(e){e.seekable=!1},close:function(e){r&&r.buffer&&r.buffer.length&&r(10)},read:function(e,t,r,a,i){for(var o=0,c=0;c<a;c++){var s;try{s=n()}catch(e){throw new ee.ErrnoError(29)}if(void 0===s&&0===o)throw new ee.ErrnoError(6);if(null==s)break;o++,t[r+c]=s}return o&&(e.node.timestamp=Date.now()),o},write:function(e,t,n,a,i){for(var o=0;o<a;o++)try{r(t[n+o])}catch(e){throw new ee.ErrnoError(29)}return a&&(e.node.timestamp=Date.now()),o}}),ee.mkdev(a,i,o)},forceLoadFile:function(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!c)throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=se(c(e.url),!0),e.usedBytes=e.contents.length}catch(e){throw new ee.ErrnoError(29)}},createLazyFile:function(e,t,n,r,a){function i(){this.lengthKnown=!1,this.chunks=[]}if(i.prototype.get=function(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,n=e/this.chunkSize|0;return this.getter(n)[t]}},i.prototype.setDataGetter=function(e){this.getter=e},i.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",n,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+n+". Status: "+e.status);var t,r=Number(e.getResponseHeader("Content-length")),a=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,i=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,o=1048576;a||(o=r);var c=this;c.setDataGetter((function(e){var t=e*o,a=(e+1)*o-1;if(a=Math.min(a,r-1),void 0===c.chunks[e]&&(c.chunks[e]=function(e,t){if(e>t)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>r-1)throw new Error("only "+r+" bytes available! programmer error!");var a=new XMLHttpRequest;if(a.open("GET",n,!1),r!==o&&a.setRequestHeader("Range","bytes="+e+"-"+t),"undefined"!=typeof Uint8Array&&(a.responseType="arraybuffer"),a.overrideMimeType&&a.overrideMimeType("text/plain; charset=x-user-defined"),a.send(null),!(a.status>=200&&a.status<300||304===a.status))throw new Error("Couldn't load "+n+". Status: "+a.status);return void 0!==a.response?new Uint8Array(a.response||[]):se(a.responseText||"",!0)}(t,a)),void 0===c.chunks[e])throw new Error("doXHR failed!");return c.chunks[e]})),!i&&r||(o=r=1,r=this.getter(0).length,o=r,f("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=r,this._chunkSize=o,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var o={isDevice:!1,url:n},c=ee.createFile(e,t,o,r,a);o.contents?c.contents=o.contents:o.url&&(c.contents=null,c.url=o.url),Object.defineProperties(c,{usedBytes:{get:function(){return this.contents.length}}});var s={};return Object.keys(c.stream_ops).forEach((function(e){var t=c.stream_ops[e];s[e]=function(){return ee.forceLoadFile(c),t.apply(null,arguments)}})),s.read=function(e,t,n,r,a){ee.forceLoadFile(c);var i=e.node.contents;if(a>=i.length)return 0;var o=Math.min(i.length-a,r);if(i.slice)for(var s=0;s<o;s++)t[n+s]=i[a+s];else for(s=0;s<o;s++)t[n+s]=i.get(a+s);return o},c.stream_ops=s,c},createPreloadedFile:function(e,t,n,r,i,o,c,s,u,l){Browser.init();var d=t?J.resolve(Q.join2(e,t)):e;function f(n){function f(n){l&&l(),s||ee.createDataFile(e,t,n,r,i,u),o&&o(),R()}var p=!1;a.preloadPlugins.forEach((function(e){p||e.canHandle(d)&&(e.handle(n,d,f,(function(){c&&c(),R()})),p=!0)})),p||f(n)}x(),"string"==typeof n?Browser.asyncLoad(n,(function(e){f(e)}),c):f(n)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(e,t,n){t=t||function(){},n=n||function(){};var r=ee.indexedDB();try{var a=r.open(ee.DB_NAME(),ee.DB_VERSION)}catch(e){return n(e)}a.onupgradeneeded=function(){f("creating db"),a.result.createObjectStore(ee.DB_STORE_NAME)},a.onsuccess=function(){var r=a.result.transaction([ee.DB_STORE_NAME],"readwrite"),i=r.objectStore(ee.DB_STORE_NAME),o=0,c=0,s=e.length;function u(){0==c?t():n()}e.forEach((function(e){var t=i.put(ee.analyzePath(e).object.contents,e);t.onsuccess=function(){++o+c==s&&u()},t.onerror=function(){c++,o+c==s&&u()}})),r.onerror=n},a.onerror=n},loadFilesFromDB:function(e,t,n){t=t||function(){},n=n||function(){};var r=ee.indexedDB();try{var a=r.open(ee.DB_NAME(),ee.DB_VERSION)}catch(e){return n(e)}a.onupgradeneeded=n,a.onsuccess=function(){var r=a.result;try{var i=r.transaction([ee.DB_STORE_NAME],"readonly")}catch(e){return void n(e)}var o=i.objectStore(ee.DB_STORE_NAME),c=0,s=0,u=e.length;function l(){0==s?t():n()}e.forEach((function(e){var t=o.get(e);t.onsuccess=function(){ee.analyzePath(e).exists&&ee.unlink(e),ee.createDataFile(Q.dirname(e),Q.basename(e),t.result,!0,!0,!0),++c+s==u&&l()},t.onerror=function(){s++,c+s==u&&l()}})),i.onerror=n},a.onerror=n}},te={mappings:{},DEFAULT_POLLMASK:5,umask:511,calculateAt:function(e,t,n){if("/"===t[0])return t;var r;if(-100===e)r=ee.cwd();else{var a=ee.getStream(e);if(!a)throw new ee.ErrnoError(8);r=a.path}if(0==t.length){if(!n)throw new ee.ErrnoError(44);return r}return Q.join2(r,t)},doStat:function(e,t,n){try{var r=e(t)}catch(e){if(e&&e.node&&Q.normalize(t)!==Q.normalize(ee.getPath(e.node)))return-54;throw e}return _[n>>2]=r.dev,_[n+4>>2]=0,_[n+8>>2]=r.ino,_[n+12>>2]=r.mode,_[n+16>>2]=r.nlink,_[n+20>>2]=r.uid,_[n+24>>2]=r.gid,_[n+28>>2]=r.rdev,_[n+32>>2]=0,H=[r.size>>>0,(F=r.size,+Math.abs(F)>=1?F>0?(0|Math.min(+Math.floor(F/4294967296),4294967295))>>>0:~~+Math.ceil((F-+(~~F>>>0))/4294967296)>>>0:0)],_[n+40>>2]=H[0],_[n+44>>2]=H[1],_[n+48>>2]=4096,_[n+52>>2]=r.blocks,_[n+56>>2]=r.atime.getTime()/1e3|0,_[n+60>>2]=0,_[n+64>>2]=r.mtime.getTime()/1e3|0,_[n+68>>2]=0,_[n+72>>2]=r.ctime.getTime()/1e3|0,_[n+76>>2]=0,H=[r.ino>>>0,(F=r.ino,+Math.abs(F)>=1?F>0?(0|Math.min(+Math.floor(F/4294967296),4294967295))>>>0:~~+Math.ceil((F-+(~~F>>>0))/4294967296)>>>0:0)],_[n+80>>2]=H[0],_[n+84>>2]=H[1],0},doMsync:function(e,t,n,r,a){var i=b.slice(e,e+n);ee.msync(t,i,a,n,r)},doMkdir:function(e,t){return"/"===(e=Q.normalize(e))[e.length-1]&&(e=e.substr(0,e.length-1)),ee.mkdir(e,t,0),0},doMknod:function(e,t,n){switch(61440&t){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return ee.mknod(e,t,n),0},doReadlink:function(e,t,n){if(n<=0)return-28;var r=ee.readlink(e),a=Math.min(n,A(r)),i=g[t+a];return S(r,b,t,n+1),g[t+a]=i,a},doAccess:function(e,t){if(-8&t)return-28;var n;if(!(n=ee.lookupPath(e,{follow:!0}).node))return-44;var r="";return 4&t&&(r+="r"),2&t&&(r+="w"),1&t&&(r+="x"),r&&ee.nodePermissions(n,r)?-2:0},doDup:function(e,t,n){var r=ee.getStream(n);return r&&ee.close(r),ee.open(e,t,0,n,n).fd},doReadv:function(e,t,n,r){for(var a=0,i=0;i<n;i++){var o=_[t+8*i>>2],c=_[t+(8*i+4)>>2],s=ee.read(e,g,o,c,r);if(s<0)return-1;if(a+=s,s<c)break}return a},doWritev:function(e,t,n,r){for(var a=0,i=0;i<n;i++){var o=_[t+8*i>>2],c=_[t+(8*i+4)>>2],s=ee.write(e,g,o,c,r);if(s<0)return-1;a+=s}return a},varargs:void 0,get:function(){return te.varargs+=4,_[te.varargs-4>>2]},getStr:function(e){return C(e)},getStreamFromFD:function(e){var t=ee.getStream(e);if(!t)throw new ee.ErrnoError(8);return t},get64:function(e,t){return e}};function ne(e){return e%4==0&&(e%100!=0||e%400==0)}function re(e,t){for(var n=0,r=0;r<=t;n+=e[r++]);return n}var ae=[31,29,31,30,31,30,31,31,30,31,30,31],ie=[31,28,31,30,31,30,31,31,30,31,30,31];function oe(e,t){for(var n=new Date(e.getTime());t>0;){var r=ne(n.getFullYear()),a=n.getMonth(),i=(r?ae:ie)[a];if(!(t>i-n.getDate()))return n.setDate(n.getDate()+t),n;t-=i-n.getDate()+1,n.setDate(1),a<11?n.setMonth(a+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1))}return n}var ce=function(e,t,n,r){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=ee.nextInode++,this.name=t,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=r};function se(e,t,n){var r=n>0?n:A(e)+1,a=new Array(r),i=S(e,a,0,a.length);return t&&(a.length=i),a}Object.defineProperties(ce.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return ee.isDir(this.mode)}},isDevice:{get:function(){return ee.isChrdev(this.mode)}}}),ee.FSNode=ce,ee.staticInit();var ue={d:function(e){return fe(e+16)+16},c:function(e,t,n){throw new W(e).init(t,n),e},a:function(){M()},n:function(e,t){var n;if(0===e)n=Date.now();else{if(1!==e&&4!==e)return q(28),-1;n=G()}return _[t>>2]=n/1e3|0,_[t+4>>2]=n%1e3*1e3*1e3|0,0},i:function(e,t){M("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},g:function(e,t){M("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},l:function(e,t,n){b.copyWithin(e,t,t+n)},m:function(e){var t,n=b.length,r=2147483648;if(e>r)return!1;for(var a=1;a<=4;a*=2){var i=n*(1+.2/a);if(i=Math.min(i,e+100663296),K(Math.min(r,((t=Math.max(e,i))%65536>0&&(t+=65536-t%65536),t))))return!0}return!1},o:function(e){for(var t=G();G()-t<e;);},q:function(e,t){try{var n=0;return Z().forEach((function(r,a){var i=t+n;_[e+4*a>>2]=i,function(e,t,n){for(var r=0;r<e.length;++r)g[t++>>0]=e.charCodeAt(r);g[t>>0]=0}(r,i),n+=r.length+1})),0}catch(e){return void 0!==ee&&e instanceof ee.ErrnoError||M(e),e.errno}},r:function(e,t){try{var n=Z();_[e>>2]=n.length;var r=0;return n.forEach((function(e){r+=e.length+1})),_[t>>2]=r,0}catch(e){return void 0!==ee&&e instanceof ee.ErrnoError||M(e),e.errno}},j:function(e){!function(e,t){m||(a.onExit&&a.onExit(e),E=!0),u(e,new he(e))}(e)},s:function(e){try{var t=te.getStreamFromFD(e);return ee.close(t),0}catch(e){return void 0!==ee&&e instanceof ee.ErrnoError||M(e),e.errno}},t:function(e,t,n,r){try{var a=te.getStreamFromFD(e),i=te.doReadv(a,t,n);return _[r>>2]=i,0}catch(e){return void 0!==ee&&e instanceof ee.ErrnoError||M(e),e.errno}},k:function(e,t,n,r,a){try{var i=te.getStreamFromFD(e),o=4294967296*n+(t>>>0),c=9007199254740992;return o<=-c||o>=c?-61:(ee.llseek(i,o,r),H=[i.position>>>0,(F=i.position,+Math.abs(F)>=1?F>0?(0|Math.min(+Math.floor(F/4294967296),4294967295))>>>0:~~+Math.ceil((F-+(~~F>>>0))/4294967296)>>>0:0)],_[a>>2]=H[0],_[a+4>>2]=H[1],i.getdents&&0===o&&0===r&&(i.getdents=null),0)}catch(e){return void 0!==ee&&e instanceof ee.ErrnoError||M(e),e.errno}},e:function(e,t,n,r){try{var a=te.getStreamFromFD(e),i=te.doWritev(a,t,n);return _[r>>2]=i,0}catch(e){return void 0!==ee&&e instanceof ee.ErrnoError||M(e),e.errno}},f:function(){return 6},h:function(){return 28},p:function(e,t,n,r){return function(e,t,n,r){var a=_[r+40>>2],i={tm_sec:_[r>>2],tm_min:_[r+4>>2],tm_hour:_[r+8>>2],tm_mday:_[r+12>>2],tm_mon:_[r+16>>2],tm_year:_[r+20>>2],tm_wday:_[r+24>>2],tm_yday:_[r+28>>2],tm_isdst:_[r+32>>2],tm_gmtoff:_[r+36>>2],tm_zone:a?C(a):""},o=C(n),c={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var s in c)o=o.replace(new RegExp(s,"g"),c[s]);var u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=["January","February","March","April","May","June","July","August","September","October","November","December"];function d(e,t,n){for(var r="number"==typeof e?e.toString():e||"";r.length<t;)r=n[0]+r;return r}function f(e,t){return d(e,t,"0")}function p(e,t){function n(e){return e<0?-1:e>0?1:0}var r;return 0===(r=n(e.getFullYear()-t.getFullYear()))&&0===(r=n(e.getMonth()-t.getMonth()))&&(r=n(e.getDate()-t.getDate())),r}function h(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function m(e){var t=oe(new Date(e.tm_year+1900,0,1),e.tm_yday),n=new Date(t.getFullYear(),0,4),r=new Date(t.getFullYear()+1,0,4),a=h(n),i=h(r);return p(a,t)<=0?p(i,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var v={"%a":function(e){return u[e.tm_wday].substring(0,3)},"%A":function(e){return u[e.tm_wday]},"%b":function(e){return l[e.tm_mon].substring(0,3)},"%B":function(e){return l[e.tm_mon]},"%C":function(e){return f((e.tm_year+1900)/100|0,2)},"%d":function(e){return f(e.tm_mday,2)},"%e":function(e){return d(e.tm_mday,2," ")},"%g":function(e){return m(e).toString().substring(2)},"%G":function(e){return m(e)},"%H":function(e){return f(e.tm_hour,2)},"%I":function(e){var t=e.tm_hour;return 0==t?t=12:t>12&&(t-=12),f(t,2)},"%j":function(e){return f(e.tm_mday+re(ne(e.tm_year+1900)?ae:ie,e.tm_mon-1),3)},"%m":function(e){return f(e.tm_mon+1,2)},"%M":function(e){return f(e.tm_min,2)},"%n":function(){return"\n"},"%p":function(e){return e.tm_hour>=0&&e.tm_hour<12?"AM":"PM"},"%S":function(e){return f(e.tm_sec,2)},"%t":function(){return"\t"},"%u":function(e){return e.tm_wday||7},"%U":function(e){var t=new Date(e.tm_year+1900,0,1),n=0===t.getDay()?t:oe(t,7-t.getDay()),r=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(p(n,r)<0){var a=re(ne(r.getFullYear())?ae:ie,r.getMonth()-1)-31,i=31-n.getDate()+a+r.getDate();return f(Math.ceil(i/7),2)}return 0===p(n,t)?"01":"00"},"%V":function(e){var t,n=new Date(e.tm_year+1900,0,4),r=new Date(e.tm_year+1901,0,4),a=h(n),i=h(r),o=oe(new Date(e.tm_year+1900,0,1),e.tm_yday);return p(o,a)<0?"53":p(i,o)<=0?"01":(t=a.getFullYear()<e.tm_year+1900?e.tm_yday+32-a.getDate():e.tm_yday+1-a.getDate(),f(Math.ceil(t/7),2))},"%w":function(e){return e.tm_wday},"%W":function(e){var t=new Date(e.tm_year,0,1),n=1===t.getDay()?t:oe(t,0===t.getDay()?1:7-t.getDay()+1),r=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(p(n,r)<0){var a=re(ne(r.getFullYear())?ae:ie,r.getMonth()-1)-31,i=31-n.getDate()+a+r.getDate();return f(Math.ceil(i/7),2)}return 0===p(n,t)?"01":"00"},"%y":function(e){return(e.tm_year+1900).toString().substring(2)},"%Y":function(e){return e.tm_year+1900},"%z":function(e){var t=e.tm_gmtoff,n=t>=0;return t=(t=Math.abs(t)/60)/60*100+t%60,(n?"+":"-")+String("0000"+t).slice(-4)},"%Z":function(e){return e.tm_zone},"%%":function(){return"%"}};for(var s in v)o.indexOf(s)>=0&&(o=o.replace(new RegExp(s,"g"),v[s](i)));var b=se(o,!1);return b.length>t?0:(function(e,t){g.set(e,t)}(b,e),b.length-1)}(e,t,n,r)},b:function(e){switch(e){case 30:case 75:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:case 80:case 81:case 79:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==typeof navigator&&navigator.hardwareConcurrency||1}return q(28),-1}};!function(){var e={a:ue};function t(e,t){var n=e.exports;a.asm=n,k((h=a.asm.u).buffer),y=a.asm.I,R()}function r(e){t(e.instance)}function i(t){return(d||"function"!=typeof fetch?Promise.resolve().then((function(){return U(V)})):fetch(V,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+V+"'";return e.arrayBuffer()})).catch((function(){return U(V)}))).then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){p("failed to asynchronously prepare wasm: "+e),M(e)}))}if(x(),a.instantiateWasm)try{return a.instantiateWasm(e,t)}catch(e){return p("Module.instantiateWasm callback failed with error: "+e),!1}(d||"function"!=typeof WebAssembly.instantiateStreaming||L(V)||"function"!=typeof fetch?i(r):fetch(V,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(r,(function(e){return p("wasm streaming compile failed: "+e),p("falling back to ArrayBuffer instantiation"),i(r)}))}))).catch(n)}();var le=a.___wasm_call_ctors=function(){return(le=a.___wasm_call_ctors=a.asm.v).apply(null,arguments)};a._getModelBufferMemoryOffset=function(){return(a._getModelBufferMemoryOffset=a.asm.w).apply(null,arguments)},a._getInputImageBufferOffset=function(){return(a._getInputImageBufferOffset=a.asm.x).apply(null,arguments)},a._getOutputImageBufferOffset=function(){return(a._getOutputImageBufferOffset=a.asm.y).apply(null,arguments)},a._getGrayedImageBufferOffset=function(){return(a._getGrayedImageBufferOffset=a.asm.z).apply(null,arguments)},a._setSmoothingR=function(){return(a._setSmoothingR=a.asm.A).apply(null,arguments)},a._setKernelSize=function(){return(a._setKernelSize=a.asm.B).apply(null,arguments)},a._setUseSoftmax=function(){return(a._setUseSoftmax=a.asm.C).apply(null,arguments)},a._setUsePadding=function(){return(a._setUsePadding=a.asm.D).apply(null,arguments)},a._setThresholdWithoutSoftmax=function(){return(a._setThresholdWithoutSoftmax=a.asm.E).apply(null,arguments)},a._setInterpolation=function(){return(a._setInterpolation=a.asm.F).apply(null,arguments)},a._exec=function(){return(a._exec=a.asm.G).apply(null,arguments)},a._loadModel=function(){return(a._loadModel=a.asm.H).apply(null,arguments)};var de,fe=a._malloc=function(){return(fe=a._malloc=a.asm.J).apply(null,arguments)},pe=a.___errno_location=function(){return(pe=a.___errno_location=a.asm.K).apply(null,arguments)};function he(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function me(e){function n(){de||(de=!0,a.calledRun=!0,E||(a.noFSInit||ee.init.initialized||ee.init(),z(T),ee.ignorePermissions=!1,z(I),t(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),function(){if(a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)e=a.postRun.shift(),P.unshift(e);var e;z(P)}()))}D>0||(function(){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)e=a.preRun.shift(),j.unshift(e);var e;z(j)}(),D>0||(a.setStatus?(a.setStatus("Running..."),setTimeout((function(){setTimeout((function(){a.setStatus("")}),1),n()}),1)):n()))}if(N=function e(){de||me(),de||(N=e)},a.run=me,a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();return me(),e.ready}})),Ud="https://st.mycdn.me/static/callseffects/0-0-2",zd={segmentation:{models:{"96x160":Ud+"/96x160.tflite","128x128":Ud+"/128x128.tflite","144x256":Ud+"/144x256.tflite","256x256":Ud+"/256x256.tflite"}}},Gd=function(e,t){void 0===t&&(t=[]);var n=t.join(","),r=new Blob(["("+e+")("+n+");"],{type:"application/javascript; charset=utf-8"});return window.URL.createObjectURL(r)};(Fd=Bd||(Bd={})).IE="IE",Fd.Safari="Safari",Fd.Chrome="Chrome",Fd.Edge="Edge",Fd.Firefox="Firefox",Fd.Yandex="Yandex",Fd.Opera="Opera",Fd.Sferum="Sferum";var Wd,qd,Kd,Yd,Zd,Qd=(Wd=navigator.appVersion,qd=navigator.appName,Kd=navigator.userAgent,Yd=[],function(){return Yd.length?Yd:Yd=function(){var e,t=!1,n=0,r=Kd.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(r[1]))return e=/\brv[ :]+(\d+)/g.exec(Kd),[Bd.IE,e&&e[1]||"Unknown",t,n];if("Safari"===r[1]){if(e=Kd.match(/\bEdge\/(\d+)/))return[Bd.Edge,e[1]||"Unknown",t,n];if(e=Kd.match(/\bCriOS\/(\d+)/))return[Bd.Chrome,e[1],!0,+e[1]];if(e=Kd.match(/\bFxiOS\/(\d+)/))return[Bd.Firefox,e[1],!1,n];if(e=Kd.match(/\bYaBrowser\/(\d+)/))return[Bd.Yandex,e[1],!1,n];if(e=Kd.match(/\bOPT\/(\d+)/))return[Bd.Opera,e[1],!1,n]}if(r[1]===Bd.Chrome){if(t=!0,n=Number(r[2]),e=Kd.match(/\bOPR\/(\d+)/))return[Bd.Opera,e[1]||"Unknown",t,n];if(e=Kd.match(/\bYaBrowser\/(\d+)/))return[Bd.Yandex,e[1]||"Unknown",t,n];if(e=Kd.match(/\bSferum\/((\d+)(?:\.\d+)*)/))return[Bd.Sferum,e[1]||"Unknown",t,n];if(e=Kd.match(/\bEdge?\/(\d+)/))return[Bd.Edge,e[1]||"Unknown",t,n];if(void 0!==window.opr&&/^(.+\.)?ok.ru$/.test(window.location.host))return[Bd.Opera,"Hidden",t,n]}return e=Kd.match(/version\/(\d+)/i),[r[2]?r[1]:qd,e&&e[1]||r[2]||Wd,t,n]}()}),Jd=function(e){return xd(void 0,void 0,void 0,(function(){return Rd(this,(function(t){return[2,new Promise((function(t,n){var r=document.createElement("img");r.crossOrigin="anonymous",r.onerror=function(e){n("Failed image loading: "+e)},r.onload=function(){return t(r)},r.src=e}))]}))}))},Xd=function(){function e(){}return e.updateSegmentationParams=function(t){Object.assign(e._params.segmentation,t)},e.getSegmentationParams=function(){return e._params.segmentation},e.setDebug=function(t){e._params.debug=t},e.getDebug=function(){return!!e._params.debug},e._params={segmentation:{interpolation:4,kernelSize:0,threshold:.1,usePadding:!0,useSoftmax:!0,processSizeKey:Qd()[0]===Bd.Safari?"128x128":"256x256",modelKey:Qd()[0]===Bd.Safari?"128x128":"256x256"}},e}(),$d=function(){function e(){}return e.workerFn=function(e,t,n){var r=n.segmentationFix,a=n.simdSupport,i=null,o=!1,c={"96x160":[96,160],"128x128":[128,128],"144x256":[144,256],"256x256":[256,256]},s={interpolation:4,kernelSize:0,threshold:.1,usePadding:!0,useSoftmax:!0,processSizeKey:"256x256"},u=function(){p.call(null,"log",Array.from(arguments))},l=function(){p.call(null,"warn",Array.from(arguments))};function d(n,r,c){void 0===r&&(r={}),void 0===c&&(c=!1),o=c;var d=a?t:e;return u("[createModel]",n,r,{debugFlag:c}),d().then((function(e){return function(e,t){return u("[loadModel][modelPath]",e,t),fetch(t).then((function(e){return e.arrayBuffer()})).then((function(t){u("Model buffer size:",t.byteLength);var n=e._getModelBufferMemoryOffset();u("Model buffer memory offset:",n),u("Loading model buffer..."),e.HEAPU8.set(new Uint8Array(t),n);var r=e._loadModel(t.byteLength,o);u("_loadModel result:",r),u("Input Image Buffer Offset:",e._getInputImageBufferOffset()),u("Output Image Buffer Offset:",e._getOutputImageBufferOffset()),u("TFLITE Loaded!")}))}(e,n).then((function(){i=e}))})).then((function(){f(Object.assign({},s,r))})).catch((function(e){i=null,l("simd error",e),self.postMessage({type:"error",error:e})}))}function f(e){Object.assign(s,e),u("settings updated",s),null==i||i._setKernelSize(s.kernelSize),null==i||i._setUseSoftmax(s.useSoftmax?1:0),null==i||i._setUsePadding(s.usePadding?1:0),null==i||i._setThresholdWithoutSoftmax(s.threshold),null==i||i._setInterpolation(s.interpolation)}function p(e,t){if(void 0===e&&(e="log"),"function"==typeof console[e]&&o){var n=["[segmentation-worker]"].concat(t);console[e].apply(null,n)}}self.onmessage=function(e){try{switch(e.data.type){case"create":d(e.data.modelPath,e.data.settings,e.data.debug).then((function(){self.postMessage({type:"ready"})}));break;case"frame":var t=function(e){if(i){var t=c[s.processSizeKey],n=t[0],a=t[1],o=i._getInputImageBufferOffset();i.HEAPU8.set(e.data,o),i._exec(n,a);var u=i._getOutputImageBufferOffset(),d=new ImageData(new Uint8ClampedArray(i.HEAPU8.slice(u,u+n*a*4)),n,a);if(r)for(var f=0;f<d.data.length;f+=4)d.data[f+3]<r?d.data[f+3]=0:d.data[f+3]=255;return d}l("no tfliteSIMD instance!")}(e.data.imageData);t&&self.postMessage({type:"frame",segmentationMask:t,savedImage:e.data.savedImage,resizedImage:e.data.imageData},[t.data.buffer,e.data.savedImage.data.buffer,e.data.imageData.data.buffer]);break;case"params":f(e.data.params);break;default:l("unhandled event",e.data)}}catch(e){l("onmessage error",e),self.postMessage({type:"error",error:e})}}},e}(),ef=function(){function e(e){var t=this,n=e.onFrame,r=e.onReady,a=e.onError;this._settings=Xd.getSegmentationParams(),this._processSize={"96x160":[96,160],"128x128":[128,128],"144x256":[144,256],"256x256":[256,256]},this._worker=null;var i=Qd()[0]===Bd.Safari;this._worker=new Worker(Gd($d.workerFn,[Vd,Hd,JSON.stringify({simdSupport:!i,segmentationFix:200})])),this._worker.onmessage=function(e){switch(e.data.type){case"ready":r(t);break;case"frame":n(e.data.segmentationMask,e.data.savedImage,e.data.resizedImage);break;case"error":null==a||a(e.data);break;default:console.warn("unhandled event type",e.data)}},this._canvas=document.createElement("canvas"),this._canvasImageBackup=document.createElement("canvas");var o=this._canvas.getContext("2d"),c=this._canvasImageBackup.getContext("2d");if(!o||!c)throw new Error("can't get ctx for canvas");this._ctx=o,this._ctxImageBackup=c}return e.prototype.createModel=function(e){var t,n=this._settings,r=zd.segmentation.models[n.modelKey];null===(t=this._worker)||void 0===t||t.postMessage({type:"create",modelPath:r,settings:n,debug:e})},e.prototype.setParams=function(e){var t=this._worker,n=this._settings;Object.assign(n,e),null==t||t.postMessage({type:"params",params:n})},e.prototype.requestSegmentation=function(e){var t=this,n=t._settings,r=t._canvas,a=t._ctx,i=t._worker,o=t._processSize[n.processSizeKey],c=o[0],s=o[1],u=this._saveImage(e);r.width=c,r.height=s,a.drawImage(e,0,0,r.width,r.height);var l=a.getImageData(0,0,r.width,r.height);null==i||i.postMessage({type:"frame",imageData:l,savedImage:u},[l.data.buffer,u.data.buffer])},e.prototype._saveImage=function(e){var t=this._ctxImageBackup,n=this._canvasImageBackup,r=function(e){var t={height:0,width:0};return"number"==typeof e.height?t.height=e.height:t.height=e.height.baseVal.value,"number"==typeof e.width?t.width=e.width:t.width=e.width.baseVal.value,t}(e),a=r.height,i=r.width;return n.height=a,n.width=i,t.clearRect(0,0,i,a),t.drawImage(e,0,0,i,a),t.getImageData(0,0,i,a)},e.prototype.destroy=function(){this._worker&&(this._worker.terminate(),this._worker=null)},e}(),tf=function(){function e(){this._timeouts=new Map,this._throttles=new Map,this._worker=new Worker(Gd(e.workerFn))}return e.prototype.initWorker=function(e){var t=void 0===e?{}:e,n=t.onError,r=t.onTimeout,a=t.onThrottle,i=t.onReady;return xd(this,void 0,void 0,(function(){var e=this;return Rd(this,(function(t){return[2,new Promise((function(t,o){e._worker.addEventListener("message",(function(c){switch(c.data.type){case"timeout":e._callTimeout(c.data.id),null==r||r(c.data);break;case"throttle":e._callThrottle(c.data.id),null==a||a(c.data);break;case"error":null==n||n(c.data),o(c.data);break;case"ready":null==i||i(c.data),t()}})),e._worker.addEventListener("error",(function(e){null==n||n(e),o(e)})),e._worker.postMessage({type:"ready"})}))]}))}))},e.workerFn=function(){var e=new Map,t=new Map;self.onmessage=function(n){switch(n.data.type){case"timeout":!function(t,n){void 0===n&&(n=5);var r=setTimeout((function(){self.postMessage({type:"timeout",id:t}),e.delete(t)}),n);e.set(t,r)}(n.data.id,n.data.ms);break;case"throttle":!function(e,n){void 0===n&&(n=5);var r=t.get(e);r&&clearTimeout(r);var a=setTimeout((function(){self.postMessage({type:"throttle",id:e}),t.delete(e)}),n);t.set(e,a)}(n.data.id,n.data.ms);break;case"ready":self.postMessage({type:"ready"});break;default:self.postMessage({type:"error",data:n.data})}},self.postMessage({type:"ready"})},e.prototype.postTimeout=function(e,t,n){void 0===n&&(n=5),this._timeouts.set(e,t),this._worker.postMessage({type:"timeout",id:e,ms:n})},e.prototype.postThrottle=function(e,t,n){void 0===n&&(n=5),this._throttles.set(e,t),this._worker.postMessage({type:"throttle",id:e,ms:n})},e.prototype._callTimeout=function(e){var t=this._timeouts.get(e);t&&(this._timeouts.delete(e),t())},e.prototype._callThrottle=function(e){var t=this._throttles.get(e);t&&(this._throttles.delete(e),t())},e.prototype.destroy=function(){this._worker.terminate(),this._throttles.clear(),this._timeouts.clear()},e}();!function(e){e.NONE="none",e.BLUR="blur",e.BACKGROUND="background"}(Zd||(Zd={}));var nf,rf=function(){function e(e){var t=void 0===e?{}:e,n=t.segmentation,r=t.debug;this._effect=null,this._net=null,this._video=null,this._canvas=null,this._stream=null,this._track=null,this._sendNextFrame=null,this._timerWorker=null,n&&Xd.updateSegmentationParams(n),r&&Xd.setDebug(r)}return e.prototype._createDom=function(e){var t=function(e){var t=e.constraints,n=e.defaults;return t?("number"==typeof t.height?n.height=t.height:"object"==typeof t.height&&(n.height=t.height.exact||t.height.ideal||t.height.max||t.height.min||n.height),"number"==typeof t.width?n.width=t.width:"object"==typeof t.width&&(n.width=t.width.exact||t.width.ideal||t.width.max||t.width.min||n.width),n):n}({constraints:e,defaults:{height:360,width:640}}),n=t.width,r=t.height;this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.style.pointerEvents="none",this._canvas.style.visibility="hidden",this._canvas.style.position="absolute",this._canvas.style.width="160px",this._canvas.style.height="90px",this._canvas.height=r,this._canvas.width=n,this._canvas.style.bottom="0",this._canvas.style.left="0",this._canvas.style.zIndex="5000",document.body.appendChild(this._canvas)),this._video||(this._video=document.createElement("video"),this._video.controls=!1,this._video.autoplay=!1,this._video.preload="auto",this._video.muted=!0,this._video.style.pointerEvents="none",this._video.style.visibility="hidden",this._video.style.position="absolute",this._video.style.width="160px",this._video.style.height="90px",this._video.height=r,this._video.width=n,this._video.style.bottom="0",this._video.style.right="0",this._video.style.zIndex="5000",document.body.appendChild(this._video))},e.prototype._removeDom=function(){try{this._canvas&&document.body.removeChild(this._canvas),this._video&&document.body.removeChild(this._video)}catch(e){}this._canvas=null,this._video=null},e.prototype._createStream=function(e){return xd(this,void 0,void 0,(function(){var t=this;return Rd(this,(function(n){if(!this._canvas||!this._video)throw new Error("Video element or canvas not found");return this._stream=this._canvas.captureStream(0),[2,new Promise((function(n,r){var a=t._video;a.srcObject=new MediaStream([e]),a.onloadeddata=function(){var e;a.width=a.videoWidth,a.height=a.videoHeight,t._track=null===(e=t._stream)||void 0===e?void 0:e.getVideoTracks()[0],n()},a.onerror=function(){return r(new Error("Video element error"))};var i=a.play(),o=function(){return r(new Error("Autoplay is disabled"))};i?i.catch(o):o()}))]}))}))},e.prototype._createNet=function(){return xd(this,void 0,void 0,(function(){var e=this;return Rd(this,(function(t){return[2,new Promise((function(t,n){var r=Xd.getDebug()?function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn.apply(console,e),n()}:void 0;new ef({onFrame:function(t,n,r){e._drawFrame(t,n,r)},onReady:t,onError:r}).createModel(Xd.getDebug())}))]}))}))},e.prototype._removeStream=function(){this._stream&&(this._stream.getTracks().forEach((function(e){return e.stop()})),this._stream=null,this._track=null),this._video&&(this._video.pause(),this._video.srcObject&&this._video.srcObject.getTracks().forEach((function(e){return e.stop()})),this._video.srcObject=null)},e.prototype._drawFrame=function(e,t,n){var r,a=this;this._net&&this._video&&this._effect&&this._canvas&&this._video&&this._effect&&(this._effect.draw(t,e,n),this._track&&(this._track.requestFrame(),null===(r=this._timerWorker)||void 0===r||r.postTimeout(Date.now(),(function(){a._video&&a._sendNextFrame&&a._sendNextFrame(a._video)}))))},e.prototype._cleanup=function(){this._effect&&(this._effect.destroy(),this._effect=null),this._net&&(this._net.destroy(),this._net=null),this._removeStream(),this._removeDom(),this._timerWorker&&(this._timerWorker.destroy(),this._timerWorker=null)},e.prototype._setEffect=function(e,t){return xd(this,void 0,void 0,(function(){var n,r=this;return Rd(this,(function(a){switch(a.label){case 0:return this._timerWorker?[3,2]:(this._timerWorker=new tf,[4,this._timerWorker.initWorker()]);case 1:a.sent(),a.label=2;case 2:return this._net?[3,4]:(n=this,[4,this._createNet()]);case 3:n._net=a.sent(),a.label=4;case 4:return this._effect&&(this._effect=null),this._sendNextFrame=function(e){var t;null===(t=r._timerWorker)||void 0===t||t.postThrottle("img-segm",(function(){var t;null===(t=r._net)||void 0===t||t.requestSegmentation(e)}),1e3/60)},this._removeStream(),this._createDom(t.getConstraints()),[4,this._createStream(t)];case 5:if(a.sent(),!this._canvas||!this._video)throw new Error("Video element or canvas not found");return this._effect=e,this._effect.video=this._video,this._effect.canvas=this._canvas,this._sendNextFrame(this._video),[2]}}))}))},e.prototype.setEffect=function(e,t){var n;return xd(this,void 0,void 0,(function(){var r;return Rd(this,(function(a){switch(a.label){case 0:if(!e)return this._cleanup(),[2,t];e.effect!==(null===(n=this._effect)||void 0===n?void 0:n.effect)&&e.destroy(),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this._setEffect(e,t)];case 2:return a.sent(),[2,this._track||t];case 3:throw r=a.sent(),this._cleanup(),r;case 4:return[2]}}))}))},e.prototype.stopEffect=function(){this._cleanup()},Object.defineProperty(e.prototype,"effect",{get:function(){return this._effect?this._effect.effect:Zd.NONE},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this._cleanup(),this._net=null},e}(),af=function(e){var t=e.gl,n=e.fs,r=e.vs,a=t.createShader(t.VERTEX_SHADER);if(!a)throw new Error("vertex shader didn't initialized");t.shaderSource(a,r),t.compileShader(a);var i=t.createShader(t.FRAGMENT_SHADER);if(!i)throw new Error("fragment shader didn't initialized");t.shaderSource(i,n),t.compileShader(i);var o=t.createProgram();if(!o)throw new Error("shader program didn't initialized");if(t.attachShader(o,a),t.attachShader(o,i),t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS))throw t.getProgramInfoLog(o);return t.deleteShader(a),t.deleteShader(i),{program:o}},of=function(e){var t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),t},cf=function(e,t,n){var r=of(e);if(!r)throw new Error("texture was not created");e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,n,0,e.RGBA,e.UNSIGNED_BYTE,null);var a=e.createFramebuffer();if(!a)throw new Error("framebuffer was not created");return e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0),{framebuffer:a,texture:r}},sf=function(e,t){return{aTextureCoord:e.getAttribLocation(t,"aTextureCoord"),aVertexCoord:e.getAttribLocation(t,"aVertexCoord")}},uf="attribute vec3 aVertexCoord;\nattribute vec2 aTextureCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void) {\n  gl_Position = vec4(aVertexCoord, 1.0);\n  vTextureCoord = aTextureCoord;\n}",lf=function(){function e(e){var t=this;this.gl=e,this.program=af({fs:"precision highp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uAlphaTexture;\nuniform float uLowerBound;\nuniform float uUpperBound;\n\nvoid main(void) {\n  vec4 color = texture2D(uAlphaTexture, vTextureCoord);\n  if (color.a < uLowerBound) {\n    color.a = 0.0;\n  } else {\n    if (color.a < uUpperBound) {\n      color.a = (color.a - uLowerBound) / (uUpperBound - uLowerBound);\n    } else {\n      color.a = 1.0;\n    }\n  }\n  gl_FragColor = color;\n}",gl:e,vs:uf}).program,this.uniforms={uAlphaTexture:function(e){var n=t.gl.getUniformLocation(t.program,"uAlphaTexture");t.gl.uniform1i(n,e)},uLowerBound:function(e){var n=t.gl.getUniformLocation(t.program,"uLowerBound");t.gl.uniform1f(n,e)},uUpperBound:function(e){var n=t.gl.getUniformLocation(t.program,"uUpperBound");t.gl.uniform1f(n,e)}},this.attributes=sf(this.gl,this.program)}return e.prototype.bind=function(){this.gl.useProgram(this.program)},e.prototype.destroy=function(){this.gl.deleteProgram(this.program)},e}(),df=function(){function e(e){var t=this;this.gl=e,this.program=af({fs:"precision highp float;\n\nuniform sampler2D uCameraFrameTexture;\nuniform sampler2D uBackgroundTexture;\nuniform sampler2D uAlphaTexture;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void) {\n  vec4 cameraFrameColor = texture2D(uCameraFrameTexture, vTextureCoord);\n  vec4 backgroundColor = texture2D(uBackgroundTexture, vTextureCoord);\n  vec4 alphaMask = texture2D(uAlphaTexture, vTextureCoord);\n  gl_FragColor = mix(backgroundColor, cameraFrameColor, alphaMask.a);\n}",gl:e,vs:uf}).program,this.uniforms={uAlphaTexture:function(e){var n=t.gl.getUniformLocation(t.program,"uAlphaTexture");t.gl.uniform1i(n,e)},uCameraFrameTexture:function(e){var n=t.gl.getUniformLocation(t.program,"uCameraFrameTexture");t.gl.uniform1i(n,e)},uBackgroundTexture:function(e){var n=t.gl.getUniformLocation(t.program,"uBackgroundTexture");t.gl.uniform1i(n,e)}},this.attributes=sf(this.gl,this.program)}return e.prototype.bind=function(){this.gl.useProgram(this.program)},e.prototype.destroy=function(){this.gl.deleteProgram(this.program)},e}(),ff=function(){function e(e){var t=this;this.gl=e,this.program=af({fs:"// https://github.com/Jam3/glsl-fast-gaussian-blur\n\nprecision highp float;\n\nuniform sampler2D texture;\nuniform vec3 iResolution;\nuniform bool flip;\nuniform vec2 direction;\n\nvec4 blur5(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.3333333333333333) * direction;\n  color += texture2D(image, uv) * 0.29411764705882354;\n  color += texture2D(image, uv + (off1 / resolution)) * 0.35294117647058826;\n  color += texture2D(image, uv - (off1 / resolution)) * 0.35294117647058826;\n  return color;\n}\n\nvec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.3846153846) * direction;\n  vec2 off2 = vec2(3.2307692308) * direction;\n  color += texture2D(image, uv) * 0.2270270270;\n  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;\n  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;\n  return color;\n}\n\nvec4 blur13(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.411764705882353) * direction;\n  vec2 off2 = vec2(3.2941176470588234) * direction;\n  vec2 off3 = vec2(5.176470588235294) * direction;\n  color += texture2D(image, uv) * 0.1964825501511404;\n  color += texture2D(image, uv + (off1 / resolution)) * 0.2969069646728344;\n  color += texture2D(image, uv - (off1 / resolution)) * 0.2969069646728344;\n  color += texture2D(image, uv + (off2 / resolution)) * 0.09447039785044732;\n  color += texture2D(image, uv - (off2 / resolution)) * 0.09447039785044732;\n  color += texture2D(image, uv + (off3 / resolution)) * 0.010381362401148057;\n  color += texture2D(image, uv - (off3 / resolution)) * 0.010381362401148057;\n  return color;\n}\n\nvoid main() {\n  vec2 uv = vec2(gl_FragCoord.xy / iResolution.xy);\n  if (flip) {\n    uv.y = 1.0 - uv.y;\n  }\n\n  gl_FragColor = blur13(texture, uv, iResolution.xy, direction);\n}",gl:e,vs:"attribute vec3 position;\n\nvoid main() { gl_Position = vec4(position, 1.0); }"}).program,this.uniforms={texture:function(e){var n=t.gl.getUniformLocation(t.program,"texture");t.gl.uniform1i(n,e)},iResolution:function(e,n,r){var a=t.gl.getUniformLocation(t.program,"iResolution");t.gl.uniform3f(a,e,n,r)},flip:function(e){var n=t.gl.getUniformLocation(t.program,"flip");t.gl.uniform1f(n,e)},direction:function(e,n){var r=t.gl.getUniformLocation(t.program,"direction");t.gl.uniform2f(r,e,n)}},this.attributes={position:this.gl.getAttribLocation(this.program,"position")}}return e.prototype.bind=function(){this.gl.useProgram(this.program)},e.prototype.destroy=function(){this.gl.deleteProgram(this.program)},e}(),pf=function(){function e(e){var t=this;this.gl=e,this.program=af({fs:"precision highp float;\n\nuniform sampler2D uTextureOriginal;\nuniform sampler2D uTextureMask;\nuniform vec3 iResolution;\nuniform bool flip;\nuniform vec2 direction;\n\nvec4 blur13(sampler2D image, sampler2D maskTexture, vec2 uv, vec2 resolution,\n            vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.411764705882353) * direction;\n  vec2 off2 = vec2(3.2941176470588234) * direction;\n  vec2 off3 = vec2(5.176470588235294) * direction;\n  float sumCof = 0.0;\n\n  vec4 c = texture2D(image, uv);\n  vec4 m = texture2D(maskTexture, uv);\n  color += c * 0.1964825501511404 * (1.0 - m.a);\n  sumCof += 0.1964825501511404 * (1.0 - m.a);\n\n  c = texture2D(image, uv + (off1 / resolution));\n  m = texture2D(maskTexture, uv + (off1 / resolution));\n  color += c * 0.2969069646728344 * (1.0 - m.a);\n  sumCof += 0.2969069646728344 * (1.0 - m.a);\n\n  c = texture2D(image, uv - (off1 / resolution));\n  m = texture2D(maskTexture, uv - (off1 / resolution));\n  color += c * 0.2969069646728344 * (1.0 - m.a);\n  sumCof += 0.2969069646728344 * (1.0 - m.a);\n\n  c = texture2D(image, uv + (off2 / resolution));\n  m = texture2D(maskTexture, uv + (off2 / resolution));\n  color += c * 0.09447039785044732 * (1.0 - m.a);\n  sumCof += 0.09447039785044732 * (1.0 - m.a);\n\n  c = texture2D(image, uv - (off2 / resolution));\n  m = texture2D(maskTexture, uv - (off2 / resolution));\n  color += c * 0.09447039785044732 * (1.0 - m.a);\n  sumCof += 0.09447039785044732 * (1.0 - m.a);\n\n  c = texture2D(image, uv + (off3 / resolution));\n  m = texture2D(maskTexture, uv + (off3 / resolution));\n  color += c * 0.010381362401148057 * (1.0 - m.a);\n  sumCof += 0.010381362401148057 * (1.0 - m.a);\n\n  c = texture2D(image, uv - (off3 / resolution));\n  m = texture2D(maskTexture, uv - (off3 / resolution));\n  color += c * 0.010381362401148057 * (1.0 - m.a);\n  sumCof += 0.010381362401148057 * (1.0 - m.a);\n\n  return sumCof > 0.0 ? color / sumCof : vec4(0.0, 0.0, 0.0, 0.0);\n}\n\nvoid main() {\n  vec2 uv = vec2(gl_FragCoord.xy / iResolution.xy);\n\n  if (flip) {\n    uv.y = 1.0 - uv.y;\n  }\n\n  gl_FragColor =\n      blur13(uTextureOriginal, uTextureMask, uv, iResolution.xy, direction);\n}",gl:e,vs:"attribute vec3 position;\n\nvoid main() { gl_Position = vec4(position, 1.0); }"}).program,this.uniforms={uTextureOriginal:function(e){var n=t.gl.getUniformLocation(t.program,"uTextureOriginal");t.gl.uniform1i(n,e)},uTextureMask:function(e){var n=t.gl.getUniformLocation(t.program,"uTextureMask");t.gl.uniform1i(n,e)},iResolution:function(e,n,r){var a=t.gl.getUniformLocation(t.program,"iResolution");t.gl.uniform3f(a,e,n,r)},flip:function(e){var n=t.gl.getUniformLocation(t.program,"flip");t.gl.uniform1f(n,e)},direction:function(e,n){var r=t.gl.getUniformLocation(t.program,"direction");t.gl.uniform2f(r,e,n)}},this.attributes={position:this.gl.getAttribLocation(this.program,"position")}}return e.prototype.bind=function(){this.gl.useProgram(this.program)},e.prototype.destroy=function(){this.gl.deleteProgram(this.program)},e}(),hf=function(){function e(e){this.parameters={blurStrength:.8,fixSegmentation:!0,fixSegmentationBlurStrength:.25,fixSegmentationIterations:8,alphaCutterLowerBound:.4,alphaCutterUpperBound:.6},this.$canvas=e;var t=this.$canvas.getContext("webgl");if(!t)throw new Error("getting ctx failed");this.gl=t;var n=this.gl;this.onresize=this.onresize.bind(this),this.onresize(),window.addEventListener("resize",this.onresize),this.pBlurFastWithMask=new pf(this.gl),this.pBackgroundComposer=new df(this.gl),this.pBlurFast=new ff(this.gl),this.pAlphaCutter=new lf(this.gl),this.vertices=[1,1,0,1,1,1,-1,0,1,0,-1,-1,0,0,0,-1,1,0,0,1],this.indices=[0,1,3,1,2,3];var r=n.createBuffer(),a=n.createBuffer();if(!r||!a)throw new Error("create buffer error");this.positionBuffer=r,this.indexBuffer=a,n.bindBuffer(n.ARRAY_BUFFER,this.positionBuffer),n.bufferData(n.ARRAY_BUFFER,new Float32Array(this.vertices),n.STATIC_DRAW),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.indices),n.STATIC_DRAW)}return e.prototype.onresize=function(){var e=this.$canvas,t=this.gl;e.width=e.width||e.clientWidth,e.height=e.height||e.clientHeight,t.viewport(0,0,e.width,e.height)},e.prototype.loadTexture=function(e){var t=this.gl,n=of(t);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),t.bindTexture(t.TEXTURE_2D,null),n},e.prototype.close=function(){var e=this,t=e.gl,n=e.positionBuffer,r=e.indexBuffer,a=e.pBackgroundComposer,i=e.pBlurFast,o=e.pBlurFastWithMask,c=e.pAlphaCutter;t.bindBuffer(t.ARRAY_BUFFER,null),t.deleteBuffer(n),t.deleteBuffer(r),t.useProgram(null),a.destroy(),i.destroy(),o.destroy(),c.destroy()},e.prototype.drawGeometry=function(){var e=this,t=e.gl,n=e.indexBuffer,r=e.indices;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n),t.drawElements(t.TRIANGLES,r.length,t.UNSIGNED_SHORT,0)},e.prototype.createTextureLayers=function(){var e=this.gl,t=this.$canvas,n=t.width,r=t.height;return[cf(e,n,r),cf(e,n,r)]},e.prototype.setGeometry=function(e,t){var n=this.gl,r=this.positionBuffer;n.bindBuffer(n.ARRAY_BUFFER,r),n.enableVertexAttribArray(e),n.vertexAttribPointer(e,3,n.FLOAT,!1,5*Float32Array.BYTES_PER_ELEMENT,0),void 0!==t&&(n.enableVertexAttribArray(t),n.vertexAttribPointer(t,2,n.FLOAT,!1,5*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT))},e.prototype.setParameters=function(e){Object.assign(this.parameters,e)},e.prototype.draw=function(e){var t,n,r=e.image,a=e.segmentationMask,i=e.background,o=e.resizedImage,c=this,s=c.gl,u=c.$canvas,l=c.parameters,d=c.pBlurFastWithMask,f=c.pBackgroundComposer,p=c.pBlurFast,h=c.pAlphaCutter,m=l.fixSegmentation,v=l.fixSegmentationBlurStrength,g=l.blurStrength,b=l.fixSegmentationIterations,_=l.alphaCutterLowerBound,y=l.alphaCutterUpperBound,E=u.width,O=u.height;s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT),s.viewport(0,0,E,O),s.disable(s.BLEND),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,!0);var w=this.loadTexture(r),C=this.loadTexture(a),S=i&&this.loadTexture(i),A=null,k=this.createTextureLayers(),j=this.createTextureLayers();if(m){p.bind(),this.setGeometry(p.attributes.position),p.uniforms.iResolution(E,O,0),p.uniforms.flip(0),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,C),p.uniforms.texture(0);for(var T=0,I=0;I<b;++I){var P=(b-I-1)*v,D=I%2==0?[P,0]:[0,P];(t=p.uniforms).direction.apply(t,D),s.bindFramebuffer(s.FRAMEBUFFER,j[T%2].framebuffer),this.drawGeometry(),s.bindTexture(s.TEXTURE_2D,j[T%2].texture),++T}h.bind(),this.setGeometry(h.attributes.aVertexCoord,h.attributes.aTextureCoord),h.uniforms.uLowerBound(_),h.uniforms.uUpperBound(y),h.uniforms.uAlphaTexture(0),s.bindFramebuffer(s.FRAMEBUFFER,j[T%2].framebuffer),this.drawGeometry(),A=j[T%2].texture}if(!S){var N=this.loadTexture(o);d.bind(),this.setGeometry(d.attributes.position),d.uniforms.iResolution(E,O,0),d.uniforms.flip(0),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,A||C),d.uniforms.uTextureMask(0),s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,N),d.uniforms.uTextureOriginal(1);var x=0;for(I=0;I<8;++I)P=(8-I-1)*g,D=I%2==0?[P,0]:[0,P],(n=d.uniforms).direction.apply(n,D),s.bindFramebuffer(s.FRAMEBUFFER,k[x%2].framebuffer),this.drawGeometry(),s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,k[x%2].texture),++x;S=k[(x-1)%2].texture,s.deleteTexture(N)}f.bind(),this.setGeometry(f.attributes.aVertexCoord,f.attributes.aTextureCoord),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,A||C),f.uniforms.uAlphaTexture(0),s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,S),f.uniforms.uBackgroundTexture(1),s.activeTexture(s.TEXTURE2),s.bindTexture(s.TEXTURE_2D,w),f.uniforms.uCameraFrameTexture(2),s.bindFramebuffer(s.FRAMEBUFFER,null),this.drawGeometry(),s.deleteTexture(w),s.deleteTexture(S),s.deleteTexture(C),s.deleteTexture(A),k.forEach((function(e){s.deleteFramebuffer(e.framebuffer),s.deleteTexture(e.texture)})),j.forEach((function(e){s.deleteFramebuffer(e.framebuffer),s.deleteTexture(e.texture)}))},e}(),mf=function(){function e(e){this._effect=e}return Object.defineProperty(e.prototype,"video",{set:function(e){this._video=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvas",{set:function(e){this._canvas=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"effect",{get:function(){return this._effect},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){},e}(),vf=function(e){function t(){var t=e.call(this,Zd.BACKGROUND)||this;return t._imageEdit=new Md,t._WebGlBlend=null,t._isChangedBackground=!1,t}return Nd(t,e),t.prototype.setBackgroundImage=function(e){return xd(this,void 0,void 0,(function(){var t,n;return Rd(this,(function(r){switch(r.label){case 0:return t=this,e?[4,Jd(e)]:[3,2];case 1:return n=r.sent(),[3,3];case 2:n=void 0,r.label=3;case 3:return t._backgroundImage=n,this._isChangedBackground=!0,[2]}}))}))},t.prototype._updateBackground=function(){return xd(this,void 0,void 0,(function(){var e,t,n,r;return Rd(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),this._backgroundImage?(t=(e=this)._canvas,[4,e._imageEdit.resize(this._backgroundImage,t.width,t.height)]):[3,2];case 1:n=a.sent(),this._backgroundImage=n,a.label=2;case 2:return this._isChangedBackground=!1,[3,4];case 3:return r=a.sent(),console.warn(r),[3,4];case 4:return[2]}}))}))},t.prototype.draw=function(e,t,n){try{this._WebGlBlend||(this._WebGlBlend=new hf(this._canvas)),this._isChangedBackground&&this._updateBackground(),this._WebGlBlend&&this._WebGlBlend.draw({image:e,segmentationMask:t,background:this._backgroundImage,resizedImage:n})}catch(e){console.warn(e)}},t.prototype.destroy=function(){e.prototype.destroy.call(this),this._WebGlBlend&&(this._WebGlBlend.close(),this._WebGlBlend=null)},t}(mf),gf=function(e){function t(){var t=e.call(this,Zd.BLUR)||this;return t._WebGLEffects=null,t._savedOptions=null,t}return Nd(t,e),t.prototype.draw=function(e,t,n){try{this._WebGLEffects||(this._WebGLEffects=new hf(this._canvas),console.log(this._canvas),this._savedOptions&&this._WebGLEffects.setParameters(this._savedOptions)),this._WebGLEffects.draw({image:e,segmentationMask:t,resizedImage:n})}catch(e){console.warn(e)}},t.prototype.setEffects=function(e){this._savedOptions=e,this._WebGLEffects&&this._WebGLEffects.setParameters(e)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this._WebGLEffects&&(this._WebGLEffects.close(),this._WebGLEffects=null)},t}(mf),bf=function(){function e(t){tt()(this,e),o()(this,"$c",void 0),o()(this,"gl",void 0),this.$c=t,this.gl=this.$c.getContext("webgl")}return rt()(e,[{key:"draw",value:function(){var e=this.gl;null==e||e.clearColor(0,0,0,0),null==e||e.clear(e.COLOR_BUFFER_BIT)}}]),e}(),_f=function(e){var t=e.onClick,n=e.id,r=e.content;return s.a.createElement("div",{className:palettePrefix("VirtualBackgroundSettingsCarousel__Item"),onClick:function(){return null==t?void 0:t(n)}},r)},yf=Object(c.memo)(_f);function Ef(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Of(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Of(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function Of(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}!function(e){e[e.FORWARD=1]="FORWARD",e[e.BACKWARD=-1]="BACKWARD"}(nf||(nf={}));var wf=function(e){var t=a()({},e);return s.a.createElement("svg",a()({width:"7",height:"10",viewBox:"0 0 7 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),s.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.20711 1.70711C6.59763 1.31658 6.59763 0.683418 6.20711 0.292893C5.81658 -0.0976311 5.18342 -0.0976311 4.79289 0.292893L0.792893 4.29289C0.402369 4.68342 0.402369 5.31658 0.792893 5.70711L4.79289 9.70711C5.18342 10.0976 5.81658 10.0976 6.20711 9.70711C6.59763 9.31658 6.59763 8.68342 6.20711 8.29289L2.91421 5L6.20711 1.70711Z",fill:"#99A2AD"}))},Cf=function(e){var t=a()({},e);return s.a.createElement("svg",a()({width:"7",height:"10",viewBox:"0 0 7 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),s.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.792893 1.70711C0.402369 1.31658 0.402369 0.683418 0.792893 0.292893C1.18342 -0.0976311 1.81658 -0.0976311 2.20711 0.292893L6.20711 4.29289C6.59763 4.68342 6.59763 5.31658 6.20711 5.70711L2.20711 9.70711C1.81658 10.0976 1.18342 10.0976 0.792893 9.70711C0.402369 9.31658 0.402369 8.68342 0.792893 8.29289L4.08579 5L0.792893 1.70711Z",fill:"#99A2AD"}))};function Sf(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var Af=!1,kf=s.a.createContext(null),jf=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var a,i=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?i?(a="exited",r.appearStatus="entering"):a="entered":a=t.unmountOnExit||t.mountOnEnter?"unmounted":"exited",r.state={status:a},r.nextCallback=null,r}m(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&"unmounted"===t.status?{status:"exited"}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?"entering"!==n&&"entered"!==n&&(t="entering"):"entering"!==n&&"entered"!==n||(t="exiting")}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),"entering"===t?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&"exited"===this.state.status&&this.setState({status:"unmounted"})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,a=this.props.nodeRef?[r]:[l.a.findDOMNode(this),r],i=a[0],o=a[1],c=this.getTimeouts(),s=r?c.appear:c.enter;!e&&!n||Af?this.safeSetState({status:"entered"},(function(){t.props.onEntered(i)})):(this.props.onEnter(i,o),this.safeSetState({status:"entering"},(function(){t.props.onEntering(i,o),t.onTransitionEnd(s,(function(){t.safeSetState({status:"entered"},(function(){t.props.onEntered(i,o)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:l.a.findDOMNode(this);t&&!Af?(this.props.onExit(r),this.safeSetState({status:"exiting"},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:"exited"},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:"exited"},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:l.a.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],i=a[0],o=a[1];this.props.addEndListener(i,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if("unmounted"===e)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,A(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return s.a.createElement(kf.Provider,{value:null},"function"==typeof n?n(e,r):s.a.cloneElement(s.a.Children.only(n),r))},t}(s.a.Component);function Tf(){}jf.contextType=kf,jf.propTypes={},jf.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Tf,onEntering:Tf,onEntered:Tf,onExit:Tf,onExiting:Tf,onExited:Tf},jf.UNMOUNTED="unmounted",jf.EXITED="exited",jf.ENTERING="entering",jf.ENTERED="entered",jf.EXITING="exiting";var If=jf,Pf=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.remove(r):"string"==typeof n.className?n.className=Sf(n.className,r):n.setAttribute("class",Sf(n.className&&n.className.baseVal||"",r)));var n,r}))},Df=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var r=t.resolveArguments(e,n),a=r[0],i=r[1];t.removeClasses(a,"exit"),t.addClass(a,i?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.resolveArguments(e,n),a=r[0],i=r[1]?"appear":"enter";t.addClass(a,i,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.resolveArguments(e,n),a=r[0],i=r[1]?"appear":"enter";t.removeClasses(a,i),t.addClass(a,i,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,r="string"==typeof n,a=r?""+(r&&n?n+"-":"")+e:n[e];return{baseClassName:a,activeClassName:r?a+"-active":n[e+"Active"],doneClassName:r?a+"-done":n[e+"Done"]}},t}m(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var r=this.getClassNames(t)[n+"ClassName"],a=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&a&&(r+=" "+a),"active"===n&&e&&e.scrollTop,r&&(this.appliedClasses[t][n]=r,function(e,t){e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"==typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)));var n,r}))}(e,r))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],r=n.base,a=n.active,i=n.done;this.appliedClasses[t]={},r&&Pf(e,r),a&&Pf(e,a),i&&Pf(e,i)},n.render=function(){var e=this.props,t=(e.classNames,A(e,["classNames"]));return s.a.createElement(If,S({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(s.a.Component);Df.defaultProps={classNames:""},Df.propTypes={};var Nf=Df,xf=function(e){var t=e.children,n=e.open,r=Object(c.useMemo)((function(){return{enter:"CallsFadeComponent--enter",enterActive:"CallsFadeComponent--enterActive",exit:"CallsFadeComponent--exit",exitActive:"CallsFadeComponent--exitActive"}}),[]);return s.a.createElement(Nf,{timeout:300,in:n,mountOnEnter:!0,unmountOnExit:!0,classNames:r},t)},Rf=function(e){var t=e.items,n=function(){var e=Object(c.useRef)(null),t=Object(c.useRef)(null),n=Object(c.useState)({isPrev:!1,isNext:!1}),r=p()(n,2),a=r[0],i=a.isPrev,o=a.isNext,s=r[1],u=Object(c.useRef)(0),l=Object(c.useRef)(null),d=Object(c.useCallback)((function(n){if(e.current&&t.current){var r=e.current,a=t.current,i=r.offsetWidth,o=a.offsetWidth,c=i<o;s({isPrev:c&&n>0,isNext:c&&n+i<o})}}),[]),f=Object(c.useCallback)((function(n){if(e.current&&t.current){var r=e.current,a=t.current,i=Math.floor(a.offsetWidth/a.childElementCount),o=Math.floor(r.offsetWidth/i),c=(Math.floor(r.scrollLeft/i)+n*o)*i;r.scrollTo({left:c,behavior:"smooth"})}}),[]),h=Object(c.useCallback)((function(){f(nf.FORWARD)}),[f]),m=Object(c.useCallback)((function(){f(nf.BACKWARD)}),[f]),v=Object(c.useCallback)((function(t,n){u.current&&cancelAnimationFrame(u.current);var r=function(){e.current&&d(e.current.scrollLeft)};n?r():u.current=requestAnimationFrame(r)}),[]);return Object(c.useEffect)((function(){var n;return"MutationObserver"in window&&(l.current=new MutationObserver((function(e){var t,n=Ef(e);try{for(n.s();!(t=n.n()).done;){"childList"===t.value.type&&v()}}catch(e){n.e(e)}finally{n.f()}})),t.current&&l.current.observe(t.current,{childList:!0})),null===(n=e.current)||void 0===n||n.addEventListener("scroll",v),v(null,!0),function(){var t,n;null===(t=e.current)||void 0===t||t.removeEventListener("scroll",v),null===(n=l.current)||void 0===n||n.disconnect(),l.current=null}}),[]),{$viewport:e,$carouselLayer:t,goNext:h,goPrev:m,isNext:o,isPrev:i}}(),r=n.$carouselLayer,a=n.$viewport,i=n.goNext,o=n.goPrev,u=n.isNext,l=n.isPrev;return s.a.createElement("div",{className:palettePrefix("VirtualBackgroundSettingsCarousel")},s.a.createElement("div",{ref:a,className:palettePrefix("VirtualBackgroundSettingsCarousel__viewport")},s.a.createElement("div",{ref:r,className:palettePrefix("VirtualBackgroundSettingsCarousel_carousel")},t.map((function(e){return s.a.createElement(yf,{key:e.id,id:e.id,onClick:e.onClick,content:e.content})})))),s.a.createElement(xf,{open:l},s.a.createElement("div",{className:palettePrefix(Object(d.c)("VirtualBackgroundSettingsCarousel__navigation","VirtualBackgroundSettingsCarousel__navigation--prev")),onClick:o},s.a.createElement(wf,null))),s.a.createElement(xf,{open:u},s.a.createElement("div",{className:palettePrefix(Object(d.c)("VirtualBackgroundSettingsCarousel__navigation","VirtualBackgroundSettingsCarousel__navigation--next")),onClick:i},s.a.createElement(Cf,null))))},Mf=Object(c.memo)(Rf),Lf=function(e){e.getTracks().forEach((function(e){return e.stop()}))},Bf=function(e){var t=Object(c.useState)(null),n=p()(t,2),r=n[0],a=n[1],i=Object(c.useState)(!1),o=p()(i,2),s=o[0],u=o[1],l=Object(c.useRef)(!1),d=function(){var e=Object(c.useRef)(!0),t=Object(c.useCallback)((function(){return e.current}),[]);return Object(c.useEffect)((function(){return function(){e.current=!1}}),[]),t}(),f=Object(c.useCallback)((function(){l.current||(u(!1),l.current=!0,navigator.mediaDevices.getUserMedia(e).then((function(e){d()?a(e):Lf(e)})).catch((function(e){a(null),u(e)})).finally((function(){l.current=!1})))}),[e]);return Object(c.useEffect)((function(){f();var e=function(){f()};return navigator.mediaDevices.addEventListener("devicechange",e),function(){navigator.mediaDevices.removeEventListener("devicechange",e)}}),[f]),Object(c.useEffect)((function(){return function(){r&&Lf(r)}}),[r]),{userStream:r,error:s,updateUserMediaStream:f}},Ff=function(e){var t=e.backgroundList,n=e.onDeleteBackground,r=e.onChooseBackground,a=e.chosen,i=e.onChangeVideoOption,o=e.videoOptions,u=Object(c.useContext)(Pn).getLang,l=Bf(sd),f=l.userStream,h=l.error,m=l.updateUserMediaStream,v=function(e){var t=e.userStream,n=Object(c.useRef)(null);return Object(c.useEffect)((function(){if(t&&n.current){var e=function(e){var t=e.getVideoTracks()[0].getSettings(),n=t.width,r=void 0===n?510:n,a=t.height;return{width:r,height:void 0===a?382:a}}(t),r=e.height,a=e.width;n.current.height=r,n.current.width=a,n.current.srcObject=t}}),[t]),{$video:n}}({userStream:f}).$video,g=function(e){var t=e.backgroundList,n=e.$srcElement,r=e.userStream,a=Object(c.useRef)(null),i=Object(c.useRef)(null),o=Object(c.useRef)(null),s=Object(c.useRef)(null),u=Object(c.useRef)(null);null===u.current&&(u.current=new Md);var l=Object(c.useRef)(null),d=Object(c.useRef)(Se.H.NONE),f=Object(c.useRef)(Se.H.NONE),h=Object(c.useRef)(void 0),m=Object(c.useRef)(null),v=Object(c.useRef)(!1),g=Object(c.useState)(!1),b=p()(g,2),_=b[0],y=b[1],E=Object(c.useCallback)((function(e){v.current="play"===e,y("play"===e)}),[]),O=Object(c.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];f.current=e,t||(d.current=e)}),[]),w=Object(c.useCallback)((function(){if(m.current&&clearTimeout(m.current),v.current)if(n.current&&i.current)try{i.current.requestSegmentation(n.current)}catch(e){console.error("[useVideoEffects][onRequestSegmentation][error]",e)}else m.current=setTimeout((function(){w()}),300)}),[]),C=Object(c.useCallback)((function(e){var n;switch(e){case Se.H.ADD:break;case Se.H.BLUR:O(e),h.current&&(h.current=void 0),v.current||(E("play"),w());break;case Se.H.NONE:O(e),h.current&&(h.current=void 0),null===(n=l.current)||void 0===n||n.draw(),E("stop");break;default:var r=t.find((function(t){return t.id===e}));if(r){O(e,!0);var i=ld(r);hd(i).then((function(t){if(!a.current)throw new Error("output canvas is not initialized");if(!u.current)throw new Error("ImageEdit class is not initialized");if(f.current!==e)throw new Error("Settings changed during load");var n=a.current,r=n.width,i=n.height;return u.current.resize(t,r,i)})).then((function(t){if(f.current!==e)throw new Error("Settings changed during load");O(e),h.current=t,v.current||(E("play"),w())})).catch(console.warn)}}}),[t]),S=Object(c.useCallback)((function(e,t,n){switch(d.current){case Se.H.ADD:case Se.H.NONE:break;case Se.H.BLUR:requestAnimationFrame((function(){var r;null===(r=s.current)||void 0===r||r.draw({image:t,segmentationMask:e,resizedImage:n}),v.current&&w()}));break;default:requestAnimationFrame((function(){var r;null===(r=o.current)||void 0===r||r.draw({image:t,segmentationMask:e,background:h.current,resizedImage:n}),v.current&&w()}))}}),[]);return Object(c.useEffect)((function(){a.current?(a.current.width=510,a.current.height=382):console.error("[useVideoEffects][on-mount] canvas is not initialized")}),[]),Object(c.useEffect)((function(){if(r){if(a.current){return o.current=new hf(a.current),s.current=new hf(a.current),l.current=new bf(a.current),new Promise((function(e,t){new ef({onReady:e,onError:function(){var e;(e=console).warn.apply(e,arguments),t()},onFrame:S}).createModel(!0)})).then((function(e){i.current=e})).catch((function(){i.current=null})),function(){var e,t,n;null===(e=o.current)||void 0===e||e.close(),null===(t=s.current)||void 0===t||t.close(),null===(n=i.current)||void 0===n||n.destroy(),o.current=null,s.current=null,i.current=null}}console.error("[useVideoEffects][on-userStream-update] canvas is not initialized")}}),[r]),{$canvas:a,onRequestSegmentation:w,onUpdateVideoEffectsSettings:C,isPlaying:_}}({backgroundList:t,$srcElement:v,userStream:f}),b=g.$canvas,_=g.onUpdateVideoEffectsSettings,y=g.isPlaying,E=Pd({backgroundList:t,onDeleteBackground:n,onUpdateVideoEffectsSettings:_,onChooseBackground:r,chosen:a}).carouselItems;return s.a.createElement("div",{className:palettePrefix("VirtualBackgroundSettings")},s.a.createElement("div",{className:palettePrefix("VirtualBackgroundSettings__userStream")},f&&s.a.createElement("video",{className:palettePrefix(Object(d.c)("Video",{"Video--visible":!y},"Video--contain",{"Video--mirrored":o[Se.I.IS_VIDEO_MIRRORED]})),ref:v,controls:!1,crossOrigin:"anonymous",playsInline:!0,muted:!0,autoPlay:!0},"Video tag is not supported"),s.a.createElement("canvas",{ref:b,className:palettePrefix(Object(d.c)("VirtualBackgroundSettings__userCanvas",{"Video--mirrored":o[Se.I.IS_VIDEO_MIRRORED]},{"VirtualBackgroundSettings__userCanvas--playing":y}))}),h&&s.a.createElement("div",{className:palettePrefix("VirtualBackgroundSettings__error")},s.a.createElement("div",null,u("profile_no_camera_access")),s.a.createElement("div",null,s.a.createElement(so,{className:palettePrefix("VirtualBackgroundSettings__error__btn"),size:"m",onClick:m},u("calls_button_allow_access"))))),s.a.createElement("div",{className:palettePrefix("VirtualBackgroundSettings__title")},u("calls_virtual_background")),s.a.createElement("div",{className:palettePrefix("VirtualBackgroundSettings__carousel")},s.a.createElement(Mf,{items:E})),s.a.createElement("div",{className:palettePrefix("VirtualBackgroundSettings__separator")}),s.a.createElement("div",{className:palettePrefix("VirtualBackgroundSettings__options")},s.a.createElement(Os,{checked:!!o[Se.I.IS_VIDEO_MIRRORED],name:Se.I.IS_VIDEO_MIRRORED,onChange:i},u("calls_mirror_display_view"))))},Hf=n(136);function Vf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Uf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vf(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var zf=function(){var e=we((function(e){return e.callData.callId})),t=we((function(e){return e.peer})),n=Object(c.useMemo)((function(){return qe(t)}),[t]);return{sendStatsData:Object(c.useCallback)((function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ot.logEvent(Uf({call_event_type:r,session_id:e,peer_id:t,is_group_call:n},a))}),[e,t,n])}},Gf=function(e){var t=e.photos,n=e.onSuccessPhotoUpload,r=_e(),a=zf().sendStatsData,i=Object(c.useRef)([]),o=Object(c.useState)(!1),s=p()(o,2),u=s[0],l=s[1];Object(c.useEffect)((function(){t.length||Ka().then((function(e){r({type:Se.Pc,photos:Wf(e.items)})}))}),[]);var d=Object(c.useCallback)((function(e){var n=t.find((function(t){return t.id===e}));n&&(i.current.push(n),r({type:Se.Oc,photoId:e}))}),[t]),f=Object(c.useCallback)((function(){var e=i.current;return i.current=[],function(e,t){var n=e.map((function(e){return t={photo_id:e.id},n=Ca(!0)(),Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"request",method:"photos.delete",params:t}),n("photos.delete",t).then(Ya);var t,n}));return Promise.allSettled(n).then((function(n){n.forEach((function(n,r){"fulfilled"===n.status&&t(Hf.a.CUSTOM_VIRTUAL_BACKGROUND_DELETED,{background_id:e[r].id})}))}))}(e,a)}),[a]),h=Object(c.useCallback)((function(){var e=i.current;i.current=[];var n=t.concat(e);r({type:Se.Pc,photos:Wf(n)})}),[t]),m=Object(c.useCallback)((function(e){return l(!0),function(e){var t=Ca(!0)(),n=Ca(!0)();return Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"request",method:"photos.getCallBackgroundsPhotoUploadServer"}),t("photos.getCallBackgroundsPhotoUploadServer",{}).then(Ya).then((function(t){Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"response",method:"photos.getCallBackgroundsPhotoUploadServer",response:t});var n=new FormData;return n.append("file1",e,e.name),Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"request",method:"[photoUploadUrl] ".concat(t.upload_url),formData:n}),fetch(t.upload_url,{method:"POST",body:n}).then((function(e){return e.json()})).then(Ya)})).then((function(e){return Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"response",method:"[photoUploadUrl]",json:e}),Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"request",method:"photos.saveBackgroundPhoto",json:e}),n("photos.saveBackgroundPhoto",{response_json:JSON.stringify(e)})})).then(Ya)}(e).then((function(e){var t=e[0];if(!t)throw new Error("Something wrong with uploaded photo");return r({type:Se.Nc,photo:t}),n(t),a(Hf.a.CUSTOM_VIRTUAL_BACKGROUND_ADDED,{background_id:t.id}),t})).finally((function(){l(!1)}))}),[n,a]);return{photos:t,onAddBackground:m,onDeleteBackground:d,onSaveSettings:f,onCancelSettings:h,loadingUpload:u}};function Wf(e){return e.sort((function(e,t){return e.date<t.date?1:-1}))}var qf=function(e){var t=e.children,n=e.onClose,r=e.onSubmit,a=Object(c.useContext)(Pn).getLang;return s.a.createElement(Ms,{onClose:n,title:a("calls_warning"),appearance:"blue",className:palettePrefix("UploadBackgroundErrorModal"),actionButtons:s.a.createElement(s.a.Fragment,null,s.a.createElement(so,{onClick:n,appearance:"tertiary"},a("calls_cancel")),s.a.createElement(so,{onClick:r},a("calls_retry_action")))},s.a.createElement("div",{className:palettePrefix("UploadBackgroundErrorModal__content")},t))},Kf=function(){var e=_e(),t=Object(c.useContext)(Pn).getLang,n=Object(c.useCallback)((function(){e({type:Se.Hc,data:Se.Ib})}),[]),r=Object(c.useCallback)((function(){e({type:Se.Hc,data:Se.Hb})}),[]);return s.a.createElement(qf,{onClose:n,onSubmit:r},t("calls_error_upload_background_image"))},Yf=function(e){var t=e.children,n=e.onClose,r=Object(c.useContext)(Pn).getLang;return s.a.createElement(Ms,{onClose:n,title:r("calls_upload_image_for_background"),appearance:"blue",className:palettePrefix("UploadBackgroundPhotoModal"),footerHint:r("calls_if_you_have_problems_with_upload"),actionButtons:""},t)},Zf=function(e){var t=e.onSubmit,n=e.loading,r=Object(c.useContext)(Pn).getLang,a=Object(c.useRef)(null),i=function(e){var t=e.$inputEl,n=e.onSubmit,r=Object(c.useState)({}),a=p()(r,2),i=a[0],o=a[1],s=Object(c.useState)(!1),u=p()(s,2),l=u[0],d=u[1];return{error:l,fileData:i,onClick:Object(c.useCallback)((function(){t.current&&(t.current.onchange=function(e){var t;d(!1);var r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(r){var a=new FileReader;a.onload=function(){var e=new Image;e.onload=function(){!function(e){return(e.width>=510||e.width>7e3)&&(e.height>=200||e.height>7e3)}(e)?d(!0):(o({file:r,image:e}),n&&n(r))},e.onerror=function(){return d(!0)},e.src=a.result},a.onerror=function(){return d(!0)},a.readAsDataURL(r)}},t.current.click())}),[])}}({$inputEl:a,onSubmit:t}),o=i.onClick,u=i.error,l=Object(c.useMemo)((function(){return"".concat(r("profile_oph_err_size")).replace("{sorry}","<b>".concat(r("global_sorry_error"),"</b>")).replace("{min}","200").replace("{max}","7000")}),[]);return s.a.createElement("div",{className:palettePrefix("UploadBackgroundPhoto")},s.a.createElement("input",{ref:a,type:"file",className:palettePrefix("UploadBackgroundPhoto__upload")}),u&&s.a.createElement("div",{className:palettePrefix("UploadBackgroundPhoto__error")},s.a.createElement("div",{className:palettePrefix("UploadBackgroundPhoto__error__left")}),s.a.createElement("div",{className:palettePrefix("UploadBackgroundPhoto__error__right"),dangerouslySetInnerHTML:{__html:l}})),s.a.createElement("div",{className:palettePrefix("UploadBackgroundPhoto__description"),dangerouslySetInnerHTML:{__html:r("calls_you_can_upload_description")}}),!n&&s.a.createElement("div",{className:palettePrefix("UploadBackgroundPhoto__button")},s.a.createElement(so,{onClick:o},r("calls_choose_file"))),n&&s.a.createElement("div",{className:palettePrefix("UploadBackgroundPhoto__progress")}))},Qf=function(e){var t=e.onAddBackground,n=e.loading,r=_e(),a=Object(c.useCallback)((function(){r({type:Se.Hc,data:Se.Ib})}),[]),i=Object(c.useCallback)((function(e){t(e).then(a).catch((function(){r({type:Se.Hc,data:Se.Gb})}))}),[a]);return s.a.createElement(Yf,{onClose:a},s.a.createElement(Zf,{loading:n,onSubmit:i}))},Jf=function(e){var t,n,r=e.SDK,a=Object(c.useState)(!1),i=p()(a,2),o=i[0],u=i[1],l=we((function(e){return e.popup})),d=we((function(e){return e.virtualBackgroundSettings.photos})),f=(t=_e(),{onClose:Object(c.useCallback)((function(){t({type:Se.Hc,data:null})}),[])}).onClose,h=(n=we((function(e){return e.me})),{userStream:we((function(e){var t;return null===(t=e.participants[n])||void 0===t?void 0:t.stream}))}).userStream,m=function(e){var t=e.photos,n=_e(),r=Object(c.useState)(dd),a=p()(r,2),i=a[0],o=a[1],s=Object(c.useCallback)((function(e){switch(e){case Se.H.BLUR:o(e);break;case Se.H.ADD:n({type:Se.Hc,data:Se.Hb});break;case Se.H.NONE:o(e);break;default:t.some((function(t){return t.id===e}))&&o(e)}}),[t]),u=Object(c.useRef)(null),l=Object(c.useCallback)((function(e){return u.current=e}),[]);return Object(c.useEffect)((function(){u.current&&(s(u.current.id),u.current=null)}),[s]),{chosen:i,setChosen:o,onClick:s,onSuccessPhotoUpload:l}}({photos:d}),v=m.chosen,g=m.setChosen,b=m.onClick,_=m.onSuccessPhotoUpload,y=Gf({photos:d,onSuccessPhotoUpload:_}),E=y.onCancelSettings,O=y.loadingUpload,w=y.onAddBackground,C=y.onDeleteBackground,S=y.onSaveSettings,A=function(e){var t=e.SDK,n=Object(c.useMemo)((function(){return{background:new vf,blur:new gf,effect:new rf({debug:!0})}}),[]);return Object(c.useEffect)((function(){return t.setVideoEffects(n.effect),function(){n.effect.destroy()}}),[]),{onSettingsChange:Object(c.useCallback)((function(e){switch(e.type){case Se.H.BACKGROUND:n.background.setBackgroundImage(e.value).then((function(){t.changeVideoEffect(n.background)}));break;case Se.H.BLUR:t.changeVideoEffect(n.blur);break;case Se.H.NONE:t.changeVideoEffect(null);break;case Se.H.ADD:}}),[])}}({SDK:r}).onSettingsChange;!function(e){var t=e.userStream,n=e.onSettingsChange;Object(c.useEffect)((function(){if(t){var e=dd();"number"==typeof e?pd(e).then((function(e){e&&n({type:Se.H.BACKGROUND,value:ld(e)})})):e===Se.H.BLUR&&n({type:Se.H.BLUR})}}),[t])}({onSettingsChange:A,userStream:h});var k=function(e){var t=e.chosen,n=e.settingsOpened,r=e.onSettingsChange,a=e.setChosen,i=e.photos,o=zf().sendStatsData,s=Object(c.useRef)(null);return Object(c.useEffect)((function(){n&&(s.current=t)}),[n]),{onApplySettings:Object(c.useCallback)((function(){s.current!==t&&(fd(t),"number"==typeof t?pd(t,i).then((function(e){e&&(r({type:Se.H.BACKGROUND,value:ld(e)}),o(Hf.a.CUSTOM_VIRTUAL_BACKGROUND_SELECTED,{background_id:e.id}))})):t===Se.H.BLUR?(r({type:Se.H.BLUR}),o(Hf.a.VIRTUAL_BACKGROUND_SELECTED,{background_id:-16})):t===Se.H.NONE&&(r({type:Se.H.NONE}),o(Hf.a.VIRTUAL_BACKGROUND_DISABLED)))}),[r,i,t,o]),onRestoreSettings:Object(c.useCallback)((function(){s.current&&a(s.current)}),[a])}}({chosen:v,onSettingsChange:A,settingsOpened:o,setChosen:g,photos:d}),j=k.onRestoreSettings,T=k.onApplySettings,I=wr(),P=I.videoOptions,D=I.onRestoreSettings,N=I.onSaveSettings,x=I.onChangeVideoOption;Object(c.useEffect)((function(){l!==Se.Ib||o||u(!0)}),[l]);var R=Object(c.useCallback)((function(){S(),f(),u(!1),T(),N()}),[S,f,T,N]),M=Object(c.useCallback)((function(){E(),f(),u(!1),j(),D()}),[E,f,j,D]);return s.a.createElement(s.a.Fragment,null,l===Se.Ib&&s.a.createElement(rd,{onClose:M,onSubmit:R},s.a.createElement(Ff,{chosen:v,backgroundList:d,onDeleteBackground:C,onChooseBackground:b,videoOptions:P,onChangeVideoOption:x})),l===Se.Hb&&s.a.createElement(Qf,{onAddBackground:w,loading:O}),l===Se.Gb&&s.a.createElement(Kf,null))},Xf=Object(c.memo)(Jf),$f=function(e){var t=a()({},e);return s.a.createElement("svg",a()({width:"28",height:"28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),s.a.createElement("circle",{cx:"14",cy:"14",r:"14",fill:"url(#CreateCallUserIconGradient)"}),s.a.createElement("path",{d:"M17.25 10.25a3.25 3.25 0 1 0-6.5 0 3.25 3.25 0 1 0 6.5 0ZM7.5 18.462v.7c0 .463.375.838.838.838h11.325a.838.838 0 0 0 .837-.837v-.701C20.5 15.769 16.17 15 14 15s-6.5.77-6.5 3.462Z",fill:"#fff"}),s.a.createElement("defs",null,s.a.createElement("linearGradient",{id:"CreateCallUserIconGradient",x1:"0",y1:"0",x2:"28.733",y2:".773",gradientUnits:"userSpaceOnUse"},s.a.createElement("stop",{stopColor:"#70B2FF"}),s.a.createElement("stop",{offset:"1",stopColor:"#5C9CE6"}))))},ep=function(e){var t=a()({},e);return s.a.createElement("svg",a()({width:"28",height:"28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),s.a.createElement("circle",{cx:"14",cy:"14",r:"14",fill:"url(#CreateCallWaitingHallIconGradient)"}),s.a.createElement("path",{d:"M13.85 6.85h1.072c1.529 0 2.095.127 2.657.428.493.263.88.65 1.143 1.143.3.562.428 1.129.428 2.657v5.842c0 1.528-.127 2.098-.428 2.66a2.74 2.74 0 0 1-1.143 1.14c-.562.3-1.128.43-2.657.43H13.85",stroke:"#fff",strokeWidth:"1.7",strokeLinecap:"round"}),s.a.createElement("path",{d:"M10.85 10.85 14 14l-3.15 3.15M6.85 14h6.6",stroke:"#fff",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),s.a.createElement("defs",null,s.a.createElement("linearGradient",{id:"CreateCallWaitingHallIconGradient",x1:"0",y1:"0",x2:"28.733",y2:".773",gradientUnits:"userSpaceOnUse"},s.a.createElement("stop",{stopColor:"#50C750"}),s.a.createElement("stop",{offset:"1",stopColor:"#32B332"}))))},tp=function(e){var t=a()({},e);return s.a.createElement("svg",a()({width:"28",height:"28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),s.a.createElement("circle",{cx:"14",cy:"14",r:"14",fill:"url(#CreateCallAnonymousIconGradient)"}),s.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m9.52 10.906.503-2.328A2 2 0 0 1 11.978 7h4.044a2 2 0 0 1 1.955 1.578l.503 2.328a.916.916 0 0 1 .015.094H20a1 1 0 1 1 0 2H8a1 1 0 1 1 0-2h1.505a.902.902 0 0 1 .015-.094Zm3.447 7a2.5 2.5 0 1 1-.217-1.497 4.984 4.984 0 0 1 2.5 0 2.5 2.5 0 1 1-.217 1.498 3.488 3.488 0 0 0-2.066 0Z",fill:"#fff"}),s.a.createElement("defs",null,s.a.createElement("linearGradient",{id:"CreateCallAnonymousIconGradient",x1:"0",y1:"0",x2:"28.733",y2:".773",gradientUnits:"userSpaceOnUse"},s.a.createElement("stop",{stopColor:"#99A2AD"}),s.a.createElement("stop",{offset:"1",stopColor:"#99A2AD"}))))},np=function(e){var t=e.actionButtons,n=e.onClose,r=e.ownerOptions,a=e.selectedOwnerId,i=e.waitingHall,o=e.allowAnon,c=e.onGroupSelectChange,u=e.onChangeWaitingHall,l=e.onChangeAllowAnon,d=s.a.useContext(Pn).getLang;return s.a.createElement(Rn,{className:palettePrefix("CreateCallByLinkModal"),onClose:n},s.a.createElement(si,{title:d("calls_create_call_by_link_title"),onClose:n}),s.a.createElement("div",{className:palettePrefix("CreateCallByLinkModal__content")},s.a.createElement("div",{className:palettePrefix("CreateCallByLinkModal__description")},d("calls_create_call_by_link_description")),s.a.createElement(di,null,s.a.createElement(bi,{border:!0,canBeHovered:!1,selectable:!1,icon:s.a.createElement($f,null),aside:s.a.createElement(vs,{className:palettePrefix("CreateCallByLinkModalOptions__longselect"),options:r,value:a,onChange:c,disabled:r.length<=1})},d("calls_create_call_by_link_by_name")),s.a.createElement(lc,{canBeHovered:!1,onClick:u,icon:s.a.createElement(ep,null),hint:d("calls_menu_waiting_hall_description"),aside:s.a.createElement(cc,{onChange:u,checked:i})},d("calls_menu_waiting_hall_title")),s.a.createElement(lc,{canBeHovered:!1,onClick:l,icon:s.a.createElement(tp,null),hint:d("calls_create_call_by_link_anon_hint"),aside:s.a.createElement(cc,{onChange:l,checked:o})},d("calls_create_call_by_link_anon")))),s.a.createElement(ui,{actionButtons:t}))},rp=function(e){var t=e.bridge,n=we((function(e){return e})),r=_e(),a=s.a.useContext(Pn).getLang,i=xt(n),o=Object(c.useState)(i.peerId),u=p()(o,2),l=u[0],d=u[1],f=Object(c.useState)([{value:i.peerId,label:i.name}]),h=p()(f,2),m=h[0],v=h[1],g=Object(c.useState)(!1),b=p()(g,2),_=b[0],y=b[1],E=Object(c.useState)(!0),O=p()(E,2),w=O[0],C=O[1];Object(c.useEffect)((function(){Ga().then((function(e){var t=Ue()(m);e.count>0&&(e.items.forEach((function(e){t.push({value:-e.id,label:e.name})})),v(t))}))}),[]);var S=Object(c.useCallback)((function(e){d(Number(e.selected.value))}),[]),A=Object(c.useCallback)((function(e){void 0!==e&&(e.preventDefault(),y(!_))}),[_]),k=Object(c.useCallback)((function(e){void 0!==e&&(e.preventDefault(),C(!w))}),[w]),j=Object(c.useCallback)((function(){r({type:Se.g,mode:Se.ub.READY})}),[]),T=Object(c.useCallback)((function(){var e,r={};w||(r[We.ConversationOption.REQUIRE_AUTH_TO_JOIN]=!0),_&&(r[We.ConversationOption.WAITING_HALL]=!0),t.startCall(!1,null!==(e=n.entryPoint)&&void 0!==e?e:Se.v.HISTORY_CREATE,!1,l>0?0:l,{conversationOptions:r,createLink:!0})}),[l,_,w]),I=[s.a.createElement(so,{key:"cancel",onClick:j,appearance:"tertiary"},a("calls_cancel")),s.a.createElement(so,{key:"call",onClick:T},a("calls_create_call_by_link"))];return s.a.createElement(np,{actionButtons:I,onClose:j,ownerOptions:m,selectedOwnerId:l,waitingHall:_,allowAnon:w,onGroupSelectChange:S,onChangeWaitingHall:A,onChangeAllowAnon:k})},ap=function(e){var t,n,r,i,o=e.SDK,u=e.bridge,l=e.onBeforeCallStart,d=e.onAfterCallFinish,f=e.tabIsMaster,h=e.navigateToConvo,m=e.callSounds,v=e.navigateToProfile,g=e.onHandCountChanged,b=e.onSuccessFeedback,_=e.okPublicKey,y=e.config,E=e.streamUrlExtractor,O=y.allowAddMembers,w=y.incomingCall,C=y.showFeedbackScreen,S=we((function(e){return e})),A=_e(),k=s.a.useCallback((function(){A({type:Se.g,mode:Se.ub.READY})}),[]),j=s.a.useState(null),T=p()(j,2),I=T[0],P=T[1],D=s.a.useCallback((function(e){A({type:Se.G,text:e})}),[]),N=s.a.useCallback((function(){return A({type:Se.g,mode:Se.ub.READY})}),[]);s.a.useEffect((function(){return S.mode===Se.ub.CALL?($e(),ul(),function(){ll()}):function(){}}),[S.mode]),function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=window.document,i=a.documentElement,o=i.requestFullscreen||i.webkitRequestFullscreen;if(o){var s=!i.requestFullscreen,u=s?a.webkitExitFullscreen:a.exitFullscreen,l=s?"webkitfullscreenchange":"fullscreenchange",d=s?"webkitFullscreenElement":"fullscreenElement";Object(c.useEffect)((function(){var e=function(){a.fullscreenElement?t&&t():n&&n()};return a.addEventListener(l,e),function(){return a.removeEventListener(l,e)}}),[]),Object(c.useEffect)((function(){e&&!a[d]?o.call(a.documentElement):!e&&a[d]&&u.call(a)}),r)}}(S.uiMode===Se.Ic.FULLSCREEN&&S.mode===Se.ub.CALL,(function(){var e,t;window.FastChat&&(P(window.FastChat.getFullScreenState()),window.FastChat.toggleFullScreenState(!0)),null!==(e=window)&&void 0!==e&&null!==(t=e.reforgedME)&&void 0!==t&&t.setCollapsed&&window.reforgedME.setCollapsed(!0,"call")}),(function(){var e,t;S.uiMode===Se.Ic.FULLSCREEN&&A({type:Se.k,mode:Se.Ic.DEFAULT}),window.FastChat&&(window.FastChat.toggleFullScreenState(I),P(null)),null!==(e=window)&&void 0!==e&&null!==(t=e.reforgedME)&&void 0!==t&&t.setCollapsed&&window.reforgedME.setCollapsed(!1,"call")}),[S.uiMode,S.mode]),Yu(o,S),s.a.useEffect((function(){if(S.mode===Se.ub.CALL&&($e(),S.callsCount%3==0)){var e=setTimeout((function(){return A({type:Se.pc,data:!0})}),1e3);return function(){return clearTimeout(e)}}}),[S.mode]);var x=Object(c.useMemo)((function(){return y.enableVirtualBackground&&function(){try{var e=window,t=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.captureStream&&e.CanvasCaptureMediaStreamTrack&&!0,n=Qd()[0]===Bd.Safari;return t&&!n}catch(e){return!1}}()}),[y.enableVirtualBackground]);return s.a.createElement(Vs,{SDK:o,mode:S.mode,onReset:N},s.a.createElement(s.a.Fragment,null,(w||f())&&s.a.createElement(ps,{onBeforeCallStart:l,onAfterCallFinish:d,callSounds:m}),S.localStatus!==We.ParticipantStatus.WAITING_HALL&&S.mode===Se.ub.CALL&&S.uiMode!==Se.Ic.COLLAPSED&&s.a.createElement(is,{SDK:o,isVirtualBackgroundSupported:x,navigateToConvo:h,navigateToProfile:v,onHandCountChanged:g}),S.localStatus===We.ParticipantStatus.WAITING_HALL&&S.mode===Se.ub.CALL&&S.uiMode!==Se.Ic.COLLAPSED&&s.a.createElement(nd,{SDK:o,navigateToConvo:h,navigateToProfile:v}),S.mode===Se.ub.INCOMING&&S.uiMode!==Se.Ic.COLLAPSED&&s.a.createElement(Un,{SDK:o,bridge:u}),S.localStatus!==We.ParticipantStatus.WAITING_HALL&&S.mode!==Se.ub.READY&&S.uiMode===Se.Ic.COLLAPSED&&s.a.createElement(ls,{SDK:o}),S.localStatus===We.ParticipantStatus.WAITING_HALL&&S.mode!==Se.ub.READY&&S.uiMode===Se.Ic.COLLAPSED&&s.a.createElement($l,{SDK:o}),S.mode===Se.ub.START&&S.uiMode!==Se.Ic.COLLAPSED&&s.a.createElement(Ql,null),C&&S.mode===Se.ub.FEEDBACK&&s.a.createElement(Vl,{onSuccessFeedback:b}),S.mode===Se.ub.CALL_BY&&s.a.createElement(Xl,{bridge:u}),S.mode===Se.ub.JOIN&&s.a.createElement(Pu,a()({},S.join,{bridge:u,withPopup:!0,onClose:k,onError:D,okPublicKey:_})),S.mode===Se.ub.CREATE_CALL&&s.a.createElement(rp,{bridge:u}),S.errorShown&&s.a.createElement(Mu,{title:null===(t=S.error)||void 0===t?void 0:t.title,text:null===(n=S.error)||void 0===n?void 0:n.text,handleType:null===(r=S.error)||void 0===r?void 0:r.handleType,callId:null===(i=S.error)||void 0===i?void 0:i.callId,bridge:u,onCloseFatal:k}),S.cautionShown&&s.a.createElement(Qu,{isIncoming:S.isIncoming}),S.groupCallSetup&&s.a.createElement(nc,{bridge:u,SDK:o}),S.isManagementOpen&&s.a.createElement(gc,{bridge:u,SDK:o,navigateToProfile:v,navigateToConvo:h,allowAddMembers:O}),S.popup===Se.zb&&s.a.createElement(Fs,{SDK:o}),S.popup===Se.Bb&&s.a.createElement(Ol,null),S.popup===Se.Db&&s.a.createElement(Dl,null),S.popup===Se.Eb&&s.a.createElement(Cl,null),S.popup===Se.Cb&&s.a.createElement(Al,{link:S.translation.link,linkExtractor:E}),S.popup===Se.yb&&s.a.createElement(Bu,{SDK:o}),S.popup===Se.Ab&&s.a.createElement(Il,{SDK:o}),S.popup===Se.Fb&&s.a.createElement(el,{SDK:o}),S.popup===Se.xb&&s.a.createElement(jl,{SDK:o}),x&&s.a.createElement(Xf,{SDK:o}),S.participantKick&&s.a.createElement(Rl,{SDK:o}),S.membersUnban&&s.a.createElement(zl,{SDK:o}),S.participantsManagement&&s.a.createElement(Xu,{SDK:o}),S.adminAssignment&&s.a.createElement(nl,{SDK:o}),S.isLoaderVisible&&s.a.createElement(rl,null)))};function ip(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function op(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ip(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ip(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cp(e,t,n,r,a){var i=r.reduce((function(r,i){switch(i.type){case Se.ib:if(!sp(e,i)){r.push(Promise.resolve());break}var o=_t(i),c=o,s=(d=i.payload,f=d.caller_info,h=f.first_name+" "+f.last_name,{peerId:+f.user_id,name:h,tab:h,photo:f.photo_400||f.photo_200,firstName:f.first_name,lastName:f.last_name,shortName:mt(f.first_name,f.last_name,h)});if(!o&&s.peerId<0)JSON.parse(lt(i.payload.payload)).with_join_link&&(c=!0);if(c){var u=o?function(e){var t=e.chat_info;return{peerId:2e9+t.chat_id,tab:t.title,name:t.title,photo:t.photo_400||t.photo_200}}(i.payload):Ze(a);if(t({type:Se.lb,conversation:u,members:[s],peerId:u.peerId,caller:o?u:s}),u.photo&&r.push(po(u.photo)),o){var l=function(e,t,n,r){return xa(r).then((function(e){var r=gt(e),a=p()(r,3),i=a[0],o=a[1],c=a[2];Uo(t,c),ho([i,o]).catch((function(e){n.eventHandlers.onError&&e&&n.eventHandlers.onError(e),Object(We.debugMessage)(We.DebugMessageType.ERROR,e),console.error(e)})),t({type:Se.lb,conversation:i,members:o})}))}(0,t,n,u.peerId);r.push(l)}}else t({type:Se.lb,conversation:s,members:[s],peerId:s.peerId});s.photo&&r.push(po(s.photo))}var d,f,h;return r}),[]);return Promise.all(i)}function sp(e,t){return function(e){return!!e.payload.call_id}(t)&&e.mode!==Se.ub.INCOMING&&e.mode!==Se.ub.CALL}function up(){return we((function(e){return e})).isLoaderVisible?s.a.createElement(rl,null):null}function lp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lp(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fp=function(e,t,n,r){var a,i=r.participantLimit,c=void 0===i?128:i,s=r.isDev,u=void 0!==s&&s,l=r.token,f=r.config,p=void 0===f?{isModalView:!0,withAnimation:!0,allowAddMembers:!1,debugLog:!1,incomingCall:!1,streaming:!0,streamingPrivacy:!0,fullHD:!1,anonymPhoto:!0,allowBanParticipant:!1,showFeedbackScreen:!1,enableVideoSlots:!1,videoSlotsCount:Se.Sc,allowCallByName:!1,nativeApp:!1,nativeAppJoin:!1,enableScreenTrack:!1,enableProducerScreenTrack:!1,allowWaitingHall:!1,allowPushToTalk:!1,badNetwork:!1,badNetworkP2P:!1,desktopAppNotification:!1,sferum:!1,enableVirtualBackground:!1}:f,h=r.localVideoResolution,m=void 0===h?Se.Vc.SD:h,v=r.friends,g=void 0===v?[]:v,b=r.friendsCache,_=r.privacySettings,y=r.ipSettingEnabled,E=r.pushToTalkEnabled,O=void 0!==E&&E,w=window.vk&&window.vk.id||e.peerId;return{anonymSecret:l,me:w,groupId:0,mode:Se.ub.READY,peer:0,participants:o()({},w,dp(dp({},e),{},{mediaSettings:{isAudioEnabled:!0,isVideoEnabled:!1,isScreenSharingEnabled:!1},statusData:{hand:{state:!1,ts:Date.now()}},networkStatus:1,roles:[],permissions:{audio:Se.tb.ALLOW,video:Se.tb.ALLOW,screenSharing:Se.tb.ALLOW}})),callData:{type:null,ts:null,localTimeStamp:null,conversation:n},imHash:t,participantLimit:c,isDev:u,popup:null,uiMode:Se.Ic.DEFAULT,orator:null,adminPinnedParticipant:null,screenSharingPinnedParticipant:null,screenSharingNeedDisableOratorModeAfterStop:!0,screenSharingOldPinnedParticipant:null,pinnedParticipant:null,screenSharers:{},isShownParticipantsAside:!0,isOratorMode:!0,chatMembers:[],groupMembers:[],groupMembersCount:0,preselectedIds:null,friends:g,speakers:{},speakersInHeader:[],chatUnreadCount:0,chatUpToMsgId:null,tooltips:{chat:!1,hand:!1,screenShare:!1,layout:!1,collapse:!1,fullscreen:!1},participantsAddedByMe:new Set,groupCallSetup:!1,isManagementOpen:!1,notification:null,errorShown:!1,cautionShown:!1,isLoaderVisible:!1,translation:{deferredId:null,isOn:!1},participantsManagement:null,adminAssignment:null,participantKick:null,membersUnban:null,noiseCancellation:Se.vb.NEURAL,config:p,localVideoResolution:m,conversationOptions:[],privacySettings:{callsIp:(null==_?void 0:_.callsIp)||"friends"},friendsCache:b||{},groupMembersCache:{},unableToCallGroupMembersIds:[],ipSettingEnabled:y||!1,localStatus:We.ParticipantStatus.WAITING,isIncoming:!1,pushToTalkEnabled:O,gridScrollPosition:0,gridScrollFirstVisible:0,oratorScrollPosition:0,oratorScrollFirstVisible:0,oratorScrollNumberOfVisible:5,callsCount:Number(null!==(a=d.y.getItem(Se.b))&&void 0!==a?a:0),shouldShowDesktopAppNotification:!1,virtualBackgroundSettings:{photos:[],videoOptions:{}}}},pp=function(e){var t,n;return{meId:null!==(t=e.meId)&&void 0!==t?t:0,currentCalls:[],historyCalls:[],deleteCallId:-1,profiles:{},joinLinks:{},isDev:null!==(n=e.isDev)&&void 0!==n&&n,error:null,loading:!0,showCreateCall:!1}};function hp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hp(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vp=!0;function gp(e,t){switch(t.type){case Se.lb:var n=t.conversation||e.callData.conversation,r=t.members;return mp(mp({},e),{},{participants:mp(mp({},e.participants),r.reduce((function(t,n){return n&&n.peerId&&(t[n.peerId]=mp(mp({mediaSettings:{isAudioEnabled:!1,isVideoEnabled:!1,isScreenSharingEnabled:!1}},e.participants[n.peerId]||{}),n)),t}),{})),callData:mp(mp({},e.callData),{},{conversation:n}),peer:"peerId"in t?t.peerId:e.peer,caller:"caller"in t?t.caller:e.caller});case Se.g:var a=t.mode!==Se.ub.READY&&t.data&&t.data.type?t.data.type:null;if(t.mode===Se.ub.READY||t.mode===Se.ub.FEEDBACK){var i,c,s,u=e.callData&&e.callData.conversation,l=fp(e.participants[e.me],e.imHash,u,{participantLimit:e.participantLimit,token:e.anonymSecret,config:e.config,localVideoResolution:e.localVideoResolution,friends:e.friends,privacySettings:e.privacySettings,friendsCache:e.friendsCache,ipSettingEnabled:e.ipSettingEnabled,isDev:e.isDev});if(t.mode===Se.ub.FEEDBACK)l.mode=Se.ub.FEEDBACK,l.lastCallData={callId:null!==(i=null===(c=e.callData)||void 0===c?void 0:c.callId)&&void 0!==i?i:"",peerId:null!==(s=e.peer)&&void 0!==s?s:0};return l.virtualBackgroundSettings=e.virtualBackgroundSettings,l}return mp(mp({},e),{},{mode:t.mode,peer:"peerId"in t?t.peerId:e.peer,callData:mp(mp({},e.callData),{},{type:a,ts:t.ts||e.callData.ts||null}),hangupType:e.hangupType,join:t.joinLink?{joinLink:t.joinLink}:e.join,entryPoint:t.entryPoint||e.entryPoint});case Se.P:return mp(mp({},e),{},{hangupType:t.data});case Se.Bc:return mp(mp({},e),{},{callData:mp(mp({},e.callData),{},{ts:t.data})});case Se.nb:return mp(mp({},e),{},{callData:mp(mp({},e.callData),{},{localTimeStamp:t.data})});case Se.Lb:var d=bp(e,t.participantId,{status:void 0,statusData:void 0,wasConnected:void 0});if(e.screenSharers[t.participantId]&&delete d.screenSharers[t.participantId],e.orator===t.participantId&&(d.orator=null),e.pinnedParticipant===t.participantId&&(d.pinnedParticipant=null),e.adminPinnedParticipant===t.participantId&&(d.adminPinnedParticipant=null),e.screenSharingPinnedParticipant===t.participantId&&(d.screenSharingPinnedParticipant=null),e.participantsAddedByMe.has(t.participantId)){var f=new Set(e.participantsAddedByMe);f.delete(t.participantId),d.participantsAddedByMe=f}return d;case Se.Zb:return mp(mp({},e),{},{chatMembers:t.data,chatData:t.conversation});case Se.O:return mp(mp({},e),{},{groupCallSetup:t.open,peer:t.peerId||e.peer||0,preselectedIds:t.preselectedIds});case Se.Hc:return mp(mp({},e),{},{popup:t.data||null});case Se.Lc:return mp(mp({},e),{},{imHash:t.hash});case Se.k:return mp(mp({},e),{},{uiMode:t.mode||Se.Ic.DEFAULT});case Se.Dc:return mp(mp({},e),{},{isOratorMode:t.isOratorMode});case Se.Ec:return mp(mp({},e),{},{isShownParticipantsAside:t.isShownParticipantsAside});case Se.ic:return mp(mp({},e),{},{orator:t.orator||null});case Se.kc:return mp(mp({},e),{},{pinnedParticipant:t.pinnedParticipant});case Se.Yb:return mp(mp({},e),{},{adminPinnedParticipant:t.data});case Se.oc:return mp(mp({},e),{},{screenSharingPinnedParticipant:t.screenSharingPinnedParticipant,screenSharingNeedDisableOratorModeAfterStop:t.screenSharingNeedDisableOratorModeAfterStop,screenSharingOldPinnedParticipant:t.screenSharingOldPinnedParticipant});case Se.qb:return mp(mp({},e),{},{isManagementOpen:t.isOpen,managementView:t.managementView});case Se.e:return mp(mp({},e),{},{callData:mp(mp({},e.callData),t.callData)});case Se.d:return mp(mp({},e),{},{notification:t.notification});case Se.jb:return mp(mp({},e),{},{mode:Se.ub.JOIN,join:t.data});case Se.c:return mp(mp({},e),{},{mode:Se.ub.CALL_BY,callByName:t.data});case Se.G:return mp(mp({},e),{},{mode:t.handleType===Se.J.FATAL?Se.ub.ERROR:e.mode,errorShown:!t.isClosed,error:{title:t.title,text:t.text,handleType:t.handleType,callId:t.callId}});case Se.j:var p=e.participants[t.participantId].statusData;return bp(e,t.participantId,{statusData:mp(mp({},p),t.data)});case Se.i:return bp(e,t.participantId,{roles:t.data});case Se.h:var h=e.participants[t.participantId];return bp(e,t.participantId,{permissions:mp(mp({},h.permissions),t.data)});case Se.nc:return mp(mp({},e),{},{screenSharers:mp(mp({},e.screenSharers),{},o()({},t.participantId,t.isScreenSharingEnabled))});case Se.cc:return mp(mp({},e),{},{friends:t.data,friendsCache:Nt(t.data)});case Se.fc:return mp(mp({},e),{},{groupMembersCount:t.groupMembersCount,groupMembers:t.groupMembers,unableToCallGroupMembersIds:t.unableToCallGroupMembersIds,groupMembersCache:Nt(t.groupMembers)});case Se.qc:var m=t.data,v=m.speakers,g=m.speakersInHeader;return vp?(e.speakers=v||e.speakers,e.speakersInHeader=g||e.speakersInHeader):e=mp(mp({},e),{},{speakers:v||e.speakers,speakersInHeader:g||e.speakersInHeader}),vp=!vp,e;case Se.Mc:return function(e,t){var n=_c(_c({},e),{},{participants:_c({},e.participants)});for(var r in t){var a;if(t.hasOwnProperty(r))if(void 0===(null===(a=e.participants[r])||void 0===a?void 0:a.status)&&t[r].status===We.ParticipantStatus.HANGUP)delete n.participants[r];else{var i=e.participants[r]||{},o=t[r],c=o.statusData?_c(_c({},i.statusData),o.statusData):i.statusData,s=i.wasConnected||o.status===We.ParticipantStatus.CONNECTED;n.participants[r]=_c(_c(_c({peerId:r},e.participants[r]),t[r]),{},{statusData:c,wasConnected:s})}}return n}(e,t.data);case Se.uc:return mp(mp({},e),{},{chatUnreadCount:t.chatUnreadCount,chatUpToMsgId:"chatUpToMsgId"in t?t.chatUpToMsgId:e.chatUpToMsgId});case Se.wc:return mp(mp({},e),{},{cautionShown:t.isOpen,isIncoming:t.isIncoming});case Se.xc:return mp(mp({},e),{},{isLoaderVisible:t.isLoaderVisible});case Se.sc:var b=t.tooltips?t.tooltips:Object.keys(e.tooltips).reduce((function(e,t){return e[t]=!1,e}),{});return mp(mp({},e),{},{tooltips:mp(mp({},e.tooltips),b)});case Se.rb:return mp(mp({},e),{},{participantsAddedByMe:(t.participants||[]).reduce((function(e,t){return e.add(t)}),new Set(e.participantsAddedByMe))});case Se.tc:return mp(mp({},e),{},{translation:mp(mp({},e.translation),t.data)});case Se.Kc:return mp(mp({},e),{},{anonymSecret:t.secret});case Se.Fc:return mp(mp({},e),{},{participantKick:t.data?{participant:t.data.participant,type:t.data.type}:null});case Se.Jc:return mp(mp({},e),{},{membersUnban:t.data?{members:t.data.members}:null});case Se.Gc:return mp(mp({},e),{},{participantsManagement:t.data?{mode:t.data.mode,participant:t.data.participant}:null});case Se.Cc:return mp(mp({},e),{},{adminAssignment:t.data?{participant:t.data.participant}:null});case Se.hc:return mp(mp({},e),{},{noiseCancellation:t.data});case Se.f:return mp(mp({},e),{},{localVideoResolution:t.data});case Se.ac:return mp(mp({},e),{},{conversationOptions:t.data});case Se.lc:return mp(mp({},e),{},{privacySettings:t.data});case Se.ec:return mp(mp({},e),{},{groupId:t.groupId,meGroup:t.meGroup});case Se.vc:return mp(mp({},e),{},{waitingHall:t.data});case Se.gc:return mp(mp({},e),{},{localStatus:t.data});case Se.mc:return mp(mp({},e),{},{pushToTalkEnabled:t.data});case Se.dc:return mp(mp({},e),{},{gridScrollPosition:t.position,gridScrollFirstVisible:t.firstVisible});case Se.jc:return mp(mp({},e),{},{oratorScrollPosition:t.position,oratorScrollFirstVisible:t.firstVisible,oratorScrollNumberOfVisible:t.numberOfVisible});case Se.pc:return mp(mp({},e),{},{shouldShowDesktopAppNotification:t.data});case Se.rc:return mp(mp({},e),{},{startOptions:t.data});case Se.Pc:return _p(e,{photos:Ue()(t.photos)});case Se.Nc:return _p(e,{photos:[t.photo].concat(Ue()(e.virtualBackgroundSettings.photos))});case Se.Oc:return _p(e,{photos:e.virtualBackgroundSettings.photos.filter((function(e){return e.id!==t.photoId}))});case Se.Qc:return _p(e,{videoOptions:t.videoOptions})}return e}function bp(e,t,n){return mp(mp({},e),{},{participants:mp(mp({},e.participants),{},o()({},t,mp(mp({},e.participants[t]),n)))})}function _p(e,t){return mp(mp({},e),{},{virtualBackgroundSettings:mp(mp({},e.virtualBackgroundSettings),t)})}function yp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ep(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yp(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Op(e,t){switch(t.type){case Se.gb.DELETE_CALL:return Ep(Ep({},e),{},{deleteCallId:t.data});case Se.gb.SET_CURRENT_CALLS:return Ep(Ep({},e),{},{currentCalls:t.data});case Se.gb.SET_HISTORY_CALLS:return Ep(Ep({},e),{},{historyCalls:t.data});case Se.gb.SET_PROFILES:return Ep(Ep({},e),{},{profiles:Ep(Ep({},e.profiles),t.data)});case Se.gb.SET_URLS:return Ep(Ep({},e),{},{joinLinks:Ep(Ep({},e.joinLinks),t.data)});case Se.gb.ERROR:return Ep(Ep({},e),{},{error:t.data});case Se.gb.SET_LOADING:return Ep(Ep({},e),{},{loading:t.data});case Se.gb.SET_SHOW_CREATE_BUTTON:return Ep(Ep({},e),{},{showCreateCall:t.data})}return e}var wp=function(e){var t=e.onClose,n=e.actionButtons,r=e.text,a=Object(c.useContext)(Pn).getLang;return s.a.createElement(Ms,{className:palettePrefix("DeleteCallModal"),title:a("calls_history_delete_modal_title"),actionButtons:n,onClose:t,appearance:"blue",hasScroll:!1},s.a.createElement("div",{className:palettePrefix("DeleteCallModal__content")},r))};function Cp(e){var t=e.chat,n=e.user_ids,r=e.items,a=0;if(t)t.id&&(a=Se.l+t.id);else if(n.length)a=n[0];else{var i;null!=r&&r.length&&null!==(i=r[0])&&void 0!==i&&i.chat&&r[0].chat.id&&(a=Se.l+r[0].chat.id)}return a}function Sp(e,t){var n=e.chat,r=e.user_ids,a=e.items,i=void 0;if(!n)if(r.length){var o=r[0];o in t&&(i=t[o])}else{var c,s;if(null!=a&&a.length&&null!==(c=a[0])&&void 0!==c&&c.chat)n=null===(s=a[0])||void 0===s?void 0:s.chat}return{member:i,chat:n}}var Ap=function(){var e=_e(),t=s.a.useContext(Pn),n=t.getLang,r=t.langShortDateTime,a=we((function(e){return e})),i=a.deleteCallId,o=a.historyCalls,u=a.profiles,l=a.currentCalls,d=i in o?o[i]:null,f=Object(c.useCallback)((function(){e({type:Se.gb.DELETE_CALL,data:-1})}),[]),p=Object(c.useCallback)((function(){if(null!=d&&d.type&&"merged"===(null==d?void 0:d.type)&&null!=d&&d.items){var t=d.items.reduce((function(e,t){return null!=t&&t.id&&e.push(t.id),e}),[]);t.length>0&&Object(We.removeHistoryRecords)(t)}else null!=d&&d.id&&Object(We.removeHistoryRecords)([d.id]);o.splice(i,1),e({type:Se.gb.SET_HISTORY_CALLS,data:o}),f()}),[d]),h=Object(c.useCallback)((function(){if(null!=d&&d.call_id){Ba(d.call_id);var t=l.filter((function(e){return e.call_id!==d.call_id}));e({type:Se.gb.SET_CURRENT_CALLS,data:t})}p()}),[d]),m=[];if(null!=d&&d.can_finish_call&&(m=m.concat([s.a.createElement(so,{onClick:function(){h()},key:"finishAndDeleteCall",appearance:"secondary"},n("calls_history_delete_and_finish_call_button"))])),m=m.concat([s.a.createElement(so,{onClick:function(){p()},key:"deleteCall"},n("calls_history_delete_call_button"))]),!d)return s.a.createElement(s.a.Fragment,null);var v=Sp(d,u),g=v.member,b=v.chat;if(!g&&!b)return s.a.createElement(s.a.Fragment,null);var _="";if(b)_=n("calls_history_delete_group_call").replace("%name",b.title);else{if(!g)return s.a.createElement(s.a.Fragment,null);var y=d.is_missed,E=d.is_inbound;_=n(y&&E?"calls_history_delete_missed_call":!y&&E?"calls_history_delete_inbound_call":y&&!E?"calls_history_delete_declined_call":"calls_history_delete_outbound_call"),_=String(_).replace("%name",String(g.nameGen))}var O=null!=d&&d.finished_at?r(d.finished_at):"";return _=_.replace("%date",O),s.a.createElement(wp,{onClose:f,actionButtons:m,text:_})},kp=function(e){var t=e.narrow,n=e.children;return s.a.createElement("div",{className:palettePrefix("wide_column_left")},s.a.createElement("div",{className:palettePrefix("narrow_column_wrap")},s.a.createElement("div",{className:palettePrefix("narrow_column"),id:"narrow_column"},t)),s.a.createElement("div",{className:palettePrefix("wide_column_wrap")},s.a.createElement("div",{className:palettePrefix("wide_column"),id:"wide_column"},n)))},jp=function(e){var t=e.tabs,n=e.activeTab,r=e.onTabClick,a=e.loading,i=void 0!==a&&a,o=window.uiRightMenu,u=Object(c.useCallback)((function(e,a){e.preventDefault();var i=t.find((function(e){return e.id===a}));if(i){if(i.id===n)return;var c=i.ref.current;o.switchMenu(c),r(a,i.href)}}),[n]);return Object(c.useEffect)((function(){var e=t.find((function(e){return e.id===n}));if(e){var r=e.ref.current;o.switchMenu(r)}}),[n]),Object(c.useEffect)((function(){var e=t.find((function(e){return e.id===n}));if(e){var r=e.ref.current;i?o.showProgress(r):o.hideProgress(r)}}),[i,n]),s.a.createElement("div",{className:palettePrefix("page_block ui_rmenu ui_rmenu_pr"),role:"list"},t.map((function(e){if(e.separator)return s.a.createElement("div",{key:e.id,className:palettePrefix("ui_rmenu_sep")});var t=e,n=t.id,r=t.ref,a=t.href,i=t.label,o=t.parentTab;return s.a.createElement("a",{key:n,className:palettePrefix(Object(d.c)("ui_rmenu_item",{ui_rmenu_subitem:!!o})),ref:r,href:a,onClick:function(e){return u(e,n)}},s.a.createElement("span",null,i))})),s.a.createElement("div",{className:palettePrefix("ui_rmenu_slider _ui_rmenu_slider")}))},Tp=["className","title","isSaved","savedTitle","extra","count","children"],Ip=function(e){var t=e.className,n=void 0===t?"":t,r=e.title,i=void 0===r?"":r,o=e.isSaved,u=void 0!==o&&o,l=e.savedTitle,f=void 0===l?"":l,h=e.extra,m=void 0===h?"":h,v=e.count,g=void 0===v?"":v,b=e.children,_=ke()(e,Tp),y=Object(c.useState)(!1),E=p()(y,2),O=E[0],w=E[1];Object(c.useEffect)((function(){f&&w(u)}),[u]);var C=null;if(i){var S=null;f&&(S=s.a.createElement("div",{className:palettePrefix(Object(d.c)("PageBlock__savedTitle",{"PageBlock__savedTitle--shown":O}))},f));var A=null;m&&(A=s.a.createElement("div",{className:palettePrefix(Object(d.c)("PageBlock__extraTitle"))},m));var k=null;g&&(k=s.a.createElement("div",{className:palettePrefix(Object(d.c)("PageBlock__headerCount"))},g)),C=s.a.createElement("h2",{className:palettePrefix("PageBlock__header")},s.a.createElement("div",{className:palettePrefix("PageBlock__headerTitle")},i,k),A,S)}return s.a.createElement("div",a()({className:palettePrefix(Object(d.c)("PageBlock",n))},_),C,b)},Pp=function(e){var t=a()({},e);return s.a.createElement("svg",a()({width:"28",height:"28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),s.a.createElement("rect",{width:"28",height:"28",rx:"14",fill:"url(#CreateCallIconGradientA)"}),s.a.createElement("rect",{x:".25",y:".25",width:"27.5",height:"27.5",rx:"13.75",stroke:"#000",strokeOpacity:".08",strokeWidth:".5",strokeLinecap:"round",strokeLinejoin:"round"}),s.a.createElement("rect",{width:"28",height:"28",rx:"14",fill:"url(#CreateCallIconGradientB)"}),s.a.createElement("rect",{x:".25",y:".25",width:"27.5",height:"27.5",rx:"13.75",stroke:"#000",strokeOpacity:".08",strokeWidth:".5"}),s.a.createElement("path",{d:"M9.622 9.405c-1.704 1.875-.794 4.775 1.708 7.288 2.449 2.46 5.48 3.38 7.274 1.71.981-.912.836-2.53-.376-3.61-1.096-.931-2.819-1.092-3.917-.062-.37-.311-.684-.679-1.023-1.023.949-.995.946-2.727-.032-3.896-1.1-1.313-2.767-1.36-3.634-.407Zm2.83 1.08c.617.738.7 1.914-.029 2.602-.367.33-.725.525.602 1.874 1.432 1.456 1.61.945 1.983.555.586-.589 1.733-.643 2.522.06.872.777.778 1.671.36 2.06-1.295 1.204-3.773.37-5.817-1.682-2.043-2.053-2.95-4.44-1.675-5.843.296-.326 1.224-.617 2.054.374ZM17.792 8.167c.29 0 .525.235.525.525v.991h.991a.525.525 0 1 1 0 1.05h-.991v.992a.525.525 0 0 1-1.05 0v-.992h-.992a.525.525 0 1 1 0-1.05h.992v-.991c0-.29.235-.525.525-.525Z",fill:"#fff"}),s.a.createElement("defs",null,s.a.createElement("linearGradient",{id:"CreateCallIconGradientA",x1:"-14",y1:"14",x2:"14",y2:"42",gradientUnits:"userSpaceOnUse"},s.a.createElement("stop",{stopColor:"#FFB73D"}),s.a.createElement("stop",{offset:"1",stopColor:"#FFA000"})),s.a.createElement("linearGradient",{id:"CreateCallIconGradientB",x1:"-14",y1:"14",x2:"14",y2:"42",gradientUnits:"userSpaceOnUse"},s.a.createElement("stop",{stopColor:"#70B2FF"}),s.a.createElement("stop",{offset:"1",stopColor:"#5C9CE6"}))))},Dp=function(e){var t=e.onCreateCallClick,n=Object(c.useContext)(Pn).getLang;return s.a.createElement(Ip,{title:"",isSaved:!1,savedTitle:"",className:palettePrefix("")},s.a.createElement(di,{className:palettePrefix("CallHistoryScreenCreateCall"),border:!1},s.a.createElement(bi,{chevron:!1,selectable:!1,icon:s.a.createElement(Pp,null),aside:s.a.createElement(so,{onClick:t,size:"s"},n("calls_page_call_by_link_create"))},s.a.createElement("div",{className:palettePrefix("CallHistoryScreenCreateCall--title")},n("calls_page_call_by_link_header")))))},Np=function(e){var t=e.showCreateCall,n=e.onCreateCallClick,r=e.activeMenuItem,a=e.menuItems,i=e.onMenuItemClick,o=e.loading,c=e.children;return s.a.createElement(kp,{narrow:s.a.createElement(jp,{tabs:a,activeTab:r,onTabClick:i,loading:o})},s.a.createElement("div",{className:palettePrefix("CallHistoryScreen")},t&&s.a.createElement(Dp,{onCreateCallClick:function(){return n(Hf.f.HISTORY_CREATE)}}),c))};function xp(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Rp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rp(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function Rp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mp(e,t){var n,r=[],a=[],i=xp(t);try{for(i.s();!(n=i.n()).done;){var o,c,s,u,l=n.value;if(null!=l&&l.profiles&&(null===(o=l.profiles)||void 0===o?void 0:o.length)>0&&(r=[].concat(Ue()(r),Ue()(l.profiles))),"anonyms"in l)null!=l&&l.anonyms&&(null===(u=l.anonyms)||void 0===u?void 0:u.length)>0&&(r=[].concat(Ue()(r),Ue()(l.anonyms)));null!=l&&l.groups&&(null===(c=l.groups)||void 0===c?void 0:c.length)>0&&(r=[].concat(Ue()(r),Ue()(l.groups))),null!=l&&l.items&&(null===(s=l.items)||void 0===s?void 0:s.length)>0&&(a=[].concat(Ue()(a),Ue()(l.items)))}}catch(e){i.e(e)}finally{i.f()}return r.length&&function(e,t){var n=t.reduce((function(e,t){var n=String(t.id);if(!(n in e)){var r=Pt(t);r.nameGen="".concat(t.first_name_gen," ").concat(t.last_name_gen),e[n]=r}return e}),{});e({type:Se.gb.SET_PROFILES,data:n})}(e,r),a.length&&function(e,t){var n=t.reduce((function(e,t){var n=0;n="type"in t?Cp(t):function(e){var t=0;return null!=e&&e.chat?t=Se.l+e.chat.id:e.user_ids.length&&(t=e.user_ids[0]),t}(t);var r=String(n);return r in e||null!=t&&t.join_link&&(e[r]=null==t?void 0:t.join_link),e}),{});e({type:Se.gb.SET_URLS,data:n})}(e,a),Promise.resolve(a.length>0)}function Lp(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka,t={fields:e};return Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"request",method:"messages.getCurrentCalls",data:t}),Ca()()("messages.getCurrentCalls",t).then((function(e){return Object(We.debugMessage)(We.DebugMessageType.DEBUG,{type:"response",method:"messages.getCurrentCalls",response:e}),e}))}().then((function(t){var n,r=null!==(n=null==t?void 0:t.items)&&void 0!==n?n:[];return r.length>0&&e({type:Se.gb.SET_CURRENT_CALLS,data:r}),t}))}function Bp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"all",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],o=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return qa(t,n,r,a).then((function(t){var n,r=null!==(n=null==t?void 0:t.items)&&void 0!==n?n:[],a=r.length>0||o,c=[];return r.length>0&&(c=[].concat(Ue()(i),Ue()(r))),a&&e({type:Se.gb.SET_HISTORY_CALLS,data:c}),t}))}var Fp=function(e){return{onCreateCallClick:Object(c.useCallback)((function(t){e.showCreateCallByLinkPopup(t)}),[e]),onJoin:Object(c.useCallback)((function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;e.showStartCallModal(n,t,r)}),[e])}},Hp=function(){var e=we((function(e){return e})).loading,t=_e();return{loading:e,setLoading:Object(c.useCallback)((function(e){t({type:Se.gb.SET_LOADING,data:e})}),[])}},Vp=n(646),Up=n.n(Vp),zp=!1;function Gp(){zp||(Object(dr.a)(new ur.a({id:"arrow_down_left_12",viewBox:"0 0 12 12",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" id="arrow_down_left_12"><path d="M3 10a1 1 0 01-1-1V4a1 1 0 012 0v2.586l4.293-4.293a1 1 0 011.414 1.414L5.415 8.001 8 8a1 1 0 010 2z" fill="currentColor" /></symbol>'})),zp=!0)}var Wp=function(e){return Object(dr.b)((function(){Gp()}),[]),s.a.createElement(fr.a,Object(lr.assign)({},e,{viewBox:"0 0 12 12",id:"arrow_down_left_12",width:isNaN(e.width)?12:+e.width,height:isNaN(e.height)?12:+e.height}))};Wp.mountIcon=Gp;var qp=Wp,Kp=!1;function Yp(){Kp||(Object(dr.a)(new ur.a({id:"arrow_up_right_12",viewBox:"0 0 12 12",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" id="arrow_up_right_12"><path d="M9 2a1 1 0 011 1v5a1 1 0 01-2 0V5.414L3.707 9.707a1 1 0 01-1.414-1.414l4.292-4.294L4 4a1 1 0 010-2z" fill="currentColor" /></symbol>'})),Kp=!0)}var Zp=function(e){return Object(dr.b)((function(){Yp()}),[]),s.a.createElement(fr.a,Object(lr.assign)({},e,{viewBox:"0 0 12 12",id:"arrow_up_right_12",width:isNaN(e.width)?12:+e.width,height:isNaN(e.height)?12:+e.height}))};Zp.mountIcon=Yp;var Qp=Zp,Jp=n(1336),Xp=!1;function $p(){Xp||(Object(dr.a)(new ur.a({id:"delete_outline_20",viewBox:"0 0 20 20",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="delete_outline_20"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.697 6.502a.75.75 0 00-.695.801l.5 7a.75.75 0 001.496-.106l-.5-7a.75.75 0 00-.801-.695zm4.606 0a.75.75 0 01.695.801l-.5 7a.75.75 0 01-1.496-.106l.5-7a.75.75 0 01.801-.695z" fill="currentColor" /><path fill-rule="evenodd" clip-rule="evenodd" d="M2.25 3a.75.75 0 000 1.5h1.066l.958 10.44c.045.489.083.898.14 1.233.06.35.15.675.331.98.279.47.691.846 1.185 1.08.32.153.652.213 1.006.24.338.027.75.027 1.24.027h3.647c.491 0 .903 0 1.24-.026.355-.028.687-.088 1.007-.24a2.75 2.75 0 001.185-1.081c.18-.305.27-.63.33-.98.058-.335.096-.744.14-1.233l.96-10.44h1.065a.75.75 0 000-1.5h-4.587a3.251 3.251 0 00-6.326 0H2.25zm3.516 11.774c.048.525.08.876.127 1.145.044.26.093.385.142.469.127.213.314.384.539.49.087.043.216.08.48.1.272.021.624.022 1.151.022h3.59c.527 0 .879 0 1.152-.022.263-.02.392-.057.48-.1a1.25 1.25 0 00.538-.49c.05-.084.098-.209.142-.469.046-.27.08-.62.127-1.145L15.178 4.5H4.822l.944 10.274zM10 2c-.698 0-1.3.409-1.582 1h3.164A1.75 1.75 0 0010 2z" fill="currentColor" /></symbol>'})),Xp=!0)}var eh=function(e){return Object(dr.b)((function(){$p()}),[]),s.a.createElement(fr.a,Object(lr.assign)({},e,{viewBox:"0 0 20 20",id:"delete_outline_20",width:isNaN(e.width)?20:+e.width,height:isNaN(e.height)?20:+e.height}))};eh.mountIcon=$p;var th,nh=eh,rh=n(1337),ah=n(1338);!function(e){e[e.AUDIO=0]="AUDIO",e[e.VIDEO=1]="VIDEO",e[e.MESSAGE=2]="MESSAGE",e[e.DELETE=3]="DELETE"}(th||(th={}));var ih=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n="";if(t){var r=new Date(t);if(Object(d.q)(r)){var a=Object(d.x)(r.getMinutes());n="".concat(r.getHours(),":").concat(a)}else n=t?e(t,!1):""}return n},oh=function(e,t,n){return{text:s.a.createElement("div",{className:palettePrefix("CallHistoryListItem--dropdownItem")},e,s.a.createElement("div",{className:palettePrefix("CallHistoryListItem--dropdownItemText")},t)),onClick:n}},ch=function(e){var t=e.index,n=e.call,r=e.onMenuItemClick,a=e.selectedOwnerId,i=void 0===a?0:a,o=we((function(e){return e})).profiles,u=Object(c.useContext)(Pn),l=u.getLang,f=u.langShortDate,p=Sp(n,o),h=p.member,m=p.chat,v=Object(c.useMemo)((function(){var e=n.type,a=n.items,i=n.started_at,o=n.finished_at,c="";i&&o&&(c=Object(d.h)(Math.floor((o-i)/1e3)));var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!e)return{date:"",time:""};var t=new Date(e),n=t.getDate(),r=t.getMonth()+1,a=t.getFullYear(),i=t.getHours(),o=t.getMinutes();return{date:[Object(d.x)(n),Object(d.x)(r),a].join("."),time:[Object(d.x)(i),Object(d.x)(o)].join(":")}}(o),p=u.date,v=u.time,g=m?function(e,t,n,r){var a=n.title,i=void 0===a?"":a,o=n.photo_100,c=void 0===o?"":o,s=n.id,u=void 0===s?0:s,l=r.finished_at,d=void 0===l?0:l,f=u?"/im?sel=c"+u:"",p=e("calls_history_call_type_group_hint"),h=ih(t,d);return{title:i,href:f,hint:h?e("calls_history_call_type_group_time_hint").replace("{time}",h):"",photo:c,status:p}}(l,f,m,n):h?function(e,t,n,r){var a=n.name,i=void 0===a?"":a,o=n.photo,c=void 0===o?"":o,u=n.id,l=void 0===u?0:u,f=n.link,p=void 0===f?"":f,h=r.is_inbound,m=void 0!==h&&h,v=r.finished_at,g=void 0===v?0:v,b=r.reach_status,_=void 0===b?"":b,y=m?s.a.createElement(qp,{className:palettePrefix("CallHistoryListItem--hintIcon")}):s.a.createElement(Qp,{className:palettePrefix("CallHistoryListItem--hintIcon")}),E=ih(t,g),O="",w=!1;return m?"CANCELLED_BY_INITIATOR"===_?(O=e("calls_history_status_inb_cancelled_by_initiator"),w=!0):O=e("REACHED"===_?"calls_history_status_inb_reached":"REJECTED_BY_RECEIVER"===_?"calls_history_status_inb_reject_by_receiver":"calls_history_status_inb"):"CANCELLED_BY_INITIATOR"===_?O=e("calls_history_status_out_cancelled_by_initiator"):"REACHED"===_?O=e("calls_history_status_out_reached"):"REJECTED_BY_RECEIVER"===_?(O=e("calls_history_status_out_reject_by_receiver"),w=!0):O=e("calls_history_status_out"),{title:i,href:p||"/id"+l,hint:s.a.createElement("div",{className:palettePrefix(Object(d.c)("CallHistoryListItem",{"CallHistoryListItem--important":w}))},y,e("calls_history_call_list_item_description").replace("%type",O).replace("%time",E)),photo:c,status:O}}(l,f,h,n):{},b=g.title,_=void 0===b?"":b,y=g.photo,E=void 0===y?"":y,O=g.href,w=void 0===O?"":O,C=g.hint,S=void 0===C?"":C,A=g.status,k=void 0===A?"":A;_+="merged"===e?" (".concat(null==a?void 0:a.length,")"):"";var j=Cp(n),T=[],I=function(e){return function(){return r(n,e,t)}};return T.push({onClick:function(){},noHover:!0,text:s.a.createElement("div",{className:palettePrefix("CallHistoryListItem--dropdownItemStatus")},s.a.createElement("div",{className:palettePrefix("CallHistoryListItem--dropdownItemStatusFinishTime")},s.a.createElement("div",{className:palettePrefix("CallHistoryListItem--dropdownItemStatusDate")},p),s.a.createElement("div",{className:palettePrefix("CallHistoryListItem--dropdownItemStatusTime")},v)),s.a.createElement("div",{className:palettePrefix("CallHistoryListItem--dropdownItemStatusType")},k),!!c&&s.a.createElement("div",{className:palettePrefix("CallHistoryListItem--dropdownItemStatusDuration")},c))}),j&&(T.push(oh(s.a.createElement(Jp.a,null),l("calls_history_dropdown_item_message"),I(th.MESSAGE))),T.push({separator:!0})),T.push(oh(s.a.createElement(nh,null),l("calls_history_dropdown_item_delete"),I(th.DELETE))),{title:_,photo:E,href:w,hint:S,actions:T,peerId:j}}),[]),g=v.title,b=v.photo,_=v.href,y=v.hint,E=v.actions,O=v.peerId;return h||m?s.a.createElement(bi,{className:palettePrefix("CallHistoryListItem"),selectable:!1,canBeHovered:!1,aside:s.a.createElement("div",{className:palettePrefix("CallHistoryListItem--aside")},!!O&&!(null!=m&&m.left_or_kicked)&&s.a.createElement(s.a.Fragment,null,s.a.createElement(rh.a,{className:palettePrefix("CallHistoryScreen--friendsIcon CallHistoryScreen--friendsIconsPhone"),onClick:function(){return r(n,th.AUDIO,t,i)}}),s.a.createElement(ah.a,{className:palettePrefix("CallHistoryScreen--friendsIcon"),onClick:function(){return r(n,th.VIDEO,t,i)}})),s.a.createElement(ga,{className:palettePrefix("CallHistoryListItem--asideMenu"),trigger:"hover",align:"right",data:E},s.a.createElement(Up.a,{className:palettePrefix("CallHistoryScreen--friendsIcon CallHistoryListItem--asidePointers")})))},s.a.createElement(Zi,{className:palettePrefix("CallHistoryListItem--entity"),photo:b,title:g,href:_,description:y||l("calls_history_call_type_group_hint"),target:"_blank"})):s.a.createElement(s.a.Fragment,null)},sh=Object(c.memo)(ch),uh=function(e){var t=e.calls,n=e.onMenuItemClick,r=e.stubText,a=e.hasMore,i=e.onLoadMore,o=e.selectedOwnerId,c=void 0===o?0:o;return s.a.createElement(wo,{useWindowScroll:!0,hasMore:a,loadMore:i},s.a.createElement(di,{className:palettePrefix("CallHistoryList"),border:!1},t.map((function(e,t){return s.a.createElement(sh,{selectedOwnerId:c,key:t,onMenuItemClick:n,call:e,index:t})})),0===t.length&&s.a.createElement(ta,{className:palettePrefix("CallHistoryList--stub")},r)))},lh=function(e){var t=e.height,n=e.classNames,r=void 0===n?"":n,a=Object(c.useMemo)((function(){return{height:t}}),[t]);return s.a.createElement("div",{className:palettePrefix(Object(Hr.classNames)("DivBlockSkeleton",r)),style:a})},dh=function(e,t){var n=we((function(e){return e})),r=n.joinLinks,a=n.profiles,i=_e();return{onHistoryAction:Object(c.useCallback)((function(n,o,c){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,u=Cp(n);if(o===th.AUDIO||o===th.VIDEO){if(e.isInActiveCall)return;var l=o===th.VIDEO;if(qe(u))if(u in r)e.joinCallByLink(r[u],void 0,l,Se.v.HISTORY,s);else{var d,f=Sp(n,a),p=f.chat;null!=p&&p.call_in_progress&&null!=p&&null!==(d=p.call_in_progress)&&void 0!==d&&d.join_link?e.joinCallByLink(p.call_in_progress.join_link,void 0,l,Se.v.HISTORY,s):e.call(u,l,void 0,Se.v.HISTORY,s)}else e.call(u,l,void 0,Se.v.HISTORY,s)}else o===th.MESSAGE?t(u):i({type:Se.gb.DELETE_CALL,data:c})}),[r,a,e])}},fh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t=we((function(e){return e})),n=t.historyCalls,r=_e(),a=Hp(),i=a.setLoading,o=a.loading,s=Object(c.useState)(!1),u=p()(s,2),l=u[0],d=u[1],f=Object(c.useState)(0),h=p()(f,2),m=h[0],v=h[1],g=Object(c.useState)(!1),b=p()(g,2),_=b[0],y=b[1];Object(c.useEffect)((function(){i(!0),Bp(r,25,m,0,e).then((function(e){var t,n;return d(null!==(t=e.has_more)&&void 0!==t&&t),v(null!==(n=e.next_from)&&void 0!==n?n:0),e})).then((function(e){Mp(r,[e]).then((function(e){y(!e)}))})).finally((function(){i(!1)}))}),[]);var E=function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Bp(r,25,t,n,e,a,i).then((function(e){var t,n;return d(null!==(t=e.has_more)&&void 0!==t&&t),v(null!==(n=e.next_from)&&void 0!==n?n:0),e})).then((function(e){return Mp(r,[e])}))},O=function(){return E(m,0,n)};return{onShowMoreHistory:O,loadHistory:E,loading:o,showMoreHistory:l,showLanding:_,setLoading:i}},ph=function(e){var t=e.bridge,n=e.navigateToConvo,r=we((function(e){return e})).historyCalls,a=Object(c.useContext)(Pn).getLang,i=fh("missed"),o=i.onShowMoreHistory,u=i.loading,l=i.showMoreHistory,d=dh(t,n).onHistoryAction;return u?s.a.createElement(Ip,null,s.a.createElement(lh,{height:500})):s.a.createElement(Ip,{title:a("calls_history_missed_list_header"),className:palettePrefix("CallHistoryScreen--content")},s.a.createElement(uh,{calls:r,onMenuItemClick:d,stubText:a("calls_history_missed_list_stub"),hasMore:l,onLoadMore:o}))},hh=["photo","title","isOnline","isMobile","onlineSize","element","className"];function mh(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wn()(e);if(t){var a=wn()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return En()(this,n)}}var vh=function(e){_n()(n,e);var t=mh(n);function n(e){var r;return tt()(this,n),r=t.call(this,e),o()(gn()(r),"onError",(function(){r.setState({errored:!0})})),r.state={},r}return rt()(n,[{key:"render",value:function(){var e=this.props,t=e.photo,n=e.title,r=e.isOnline,i=e.isMobile,o=e.onlineSize,c=e.element,u=e.className,l=ke()(e,hh),f=c||"div",p="Avatar--badge-".concat(o),h=Object(d.c)("Avatar",p,u,{"Avatar--online":r,"Avatar--mobile":i});return s.a.createElement(f,a()({className:palettePrefix(h)},l),s.a.createElement("div",{className:palettePrefix("Avatar__wrapper")},s.a.createElement("img",{onError:this.onError,className:palettePrefix("Avatar__img"),src:this.state.errored?"/images/camera_c.gif":t,alt:n})))}}]),n}(s.a.Component);vh.propTypes={className:g.a.string,photo:g.a.string.isRequired,title:g.a.string.isRequired,isOnline:g.a.bool,isMobile:g.a.bool,onlineSize:g.a.oneOf(["s","m"]),element:g.a.oneOfType([g.a.elementType,g.a.string])},vh.defaultProps={isOnline:!1,isMobile:!1,onlineSize:"m"};var gh,bh=function(e){var t=e.bridge,n=Object(c.useContext)(Pn),r=n.getLang,a=n.langShortDate,i=n.langNumeric,o=n.langSex,u=we((function(e){return e})).meId,l=Hp(),d=l.setLoading,f=l.loading,h=Object(c.useState)([]),m=p()(h,2),v=m[0],g=m[1],b=Object(c.useState)(!1),_=p()(b,2),y=_[0],E=_[1],O=Object(c.useState)(0),w=p()(O,2),C=w[0],S=w[1],A=Object(c.useState)(0),k=p()(A,2),j=k[0],T=k[1],I=Object(c.useState)(""),P=p()(I,2),D=P[0],N=P[1],x=Object(c.useState)(!1),R=p()(x,2),M=R[0],L=R[1],B=Object(c.useRef)(null);Object(c.useEffect)((function(){d(!0);Za(100,C).then((function(e){var t=e.count,n=e.items;T(t);E(100<t),S(100);var r=n.map(Pt);g(r)})).finally((function(){d(!1)}))}),[]);var F=Object(c.useMemo)((function(){return j>100}),[j]);Object(c.useEffect)((function(){var e=D;if(F){if(e.length>=1&&!M)return B.current&&clearTimeout(B.current),B.current=setTimeout((function(){L(!0),Qa(u,e,50).then((function(e){var t=e.count,n=e.items;E(50<t),S(50);var r=n.map(Pt);g(r)})).finally((function(){L(!1)}))}),1e3),function(){clearTimeout(B.current)};0===e.length&&Za(100,0).then((function(e){var t=e.count,n=e.items;E(100<t),S(100);var r=n.map(Pt);g(r)}))}}),[D]);var H=Object(c.useCallback)((function(e,n){t.call(e,n,void 0,Se.v.HISTORY_FRIENDS_LIST)}),[]),V=Object(c.useCallback)((function(e){return e.name}),[]),U=Object(c.useCallback)((function(e){return e.peerId}),[]),z=Hn(v,V,U),G=D&&!F?z.search(D):v,W=Object(c.useCallback)((function(e){N(e.target.value)}),[]),q=function(e,t){var n,c,u,l,d,f,p,h="";null!==(n=e.onlineInfo)&&void 0!==n&&n.is_online?h="Online":null!==(u=e.onlineInfo)&&void 0!==u&&u.last_seen?h=function(e,t,n,r){var a=Math.floor((Date.now()-r)/1e3);return a<60?e("global_just_now"):a<3600?t(Math.floor(a/60),"global_mins_ago",e("global_mins_ago",!0)):a<21600?t(Math.floor(a/3600),"global_hours_ago",e("global_hours_ago",!0)):n(r,!1)}(r,i,a,1e3*(null===(l=e.onlineInfo)||void 0===l?void 0:l.last_seen)):null!==(d=e.onlineInfo)&&void 0!==d&&d.status&&(h="recently"===(null===(f=e.onlineInfo)||void 0===f?void 0:f.status)?o(e.sex,"global_online_was_recently",r("global_online_was_recently",!0)):"last_week"===(null===(p=e.onlineInfo)||void 0===p?void 0:p.status)?o(e.sex,"global_online_was_week",r("global_online_was_week",!0)):o(e.sex,"global_online_long_ago",r("global_online_long_ago",!0)));return s.a.createElement(bi,{key:t,selectable:!1,canBeHovered:!1,aside:s.a.createElement("div",{className:palettePrefix("CallHistoryScreen--friendsIcons")},s.a.createElement(rh.a,{className:palettePrefix("CallHistoryScreen--friendsIcon CallHistoryScreen--friendsIconsPhone"),onClick:function(){return H(e.peerId,!1)}}),s.a.createElement(ah.a,{className:palettePrefix("CallHistoryScreen--friendsIcon"),onClick:function(){return H(e.peerId,!0)}}))},s.a.createElement(Zi,{size:"34",photo:s.a.createElement(vh,{id:t,photo:e.photo,title:e.name,isOnline:null===(c=e.onlineInfo)||void 0===c?void 0:c.is_online}),title:e.name,href:e.link,description:h,target:"_blank"}))};return f?s.a.createElement(Ip,null,s.a.createElement(lh,{height:500})):s.a.createElement(Ip,{title:r("calls_page_menu_friends_calls"),className:palettePrefix("CallHistoryScreen--content")},s.a.createElement(Hi,{value:D,placeholder:r("global_search"),onChange:W,onInput:W,onPaste:W,className:palettePrefix("CallParticipantList__input")}),s.a.createElement(wo,{useWindowScroll:!0,hasMore:y,loadMore:function(){return D&&F?Qa(u,D,50,C).then((function(e){var t=e.count,n=e.items,r=C+50;E(r<t),S(r);var a=[].concat(Ue()(v),Ue()(n.map(Pt)));return g(a),!0})):Za(100,C).then((function(e){var t=e.items,n=C+100;E(n<j),S(n);var r=[].concat(Ue()(v),Ue()(t.map(Pt)));return g(r),!0}))}},s.a.createElement(di,{className:palettePrefix("CallHistoryList"),border:!1},G.map((function(e,t){return q(e,t)})),0===G.length&&s.a.createElement(ta,{className:palettePrefix("CallHistoryList--stub")},r("calls_page_friends_not_found")))))};!function(e){e.SIZE_50="50",e.SIZE_34="34",e.SIZE_24="24"}(gh||(gh={}));var _h=function(e){var t=e.items,n=e.size,r=void 0===n?gh.SIZE_50:n;return s.a.createElement("div",{className:palettePrefix("AvatarsStackNoSvg")},t.map((function(e,t){var n=Object(d.c)("AvatarsStackNoSvg__item","AvatarsStackNoSvg__item--".concat(r));return"src"in e?s.a.createElement("img",{src:e.src,className:palettePrefix(n),alt:e.alt,key:e.key||t}):s.a.createElement(Le,{text:e.text,id:e.id,size:r,className:palettePrefix(n),key:e.key||t})})))};function yh(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Eh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Eh(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function Eh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Oh=function(e){var t=e.call,n=e.onJoin,r=e.listItemBorder,a=void 0===r||r,i=we((function(e){return e})).profiles,o=s.a.useContext(Pn),u=o.getLang,l=o.langNumeric,d=function(e,t){var n=e.chat,r=e.user_ids,a=void 0;if(!n&&r.length){var i=r[0];i in t&&(a=t[i])}return{member:a,chat:n}}(t,i),f=d.member,p=d.chat,h=Object(c.useMemo)((function(){var e,n=p?function(e){var t=e.title,n=void 0===t?"":t,r=e.photo_100,a=void 0===r?"":r,i=e.id,o=void 0===i?0:i;return{title:n,photo:a,href:o?"/im?sel=c"+o:"",id:o}}(p):f?function(e){var t=e.name,n=void 0===t?"":t,r=e.photo,a=void 0===r?"":r,i=e.link,o=void 0===i?"":i,c=e.id,s=void 0===c?0:c;return{title:n,photo:a,href:o||"/im?sel=c"+s,id:s}}(f):{},r=n.id,a=void 0===r?0:r,o=n.title,c=void 0===o?"":o,s=n.photo,d=void 0===s?"":s,h=n.href,m=void 0===h?"":h,v=t.users_count,g=t.user_ids,b=t.join_link,_=void 0===b?"":b,y=l(v,"calls_history_members_count",u("calls_history_members_count",v)).replace("%n",String(v)),E=[],O=yh(g.slice(0,3));try{for(O.s();!(e=O.n()).done;){var w=e.value;w in i&&E.push(Mt(i[w]))}}catch(e){O.e(e)}finally{O.f()}return{id:a,title:c,photo:d,href:m,description:y,join_link:_,avatarItems:E}}),[p,t,f,i]),m=h.id,v=h.title,g=h.photo,b=h.href,_=h.description,y=h.avatarItems,E=h.join_link;return f||p?s.a.createElement(bi,{border:a,className:palettePrefix("CurrentCallsListItem"),key:m,selectable:!1,canBeHovered:!1,aside:s.a.createElement(s.a.Fragment,null,y.length>0&&s.a.createElement("div",{className:palettePrefix("CurrentCallsListItem--avatarStack")},s.a.createElement(_h,{size:gh.SIZE_24,items:y})),s.a.createElement(so,{size:"s",onClick:function(){return n(E,m,Se.v.HISTORY)}},u("calls_history_join_call_button")))},s.a.createElement(Zi,{photo:s.a.createElement(ln,{id:m,photo:g,alt:v,size:"34"}),title:v,href:b,description:_,target:"_blank"})):s.a.createElement(s.a.Fragment,null)},wh=function(e){var t=e.currentCalls,n=e.onJoin,r=e.listItemBorder,a=void 0===r||r;return t.length?s.a.createElement(di,{border:!1},t.map((function(e,t){return s.a.createElement(Oh,{key:t,listItemBorder:a,call:e,onJoin:n})}))):s.a.createElement(s.a.Fragment,null)},Ch=function(){var e=we((function(e){return e})),t=e.profiles,n=e.currentCalls,r=_e(),a=Object(c.useState)(!0),i=p()(a,2),o=i[0],s=i[1];Object(c.useEffect)((function(){Lp(r).then((function(e){Mp(r,[e])})).finally((function(){s(!1)}))}),[]);var u=Object(c.useRef)(null);return Object(c.useEffect)((function(){if(!o)return null===u.current&&(u.current=setInterval((function(){Lp(r).then((function(e){Mp(r,[e])}))}),3e4)),function(){clearInterval(u.current)}}),[o]),{currentCallsBlockLoading:o,currentCalls:n,profiles:t}},Sh=function(e){var t=e.bridge,n=Object(c.useContext)(Pn).getLang,r=Fp(t).onJoin,a=Ch(),i=a.currentCallsBlockLoading,o=a.currentCalls,u=a.profiles,l=Hp().setLoading,d=Object(c.useMemo)((function(){return i?s.a.createElement(Ip,null,s.a.createElement(lh,{height:300})):s.a.createElement(Ip,{title:n("calls_history_current_list_header"),className:palettePrefix("CallHistoryScreen--content CallHistoryScreen--currentCalls")},s.a.createElement(wh,{currentCalls:o,profiles:u,onJoin:r}),0===o.length&&s.a.createElement(ta,{className:palettePrefix("CallHistoryList--stub")},n("calls_history_current_calls_list_stub")))}),[i]);return Object(c.useEffect)((function(){l(i)}),[i]),s.a.createElement(s.a.Fragment,null,d)},Ah=n(1339),kh=!1;function jh(){kh||(Object(dr.a)(new ur.a({id:"arrow_up_rectangle_outline_28",viewBox:"0 0 28 28",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="arrow_up_rectangle_outline_28"><path fill-rule="evenodd" clip-rule="evenodd" d="M5.07 4.801C6.164 4.216 7.243 4 9.691 4h8.616c2.448 0 3.527.216 4.622.801A5.465 5.465 0 0125.2 7.07c.585 1.096.801 2.175.801 4.623v4.616c0 2.448-.216 3.527-.801 4.622A5.465 5.465 0 0122.93 23.2c-1.095.585-2.174.801-4.622.801H9.692c-2.448 0-3.527-.216-4.623-.801a5.465 5.465 0 01-2.268-2.269C2.216 19.835 2 18.756 2 16.308v-4.616c0-2.448.216-3.527.801-4.623A5.466 5.466 0 015.07 4.801zM9.691 6c-2.335 0-3.019.212-3.68.565a3.466 3.466 0 00-1.447 1.448C4.212 8.673 4 9.357 4 11.692v4.616c0 2.335.212 3.019.565 3.68a3.466 3.466 0 001.448 1.447c.66.353 1.344.565 3.679.565h8.616c2.335 0 3.019-.212 3.68-.565a3.467 3.467 0 001.447-1.448c.353-.66.565-1.344.565-3.679v-4.616c0-2.335-.212-3.019-.565-3.68a3.466 3.466 0 00-1.448-1.447C21.327 6.212 20.643 6 18.308 6H9.692z" fill="currentColor" /><path d="M13 18a1 1 0 102 0v-5.586l1.293 1.293a1 1 0 001.414-1.414l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 101.414 1.414L13 12.414V18z" fill="currentColor" /></symbol>'})),kh=!0)}var Th=function(e){return Object(dr.b)((function(){jh()}),[]),s.a.createElement(fr.a,Object(lr.assign)({},e,{viewBox:"0 0 28 28",id:"arrow_up_rectangle_outline_28",width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};Th.mountIcon=jh;var Ih=Th,Ph=function(e){var t=e.onCreateCallClick,n=Object(c.useContext)(Pn).getLang;return s.a.createElement("div",{className:palettePrefix("CallHistoryScreenLanding")},s.a.createElement("div",{className:palettePrefix("CallHistoryScreenLanding--content")},s.a.createElement("div",{className:palettePrefix("CallHistoryScreenLanding--header")},n("calls_screen_landing_header")),s.a.createElement("div",{className:palettePrefix("CallHistoryScreenLanding--subheader")},n("calls_screen_landing_subheader")),s.a.createElement(di,{className:palettePrefix("CallHistoryScreenLanding--list"),border:!1},s.a.createElement(bi,{border:!1,chevron:!1,selectable:!1,icon:s.a.createElement(Ks.a,null)},n("calls_screen_landing_feature_participants")),s.a.createElement(bi,{border:!1,chevron:!1,selectable:!1,icon:s.a.createElement(Ah.a,null)},n("calls_screen_landing_feature_anon")),s.a.createElement(bi,{border:!1,chevron:!1,selectable:!1,icon:s.a.createElement(Ih,null)},n("calls_screen_landing_feature_share"))),s.a.createElement(so,{size:"l",className:palettePrefix("CallHistoryScreenLanding--createButton"),onClick:function(){return t(Hf.f.HISTORY_CREATE)}},n("calls_current_calls_create_call_by_link"))))},Dh=n(1340),Nh=function(e){var t=e.SDK,n=e.bridge,r=e.navigateToConvo,a=e.onMenuItemClick,i=be(),o=_e(),u=Object(c.useContext)(Pn).getLang,l=we((function(e){return e})),f=l.joinLinks,h=l.profiles,m=l.historyCalls,v=fh("all"),g=v.onShowMoreHistory,b=v.loading,_=v.showMoreHistory,y=v.loadHistory,E=dh(n,r).onHistoryAction,O=Fp(n),w=O.onCreateCallClick,C=O.onJoin,S=Object(c.useState)(0),A=p()(S,2),k=A[0],j=A[1],T=Object(c.useState)([]),I=p()(T,2),P=I[0],D=I[1],N=Ch(),x=N.currentCallsBlockLoading,R=N.currentCalls,M=Object(c.useState)(!1),L=p()(M,2),B=L[0],F=L[1],H=Object(c.useState)(!1),V=p()(H,2),U=V[0],z=V[1],G=Object(c.useState)([]),W=p()(G,2),q=W[0],K=W[1],Y=Object(c.useState)(!1),Z=p()(Y,2),Q=Z[0],J=Z[1];Object(c.useEffect)((function(){z(!0),Za(7).then((function(e){var t=e.items.map(Pt);K(t)})).finally((function(){z(!1)}))}),[]),Object(c.useEffect)((function(){P.length||Ga().then((function(e){var t=e.count,n=e.items,r=[{value:0,label:u("calls_history_list_personal_option")}];t>0&&(n.forEach((function(e){var t=e.id,n=e.name;r.push({value:-t,label:n})})),D(r))}))}),[]);var X=Object(c.useCallback)((function(e){var r=Number(e.selected.value);F(!0),j(r),y(0,r,[],!0).then((function(e){F(!1),e&&Ou(t,n,i,r,o,!0)}))}),[h,f,m]),$=Object(c.useCallback)((function(e,t,n){e.preventDefault(),a(t,n)}),[]),ee=Object(c.useMemo)((function(){return u(0===k?"calls_history_list_stub":"calls_history_list_groups_stub")}),[k]),te=Object(c.useMemo)((function(){return P.length>1?s.a.createElement(vs,{className:palettePrefix("CallHistoryScreen--listHeaderSelector"),options:P,value:k,onChange:X}):s.a.createElement(s.a.Fragment,null)}),[P]),ne=Object(c.useCallback)((function(e,t){return!(!e.ctrlKey&&!e.metaKey)||(e.preventDefault(),C("",t,Se.v.HISTORY_FRIENDS_LIST),!1)}),[]);return Object(c.useEffect)((function(){if(b)o({type:Se.gb.SET_SHOW_CREATE_BUTTON,data:!1});else{var e=!(x||R.length||b||m.length||0!==k);J(e),o({type:Se.gb.SET_SHOW_CREATE_BUTTON,data:!e})}}),[x,R.length,b,m.length,k]),s.a.createElement("div",{className:palettePrefix("CallHistoryScreen--content")},Q&&s.a.createElement(Ip,{className:palettePrefix(Object(d.c)({"CallHistoryScreenLanding--pageBlock":!U&&0===q.length}))},s.a.createElement(Ph,{onCreateCallClick:w})),U&&s.a.createElement(Ip,null,s.a.createElement(lh,{height:100})),!U&&q.length>0&&s.a.createElement(Ip,null,s.a.createElement(Vi,{className:palettePrefix("CallHistoryScreen--listHeader"),right:s.a.createElement(Wi,{href:"/calls?section=friends",onClick:function(){return $(event,"friends","calls?section=friends")},className:palettePrefix("CallHistoryScreen--moreLink")},u("calls_history_show_all_friends_header_link"))},u("calls_history_friends_block_header")),s.a.createElement("ul",{className:palettePrefix("CallHistoryScreen--friendsList")},q.map((function(e){return s.a.createElement("li",{key:e.id,className:palettePrefix("CallHistoryScreen--friendsListItem")},s.a.createElement("a",{href:e.link,onClick:function(){return ne(event,e.peerId)}},s.a.createElement("div",{className:palettePrefix("CallHistoryScreen--friendsListItemContent")},s.a.createElement(vh,{className:palettePrefix("CallHistoryScreen--friendsListItemPhoto"),photo:e.photo,title:e.name}),s.a.createElement("div",{className:palettePrefix("CallHistoryScreen--friendsListItemPhotoHoverIcon")},s.a.createElement(Dh.a,{fill:"white"})),s.a.createElement("div",{className:palettePrefix("CallHistoryScreen--friendsListItemName")},e.firstName))))})))),x&&s.a.createElement(Ip,null,s.a.createElement(lh,{height:300})),!x&&R.length>0&&s.a.createElement(Ip,{className:palettePrefix("CallHistoryScreen--currentCalls")},s.a.createElement(Vi,{className:palettePrefix("CallHistoryScreen--listHeader"),extra:R.length,right:R.length?s.a.createElement(Wi,{onClick:function(){return $(event,"current","calls?section=current")},href:"/calls?section=current",className:palettePrefix("CallHistoryScreen--moreLink")},u("calls_history_show_all_header_link")):""},u("calls_history_current_list_header")),s.a.createElement(wh,{currentCalls:R.slice(0,5),profiles:h,onJoin:C})),b&&s.a.createElement(lh,{height:500}),!b&&(m.length>0||k<0||0===k&&B)&&s.a.createElement(Ip,null,s.a.createElement(Vi,{className:palettePrefix("CallHistoryScreen--listHeader"),right:te},u("calls_history_list_header")),B&&s.a.createElement(ta,null,s.a.createElement(Jr,null)),!B&&s.a.createElement(uh,{selectedOwnerId:k,calls:m,onMenuItemClick:E,stubText:ee,hasMore:_,onLoadMore:g})))},xh=function(e){var t=e.SDK,n=e.bridge,r=e.navigateToConvo,a=Object(c.useContext)(Pn).getLang,i=we((function(e){return e})).showCreateCall,o=function(e){var t=Object(c.useMemo)((function(){return{urlSection:new URLSearchParams(e.search).get("section")||""}}),[e]).urlSection,n=Object(c.useState)(t),r=p()(n,2);return{section:r[0],setSection:r[1]}}(window.location),u=o.section,l=o.setSection,d=Fp(n).onCreateCallClick,f=Hp(),h=f.loading,m=f.setLoading,v=Object(c.useMemo)((function(){return[{id:"",label:a("calls_page_menu_all_calls"),href:"calls",ref:Object(c.createRef)()},{id:"missed",label:a("calls_page_menu_miss_calls"),href:"calls?section=missed",ref:Object(c.createRef)()},{id:"sep",separator:!0},{id:"current",label:a("calls_page_menu_current_calls"),href:"calls?section=current",ref:Object(c.createRef)()},{id:"friends",label:a("calls_page_menu_friends_calls"),href:"calls?section=friends",ref:Object(c.createRef)()}]}),[]),g=Object(c.useCallback)((function(e,t){return function(e){window.nav.setLoc(window.nav.fromStr(e))}(t),l(e),m(!0),Promise.resolve()}),[]),b=Object(c.useMemo)((function(){return u===Se.hb.MISS?s.a.createElement(ph,{SDK:t,bridge:n,navigateToConvo:r}):u===Se.hb.FRIENDS?s.a.createElement(bh,{SDK:t,bridge:n,navigateToConvo:r}):u===Se.hb.CURRENT?s.a.createElement(Sh,{bridge:n}):s.a.createElement(Nh,{SDK:t,bridge:n,navigateToConvo:r,onMenuItemClick:g})}),[u]);return s.a.createElement(Np,{showCreateCall:u!==Se.hb.ALL||i,onCreateCallClick:d,activeMenuItem:u,menuItems:v,onMenuItemClick:g,loading:h},b)},Rh=function(){var e=_e(),t=we((function(e){return e})).error,n=Object(c.useContext)(Pn).getLang,r=function(){e({type:Se.gb.ERROR,data:null})};return s.a.createElement(Ru,{title:s.a.createElement(s.a.Fragment,null,(null==t?void 0:t.title)||n("calls_oops")," "),onClose:r,actionButtons:s.a.createElement(so,{onClick:r},n("calls_close")),text:s.a.createElement(s.a.Fragment,null,null==t?void 0:t.text)})},Mh=function(e){var t=e.SDK,n=e.bridge,r=e.navigateToConvo,a=we((function(e){return e})),i=a.deleteCallId,o=a.error;return s.a.createElement(s.a.Fragment,null,s.a.createElement(xh,{SDK:t,bridge:n,navigateToConvo:r}),i>=0&&s.a.createElement(Ap,{bridge:n}),null!==o&&s.a.createElement(Rh,null))};function Lh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lh(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fh(e){var t=e.actionStatCollector,n=e.saveStatlogEvents,r=e.langUtils,i=e.navigateToConvo,o=e.navigateToProfile,c=e.apiWrapperWithAuth,u=e.apiWrapper,f=e.callSounds,p=e.config,h=void 0===p?{isModalView:!0,withAnimation:!0,allowAddMembers:!1,debugLog:!1,streaming:!0,streamingPrivacy:!0,fullHD:!1,anonymPhoto:!0,incomingCall:!1,allowBanParticipant:!1,showFeedbackScreen:!1,enableVideoSlots:!1,videoSlotsCount:Se.Sc,allowCallByName:!1,nativeApp:!1,nativeAppJoin:!1,enableScreenTrack:!1,enableProducerScreenTrack:!1,allowWaitingHall:!1,allowPushToTalk:!1,badNetwork:!1,badNetworkP2P:!1,desktopAppNotification:!1,sferum:!1,enableVirtualBackground:!1}:p,m=e.eventHandlers,v=e.streamUrlExtractor;return Oa=c,wa=u,{initialized:!1,initializing:!1,eventHandlers:null!=m?m:{},init:function(e){var a,c=this,u=e.callPreview,p=e.callsCredentials,g=e.imHash,b=e.participantLimit,_=e.callsOkStaging,y=e.tabIsMaster,E=e.onBeforeCallStart,O=e.onAfterCallFinish,w=e.onError,S=e.toggles,A=void 0===S?{}:S,k=e.friends,j=e.isFriend,T=e.getFriends,I=e.pushToTalkEnabled;if(null==p||!p.me)return console.log("Calls were not initialized as there are no callsCredentials.me"),!1;this.initialized=!0,this.isFriend=j,this.getFriends=T;var P=Bh(Bh({},h),A);if(!We.browser.isBrowserSupported()){var D=function(){var e=r.getLang("calls_unsupported_browser_error");return w&&w({msg:e}),null!=m&&m.onError&&m.onError(new Error(e)),console.error(e),Promise.resolve()};return this.call=D,this.startGroupCall=D,this.startCall=D,this.acceptCall=D,this.joinCallByLink=D,this.showJoinPopup=D,this.showCallByNamePopup=D,void(this.showCreateCallByLinkPopup=D)}this.id=window.vk&&window.vk.id||p.me.peerId;var N=y||function(){return!0},x=null!==(a=d.y.getItem(Se.Rc))&&void 0!==a?a:Se.Vc.SD,R=W(gp,fp(p.me,g,u,{participantLimit:b,isDev:!!p.is_dev,token:p.secret,config:P,localVideoResolution:P.fullHD?x:x===Se.Vc.HD?Se.Vc.HD:Se.Vc.SD,friends:k||[],friendsCache:Nt(k||[]),ipSettingEnabled:p.ip_setting_enabled,privacySettings:p.privacySettings,pushToTalkEnabled:I}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());return this.collapseCall=function(){R.dispatch({type:Se.qb,isOpen:!1}),R.dispatch({type:Se.k,mode:Se.Ic.COLLAPSED})},this.restoreCall=function(){R.dispatch({type:Se.k,mode:Se.Ic.DEFAULT})},this.showStartCallModal=function(e,t,n){c.isInActiveCall||R.dispatch({type:Se.g,mode:Se.ub.START,peerId:e,joinLink:t,entryPoint:n})},n&&su(n),t&&ot.setActionStatCollector(t),l.a.render(s.a.createElement(C,{store:R},s.a.createElement(Pn.Provider,{value:r},s.a.createElement(He.Provider,{value:P},s.a.createElement(up,null)))),Hh("calls")),this.initializing=bu(this,We,p,R,r.getLang,_).finally((function(){!function(e,t,n,r){var a=r.dispatch,i=function(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];o.forEach((function(e){e.type===Se.ib&&Ua(e.payload.call_id)}));var s=r.getState();cp(s,a,e,o,n).then((function(){o.forEach((function(n){switch(n.type){case Se.ib:if(sp(s,n))r.getState().ipSettingEnabled&&t.forceRelayPolicy(!n.payload.p2p_allowed),t.processPush(n.payload.call_id).then((function(){var e=JSON.parse(lt(n.payload.payload)),t=e.is_video?Se.w.VIDEO:Se.w.AUDIO,r=bt(n.payload),i=_t(n);r<0&&(i=e.with_join_link),a({type:Se.g,mode:Se.ub.INCOMING,peerId:r<0&&i?0:r,data:op(op({},n.payload),{},{type:t,payload:e})}),ou({timeStart:Date.now(),startType:t}),ot.logEvent({call_event_type:Se.p.INCOMING_CALL_RECEIVED,session_id:n.payload.call_id,peer_id:r,is_group_call:i,reason:e.is_video?Se.w.VIDEO:Se.w.AUDIO})})).catch((function(t){if(e.eventHandlers.onError&&t&&e.eventHandlers.onError(t),e.debug)if("object"===Ln()(t)){var n=t.hangup,r=t.message;console.error("Push process error",n,r)}else console.error("Push process error",t)}));else if(n.type===Se.ib){var i=function(t){e.eventHandlers.onError&&t&&e.eventHandlers.onError(new Error(t)),e.debug&&console.warn("Incoming push skipped:",t,n)};switch(!0){case!n.payload.call_id:i("old lib call");break;case s.mode===Se.ub.CALL||s.mode===Se.ub.INCOMING:i("already in a call"),t.processPush(n.payload.call_id).then((function(){e.eventHandlers.onError&&e.eventHandlers.onError(new Error("processPush was incorrect accepted with call_id: ".concat(n.payload.call_id))),e.debug&&console.warn("processPush was incorrect accepted",n.payload.call_id)})).catch((function(t){e.eventHandlers.onError&&t&&e.eventHandlers.onError(t),e.debug&&console.warn("processPush rejected:",t,n.payload.call_id)}));break;default:i("reason of decline is unknown")}}break;case Se.a:var o=r.getState(),c=Ge(o.peer),u=o.callData.callId;if(o.peer!==n.peerId||n.flags&Se.L||o.me===n.userId||a({type:Se.uc,chatUnreadCount:o.chatUnreadCount?o.chatUnreadCount+1:1}),c||!Ke(n))return;var l=n.peerId;if(u===n.kludges.attach1_call_id)return Mo(r.getState(),a,l);break;case Se.Kb:null!==n.chatUnreadCount&&r.getState().peer===n.peerId&&a({type:Se.uc,chatUnreadCount:n.unread,chatUpToMsgId:n.upToId});break;case Se.bc:var d=r.getState();d.peer===n.peerId&&null!==d.chatUpToMsgId&&n.messageId>d.chatUpToMsgId&&!(n.flags&Se.L)&&(n.flags&Se.K||n.flags&Se.M)&&a({type:Se.uc,chatUnreadCount:d.chatUnreadCount?d.chatUnreadCount-1:0});break;case Se.z:r.getState().peer===n.peerId&&a({type:Se.uc,chatUnreadCount:0,chatUpToMsgId:null});break;case Se.F:case Se.Mb:var f=r.getState();f.peer===n.peerId&&null!==f.chatUpToMsgId&&n.messageId>f.chatUpToMsgId&&n.kludges.is_expired&&a({type:Se.uc,chatUnreadCount:f.chatUnreadCount?f.chatUnreadCount-1:0});break;case Se.n:var p=n.peerId,h=n.updateType;if(r.getState().peer!==p)return;if(h!==Se.pb)return;void 0!==r.getState().callData.canFinishCall&&r.getState().callData.hasUrlLink||Lo(r.getState(),a,p)}}))})).catch((function(t){e.eventHandlers.onError&&t&&e.eventHandlers.onError(t),e.debug&&console.error("Resource loading error",t),o.forEach((function(e){switch(e.type){case Se.ib:if(!sp(s,e))return;a({type:Se.G,text:n("calls_incoming_process_error"),handleType:Se.J.PROCESS,callId:e.payload.call_id})}}))}))};if(e.handleEvent=i,void 0!==window.Notifier){var o=window.Notifier.getLpInstance();o&&o.onData(i)}}(c,We,r.getLang,R);var e=Hh("calls");l.a.unmountComponentAtNode(e),l.a.render(s.a.createElement(C,{store:R},s.a.createElement(Pn.Provider,{value:r},s.a.createElement(He.Provider,{value:P},s.a.createElement(ap,{bridge:c,SDK:We,tabIsMaster:N,onBeforeCallStart:E,onAfterCallFinish:O,callSounds:f,navigateToConvo:i,onHandCountChanged:null==m?void 0:m.onHandCountChanged,onSuccessFeedback:null==m?void 0:m.onSuccessFeedback,navigateToProfile:o,okPublicKey:p.key,config:P,streamUrlExtractor:v})))),e)})),this.initializing.catch((function(e){if(null!=m&&m.onError){var t=e?e.message||e.msg:"sdk did not send the reasons for the error",n=e?e.error:"";[401].includes(n)||m.onError(new Error("Could not init calls. ".concat(t,": ").concat(n)))}console.error("Could not init calls",e.error,e)}))},showJoinScreen:function(e,i,o,c,u){var d=pu(c,m);if(!We.browser.isBrowserSupported())return d(r.getLang("calls_unsupported_browser_error"));su(n),ot.setActionStatCollector(t);var f=e.callsAllowCallByName,p=e.callsAllowWaitingHall,v=document.querySelector(i),g=Bh(Bh({},h),{},{allowCallByName:f,allowWaitingHall:p});l.a.render(s.a.createElement(Pn.Provider,{value:r},s.a.createElement(He.Provider,{value:g},s.a.createElement(Pu,a()({},e,{withPopup:!1,bridge:this,entryPoint:o,onError:d,okPublicKey:u})))),v)},showHistoryScreen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=pu(void 0,m);if(!We.browser.isBrowserSupported())return o(r.getLang("calls_unsupported_browser_error"));su(n);var c=W(Op,pp(t));if(l.a.render(s.a.createElement(C,{store:c},s.a.createElement(Pn.Provider,{value:r},s.a.createElement(He.Provider,{value:h},s.a.createElement(Mh,{SDK:We,bridge:this,navigateToConvo:i})))),document.querySelector(e)),a){var u=document.querySelector("#l_ca");u&&u.classList.contains("AppLeftMenuWithNotify")&&u.classList.remove("AppLeftMenuWithNotify"),u&&u.classList.contains("AppLeftMenuWithNotifyBlueDot")&&u.classList.remove("AppLeftMenuWithNotifyBlueDot")}},debug:!1,setDebug:function(e){this.debug=e,We.debug(e)}}}function Hh(e){var t=document.getElementById(e);if(t)return t;var n=document.createElement("section");return n.setAttribute("id",e),document.body.appendChild(n),n}},function(e,t,n){"use strict";n.d(t,"b",(function(){return O})),n.d(t,"a",(function(){return w}));var r=n(16),a=n(36),i=n(150),o=n(22),c=n(372),s=n(71),u=n(122),l=n(373),d=n(74),f=n(666),p=n(196),h=function(){function e(e){var t=e.cache,n=e.client,r=e.resolvers,a=e.fragmentMatcher;this.cache=t,n&&(this.client=n),r&&this.addResolvers(r),a&&this.setFragmentMatcher(a)}return e.prototype.addResolvers=function(e){var t=this;this.resolvers=this.resolvers||{},Array.isArray(e)?e.forEach((function(e){t.resolvers=Object(o.G)(t.resolvers,e)})):this.resolvers=Object(o.G)(this.resolvers,e)},e.prototype.setResolvers=function(e){this.resolvers={},this.addResolvers(e)},e.prototype.getResolvers=function(){return this.resolvers||{}},e.prototype.runResolvers=function(e){var t=e.document,n=e.remoteResult,a=e.context,i=e.variables,o=e.onlyRunForcedResolvers,c=void 0!==o&&o;return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(e){return t?[2,this.resolveDocument(t,n.data,a,i,this.fragmentMatcher,c).then((function(e){return Object(r.a)(Object(r.a)({},n),{data:e.result})}))]:[2,n]}))}))},e.prototype.setFragmentMatcher=function(e){this.fragmentMatcher=e},e.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},e.prototype.clientQuery=function(e){return Object(o.y)(["client"],e)&&this.resolvers?e:null},e.prototype.serverQuery=function(e){return Object(o.I)(e)},e.prototype.prepareContext=function(e){var t=this.cache;return Object(r.a)(Object(r.a)({},e),{cache:t,getCacheKey:function(e){return t.identify(e)}})},e.prototype.addExportedVariables=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(a){return e?[2,this.resolveDocument(e,this.buildRootValueFromCache(e,t)||{},this.prepareContext(n),t).then((function(e){return Object(r.a)(Object(r.a)({},t),e.exportedVariables)}))]:[2,Object(r.a)({},t)]}))}))},e.prototype.shouldForceResolvers=function(e){var t=!1;return Object(f.b)(e,{Directive:{enter:function(e){if("client"===e.name.value&&e.arguments&&(t=e.arguments.some((function(e){return"always"===e.name.value&&"BooleanValue"===e.value.kind&&!0===e.value.value}))))return f.a}}}),t},e.prototype.buildRootValueFromCache=function(e,t){return this.cache.diff({query:Object(o.g)(e),variables:t,returnPartialData:!0,optimistic:!1}).result},e.prototype.resolveDocument=function(e,t,n,a,i,c){return void 0===n&&(n={}),void 0===a&&(a={}),void 0===i&&(i=function(){return!0}),void 0===c&&(c=!1),Object(r.b)(this,void 0,void 0,(function(){var s,u,l,d,f,p,h,m,v;return Object(r.d)(this,(function(g){return s=Object(o.q)(e),u=Object(o.n)(e),l=Object(o.k)(u),d=s.operation,f=d?d.charAt(0).toUpperCase()+d.slice(1):"Query",h=(p=this).cache,m=p.client,v={fragmentMap:l,context:Object(r.a)(Object(r.a)({},n),{cache:h,client:m}),variables:a,fragmentMatcher:i,defaultOperationType:f,exportedVariables:{},onlyRunForcedResolvers:c},[2,this.resolveSelectionSet(s.selectionSet,t,v).then((function(e){return{result:e,exportedVariables:v.exportedVariables}}))]}))}))},e.prototype.resolveSelectionSet=function(e,t,n){return Object(r.b)(this,void 0,void 0,(function(){var i,c,s,u,l,d=this;return Object(r.d)(this,(function(f){return i=n.fragmentMap,c=n.context,s=n.variables,u=[t],l=function(e){return Object(r.b)(d,void 0,void 0,(function(){var l,d;return Object(r.d)(this,(function(r){return Object(o.L)(e,s)?Object(o.z)(e)?[2,this.resolveField(e,t,n).then((function(t){var n;void 0!==t&&u.push(((n={})[Object(o.K)(e)]=t,n))}))]:(Object(o.A)(e)?l=e:(l=i[e.name.value],Object(a.b)(l,11)),l&&l.typeCondition&&(d=l.typeCondition.name.value,n.fragmentMatcher(t,d,c))?[2,this.resolveSelectionSet(l.selectionSet,t,n).then((function(e){u.push(e)}))]:[2]):[2]}))}))},[2,Promise.all(e.selections.map(l)).then((function(){return Object(o.H)(u)}))]}))}))},e.prototype.resolveField=function(e,t,n){return Object(r.b)(this,void 0,void 0,(function(){var a,i,c,s,u,l,d,f,h,m=this;return Object(r.d)(this,(function(r){return a=n.variables,i=e.name.value,c=Object(o.K)(e),s=i!==c,u=t[c]||t[i],l=Promise.resolve(u),n.onlyRunForcedResolvers&&!this.shouldForceResolvers(e)||(d=t.__typename||n.defaultOperationType,(f=this.resolvers&&this.resolvers[d])&&(h=f[s?i:c])&&(l=Promise.resolve(p.cacheSlot.withValue(this.cache,h,[t,Object(o.e)(e,a),n.context,{field:e,fragmentMap:n.fragmentMap}])))),[2,l.then((function(t){return void 0===t&&(t=u),e.directives&&e.directives.forEach((function(e){"export"===e.name.value&&e.arguments&&e.arguments.forEach((function(e){"as"===e.name.value&&"StringValue"===e.value.kind&&(n.exportedVariables[e.value.value]=t)}))})),e.selectionSet?null==t?t:Array.isArray(t)?m.resolveSubSelectedArray(e,t,n):e.selectionSet?m.resolveSelectionSet(e.selectionSet,t,n):void 0:t}))]}))}))},e.prototype.resolveSubSelectedArray=function(e,t,n){var r=this;return Promise.all(t.map((function(t){return null===t?null:Array.isArray(t)?r.resolveSubSelectedArray(e,t,n):e.selectionSet?r.resolveSelectionSet(e.selectionSet,t,n):void 0})))},e}(),m=new(o.h?WeakMap:Map);function v(e,t){var n=e[t];"function"==typeof n&&(e[t]=function(){return m.set(e,(m.get(e)+1)%1e15),n.apply(this,arguments)})}function g(e){e.notifyTimeout&&(clearTimeout(e.notifyTimeout),e.notifyTimeout=void 0)}var b=function(){function e(e){this.cache=e,this.listeners=new Set,this.document=null,this.lastRequestId=1,this.subscriptions=new Set,this.stopped=!1,this.dirty=!1,this.diff=null,this.observableQuery=null,m.has(e)||(m.set(e,0),v(e,"evict"),v(e,"modify"),v(e,"reset"))}return e.prototype.init=function(e){var t=e.networkStatus||d.a.loading;return this.variables&&this.networkStatus!==d.a.loading&&!Object(s.a)(this.variables,e.variables)&&(t=d.a.setVariables),Object(s.a)(e.variables,this.variables)||(this.diff=null),Object.assign(this,{document:e.document,variables:e.variables,networkError:null,graphQLErrors:this.graphQLErrors||[],networkStatus:t}),e.observableQuery&&this.setObservableQuery(e.observableQuery),e.lastRequestId&&(this.lastRequestId=e.lastRequestId),this},e.prototype.reset=function(){g(this),this.diff=null,this.dirty=!1},e.prototype.getDiff=function(e){return void 0===e&&(e=this.variables),this.diff&&Object(s.a)(e,this.variables)?this.diff:(this.updateWatch(this.variables=e),this.diff=this.cache.diff({query:this.document,variables:e,returnPartialData:!0,optimistic:!0}))},e.prototype.setDiff=function(e){var t=this,n=this.diff;this.diff=e,this.dirty||(e&&e.result)===(n&&n.result)||(this.dirty=!0,this.notifyTimeout||(this.notifyTimeout=setTimeout((function(){return t.notify()}),0)))},e.prototype.setObservableQuery=function(e){var t=this;e!==this.observableQuery&&(this.oqListener&&this.listeners.delete(this.oqListener),this.observableQuery=e,e?(e.queryInfo=this,this.listeners.add(this.oqListener=function(){t.getDiff().fromOptimisticTransaction?e.observe():e.reobserve()})):delete this.oqListener)},e.prototype.notify=function(){var e=this;g(this),this.shouldNotify()&&this.listeners.forEach((function(t){return t(e)})),this.dirty=!1},e.prototype.shouldNotify=function(){if(!this.dirty||!this.listeners.size)return!1;if(Object(d.b)(this.networkStatus)&&this.observableQuery){var e=this.observableQuery.options.fetchPolicy;if("cache-only"!==e&&"cache-and-network"!==e)return!1}return!0},e.prototype.stop=function(){if(!this.stopped){this.stopped=!0,this.cancel(),delete this.cancel,this.subscriptions.forEach((function(e){return e.unsubscribe()}));var e=this.observableQuery;e&&e.stopPolling()}},e.prototype.cancel=function(){},e.prototype.updateWatch=function(e){var t=this;void 0===e&&(e=this.variables);var n=this.observableQuery;n&&"no-cache"===n.options.fetchPolicy||this.lastWatch&&this.lastWatch.query===this.document&&Object(s.a)(e,this.lastWatch.variables)||(this.cancel(),this.cancel=this.cache.watch(this.lastWatch={query:this.document,variables:e,optimistic:!0,callback:function(e){return t.setDiff(e)}}))},e.prototype.shouldWrite=function(e,t){var n=this.lastWrite;return!(n&&n.dmCount===m.get(this.cache)&&Object(s.a)(t,n.variables)&&Object(s.a)(e.data,n.result.data))},e.prototype.markResult=function(e,t,n){var r=this;this.graphQLErrors=Object(o.B)(e.errors)?e.errors:[],this.reset(),"no-cache"===t.fetchPolicy?this.diff={result:e.data,complete:!0}:!this.stopped&&n&&(_(e,t.errorPolicy)?this.cache.performTransaction((function(n){if(r.shouldWrite(e,t.variables))n.writeQuery({query:r.document,data:e.data,variables:t.variables}),r.lastWrite={result:e,variables:t.variables,dmCount:m.get(r.cache)};else if(r.diff&&r.diff.complete)return void(e.data=r.diff.result);var a=n.diff({query:r.document,variables:t.variables,returnPartialData:!0,optimistic:!0});r.stopped||r.updateWatch(t.variables),r.diff=a,a.complete&&(e.data=a.result)})):this.lastWrite=void 0)},e.prototype.markReady=function(){return this.networkError=null,this.networkStatus=d.a.ready},e.prototype.markError=function(e){return this.networkStatus=d.a.error,this.lastWrite=void 0,this.reset(),e.graphQLErrors&&(this.graphQLErrors=e.graphQLErrors),e.networkError&&(this.networkError=e.networkError),e},e}();function _(e,t){void 0===t&&(t="none");var n="ignore"===t||"all"===t,r=!Object(o.w)(e);return!r&&n&&e.data&&(r=!0),r}var y=Object.prototype.hasOwnProperty,E=function(){function e(e){var t=e.cache,n=e.link,r=e.queryDeduplication,a=void 0!==r&&r,i=e.onBroadcast,c=e.ssrMode,s=void 0!==c&&c,u=e.clientAwareness,l=void 0===u?{}:u,d=e.localState,f=e.assumeImmutableResults;this.clientAwareness={},this.queries=new Map,this.fetchCancelFns=new Map,this.transformCache=new(o.h?WeakMap:Map),this.queryIdCounter=1,this.requestIdCounter=1,this.mutationIdCounter=1,this.inFlightLinkObservables=new Map,this.cache=t,this.link=n,this.queryDeduplication=a,this.clientAwareness=l,this.localState=d||new h({cache:t}),this.ssrMode=s,this.assumeImmutableResults=!!f,(this.onBroadcast=i)&&(this.mutationStore=Object.create(null))}return e.prototype.stop=function(){var e=this;this.queries.forEach((function(t,n){e.stopQueryNoBroadcast(n)})),this.cancelPendingFetches(new a.a(12))},e.prototype.cancelPendingFetches=function(e){this.fetchCancelFns.forEach((function(t){return t(e)})),this.fetchCancelFns.clear()},e.prototype.mutate=function(e){var t=e.mutation,n=e.variables,i=e.optimisticResponse,c=e.updateQueries,s=e.refetchQueries,l=void 0===s?[]:s,d=e.awaitRefetchQueries,f=void 0!==d&&d,p=e.update,h=e.errorPolicy,m=void 0===h?"none":h,v=e.fetchPolicy,g=e.context,b=void 0===g?{}:g;return Object(r.b)(this,void 0,void 0,(function(){var e,s,d;return Object(r.d)(this,(function(h){switch(h.label){case 0:return Object(a.b)(t,13),Object(a.b)(!v||"no-cache"===v,14),e=this.generateMutationId(),t=this.transform(t).document,n=this.getVariables(t,n),this.transform(t).hasClientExports?[4,this.localState.addExportedVariables(t,n,b)]:[3,2];case 1:n=h.sent(),h.label=2;case 2:return s=this.mutationStore&&(this.mutationStore[e]={mutation:t,variables:n,loading:!0,error:null}),i&&this.markMutationOptimistic(i,{mutationId:e,document:t,variables:n,errorPolicy:m,updateQueries:c,update:p}),this.broadcastQueries(),d=this,[2,new Promise((function(a,h){var g,_;d.getObservableFromLink(t,Object(r.a)(Object(r.a)({},b),{optimisticResponse:i}),n,!1).subscribe({next:function(r){if(Object(o.w)(r)&&"none"===m)_=new u.a({graphQLErrors:r.errors});else{if(s&&(s.loading=!1,s.error=null),"no-cache"!==v)try{d.markMutationResult({mutationId:e,result:r,document:t,variables:n,errorPolicy:m,updateQueries:c,update:p})}catch(e){return void(_=new u.a({networkError:e}))}g=r}},error:function(t){s&&(s.loading=!1,s.error=t),i&&d.cache.removeOptimistic(e),d.broadcastQueries(),h(new u.a({networkError:t}))},complete:function(){if(_&&s&&(s.loading=!1,s.error=_),i&&d.cache.removeOptimistic(e),d.broadcastQueries(),_)h(_);else{"function"==typeof l&&(l=l(g));var t=[];Object(o.B)(l)&&l.forEach((function(e){if("string"==typeof e)d.queries.forEach((function(n){var r=n.observableQuery;r&&r.queryName===e&&t.push(r.refetch())}));else{var n={query:e.query,variables:e.variables,fetchPolicy:"network-only"};e.context&&(n.context=e.context),t.push(d.query(n))}})),Promise.all(f?t:[]).then((function(){"ignore"===m&&g&&Object(o.w)(g)&&delete g.errors,a(g)}),h)}}})}))]}}))}))},e.prototype.markMutationResult=function(e,t){var n=this;if(void 0===t&&(t=this.cache),_(e.result,e.errorPolicy)){var r=[{result:e.result.data,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}],a=e.updateQueries;a&&this.queries.forEach((function(i,c){var s=i.observableQuery,u=s&&s.queryName;if(u&&y.call(a,u)){var l=a[u],d=n.queries.get(c),f=d.document,p=d.variables,h=t.diff({query:f,variables:p,returnPartialData:!0,optimistic:!1}),m=h.result;if(h.complete&&m){var v=l(m,{mutationResult:e.result,queryName:f&&Object(o.s)(f)||void 0,queryVariables:p});v&&r.push({result:v,dataId:"ROOT_QUERY",query:f,variables:p})}}})),t.performTransaction((function(t){r.forEach((function(e){return t.write(e)}));var n=e.update;n&&n(t,e.result)}),null)}},e.prototype.markMutationOptimistic=function(e,t){var n=this,a="function"==typeof e?e(t.variables):e;return this.cache.recordOptimisticTransaction((function(e){try{n.markMutationResult(Object(r.a)(Object(r.a)({},t),{result:{data:a}}),e)}catch(e){}}),t.mutationId)},e.prototype.fetchQuery=function(e,t,n){return this.fetchQueryObservable(e,t,n).promise},e.prototype.getQueryStore=function(){var e=Object.create(null);return this.queries.forEach((function(t,n){e[n]={variables:t.variables,networkStatus:t.networkStatus,networkError:t.networkError,graphQLErrors:t.graphQLErrors}})),e},e.prototype.resetErrors=function(e){var t=this.queries.get(e);t&&(t.networkError=void 0,t.graphQLErrors=[])},e.prototype.transform=function(e){var t=this.transformCache;if(!t.has(e)){var n=this.cache.transformDocument(e),r=Object(o.J)(this.cache.transformForLink(n)),a=this.localState.clientQuery(n),i=r&&this.localState.serverQuery(r),c={document:n,hasClientExports:Object(o.x)(n),hasForcedResolvers:this.localState.shouldForceResolvers(n),clientQuery:a,serverQuery:i,defaultVars:Object(o.m)(Object(o.r)(n))},s=function(e){e&&!t.has(e)&&t.set(e,c)};s(e),s(n),s(a),s(i)}return t.get(e)},e.prototype.getVariables=function(e,t){return Object(r.a)(Object(r.a)({},this.transform(e).defaultVars),t)},e.prototype.watchQuery=function(e){void 0===(e=Object(r.a)(Object(r.a)({},e),{variables:this.getVariables(e.query,e.variables)})).notifyOnNetworkStatusChange&&(e.notifyOnNetworkStatusChange=!1);var t=new b(this.cache),n=new l.a({queryManager:this,queryInfo:t,options:e});return this.queries.set(n.queryId,t),t.init({document:e.query,observableQuery:n,variables:e.variables}),n},e.prototype.query=function(e){var t=this;Object(a.b)(e.query,15),Object(a.b)("Document"===e.query.kind,16),Object(a.b)(!e.returnPartialData,17),Object(a.b)(!e.pollInterval,18);var n=this.generateQueryId();return this.fetchQuery(n,e).finally((function(){return t.stopQuery(n)}))},e.prototype.generateQueryId=function(){return String(this.queryIdCounter++)},e.prototype.generateRequestId=function(){return this.requestIdCounter++},e.prototype.generateMutationId=function(){return String(this.mutationIdCounter++)},e.prototype.stopQueryInStore=function(e){this.stopQueryInStoreNoBroadcast(e),this.broadcastQueries()},e.prototype.stopQueryInStoreNoBroadcast=function(e){var t=this.queries.get(e);t&&t.stop()},e.prototype.clearStore=function(){return this.cancelPendingFetches(new a.a(19)),this.queries.forEach((function(e){e.observableQuery?e.networkStatus=d.a.loading:e.stop()})),this.mutationStore&&(this.mutationStore=Object.create(null)),this.cache.reset()},e.prototype.resetStore=function(){var e=this;return this.clearStore().then((function(){return e.reFetchObservableQueries()}))},e.prototype.reFetchObservableQueries=function(e){var t=this;void 0===e&&(e=!1);var n=[];return this.queries.forEach((function(r,a){var i=r.observableQuery;if(i&&i.hasObservers()){var o=i.options.fetchPolicy;i.resetLastResults(),"cache-only"===o||!e&&"standby"===o||n.push(i.refetch()),t.getQuery(a).setDiff(null)}})),this.broadcastQueries(),Promise.all(n)},e.prototype.setObservableQuery=function(e){this.getQuery(e.queryId).setObservableQuery(e)},e.prototype.startGraphQLSubscription=function(e){var t=this,n=e.query,r=e.fetchPolicy,a=e.errorPolicy,i=e.variables,c=e.context,s=void 0===c?{}:c;n=this.transform(n).document,i=this.getVariables(n,i);var l=function(e){return t.getObservableFromLink(n,s,e,!1).map((function(i){if("no-cache"!==r&&(_(i,a)&&t.cache.write({query:n,result:i.data,dataId:"ROOT_SUBSCRIPTION",variables:e}),t.broadcastQueries()),Object(o.w)(i))throw new u.a({graphQLErrors:i.errors});return i}))};if(this.transform(n).hasClientExports){var d=this.localState.addExportedVariables(n,i,s).then(l);return new o.c((function(e){var t=null;return d.then((function(n){return t=n.subscribe(e)}),e.error),function(){return t&&t.unsubscribe()}}))}return l(i)},e.prototype.stopQuery=function(e){this.stopQueryNoBroadcast(e),this.broadcastQueries()},e.prototype.stopQueryNoBroadcast=function(e){this.stopQueryInStoreNoBroadcast(e),this.removeQuery(e)},e.prototype.removeQuery=function(e){this.fetchCancelFns.delete(e),this.getQuery(e).stop(),this.queries.delete(e)},e.prototype.broadcastQueries=function(){this.onBroadcast&&this.onBroadcast(),this.queries.forEach((function(e){return e.notify()}))},e.prototype.getLocalState=function(){return this.localState},e.prototype.getObservableFromLink=function(e,t,n,a){var c,s,u=this;void 0===a&&(a=null!==(c=null==t?void 0:t.queryDeduplication)&&void 0!==c?c:this.queryDeduplication);var l=this.transform(e).serverQuery;if(l){var d=this.inFlightLinkObservables,f=this.link,p={query:l,variables:n,operationName:Object(o.s)(l)||void 0,context:this.prepareContext(Object(r.a)(Object(r.a)({},t),{forceFetch:!a}))};if(t=p.context,a){var h=d.get(l)||new Map;d.set(l,h);var m=JSON.stringify(n);if(!(s=h.get(m))){var v=new o.a([Object(i.execute)(f,p)]);h.set(m,s=v),v.cleanup((function(){h.delete(m)&&h.size<1&&d.delete(l)}))}}else s=new o.a([Object(i.execute)(f,p)])}else s=new o.a([o.c.of({data:{}})]),t=this.prepareContext(t);var g=this.transform(e).clientQuery;return g&&(s=Object(o.f)(s,(function(e){return u.localState.runResolvers({document:g,remoteResult:e,context:t,variables:n})}))),s},e.prototype.getResultsFromLink=function(e,t,n){var r=e.lastRequestId;return Object(o.f)(this.getObservableFromLink(e.document,n.context,n.variables),(function(a){var i=Object(o.B)(a.errors);if(r>=e.lastRequestId){if(i&&"none"===n.errorPolicy)throw e.markError(new u.a({graphQLErrors:a.errors}));e.markResult(a,n,t),e.markReady()}var c={data:a.data,loading:!1,networkStatus:e.networkStatus||d.a.ready};return i&&"ignore"!==n.errorPolicy&&(c.errors=a.errors),c}),(function(t){var n=Object(u.b)(t)?t:new u.a({networkError:t});throw r>=e.lastRequestId&&e.markError(n),n}))},e.prototype.fetchQueryObservable=function(e,t,n){var r=this;void 0===n&&(n=d.a.loading);var a=this.transform(t.query).document,i=this.getVariables(a,t.variables),c=this.getQuery(e),s=c.networkStatus,u=t.fetchPolicy,l=void 0===u?"cache-first":u,f=t.errorPolicy,p=void 0===f?"none":f,h=t.returnPartialData,m=void 0!==h&&h,v=t.notifyOnNetworkStatusChange,g=void 0!==v&&v,b=t.context,_=void 0===b?{}:b;("cache-first"===l||"cache-and-network"===l||"network-only"===l||"no-cache"===l)&&g&&"number"==typeof s&&s!==n&&Object(d.b)(n)&&("cache-first"!==l&&(l="cache-and-network"),m=!0);var y=Object.assign({},t,{query:a,variables:i,fetchPolicy:l,errorPolicy:p,returnPartialData:m,notifyOnNetworkStatusChange:g,context:_}),E=function(e){return y.variables=e,r.fetchQueryByPolicy(c,y,n)};this.fetchCancelFns.set(e,(function(e){Promise.resolve().then((function(){return O.cancel(e)}))}));var O=new o.a(this.transform(y.query).hasClientExports?this.localState.addExportedVariables(y.query,y.variables,y.context).then(E):E(y.variables));return O.cleanup((function(){r.fetchCancelFns.delete(e);var n=t.nextFetchPolicy;n&&(t.nextFetchPolicy=void 0,t.fetchPolicy="function"==typeof n?n.call(t,t.fetchPolicy||"cache-first"):n)})),O},e.prototype.fetchQueryByPolicy=function(e,t,n){var a=this,i=t.query,c=t.variables,s=t.fetchPolicy,u=t.errorPolicy,l=t.returnPartialData,f=t.context;e.init({document:i,variables:c,lastRequestId:this.generateRequestId(),networkStatus:n});var p=function(){return e.getDiff(c)},h=function(t,n){void 0===n&&(n=e.networkStatus||d.a.loading);var s=t.result;var u=function(e){return o.c.of(Object(r.a)({data:e,loading:Object(d.b)(n),networkStatus:n},t.complete?null:{partial:!0}))};return a.transform(i).hasForcedResolvers?a.localState.runResolvers({document:i,remoteResult:{data:s},context:f,variables:c,onlyRunForcedResolvers:!0}).then((function(e){return u(e.data)})):u(s)},m=function(t){return a.getResultsFromLink(e,t,{variables:c,context:f,fetchPolicy:s,errorPolicy:u})};switch(s){default:case"cache-first":return(v=p()).complete?[h(v,e.markReady())]:l?[h(v),m(!0)]:[m(!0)];case"cache-and-network":var v;return(v=p()).complete||l?[h(v),m(!0)]:[m(!0)];case"cache-only":return[h(p(),e.markReady())];case"network-only":return[m(!0)];case"no-cache":return[m(!1)];case"standby":return[]}},e.prototype.getQuery=function(e){return e&&!this.queries.has(e)&&this.queries.set(e,new b(this.cache)),this.queries.get(e)},e.prototype.prepareContext=function(e){void 0===e&&(e={});var t=this.localState.prepareContext(e);return Object(r.a)(Object(r.a)({},t),{clientAwareness:this.clientAwareness})},e}();function O(e,t){return Object(o.j)(e,t,t.variables&&{variables:Object(r.a)(Object(r.a)({},e.variables),t.variables)})}var w=function(){function e(e){var t=this;this.defaultOptions={},this.resetStoreCallbacks=[],this.clearStoreCallbacks=[];var n=e.uri,r=e.credentials,o=e.headers,s=e.cache,u=e.ssrMode,l=void 0!==u&&u,d=e.ssrForceFetchDelay,f=void 0===d?0:d,p=e.connectToDevTools,m=void 0===p?"object"==typeof window&&!window.__APOLLO_CLIENT__&&!1:p,v=e.queryDeduplication,g=void 0===v||v,b=e.defaultOptions,_=e.assumeImmutableResults,y=void 0!==_&&_,O=e.resolvers,w=e.typeDefs,C=e.fragmentMatcher,S=e.name,A=e.version,k=e.link;if(k||(k=n?new c.a({uri:n,credentials:r,headers:o}):i.ApolloLink.empty()),!s)throw new a.a(9);this.link=k,this.cache=s,this.disableNetworkFetches=l||f>0,this.queryDeduplication=g,this.defaultOptions=b||{},this.typeDefs=w,f&&setTimeout((function(){return t.disableNetworkFetches=!1}),f),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this),m&&"object"==typeof window&&(window.__APOLLO_CLIENT__=this),this.version="3.3.11",this.localState=new h({cache:s,client:this,resolvers:O,fragmentMatcher:C}),this.queryManager=new E({cache:this.cache,link:this.link,queryDeduplication:g,ssrMode:l,clientAwareness:{name:S,version:A},localState:this.localState,assumeImmutableResults:y,onBroadcast:m?function(){t.devToolsHookCb&&t.devToolsHookCb({action:{},state:{queries:t.queryManager.getQueryStore(),mutations:t.queryManager.mutationStore||{}},dataWithOptimisticResults:t.cache.extract(!0)})}:void 0})}return e.prototype.stop=function(){this.queryManager.stop()},e.prototype.watchQuery=function(e){return this.defaultOptions.watchQuery&&(e=O(this.defaultOptions.watchQuery,e)),!this.disableNetworkFetches||"network-only"!==e.fetchPolicy&&"cache-and-network"!==e.fetchPolicy||(e=Object(r.a)(Object(r.a)({},e),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(e)},e.prototype.query=function(e){return this.defaultOptions.query&&(e=O(this.defaultOptions.query,e)),Object(a.b)("cache-and-network"!==e.fetchPolicy,10),this.disableNetworkFetches&&"network-only"===e.fetchPolicy&&(e=Object(r.a)(Object(r.a)({},e),{fetchPolicy:"cache-first"})),this.queryManager.query(e)},e.prototype.mutate=function(e){return this.defaultOptions.mutate&&(e=O(this.defaultOptions.mutate,e)),this.queryManager.mutate(e)},e.prototype.subscribe=function(e){return this.queryManager.startGraphQLSubscription(e)},e.prototype.readQuery=function(e,t){return void 0===t&&(t=!1),this.cache.readQuery(e,t)},e.prototype.readFragment=function(e,t){return void 0===t&&(t=!1),this.cache.readFragment(e,t)},e.prototype.writeQuery=function(e){this.cache.writeQuery(e),this.queryManager.broadcastQueries()},e.prototype.writeFragment=function(e){this.cache.writeFragment(e),this.queryManager.broadcastQueries()},e.prototype.__actionHookForDevTools=function(e){this.devToolsHookCb=e},e.prototype.__requestRaw=function(e){return Object(i.execute)(this.link,e)},e.prototype.resetStore=function(){var e=this;return Promise.resolve().then((function(){return e.queryManager.clearStore()})).then((function(){return Promise.all(e.resetStoreCallbacks.map((function(e){return e()})))})).then((function(){return e.reFetchObservableQueries()}))},e.prototype.clearStore=function(){var e=this;return Promise.resolve().then((function(){return e.queryManager.clearStore()})).then((function(){return Promise.all(e.clearStoreCallbacks.map((function(e){return e()})))}))},e.prototype.onResetStore=function(e){var t=this;return this.resetStoreCallbacks.push(e),function(){t.resetStoreCallbacks=t.resetStoreCallbacks.filter((function(t){return t!==e}))}},e.prototype.onClearStore=function(e){var t=this;return this.clearStoreCallbacks.push(e),function(){t.clearStoreCallbacks=t.clearStoreCallbacks.filter((function(t){return t!==e}))}},e.prototype.reFetchObservableQueries=function(e){return this.queryManager.reFetchObservableQueries(e)},e.prototype.extract=function(e){return this.cache.extract(e)},e.prototype.restore=function(e){return this.cache.restore(e)},e.prototype.addResolvers=function(e){this.localState.addResolvers(e)},e.prototype.setResolvers=function(e){this.localState.setResolvers(e)},e.prototype.getResolvers=function(){return this.localState.getResolvers()},e.prototype.setLocalStateFragmentMatcher=function(e){this.localState.setFragmentMatcher(e)},e.prototype.setLink=function(e){this.link=this.queryManager.link=e},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"d",(function(){return v})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return b}));var r=n(7),a=n.n(r),i=n(44),o=n(37);function c(e,t){Object(o.a)(2,arguments);var n=Object(i.a)(e),r=Object(i.a)(t);return n.getTime()<r.getTime()}var s=n(1164),u=n(1165),l=n(1168),d=n(1367),f=n(248),p=n(405),h=n(120),m=function(e){if(e){var t=new RegExp(/(?:(?![ \(\),\x2D\/-;A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BEF\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D66-\u0D6F\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F29\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD30-\uDD39\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC66-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF39]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCE9\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])[\s\S])/g),n=e.trim();if(n.length>0){var r=n.match(t);return[null===r,Object(f.e)(r)]}}return[!0,[]]};function v(e,t){if(!e)return"vkui_edu_create_broadcast_time_error_required";var n,r=a()(e,2),i=r[0],o=r[1];t&&(n=new Date(t.year,t.month-1,t.day));var u=new Date;return!i&&0!==i||!o&&0!==o?"vkui_edu_create_broadcast_time_error_required":t&&c(Object(s.a)(n,i),u)?"vkui_edu_create_broadcast_time_error_already_passed":null}function g(e){if(!e)return"vkui_edu_create_broadcast_date_error_required";var t=new Date(e.year,e.month-1,e.day),n=new Date;return c(t,n=new Date(n.getFullYear(),n.getMonth(),n.getDate()))?"vkui_edu_create_broadcast_date_error":null}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.split("."),n=t.every((function(e){return"0"!==e}));if(!n)return Object(h.b)("vkui_edu_settings_bdate_error_required","");var r=t.reverse(),i=a()(r,3),o=i[0],s=i[1],f=i[2],m=Object(p.d)(),v=Object(p.c)(),g=new Date(Number(o),Number(s),Number(f)),b=Object(u.a)(g,m),_=c(g,v),y=Object(l.a)(m,"dd.MM.yyyy",{locale:d.a}),E=Object(l.a)(v,"dd.MM.yyyy",{locale:d.a});return b?_?null:Object(h.b)("vkui_edu_settings_bdate_error_is_before","").replace("{date}",E):Object(h.b)("vkui_edu_settings_bdate_error_is_after","").replace("{date}",y)}},function(e,t,n){"use strict";var r;function a(e){return{type:r.SET_SCHOOL_EDIT_INFO,data:e}}function i(e){return{type:r.UPDATE_SCHOOL_EDIT_INFO,data:e}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),function(e){e.SET_SCHOOL_EDIT_INFO="SET_SCHOOL_EDIT_INFO",e.UPDATE_SCHOOL_EDIT_INFO="UPDATE_SCHOOL_EDIT_INFO"}(r||(r={}))},function(e,t,n){"use strict";e.exports=n(1022)},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r,a=n(2),i=n.n(a),o=n(0),c=n.n(o),s=n(1),u=n(106),l=n(100),d=n(23);function f(){return c.a.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{d:"M28 52c13.255 0 24-10.745 24-24S41.255 4 28 4 4 14.745 4 28s10.745 24 24 24z",fill:"#FFCC33"}),c.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.857 40.857a1.286 1.286 0 010 2.572h-7.714a1.286 1.286 0 010-2.572h7.714zm-1.286-12c.857-.857 1.714 1.715 6 1.715 3.429 0 6.429-1.715 6.857-.858.429.858-2.571 4.286-6.857 4.286-5.143 0-6.857-4.286-6-5.143zm-5.142 0c.857.857-.858 5.143-6 5.143-4.286 0-7.286-3.428-6.858-4.286.429-.857 3.429.858 6.858.858 4.285 0 5.142-2.572 6-1.715zm9.428-10.285c.857-.858 2.572 2.142 6 3.428 3.429 1.286 4.286 1.286 4.286 2.572 0 .857-.857 1.714-5.143 0-4.286-1.715-6-5.143-5.143-6zm-13.714 0c.857.857-.857 4.285-5.143 6-4.286 1.714-5.143.857-5.143 0 0-1.286.857-1.286 4.286-2.572 3.428-1.286 5.143-4.286 6-3.428z",fill:"#805446"}))}var p=(r={},i()(r,l.a,"vkui_common_api_error_access"),i()(r,l.d,"vkui_common_api_error_access"),r),h=function(e){var t,n=Object(u.c)().getLangKey,r=e.error,a=e.onRetry;return t="string"==typeof r?r:r&&"error_text"in r?r.error_text:r&&"error_code"in r&&p[r.error_code]?n(p[r.error_code]):n("vkui_common_error_text_common"),c.a.createElement(s.C,null,c.a.createElement(s.cb,{icon:c.a.createElement(f,null),header:n("vkui_common_error"),action:c.a.createElement(c.a.Fragment,null,a&&c.a.createElement(s.j,{size:"m",type:"button",onClick:a},n("vkui_common_error_try_again_btn")),c.a.createElement(s.t,null,c.a.createElement(s.L,{href:"mailto:".concat(d.S)},n("vkui_edu_error_support_btn"))))},t))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return c}));var r={"/mail":{new_chat:{title:"vkui_edu_messages_new_chat_title"},info:{title:"vkui_edu_messages_info_title"},add_to_chat:{title:"vkui_edu_messages_add_to_chat_title"},show_medias:{title:"vkui_edu_messages_show_medias_title"},flush_history:{title:"vkui_edu_messages_flush_history_question_title",scrolling:"no"},leave_chat:{title:"vkui_edu_messages_leave_chat_title",scrolling:"no"},invite_link:{title:"vkui_edu_messages_invite_link_title"},reset_link:{title:"vkui_edu_messages_reset_link_title"},unpin:{title:"vkui_edu_messages_unpin_title"},edit_chat:{title:"vkui_edu_messages_edit_chat_title",test:function(e){return"title"===e.query.opt}},change_chat_name:{title:"vkui_edu_messages_info_title"},return_to_chat:{title:"",isNewMail:!0},add_user:{title:"",isNewMail:!0},toggle_community_block:{title:"",isNewMail:!0},create_chat:{title:"vkui_edu_messages_new_chat_title"}},"/attachments":{choose_photo:{title:"vkui_edu_messages_choose_photo_title",test:function(e){return/mail\d+/.test(e.query.target||"")}},choose_video:{title:"vkui_edu_messages_choose_video_title",test:function(e){return/mail\d+/.test(e.query.target||"")}},attach_video:{title:"vkui_edu_messages_choose_video_title",test:function(e){return/mail\d+/.test(e.query.target||"")}},choose_doc:{title:"vkui_edu_messages_choose_doc_title",test:function(e){return/mail\d+/.test(e.query.target||"")}},attach_poll:{title:"vkui_edu_messages_attach_poll_title",test:function(e){return/mail\d+/.test(e.query.target||"")}},add:{title:"",isNewMail:!0,test:function(e){return/mail\d+/.test(e.query.target||"")}}}},a=[{reg:/^\/poll\d+_\d+$/,act:"stats",title:"vkui_edu_messages_poll_stats_title"}];function i(e){if(!e.query||!e.query.act)return null;var t,n=r[e.path],i=e.query.act||"";if(n){var o=n[i];if(o&&(!o.test||o.test(e)))return o}return a.some((function(n){return!(n.act!==i||!n.reg.test(e.path))&&(t=n,!0)})),t||null}function o(e){switch(e.act||""){case"":case"show":case"unread":case"important":return!0}return!1}function c(e){return Object.keys(e.query).some((function(t){return t.startsWith("answers[")&&""!==e.query[t].trim()}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="school_documents"},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="school_requests"},function(e,t,n){e.exports=n(1106).Observable},function(e,t,n){var r=n(601),a=n(296),i=n(1113),o=Math.max;e.exports=function(e,t,n){var c=null==e?0:e.length;if(!c)return-1;var s=null==n?0:i(n);return s<0&&(s=o(c+s,0)),r(e,a(t,3),s)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0),a=n.n(r),i=function(e){return a.a.createElement("span",e," · ")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(9),a=n(24),i=null,o=Object(r.createEffect)((function(e){var t,n=e.schoolId;null===(t=i)||void 0===t||t.abort(),i=new AbortController;var r={school_id:n,code:"\n        var schoolId = Args.school_id;\n        var docs = API.docs.get({\n          owner_id: -schoolId,\n        });\n\n        var videos = API.video.get({\n          owner_id: -schoolId,\n          count: 10\n        });\n\n        var articles = API.education.getSchoolArticles({\n          school_id: schoolId,\n          count: 10\n        });\n\n        var grades = API.education.getGrades({\n          school_id: schoolId,\n        });\n\n        var chats = API.education.getChats({\n          school_id: schoolId,\n        });\n\n        var students = API.education.getSchoolMembers({\n          group_id: schoolId,\n          fields: 'photo_200',\n          count: 20,\n          role: 1\n        });\n\n        var teachers = API.education.getSchoolMembers({\n          group_id: schoolId,\n          fields: 'photo_200',\n          count: 20,\n          role: 2\n        });\n\n        return {\n          docs: {\n            count: docs.count,\n          },\n          videos: {\n            count: videos.count,\n            items: videos.items\n          },\n          articles: {\n            count: articles.count,\n            items: articles.items\n          },\n          students: {\n            count: students.count,\n            items: students.items,\n          },\n          teachers: {\n            count: teachers.count,\n            items: teachers.items,\n          },\n          grades: {\n            count: grades.length,\n          },\n          chats: {\n            count: chats.count,\n          }\n        };\n      "};return Object(a.a)("execute",r,{signal:i.signal}).then((function(e){return i=null,e})).catch((function(e){e.name}))}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(9),a=Object(r.createStore)({isLoaded:!1,teachers:[],students:[],articles:[],videos:[],counters:null})},function(e,t,n){"use strict";n.r(t),n.d(t,"CallsList",(function(){return q}));var r=n(21),a=n.n(r),i=n(0),o=n.n(i),c=n(26),s=n.n(c),u=n(1),l=n(106),d=n(32),f=n(28),p=n(5),h=n(29),m=n(599),v=n(627),g=n(401),b=n(59),_=(n(614),n(370)),y=function(e){var t=e.compact,n=e.hasUpcomingEvent,r=e.schoolId,a=Object(l.c)().getLangKey,i=Object(f.b)(),c=i.calls,s=i.callsLib,d=Object(_.a)(r),p=Object(b.e)(c)||!s;return o.a.createElement("div",{className:Object(u.Lb)("CallsListItem",{"CallsListItem--compact":t})},o.a.createElement("div",{className:"CallsListItem__mainInfo"},o.a.createElement(u.Fb,{level:"2",weight:"medium",className:"CallListItem__title"},a("vkui_edu_new_event_one_click")),o.a.createElement(u.E,{weight:"regular",className:Object(u.Lb)("CallsListItem__description",{"CallsListItem__description--compact":t})},a("vkui_edu_calls_event_start_description"))),o.a.createElement("div",{className:Object(u.Lb)("CallsListItem__buttonsGroup",{"CallsListItem__buttonsGroup--compact":t})},o.a.createElement(u.j,{className:"CallsListItem__callButton",size:"m",mode:n?"secondary":"primary",before:o.a.createElement(g.a,{width:24,height:24}),onClick:d,disabled:p,stretched:t},a("vkui_edu_calls_start_lesson"))))},E=n(1365),O=n(17),w=n.n(O),C=n(18),S=n(10),A=n(19),k="videocam_16",j=!1;function T(){j||(Object(S.a)(new w.a({id:k,viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="videocam_16"><path fill-rule="evenodd" clip-rule="evenodd" d="M4 3.75a2 2 0 00-2 2v4.5a2 2 0 002 2h5a2 2 0 002-2v-4.5a2 2 0 00-2-2H4zm11 2.2a.454.454 0 00-.103-.286c-.171-.21-.53-.19-.723-.095-.193.095-1.571.788-1.571.788a.233.233 0 00-.103.191v2.88c0 .075.038.145.103.19 0 0 1.097.548 1.571.789.434.22.826.033.826-.382V5.951z" fill="currentColor" /></symbol>'})),j=!0)}var I=function(e){return Object(S.b)((function(){T()}),[]),o.a.createElement(A.a,Object(C.assign)({},e,{viewBox:"0 0 16 16",id:k,width:isNaN(e.width)?16:+e.width,height:isNaN(e.height)?16:+e.height}))};I.mountIcon=T;var P=I,D=(n(1115),n(119)),N=n(674),x=n(394),R=n(221),M=n(360),L=n(332),B=n(115),F=n(67),H=n(174),V=n(173),U=function(e){var t,n=e.items,r=e.isTeacherInSchool,a=e.callsLib,c=e.schoolId,h=e.now,m=Object(l.c)().getLangKey,v=Object(d.a)().go,g=Object(f.b)().accountInfo,_=Object(B.a)().profileSchools,y=n.length>1,O=!s.a.isWebView()&&!a,w=Object(H.a)().isClientVersionMatches,C=Object(i.useMemo)((function(){return n.find((function(e){var t=e.event,n=e.call;return t||n&&Object(b.n)(n)}))||n.find((function(e){var t=e.event,n=e.call;return t||n&&Object(b.o)(n)}))}),[n]),S=C||{},A=S.event,k=S.call,j=_.find((function(e){return e.id===(null==A?void 0:A.school_id)})),T=Object(L.a)(j),I=!!k,U=k&&Object(b.n)(k),z=A&&Object(N.a)(h,{start:A.from,end:A.to}),G=A&&Object(D.b)(A,T,g.id),W=Object(x.a)(),q=Object(M.a)(),K=function(){q({event:A,call:k})},Y=Object(R.b)().getStatusText;return o.a.createElement(u.n,{after:U||y?o.a.createElement(E.a,{className:"MobileCurrentCall__icon--chevron"}):!I&&G?o.a.createElement(u.j,{mode:z?"commerce":"primary",before:o.a.createElement(P,null),onClick:K,disabled:O},o.a.createElement(u.wb,{className:"MobileCurrentCall__joinButtonText",weight:"medium"},(null==A?void 0:A.type)===F.d.CLASS?m("vkui_edu_calls_start_lesson"):m("vkui_edu_calls_start_event"))):o.a.createElement(u.j,{mode:"commerce",before:o.a.createElement(P,null),onClick:K,disabled:O||!k},o.a.createElement(u.wb,{className:"MobileCurrentCall__joinButtonText",weight:"medium"},m("vkui_edu_calls_join"))),className:Object(u.Lb)(I||!G||z?"MobileCurrentCall__btn--green":"MobileCurrentCall__btn--violet",{"MobileCurrentCall__btn--border":r,"MobileCurrentCall__btn--chevron":U||y}),onClick:function(){if(y){if(s.a.isWebView()&&w(V.a.NATIVE_EVENT_MODALS))return void s.a.send("VKWebAppCustomMessage",{action:"openCallPlateDialog"});v(p.i.CALLS_LIST_MODAL,{schoolId:c})}else U&&W()},disabled:O},o.a.createElement(u.wb,{weight:"medium",className:"MobileCurrentCall__subhead"},(t=function(e){var t=e.call,n=e.event;return n?Object(D.f)(n,{participants:!0}):t.name},y?n.map(t).join(", "):t(C||n[0]))),o.a.createElement(u.k,{level:"3",weight:"regular",className:Object(u.Lb)("MobileCurrentCall__caption",{"MobileCurrentCall__caption--green":U})},y?m("vkui_edu_mobile_calls_list_show_all_calls"):U?m("vkui_edu_mobile_calls_list_in_call"):I?m("vkui_edu_mobile_calls_list_in_process"):A&&Y({from:A.from,to:A.to,now:h})))},z=(n(1116),function(e){var t=e.items,n=e.hasCurrentCall,r=e.callsLib,a=e.schoolId,i=Object(l.c)().getLangKey,c=Object(_.a)(a),d=n||!s.a.isWebView()&&!r;return o.a.createElement(u.n,{className:Object(u.Lb)("MobileStartLesson__btn",{"MobileStartLesson__btn--violet":0===t.length}),sizeY:u.qb.COMPACT,before:o.a.createElement(g.a,{className:"MobileStartLesson__icon--camera"}),after:o.a.createElement(E.a,{className:Object(u.Lb)("MobileStartLesson__icon--chevron",{"MobileStartLesson__icon--grey":t.length>0})}),onClick:function(){d||c()},disabled:d},i("vkui_edu_mobile_calls_list_start_lesson"))}),G=Object(i.memo)(z),W=(n(1117),function(e){var t=e.isTeacherInSchool,n=e.items,r=e.hasCurrentCall,a=e.hasSchool,c=e.schoolId,l=e.now,d=s.a.isWebView(),p=Object(f.b)(),h=p.calls,m=p.callsLib,v=Object(f.a)();return Object(i.useEffect)((function(){var e=function(e){if("VKWebAppCustomMessage"===e.detail.type){var t=e.detail.data;"callStart"===t.action&&Object(b.g)(h,v),"callFinish"===t.action&&Object(b.f)(h,v)}};return d&&s.a.subscribe(e),function(){return d&&s.a.unsubscribe(e)}}),[h]),o.a.createElement(u.t,{className:"MobileCallsList__container"},o.a.createElement("div",{className:"MobileCallsList__block"},a&&o.a.createElement(G,{items:n,hasCurrentCall:r,callsLib:m,schoolId:c}),n.length>0&&o.a.createElement(U,{items:n,callsLib:m,isTeacherInSchool:t,schoolId:c,now:l})))}),q=(n(615),function(e){var t=e.compact,n=e.schoolId,r=Object(l.c)().getLangKey,c=Object(u.Ob)().viewWidth,g=Object(h.b)(c),b=Object(d.a)().go,_=Object(f.b)(),E=_.accountInfo,O=_.profileSchools,w=O.some((function(e){return e.isTeacherInSchool})),C=O.length>0,S=Object(m.a)(),A=S.items,k=S.now,j=S.loaded,T=S.hasUpcomingEvent,I=S.hasCurrentCall,P=Object(i.useMemo)((function(){return a()(A).slice(0,1)}),[A]);if(!E||!j)return null;var D=A.length>1;return C||0!==P.length?g||s.a.isWebView()?o.a.createElement(W,{isTeacherInSchool:w,hasCurrentCall:I,hasSchool:C,items:A,schoolId:n,now:k}):o.a.createElement(u.C,{separator:"auto"},o.a.createElement("div",{className:Object(u.Lb)({"CallsList__group--compact":t&&!D})},C&&o.a.createElement(o.a.Fragment,null,o.a.createElement(y,{compact:t,hasUpcomingEvent:T,schoolId:n}),P.length>0&&o.a.createElement(u.ob,{wide:!0,className:"CallsList__separator"})),o.a.createElement(v.a,{items:P,isTeacherInSchool:w,now:k,hasCurrentCall:I,compact:t,schoolId:n}),D&&o.a.createElement(o.a.Fragment,null,o.a.createElement(u.ob,{wide:!0,className:Object(u.Lb)("CallsList__separator",{"CallsList__separator--compact":t})}),o.a.createElement(u.n,{className:Object(u.Lb)({CallsList__cellButton:!t}),centered:!0,onClick:function(){return b(p.i.CALLS_LIST_MODAL,{schoolId:n})}},r("vkui_edu_calls_all_events"))))):null})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(0),a=n.n(r),i=(n(972),n(973),n(14)),o=n(1),c=function(){return a.a.createElement(o.F,{size:"l",header:a.a.createElement(a.a.Fragment,null,a.a.createElement(i.a,{width:"152px",className:"SchoolVideoBlockSkeleton__line"}),a.a.createElement(i.a,{width:"182px"})),className:"SchoolVideoBlockSkeleton"},a.a.createElement(i.a,{width:"220px",height:"126px",className:"SchoolVideoBlockSkeleton__preview"}))},s=function(e){var t=e.top;return a.a.createElement("div",{className:"SchoolVideoLineSkeleton"},t&&a.a.createElement(o.D,{className:"SchoolVideoLineSkeleton__top"},t),a.a.createElement("div",{className:"SchoolVideoLineSkeleton__content"},a.a.createElement(c,null),a.a.createElement(c,null)))}},function(e,t,n){"use strict";var r=n(466),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},c={};function s(e){return r.isMemo(e)?o:c[e.$$typeof]||a}c[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},c[r.Memo]=o;var u=Object.defineProperty,l=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(h){var a=p(n);a&&a!==h&&e(t,a,r)}var o=l(n);d&&(o=o.concat(d(n)));for(var c=s(t),m=s(n),v=0;v<o.length;++v){var g=o[v];if(!(i[g]||r&&r[g]||m&&m[g]||c&&c[g])){var b=f(n,g);try{u(t,g,b)}catch(e){}}}}return t}},function(e,t,n){e.exports=n.p+"static/preview.424e05e411000b344cdd2a09014d3b0c.jpg"},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(44),a=n(37);function i(e){Object(a.a)(1,arguments);var t=Object(r.a)(e);return t.setHours(0,0,0,0),t}},function(e,t,n){"use strict";n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return _}));var r=n(7),a=n.n(r),i=n(0),o=n.n(i),c=n(26),s=n.n(c),u=n(13),l=n(110),d=n(2),f=n.n(d);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return Object.keys(t).forEach((function(e){var r=t[e];void 0!==r&&(n[e]=r)})),n}var m=n(376),v=Object(i.createContext)({});function g(){return Object(i.useContext)(v)}var b=!1,_=function(e){var t=Object(i.useState)({}),n=a()(t,2),r=n[0],c=n[1],d=function(e){c((function(t){var n=h(t,e);return Object(u.t)(t,n)?t:n}))};return Object(i.useEffect)((function(){s.a.subscribe((function(e){switch(e.detail.type){case"VKWebAppUpdateConfig":var t=e.detail.data,n=t.app_id,r=t.app,a=t.api_host,i=t.start_time,o=t.appearance,c=t.scheme,s=t.adaptivity,f=t.back_button,p=t.integration;d({app_id:Number(n),app:r,api_host:Object(u.w)(a)?a:void 0,start_time:Object(u.u)(i)?Math.floor(i):void 0,appearance:o,scheme:c,adaptivity:s,back_button:f,integration:p});break;case"VKWebAppGetClientVersionResult":var h=e.detail.data,v=h.version,g=h.platform,_=h.build;Object(l.d)({client_version:v,client_platform:g,client_build:_}),d({client_version:v,client_platform:g,client_build:void 0!==_?Number(_):void 0});break;case"VKWebAppGetUserInfoResult":var y=e.detail.data;b||(b=!0,Object(l.e)({id:String(y.id),username:Object(m.a)(y)}))}}))}),[]),o.a.createElement(v.Provider,{value:r},e.children)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return m}));var r=n(7),a=n.n(r),i=n(2),o=n.n(i),c=n(0),s=n.n(c),u=n(294);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f,p=Object(c.createContext)(null);!function(e){e.UpdateCalls="updateCalls",e.UpdateAccount="updateAccount",e.UpdateRoute="updateRoute",e.UpdateUuid="updateUuid",e.UpdateModal="updateModal",e.UpdateSchools="updateSchools",e.UpdatePendingCall="updatePendingCall",e.UpdateSnackbars="updateSnackbars"}(f||(f={}));var h=function(e,t){switch(t.type){case f.UpdateCalls:return d(d({},e),{},{activeCalls:t.data});case f.UpdateAccount:return d(d({},e),{},{account:t.data});case f.UpdateRoute:return d(d({},e),{},{route:t.data});case f.UpdateUuid:return d(d({},e),{},{uuid:t.data});case f.UpdateModal:return d(d({},e),{},{modal:t.data});case f.UpdateSchools:return d(d({},e),{},{schools:t.data});case f.UpdatePendingCall:return d(d({},e),{},{pendingCallData:t.data});case f.UpdateSnackbars:return d(d({},e),{},{activeSnackbarList:t.data});default:return e}},m=function(e){var t=e.children,n=Object(c.useReducer)(h,{activeCalls:[],account:{},route:u.b.CALLS_DESKTOP_APP_MAIN,activeSnackbarList:[],uuid:null,modal:null,schools:[],pendingCallData:{}}),r=a()(n,2),i=r[0],o=r[1];return s.a.createElement(p.Provider,{value:[i,o]},t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return d}));var r=n(2),a=n.n(r),i=(n(1163),n(400)),o=n(167);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e){if(e&&e.photo){var t=e.photo;return[t.owner_id,t.id].join("_")}}function l(e,t){var n=t.apiRequest,r=t.crop,a=t.name;return n("photos.getOwnerPhotoUploadServer",{owner_id:t.ownerId}).then((function(c){if(c.error)return t.onDone({status:o.a.FAILED,error:c.error}),null;var s="".concat(c.upload_url),u=new FormData;return u.append("photo",e,a),r&&u.append("_square_crop","".concat(r)),Object(i.a)(s,{method:"POST",data:u}).promise.then((function(e){return JSON.parse(e)})).then((function(e){if(e.error)return t.onDone({status:o.a.FAILED,error:e.error}),null;var r=e.server,a=e.photo,i=e.hash;return n("photos.saveOwnerPhoto",{server:r,photo:a,hash:i})})).then((function(e){if(e){var n=e.photo_src_big,r=e.saved;n?(t.data.src=n,t.onDone({status:o.a.SUCCESS,src:n})):1===r?t.onDone({status:o.a.SUCCESS,src:n}):t.onDone({status:o.a.FAILED})}})).catch((function(e){t.onDone({status:o.a.FAILED,error:e})}))})),s(s({},t.data),{},{status:o.a.LOADING})}function d(e,t){var n=t.apiRequest,r=t.crop;return n("photos.getChatUploadServer",{chat_id:t.chatId}).then((function(a){var c="".concat(a.upload_url),s=new FormData;return s.append("photo",e,"photo.png"),r&&s.append("_square_crop","".concat(r)),Object(i.a)(c,{method:"POST",data:s}).promise.then((function(e){return JSON.parse(e)})).then((function(e){var t=e.response;return n("messages.setChatPhoto",{file:t})})).then((function(e){e?t.onDone({status:o.a.SUCCESS}):t.onDone({status:o.a.FAILED})})).catch((function(){t.onDone({status:o.a.FAILED})}))}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(83),a=function(e){var t=new Set;return e.map((function(e){var t=e.school,n=e.grades;return{id:t.id,name:t.name,organization_type:null==t?void 0:t.organization_type,grades:n}})).reduce((function(e,n){var a=n.id,i=n.name,o=n.grades,c=n.organization_type;return t.has(a)||(t.add(a),e.push({id:a,name:i,grades:o,organization_type:c,isTeacherInSchool:Object(r.k)(o)})),e}),[])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasTouch=t.hasTouchEvents=t.hasHover=t.hasMouse=void 0;var r,a,i,o,c=n(246),s=n(581);if(t.hasMouse=r,t.hasTouchEvents=a,t.hasHover=i,t.hasTouch=o,s.canUseDOM)if(c.isIOS&&!c.isIPadOS)t.hasMouse=r=!1,t.hasHover=i=!1,t.hasTouchEvents=a=!0,t.hasTouch=o=!0;else if(t.hasTouchEvents=a="ontouchstart"in document,t.hasTouch=o=a||"maxTouchPoints"in navigator&&navigator.maxTouchPoints>0,o){var u=!/android|mobile|tablet/i.test(navigator.userAgent);t.hasMouse=r=window.matchMedia&&matchMedia("(pointer)").matches?matchMedia("(pointer: fine)").matches:u,t.hasHover=i=r&&(window.matchMedia&&matchMedia("(hover)").matches?matchMedia("(hover: hover)").matches:u)}else t.hasMouse=r=!0,t.hasHover=i=!0;else t.hasMouse=r=!1,t.hasTouchEvents=a=!1,t.hasHover=i=!1,t.hasTouch=o=!1},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(38),a=n(141),i=n(5),o=n(32),c=n(335),s=function(){var e=Object(r.c)(a.a),t=Object(o.a)(),n=t.go,s=t.back,u=Object(c.a)(),l=u.setUserOnboardingStatus,d=u.incUserOnboardingShowsCounter,f=e.activeModal,p=e.activePanels,h=e.activeView;return{hideModal:function(){p[h]===i.j.BLANK&&i.e[f]?n(i.e[f]):(f===i.i.INTRO_ONBOARDING&&l(),f===i.i.GRADES_MANAGEMENT_ONBOARDING&&d(),s())}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var r=n(2),a=n.n(r),i=n(7),o=n.n(i),c=n(0),s=n(48),u=n(66),l=n(28),d=function(e){return e.items.includes((function(e){return e.is_educational}))},f=function(e){return null!=e&&e.grade?"grade":null!=e&&e.school?"school":"private"},p=n(5),h=n(23),m=n(24),v=n(55);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=function(e){var t=Object(l.b)(),n=t.chatInfo,r=t.accountInfo,a=Object(l.a)(),i=Object(c.useState)(!1),g=o()(i,2),_=g[0],y=g[1],E=e||{},O=E.selfDeleted,w=E.onUpdate,C=Object(v.a)().showAlertError,S=Object(m.b)().apiRequest,A=(null==e?void 0:e.peerId)||(null==n?void 0:n.peerId),k=(null==e?void 0:e.chatId)||(null==n?void 0:n.chatId)||Object(s.c)(+A),j=Object(c.useState)(0),T=o()(j,2),I=T[0],P=T[1];return Object(c.useEffect)((function(){var e=p.d.getState(),t=e.page,n=e.params,i=n.schoolId,c=n.chat;!(k>0||A>0)||!r||k>1e8||(t===p.j.SCHOOL_MESSAGES&&i&&c?S("education.getLocalChatId",{school_id:i,chat_id:c,is_school:!0}).then((function(e){var t=e.chat_id;return{localChatId:t,localPeerId:Object(s.b)(t)}})):Promise.resolve({localChatId:k,localPeerId:A})).then((function(e){var t=e.localChatId,n=e.localPeerId;Promise.all([S("messages.getChat",{chat_id:t,fields:"first_name,photo_200"}),S("education.isEducationalChats",{chat_ids:t}),S("education.getSchoolGradeByChatId",{chat_id:t})]).then((function(e){var t=o()(e,3),r=t[0],a=t[1],i=t[2];return(O||r.is_group_channel?Promise.resolve(null):S("messages.getConversationMembers",{peer_id:n})).then((function(e){return[r,e,a,i]}))})).then((function(e){var t=o()(e,4),n=t[0],r=t[1],a=t[2],i=t[3];return n.admin_id<0?S("education.getSchoolById",{school_id:Math.abs(n.admin_id),v:"5.124"}).then((function(e){return[n,e,r,a,i]})).catch((function(){return[n,null,r,a,i]})):[n,null,r,a,i]})).then((function(e){var i,c=o()(e,5),l=c[0],p=c[1],h=c[2],m=c[3],v=c[4],g=Object(s.h)(p)||Object(s.k)(p)||l.admin_id===r.id,_=l.is_group_channel?[]:function(e,t){var n=[],r=[],a=[];return Array.isArray(e)||(e=Object.values(e)),e.forEach((function(e){var i;e.first_name&&"deleted"!==e.deactivated?n.push(e):"deleted"===e.deactivated?r.push(e):e.name&&a.push(e);var o=null==t||null===(i=t.items)||void 0===i?void 0:i.find((function(t){return t.member_id===e.id}));o&&(e.is_admin=o.is_admin,e.can_kick=o.can_kick)})),[].concat(n,a,r)}(l.users,h),y=0!==(null==l||null===(i=l.push_settings)||void 0===i?void 0:i.sound),E=b(b({},l),{},{users:_});a(Object(u.l)({info:E,type:f(v),school:p,canManage:l.is_group_channel?Object(s.h)(p):g,chatSchoolGrade:v,notify:y,isEduChat:d(m),chatId:t,peerId:n})),w&&w()})).catch((function(e){(null==e?void 0:e.error_code)!==h.d&&C(e)})).finally((function(){return y(!0)}))}))}),[k,I,r]),{isLoaded:_,chatInfo:n,reloadChatInfo:function(){P((function(e){return++e}))}}}},function(e,t,n){"use strict";var r;function a(e){return{type:r.SET_QR_CODE_PREVIEW_INFO,data:e}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),function(e){e.SET_QR_CODE_PREVIEW_INFO="SET_QR_CODE_PREVIEW_INFO"}(r||(r={}))},function(e,t,n){"use strict";var r;function a(e){return{type:r.SET_USER_PROFILES_IN_STORAGE,data:e}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),function(e){e.SET_USER_PROFILES_IN_STORAGE="SET_USER_PROFILES_IN_STORAGE"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(6),a=n.n(r),i=n(12),o=n.n(i),c=n(0),s=n.n(c),u=n(112),l=n(106),d=n(13),f=(n(1027),["schools","sex","className"]),p=function(e){var t=e.schools,n=e.sex,r=e.className,i=o()(e,f),p=Object(l.c)().getLangSex,h=Object(c.useMemo)((function(){return Object(u.d)(t).map((function(e){return p(n,e)})).join(", ")}),[t,n]);return s.a.createElement("div",a()({className:Object(d.c)("UserRoles",r)},i),h)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return h}));var r=n(2),a=n.n(r),i=n(62),o=n(42),c=n(23),s=n(117);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={},f=function(e){var t=l(l(l({},Object(i.b)()),d),e),n="true"===Object(o.a)(c.y);Object(i.f)(s.a.platformCalls,t,!n)},p={OutgoingCallStartedAudio:"outgoing_call_start",OutgoingCallStartedVideo:"outgoing_call_start",OutgoingCallAddParticipantsSent:"call_users_invitation_send",OutgoingCallRemoteRinging:"outgoing_call_remote_receive",OutgoingCallAcceptedRemotely:"outgoing_call_remote_accept",AllMicsDisabled:"all_mics_disabled",ScreenSharingStarted:"screen_sharing_start",ScreenSharingStopped:"screen_sharing_end",VideoEnabled:"video_enabled",VideoDisabled:"video_disabled",CallDeclinedOrHangedLocally:"call_end",CallDeclinedOrHangedRemotely:"call_end_by_peer",HandRaised:"hand_raised",HandLowered:"hand_lowered",IncomingCallReceived:"incoming_call_receive",IncomingCallAccepted:"incoming_call_accept",GroupCallJoined:"group_call_join",MicOffWhileTalkingAlert:"mic_off_while_talking_alert",MicOffWhileTalkingEnableClick:"mic_off_while_talking_enable_click",VideoDisabledDueToBadConnectionAlert:"video_disabled_due_to_bad_connection_alert",CallConnected:"call_connected",CallDisconnected:"call_disconnected"},h=function(e){var t=e.type_voip_call_item,n=t.call_event_type,r=t.group_call_users_count,a=t.session_id;if(p[n]){"OutgoingCallStartedAudio"===n&&(d.call_type="audio"),"OutgoingCallStartedVideo"===n&&(d.call_type="video"),r&&(d.group_call_users_count=r),a&&(d.call_id=a);var i=l(l({},d),{},{event_type:p[n]});f(i)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(0),a=n(175),i=n.n(a),o=n(212),c=n.n(o),s=n(582),u=n.n(s),l=n(28),d=n(152),f=n(24),p={};function h(e,t,n){var a=Object(f.b)().apiRequest,o=Object(l.b)(),s=o.gradesStorage,h=o.userGradesStorage,m=o.accountInfo,v=Object(l.a)(),g=Object(r.useMemo)((function(){var t;return(null===(t=h[e])||void 0===t?void 0:t.map((function(e){return s[e]})))||null}),[e,s,h]),b=null!==g&&!g.some(i.a),_=Object(r.useCallback)((function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.showSpinner,o=r.reload,s=void 0===o||o;if(!s&&b)return Promise.resolve(g);var l=e;if(p[l])return p[l];var f={school_id:e,user_id:m.id,role:t,relation_type:n};return p[l]=a("education.getGrades",f,{grouping:!1,showSpinner:i}).then((function(t){var n=c()(t,"id"),r=u()(t,"id");return v(Object(d.b)(n)),v(Object(d.e)({gradeIds:r,schoolId:e})),p[l]=null,t})).catch((function(e){throw p[l]=null,e})),p[l]}),[m.id,e,t,a,v,b,g]);return{loaded:b,userGrades:g,getUserGrades:_}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r=[1,2,3,4,5,6,7,8,9,10,11,12,13,14],a=function(e){return e%r.length}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0),a=n(24),i=function(e){var t=Object(a.b)().apiRequest;return Object(r.useCallback)((function(n){var r,a=null==e||null===(r=e.info)||void 0===r?void 0:r.is_group_channel,i=e.info.id;return(a?t("education.removeChannelUser",{chat_id:i,user_id:n,school_id:e.school.id},{showSpinner:!0}):t("messages.removeChatUser",{user_id:n,chat_id:i,member_id:n,groupId:Math.abs(e.info.admin_id)},{showSpinner:!0})).then((function(){return{chatId:i,userId:n}}))}),[e,t])}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0),a=n.n(r),i=function(e){return e.split("\\n").map((function(e,t){return 0===t?e:[a.a.createElement("br",{key:t}),e]})).flat()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(2),a=n.n(r),i=n(0),o=n(48),c=n(369),s=n(28),u=n(66),l=n(24),d={};function f(e){var t=e.id,n=e.link,r=Object(l.b)().apiRequest,f=Object(s.b)().chatsStorage,p=Object(s.a)(),h=t||n,m=f[h]||null,v=null!==m,g=Object(i.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.showSpinner,s=e.reload,l=void 0===s||s;if(!l&&v)return Promise.resolve(m);var f=h;if(d[f])return d[f];var g=t?{peer_id:Object(o.b)(t)}:{link:n};return d[f]=Object(c.b)(r,g,{showSpinner:i}).then((function(e){var t,n=(t={},a()(t,e.local_id,e),a()(t,h,e),t);return p(Object(u.e)(n)),d[f]=null,e})).catch((function(e){throw d[f]=null,e})),d[f]}),[h,r,p,v,m]);return{loaded:v,chat:m,getChat:g}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,c,s=o(e),u=1;u<arguments.length;u++){for(var l in n=Object(arguments[u]))a.call(n,l)&&(s[l]=n[l]);if(r){c=r(n);for(var d=0;d<c.length;d++)i.call(n,c[d])&&(s[c[d]]=n[c[d]])}}return s}},function(e,t,n){"use strict";var r=Object.prototype.toString;e.exports=function(e){var t=r.call(e),n="[object Arguments]"===t;return n||(n="[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===r.call(e.callee)),n}},function(e,t,n){"use strict";var r="undefined"!=typeof Symbol&&Symbol,a=n(540);e.exports=function(){return"function"==typeof r&&("function"==typeof Symbol&&("symbol"==typeof r("foo")&&("symbol"==typeof Symbol("bar")&&a())))}},function(e,t,n){"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var a=Object.getOwnPropertyDescriptor(e,t);if(42!==a.value||!0!==a.enumerable)return!1}return!0}},function(e,t,n){"use strict";var r=n(436),a=n(73),i=a("%Function.prototype.apply%"),o=a("%Function.prototype.call%"),c=a("%Reflect.apply%",!0)||r.call(o,i),s=a("%Object.getOwnPropertyDescriptor%",!0),u=a("%Object.defineProperty%",!0),l=a("%Math.max%");if(u)try{u({},"a",{value:1})}catch(e){u=null}e.exports=function(e){var t=c(r,o,arguments);if(s&&u){var n=s(t,"length");n.configurable&&u(t,"length",{value:1+l(0,e.length-(arguments.length-1))})}return t};var d=function(){return c(r,i,arguments)};u?u(e.exports,"apply",{value:d}):e.exports.apply=d},function(e,t,n){"use strict";var r=n(73)("%Object.defineProperty%",!0);if(r)try{r({},"a",{value:1})}catch(e){r=null}var a=n(264)("Object.prototype.propertyIsEnumerable");e.exports=function(e,t,n,i,o,c){if(!r){if(!e(c))return!1;if(!c["[[Configurable]]"]||!c["[[Writable]]"])return!1;if(o in i&&a(i,o)!==!!c["[[Enumerable]]"])return!1;var s=c["[[Value]]"];return i[o]=s,t(i[o],s)}return r(i,o,n(c)),!0}},function(e,t,n){"use strict";var r=n(437),a=n(147);e.exports=function(e){if(void 0===e)return e;r(a,"Property Descriptor","Desc",e);var t={};return"[[Value]]"in e&&(t.value=e["[[Value]]"]),"[[Writable]]"in e&&(t.writable=e["[[Writable]]"]),"[[Get]]"in e&&(t.get=e["[[Get]]"]),"[[Set]]"in e&&(t.set=e["[[Set]]"]),"[[Enumerable]]"in e&&(t.enumerable=e["[[Enumerable]]"]),"[[Configurable]]"in e&&(t.configurable=e["[[Configurable]]"]),t}},function(e,t,n){"use strict";var r=n(235),a=n(437),i=n(147);e.exports=function(e){return void 0!==e&&(a(i,"Property Descriptor","Desc",e),!(!r(e,"[[Value]]")&&!r(e,"[[Writable]]")))}},function(e,t,n){"use strict";var r=n(438);e.exports=function(e,t){return e===t?0!==e||1/e==1/t:r(e)&&r(t)}},function(e,t,n){"use strict";var r=n(235),a=n(73)("%TypeError%"),i=n(147),o=n(547),c=n(548);e.exports=function(e){if("Object"!==i(e))throw new a("ToPropertyDescriptor requires an object");var t={};if(r(e,"enumerable")&&(t["[[Enumerable]]"]=o(e.enumerable)),r(e,"configurable")&&(t["[[Configurable]]"]=o(e.configurable)),r(e,"value")&&(t["[[Value]]"]=e.value),r(e,"writable")&&(t["[[Writable]]"]=o(e.writable)),r(e,"get")){var n=e.get;if(void 0!==n&&!c(n))throw new a("getter must be a function");t["[[Get]]"]=n}if(r(e,"set")){var s=e.set;if(void 0!==s&&!c(s))throw new a("setter must be a function");t["[[Set]]"]=s}if((r(t,"[[Get]]")||r(t,"[[Set]]"))&&(r(t,"[[Value]]")||r(t,"[[Writable]]")))throw new a("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return t}},function(e,t,n){"use strict";e.exports=function(e){return!!e}},function(e,t,n){"use strict";e.exports=n(439)},function(e,t,n){"use strict";var r=Number.isNaN||function(e){return e!=e};e.exports=Number.isFinite||function(e){return"number"==typeof e&&!r(e)&&e!==1/0&&e!==-1/0}},function(e,t,n){"use strict";var r=n(73),a=r("%Math%"),i=r("%Number%");e.exports=i.MAX_SAFE_INTEGER||a.pow(2,53)-1},function(e,t,n){"use strict";e.exports=function(e){return null===e||"function"!=typeof e&&"object"!=typeof e}},function(e,t,n){"use strict";var r=n(550),a=n(854);e.exports=function(e){var t=a(e);return t<=0?0:t>r?r:t}},function(e,t,n){"use strict";e.exports=function(e){return null===e||"function"!=typeof e&&"object"!=typeof e}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return c}));var r=n(100),a=n(92);function i(e){return e&&void 0!==e.error_code&&void 0!==e.error_msg}function o(e){return Object(a.b)(e)&&2===Object.keys(e).length&&void 0!==e.error_data&&void 0!==e.error_type}function c(e){return[r.h,r.j,r.i].includes(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r={bluetooth:"2g",cellular:"2g",ethernet:"4g",mixed:"unknown",none:"none",other:"unknown",unknown:"unknown",wifi:"3g",wimax:"4g"};function a(){if(!1===navigator.onLine)return"none";var e=navigator.connection||navigator.webkitConnection||navigator.mozConnection;if(!e)return"unknown";if(e.effectiveType)return e.effectiveType;var t=+(e.downlinkMax||e.downlink);return t?t<50?"slow-2g":t<70?"2g":t<700?"3g":"4g":r[e.type]||"unknown"}},function(e,t,n){var r=n(236),a=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=a},function(e,t,n){var r=n(265),a=n(217);e.exports=function(e){if(!a(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(171))},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t,n){var r=n(891),a=n(892),i=n(296),o=n(148);e.exports=function(e,t){return function(n,c){var s=o(n)?r:a,u=t?t():{};return s(n,e,i(c,2),u)}}},function(e,t,n){var r=n(564),a=n(901)(r);e.exports=a},function(e,t,n){var r=n(893),a=n(297);e.exports=function(e,t){return e&&r(e,t,a)}},function(e,t,n){var r=n(895),a=n(440),i=n(148),o=n(441),c=n(442),s=n(566),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=i(e),l=!n&&a(e),d=!n&&!l&&o(e),f=!n&&!l&&!d&&s(e),p=n||l||d||f,h=p?r(e.length,String):[],m=h.length;for(var v in e)!t&&!u.call(e,v)||p&&("length"==v||d&&("offset"==v||"parent"==v)||f&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||c(v,m))||h.push(v);return h}},function(e,t,n){var r=n(898),a=n(347),i=n(444),o=i&&i.isTypedArray,c=o?a(o):r;e.exports=c},function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},function(e,t,n){var r=n(926),a=n(195);e.exports=function e(t,n,i,o,c){return t===n||(null==t||null==n||!a(t)&&!a(n)?t!=t&&n!=n:r(t,n,i,o,e,c))}},function(e,t,n){var r=n(449),a=n(929),i=n(450);e.exports=function(e,t,n,o,c,s){var u=1&n,l=e.length,d=t.length;if(l!=d&&!(u&&d>l))return!1;var f=s.get(e),p=s.get(t);if(f&&p)return f==t&&p==e;var h=-1,m=!0,v=2&n?new r:void 0;for(s.set(e,t),s.set(t,e);++h<l;){var g=e[h],b=t[h];if(o)var _=u?o(b,g,h,t,e,s):o(g,b,h,e,t,s);if(void 0!==_){if(_)continue;m=!1;break}if(v){if(!a(t,(function(e,t){if(!i(v,t)&&(g===e||c(g,e,n,o,s)))return v.push(t)}))){m=!1;break}}else if(g!==b&&!c(g,b,n,o,s)){m=!1;break}}return s.delete(e),s.delete(t),m}},function(e,t,n){var r=n(180).Uint8Array;e.exports=r},function(e,t,n){var r=n(572),a=n(453),i=n(297);e.exports=function(e){return r(e,i,a)}},function(e,t,n){var r=n(452),a=n(148);e.exports=function(e,t,n){var i=t(e);return a(e)?i:r(i,n(e))}},function(e,t){e.exports=function(){return[]}},function(e,t,n){var r=n(236)(n(180),"Set");e.exports=r},function(e,t,n){var r=n(217);e.exports=function(e){return e==e&&!r(e)}},function(e,t){e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(43),a=n(0),i=n.n(a),o=(n(963),n(1)),c=n(29),s=n(25),u=Object(o.Qb)((function(){var e=Object(o.Ob)().viewWidth;return Object(c.b)(e)?i.a.createElement(r.a,{lineWidth:"126px",disableRightAvatar:!1,enableLeftAvatar:!1,separator:!0,className:"SchoolMainHeaderSkeleton--mobile",left:i.a.createElement(s.a,{size:28,className:"MainHeaderSkeleton__avatar"})}):i.a.createElement(r.a,{lineWidth:"126px"})}),{viewWidth:!0})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(0),a=n.n(r),i=(n(980),n(14)),o=n(25),c=n(1),s=function(){return a.a.createElement(c.pb,{className:"SchoolRequestsListItemSkeleton",before:a.a.createElement(o.a,{shadow:!1,size:72})},a.a.createElement(i.a,{width:"200px",className:"SchoolRequestsListItemSkeleton__line"}),a.a.createElement(i.a,{width:"131px",className:"SchoolRequestsListItemSkeleton__line"}),a.a.createElement("div",{className:"SchoolRequestsListItemSkeleton__cardDesc"},a.a.createElement(i.a,{width:"99px",height:"30px",className:"SchoolRequestsListItemSkeleton__descLine"}),a.a.createElement(i.a,{width:"99px",height:"30px"})))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(6),a=n.n(r),i=n(63),o=n(0),c=n.n(o),s=n(364),u=(n(996),function(e){var t=Object(o.useCallback)((function(e){return c.a.createElement(s.a,{className:"ScheduleEventListSkeleton__eventItem",key:e})}),[]);return c.a.createElement(i.a,a()({renderItem:t,itemsCount:4,inBorders:!1,top:null},e))})},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onDOMLoaded=function(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)},t.canUseEventListeners=t.canUseDOM=void 0;var r=!("undefined"==typeof window||!window.document||!window.document.createElement);t.canUseDOM=r;var a=r&&!!window.addEventListener;t.canUseEventListeners=a},function(e,t,n){var r=n(355),a=n(296),i=n(1036),o=n(148);e.exports=function(e,t){return(o(e)?r:i)(e,a(t,3))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(6),a=n.n(r),i=n(0),o=n.n(i),c=function(e){return o.a.createElement("svg",a()({width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",xlinkHref:"http://www.w3.org/1999/xlink"},e),o.a.createElement("path",{d:"M0 23.2C0 12.2634 0 6.79512 3.39756 3.39756C6.79512 0 12.2634 0 23.2 0H24.8C35.7366 0 41.2049 0 44.6024 3.39756C48 6.79512 48 12.2634 48 23.2V24.8C48 35.7366 48 41.2049 44.6024 44.6024C41.2049 48 35.7366 48 24.8 48H23.2C12.2634 48 6.79512 48 3.39756 44.6024C0 41.2049 0 35.7366 0 24.8V23.2Z",fill:"url(#pattern0)"}),o.a.createElement("path",{d:"M0.25 23.2C0.25 17.7246 0.250531 13.6433 0.672466 10.505C1.09343 7.37384 1.92975 5.21893 3.57434 3.57434C5.21893 1.92975 7.37384 1.09343 10.505 0.672466C13.6433 0.250531 17.7246 0.25 23.2 0.25H24.8C30.2754 0.25 34.3567 0.250531 37.495 0.672466C40.6262 1.09343 42.7811 1.92975 44.4257 3.57434C46.0703 5.21893 46.9066 7.37384 47.3275 10.505C47.7495 13.6433 47.75 17.7246 47.75 23.2V24.8C47.75 30.2754 47.7495 34.3567 47.3275 37.495C46.9066 40.6262 46.0703 42.7811 44.4257 44.4257C42.7811 46.0703 40.6262 46.9066 37.495 47.3275C34.3567 47.7495 30.2754 47.75 24.8 47.75H23.2C17.7246 47.75 13.6433 47.7495 10.505 47.3275C7.37384 46.9066 5.21893 46.0703 3.57434 44.4257C1.92975 42.7811 1.09343 40.6262 0.672466 37.495C0.250531 34.3567 0.25 30.2754 0.25 24.8V23.2Z",stroke:"black",strokeOpacity:"0.08",strokeWidth:"0.5"}),o.a.createElement("defs",null,o.a.createElement("pattern",{id:"pattern0",patternContentUnits:"objectBoundingBox",width:"1",height:"1"},o.a.createElement("use",{xlinkHref:"#image0",transform:"scale(0.00694444)"})),o.a.createElement("image",{id:"image0",width:"144",height:"144",xlinkHref:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACQCAYAAADnRuK4AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAE44SURBVHgBzX1Z0G3Hdda39jl3lO6k4UqyJQ/EOLGFTeyQYNkGwgOEoYqhGCvwApiCB6CYeaEgvFDFWMXwQgoonkwxFUkBVWGoDJUQDxAnTjyQxIljTdZk6d6rqzv95+zF7l5j9+7zy7IlO1v67zln797dvbu//ta3Vvfem05c+IMzEWHZiJeN9Ef6zuUYYvPf5fCSDINjzTmDdP3WpM/10GOQ431VIv95nus53bmWV74+HFOW79N86VD9uuNNXvnT6ofULtw1Rm2f5T+C5lc+JAkjFcTNOZLE8ppSebUsOc406I/RNTd10WwOtGXTJpNeqJ+cM/LKrLYooGsMGp0zAk8+rz/eVdrzKw2Sy7U8DDzl+zRNDdh1vwJ+XbdRQ5JuedernMPRuOzHUz59/8cxS1qSEFlJXPeUa5kUOxR9ki5puV7JR5EqB/V4uox+MK7qnn54Gf11jtpkOqYja8UVkVYI2yHblUcaD5Ay2Oej99BIPlRpA0dqSOrTMM9swxcr8B8uZ1RnAQWOqRfnnxmrqVMiDYK5ycBi38mBQsIf1JXVgAeVsUo3SCZRUErqFKZg8MsbAKO57rKVQdnvS785M18B+qojLO+ESOoboe9AyvyHMaByGccBB6nlO8Jpzs07tYoUQAkT0g6A44s0cMsnVnWJ721+qdHTtaWOF8iVg2ydrvtZ95cfbB3O9fhU7ZBmxdYDZJepaastmUrGibPTX9mfUNSTBuXrztd0AGxUBnNJO6ElnmEDd53FXdoWqa0ZzDjLFUZzDsblH8NQlDMbAEx/iFJIHUrDOvu+GInUcIDoljBTbi2O0xUCCmUVdrPkDcLVRAULpSFqKEEFRGCxmirOJsrlhJal7c3KO3HMflqHJJbKbZKKaq+FXRh505c0W7Q0f5ARso1XE5bFYS6wadRRvpbXAWAw4Jfald2IwTzMub+OVJ0MGiNJM89ZdPfM6IJ3VFcTsAEotzGgrl5Z5kRlJ0LyOaJ/BTmsxXsL0yTp1ES6kbNi8/Ur5oIh7YJ0wJVzmbomjKvHuj3z9TX7J6w3HjGDgYdoWiUe5WFldez11Wz0NaRL7TC02dmzaM4/xK5xvWvaP75GzDBe0MtnkLIRpYKhNFY/haWqxZR9CzuJQN6InyPZLBluqrBePiubFRHCZsaQGUyllWFfmYzc1atlONRXA7Brv1Gf1EvcWjIEiEeZZtd0NfIG9L1io9xR3TnZxGTG8vIPlIEuPy8pH1db7TpolIeVoaPWrrd+jK7FWUl1QJOnWJ5maJY+Y1NTIPWorF6aoGgd5jhfqqKMadaKjUXVBNYLzzkL61BrIip0tR3gVk/4yBoYB4DiABzI2XLt29zouTG40Vzov4/prWtgJBAYE6QO9Q5L5w9HAUxsDrYBIJqGCIDNh7CT0qyzP1BmErkJ+GT0EWbJhMUUJiw8MEQ+EEzZAbdjkn+VQtp20SRI2cl1qFauFCiC2qR5afOS/cysASdqGkBBpABThEXfNdeeWWmLNOp7ltCv1ukHRz9aFtH0c80yaYhaRo7Z2GjHq285COjF67lN2Sk/11J5cI1GU0ZWN4jYAN8MChJq0tJ8CHAAqWqWEEBKNe7txsmtsqCWe9kOunWoUIJTY9uZ1X/TuirtSU3Z01rDuIl2xrKKR37DwDKH11Z/b4MNKAeREjfkSrYsR7QCiHVC7jCK5N58DTMNgOs55ebuj6eyXbt4z6xZCEATltB6RhkZpE291FxYP8F/JyHL2tGksTO4i16ppWYzRXIkMSz48HoseSs/FfOUlbaSVlXJJTMrk+GgMbbjSjXspamA1g5V0pGjJMyl7WZMFB1WTycaWjdsU+etjiON4uiXVaoGEB0QO7c9TkudfwA8XoeoLcL9bkGrLsUYbNl7bGj5OPDW7zJGnQH8MIWdYaHm0msgEcO1S6f6GexDEWuT+nlBbqZaBlWQlRydMawBLbyZuZbTgJnFXhUfTgeJiqn0W5PXtAlG5dusn6L+1+GJ1IcmottRar/L50LhXmgHoEZ4Izq3nwtaow4te8lvJGJ3c9Cfa53QdXrUO+ePNAL7emoSN40ZjXCIUJghygf1yqXfhQEJGsiDeTvGWuoOuX1TER2SAe1IJ5uxqQdyB2p7ctgiyo667GepR2aRBJxJT9HOgl0nnBLZZBAT5Stv+8Dqu20bvO+AzEzUd+jBjIlilPeksmYGx2qcF/n1ZXJbDg3B2QGrraSMNc8rBk1jLpWu2IKAnoicWQBMGruZyIM4kzJXAw6zFev9nQcnXWe5mA3yKrEDSRmHhXzNJLEjHh6oYgslqeXyIcHhwHBu3EpU1vnHyApB3xbHbN3J9CrHc8flzmFuVXzOL+TiAZrsyhMzAdCoDjoKcVw9c1XkHAMUWVuaeeDsrLBomHptde+irfP8lbKOYZBLvMb5T01brfvk5o8pmUJtHLV40qdVy7A4HS5pqnsVdpB1+kTAQ8UkhVl16uMwc7Poodr9k2glQ1fAAtVbE8vbhEFg4Qe70G3badyM2kMDHK0pGG2ZgVZEYZXRzmYaEcUBMCAqyBzeF1t+NCiwN0/RGA2grO1UIJgGElM0Cb0AZu2MaaZgFDJWmSQtqR9EtkJgosZQW3qg6cL60+PUrIU2rAM3ZzRtqjZS4Eie8yy5zsyJXaSik4Cs1rGCSAeQqo1qQOdFw00e87PG7j/rl631CEff5BHeNHzeZ52VtVMmIwC5I2t5ySWGK5/1Vs8Nd7+1YolNiML7GrHYaPO6l20pgrUhfS5BM01mFjUqTNkUTWF+WD9ln4jlwhGT6CFMmwmZmaxVZKiSjVL1xqSOHOJNMDSXSUuKhpQO1wDS8s8MqZMtRCizBbO6VrM6ASqWlUUgZ3Li+jSayHSYjM3cdt6Q2vdbuaqGTTJo7LeP8mjYQI2iMbt6bruss9P5ddZa7S861jPDnMFJudJo6sou9lKdG7RhaGLlzApoyCj0DtZijGVqWxMZE6neUTNWiGYzkWuZatYmKWFKjEQmlsh0OSIqYC6SzX+5UZNrqXjQNlLTxLPRigAEOgdfU8xLbhubupjbbGdlexZQVthO6nZxmCA3ZVrnYKhow8xAbaMnICVg2IgfiKqw5cmjyYu8XGE0mbfsFWW6LKzRd6os0YEoTJtUaZT/oJ7N/mrLZQg4y2sQpeaGyZhG+m6yeaPyNzl4quyYZOGX9Pw0CbWQaiQ9h5S5WK4rLEswnTWWjagKFLZBJVcJ0/USp1W5NJNGkZlsPkM8tMo0xLUvijXkCiJvumrOZjFeNUyNmAIxdmMzV6x2sDU3B0V01wF+XdL41MVRWmDlaDM6NsqmbM0ojdkLL6GrFr6KLZ/mdSOP2pkJ1dqRBuEUDGRgMAAFGMroNnYxRqqgUaYScwcgzoWxmDOb6qqmjcJ+kYFm2kBnV133SNymOmpcgCPmuJ5UwSB9pVZLf6uyKboAqLZwlkZRFnVW1JJjjo7duqvTxn2bYtt3sIGj74/eMmgn9ealoTgDSAJLc37ua2WazIacLFADRqw12SEW9brlfOo1OnYoYCtmKAEmrdnZCDhQAGLgWMbBomErk6lOCuYyYBECSPLd4kR5VDbXZMvN6mBj16vCJDWQI6aLp4Uy5tp4OrJK4YVlRN94NEUpsYqluXKSeWBZoES7eJxDT505a7Lc3+s4UAcOdlPcimYHRj43n5dHF7WmrwEUt2jKICALYjbahd3p1mR2bfFjlVeMYZMbcT4ZG6CCw5hHQSLyZcpLKCZhl0ijJgx+rIKpTIUFmzlojIliSJKOANb6U0wlyAVLB5Y2Kx5X2bWfjXVK2NZcdaoUMzswIRWdq11e6KrKJWfEWbsVsJrFwCYzleLmB9gaa1CPb9dawftAvyjlapIMoi6/Ju9+RzZbrBtlahhkNQBoI+D0mHMr8zpwacqinqc1My/LWKfIocwYBqYKnk0FhYBsMzlwlrR6DtnxJe3GtBC7aSO3/NKfIGqHCZlCFpZI2sOBVGAyi/kiQ9zM0v17Livbl88Zau0qS+nclwKyZKKg5lnmW6Ut1DuAxxcLuEJ7CXU5IXVsX9p7G0zjVtgvLV+mpG86nQfprJ9Xu41JtJoJRJLFwMwdiIAiCzmwDg393dpeOTu8IEkkcd5kqiyS7FplUzufURZzFXDIIi5b0FXpf9oqu2zU8xJAQcW1mjUPIKpuMr4005KuxfjAiMj86Fn3TXO1PBrDqZ7TvJ9rVJHLp4XF1UzBIkkaA3CkyG4SR13VEZtJZbg+8l6vNq2eUoOa1pDaYQMGWqOBI0DHWQyPzuvzO5D/at8kAS426NGASpRZa54RU4oxxh6YNIBT2HjIvF797i42wdmHwLHab2Mgqp+1lSuYSpoNiZCeHExqtsSrqflNEl+ckMCj4JoozKmNaHW2ne41uAxhHb1oMu3DhX2YtDNZQx772RtKoCC2rF5T+cWs83XLRcz7WP8DAQgEe7JURUlTToExvIwEju4o/ZAYiHUQDFcXcu7FNk3DNr1b7gK2F852ImfDq0RQM+L1FIW59AZgr1DSN36NlDBIBqTaqSGMTeySsIybqI2Dw0xYBY2ZqGm7CVOWzJp6YWbW8j7XVhXIpCOeI55YmUWvs85bqCte7MfS3wteZoFacb1IbXVJv6+oIlsCKdatIqy47XJIibAkqXlFmBvFoJWMrG2dFRlJcKqJYDSWonxuq/qqHULJE3Pz69uISXSf1Vs/a6k5BmTmqrf+GQCWn2uYvN/CAkREh8uFjT2PrUjv6U/rcJLosQQAKzCUeSYRyRvTNkvQpLDPZnJwtX/KQpRApKAzIS2gmViYaNIoHQD4NJkYCaqmqWqTSdqrBNJkMdBcCG1BwexTEEVEi2AuNre4YfvJQVTbphqgSdt0dvCaCGAFE8+2TASqEdl9NolIUmZEGZRoZcIWIF+xFx3UgqTv0IxA/UwMk7gpmZRgrhBgGTsmdDHYlHHylEkswwBsNZACRjhZBHL5m/jM5jRdoHN4iC7jIdyPszhFF/fncGnZRzuzLlL01c312kzPnHyJrp64gWdPX6VnT13D7RM7AVIBhoBIXP3Npk5bIDw0TUfyXZkC/qGcE8LUG2uyGEw1zZPonwKaeSqgEdO1l6Ag9hWH7CAxy7OZyPZJoFDqIRFMmXhx6iNzLNgtmRpM8+xUv4gfGZY3ZI2tiU4deZAlOOhLYJWAc7Dj08+GwUzD5NSpQWnAMkCa9nCwW529o+TY2+jNeCs9jLdPj9BDdB9O4yQUXTJ3ROK82FWrfsbF/d318213Hmjo7crJG/T43V/Bl86/iMcvvIhrJ+8YGwlYjH1MO2lEuvaRRaQD2KSgET9cJjBVRIvOMc9LNM8syn/ROXO1UUplu72ZLmX6WQKKJc+NInUjlMPKON5OcmGipE3peDsmlaYSUw/qt+hamQvrWCabsNTpzdcqBtmXVzRbNnfpO3Vp0oWvl2lYGgqzTJnBvGelOjWzt04P0/KHD0zvWwBzKvRzckBzIY0babIgwzVOw8Wjs7j44lm898VH6rEnLrxEn3nzM/jMw8+hmrkpeWxiuoQBjNht/sxVng51nd4SDTGDxQuSuaq5BArL9yWvvUxk1UnaEMzVfVeRzZVqWImJJzU95Kvp5c4MFVvEYbZcTVt7CFC4o8k04L1pSJ/OQcd0fNenzkLAepHZq27Jg3J9ZAxneSVPr49qIx0XClw+3rIwzYc3j1XG0Skpv6tGudOSNvsNXBZYVr8tDVCEnOL1hZbfV8/ewhP3XsPHH30a184dtcI5TWGA7P6takYkCqjzUupp2YJ4KPPUqYhFJMuan0X3FODU3/VzD94tjLQrx/bFpUdNU/ftxdztJM3yWT3w5fvyWTQTlzRSRslLy6ouvC4LYQUms9ssafjO+96OtM0B8OQkiHErfep91eIgmypnkjzRmso0k8i5sPTbMzZd8cjCNh+cHsNbls9JE8xqjirLg/XezriUqF1U2mqXUewXpq5sc276feHmaVx88jTe8+RlfO7tX8HHfv2zuH5hV1w9rnEl1eo26FhW+KhgTWtxZvEyp+Jw7UTvyEXU6QqxfSS/5YTKNmx6qQ7lSjxcHQTmvdzZIw6EhHvqNAiZXKzCu9aCLSLkC4jSEJrZx46K6Dzoj12RONha1ifyBwrUzo9GH82rjcC5Am8L3DGQ758u47s3341HFsZRgkGeYi1NvKmVzVqVHCCxZ/0j52dA6vi9aQ1OLfLuL96Lh58/j0+/5yv49LdfobSkwy7Sc9DGkPZRTNBeFoLR1pikgHAvJsvy8TzKfGr1+L3CRTBTXcEgmtdiVNWDA2cNI54fqZp3U0YaUhDPzfvKUBbDLbqtf8BU05nokgOvxWRx8rRG56xMVv99dM53bT5IH1jMlYRCzErIbI91uJkqOw6sTZf3Badz9IupOkrpbcvfp7BuVWZoqKJu188f4Qf+0Jfx8qW9ZaSz6MQ2DVEn3qu5EuC4OVkszmKi1GTNyVQVM1bNEs/VPNXvNB8tNql8lt/l+PJbz5M8jtSUzZKX56t5m7dXzGCFwF4n1GahNZcbOpXiEqJgfWTCHABrxj5Ws6DdjsEBehc/57NKW/bdjXP4nZvfS/fT/W2YQatopssFqv7TPKKLklx0pyNYxA0tsBLau3MTrjx2BjffvMHL7z6Fa+86id359jkBJ67NOPvUDuc+dxv3fvI2/vi/OoGf+k1X8VO/5eVaVJag1fDMsqqwBvEWEM1LPKd8ctUyS1MX9qG6TIeLczfbcqkSDpLAag39TBsmX105F+3FNvlpsiEztMuN2KGCOTWUsZDulhgVrWYgmE5e/EPcmyJ89Swz3Cx/Y6BufVBUfADG+B4LUL5t8+vosem3Vs+qTnIr9QZzqAdfNBfgD/Wy79SxUy+YbT8yOy1/Vz5wGi/89rvw0m88vYDmJF7rdubJHe79xC2c/B9fxic/8CLunGFhIdU9WTDXdV0qlIvIrayzdxEsv4/8swjnaub2Rzs5XljnSPbNyz5jLDlnx5WNdiwMpczDkqYwjzCiiGqxdiamBRdpnq7dtiZc+w5+FVOyMjs5rsMcSzAMmHYaBrIimbr0XRTb+6cP4jsWoSwnMcyBnRLefPYaOo+oIGOrixZWAsYiWrUq3eWVX7vzGzz5J87jyT95fsUwr3W7+fAWTz58N/AHfi3e9YMv4ReOHsft6QgW72E3WzM2+4U1NlOYFSK0Y1kmUMtJU1msWtz0Ou02YU+y8Bmk8xI1Qj4LAU+kSwVYrCgRPI5JERKvHiH7agnvQ/VscszP/ZqSdnvo4ZTH2h89TtSsE7L9yDSX6a5pDT3Wl5vvRX/f9CH6dnqsgsJmegx9cvOlZSxlTsl81eOQxXeT2qmZm+5ooh9XP3AGj//Fi5V13ojt+d97Cedv3EUvffKXeX7llsyqhxtd3OslKr4whkavy+ckExZyTaXvt5MzBW3K+SQzFTp9UoKY02LC5jrN4czu4yS637Wxcj1c/FbTpXpZY1QyRDmIIl/XdtDRr7pldhGPesU0K+2ElnE8qCZ9G6LMwPPrF/C8hz7g4KnmXi62gmVD1HpUNkL80yaXpfVNWFvlbORdXQDzxF+8VD/f6G1z9iQu/cZfQ1c/9Ss837hDDp5dEcx1PS1Pu70EDCEeFsFnuZc23lQBTha3qWt8SgCzQEJXiEElFqkHtk8uaLLVsjTDjDZU4btPQHBrMofjFuzkzlZazmFuWohlS9Q3RAZdny6BwYHTCFXOwcF6ATYYnI3eU8CzmC0Nj9TN4jzKc7KgjrOeCZBU0JkYJjRAs887i3n5wj+6H9e+AcDJ2+bMSVz8jrfTtU8/jv2N28XjqlRT1/bsalxGzDDpxGqtcGGbWSZtNSotD6CS9fS1FY2FyPvCV7Kyd40N2joXpqKevU0ZqdF8b11xJFMkCNNl17ONzm5jM3Jj2bgRWhC0AEu/E+OEOTWw5vPzsUcXk/UoHouAoGaky8Xrj8kvT5fsqmAWJMqRnrmsgfaLxnn6L13EM4vG+WZt0+kTuPtdb8LLP/eEiOcFGIV5MC2iWNZ8VSOEbdE71cPSebcymTrpUtlio/e2FqkwkDWihd0rCtj9L2o1p3mv8I6K6IWxD2yHC59Gv5Z9uqhePJ4Mhv52mgwaqQ41+7t0QGvGOpwFg+W0b8I78C58UJlmAAZNWJbAbJSPlebrKDPdY6vS7V8DUWGbLy2sc/vh1xo/ff237fkzOHHv3dhdublImZ3fyzQtDnu1BRpjrCxbvCQB0PK31wVt8IVqGmwXM0QWfDdHJK8Bkw/U0ICqK9fzbMBxgGTxik6/Sn5pNp4IK7DkC+47O7n9KxPXeVV9uiymTdnjDM7z++l30JyBTsEi5lmJEHZb73cLh2mrdzL4HXS1rhemhXUu4fk/9c1jndF2+uF78MqNZ+pa/lk9KdE+1Z4XYbmYOFT24f2sZqronlln+4N55OZr8tCXto9pHBPK/iOUs0al4Ufi7mGg8XAHG28PgaUTtpwFlIEt6x79jUN5WbpMVkiU+CH84WWAnZJrI/OkJGEVzzqSVqKa83q8WqLfO1fY6NajJ/H4v7xcNc+vtm1792mcuHAWRy/fZFngA13/I2uACnCKmz4rYOpE2aTT+s40XaBQ3HlEz/jSKH/aB3sUtSaR2Qxlc5h5UwNIWRuttzYS3RyhsUsfAnqY3ohhqIt6O2Zpfy1/cAkSXqiNIFpHspg0bmP6x4oQIGkaPZbnwtRm44WPXMDzf/ki5q8znvNGbicuncX+5h2Z2qzR5QU4i7c16eIxLstDqvma4xZsW3Kg95i552SdoGYp1AsPzFCiIEYO7tRoW0VeFVQWWUOexmg0UJwMfNXufDZTKUPEJazyWQGr/D6zAOdb+LEGEBK+Fx62T8vCpitI28DNHGSI2R26L3zfPXjpI7+6TNZo2547swzjl3WkbOpaeVLPTO8YkWWxpLQjE3YWjtd7SUH95AQEJM7ysobEAMMyEReYsaaUfexgATUu/xofW92pBTY1iPu/sDaDI4Ed+9L6aqxEmOZfAD7hW+fvVpNFwUCauPxNqUJmwmDmi/TZAi6ZFkOwsM0z/+oybj72jXXPX2078+QRtstcWZkvO/PUfplTk8cSHC31vXlmu5DNTFNZoV5iQ7I2uyzir7Px9cLMTS+WazKJjDROw3Pi/MOwYQdmW7oRx8y/t0de1JWNrjQBi0Z7VomFTBg4JekBQ1tUKgX/UlpN1l2F7uNMUx0DFdH3ID+Ke+d31ICHiWeP4zg4ktliY+7QSCV9ubeuOCZ3HtniuQU8dx597fNWr+dWgHLPJ27ino/fWj5v1TmxApxoPdmy1b3yawjPPUr0xPsJX36Hr3AUOz7JFIW46JYLWXfSbOvBy6bs4uBxc6Z9LDv0Ri+/aVCcGbZFG7qAX7u5r7HxQvLCMPS8SqZ2e3EI6xGVef16Ub2K9Vi+5ftb58ecRaYkkgns+N9X11zBJfqwEdcmpotIfv4/PIjdI98csVxA89B/ehmX/+eNCpwhUJJWcwGohy7+Mte/d/4X4JX7NvTp38P4xe/YyXJZIqQ+S5nGQ9BmZ4hakJVEigCazQES0Pg9deZxeVWFLUyJUPAZ91cjDFQynfTZJSmjHPeJhjioj2h0HqcrbmbdS3n38Dtwgs+b74HkuddpirnRN2LiXUwjrqeAp4Dmhf/4IPbfBPBcXMDy9n/yEi594lbUi9aCz+YJ3HZQBlEY+vLt7hcIH/rXJ/DA54BP/bY9XT2rBnoqizj21OUKoRwlEMNRwlOdUdfpVrt3M8xCZqwKRYGMrRrA8Zp224IkEuYOb856FcGdWSfv9k+9Pemh+f2uX+ROAyTAmKsuCbLbbsfM1T9amOfKNwE8D/zH63hwYZyLyjZ5fPZj1QawN+iq1Xj46x0fX0D0C+fw3z6yW0C0C0aIhA4Yli3jsB4gvU8R+RjrWqJ59nrNKY8qoPXfNj/NlWP1Reffri6N+uuitHHg3TVRBlhfqDYjnaILuHt+2HWMuerVjdV9M1RY2zFLC9NkwjxX/tM3FjznP34T3/nhJ/DOv/o8LnzsllwbmgEP1xX6u2/V0B1ozgfRasSee3HC7/7+izh/ZaNpbRmzrNHXkyn+9EEMzP7ATRXP0gV+16sXLpFvqESLi9B1Zmw/uZMmdf8UF9V2fDphZfzs+FpwK1ypfYKG7bPHqFzevd9BUv72CowZ1HSGA8mPx77ibV39BoLn/Mdu4tE/+mW8548+g5OLKM5Atq2xHtxeR92y8UlIyX2GdVKcW8Dzu//NvTh/dWvyxu9aVS4WSknj2SqgrOSq2zUPe0L4JwMHLIcTB7rN5yVTLIdVRa10UcosYlbsUWZT8AORLVVR7Y8Li+eVwWB/jANsk4Qzqz668U/vw/wNAM9mEcdv/TtfwbsX4JxfGCcsQWKNbt/oe/29bkrrxdU5/bnnr2zxez76AE7dKk7N7HcA6WNfFLSstwjN+gxEZr09qCEQVc/2nMQAmzCb2TGK2o23asrQMIh1PI1O1DrGFukbzZTTp0/J9vR8PzbzuQQeAcSeE8Pon8WHnHWEgXHnr17E0e84izd6u7uwzu98Cg/862trM6Wfs1P84Di35imf5+dw+3uVJn0/tzDQ7/qvD+otPLM/0EDsPOt+1tWFiMVhkrnqAYbP9RiYcmXYIyVGT3SgOrXPJ9vP6yvp/EZQyoyy+cp5dt8NZIKfZTs7P9KaI2YPIDp4kEyY6iLriKM/fR53/tpFvJFbYZ03L6zzzj/yDE48sVuxwggs/f5kTNxdRpe+bBH8GInrdfo3P3UW3/5zl/QOVhhVVzaZ/W6K2TwvqO4hS6tjn1wfAWmRmHRZ/Vfnyrn161Y1HE2mmnm2E5oTM9NYo+TzJT9vDl3tXtPU4M+5/bdUJvHwMQcyc4gj3bwbM/Jv2WL/199Y8JxY9M3bPvIs7vrckZonbvSKe1a5VdRhqftj1/B7zkN+6BJgIFx9OtBbms9v/vhD+NKFq/zMXVdJwDAbw8isg6OZyVdt6GN9KYlm9hsbIbhhm7oQ7BFABzxt63uekglKx41dmmZyT0svNTtk+Xgtl9VNSE1W/zk5X05ah/zTtI2bKrTmrEyI7n7gQfAbODF67r/fwDu+5ymc/uydyvJ2nyYnnWMaTa53wDyKlMyaOQ30d0TT2fchWRNwZy90sxb9nk+8hRJN+90dMDBpY1YmsjSikST0Y7TI7K9LYHPZFBhIVch9HIyFeAHqHEKL19WVc0NUN5jinokS0Jhi5hineQHPfHJlqvbqRDReFrcCG4V53kDRfO8/voKHP/IcpmsaV2N7uhyFGe1MlDfCgX39sQZE/CoVonW6fMrlK2fx2GcfUnPF5WZAedpfmCplJpsgledFc4hnByqQ56Tkq3trWIEGlrYcmvKOhk6AJgN0Yopymd01mste7RaHDtoskWcBiHbK8hcufDCSXZeD7IPLxOifeeNm1u//vhdx3wIgq4eUz84QDUB4DQpCu8B/5kG6wV9tF7Rgi41WWgtd2u/84ptw6vaG67IPZR67u1VZyRnGn0yvrr9dlWBjVlZCMBPWHvUIH3myu6EpAMfcF8a9e5/bQ/OAzuHAJgFxYjFfwSr6YHT9bIQzkmu/mKzNP7sPb8Q2LWL5/r/0Ai78y2vreJMIN6+Tg1oNewt0RjY5x7FM9rQyONbnGqu36e172X3qaIvf8Ctvsie4CnhqXQQw9UkcVnmEGUsXpXoDfSmNicGBzbywWp/OFDWZDBqBu8w7j4vgkUWKdS2b+by77U0cSK6tmrKiN/ZxuzY2f/YC6C2vv+miBTwP/sFncO4/XPc2NhBZT80di+T4FHA8s2SG6o+P8gAGTEMtCFdUv2zf+eQjOHVnolYHgcycyWNbCrjYKmNspMfHAOnDNFEkN9V2BqJORSdwrApoY0bt9XUDTO8rrrdQYloAJB3B0WlqykaBxeJ1nfjrF/B6bwU8lxfwbItYHoEEGTziT1hkowdBAwBuAZN1TE5n+zKQ8sZ+KjUgymmt4U/vtviup97iWkhvT5bnRlfTJsHGcoo9hyiJaCnBvCqWVSOD6tTzU+TGv0xdfeTaWtqigSkjdETtzCNHTY9xpR59UUmMYmqAUu5tMk9sP8fan5NvgMtewHNfAc9n7rSmaMAKDTNBgN/8TiBbeV3AMP8RkAJwrZYyc0MdiPp8vuvZt+H0Ys4g4GEFk8yLsdz3DmUgbiZgIVNjciGyhDXJl6R9hXZWZKW3U6UE9QTxwFfuPdK1IQVBNKTAFvlhfR4zVydvqi8vq1BlPr0yW71JM020+fBpnPreu/F6b+f+1ovYFPCg0zHAStusQMJrIGjbr4CTGqphI3T5N1MhdmJq8wZ8PXJ0/+n9Cbz3hTcL86gWgrrs9QUrMp0BdaUkMueMIxxHqUM7r9oJkVaT5dQykKEuM053y7KntYwcpXoxfm6pkT4FntWM8XKhmXn2nHUQq+suJu3s33j92efsAp5T/+56yxg9aHjAJAgQNYCD9SX1/dqYOFi+nM1WPPwB6TzblxvdexBIxoOaGwne9fKbFDRzxIXUlfcpDa00x4y8POUMNgvSAGe1ZWKxbRWVMxANRNQqnacHOM31CKJoovbh2xPlYKHwZG5sM3GEEx8+g5Mffn3XNJ/6h1dw6vuvOViz3srel9VnGE5AZpgAzd7CHUATQbetZRw05rAHrqWnHJZP50Wadly/9cZ9OHlnqo9rYQ0oJpee9T3yPpEKD6+4A8VdVzPaGuR9vg3Dur2/j3V75K9sk/MUX3xKjvQdEeVuyj3drisQxeNKn2g9sjPfexdez237QzcqgJrwAGJQtqIZfg/aiFE89MDcMNJev4xA0e+zjPm4P3OUlH4k3oQYoYPtfdfeTnOYL/dQkoj2eE/9zcY6atZgFsWg/qobNwDqxHMGSt5PzVcKgey+g9+Oomt5p/pQbvDmaB3nITVn0PXPb9ngrtdR+9AyGXryb74YAEmduo792D4Ok4OeeTIztSwy1FHdcBvtR9rX6yciagDn6Tk+bf+Ddy5UpOtDOuPpq2wPMHdPTN137no5SCdbodycKW2FdgOgPsoYGQzZyGqQGJ0t7oPmnaH6GoD55PWVBnIdxGLG7vrec3g9txO//xnwE7uY8UcW8Knj9YJW5qr7CwYTMTIPWOarYiJrRPuehTOnc5R6cvrRVva/++bDOfosgnqOZRyifRqW8craLFQffZb6rKFtNmplwrL26S1ZL5zdbqnfDntjDdQT83u5BVDzdCfEM0KL5M4598deP/M1/YNleuLxXZgo7gCDljX6/SvTNszHVpO2gFyBcNDzzZQHR4igbtSWCaxBF+ZNjpxa5hkv7u4iCxy6GYuhTh77gdtp61MttcWAfiLHaGwrqQ6K6EjEzbH8GQegIgzpzca1buyvASgPCDj9ioNHPqkB1In3nMSJ1yvq/L9vAf/gSsMAK4DwWEgPPSh0HZiBnwbC7Ono2HNs/9yVkdMCa+ZpxDMB8TAK2d5++3I3M49sylJmSgbAylwl913rFl/RbdtIwwcBYq594+Kr06VeGPwNxdCJVlIdtHFvbPHNXyIbUaQmBXr95cwLf+z10T58dcn5L7wgnZLKqQ/s4niaa53HKe1M0TzxFLTYXz7ifTiyzbYfkcYZAdKx9ThFWivDT0jnNT1mSbmLttkZmliOU7Nq5tJ+aUPSqHQFJZu44Ig+sy3A90h0Dla2NWzwsJIy23WafAH9LcvWAvpsMLtLUmDH/mDrSbXPhuxd6vICt7uu4iiNtNyIJcezHz6F12Ob//4VYDFdVl2bmrPnKhqIrfxJgdbu9xcj12cR2WNjmieB6HnCNkEZliaDCvGxBgoCpJwSts+e1jJ4nVcG2sX9XajP/glPzONA4nb5U8+q0ZRH9wZ4NFiIQ1tDIrXO6zkvZ9gOVRonMM8LJn+kg/xZu/DlHAKcqb4KqWqhU4uYPfVKG0jUT1yYcOa9X/8tyUXz7P7FtdUEaXhMbRCxN2fs32MN0B7c6I5shnKkmk1a5Hy7chqzyC2YDDyeXrtGmQTSJymt/lZ81e3SfE6Wb6RoNNvCefidqnIGZ9YZg6b3xHqimZLmCbZcKXAt0Ooamqq2nQJGWIfcdY+3/k31hW1cn3dz31ODzloE4Hten/vZb/25F1bxnkbchqZc6R2ri4GgBwCjBYY3QHM9nAAVaYA2j7zlfb0Was7jENRo0sdJl/juKi5rv3k0unavTlHF/fAtQUi/DWYetBznqUZoT5bRIeE8ulZGEk0aOKw529RFfXiWmjKZBzNxje3lL3vH1diPfn892OfOv72O3SKeZ27DBC1TDLwkbl35ukLyuHMSAIGRJ+dv6m69OT7snfXgsv0rkU0jQFKvj9nW/lTzxr5+S+OGvGIWRJciZ5W0LxolpgmnzmXzy7Gket+8n0STEZROrMlXSuYt3twnoGFloMpI2wvXwCeONHAYo/7Me0/g691u/r2r7tn1cZ6xmWpZpmcc5HTcng+MAQFQ06k8OD4P9w++D8DlbMh5oCcsyP5qT1ndw7KLvFJai06eIFkg++zdeUubf07jTEieHgooivVrIsvKO5Mt2RDz1Uxf+HvT42W29YW1p/Y8nb/adGAB0qmv032/9dGFfR4/al1qxspdbwOFNDR3/d8ICKv4EEaAokbryHmsndwCMQwEDVmqAZP1FJHpiTgGqYzGCiuKCTmq5Eml6JAv3Lfp0LMCmtWoU3bRDsQCuMvP6AhpotQiz+zvCp30JbPycovmrch3fdsXurXQi6dz4eu72+J6Zh+0TGNm0gN+3OqhxsxgDZCmroyVQO9Zo9dex31f/akE6RmH6AA7cZu+fvc10DLkzZSBG8AAY1f90Kb6txPRTQqiHokBb1rl5Xe7sL7XzF+P7e9StziQvg6yMNDy++SDLwEnd27CSsduL37tALr9E7dwVCLOjEb/rMyTaRu04O01kH3fcwtE7s8ztujYKBiGx2WkxmtMojZt8xvBXLzaN6INSIPqQTVdtnoe6W2RzcZDXcR9Gm7TMY96zZEWKzRkN7ObK/jUu5ktsmkM1z7xWFp5ZJs+bUu00N3veiKE9Pp6XtP2ykdfQb9ALTNNvj06H+vd6x5cK+D0QGNumanPh2nFGsGC3DCMpTMfqPld23hasZIHFBGM9OJ8FTEtEUvdzOfJAWMgy+KRLmoENa/T0WoyNc7mmPZ3HqJ4Yoyt9YHNWuiisRZE+n51e1/oFBOtdz/6JOPUzkH0tW67hXle/uj1lcbZc5iuPbo11zwwW/2+A8DJ5iszQM7D92nD2BKQrLkySPMfuvI9LsTx1DYLejbgS/s0A04MRCMTxbzmnIytlA6Hzp+CdHEwBiAYogxXqTOF627P9CsmatroOz6rLprifevlbX36AMnNmZnOv/dp75QbX9rha9lu/vitxnQZ4zQTnF2nH2aMnonWtxvJ8fF+HpXVsFzcVsODczKIckcEkPVcXgPPhPbTeAEpaBj5tWGa+t2eTJf3ZUTZHNmIuWoBVBkoQtd9ZrIzn+JBQ7+BER6KhmQlTKTBRJLn1cm70+GspDP0F9/3LKbT+9q4N7/0tfHQtY++smKTHiR7YO22AwcBBhiLtYvoo+O4OX8FImS+dzI4CGonDXQTsCOgeF0kVQBOvr1UTJgfT2Yk9b31cyaMPhZo+0ZB5Tx7MRnCUprRk+trpVQVpTU/UPfdTRM1Arq68Y0eIrLAYolKn5750gefrmVc/fQdvNZtv0yaXv/xWytwNCJaO2EPDD2zlSnrvves5MKfcVAfNYxowGCsBbcQRQCH+SCzpE60XmnKNmf96fkF2GNeqFE4EUFWABx4nQUwEtl2PH9CDRD1eTTuvE3ihQ7yyUnX0RGTaNnH0m1kXSvZnJjctVHfRXDpu57H2be9gms/+9oB9EoGD6/NhpmyiEZTA6QRiI77njt2jxZYPfNk8OX9rf6xpbFjINufDWDt9Q6AUV4596n5udBLA7OVWKUHlE6kehoctzVTGZaPZeJnqzAjfwEMJfdMY0LivgO+Dog61vF3l8NEtsWOLH700B94Clc+cQNHV2a8lu364r43ZqlnIk4dXY+xM4LdqDkCSONp6W9wb25Smg68vSY6DhyS33iBvbNf8tiaTkQsvS2Hnp6fxy2+5WbLLI716yFApX1DLTTa7LSp39EUqhNs7I+T1XqLg6hPm5F9JO9tsKdxqEc2+froSb/r3JjroPJ54tIOl7/nBfzKP38Zr2W78bNHh5nDwMNALIQPbTNkLnQgIBpqncwiPfs0WgwtU0Q6M2nceG2e3jyvjgQcVGxvsHDtWY/98vyk9g6y5+TmJueV9W4G0TQNdHD6zdmGwgHE1BWQAWPMU0+nSZ+44XefSpQZNrVRMrOnrJs2ojrfwTZPFrEkGIj4nt9yFVc++fRrYqFXFt2Ug31mnnoQ1U8FUjZvDXsB4zgPHwAKozOXa/ZjjFiLhjEgH4ldPbJjYMc5BejiGOFz+y+saKORIwO71DKTkxfMTcp6ScFmRddNAXTA3iV0S6b67j+/VVlRrkBhEz3y+kC3cgIUs+Vc75M3s6bPU6953P89X8EzP/gVfDVbEdAFbA4UToDBAROCANEeLQv1txc1HckYaqyGiXhtovJvj9NAGYjiThYD1crEKQvZkLJ+WAvxhY35Jr64f6Kxc8kF79kjax8KNnIjw/AZq5apzPLpMX1bUluAXpe/rtOuUy5d86snm5eVgaJembFLgEnMl8QeLH8V3JDH+W/OMu+vfRG3nr6FV9tuLXGjRgRz2+kGimEaoNE/6zmyA6wEjPXMiDGwNmut18YBHOR7zGgFkJEYt31QIH5+/0veS7Ylr6n53X/v9BCbuclpBx5YPW3qCjJTxkaqpqmpifcQhUfWTl/oCexCO3S1DTbdH7KLiH3vyfv2ePkzX+D9jeO9st3V2WM8eWWjdVjjtgMrt7p1+bljKTQCPOfBA3BljwxoQTRiFQdP2tcCK5fTLg8BEqNxpP/p3edWbZT1yoh9cr+vQRRYGQhqhmmgoc9PWQMR/IMczdnP94X18psMspGeKCGR9D0RfvdqO+lWOu6VW3Tlk7/M+5uHQeRmhduO36djDWOk45mZAky0ApgJ8AYE1IIoOh5Dj2tk9qDB2wAGrRmSeibiVbm2vcRX8cX5iVUbDRjHT+snVZOp0qtE8sq4a/vA4pRtXNSNEu9pypqrUWEDDGMjVrNVDzHahUdGZ/I1XltEbc28sP2N23Ttpx/H7Wev4dDWskh0VOO6M9biuH5ajIh95I9Bd8w8GgYgPgY4DehEvMLvkefelRdL0jxSJoOqfsqxH919vG8abomBmwNJyzT74xd12Tn2uD/gt/U0aJUKst4WIME/MkODeBQIITOTE1H5ZwoQKfGEyTWL6DVKINeRVh9XW96rfuMXn8Hu5Zs49eCF+o5R27YXJvE+Stn2afXn7rrNsvctwBqeEsKG8EGwA5IicPBR3C1RO5bQvNN+TvlaWWXfpBXiBBhRf4hXQJmwZoa/hZri/JnteTx2FwjhyjJ18TO7z6YrMl6ntM9/ZLPEvUDOTUPqncX+2hiplaWo5oVz9q0s5Kf0nNfJL9CBooyTwOHWVM2V3ZGqebLSHWRRN5PdHOAq3dc/leWQsnZEn/N35yvXeX/9Fm3OncHJe+9exPbJun5on5snfWar2zQKxzvGDHBiPtT+6MjZUDAYUbjdNX6VByLFrT+5m+xcULr3TI9sFBA2huL9O/EKc3ltJ1xHRNdRXZtq6co/P7b7WB4uVoNamxEwbN9h8Pi53oSdPmrQ6e8Ly6GASWM4taMl7hPLN7SBrA7S4/Ae8ScWgRsbRXZBFV2WSrqVYjLI7iagelflAp5yi255bzrvFtH8ym3cPtphOrmVv3NLspe5YZlDn6Xqe6z3wUAC9n1zw2ASRt0oKPLNiKTmbTIgGmMkBjJhvdG2MmD4S0pYzORE0f/OyonFJC8u9wyihN1KM13la/j0/nNDgHQd7cNqwDRkGPHR3x4H1mOx5lexkxV4HLAMU0MiOVBkYwPOPrZoUiKKciTMhVEu1Eb5K4sKzdBsjyCRP3nq6N7+lmbbLTP2+5nlb0l6tMf+aM9nvm1qNRDW8ZyRh7byorjTNDkdtSLX9zO60EH/qqpWAxWtZRHw7ACwl5HMIK8nVT09xSqBf3/nB6OJtfs6fEQHAG2YJnSS88HoxPaULlMqi3UimCQFJfCmgcj5NxKwSEcOhb/f1FoGuY9uXf/B+rh91kftz776PD8okvf7Cp76hNHdnvhoTzjalU/wnR2d+w1FBNMKRGvB28Z5mHuhXHG7BgoD+SGgfWggf+Y8V0BFmKnmHEre2wo0UR/vwtQH/2f/03iOnyek3tX1gaMlq9kEZT3kv1NgsQFhe0rstrTbbAoF4PbEM1KHGz2PCR3mH5qKm9ql43I5lWXkXQ3VVgmIdBiygof0kWw8TwqixXQtgFGwSnFcM8GF9xEeR5gw0ysmycxczKZvovbrQUVIyy3FCLs50/RmdgqQNnosN4wJYjNb8Tpy+H32zHFvfs5TNJDfqOemkUCuEcVELsJ5cdt/Yv+TqebITd+776gP2kzdMxLQuYvNfR94a27q7ISpCU1rfcj9DjTgYzusVYsm8XRsJYSAsJevpCsLzQMXy3tjHmOfxVztlgM7MWH1cwHSvFsI/Ei+n3sv49z7gzVyQNBuKszu/UFXHMYg7FojGC0ehO5uOqXYEIWJyZ99LMrDB0jMg/YcWH7M3rJzYidjq3979O+XWffbqV+j45s+8X2tjsnaKAEJTYZjk0Yp33pCr4G0f3sRlI8azOz6XQRZuXrPdR17EpaWK5eHYStoBDhQ7TOTPNNvL/ejVd0zl2f+UmEfB4+arvnODvOdPe/v7PiRPxkR6aGmQV4bPUjDKY2BpTFnjPxMxb3ts/SctQmal8YYcLj7bn2aAc84ZP4i4Fj+/+Hdj/A1bmNj3AYEsTJgh7cGVJw8qcGWzaC7+c1URqNfPMMgnIZ8YpE0NwzKzZXlwQD1sKreLmKYq5dVgAM20Vy1juofAY/8zYv3JeBZvhcA3T4iXv7OPbrDpQ/N3qEWZd4fYBsJMlLTUY0YZgnuNVFqTqTp6bolrw4OjkXvWAMqlylReVoxGJCXtsZSlI/vP4afnj+VjTGANmAb3tRq/LvGyXong2+aPO4yQhD16auIbnZ2vreKYg5e8qrATW+oIbZUJpo55e2PnbWb/aW19Enqe3mzTAUOF9NVP1l/V/a5UwHFrOwz3y4gWiZUb+/4W/7KHZx8IMQuJ/D0k6mNqePsJYXglj/1miCd7GuIMrDQmSl0j+xLZfXg8/Ln9tagDMhs5j4/f3YB0E/iUMeuLc6KiYInsuhJzGNvbEIrxBt2S6ZNNBCSHbRQqHJVxoWf0VRUxab98seB2oksQ5TzIzEsRsD7ugS/gmcvD4ZU5iExYfsS+1nAsyNnots7Ku57YZ4CpGLCynfaHuFdf/eGgmi9VLVhJKB9PjWSueAMsthXnp7f5jWY3tDvvhjsQL7OTHzg/O6v7P/8/rP4X/sfgisMb+9e6xzach81CbWrA0zKXhxsFHZpTu8V046Pd6ZaDxNRW82km7SmUHMc4HEdbfrHokLqyevTITjeoqIvB5nFyMu7HWhe8CCiWTyv4rbPR2K+5qMiqpMGWtiHbx3RfOsI5W974Q6/8+9c4xOX5zVQeG1CMog8VmQAQGajfF52w2loIhv9o01jwpjBK41jv5HLTXn8v4V5fnj+oaa/kQRn20k9iLg9HOcYEBCAyJt5X7FbvDJnO7I0m83pd//tignhp5q20pqaLolKT7Bwj0xTkD8809c2A37/lz+Rw54ZpE/4KPshUW6m9MkwZstTL9420mpu+tgj1QbIoqeKdiq3CF18/y166f+ewnxzSs0RTWh+wOizsQJqvbP2S85k84mOlONH3p/yyfVJXd9n9zP8MXxs/pGULq7Cyg6XXHoRzUZrBKWSzHzlvEND+fkZNDnzWu4CoEe/L5kwpRGyh4fbeewvfVfHSo8JaMrZ/kQOsu92G4895q5mOum+sgjIpkxkSGiedoleTba1FTUsJbEitndkcfXWXIwv+Dy5o3s+dGPRSYQbX4xnDq1xuQYNpXbvTTX5yQEsdN1ledihBqSpgOyz2KRoA+Tl75P8o/j0/Mk++6ZpbNCZ3qGREFrVsv3pnYp4Rwo1YSRalWsHCvi2ff28ecjWyhIGTWVLOMgEtVyFIHjyZXXlUVmTiOfFfi7zODTv91zuXF0ChovJIptgXea7ZIaszvdUD18DhhJcpGneLAZ3rnd07Au5TBOTnStXBGuEouwe+H23sD1/G8/+53vr8b2aEm8KG6/6uwYNoxmslfy3OjbSRjoX5S1LOpcG1wMBlsY6pJUvenyCmkWtyyu4hh+bfxAv4jl0fbNimKJJsn7BYKt1q+nyBUXVu7S1FszsjJbjhMp2WhsZ79u+sKTK0GCxL8+Uov8UXaUTabDI3FJ5TLOQmrw9pr5NRs1kYY5EDfvZihIAbk0MLLq6TKqWh1SV2cRqGvdmFiUiHP0LCx9c/MALuOudV/HE9z+C+cqJFWgcPCuil47O+TbR7Dlm1QuWy/rq1XuztDJ16YemJQTYLAKdo9af50/hM/yTOEITJFTotwCpMZg8Cd5tOZKcujF3Io3PMmYj6vPqqKnu33pEsVZGkotMU8PK3sD2uHwpm1ORM0PvyIjWdhZS7TJVcIl4LtMT4h2TxkF40kUulUD0nDKtQRv2Zy0KA5W2nEye1zZCXqei4GEF8ObsEb31z38e1z51ka/++IM0XzvpTTlmHf3IIENuT2Hp2cqyZAaSJp8AYnm2xqxShVI/FuA8iycW8HyMn8cTK5Bk7ZFAUT/7W5PTmeZy995ZzyR5KSsO89h6s9O2buQUqsAKaFKjVAfhOPL3LzhtV6tV1hJBgEJiguT5uCzTExA1Ve2ZGClyEmAxW0Uj00Z6pcSJaF9Zp1gvuaWlFDBVS6e1pYg+Vb00Cypn/8TZb30Opx54Ca985j5c/+Sb65XsYZ2c1vQgAYujM7wVhORzcwhMHCTeh56PzIlFz5jZKubq5/GT+BJ/xjsxQLPeenPVpWsMJ4DhqkNjEgPROo+8aMwtNA3AWLftupKejebUNF49otKH9bVygj19jH7NwUxY6f3SorPQWB2AVOI91fagONyTZw7EeZMArnp0c1HelfP3IFukRr7KDQYBVtMnX9JLReRzCRPQqTu4633XcertT/Otn7+MO1+4TPMrZxqmETUJhOX3G6TUnkliyjaQ1ysYA4CyTRRW/yv0BJ7EZ+tfPbaMDGOTkYKNjQ8YYUmez8shIoRM9HMyk6UCCN2cuCZXXYQVL2/bk7UtEnKEmFJedhka26nulAR+ZGFYca91SNfKTcIAohzlsdaVfXT4Z0xzcdSqCOeirlGfuD5t6iqqST27dD+VxyVmHTYSx9R3gmqRvjTE4k5FS528TafffQ2nvvXn+c4vPUT7py5j/8wD0QhgvbU/DR4kPSRN2rBR1WIwmx93M5mJ3C265ln6LJ6nL/CLyVRZ5JdUMQCtKUIjVYZe1mobgSclHwHU07khGhbh7OQ7t9keGloIvVrWVYnk5tuXnMr6DBFNZV6iIIZt8qYYmeJ11UeUMVUFXQnR1ual2s8sD2FgifyWIqd6x+tcY0sz5aWzUgc2H4eVHLW2mPX11zZ5K+Ap821VwNtKxzLftnnoS7y5/MUlOLkFP38P5uceBF+9DNw60zSVmalS8w1Rqr1UgJSFbJlHSf4yPYkb9DxenH6Rr9JT5MH51OYtA/QACUWVTEhQAh1WLJo+a56ezZCx1J03YKb4yMe3TULK3qq+R1OESiWHbjQI0JSXBUyKPmI3W7Wj5xku2sg8LYqGKEUZx1fNRPJ2H11wUz0v9bgaUZauU6xfeIDJdLHEkgQ8/n71+iT3pfy9LFjj+Yj50sIM5x/Hfol47+5seLp+iaYbFzHdPosTt+6pl7Pd3Y3iOJa10DWasPztN9ewm15esruFW5sXcBPP8h26Rju+ZQ1u/rGD4UCHr3Z7d8exmlXWrjnD7H3ZZt6aAdc8s15Maz5UbhjNYD1Q15p+a4VK+NBsv6+PRVSsqh3YYuk6IGfLbBYEqO7BLKvPa+ynzNfuC/cs/2yXNLslyaYKSUWQXmypdMmvOFgbqUD1uqob7BFrdw7hVlYBbMJ+VoDudbTrI//rBSxBx1pWmXub9zY7SnOdwp8DWIWkeJkmOfM0+OST8ibkOt8xk79W20yjgb58WFmzLo4j0qeuMnps9IAxU9bbEEvXAWVkhla/s9eWzlmdknbaoM7HhnrL8tg6AhERgCiOxSTp8QkeV3A6J3GXdbEq15jNIo5Zb58vr2CsocQaji7xH5huoSpxij0owcZlUnXh/7pEesHNJExWXXcy1RejzkahqpLq+ZXs5nDf6yo8XQFQ61pCBwXQlXVqgKqYMbnsckxAUt87zgkoYvKcteS7MxvsNZLkLzZR5q5W3rxsbkDSi1w02ofaEW/pDlmrsj8FFHMnDwGX8m0qoGkyiMThpakJJnbpqwayelvnZJwhH/ec2WWSxnvUhE3SakUBszHRpNZwFpKbtdUroCZZatn48kVD1PtvZPrEb9oi2FMp/GKtBdhcnsZ8wb87SxS2mfVFtNmc6dv9CoiKOS0rAxxolW1UP6W3/8nMquTJsibDJJOLUcTI1zHQmJ3U0tkjWuuMwRZDvCOsdd6WnkceHg/yzoykl1DHWRODakxYLiU1gGkgg4lPW1S3Z7JXBbFSAokHpp4g1RCMmjYo1WMSM2ke4SyZiKCYytIOfUhV6TT9lKvxQWy3GcH9xWgGFlfY1xuxMY7cXwbVQmJq5vSdZR6tHLdjswBLWCmLcWZLqwwkWsq1YGJEa7a+M0fAiH1qCWjlIWnHQpREd7p16CjvDmQ5W+rPj1OaSVULAaxiUNtUiM3qAvmi5aeEe9kexOJzZjXqbPKYvTHKtxpCU/QB8c8MfbYHCsrm6qlP0ukk86X2bCEfNlEdc4akUUCKI+hcA/y+MpZ6SXxFf/Ps5khO99ciQd+vXkFS9ul7JmZkMCp5wpnH2EgvLbFOvWzyDooRDBwUpfYrWt13xE/Pvcsns0Len/Y5Ycu5Tbyn104jpd+BSvLZDpBrAV63zOIpufDxYQBOVDdrvEj1kMpKsvsOqrLf64wQidQQN136rIaZSVtzpsaMIl3LDFOkzRpe6XDA7vqogUPtT11TqromiVxdj0QKFHvHFiU2kltVJKOsd+QOE2DNhto6yEyuAzNrIHRmKKdNZuiQKRvTCa100Mgtp459VhuthXgDqgzKLRIetCrVceIkvlPNNFgICUMrZaN6T/C4vS1MlHPqnAbqJEY1PyTv0lg2B07Nby9RAGEhePSy4rghePL6qkA2E8+qicXUzII25nhfqAJFQADTPvC32swuvGMJrqWTvEnNomCV3bIT1prUwdJ2ICPtz+yTZ9abzow0K+LpQUe9uRqxibAhDgIo0BDE0tfJvm6l0EBa5Q+2q6xtTaJmmO1e9xBKDn1tdCtCA4pQURmdX4W28KcqLr3ZqWomggplGdu1bpo/557R+sJSJu8H1fJIVJwdCCpy5wCTmDPxEpVNyd/ypzZSRbN+QsIV6jQQLClbgHC0Gi41uLSGdV5indzR2mQSWEdiMQzMTu7M+GyAMDJFx5knSwFg7Ln1LLR+OodYeu13QnpyBGkp0Mfnh8fGSS7OZqTV06pp1BiSaJ/aeWWeyy2jgsbuuDNTBrNK1hzpquTGxLAgbHe5yjmzAgQias1TFPEswCJnoNIWem47hwabkA28GuuqaaPUKZlNsDJh1LbzoFO1kBwI7HUT5e4cm6G8aw24vimtfil4aLtXdc3XaMe2aPsl7JZBJ5lL0jFiDSiAgT0GpgaK6hmzscwsWLQnf+oJku8skQG7bbNqH7TaJ1dOiohVFqlDjQrcpCmg4OYsgaKb3oAOhrogTMmIXCQDJsZFFAdjQPNEZy5SL5ouCXYP/cHpO3JH5s7CsdtaNGe9lVgk9e96f2IUy8KlxGjLk74l8RYdZLUcamKG7HZbv5N4M/URieJByRIObRbTQyVpcdE9GsiCm0lpbJpMw4grN+lgS3xej8rlslFy4+wIquqJbJ6YeUrsLGImlj2WU5lJO1FFNcxK6XmWh2TPatrZp92O6+RkErpkGXBjLZKBIW2uEXmOJBhg7EB9EohaQulNUpcHD/Jagbx34yVj2NMPKOeiLWlmRX17necqEeT6rEybLme2MSbhwwIj9bSqRqkPwZljHBKFSywwsX6yYS5OnpoN6UsVtqyqzdkBIZ5litxYKDNUuOWAi+vEaK7zfI6H+UDHDHqt7QhCjG4bJY3AHrFP1j4xhmOSFDg0qUq5Hjn9oToOhHZjQtcZa/22OQO3bzWEYY+QVj6CBcZSTnp9up90XUVlJ1KbSr6WU3RJfX98KWhfV3wIvia1mfW2jWgq0zegWMgCcZjiQLVC0fEGHvSahmP1uYNHj4tl1dgBu7DyUQmb82sb8CB4+n5KIEkeL2UTkiw1oUFL13Fs9NvS26ou2StDsImZMhuUDm50mijjwY6PwNpEom1OhTl4OoaDFuwgU2nsOKtQALSfagxl0kfZsy3jWM7ZKdWRZq1mTcZkfQqHXplBlBHFqwczB3J9dHFqXB08pm8MKKlxKYDlRVDYKzbq9KGvbZM64Tjw5P7kLq7iiTJgGh0j18aj8DHGjIPc2bGjSxMVo44HoqgMyF7TDcDeTGU08YS0uzK7evixHtfSZRtXgDLF0wHLZKUGCNWD0//su1pCxP9u0jjZ7dS6pNNeZL+FShAAVze7/pIXbBk7uZeWGMhcagGHmUPYZwQsOvD0I7djgIOsD3SjOXd60/bUusue23r/Kp+UNlg0Vcb22TIPWptb32XtkcpowLpNdUc+KaNNDLgtzmkrM9taH6cppSdlGTcnOYnyjET7hUpCb2WzKFXQLidnoMgnOEo+KWuVKpg1bSyr0OFgLLp398Pys8ajJHL7TutZqEFJT/3RDxhpjSyYD2ia9bZmCjXTCQzW4YfK48a8tXd+dPXvvS/PZ9vWJy7CG0bitpRtpg1SIIkzUZ3uKoiVJV03ZndgeK7Idy+ocpEM60lVXEs5yZ7VQufgRHZKEfowcKgpi12cRr2WmOmZAHRM0DRK1gX5JLWYo/kn/zQw9Wk6k5H3azv7wCdrdqzpLOkrecwBEot0aQd11V6iLpA+OOdAPVdxoFGDuAsu4DJqkIWERAmtVROljk036Md5UozdmqA36ck/ky4D0dwSGBhtwMUeeubMYu0xK0hcJ3n5up8bzWOn8aCTk6kB1vu9IVOjOvll09FNYwQG0W2JuWyIZe4mYIWhhk30/K9mUlU/GyZabSPg9xexmo3vR10+Ldu5FmHINjt2zxo4qcqHbFZLsKHTU+UJHBWY5Yz9LNEBNZb6LE54tA9wCVVL8glNG/Iy+WKDNzwqaetGwGaWBYY6wPZ3IModxK3pT21Cq5WAVizn8gYmJdfBfx/ozMbDY9mGnpkdp8ZMepI1MnkYpAR3Umebd3hN0dhYoLf17GMXtqzD7YQlSw45I9EUcYADJltY09kezd/HcPIIpNsEi9HozsEEj2NF8CTVN8iq947ajgWQJifXGieZGPSbMZF2UmbPFTPku0tTp62Aoueiv/3HPs2DNiyO8qCV2TyWDZsBlQYE8rVsc8W7BFkL5J1duWxJiUwy+WIhztlTzsLGN8xFIr/zw5ZseH5xGRb4M8hCF/P7OCLurTkjRLaOoq6B/EL6fdGxbcS4G3TJ1BmT5EQ01CWpzdFv3ehvOjBws2a8fNFKwPrpc0QjYOVis4Hh1A4jHVT7bpuBk05GR41tSbNToI0uJUTGqILWqmwEpLjxB1LZSAcSkUCWgGT7YOwBu+9RGcf3M0xwW0uZJlo3clfHAFYvqFeeTWciVpqj5tFZ+T6fUV0yq3QAWzFTB57O/KlW9UFwkGnChq1NpJnooZ6yW+GbZyR2VOoNduBCfeR5QiUH1iel6T5K1ieBIUyOscOcymf1oiwtw0Y2zKRp9urfW/kpfwWlDYLVheS6p2tfXase7G3WEI85r5RHPmadFu0GXtUpgykP8gPX0RTXfXL3mcvJoB+Cq2NCT2uPw5vQXmgeqQ3iU6G5ompLEq0YCxl4dJ+AKl2wAiHrHEWRgkp2WpuT/9b1F27DLD/PHP02GF3DTjpwnUhMkJN4sjQAh6M1l5EBCNdZWFe6q4e9nsneaZqvAxifn8rx8pCuaVRO+p3ZMudj++o2NS3RZZL3jxoHydwlBjLNosMOVm3xv2aONIk5yPq07J1jkRe5qzlzJOH6egQXHJo/x9Mq8vXwoH1Hoy0ODui3p/dRBxwCaXp4Jbp8SfVKY/4sTVeGfuaa8ghMx21DE973a3+t8RQQtn8cjGbC8CobH/ieC0xIVzWSbI56TpoDG2uILLLmZRZvwvwYOzCHtrEvE8Ejol099AJzJ1FjrtCYD0tjVYt0HZBWpuYAcNqG48Oz7dYUGTRAGz7AAdawc6P+GUwtytBVCYNqHvjsym2YqH5Oo4vv0M+dCWgubNh2LB1s35M2MRSp6iOfp7L+IRN+usZH08fwY1kO4rrqICsCONz41O/rwZCP6RNLKeOsB8WqAVZlcHMw16s3hYbbUf3y77b81eVZWT1LjepMo888mLoBaHnh/wMR7Q3t798zUgAAAABJRU5ErkJggg=="})))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r=n(2),a=n.n(r),i=n(7),o=n.n(i),c=n(0),s=n(32),u=n(5),l=n(259),d=n(106),f=n(400),p=n(28),h=n(312),m=n(89),v=n(199),g=n(183),b=n(24),_=n(58);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=function(e){var t=Object(c.useRef)(e);return t.current=e,t},w=function(){var e=Object(c.useState)({}),t=o()(e,2),n=t[0],r=t[1],i=Object(c.useState)(!1),y=o()(i,2),w=y[0],C=y[1],S=Object(p.a)(),A=Object(s.a)().go,k=Object(_.a)().showSnackbarError,j=Object(b.b)().apiRequest,T=Object(l.b)(),I=T.ownerId,P=T.fileList,D=Object(d.c)().getLangKey,N=Object(m.a)().accountInfo,x=null==N?void 0:N.id,R=Object(c.useCallback)((function(e){var t=function(e,t){var n=parseInt(Math.random().toString().slice(2));return{file:e.file,data:{id:n,type:"video",owner_id:t,title:e.title,description:e.description,date:0}}}(e,x),n=t.data.id;return P.addLocal(n,t),n}),[x,P.addLocal]),M=O(R),L=O(P.getState),B=Object(c.useCallback)((function(){S(Object(h.c)({onFileSelectRef:M})),A(u.i.VIDEO_UPLOAD,{},{replace:!0})}),[M,S,A]),F=Object(c.useCallback)((function(e){var t=P.get(e),n=P.getState(e);!t||"error"!==n&&"stopped"!==n||P.setState(t.data.id,"queue")}),[P.get,P.getState,P.setState]),H=Object(c.useCallback)((function(e,t){return j("video.get",{videos:"".concat(t,"_").concat(e)}).then((function(e){return e.items[0]}))}),[j]),V=Object(c.useCallback)((function(e,t,n){if("uploading"!==L.current(t))return Promise.reject({isCancelled:!0});var i=new FormData;i.append("video_file",n);var o=Object(f.a)("".concat(e,"&ajx=1"),{method:"POST",timeout:6e5,data:i,responseType:"json"});return r((function(e){return E(E({},e),{},a()({},t,o.abort))})),o.promise.then((function(e){return e.error&&e.error_code?Promise.reject(e.error):e}))}),[L]),U=Object(c.useCallback)((function(e,t){return j("video.save",I<0?{group_id:-I,name:e,description:t}:{})}),[j,I]),z=Object(c.useCallback)((function(e){return P.setState(e,"stopped")}),[P.setState]);return Object(c.useLayoutEffect)((function(){var e,t=P.getByState("uploading"),n=P.get(t[0]),r=null==n||null===(e=n.data)||void 0===e?void 0:e.id,a=null==n?void 0:n.file;null!=n&&null!=r&&null!=a&&(C(!0),U(n.data.title,n.data.description).then((function(e){return V(e.upload_url,r,a)})).then((function(e){var t=e.video_id,a=e.owner_id,i=u.d.getState().params;return Object(g.a)({event_type:"doc_upload",doc_creator_id:Math.abs(x),doc_id:r,section_document_type:i.schoolId?"public_documents":"private_documents",school_id:i.schoolId}),H(t,a).then((function(e){return n.data=e,P.moveToStored(n,r,t)}))})).catch((function(e){e&&e.isCancelled||(P.setState(r,"error"),k(D("vkui_edu_videos_upload_error"),{action:D("vkui_edu_videos_upload_retry"),onActionClick:function(){return F(r)},onClose:function(){}}))})).finally((function(){C(!1)})))}),[P.getByState,P.get]),Object(c.useEffect)((function(){P.localList.forEach((function(e){var t=e.data.id,a=n[t];"uploading"!==P.getState(t)&&a&&(a(),r(Object(v.a)(n,t)))}))}),[n,P.getState,P.localList]),{showUploadModal:B,retryUpload:F,cancelUpload:z,pending:w}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=n(106),i=n(329),o=n(55),c=function(e,t){var n,c=Object(o.a)().showAlertConfirm,s=Object(a.c)().getLangKey,u=null==e||null===(n=e.info)||void 0===n?void 0:n.is_group_channel,l=Object(i.a)(u);return Object(r.useCallback)((function(){var n=s(u&&e.canManage?"vkui_edu_leave_chat_confirm_title_admin_channel":l("vkui_edu_leave_chat_confirm_title")),r='<span class="Messages__text">'.concat(s(u&&e.canManage?"vkui_edu_leave_chat_confirm_text_admin_channel":l("vkui_edu_leave_chat_confirm_text")),"</span>");c({title:n,text:r,actionText:s(l("vkui_edu_leave_chat_confirm_leave_button")),callback:t,isMobileVerticalActions:!0})}),[t,e])}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=["jpg","gif","png","pdf","doc","docx","xls","xlsx","ppt","pptx"]},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(12),a=n.n(r),i=n(2),o=n.n(i),c=n(0),s=n(252),u=n(24),l=["items"];function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},d=Object(u.b)(),p=d.apiRequest,h=function(e){var t=e.reduce((function(e,t){return f(f({},e),{},o()({},t.id,{data:t}))}),{});n.replaceAll(t)},m=Object(s.a)(f({initialSearch:"",fetch:function(n){var a=n.itemsCount,i=n.search,o=n.options,c=i?e.search:e.get,s=f({school_id:i?r:void 0,owner_id:!i&&r?-r:void 0,count:20,q:i||void 0,offset:a},t);return p(c,s,o).then((function(e){return e.items}))}},i)),v=m.items,g=a()(m,l);return Object(c.useEffect)((function(){return h(v)}),[v]),f({localDocumentsList:n.localList,documentsList:n.storedList,items:v},g)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(81),a=function(e){switch(e){case r.f:return"vkui_edu_documents_type_text";case r.a:return"vkui_edu_documents_type_archive";case r.b:return"vkui_edu_documents_type_audio";case r.c:return"vkui_edu_documents_type_book";case r.d:return"vkui_edu_documents_type_gif";case r.e:return"vkui_edu_documents_type_image";case r.h:return"vkui_edu_documents_type_video";default:return"vkui_edu_documents_type_other"}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(1),a=n(0),i=n.n(a),o=n(1166),c=n(5),s=n(32),u=function(e){var t=e.id,n=e.photo,a=e.firstName,u=e.lastName,l=e.userTitle,d=e.size,f=e.className,p=e.deactivated,h=Object(s.a)().go,m="deleted"===p;return i.a.createElement(r.pb,{key:t,className:f,before:i.a.createElement(r.h,{size:"small"===d?48:72,src:n}),description:l&&i.a.createElement(r.k,{level:"1",weight:"regular"},l),after:!m&&i.a.createElement(r.J,{icon:i.a.createElement(o.a,null),onClick:function(e){e.stopPropagation(),e.preventDefault(),h(c.j.MESSAGES,{act:"show",peer:t})}}),onClick:function(){m||h(c.i.PROFILE_COMPACT,{userId:t})},disabled:m},a," ",u)};u.defaultProps={size:"regular"};var l=Object(a.memo)(u)},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(6),a=n.n(r),i=n(12),o=n.n(i),c=n(0),s=n.n(c),u=(n(1079),n(1)),l=["className"],d=function(e){var t=e.className,n=o()(e,l);return s.a.createElement(u.y,a()({className:Object(u.Lb)(t,"FormRadioGroup")},n))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r,a,i=n(7),o=n.n(i),c=n(197),s=n(381),u=n(28),l=n(0),d=n(5),f=n(327),p=n(82),h=n(48),m=n(24),v=n(130),g=function(e){var t=Object(m.b)().apiRequest,n=Object(u.b)(),i=n.schoolGradeRequests,g=n.loaded,b=Object(f.a)(e).schoolInfo,_=Object(l.useState)(0),y=o()(_,2),E=y[0],O=y[1],w=Object(u.a)(),C=Object(h.h)(b),S=g[d.j.SCHOOL_REQUESTS],A=function(e){return e&&Number(e)>0?Number(e):void 0},k=Object(l.useCallback)((function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.search,u=i.role,l=i.gradeId,f=!o&&!A(u)&&!A(l);r||(r=e),r&&r===e&&a&&O(a),w(Object(c.b)(d.j.SCHOOL_REQUESTS,!1));var h={group_id:e,fields:"photo_200",q:o||void 0,role:C?A(u):p.a.STUDENT,grade_id:A(l)};return t("education.getGradeRequests",h,{signal:n}).then((function(e){return w(Object(s.b)(e)),f&&(a=e.length,O(a)),e})).finally((function(){w(Object(c.b)(d.j.SCHOOL_REQUESTS))}))}),[w,b]);return{isSchoolGradeRequestsLoaded:S,schoolGradeRequests:i,getSchoolGradeRequests:Object(v.a)({requestFn:k,abortStub:[],deps:[e]}),schoolGradeRequestsCount:S&&E}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var r=n(6),a=n.n(r),i=n(21),o=n.n(i),c=n(12),s=n.n(c),u=n(0),l=n.n(u),d=n(106),f=n(82),p=n(1),h=n(83),m=n(268),v=n(85),g=n(149),b=n(458),_=["schoolId","className"],y=function(e){var t=e.schoolId,n=e.className,r=s()(e,_),i=Object(d.c)().getLangKey,c=Object(m.a)(t),y=c.schoolGrades,E=c.getGrades,O=c.clearGrades,w=Object(v.a)(b.a),C=w.searchFilters,S=w.updateFilterValues,A=[{type:"radio",name:"role",defaultValue:"0",label:i("vkui_edu_school_requests_search_options_role"),options:[{value:"0",label:i("vkui_edu_member_role_any")},{value:f.a.STUDENT.toString(),label:i("vkui_edu_member_role_only_students")},{value:f.a.TEACHER.toString(),label:i("vkui_edu_member_role_only_teachers")}]},{type:"select",name:"gradeId",defaultValue:"0",label:i("vkui_edu_school_requests_search_options_class"),options:[{value:"0",label:i("vkui_edu_member_grade_any")}].concat(o()(y.map((function(e){return{value:e.id.toString(),label:Object(h.d)(e)}}))))}],k=Object(v.b)(b.a,null).updateSearchFilters;return Object(u.useEffect)((function(){return E(),O}),[]),Object(u.useEffect)((function(){y.length>0&&k(A,null==C?void 0:C.values)}),[y]),C?l.a.createElement(p.C,a()({className:Object(p.Lb)(n,"SchoolMembersSidebar")},r),l.a.createElement(p.D,null,i("vkui_edu_school_requests_search_options")),l.a.createElement(g.a,a()({},C,{onChange:S}))):null},E=Object(u.memo)(y)},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(6),a=n.n(r),i=n(21),o=n.n(i),c=n(0),s=n.n(c),u=n(106),l=n(82),d=n(1),f=n(83),p=n(268),h=n(85),m=n(149),v=n(470),g=n(48),b=n(28),_=function(e){var t=e.schoolId,n=Object(u.c)().getLangKey,r=Object(b.b)().schoolInfo,i=Object(g.h)(r),_=Object(p.a)(t),y=_.schoolGrades,E=_.getGrades,O=Object(h.a)(v.a),w=O.searchFilters,C=O.updateFilterValues,S=O.clearSearchFilters,A=Object(c.useMemo)((function(){var e=[{type:"select",name:"gradeId",defaultValue:"0",label:n("vkui_edu_school_requests_search_options_class"),options:[{value:"0",label:n("vkui_edu_member_grade_any")}].concat(o()(y.map((function(e){return{value:e.id.toString(),label:Object(f.d)(e)}}))))}];return i&&e.unshift({type:"radio",name:"role",defaultValue:"0",label:n("vkui_edu_school_requests_search_options_role"),options:[{value:"0",label:n("vkui_edu_member_role_any")},{value:l.a.STUDENT.toString(),label:n("vkui_edu_member_role_only_students")},{value:l.a.TEACHER.toString(),label:n("vkui_edu_member_role_only_teachers")}]}),e}),[i]);return Object(c.useEffect)((function(){E()}),[]),Object(c.useEffect)(S,[y]),Object(h.b)(v.a,y.length>0&&r?A:null),w?s.a.createElement(d.C,null,s.a.createElement(d.D,null,n("vkui_edu_school_requests_search_options")),s.a.createElement(m.a,a()({},w,{onChange:C}))):null},y=Object(c.memo)(_)},,function(e,t,n){"use strict";n.r(t),n.d(t,"block",(function(){return te})),n.d(t,"h",(function(){return q})),n.d(t,"handler",(function(){return J})),n.d(t,"list",(function(){return ae})),n.d(t,"node",(function(){return Z})),n.d(t,"rec",(function(){return ne})),n.d(t,"remap",(function(){return B})),n.d(t,"route",(function(){return $})),n.d(t,"spec",(function(){return Q})),n.d(t,"text",(function(){return se})),n.d(t,"tree",(function(){return re})),n.d(t,"using",(function(){return Y})),n.d(t,"val",(function(){return ue})),n.d(t,"variant",(function(){return X}));var r=n(9);function a(e,t){e.cursor[t].prev&&(e.cursor[t].prev.cursor[t].next=e.cursor[t].next),e.cursor[t].next&&(e.cursor[t].next.cursor[t].prev=e.cursor[t].prev),e.queue[t].last===e&&(e.queue[t].last=e.cursor[t].prev),e.queue[t].first===e&&(e.queue[t].first=e.cursor[t].next),e.cursor[t].prev=null,e.cursor[t].next=null}function i(e){var t,n;e.status="active",t=o(e),(n=e).cursor.prev&&(n.cursor.prev.cursor.next=n.cursor.next),n.cursor.next&&(n.cursor.next.cursor.prev=n.cursor.prev),t.last===n&&(t.last=n.cursor.prev),t.first===n&&(t.first=n.cursor.next),n.cursor.prev=null,n.cursor.next=null}function o(e){return e.group.activeChilds[e.priority]}function c(e,t){t.value.active=t.value.pending=e,"active"!==t.status&&i(t)}function s(e,t){if(t.value.active===e)return t.value.pending=e,void("pending"===t.status&&(i(t),o(t).first||a(t.group,t.priority)));var n,r,c,s;"active"===t.status&&(t.status="pending",o(t).first||((c=t.group).queue[s=t.priority].last?(c.cursor[s].prev=c.queue[s].last,c.queue[s].last.cursor[s].next=c,c.queue[s].last=c):c.queue[s].first=c.queue[s].last=c),r=t,(n=o(t)).last?(r.cursor.prev=n.last,n.last.cursor.next=r,n.last=r):n.first=n.last=r),t.value.pending=e,t.group.queue.rafID||(t.group.queue.rafID=pe(t.group.queue.execQueue))}function u(e){le("execQueue");let t,n,r=fe(),o=0;e:for(;e.props.first||e.tree.first||e.data.first;){if(fe()-r>=10){o=1;break e}let c=!!e.props.first;for(c&&le("props");t=e.props.first;){for(;n=t.activeChilds.props.first;){if(fe()-r>=10){o=1,de("props");break e}n.runOp(n.value.pending),n.value.active=n.value.pending,i(n)}a(t,"props")}c&&de("props");let s=!!e.tree.first;for(s&&le("tree");t=e.tree.first;){for(;n=t.activeChilds.tree.first;){if(fe()-r>=10){o=1,de("tree");break e}n.runOp(n.value.pending),n.value.active=n.value.pending,i(n)}a(t,"tree")}s&&de("tree");let u=!!e.data.first;for(u&&le("data");t=e.data.first;){for(;n=t.activeChilds.data.first;){if(fe()-r>=10){o=1,de("data");break e}n.runOp(n.value.pending),n.value.active=n.value.pending,i(n)}a(t,"data")}u&&de("data")}if(de("execQueue"),o)e.rafID=pe(e.execQueue);else if(e.rafID=null,e.onDrain){let t=e.onDrain;e.onDrain=null,t()}}function l({value:e,runOp:t,group:n,priority:r}){return{value:{active:e,pending:e},runOp:t,status:"active",priority:r,group:n,cursor:{prev:null,next:null}}}function d({onComplete:e}){let t={props:{first:null,last:null},tree:{first:null,last:null},data:{first:null,last:null},rafID:null,execQueue(){},onDrain:e};return t.execQueue=u.bind(null,t),t}function f(e){return{ops:[],queue:e,activeChilds:{props:{first:null,last:null},tree:{first:null,last:null},data:{first:null,last:null}},cursor:{props:{prev:null,next:null},tree:{prev:null,next:null},data:{prev:null,next:null}}}}function p({value:e,group:t,onInit:n,onChange:r,onTerminate:a}){let i=l({value:e,group:t,runOp(e){o.status="A",r(e)},priority:"data"}),o={status:"IA",value:i.value,hooks:{onTerminate:a},ops:{init:l({value:0,group:t,runOp(e){o.status="A",n(o.value.active)},priority:"data"}),change:i,terminate:l({value:0,group:t,runOp(e){o.status="T",o.hooks.onTerminate(1)},priority:"data"})}};return s(1,o.ops.init),o}function h(e){switch(e.status){case"I":case"T":case"AT":return;case"A":e.status="AT",s(1,e.ops.terminate);break;case"AA":e.status="AT",s(1,e.ops.terminate),s(e.value.active,e.ops.change);break;case"IA":e.status="T",s(0,e.ops.init),e.hooks.onTerminate(0)}}function m(e,t){switch(t.status){case"I":case"T":return;case"A":t.value.active!==e&&(t.status="AA",s(e,t.ops.change));break;case"AA":t.value.active===e?(t.status="A",s(e,t.ops.change)):t.value.pending!==e&&(t.value.pending=e);break;case"IA":t.value.active=t.value.pending=e}}function v(e){switch(e=String(e)){case"__proto__":case"__defineGetter__":case"__defineSetter__":case"constructor":case"prototype":case"hasOwnProperty":case"toString":case"valueOf":case"setProperty":case"removeProperty":return"forbidden";default:return e.replace(/[^a-zA-Z0-9\-_]/g,"")}}function g(e,t){for(let n=0;n<t.length;n++){let{type:r,field:a,value:i}=t[n];he[r](e,a,i)}}function b(e){return""!==e&&0!==e&&"0"!==e&&(0==e||null==e)}function _(e,t,n){b(n)?e.style.removeProperty("--"+t):e.style.setProperty("--"+t,""+n)}function y(e,t,n){b(n)?delete e.style[t]:e.style[t]=""+n}function E(e,t,n){b(n)?delete e.dataset[t]:e.dataset[t]=""+n}function O(e,t,n){if(b(n)){switch(t){case"value":delete e.value;break;case"checked":e.checked=0;break;case"spellcheck":if(0==n)return void e.setAttribute("spellcheck","false")}e.removeAttribute(t)}else{switch(t){case"value":e.value=""+n;break;case"checked":e.checked=""+n}e.setAttribute(t,""+n)}}function w(e,t){e.replaceData(0,(e.textContent||"").length,String(t))}function C({fn:e,state:t={},defer:n=0,name:a="",draft:i,isSvgRoot:o,namespace:c,env:s,isBlock:u=0}){let l=_e,d=ge,f={id:++me,name:a,plain:[],watch:[],nameMap:{},pages:[],closure:[],childTemplates:[],upward:r.step.filter({fn(e,t,n){if(!n.page){if(!n.parent||!n.parent.page)return 1;n.page=n.parent.page}if(!n.page.active)return console.count("inactive page upward"),0;let a=[n.page.template],i=[n.page];{let e=n.page.parent;for(;e;)i.push(e),a.push(e.template),e=e.parent}return n.node.next.forEach(t=>{let o=t.meta.nativeTemplate;o?a.includes(o)?Object(r.launch)({target:S(t,n.forkPage),params:e,defer:1,page:i[a.indexOf(o)],stack:n,forkPage:n.forkPage}):console.error("context drift",{stack:n,node:t}):Object(r.launch)({target:S(t,n.forkPage),params:e,defer:1,page:null,stack:n,forkPage:n.forkPage})}),0}}),loader:r.step.filter({fn(e,t,n){if(n.parent){let a=n.forkPage?n.forkPage.graphite.id:null;if(n.page){if(!n.page.active)return console.count("inactive page loader"),0;if(n.page.template===f)return 1;if(n.page.childSpawns[f.id])n.page.childSpawns[f.id].forEach(t=>{(!a||t.leaf.forkPage&&a===t.leaf.forkPage.graphite.id)&&Object(r.launch)({params:e,target:S(n.node,n.forkPage),page:t,defer:1,forkPage:n.forkPage})});else if(t.targetTemplate){let a=[n.page];{let e=n.page.parent;for(;e;)a.push(e),e=e.parent}let i=a.findIndex(e=>t.targetTemplate===e.template);Object(r.launch)(-1===i?{params:e,target:S(n.node,n.forkPage),page:null,defer:1,forkPage:n.forkPage}:{params:e,target:S(n.node,n.forkPage),page:a[i],defer:1,forkPage:n.forkPage})}else f.pages.forEach(t=>{if(a&&(!t.leaf.forkPage||a!==t.leaf.forkPage.graphite.id))return;let i=n.page.fullID;(t.fullID===i||t.fullID.startsWith(i+"_"))&&Object(r.launch)({params:e,target:S(n.node,n.forkPage),page:t,defer:1,forkPage:n.forkPage})})}else f.pages.forEach(t=>{(!a||t.leaf.forkPage&&a===t.leaf.forkPage.graphite.id)&&Object(r.launch)({params:e,target:S(n.node,n.forkPage),page:t,defer:1,forkPage:n.forkPage})});return 0}return 1}}),parent:d};d&&d.childTemplates.push(f);let p=Object(r.createNode)({meta:{template:f}});ge=f;let h=_e={template:f,node:p,api:null,trigger:{mount:Object(r.createEvent)()},draft:i,isSvgRoot:o,namespace:c,env:s,isBlock:u||!(!l||!l.isBlock)};return n?h.deferredInit=()=>{let n=_e,a=ge;_e=h,ge=f,h.deferredInit=null;try{Object(r.withRegion)(p,()=>{let n=Object(r.restore)(t);h.api=e(n,h.trigger),f.nameMap=n})}finally{_e=n,ge=a}}:Object(r.withRegion)(p,()=>{let n=Object(r.restore)(t);h.api=e(n,h.trigger),f.nameMap=n}),_e=l,ge=d,f.actor=h,h}function S(e,t){return t&&t.nodeMap[(e=e.graphite||e).id]||e}function A(e,t){let n=e;switch(t&&ye(t,e)&&(n=ye(t,e)),e.type){case"list":return[...n.current];case"shape":return{...n.current};default:return n.current}}function k(e,t,n){let r=t;for(;r&&!ye(r.spawn,e);)r=r.parentLeaf;return r?ye(r.spawn,e):n&&ye(n,e)?ye(n,e):e}function j(e,t,n){return k(e,t,n).current}function T(e,t){ye(t.spawn,e)||(t.spawn.reg[e.id]=k(e,t.parentLeaf,t.forkPage))}function I(e,{values:t={},parentLeaf:n,mountNode:a,svgRoot:i,leafData:o,opGroup:c,domSubtree:s,hydration:u,forkPage:l,env:d}){function f(e){if(e.before)for(let t=0;t<e.before.length;t++){let n=e.before[t];switch(n.type){case"map":{let t=n.from;T(t,_),v[e.id].current=n.fn(v[t.id].current);break}case"field":{let t=n.from;T(t,_),v[e.id].current[n.field]=v[t.id].current;break}case"closure":T(n.of,_)}}if(!e.after)return;let t=v[e.id].current;for(let n=0;n<e.after.length;n++){let r=e.after[n],a=r.to;switch(v[a.id]||(v[a.id]={id:a.id,current:j(a,_.parentLeaf,l)}),r.type){case"copy":v[a.id].current=t;break;case"map":v[a.id].current=r.fn(t)}}}function p(e,t,n){let r;t.stop=1;try{for(;t.i<e.length;)r=e[t.i],t.i++,r.fn(n[r.of.id]?n[r.of.id].current:j(r.of,_.parentLeaf,l))}catch(e){console.error(e),t.stop=0}}!d&&n&&(d=n.env);let h=n?n.spawn:null,m=e.template,v={},g={id:++ve,fullID:"",reg:v,template:m,parent:h,childSpawns:{},active:1};m.pages.push(g);let b={},_={actor:e,spawn:g,api:b,draft:e.draft,ops:{group:c,domSubtree:s},svgRoot:i,data:o,parentLeaf:n,hydration:u,forkPage:l,env:d,mountNode:a},y=be;be=_,h&&(h.childSpawns[m.id]||(h.childSpawns[m.id]=[]),h.childSpawns[m.id].push(g)),g.fullID=h?`${h.fullID}_${g.id}`:""+g.id;for(let e=0;e<m.closure.length;e++){let t=m.closure[e],n=t,r=g.parent;e:for(;r;){if(ye(r,t)){n=ye(r,t);break e}r=r.parent}!r&&l&&ye(l,t)&&(n=ye(l,t)),v[t.id]=n}for(let e=0;e<m.plain.length;e++){let t=m.plain[e],n={id:t.id,current:A(t,l)};v[t.id]=n}for(let e in t){let n=m.nameMap[e].stateRef.id;v[n]={id:n,current:t[e]}}m.closure.forEach(f),m.plain.forEach(f);let E={i:0,stop:0};for(;!E.stop;)p(m.watch,E,v);if(h)for(let e in g.childSpawns)e in h.childSpawns||(h.childSpawns[e]=[]),h.childSpawns[e].push(...g.childSpawns[e]);if(b.mount=(t,n=1)=>(e=>{if(Ee)return void Ee.steps.push(e);let t;Ee={parent:Ee,steps:[e]};do{for(;t=Ee.steps.shift();)Ee={parent:Ee,steps:[]},Object(r.launch)(t)}while(Ee=Ee.parent)})({target:e.trigger.mount,params:t,defer:n,page:g,forkPage:l}),e.api)for(let t in e.api)b[t]=(n,a=1)=>Object(r.launch)({target:e.api[t],params:n,defer:a,page:g,forkPage:l});return _.spawn.api=b,_.spawn.leaf=_,_.api.mount(_),be=y,_}function P(e){let t=function e(t){switch(t.type){case"using":return t;case"fragment":switch(t.parent.type){case"element":case"using":return t.parent}default:return e((e=>{switch(e.type){case"text":case"element":case"list":case"route":case"rec":case"recItem":case"block":case"blockItem":return e.parent;case"fragment":default:switch(e.parent.type){case"using":case"block":return e.parent;default:return e.parent.parent}}})(t))}}(e);return t?t.value:null}function D(e){if(!e.visible)return null;switch(e.type){case"text":case"element":return e;case"route":return D(e.child);case"LF":case"RF":case"FF":case"rec":case"recItem":case"block":case"blockItem":return(e=>{let t=e.child;for(let e=t.length-1;e>=0;e--){let n=D(t[e]);if(n)return n}return null})(e.child);case"list":{let t=e.lastChild;if(!t)return null;for(;t;){let e=D(t);if(e)return e;t=t.left}return null}default:return null}}function N(e){switch(e.type){case"fragment":switch(e.parent.type){case"element":case"using":return null;case"RF":{let t=e.parent.parent,n=t.parent;for(let e=t.index-1;e>=0;e--){let t=D(n.child[e]);if(t)return t}return N(n)}case"rec":case"recItem":case"block":case"blockItem":case"FF":{let t=e.parent,n=t.parent;for(let e=t.index-1;e>=0;e--){let t=D(n.child[e]);if(t)return t}return N(n)}case"LF":{let t=e.parent.left;for(;t;){let e=D(t);if(e)return e;t=t.left}return N(e.parent.parent)}default:return null}case"element":case"text":case"route":case"rec":case"recItem":case"block":case"blockItem":case"list":{let t=e.parent;for(let n=e.index-1;n>=0;n--){let e=t.child[n];if(!e)continue;let r=D(e);if(r)return r}return N(t)}default:return null}}function x(e){let t=N(e);return t?t.value:null}function R(e,{parentBlockFragment:t,leaf:n,node:r,svgRoot:a,values:i}){e.childTemplates.forEach(e=>{M({parentBlockFragment:t,leaf:n,node:r,svgRoot:a,values:i,actor:e})})}function M({parentBlockFragment:e,leaf:t,node:n=t.mountNode,actor:a,svgRoot:i,values:o}){let c,{draft:s}=a,{queue:u}=t.ops.group,d=f(u),p=t.ops.domSubtree,h=p;switch(s.type){case"route":{let t={type:"route",parent:e,child:{type:"RF",parent:null,child:{type:"fragment",parent:null,child:[]},visible:0},visible:1,index:s.inParentIndex};t.child.parent=t,t.child.child.parent=t.child,e.child[s.inParentIndex]=t,c={type:"route",block:t,ops:{},initialized:0};break}case"element":{let n;if(a.isBlock){let e,r,a=t;for(;a&&(!r||!e);){a.actor.env&&(e=a.actor.env);let{draft:t}=a;"element"===t.type&&("svg"===t.tag?r="svg":"foreignObject"===t.tag&&(r="html")),a=a.parentLeaf}r||(r="html"),e&&(n="svg"===r?e.document.createElementNS("http://www.w3.org/2000/svg",s.tag):e.document.createElement(s.tag),g(n,s.staticSeq))}else n=s.stencil.cloneNode();let i={type:"element",parent:e,child:{type:"fragment",parent:null,child:[]},value:n,visible:0,index:s.inParentIndex};i.child.parent=i,e.child[s.inParentIndex]=i,c={type:"element",block:i,ops:{visible:l({value:0,priority:"tree",runOp(e){e?(L(i),c.needToCallNode&&(c.needToCallNode=0,Object(r.launch)({target:Oe,params:{element:i.value,fns:s.node},page:m.spawn,forkPage:t.forkPage}))):(i.value.remove(),i.visible=0)},group:p})},needToCallNode:s.node.length>0},h=f(u);break}case"list":{let t={type:"list",parent:e,child:[],lastChild:null,visible:1,index:s.inParentIndex};e.child[s.inParentIndex]=t,c={type:"list",draft:s,block:t,records:[]};break}case"using":case"listItem":break;case"rec":{let t={type:"rec",parent:e,child:{type:"fragment",parent:null,child:[]},visible:1,index:s.inParentIndex};t.child.parent=t,e.child[s.inParentIndex]=t,c={type:"rec",block:t};break}case"recItem":{let t={type:"recItem",parent:e,child:{type:"fragment",parent:null,child:[]},visible:1,index:s.inParentIndex};t.child.parent=t,e.child[s.inParentIndex]=t,c={type:"rec item",block:t};break}case"block":{let t={type:"block",parent:e,child:{type:"fragment",parent:null,child:[]},visible:1,index:s.inParentIndex};t.child.parent=t,e.child[s.inParentIndex]=t,c={type:"block",block:t};break}case"blockItem":{let t={type:"blockItem",parent:e,child:{type:"fragment",parent:null,child:[]},visible:1,index:s.inParentIndex};t.child.parent=t,e.child[s.inParentIndex]=t,c={type:"block item",block:t};break}default:console.warn("unexpected draft type "+s.type)}let m=I(a,{values:o,parentLeaf:t,mountNode:n,svgRoot:i||t.svgRoot,leafData:c,opGroup:d,domSubtree:h,hydration:t.hydration,forkPage:t.forkPage})}function L(e){let t=x(e);t?t.after(e.value):P(e).prepend(e.value),e.visible=1}function B(e,t){if(Array.isArray(t))return t.map(t=>e.map(e=>e[t]));if("object"==typeof t&&null!==t){let n={};for(let r in t){let a=t[r];n[r]=e.map("function"==typeof a?e=>a(e):e=>e[a])}return n}return e.map(e=>e[t])}function F(e,t){let{spawn:n}=e;for(let e in n.childSpawns){let r=n.childSpawns[e];for(let e=0;e<r.length;e++)t(r[e].leaf)}}function H(e){e.spawn.active=0,F(e,U)}function V({spawn:e}){z(e,e.parent.childSpawns[e.template.id]),z(e,e.template.pages)}function U(e){let{spawn:t,data:n}=e;switch(n.type){case"element":z(t,t.parent.childSpawns[t.template.id]),function e(t){t.active=0,z(t,t.template.pages);for(let n in t.childSpawns)t.childSpawns[n].forEach(e)}(t),s(0,n.ops.visible);break;case"list":{let t=n.records;for(let e=0;e<t.length;e++){let n=t[e];n.instance&&U(n.instance),n.active=0}e.spawn.active=0,V(e);break}case"list item":{let t=n.block;z(t,t.parent.child);let r=t.left,a=t.right;r&&(r.right=a,a||t.parent.lastChild!==t||(t.parent.lastChild=r)),a&&(a.left=r),r||a||t.parent.lastChild!==t||(t.parent.lastChild=null),t.left=null,t.right=null,H(e),V(e);break}case"route":H(e),V(e);break;case"block":case"block item":case"rec":case"rec item":H(e)}}function z(e,t){if(!t)return;let n=t.indexOf(e);-1!==n&&t.splice(n,1)}function G(e,t){if(!e)throw Error(t)}function W(e,t){if(!e)throw Error(t+"() called outside from using() closure")}function q(e,t){function n(e){return e.data.block.value}function a(e,t,n){let r=e.data.block.child,a={type:"text",parent:r,visible:0,index:n,value:null};if(r.child[n]=a,e.hydration){let n=N(a);if(n)switch(n.type){case"text":a.value=e.env.document.createTextNode(t),n.value.after(a.value);break;case"element":a.value=n.value.nextSibling,w(a.value,t)}else{let e=P(a);a.value=e.firstChild,w(a.value,t)}a.visible=1}else a.value=e.env.document.createTextNode(t),L(a);return a}let i,o=0,u=0;"function"==typeof t?(o=1,i=t):t&&(u=1,t.fn&&(o=1,i=t.fn),t.ɔ&&("function"==typeof t.ɔ?(o=1,i=t.ɔ):"function"==typeof t.ɔ.fn&&(o=1,i=t.ɔ.fn))),W(_e,"h");let d,f=_e.env,p=_e.namespace,h=p,m="html";h=m="svg"===p?"svg":"html","svg"===e&&(m="svg",h="svg"),_e.isBlock||(d="svg"===m?f.document.createElementNS("http://www.w3.org/2000/svg",e):f.document.createElement(e));let v=d,b={type:"element",tag:e,attr:[],data:[],text:[],styleProp:[],styleVar:[],handler:[],stencil:v,seq:[],staticSeq:[],childTemplates:[],childCount:0,inParentIndex:-1,opsAmount:1,node:[]};"foreignObject"===p?(b.attr.push({xmlns:"http://www.w3.org/1999/xhtml"}),h="html"):"svg"===e?(b.attr.push({xmlns:"http://www.w3.org/2000/svg"}),h="svg"):"foreignObject"===e&&(h="foreignObject");let A=C({name:"element",draft:b,isSvgRoot:"svg"===e,namespace:h,fn(e,{mount:d}){function f(e){return oe({mount:p,state:e,onMount:(e,t)=>({leaf:t,value:e}),onState:(e,t)=>({leaf:e,value:t})})}let p=Object(r.createEvent)();o&&i(),u&&Q(t);let h={attr:{},data:{},text:b.text,styleProp:{},styleVar:{},visible:b.visible||null,handler:b.handler};for(let e=0;e<b.attr.length;e++){let t=b.attr[e];for(let e in t)"xlink:href"===e?h.attr.href=t[e]:h.attr[e]=t[e]}for(let e=0;e<b.data.length;e++){let t=b.data[e];for(let e in t)h.data[e]=t[e]}for(let e=0;e<b.styleProp.length;e++){let t=b.styleProp[e];for(let e in t)e.startsWith("--")?h.styleVar[e.slice(2)]=t[e]:h.styleProp[e]=t[e]}for(let e=0;e<b.styleVar.length;e++){let t=b.styleVar[e];for(let e in t)h.styleVar[e]=t[e]}h.visible&&b.seq.push({type:"visible",value:h.visible});for(let e in h.attr){let t=h.attr[e];r.is.unit(t)?b.seq.push({type:"attr",field:e,value:t}):b.staticSeq.push({type:"attr",field:e,value:t})}for(let e in h.data){let t=h.data[e];r.is.unit(t)?b.seq.push({type:"data",field:e,value:t}):b.staticSeq.push({type:"data",field:e,value:t})}for(let e in h.styleProp){let t=h.styleProp[e];r.is.unit(t)?b.seq.push({type:"style",field:e,value:t}):b.staticSeq.push({type:"style",field:e,value:t})}for(let e in h.styleVar){let t=h.styleVar[e];r.is.unit(t)?b.seq.push({type:"styleVar",field:e,value:t}):b.staticSeq.push({type:"styleVar",field:e,value:t})}for(let e=0;e<h.text.length;e++){let t=h.text[e];if(null!==t.value)if(r.is.unit(t.value)){b.seq.push({type:"dynamicText",value:t.value,childIndex:t.index});let e=t.value.stateRef,n=ge;n.plain.includes(e)||n.closure.includes(e)||n.closure.push(e)}else b.seq.push({type:"staticText",value:String(t.value),childIndex:t.index})}for(let e=0;e<h.handler.length;e++){let t=h.handler[e];for(let e in t.map)b.seq.push({type:"handler",for:e,handler:t.map[e],options:t.options,domConfig:t.domConfig})}if(h.visible){let{onMount:e,onState:t}=oe({mount:d,state:h.visible,onMount:(e,t)=>({leaf:t,value:e,hydration:t.hydration}),onState:(e,t)=>({leaf:e,value:t,hydration:0})});e.watch(({leaf:e,value:t,hydration:n})=>{let a=e.data,i=a.block;if(n&&(c(t,a.ops.visible),t)){let e,t=x(i);if(e=t?t.nextSibling:P(i).firstChild,"#text"===e.nodeName){let t=e;e=e.nextSibling,t.remove()}i.value=e,i.visible=1}R(b,{parentBlockFragment:i.child,leaf:e,node:i.value,svgRoot:A.isSvgRoot?i.value:null}),t&&a.needToCallNode&&(a.needToCallNode=0,Object(r.launch)({target:Oe,params:{element:a.block.value,fns:b.node},page:e.spawn,defer:1,forkPage:e.forkPage})),Object(r.launch)({target:p,params:e,defer:1,page:e.spawn,forkPage:e.forkPage})}),Object(r.merge)([t,e]).watch(({leaf:e,value:t,hydration:n})=>{n||s(t,e.data.ops.visible)})}v&&g(v,b.staticSeq);for(let e=0;e<b.seq.length;e++){let t=b.seq[e];switch(t.type){case"visible":break;case"attr":{let{field:e}=t,a="value"===e||"checked"===e||"min"===e||"max"===e,{onMount:i,onState:o}=f(t.value);if(a)Object(r.merge)([o,i]).watch(({leaf:t,value:r})=>{O(n(t),e,r)});else{let t=b.opsAmount++;i.watch(({value:r,leaf:a})=>{let i=n(a),o=l({value:r,priority:"props",runOp(t){O(i,e,t)},group:a.ops.group});a.ops.group.ops[t]=o,O(i,e,r)}),o.watch(({value:e,leaf:n})=>{s(e,n.ops.group.ops[t])})}break}case"data":{let{field:e}=t,{onMount:r,onState:a}=f(t.value),i=b.opsAmount++;r.watch(({value:t,leaf:r})=>{let a=n(r),o=l({value:t,priority:"props",runOp(t){E(a,e,t)},group:r.ops.group});r.ops.group.ops[i]=o,E(a,e,t)}),a.watch(({value:e,leaf:t})=>{s(e,t.ops.group.ops[i])});break}case"style":{let e=b.opsAmount++,{field:r}=t,{onMount:a,onState:i}=f(t.value);a.watch(({value:t,leaf:a})=>{let i=n(a),o=l({value:t,priority:"props",runOp(e){y(i,r,e)},group:a.ops.group});a.ops.group.ops[e]=o,y(i,r,t)}),i.watch(({value:t,leaf:n})=>{s(t,n.ops.group.ops[e])});break}case"styleVar":{let{field:e}=t,{onMount:r,onState:a}=f(t.value),i=b.opsAmount++;r.watch(({value:t,leaf:r})=>{let a=n(r),o=l({value:t,priority:"props",runOp(t){_(a,e,t)},group:r.ops.group});r.ops.group.ops[i]=o,_(a,e,t)}),a.watch(({value:e,leaf:t})=>{s(e,t.ops.group.ops[i])});break}case"staticText":p.watch(e=>{a(e,t.value,t.childIndex)});break;case"dynamicText":{let e=b.opsAmount++;Object(r.sample)({source:t.value,clock:p,fn:(e,t)=>({value:String(e),leaf:t}),greedy:1}).watch(({value:n,leaf:r})=>{let i=l({value:n,priority:"props",runOp(e){w(o.value,e)},group:r.ops.group});r.ops.group.ops[e]=i;let o=a(r,n,t.childIndex)}),Object(r.sample)({source:p,clock:t.value,fn:(e,t)=>({leaf:e,text:t}),greedy:1}).watch(({leaf:t,text:n})=>{s(n,t.ops.group.ops[e])});break}case"handler":{let e=t.handler.graphite.meta.nativeTemplate||null;p.watch(a=>{let i=null;if(e){let t=0,n=a.spawn;for(;!t&&n;)n.template===e?(t=1,i=n):n=n.parent}n(a).addEventListener(t.for,e=>{t.options.prevent&&e.preventDefault(),t.options.stop&&e.stopPropagation(),Object(r.launch)({target:S(t.handler,a.forkPage),params:e,page:i,forkPage:a.forkPage})},t.domConfig)});break}}}d.watch(e=>{let t=e.data;if(!b.visible){let n=t.ops.visible,a=t.block;if(e.hydration){c(1,n);let e,t=x(a);if(e=t?t.nextSibling:P(a).firstChild,"#text"===e.nodeName){let t=e;e=e.nextSibling,t.remove()}a.value=e,a.visible=1}R(b,{parentBlockFragment:a.child,leaf:e,node:a.value,svgRoot:A.isSvgRoot?a.value:null}),Object(r.launch)({target:p,params:e,defer:1,page:e.spawn,forkPage:e.forkPage}),e.hydration?t.needToCallNode&&(t.needToCallNode=0,Object(r.launch)({target:Oe,params:{element:t.block.value,fns:b.node},page:e.spawn,defer:1,forkPage:e.forkPage})):s(1,n)}})},env:f});ie(A)}function K(){if("undefined"!=typeof document)return{document:document};throw Error("your environment has no document")}function Y(e,t){let n,r,a,i,o,c;if("function"==typeof t)n=t,a=K(),i=0;else{if(!t)throw Error("using() second argument is missing");n=t.fn,a=t.env?t.env:K(),i=t.hydrate,r=t.onComplete,o=t.onRoot,c=t.scope}G(e,"using() first argument is missing");let s=e.namespaceURI,u=e.tagName.toLowerCase(),l={type:"using",childTemplates:[],childCount:0,inParentIndex:-1},p=C({name:"using",draft:l,isSvgRoot:"svg"===u,namespace:"http://www.w3.org/2000/svg"===s?"svg":"foreignobject"===u?"foreignObject":"html",fn(e,{mount:t}){n(),t.watch(we.using)},env:a}),h={type:"using",child:{type:"fragment",parent:null,child:[]},value:e};h.child.parent=h,(e=>{if(e&&!e.nodeMap){let t={};for(let n=0;n<e.clones.length;n++){let r=e.clones[n];t[r.meta.forkOf.id]=r}e.nodeMap=t}})(c);let m=d({onComplete:r}),v=I(p,{parentLeaf:be||null,mountNode:e,svgRoot:p.isSvgRoot?e:be?be.svgRoot:null,leafData:{type:"using",draft:l,element:e,block:h},opGroup:f(m),domSubtree:f(m),hydration:i,forkPage:c,env:a});if(o&&o({template:p,leaf:v}),m.onDrain&&!m.rafID){let e=m.onDrain;m.onDrain=null,e()}}function Z(e){W(_e,"node");let t=_e.draft;switch(t.type){case"list":case"listItem":case"using":case"route":case"rec":case"recItem":case"block":case"blockItem":return void console.error("node() hook supported only in h() nodes")}t.node.push(e)}function Q(e){W(_e,"spec");let t=_e.draft;switch(t.type){case"list":return void(e.visible&&(t.itemVisible=e.visible));case"listItem":case"using":case"route":case"rec":case"recItem":case"block":case"blockItem":return}if(e.attr&&t.attr.push(e.attr),e.data&&t.data.push(e.data),"text"in e){let n=e.text,r=t.childCount;Array.isArray(n)?(t.text.push(...n.map((e,t)=>({index:t+r,value:e}))),t.childCount+=n.length):(t.text.push({index:r,value:n}),t.childCount+=1)}if(e.style){let n={};for(let t in e.style)n[v(t)]=e.style[t];t.styleProp.push(n)}if(e.styleVar&&t.styleVar.push(e.styleVar),e.visible&&(t.visible=e.visible),e.handler){let t=e.handler;"object"==typeof t.on?J(t.config||{},t.on):J(t)}e.ɔ&&Q(e.ɔ)}function J(e,t){if(!_e)return;let n=_e.draft;G("element"===n.type,`"handler" extension can be used only with element nodes, got "${n.type}"`),void 0===t&&(t=e,e={});for(let e in t)G(r.is.unit(t[e]),`handler for "${e}" should be event`);let{passive:a=0,capture:i=0,prevent:o=0,stop:c=0}=e;n.handler.push({options:{prevent:o,stop:c},domConfig:{passive:o?0:a,capture:i},map:t})}function X({source:e,cases:t,key:n}){let a;W(_e,"variant"),G(r.is.unit(e),"variant({source}) should be unit"),a="function"==typeof n?n:null==n?e=>String(e):e=>String(e[n]);let i=0;for(let n in t)"__"!==n?$({source:e,visible:e=>a(e)===n,fn:t[n]}):i=1;if(i){let n=Object.keys(t);$({source:e,visible:e=>!n.includes(a(e)),fn:t.__})}}function $({source:e,visible:t,fn:n}){W(_e,"route");let{env:a,namespace:i}=_e,o=C({name:"route",isSvgRoot:0,namespace:i,env:a,draft:{type:"route",childTemplates:[],childCount:0,inParentIndex:-1},fn(o,{mount:c}){let s;if(r.is.store(t))s=Object(r.combine)({value:e,visible:t});else{let n=t;s=e.map(e=>({value:e,visible:n(e)}))}let u=C({name:"route item",isSvgRoot:0,namespace:i,env:a,draft:{type:"route",childTemplates:[],childCount:0,inParentIndex:-1},state:{store:null},fn({store:e},{mount:t}){let a=Object(r.createEvent)();e.on(a,(e,t)=>t),n({store:e});let i=Object(r.sample)({source:t,clock:s,fn:(e,{visible:t,value:n})=>({leaf:e,visible:t,value:n}),greedy:1});t.watch(we.routeItem),i.watch(({leaf:e,visible:t,value:n})=>{e.data.block.child.visible=t,t&&Object(r.launch)({target:a,params:n,defer:1,page:e.spawn,forkPage:e.forkPage}),ee(t,e)})}});ie(u);let{onMount:l,onState:d}=oe({mount:c,state:s,onMount:({visible:e,value:t},n)=>({leaf:n,visible:e,value:t}),onState:(e,{visible:t,value:n})=>({leaf:e,visible:t,value:n})});Object(r.merge)([l,d]).watch(({leaf:e,visible:t,value:n})=>{let r=e.data;r.block.child.visible=t,t&&!r.initialized&&(M({parentBlockFragment:r.block.child.child,leaf:e,actor:u,values:{store:n}}),r.initialized=1)})}});ie(o)}function ee(e,t){let n=t=>{let r=t.data;switch(r.type){case"element":s(e,r.ops.visible);break;case"route":case"list":case"list item":F(t,n);break;default:console.log("unsupported type",r.type)}};F(t,n)}function te({fn:e,env:t,namespace:n="html"}){let r=C({name:"block",isSvgRoot:0,namespace:n,env:t,draft:{type:"block",childTemplates:[],childCount:0,inParentIndex:0},isBlock:1,fn({},{mount:t}){e(),t.watch(we.block)}});return()=>{W(_e,"(block instance)");let e={type:"blockItem",childTemplates:[],childCount:0,inParentIndex:-1,itemOf:r},{env:t,namespace:n}=_e;ie(C({name:"block item",isSvgRoot:0,namespace:n,env:t,draft:e,fn(e,{mount:t}){t.watch(we.blockItem)}}))}}function ne(e){let t="function"==typeof e?e:e.fn,n=C({name:"rec",state:{store:null},isSvgRoot:0,namespace:null,env:null,draft:{type:"rec",childTemplates:[],childCount:0,inParentIndex:0},defer:1,isBlock:1,fn({store:e},{mount:n}){t({store:e,state:e});let a=Object(r.createEvent)();return e.on(a,(e,t)=>t),n.watch(we.rec),{itemUpdater:a}}});return({store:e,state:t=e})=>{W(_e,"(rec instance)");let{env:r,namespace:a}=_e;n.deferredInit&&n.deferredInit(),ie(C({name:"rec item",isSvgRoot:0,namespace:a,env:r,draft:{type:"recItem",childTemplates:[],childCount:0,inParentIndex:-1},fn(e,{mount:r}){let{onMount:a,onState:i}=oe({state:t,mount:r,onMount:(e,t)=>({state:e,leaf:t}),onState:(e,t)=>({state:t,leaf:e})});i.watch(({state:e,leaf:t})=>{F(t,t=>{t.api.itemUpdater(e)})}),a.watch(({leaf:e,state:t})=>{M({parentBlockFragment:e.data.block.child,leaf:e,actor:n,values:{store:t}})})}}))}}function re({source:e,key:t,child:n,fn:r}){let a=ne(({store:e})=>{ae({source:e,key:t,fn({store:e}){let t=e.map(e=>e[n]||[]);r({store:e,child(){a({store:t})}})}})});a({store:e})}function ae(e,t){W(_e,"list"),"function"==typeof t&&(r.is.unit(e)?e={source:e,fn:t}:e.fn=t);let{fn:n,key:a,source:i,fields:o=[]}=e,c=void 0!==a?"function"==typeof a?a:e=>e[a]:(e,t)=>t,s={type:"list",key:r.is.store(e)?{type:"index"}:{type:"key",key:e.key},childTemplates:[],childCount:0,inParentIndex:-1},{env:u,namespace:l}=_e;ie(C({name:"list",draft:s,isSvgRoot:0,namespace:l,fn(e,{mount:t}){let a=C({name:"list item",state:{id:-1,store:null},draft:s,isSvgRoot:0,namespace:l,fn({id:e,store:t},{mount:a}){n({store:t,key:e,fields:B(t,o)});let i=Object(r.createEvent)();if(t.on(i,(e,t)=>t),s.itemVisible){let{onMount:e,onState:t}=oe({mount:a,state:s.itemVisible,onMount:(e,t)=>({visible:e,leaf:t}),onState:(e,t)=>({visible:t,leaf:e})});e.watch(({visible:e,leaf:t})=>{let n=t.data.block;n.visible=e,n.childInitialized=e,e&&R(s,{parentBlockFragment:n.child,leaf:t})}),t.watch(({visible:e,leaf:t})=>{let n=t.data.block;n.visible=e,n.childInitialized?ee(e,t):e&&(n.childInitialized=1,R(s,{parentBlockFragment:n.child,leaf:t}))})}else a.watch(we.listItem);return{itemUpdater:i}},env:u}),d=Object(r.createStore)([]),v=i.map(e=>e),g=Object(r.sample)({source:i,clock:t,fn:(e,t)=>({updates:e,leaf:t,hydration:t.hydration}),greedy:1}),b=Object(r.sample)({source:g,clock:v,fn:({leaf:e},t)=>({updates:t,leaf:e,hydration:0}),greedy:1});Object(r.sample)({source:d,clock:[g,b],greedy:1,fn(e,{updates:t,leaf:n,hydration:r}){let o=n.data,u=o.block;le("list update ["+i.shortName+"]");let l=Array(t.length).fill(0),d=t.map(c),v=[];for(let n=0;n<e.length;n++){let r=e[n],a=d.indexOf(r.key);-1!==a?(v.push(r),l[a]=1,m(t[a],r.asyncValue)):(r.active=0,r.instance&&U(r.instance),h(r.asyncValue))}for(let e=0;e<t.length;e++){if(l[e])continue;let i=t[e],o=d[e],c=f(n.ops.group.queue),h={type:"LF",parent:u,child:{type:"fragment",parent:null,child:[]},childInitialized:0,visible:0,left:null,right:null},m={type:"listItem",key:o,index:o,active:1,leafData:{type:"list item",block:h,listDraft:s},asyncValue:p({value:i,group:c,onTerminate(e){},onChange(e){m.instance&&m.instance.api.itemUpdater(e)},onInit(e){m.active&&(r||(m.instance=I(a,{values:{id:o,store:e},parentLeaf:n,mountNode:n.mountNode,svgRoot:n.svgRoot,leafData:m.leafData,opGroup:c,domSubtree:n.ops.domSubtree,hydration:r,forkPage:n.forkPage})))}})},g=v.length;v.push(m);let b=g>0?v[g-1].leafData:null;if(h.child.parent=h,u.child.push(h),b){let e=b.block;h.left=e;let t=e.right;t?(t.left=h,h.right=t):u.lastChild=h,e.right=h}else u.lastChild=h;r&&(m.instance=I(a,{values:{id:o,store:i},parentLeaf:n,mountNode:n.mountNode,svgRoot:n.svgRoot,leafData:m.leafData,opGroup:c,domSubtree:n.ops.domSubtree,hydration:r,forkPage:n.forkPage}))}return de("list update ["+i.shortName+"]"),0===v.length&&(u.lastChild=null),o.records=v,v},target:d})},env:u}))}function ie(e){if(!_e)return;let{draft:t}=e;if("listItem"!==t.type&&"rec"!==t.type)switch(_e.draft.type){case"element":case"using":case"route":case"list":case"rec":case"recItem":case"block":case"blockItem":t.inParentIndex=_e.draft.childCount,_e.draft.childCount+=1,_e.draft.childTemplates.push(e);break;default:console.warn("unexpected currentActor type "+_e.draft.type)}}function oe({mount:e,state:t,onMount:n,onState:a}){return{onMount:Object(r.sample)({source:t,clock:e,fn:n,greedy:1}),onState:Object(r.sample)({source:e,clock:t,fn:a,greedy:1})}}function ce(e,t){let n=[e[0]];for(let r=0;r<t.length;r++)n.push(t[r],e[r+1]);return n}function se(e,...t){Q({text:ce(e,t)})}function ue(e,...t){return t.every(e=>!r.is.store(e))?ce(e,t).join(""):Object(r.combine)(t,t=>ce(e,t).join(""))}let le,de,fe;"undefined"!=typeof performance&&performance.mark?(le=e=>{performance.mark("☄️ "+e+" start")},de=e=>{try{performance.measure("☄️ "+e,"☄️ "+e+" start")}catch(e){}performance.clearMarks("☄️ "+e+" start"),performance.clearMeasures("☄️ "+e)}):(le=()=>{},de=()=>{}),fe="undefined"!=typeof performance&&performance.now?()=>performance.now():"undefined"!=typeof process&&process.hrtime?()=>{let e=process.hrtime();return(1e9*e[0]+e[1])/1e6}:()=>Date.now();let pe="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:e=>setTimeout(e,0);const he={attr:O,data:E,style:y,styleVar:_};let me=0,ve=0,ge=null,be=null,_e=null;const ye=(e,t)=>e.reg[t.id];let Ee=null,Oe=Object(r.createEvent)();Oe.watch(({fns:e,element:t})=>{e.forEach(e=>{e(t)})});const we={using(e){let t=e.data;R(t.draft,{parentBlockFragment:t.block.child,leaf:e})},routeItem(e){let t=e.draft,n=e.data;n.block.child.visible=1,R(t,{parentBlockFragment:n.block.child.child,leaf:e})},block(e){R(e.draft,{parentBlockFragment:e.data.block.child,leaf:e})},blockItem(e){M({parentBlockFragment:e.data.block.child,leaf:e,actor:e.draft.itemOf})},rec(e){R(e.draft,{parentBlockFragment:e.data.block.child,leaf:e})},listItem(e){let t=e.data,n=t.block;n.visible=1,n.childInitialized=1,R(t.listDraft,{parentBlockFragment:n.child,leaf:e})}}},function(e,t,n){"use strict";var r=n(597);function a(e,t){for(var n in t)i(t,n)&&(e[n]=t[n])}function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e){r(e)||(e={});for(var t=arguments.length,n=1;n<t;n++){var i=arguments[n];r(i)&&a(e,i)}return e}},function(e,t,n){"use strict";
/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */e.exports=function(e){return null!=e&&("object"==typeof e||"function"==typeof e)}},function(e,t,n){var r=n(1097);e.exports=function(e){return e?(e=r(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var r=n(21),a=n.n(r),i=n(404),o=n(59),c=n(0),s=n(38),u=n(1164),l=n(1),d=n(20),f=n(29),p=n(26),h=n.n(p),m=n(48),v=n(28),g=n(88),b=n(140),_=function(){var e=Object(v.b)().calls,t=Object(s.c)(b.a),n=Object(l.Ob)().viewWidth,r=Object(i.c)(),p=r.schedule,_=r.now,y=r.selectedDate,E=r.error,O=Object(c.useMemo)((function(){return[d.d.OS===d.c.IOS,d.d.OS===d.c.ANDROID,d.d.isIPad,!Object(f.a)(n),h.a.isWebView()].some(Boolean)}),[n]),w=Object(c.useMemo)((function(){var e=Object(u.a)(_,15);return((null==p?void 0:p.dayEventsMap[y])||[]).filter((function(t){return t.from<=e}))}),[p,y,_]),C=Object(i.a)({events:w,now:_}),S=C.currentEvents,A=C.upcomingEventIndex,k=Object(c.useMemo)((function(){return e.filter(o.o)}),[e]),j=O?[]:t.items.filter((function(e){return e.canDisplay})),T=Object(c.useMemo)((function(){var e=new Set,t=S.map((function(t){var n=k.find((function(e){return e.chatLink===t.chat}));return n&&e.add(n),{event:t,call:n}})),n=j.map((function(t){var n=k.find((function(e){var n=e.peerId;return Object(m.b)(t.eventChat.id)===n}));return n&&e.add(n),{broadcast:t,call:n}})),r=k.filter((function(t){return!e.has(t)})).map((function(e){return{call:e}}));return[].concat(a()(t),a()(n),a()(r)).sort((function(e,t){var n,r;return(null===(n=e.call)||void 0===n?void 0:n.type)===g.a.CurrentCall?-1:(null===(r=t.call)||void 0===r?void 0:r.type)===g.a.CurrentCall?1:0}))}),[S,j,k]),I=Object(o.e)(k),P=S.length&&A>=0;return{items:T,now:_,hasCurrentCall:I,hasUpcomingEvent:P,loaded:!!p||E}}},function(e,t,n){var r=n(1101);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},function(e,t){e.exports=function(e,t,n,r){for(var a=e.length,i=n+(r?1:-1);r?i--:++i<a;)if(t(e[i],i,e))return i;return-1}},function(e,t){e.exports=function(e,t,n){for(var r=-1,a=null==e?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}},function(e,t,n){"use strict";n(151).a.empty},function(e,t,n){"use strict";n(151).a.from},function(e,t,n){"use strict";n(151).a.split},function(e,t,n){"use strict";n(151).a.concat},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=n(151).a.execute},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):void 0;t.default=r},function(e,t,n){"use strict";var r;r||(r={})},function(e,t){},function(e,t,n){"use strict";var r=n(137);n.d(t,"ApolloProvider",(function(){return r.a}));var a=n(625);n.d(t,"useApolloClient",(function(){return a.a})),n.d(t,"useQuery",(function(){return a.b}));n(139);var i=n(613);n.o(i,"ApolloClient")&&n.d(t,"ApolloClient",(function(){return i.ApolloClient})),n.o(i,"InMemoryCache")&&n.d(t,"InMemoryCache",(function(){return i.InMemoryCache})),n.o(i,"gql")&&n.d(t,"gql",(function(){return i.gql}))},function(e,t){},,,function(e,t,n){var r=n(452),a=n(1120);e.exports=function e(t,n,i,o,c){var s=-1,u=t.length;for(i||(i=a),c||(c=[]);++s<u;){var l=t[s];n>0&&i(l)?n>1?e(l,n-1,i,o,c):r(c,l):o||(c[c.length]=l)}return c}},function(e,t,n){var r=n(1122),a=Math.max;e.exports=function(e,t,n){return t=a(void 0===t?e.length-1:t,0),function(){for(var i=arguments,o=-1,c=a(i.length-t,0),s=Array(c);++o<c;)s[o]=i[t+o];o=-1;for(var u=Array(t+1);++o<t;)u[o]=i[o];return u[t]=n(s),r(e,this,u)}}},function(e,t,n){var r=n(1123),a=n(1125)(r);e.exports=a},function(e,t){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},function(e,t,n){var r=n(446),a=n(1127),i=n(621),o=n(1128),c=n(1129),s=n(1132),u=n(1133),l=n(1134),d=n(1135),f=n(571),p=n(623),h=n(353),m=n(1136),v=n(1137),g=n(1142),b=n(148),_=n(441),y=n(1144),E=n(217),O=n(1146),w=n(297),C=n(459),S={};S["[object Arguments]"]=S["[object Array]"]=S["[object ArrayBuffer]"]=S["[object DataView]"]=S["[object Boolean]"]=S["[object Date]"]=S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Map]"]=S["[object Number]"]=S["[object Object]"]=S["[object RegExp]"]=S["[object Set]"]=S["[object String]"]=S["[object Symbol]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S["[object Error]"]=S["[object Function]"]=S["[object WeakMap]"]=!1,e.exports=function e(t,n,A,k,j,T){var I,P=1&n,D=2&n,N=4&n;if(A&&(I=j?A(t,k,j,T):A(t)),void 0!==I)return I;if(!E(t))return t;var x=b(t);if(x){if(I=m(t),!P)return u(t,I)}else{var R=h(t),M="[object Function]"==R||"[object GeneratorFunction]"==R;if(_(t))return s(t,P);if("[object Object]"==R||"[object Arguments]"==R||M&&!j){if(I=D||M?{}:g(t),!P)return D?d(t,c(I,t)):l(t,o(I,t))}else{if(!S[R])return j?t:{};I=v(t,R,P)}}T||(T=new r);var L=T.get(t);if(L)return L;T.set(t,I),O(t)?t.forEach((function(r){I.add(e(r,n,A,r,t,T))})):y(t)&&t.forEach((function(r,a){I.set(a,e(r,n,A,a,t,T))}));var B=x?void 0:(N?D?p:f:D?C:w)(t);return a(B||t,(function(r,a){B&&(r=t[a=r]),i(I,a,e(r,n,A,a,t,T))})),I}},function(e,t,n){var r=n(310),a=n(350),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var o=e[t];i.call(e,t)&&a(o,n)&&(void 0!==n||t in e)||r(e,t,n)}},function(e,t,n){var r=n(452),a=n(460),i=n(453),o=n(573),c=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,i(e)),e=a(e);return t}:o;e.exports=c},function(e,t,n){var r=n(572),a=n(622),i=n(459);e.exports=function(e){return r(e,i,a)}},function(e,t,n){"use strict";function r(e){var t=document.createElement("div");return t.innerHTML=e,t.firstChild}function a(e){return"string"==typeof e?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e.includes("&"))return e;var t=e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");return r("<textarea>".concat(t,"</textarea>")).value}(e.replace(/\t/g,"\n")):Array.isArray(e)?e.map((function(e){return a(e)})):e}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:140;return!e||e.length<t?e:e.slice(0,t-1)+"…"}n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return v}));var r=n(0),a=n.n(r),i=n(36),o=n(137);function c(){var e=a.a.useContext(Object(o.b)()).client;return Object(i.b)(e,33),e}var s=n(16),u=n(71),l=n(139),d=function(){function e(e,t){this.isMounted=!1,this.previousOptions={},this.context={},this.options={},this.options=e||{},this.context=t||{}}return e.prototype.getOptions=function(){return this.options},e.prototype.setOptions=function(e,t){void 0===t&&(t=!1),t&&!Object(u.a)(this.options,e)&&(this.previousOptions=this.options),this.options=e},e.prototype.unmount=function(){this.isMounted=!1},e.prototype.refreshClient=function(){var e=this.options&&this.options.client||this.context&&this.context.client;Object(i.b)(!!e,29);var t=!1;return e!==this.client&&(t=!0,this.client=e,this.cleanup()),{client:this.client,isNew:t}},e.prototype.verifyDocumentType=function(e,t){var n=Object(l.c)(e);Object(l.b)(t),Object(l.b)(n.type);Object(i.b)(n.type===t,30)},e}(),f=(function(e){function t(t){var n=t.options,r=t.context,a=t.setResult,i=e.call(this,n,r)||this;return i.currentObservable={},i.setResult=a,i.initialize(n),i}Object(s.c)(t,e),t.prototype.execute=function(e){if(!0===this.getOptions().skip)return this.cleanup(),{loading:!1,error:void 0,data:void 0,variables:this.getOptions().variables};var t=e;this.refreshClient().isNew&&(t=this.getLoadingResult());var n=this.getOptions().shouldResubscribe;return"function"==typeof n&&(n=!!n(this.getOptions())),!1!==n&&this.previousOptions&&Object.keys(this.previousOptions).length>0&&(this.previousOptions.subscription!==this.getOptions().subscription||!Object(u.a)(this.previousOptions.variables,this.getOptions().variables)||this.previousOptions.skip!==this.getOptions().skip)&&(this.cleanup(),t=this.getLoadingResult()),this.initialize(this.getOptions()),this.startSubscription(),this.previousOptions=this.getOptions(),Object(s.a)(Object(s.a)({},t),{variables:this.getOptions().variables})},t.prototype.afterExecute=function(){this.isMounted=!0},t.prototype.cleanup=function(){this.endSubscription(),delete this.currentObservable.query},t.prototype.initialize=function(e){this.currentObservable.query||!0===this.getOptions().skip||(this.currentObservable.query=this.refreshClient().client.subscribe({query:e.subscription,variables:e.variables,fetchPolicy:e.fetchPolicy}))},t.prototype.startSubscription=function(){this.currentObservable.subscription||(this.currentObservable.subscription=this.currentObservable.query.subscribe({next:this.updateCurrentData.bind(this),error:this.updateError.bind(this),complete:this.completeSubscription.bind(this)}))},t.prototype.getLoadingResult=function(){return{loading:!0,error:void 0,data:void 0}},t.prototype.updateResult=function(e){this.isMounted&&this.setResult(e)},t.prototype.updateCurrentData=function(e){var t=this.getOptions().onSubscriptionData;this.updateResult({data:e.data,loading:!1,error:void 0}),t&&t({client:this.refreshClient().client,subscriptionData:e})},t.prototype.updateError=function(e){this.updateResult({error:e,loading:!1})},t.prototype.completeSubscription=function(){var e=this.getOptions().onSubscriptionComplete;e&&e(),this.endSubscription()},t.prototype.endSubscription=function(){this.currentObservable.subscription&&(this.currentObservable.subscription.unsubscribe(),delete this.currentObservable.subscription)}}(d),n(122)),p=n(200),h=(function(e){function t(t){var n=t.options,r=t.context,a=t.result,i=t.setResult,o=e.call(this,n,r)||this;return o.runMutation=function(e){void 0===e&&(e={}),o.onMutationStart();var t=o.generateNewMutationId();return o.mutate(e).then((function(e){return o.onMutationCompleted(e,t),e})).catch((function(e){if(o.onMutationError(e,t),!o.getOptions().onError)throw e}))},o.verifyDocumentType(n.mutation,l.a.Mutation),o.result=a,o.setResult=i,o.mostRecentMutationId=0,o}Object(s.c)(t,e),t.prototype.execute=function(e){return this.isMounted=!0,this.verifyDocumentType(this.getOptions().mutation,l.a.Mutation),[this.runMutation,Object(s.a)(Object(s.a)({},e),{client:this.refreshClient().client})]},t.prototype.afterExecute=function(){return this.isMounted=!0,this.unmount.bind(this)},t.prototype.cleanup=function(){},t.prototype.mutate=function(e){return this.refreshClient().client.mutate(Object(p.mergeOptions)(this.getOptions(),e))},t.prototype.onMutationStart=function(){this.result.loading||this.getOptions().ignoreResults||this.updateResult({loading:!0,error:void 0,data:void 0,called:!0})},t.prototype.onMutationCompleted=function(e,t){var n=this.getOptions(),r=n.onCompleted,a=n.ignoreResults,i=e.data,o=e.errors,c=o&&o.length>0?new f.a({graphQLErrors:o}):void 0;this.isMostRecentMutation(t)&&!a&&this.updateResult({called:!0,loading:!1,data:i,error:c}),r&&r(i)},t.prototype.onMutationError=function(e,t){var n=this.getOptions().onError;this.isMostRecentMutation(t)&&this.updateResult({loading:!1,error:e,data:void 0,called:!0}),n&&n(e)},t.prototype.generateNewMutationId=function(){return++this.mostRecentMutationId},t.prototype.isMostRecentMutation=function(e){return this.mostRecentMutationId===e},t.prototype.updateResult=function(e){!this.isMounted||this.previousResult&&Object(u.a)(this.previousResult,e)||(this.setResult(e),this.previousResult=e)}}(d),function(e){function t(t){var n=t.options,r=t.context,a=t.onNewData,i=e.call(this,n,r)||this;return i.runLazy=!1,i.previous=Object.create(null),i.runLazyQuery=function(e){i.cleanup(),i.runLazy=!0,i.lazyOptions=e,i.onNewData()},i.getQueryResult=function(){var e=i.observableQueryFields(),t=i.getOptions();if(t.skip)e=Object(s.a)(Object(s.a)({},e),{data:void 0,error:void 0,loading:!1,networkStatus:p.NetworkStatus.ready,called:!0});else if(i.currentObservable){var n=i.currentObservable.getCurrentResult(),r=n.data,a=n.loading,o=n.partial,c=n.networkStatus,u=n.errors,l=n.error;if(u&&u.length>0&&(l=new f.a({graphQLErrors:u})),e=Object(s.a)(Object(s.a)({},e),{data:r,loading:a,networkStatus:c,error:l,called:!0}),a);else if(l)Object.assign(e,{data:(i.currentObservable.getLastResult()||{}).data});else{var d=i.currentObservable.options.fetchPolicy;if(t.partialRefetch&&o&&(!r||0===Object.keys(r).length)&&"cache-only"!==d)return Object.assign(e,{loading:!0,networkStatus:p.NetworkStatus.loading}),e.refetch(),e}}e.client=i.client,i.setOptions(t,!0);var h=i.previous.result;return i.previous.loading=h&&h.loading||!1,e.previousData=h&&(h.data||h.previousData),i.previous.result=e,i.currentObservable&&i.currentObservable.resetQueryStoreErrors(),e},i.obsRefetch=function(e){var t;return null===(t=i.currentObservable)||void 0===t?void 0:t.refetch(e)},i.obsFetchMore=function(e){return i.currentObservable.fetchMore(e)},i.obsUpdateQuery=function(e){return i.currentObservable.updateQuery(e)},i.obsStartPolling=function(e){var t;null===(t=i.currentObservable)||void 0===t||t.startPolling(e)},i.obsStopPolling=function(){var e;null===(e=i.currentObservable)||void 0===e||e.stopPolling()},i.obsSubscribeToMore=function(e){return i.currentObservable.subscribeToMore(e)},i.onNewData=a,i}return Object(s.c)(t,e),t.prototype.execute=function(){this.refreshClient();var e=this.getOptions(),t=e.skip,n=e.query;return(t||n!==this.previous.query)&&(this.removeQuerySubscription(),this.removeObservable(!t),this.previous.query=n),this.updateObservableQuery(),this.isMounted&&this.startQuerySubscription(),this.getExecuteSsrResult()||this.getExecuteResult()},t.prototype.executeLazy=function(){return this.runLazy?[this.runLazyQuery,this.execute()]:[this.runLazyQuery,{loading:!1,networkStatus:p.NetworkStatus.ready,called:!1,data:void 0}]},t.prototype.fetchData=function(){var e=this,t=this.getOptions();return!t.skip&&!1!==t.ssr&&new Promise((function(t){return e.startQuerySubscription(t)}))},t.prototype.afterExecute=function(e){var t=(void 0===e?{}:e).lazy,n=void 0!==t&&t;return this.isMounted=!0,n&&!this.runLazy||this.handleErrorOrCompleted(),this.previousOptions=this.getOptions(),this.unmount.bind(this)},t.prototype.cleanup=function(){this.removeQuerySubscription(),this.removeObservable(!0),delete this.previous.result},t.prototype.getOptions=function(){var t=e.prototype.getOptions.call(this);return this.lazyOptions&&(t.variables=Object(s.a)(Object(s.a)({},t.variables),this.lazyOptions.variables),t.context=Object(s.a)(Object(s.a)({},t.context),this.lazyOptions.context)),this.runLazy&&delete t.skip,t},t.prototype.ssrInitiated=function(){return this.context&&this.context.renderPromises},t.prototype.getExecuteResult=function(){var e=this.getQueryResult();return this.startQuerySubscription(),e},t.prototype.getExecuteSsrResult=function(){var e,t=this.getOptions(),n=t.ssr,r=t.skip,a=!1===n,i=this.refreshClient().client.disableNetworkFetches,o=Object(s.a)({loading:!0,networkStatus:p.NetworkStatus.loading,called:!0,data:void 0,stale:!1,client:this.client},this.observableQueryFields());return a&&(this.ssrInitiated()||i)?(this.previous.result=o,o):(this.ssrInitiated()&&(e=r?this.getQueryResult():this.context.renderPromises.addQueryPromise(this,this.getQueryResult)||o),e)},t.prototype.prepareObservableQueryOptions=function(){var e=this.getOptions();this.verifyDocumentType(e.query,l.a.Query);var t=e.displayName||"Query";return!this.ssrInitiated()||"network-only"!==e.fetchPolicy&&"cache-and-network"!==e.fetchPolicy||(e.fetchPolicy="cache-first"),Object(s.a)(Object(s.a)({},e),{displayName:t,context:e.context})},t.prototype.initializeObservableQuery=function(){if(this.ssrInitiated()&&(this.currentObservable=this.context.renderPromises.getSSRObservable(this.getOptions())),!this.currentObservable){var e=this.prepareObservableQueryOptions();this.previous.observableQueryOptions=Object(s.a)(Object(s.a)({},e),{children:null}),this.currentObservable=this.refreshClient().client.watchQuery(Object(s.a)({},e)),this.ssrInitiated()&&this.context.renderPromises.registerSSRObservable(this.currentObservable,e)}},t.prototype.updateObservableQuery=function(){if(this.currentObservable){if(!this.getOptions().skip){var e=Object(s.a)(Object(s.a)({},this.prepareObservableQueryOptions()),{children:null});Object(u.a)(e,this.previous.observableQueryOptions)||(this.previous.observableQueryOptions=e,this.currentObservable.setOptions(e).catch((function(){})))}}else this.initializeObservableQuery()},t.prototype.startQuerySubscription=function(e){var t=this;void 0===e&&(e=this.onNewData),this.currentSubscription||this.getOptions().skip||(this.currentSubscription=this.currentObservable.subscribe({next:function(n){var r=n.loading,a=n.networkStatus,i=n.data,o=t.previous.result;o&&o.loading===r&&o.networkStatus===a&&Object(u.a)(o.data,i)||e()},error:function(n){if(t.resubscribeToQuery(),!n.hasOwnProperty("graphQLErrors"))throw n;var r=t.previous.result;(r&&r.loading||!Object(u.a)(n,t.previous.error))&&(t.previous.error=n,e())}}))},t.prototype.resubscribeToQuery=function(){this.removeQuerySubscription();var e=this.currentObservable;if(e){var t=e.getLastError(),n=e.getLastResult();e.resetLastResults(),this.startQuerySubscription(),Object.assign(e,{lastError:t,lastResult:n})}},t.prototype.handleErrorOrCompleted=function(){if(this.currentObservable&&this.previous.result){var e=this.previous.result,t=e.data,n=e.loading,r=e.error;if(!n){var a=this.getOptions(),i=a.query,o=a.variables,c=a.onCompleted,s=a.onError,l=a.skip;if(this.previousOptions&&!this.previous.loading&&Object(u.a)(this.previousOptions.query,i)&&Object(u.a)(this.previousOptions.variables,o))return;!c||r||l?s&&r&&s(r):c(t)}}},t.prototype.removeQuerySubscription=function(){this.currentSubscription&&(this.currentSubscription.unsubscribe(),delete this.currentSubscription)},t.prototype.removeObservable=function(e){this.currentObservable&&(this.currentObservable.tearDownQuery(),e&&delete this.currentObservable)},t.prototype.observableQueryFields=function(){var e;return{variables:null===(e=this.currentObservable)||void 0===e?void 0:e.variables,refetch:this.obsRefetch,fetchMore:this.obsFetchMore,updateQuery:this.obsUpdateQuery,startPolling:this.obsStartPolling,stopPolling:this.obsStopPolling,subscribeToMore:this.obsSubscribeToMore}},t}(d));function m(e,t,n){void 0===n&&(n=!1);var a=Object(r.useContext)(Object(o.b)()),i=Object(r.useReducer)((function(e){return e+1}),0),c=i[0],l=i[1],d=t?Object(s.a)(Object(s.a)({},t),{query:e}):{query:e},f=Object(r.useRef)(),p=f.current||(f.current=new h({options:d,context:a,onNewData:function(){p.ssrInitiated()?l():Promise.resolve().then((function(){return f.current&&l()}))}}));p.setOptions(d),p.context=a;var m,v,g,b={options:Object(s.a)(Object(s.a)({},d),{onError:void 0,onCompleted:void 0}),context:a,tick:c},_=(m=function(){return n?p.executeLazy():p.execute()},v=b,(g=Object(r.useRef)()).current&&Object(u.a)(v,g.current.key)||(g.current={key:v,value:m()}),g.current.value),y=n?_[1]:_;return Object(r.useEffect)((function(){return function(){return p.cleanup()}}),[]),Object(r.useEffect)((function(){return p.afterExecute({lazy:n})}),[y.loading,y.networkStatus,y.error,y.data]),_}function v(e,t){return m(e,t,!1)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return be})),n.d(t,"b",(function(){return K}));var r=n(7),a=n.n(r),i=n(0),o=n.n(i),c=n(1),s=n(38),u=n(106),l=n(127),d=n(29),f=n(111),p=n(94),h=n(142),m=n(82),v=n(1346),g=n(1347),b=n(1356),_=n(1349),y=(n(594),n(5)),E=n(207),O=n(83),w=n(40),C=n(256),S=n(9),A=n(86),k=n(103),j=n(32),T=n(55),I=n(143),P=n(58),D=n(13),N=n(107),x=Object(N.b)([],["schoolClassItem"],["grades","school-class-item"]),R=(Object(N.a)(x),Object(N.b)(["gradeEditModeBtn","panelHeaderCloseEditModeBtn","schoolGradesTitle"],[],["grades","school-classes"])),M=(Object(N.a)(R),function(e){var t=e.grade,n=e.schoolId,r=e.canManage,i=Object(I.a)().showActionSheet,l=Object(j.a)().go,d=Object(T.a)().showAlertError,f=Object(P.a)().showSnackbarInfo,p=Object(u.c)(),h=p.getLangKey,N=p.getLangNumeric,R=Object(c.Pb)(),M=Object(O.b)(t),L=Object(O.d)(t);!0===t.is_graduated&&(L="".concat(L," · ").concat(h("vkui_edu_graduation_year").replace("{year}",t.end_year.toString())));var B=Object(s.c)(Object(S.combine)([A.a,A.b])),F=a()(B,2),H=F[0],V=F[1],U="";if(Array.isArray(t.roles_count)){var z=Object(O.c)(t,m.a.STUDENT)||0;U=z>0?N(z,"vkui_edu_grade_pupils_count"):h("vkui_edu_grade_pupils_count_empty")}if(t.end_year||t.start_year){var G=t.start_year||"...",W=t.end_year||"...";U=U?"".concat(U,", ").concat(G," — ").concat(W):"".concat(G," — ").concat(W)}var q=function(){Object(w.m)(t),l(y.i.CREATE_GRADE,{schoolId:n})},K=function(){Object(w.e)({schoolId:n,gradeId:t.id}).then((function(){Object(w.g)(),f(h("vkui_edu_delete_grades_success_snackbar"))})).catch(d)},Y=function(){Object(w.b)(t)},Z=R===c.H?v.a:g.a;return o.a.createElement(c.m,{"data-test-id":x.schoolClassItem(t.id),selectable:H,className:Object(D.c)("SchoolClasses__cell",{"SchoolClasses__cell--selected":!!V[t.id]}),before:o.a.createElement(C.a,{className:"SchoolClasses__avatar",size:72,letters:M,color:t.color}),description:o.a.createElement("div",null,U),after:r&&o.a.createElement(E.a,{className:"SchoolMembers__actionButton",onClick:function(e){e.preventDefault(),i(e.currentTarget,[{text:h("vkui_edu_school_grades_add_student"),before:o.a.createElement(b.a,null),autoclose:!0,onClick:Y},{text:h("vkui_common_edit"),before:o.a.createElement(_.a,null),autoclose:!0,onClick:q},{text:h("vkui_edu_school_grades_remove"),before:o.a.createElement(Z,null),mode:"destructive",onClick:K}])}}),href:H?null:y.d.buildUrl(y.j.SCHOOL_GRADE_INFO,{schoolId:n,gradeId:t.id}),checked:!!V[t.id],onChange:function(e){H&&(e.currentTarget.checked?Object(k.a)(t):Object(k.c)(t.id))}},o.a.createElement(c.Fb,{level:"3",weight:"regular",className:"SchoolMembers__title",title:L},L," "))}),L=n(1358),B=n(28),F=n(6),H=n.n(F),V=n(12),U=n.n(V),z=n(638),G=n(113),W=["className","params"],q=function(e){var t=e.className,n=e.params,r=U()(e,W),a=Object(u.c)().getLangKey;return Object(i.useEffect)((function(){n.userId&&Object(G.d)(n.userId)}),[n]),o.a.createElement(c.C,H()({className:Object(c.Lb)(t,"SchoolClassesSidebar")},r),o.a.createElement(c.D,null,a("vkui_edu_documents_search_options")),o.a.createElement(z.a,{onChange:w.g}))},K=Object(i.memo)(q),Y=n(100),Z=n(144),Q=n(63),J=n(168),X=n(172),$=n(476),ee=n(64),te=n(208),ne=n(96),re=n(473),ae=(n(1118),n(69)),ie=n(191),oe=n(323),ce=Object(N.b)(["upGradeBtn","releaseClassesBtn","combineClassesBtn","removeClassesBtn","selectAllClassesBtn","unselectAllClassesBtn","selectedCount"],[],["grades","grades-actions"]),se=(Object(N.a)(ce),function(){Object(s.b)(k.b);var e=Object(u.c)().getLangKey,t=Object(j.a)().go,n=Object(T.a)(),r=n.showAlertConfirm,a=n.showAlertError,l=Object(P.a)().showSnackbarInfo,d=Object(s.c)(A.b);Object(i.useEffect)((function(){var t=[ae.g.doneData.watch((function(){return l(e("vkui_edu_merge_grades_success_snackbar"))})),ae.g.failData.watch(a),ie.b.done.watch((function(){return l(e("vkui_edu_delete_grades_success_snackbar"))})),ie.b.failData.watch(a),ie.c.watch((function(){return r({title:e("vkui_edu_delete_grades_alert_title"),text:e("vkui_edu_delete_grades_alert_text"),actionText:e("vkui_edu_delete_grades_alert_confirm"),callback:ie.a})}))];return function(){return t.forEach((function(e){return e.unsubscribe()}))}}),[]);var f=Object(s.d)(ne.c,(function(e){return"1"===e.is_graduated})),p=Object(s.c)(ee.a),h=Object.keys(d).length,m=h>0,v=p.length===h;return o.a.createElement(o.a.Fragment,null,o.a.createElement(c.t,{className:"GradesActions__inline"},!f&&o.a.createElement(o.a.Fragment,null,o.a.createElement(c.j,{"data-test-id":ce.upGradeBtn,disabled:!m,onClick:function(){t(y.i.GRADES_TRANSFER)},size:"m",className:"GradesActions__button",mode:"outline"},e("vkui_edu_to_next_grade")),o.a.createElement(c.j,{"data-test-id":ce.releaseClassesBtn,disabled:!m,onClick:function(){t(y.i.GRADUATION_CLASSES)},size:"m",className:"GradesActions__button",mode:"outline"},e("vkui_edu_release_classes")),o.a.createElement(c.j,{"data-test-id":ce.combineClassesBtn,disabled:!Object(oe.a)(Object.values(d)),onClick:ae.h,size:"m",className:"GradesActions__button",mode:"outline"},e("vkui_edu_combine_classes"))),o.a.createElement(c.j,{"data-test-id":ce.removeClassesBtn,disabled:!m,onClick:ie.c,size:"m",className:"GradesActions__button GradesActions__button--destructive",mode:"outline"},e("vkui_edu_remove_classes"))),o.a.createElement(c.t,{className:"GradesActions__inline"},o.a.createElement("span",{"data-test-id":ce.selectedCount,className:"GradesActions__selectedCount"},e("vkui_edu_selected_classes"),": ",h),!v&&o.a.createElement(o.a.Fragment,null,o.a.createElement(re.a,{className:"GradesActions__dot"}),o.a.createElement(c.L,{"data-test-id":ce.selectAllClassesBtn,className:"GradesActions__actionLink",onClick:function(){Object(k.d)()}},e("vkui_edu_select_all_classes"))),m&&o.a.createElement(o.a.Fragment,null,o.a.createElement(re.a,{className:"GradesActions__dot"}),o.a.createElement(c.L,{"data-test-id":ce.unselectAllClassesBtn,className:"GradesActions__actionLink",onClick:function(){Object(k.f)()}},e("vkui_edu_unselect_classes")))))}),ue=n(1161),le=n(154),de=Object(S.restore)(le.b.doneData,null).reset(le.c),fe=Object(S.restore)(le.b.failData,null).reset(le.c),pe=n(157),he=n(90),me=n(23),ve=n(257),ge=n(226),be=Object(c.Qb)((function(e){Object(s.b)(w.i);var t=e.id,n=e.viewWidth,r=e.sizeX,m=e.schoolId,v=e.params,g=Object(f.a)(n),_=Object(d.a)(n),E=Object(u.c)().getLangKey,O=Object(j.a)(),C=O.go,T=O.back,I=Object(B.b)().profileSchools,D=Object(s.c)(Object(S.combine)([ee.a,ee.c,w.h.pending,ee.d,ee.b,ne.e,A.a,ge.b,ge.a])),N=a()(D,9),x=N[0],F=N[1],H=N[2],V=N[3],U=N[4],z=N[5],W=N[6],q=N[7],re=N[8],ae=Object(s.d)(ne.c,(function(e){return"1"===e.is_graduated})),ie=Object(i.useState)(null),oe=a()(ie,2),ce=oe[0],be=oe[1],_e=Object(i.useState)(!1),ye=a()(_e,2),Ee=ye[0],Oe=ye[1],we=I.some((function(e){return e.id===m})),Ce=Object(s.c)(ve.a).foreignSchools;Object(i.useEffect)((function(){return Object(w.o)(m),function(){return Object(w.k)()}}),[m]),Object(i.useEffect)((function(){we?(be(null),Oe(!0)):be({error_code:Y.a})}),[m,I,we]),function(){var e=Object(P.a)().showSnackbar,t=Object(u.c)().getLangKey,n=Object(s.c)(de),r=Object(s.c)(fe);Object(i.useEffect)((function(){1===n&&e(o.a.createElement("span",{className:"SchoolClasses__snackbar"},o.a.createElement(ue.a,{className:"SchoolClasses__iconDone"}),t("vkui_edu_graduate_success_snackbar"))),(r||0===n)&&e(t("vkui_edu_general_snackbar_error")),null===n&&null===r||Object(le.c)()}),[t,r,n,e])}(),function(){var e=Object(P.a)().showSnackbar,t=Object(u.c)().getLangKey,n=Object(s.c)(pe.f),r=Object(s.c)(pe.e);Object(i.useEffect)((function(){n&&((null==n?void 0:n.every((function(e){var t=a()(e,2);t[0];return 1===t[1]})))&&e(o.a.createElement("span",{className:"SchoolClasses__snackbar"},o.a.createElement(ue.a,{className:"SchoolClasses__iconDone"}),t("vkui_edu_up_grade_success_snackbar"))),r&&e(t("vkui_edu_general_snackbar_error")),null===n&&null===r||Object(he.d)())}),[t,n,e,r])}();var Se=function(){Object(w.l)(),C(y.i.CREATE_GRADE,{schoolId:m})},Ae=Object(i.useCallback)((function(e){var t=e.currentTarget.value;Object(G.b)(t),Object(w.g)()}),[]),ke=function(){return C(y.i.GRADES_SEARCH_FILTERS)},je=function(){Object(k.e)()},Te=re&&q.canManage,Ie=re&&q.isAdmin&&!Ce.some((function(e){return e.id===m})),Pe=Object(i.useCallback)((function(){return W?o.a.createElement(c.X,{"data-test-id":R.panelHeaderCloseEditModeBtn,onClick:je}):g?o.a.createElement(c.V,{onClick:T}):null}),[T,W,g]);return o.a.createElement(c.T,{id:t,className:Object(c.Lb)("SchoolClasses","SchoolClasses--".concat(r))},o.a.createElement(Z.a,{isLoaded:V,delay:me.F},(function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(l.a,{"data-test-id":R.schoolGradesTitle,left:Pe(),right:V&&e&&Te&&o.a.createElement(c.J,{icon:o.a.createElement(b.a,null),onClick:Se}),separator:_},E(W?"vkui_edu_grades_edit_mode":"vkui_edu_school_grades_title")),o.a.createElement(h.a,null,o.a.createElement(p.a,{isLoaded:V&&e,error:ce||U,customSpinner:o.a.createElement(X.a,{activePanel:t})},o.a.createElement($.CallsList,null),o.a.createElement(c.C,null,(F||H)&&o.a.createElement(o.a.Fragment,null,V&&o.a.createElement(te.a,{value:z,onChange:Ae,onFiltersClick:ke}),_&&Ie&&!W&&o.a.createElement(c.pb,{className:"SchoolClasses__editModeBtnCell",disabled:!0},o.a.createElement(c.j,{"data-test-id":R.gradeEditModeBtn,size:"m",mode:"outline",onClick:je},E("vkui_edu_grade_edit_mode"))),W&&o.a.createElement("div",{className:"SchoolClasses__gradesActions"},o.a.createElement(se,null))),H&&o.a.createElement(Q.a,{component:o.a.createElement(J.a,null),itemsCount:4,inBorders:!1,top:null}),!H&&(F?o.a.createElement(o.a.Fragment,null,Ee&&x.map((function(e){return o.a.createElement(M,{key:e.id,schoolId:m,grade:e,grades:x,canManage:Te})})),0===x.length&&o.a.createElement(c.v,null,E("vkui_common_nothing_found"))):o.a.createElement(c.cb,{icon:o.a.createElement(L.a,null),action:Te&&!ae&&o.a.createElement(c.j,{size:"l",mode:"tertiary",onClick:Se},E("vkui_edu_classes_placeholder_button"))},E(ae?"vkui_edu_school_graduated_classes_empty_placeholder":"vkui_edu_school_classes_empty_placeholder")))))))})),g&&o.a.createElement("div",{style:{display:"none"}},o.a.createElement(K,{schoolId:m,params:v})))}),{viewWidth:!0,sizeX:!0})},function(e,t,n){"use strict";n.d(t,"a",(function(){return V}));var r=n(6),a=n.n(r),i=n(0),o=n.n(i),c=n(1),s=n(29),u=n(106),l=n(17),d=n.n(l),f=n(18),p=n(10),h=n(19),m="message_outline_24",v=!1;function g(){v||(Object(p.a)(new d.a({id:m,viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="message_outline_24"><path d="M7.713 18.202a.9.9 0 011-.259A9.364 9.364 0 0012 18.53c4.502 0 8.1-3.085 8.1-6.815S16.502 4.9 12 4.9s-8.1 3.084-8.1 6.814c0 1.283.423 2.515 1.214 3.586a.9.9 0 01.176.538c-.003.893-.376 2.179-1.114 3.915 1.654-.184 2.82-.71 3.537-1.551zm-4.324 3.413c-.914.036-1.594-.943-1.209-1.795.776-1.715 1.203-2.974 1.292-3.724-.891-1.312-1.372-2.815-1.372-4.382C2.1 6.924 6.56 3.1 12 3.1s9.9 3.823 9.9 8.614-4.46 8.615-9.9 8.615c-1.157 0-2.287-.173-3.353-.506-1.21 1.116-2.975 1.703-5.258 1.792z" fill="currentColor" /></symbol>'})),v=!0)}var b=function(e){return Object(p.b)((function(){g()}),[]),o.a.createElement(h.a,Object(f.assign)({},e,{viewBox:"0 0 24 24",id:m,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};b.mountIcon=g;var _=b,y=(n(614),n(59)),E=n(221),O=n(359),w=n(109),C=n.n(w),S=n(165),A=n.n(S),k=n(5),j=n(496),T=n(48),I=n(28),P=n(61),D=n(32),N=n(55),x=function(e){var t=e.call,n=e.event,r=e.broadcast,a=Object(D.a)().go,i=Object(N.a)().showAlertError,o=Object(I.a)(),c=Object(j.a)({link:null==n?void 0:n.chat}).getChat;return A()(C.a.mark((function e(){var s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}return e.next=3,c({showSpinner:!0,reload:!1}).catch((function(e){throw i(e),e}));case 3:e.t1=e.sent.local_id,e.t0={act:"show",chat:e.t1},e.next=8;break;case 7:e.t0={act:"show",peer:t?t.peerId:Object(T.b)(r.eventChat.id)};case 8:s=e.t0,o(Object(P.e)({query:s,path:"/mail",url:"",isNewMail:!1})),a(k.j.MESSAGES,s);case 11:case"end":return e.stop()}}),e)})))},R=n(395),M=n(89),L=function(e){var t=e.call,n=e.event,r=e.broadcast,a=e.hasCurrentCall,i=e.now,s=e.compact,l=e.schoolId,d=Object(u.c)().getLangKey,f=Object(M.a)().accountInfo,p=Object(E.b)().getStatusText,h=Object(E.a)(n,l,{participants:!0}),m=function(){var e=Object(u.c)().getLangKey;return function(t){var n=t.minutesToStart;return n<=15&&n>0?e("vkui_edu_broadcast_snippet_description").replace("{count}",n.toString()):e("vkui_edu_broadcast_snippet_in_progress")}}(),v=x({call:t,event:n,broadcast:r}),g=!!t,b=t&&Object(y.n)(t),w=!r||Object(R.a)(r,f.id);return o.a.createElement("div",{className:Object(c.Lb)("CallsListItem",{"CallsListItem--compact":s})},o.a.createElement("div",{className:"CallsListItem__mainInfo"},o.a.createElement(c.Fb,{level:"2",weight:"medium",className:"CallsListItem__title"},n?h:r?r.title:t.name),o.a.createElement(c.E,{weight:"regular",className:Object(c.Lb)("CallsListItem__description",{"CallsListItem__description--active":b,"CallsListItem__description--compact":s})},b?d("vkui_edu_calls_in_call"):g?d("vkui_edu_calls_in_progress"):n?p({from:n.from,to:n.to,now:i}):r?m(r):null)),o.a.createElement("div",{className:Object(c.Lb)("CallsListItem__buttonsGroup",{"CallsListItem__buttonsGroup--compact":s})},w&&o.a.createElement(c.j,{className:"CallsListItem__messengerButton",mode:"secondary",onClick:v},o.a.createElement(_,null)),o.a.createElement(O.a,{className:"CallsListItem__callButton",event:n,call:t,broadcast:r,hasCurrentCall:a,now:i,compact:s})))},B=n(1166),F=(n(1114),function(e){var t=e.call,n=e.event,r=e.schoolId,a=e.now,i=e.hasCurrentCall,s=Object(u.c)().getLangKey,l=Object(E.b)().getStatusText,d=Object(E.a)(n,r,{participants:!0}),f=x({call:t,event:n}),p=!!t,h=t&&Object(y.n)(t);return o.a.createElement("div",{className:"MobileCalls__item"},o.a.createElement("div",{className:"MobileCalls__mainInfo"},o.a.createElement(c.E,{weight:"regular",className:"MobileCalls__itemTitle"},n?d:t.name),o.a.createElement(c.k,{level:"1",weight:"regular",className:Object(c.Lb)("MobileCalls__description",{"MobileCalls__description--active":h})},h?s("vkui_edu_calls_in_call"):p?s("vkui_edu_calls_in_progress"):l({from:n.from,to:n.to,now:a}))),o.a.createElement("div",{className:"MobileCalls__buttonsGroup"},o.a.createElement(O.a,{event:n,call:t,hasCurrentCall:i,now:a,isIcon:!0}),o.a.createElement(c.J,{icon:o.a.createElement(B.a,null),onClick:f})))}),H=(n(615),function(e){var t=e.event,n=e.call,r=e.broadcast;return t?t.id:r?r.eventId:null==n?void 0:n.peerId}),V=function(e){var t=e.items,n=e.compact,r=e.isTeacherInSchool,u=e.now,l=e.hasCurrentCall,d=e.schoolId,f=Object(c.Ob)().viewWidth;return Object(s.b)(f)?o.a.createElement(o.a.Fragment,null,t.length>0&&t.map((function(e){return o.a.createElement(F,a()({key:H(e),hasCurrentCall:l,isTeacherInSchool:r,now:u},e))}))):o.a.createElement(o.a.Fragment,null,t.length>0&&t.map((function(e,s){return o.a.createElement(i.Fragment,{key:H(e)},o.a.createElement(L,a()({hasCurrentCall:l,compact:n,isTeacherInSchool:r,now:u,schoolId:d},e)),s!==t.length-1&&o.a.createElement(c.ob,{wide:!0,className:"CallsList__separator"}))})))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return $})),n.d(t,"b",(function(){return Q}));var r=n(6),a=n.n(r),i=n(2),o=n.n(i),c=n(7),s=n.n(c),u=n(0),l=n.n(u),d=n(1),f=n(106),p=n(17),h=n.n(p),m=n(18),v=n(10),g=n(19),b=!1;function _(){b||(Object(v.a)(new h.a({id:"users_outline_56",viewBox:"0 0 56 56",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 56 56" id="users_outline_56"><g fill="none" fill-rule="evenodd"><path d="M0 0h56v56H0z" /><path d="M39.5 31c5.609 0 10.5 2.699 10.5 8 0 2.625-1.833 4-4 4h-8.5a1.5 1.5 0 010-3H46c.667 0 1-.25 1-1 0-3.164-3.328-5-7.5-5-.71 0-1.482.07-2.226.208a1.5 1.5 0 11-.548-2.95A15.385 15.385 0 0139.5 31zm-19-2c7.356 0 13.5 2.836 13.5 9 0 3.078-1.922 5-4.5 5h-18C8.814 43 7 41.59 7 38.5c0-6.545 6.065-9.5 13.5-9.5zm0 3C14.514 32 10 34.2 10 38.5c0 1.244.33 1.5 1.5 1.5h18c.922 0 1.5-.578 1.5-2 0-3.874-4.606-6-10.5-6zM39 15a6.5 6.5 0 110 13 6.5 6.5 0 010-13zm-18.5-4a7.5 7.5 0 110 15 7.5 7.5 0 010-15zM39 18a3.5 3.5 0 100 7 3.5 3.5 0 000-7zm-18.5-4a4.5 4.5 0 100 9 4.5 4.5 0 000-9z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),b=!0)}var y=function(e){return Object(v.b)((function(){_()}),[]),l.a.createElement(g.a,Object(m.assign)({},e,{viewBox:"0 0 56 56",id:"users_outline_56",width:isNaN(e.width)?56:+e.width,height:isNaN(e.height)?56:+e.height}))};y.mountIcon=_;var E=y,O=n(127),w=n(29),C=n(111),S=n(32),A=n(28),k=n(5),j=n(589),T=n(94),I=n(142),P=n(112),D=n(252),N=n(85),x=n(268),R=n(208),M=n(253),L=n(21),B=n.n(L),F=n(82),H=n(83);n(1078);var V=n(153),U=n(144),z=n(23),G=n(172),W=n(63),q=n(168),K=n(163),Y=n(24),Z=n(149),Q=function(){var e=Object(f.c)().getLangKey,t=Object(N.a)("profile_contacts"),n=t.searchFilters,r=t.updateFilterValues;return n?l.a.createElement(d.C,null,l.a.createElement(d.D,null,e("vkui_edu_documents_search_options")),l.a.createElement(Z.a,a()({},n,{onChange:r}))):null};function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $=Object(d.Qb)((function(e){var t=e.id,n=e.viewWidth,r=e.sizeX,i=Object(f.c)().getLangKey,o=Object(C.a)(n),c=Object(w.a)(n),p=Object(A.b)().profileSchools,h=Object(S.a)(),m=h.go,v=h.back,g=Object(Y.b)().apiRequest,b=Object(A.a)(),_=Object(u.useState)(0),y=s()(_,2),L=y[0],Z=y[1],Q=Object(x.a)(L).getGrades,J=Object(N.a)("profile_contacts").updateFilterValues,$=Object(N.a)("profile_contacts"),ee=$.searchFiltersValues,te=$.setFiltersChangeHandler,ne=Object(u.useCallback)((function(e){return function(e,t,n,r){var a=function(e,t){var n,r=e.find((function(e){return e.id===t}));return"horizontal"===(null==r||null===(n=r.organization_type)||void 0===n?void 0:n.structure)}(n,t);return[{type:"select",name:"schoolId",defaultValue:t.toString(),label:e("vkui_edu_filter_organization"),options:[{value:"0",label:e("vkui_edu_member_school_any")}].concat(B()(n.map((function(e){return{value:e.id.toString(),label:"".concat(e.name).concat(e.city?", ".concat(e.city.title):"")}}))))},{type:"select",name:"gradeId",defaultValue:"0",value:"0",label:e("vkui_edu_class"),disabled:0===r.length||a,options:[{value:"0",label:e("vkui_edu_member_grade_any")}].concat(B()(r.map((function(e){return{value:e.id.toString(),label:Object(H.d)(e)}}))))},{type:"select",name:"role",defaultValue:"0",label:e("vkui_edu_school_requests_search_options_role"),disabled:a,options:[{value:"0",label:e("vkui_edu_member_role_any")},{value:F.a.STUDENT.toString(),label:e("vkui_edu_member_role_only_students")},{value:F.a.TEACHER.toString(),label:e("vkui_edu_member_role_only_teachers")}]}]}(i,L,p,e)}),[L,p.length]),re=Object(D.a)({initialSearch:"",fetch:function(e){var t=e.itemsCount,n=e.search,r=e.options,a=function(e){return"0"!==e?e:void 0},i={offset:t,q:n,school_id:a(null==ee?void 0:ee.schoolId),grade_id:a(null==ee?void 0:ee.gradeId),role:a(null==ee?void 0:ee.role)};return g("education.searchFriends",i,X(X({},r),{},{grouping:!1})).then((function(e){return 0===e.items.length?[]:e.items.map(P.g)}))}}),ae=re.isLoaded,ie=re.isFetching,oe=re.globalError,ce=re.canLoadMore,se=re.items,ue=re.getItems,le=re.hasAnyItems,de=re.search,fe=re.handleSearch,pe=re.handleLoadMore,he=Object(N.b)("profile_contacts",se.length>0&&p.length>0?ne([]):null).updateSearchFilters;Object(u.useEffect)((function(){0!==L?Q().then((function(e){he(ne(e))})):he(ne([]))}),[L]);te((function(){var e;null!=(e=ee)&&e.schoolId&&+e.schoolId!==L&&(e.gradeId="0",e.role="0",he(ne([])),Z(+e.schoolId)),J(e),ae&&ue({reset:!0})}));var me=function(e){var t=+e.schoolId;t&&0!==t?Q(null,{group_id:t}).then((function(e){he(ne(e))})):he(ne([]))},ve=function(){b(Object(V.b)({callback:me})),m(k.i.SEARCH_FILTERS)},ge=!ee||Object.values(ee).every((function(e){return"0"===e})),be=!ie&&0===se.length,_e=be&&(de||!ge),ye=be&&!de&&ge;return l.a.createElement(d.T,{id:t,className:Object(d.Lb)("ProfileContacts","ProfileContacts--".concat(r))},l.a.createElement(O.a,{left:o&&l.a.createElement(d.V,{onClick:v}),separator:c},i("vkui_edu_contacts")),l.a.createElement(U.a,{isLoaded:ae,delay:z.F},(function(e){return l.a.createElement(I.a,null,l.a.createElement(T.a,{isLoaded:e&&ae,error:oe,customSpinner:l.a.createElement(G.a,{activePanel:t})},l.a.createElement(K.a,null),l.a.createElement(d.C,null,l.a.createElement(M.a,{canLoad:ce,isFetching:ie,customSpinner:l.a.createElement(W.a,{component:l.a.createElement(q.a,null),itemsCount:4,top:null,inBorders:!1}),onLoadMore:pe},e&&ae&&le&&l.a.createElement(R.a,{className:"ProfileContacts__search",value:de,onChange:fe,onFiltersClick:ve}),_e&&l.a.createElement(d.v,null,i("vkui_common_nothing_found")),ye&&l.a.createElement(d.cb,{icon:l.a.createElement(E,null)},i("vkui_edu_contact_list_empty")),se.map((function(e){return l.a.createElement(j.a,a()({key:e.id,className:"ProfileContacts__cell"},e))}))))))})))}),{viewWidth:!0,sizeX:!0})},function(e,t,n){"use strict";var r=n(2),a=n.n(r),i=n(7),o=n.n(i),c=n(0),s=n.n(c),u=n(1),l=n(26),d=n.n(l),f=n(142),p=n(29),h=n(106),m=n(104),v=n(46),g=n(267),b=n(32),_=n(5),y=n(28),E=n(61),O=n(66),w=n(468),C=n(21),S=n.n(C),A=n(389),k=n(131),j=function(e){var t=e.embedded,n=e.onDocumentsLoaded,r=Object(A.a)().showUploadModal,a=Object(c.useState)(-1),i=o()(a,2),u=i[0],l=i[1],d=Object(c.useState)([]),f=o()(d,2),p=f[0],h=f[1],m=Object(k.b)().fileList;return Object(c.useEffect)((function(){var e=m.storedList.filter((function(e){var t=e.data;return!p.includes(t.id)}));e.length&&(n(u,e),h([].concat(S()(p),S()(e.map((function(e){return e.data.id}))))))}),[m.storedList,p]),Object(c.useEffect)((function(){var e=t.onMessage;t.onMessage=function(t,n){if("attach_document"!==t)return e(t,n);l(n.peerId),r()}}),[t]),s.a.createElement(s.a.Fragment,null)},T=n(100),I=n(23),P=n(130),D=n(24),N=n(58);function x(){var e=Object(b.a)().go,t=Object(D.b)().apiRequest,n=Object(N.a)().showSnackbarError,r=Object(y.a)(),a=Object(c.useCallback)((function(a,i){return e(_.j.MESSAGES),t("education.getChatPreview",{link_id:i},{signal:a}).then((function(t){var n,a;t.preview.is_member?(n=t.preview,a={act:"show",peer:I.m+n.local_id},r(Object(E.e)({query:a,path:"/mail",url:"",isNewMail:!1})),e(_.j.MESSAGES,a)):function(t,n){var a=t.preview;e(_.i.CONVERSATION),r(Object(O.h)({preview:a,id:a.local_id,invite_link:n}))}(t,i)})).catch((function(t){!function(t){var a="";t.error_code===T.a?a="school":t.error_code===I.d&&(a="private"),a?(e(_.i.CHAT_ACCESS_RESTRICTED),r(Object(O.c)(a))):n(t.error_text||t.error_msg)}(t)}))}),[]);return{inviteChatPreview:Object(P.a)({requestFn:a})}}var R,M=n(135),L=n(199),B=n(259),F=n(584),H=n(75),V=function(e){var t=e.embedded,n=e.onDocumentsLoaded,r=Object(H.a)(),a=r.showPopout,i=r.hidePopout,l=Object(F.a)(),d=l.showUploadModal,f=l.pending,p=Object(c.useState)(-1),h=o()(p,2),m=h[0],v=h[1],g=Object(c.useState)([]),b=o()(g,2),_=b[0],y=b[1],E=Object(B.b)().fileList;return Object(c.useEffect)((function(){f?a(s.a.createElement(u.kb,null)):i()}),[f]),Object(c.useEffect)((function(){var e=E.storedList.filter((function(e){var t=e.data;return!_.includes(t.id)}));e.length&&(n(m,e),y([].concat(S()(_),S()(e.map((function(e){return e.data.id}))))))}),[E.storedList,_]),Object(c.useEffect)((function(){var e=t.onMessage;t.onMessage=function(t,n){if("attach_video"!==t)return e(t,n);v(n.peerId),d()}}),[t]),null},U=n(129),z=n(48),G=n(334),W=n(128),q=n(55);!function(e){e.User="user",e.School="school"}(R||(R={}));var K=n(485),Y=n(255),Z=n(181),Q=n(144),J=n(487),X=n(20),$=n(585),ee=(n(1055),n(329)),te=n(494),ne=n(210),re=n(84);function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oe=function(e){var t,n=e.id,r=e.isSchool,a=e.params,i=e.community,l=Object(H.a)(),C=l.showPopout,S=l.hidePopout,A=Object(ne.a)(),T=A.onCallUser,F=A.onCallGroup,ae=A.onCallJoinByLink,oe=Object(D.b)().apiRequest,ce=Object(q.a)(),se=ce.showAlertError,ue=ce.showAlertConfirm,le=Object(N.a)().showSnackbar,de=Object(re.a)().getAsyncAccessToken,fe=Object(b.a)(),pe=fe.go,he=fe.close,me=Object(c.useState)(!0),ve=o()(me,2),ge=ve[0],be=ve[1],_e=Object(c.useState)(!0),ye=o()(_e,2),Ee=ye[0],Oe=ye[1],we=Object(u.Ob)().viewWidth,Ce=Object(y.a)(),Se=Object(y.b)(),Ae=Se.accountInfo,ke=Se.messageToReply,je=Se.messagesEntryPoint,Te=Se.messagesMain,Ie=Se.schoolInfo,Pe=Object(c.useRef)(null),De=Object(c.useRef)(null),Ne=Object(c.useRef)(null),xe=Object(c.useState)(""),Re=o()(xe,2),Me=Re[0],Le=Re[1],Be=Object(c.useRef)(0),Fe=function(){var e={},t=Object(D.b)().apiRequest,n=Object(q.a)().showAlertError,r=Object(b.a)().go,a=function(e){e.type===R.User&&r(_.i.PROFILE_COMPACT,{userId:e.id}),e.type===R.School&&r(_.j.SCHOOL,{schoolId:e.id})},i=Object(c.useCallback)((function(n,r){var i={screen_name:r.slice(1)};return t("utils.resolveScreenName",i,{signal:n}).then((function(t){var n=t.object_id,i=t.type;if("user"===i){var o={type:R.User,id:n};e[r]=o,a(o)}if("group"===i){var c={type:R.School,id:n};e[r]=c,a(c)}}))}),[]),s=Object(P.a)({requestFn:i});return{getMention:function(t){if(e&&e[t])a(e[t]);else{if(/^\/id\d+$/.test(t)){var r=t.match(/\d+$/),i=o()(r,1)[0],c={type:R.User,id:Number(i)};return e[t]=c,void a(c)}if(/^\/club\d+$/.test(t)){var u=t.match(/\d+$/),l=o()(u,1)[0],d={type:R.School,id:Number(l)};return e[t]=d,void a(d)}s(t).catch(n)}}}}().getMention,He=x().inviteChatPreview,Ve=Object(h.c)().getLangKey,Ue=ie(ie({},a),{},{community:i}),ze=parseInt(Ue.chat,10)||Object(z.c)(+Ue.peer),Ge=parseInt(Ue.peer,10)||Object(z.b)(ze),We=Object(J.a)({chatId:ze,peerId:Ge}),qe=We.chatInfo,Ke=We.reloadChatInfo,Ye=Object(c.useRef)(null),Ze=Object(p.a)(we),Qe=null==qe||null===(t=qe.info)||void 0===t?void 0:t.is_group_channel,Je=Object(ee.a)(Qe),Xe=Object(c.useCallback)((function(){var e,t=Ne.current||{},n=t.peer,r=t.chat,a=parseInt(r,10),i=n?parseInt(n,10):Object(z.b)(a);oe("messages.deleteConversation",{user_id:null===(e=De.current)||void 0===e?void 0:e.id,peer_id:i},{showSpinner:!0}).then((function(){var e,t,n,r;le(s.a.createElement(W.a,null,Ve("vkui_edu_msg_mail_history_flushed"))),Pe.current.sendMessage("resync_folder",{}),Object(G.b)({event_type:"chat_delete",chat_id:null===(e=Ne.current)||void 0===e?void 0:e.chat,chat_users_count:null!==(t=null===(n=Ye.current)||void 0===n||null===(r=n.info)||void 0===r?void 0:r.members_count)&&void 0!==t?t:0})}))}),[De.current,qe]),$e=Object(te.a)(qe),et=function(){var e=je||_.d.getState(),t=e.page,n=e.params.schoolId;if(d.a.isWebView())he();else{var r={};n&&(r={schoolId:n}),pe(t,r),Ce(Object(E.d)(null))}},tt=Object(c.useCallback)((function(){var e;$e(null===(e=De.current)||void 0===e?void 0:e.id).then((function(){var e,t;le(s.a.createElement(W.a,null,Ve(Je("vkui_edu_messages_chat_leaved")))),Pe.current.sendMessage("resync_folder",{}),Object(G.b)({event_type:"chat_leave",chat_id:ze,chat_users_count:null!==(e=null===(t=Ye.current)||void 0===t?void 0:t.members_count)&&void 0!==e?e:0}),et(),setTimeout((function(){Pe.current.sendMessage("reload_current_chat",{})}),0)}))}),[Ae,a,qe,$e]),nt=Object(c.useCallback)((function(){ue({title:Ve("vkui_edu_messages_flush_history_question_title"),text:"<span class='Messages__text'>".concat(Ve("vkui_edu_chat_flush_history_text"),"</span>"),actionText:Ve("vkui_edu_messages_flush_history_button"),callback:Xe})}),[Xe]),rt=Object($.a)(qe,tt),at=function(t,n){if("ready"===t||"sak:ready"===t){var i;if(null!=e&&null!==(i=e.params)&&void 0!==i&&i.join){var c=decodeURIComponent(e.params.join);He(c),Ce(Object(O.g)({joinLink:c,to:e.params.to}))}be(!1),Pe.current.sendMessage("config",{testConfig:"config"})}if("message_unread_counter"===t&&Pe.current.sendMessage("is_mobile_view",{isMobileView:Object(p.b)(we)}),"sak:reauth"===t)return de({force:!0}).then((function(e){return{accessToken:e}}));if("go_back"===t&&_.d.back(),"open_school_grade"===t){var u=n||{},l=u.grade,f=u.school,h=null==l?void 0:l.id,v=null==f?void 0:f.id,g=h?_.j.SCHOOL_GRADE_INFO:_.j.SCHOOL;return pe(g,h?{schoolId:v,gradeId:h}:{schoolId:v}),null}if("new_chat"===t)return pe(_.i.CHAT_CREATE_PRIVATE_STEP_1),null;if("nav_info"===t){n.query&&(delete n.query._sak_embed_force,delete n.query._sak_embed_at,delete n.query._sak_embed_origin,delete n.query._sak_embed_name,delete n.query._sak_embed_env,delete n.query.forced_color_scheme_mode,delete n.query.community);var b=ie({},n.query),y=m.b.parse(n.url).community;r&&(b.schoolId=(null==Ie?void 0:Ie.id)||y);var A="unread"===b.act||"important"===b.act;if(!b.chat&&!b.peer&&!A)return et(),null;pe(r?_.j.SCHOOL_MESSAGES:_.j.MESSAGES,b,{replace:!0})}if("photo"===t&&n.id&&oe("photos.getById",{photos:"".concat(n.id)}).then((function(e){var t;return null===(t=Object(z.f)(e[0]))||void 0===t?void 0:t.url})).then((function(e){C(s.a.createElement(M.a,{onClose:S},s.a.createElement("img",{src:e,style:{maxWidth:"100%",maxHeight:"100%"}})))})),"nav"===t){var k,j,P,D,N;if("info"===n.query.act)return Ce(Object(O.f)({chatId:Number(n.query.chat),peerId:Number(n.query.chat)+I.m})),pe(_.i.CHAT_INFO),null;if("toggle_community_block"===n.query.act||"community_toggle_important"===n.query.act)return Ce(Object(E.e)(ie(ie({},n),{},{reloadChat:!0}))),null;if("return_to_chat"===n.query.act)return Ce(Object(E.e)(ie(ie({},n),{},{reloadChatInfo:!0}))),null;if("show_medias"===n.query.act)return n.query.peer?Ce(Object(O.f)({chatId:Number(n.query.chat),peerId:n.query.peer})):Ce(Object(O.f)({chatId:Number(n.query.chat),peerId:Number(n.query.chat)+I.m})),pe(_.i.CHAT_ATTACHMENTS,{community:n.query.community}),null;if(/^\/video(-?)\d+_\d+$/.test(n.path)){var x=n.path.match(/^\/video((-?)\d+_\d+_?\w*)$/),R=o()(x,2)[1],L=R.split("_"),B=o()(L,3),H=B[0],V=B[1],G=B[2],q="".concat(H,"_").concat(V);G&&(q="".concat(R,"_").concat(G)),oe("video.get",{videos:q}).then((function(e){var t=e.items;if(0!==t.length){var n=o()(t,1)[0];n.player&&de().then((function(e){var t=Object(z.g)(n.player,e);C(s.a.createElement(M.a,{onClose:S},s.a.createElement(U.a,{src:t,allowFullScreen:!d.a.isWebView()})))}))}}))}if(!Object(w.a)(n))return Fe(n.path),null;if(Ce(Object(E.f)(n)),"add_to_chat"===(null==n||null===(k=n.query)||void 0===k?void 0:k.act))return null!=qe&&qe.chatId||Ce(Object(O.f)({chatId:Number(n.query.chat),peerId:Number(n.query.chat)+I.m})),pe(_.i.CHAT_ADD_MEMEBERS),null;if("create_chat"===(null==n||null===(j=n.query)||void 0===j?void 0:j.act))return pe(_.i.CHAT_CREATE_PRIVATE_STEP_1),null;if("new_chat"===(null==n||null===(P=n.query)||void 0===P?void 0:P.act))return pe(_.i.CHAT_CREATE_PRIVATE_STEP_1),null;if("flush_history"===(null==n||null===(D=n.query)||void 0===D?void 0:D.act))return nt(),null;if("leave_chat"===(null==n||null===(N=n.query)||void 0===N?void 0:N.act))return rt(),null;pe(_.i.MESSAGES_EXTERNAL)}if("call"===t&&n.peerId){var K=n.isGroup?n.peer.avatarImages.length>1?null:n.peer.avatarImages[0]:null;d.a.isWebView()?n.isGroup?F(n.peerId,{peerId:n.peerId,name:n.peer.title,photo:K,tab:n.peer.title}):T(n.peerId,n.peer.title):X.d.isMobile||X.d.isIPad?pe(_.i.MOBILE_JOIN_CALL,{peerId:n.peerId}):pe(_.i.JOIN_MESSAGE_CALL,{peerId:n.peerId,isGroup:n.isGroup,peerPhoto:K,peerTitle:n.peer.title})}if("call_join"===t&&(d.a.isWebView()?ae(n.peerId,n.callData.join_link):X.d.isMobile||X.d.isIPad?pe(_.i.MOBILE_JOIN_CALL,{joinLink:n.callData.join_link}):pe(_.i.JOIN_MESSAGE_CALL,{peerId:n.peerId,joinLink:n.callData.join_link})),"show_snackbar"===t&&n.text!==Ve("vkui_edu_general_snackbar_error")&&le(s.a.createElement(W.a,null,Object(Y.d)(n.text))),"reply_as"===t){var Z,Q=n.id===Ae.id;if(!r&&Q||r&&!Q)return null;je||Ce(Object(E.d)(_.d.getState())),Pe.current.sendMessage("set_message_text",{text:""}),oe("education.getLocalChatId",{school_id:null==qe||null===(Z=qe.school)||void 0===Z?void 0:Z.id,chat_id:ze,is_school:r}).then((function(e){var t,i=e.chat_id;pe(r?_.j.MESSAGES:_.j.SCHOOL_MESSAGES,ie(ie({},a),{},{peer:void 0,schoolId:r||null==qe||null===(t=qe.school)||void 0===t?void 0:t.id,chat:i}),{replace:!0}),setTimeout((function(){Ce(Object(E.c)(n.msg))}),300)})).catch((function(e){et(),(null==e?void 0:e.error_code)!==I.a&&se(e)}))}return null};Object(c.useEffect)((function(){!ge&&ke&&(Pe.current.sendMessage("set_message_text",{text:ke}),Ce(Object(E.c)("")))}),[ke,ge]),Object(c.useEffect)((function(){return function(){var e=_.d.getState().page;e!==_.j.MESSAGES&&e!==_.j.SCHOOL_MESSAGES&&Ce(Object(E.d)(null))}}),[]),Object(c.useEffect)((function(){de().then((function(e){var t,n=[Ze?882:innerWidth,innerHeight,window.devicePixelRatio||1,K.hasTouch?1:0],r={forced_color_scheme_mode:"light",_sak_embed_at:e,_sak_embed_origin:"https://".concat(location.host),_sak_embed_env:n.join(",")};t=Object(w.c)(Ue)?m.b.create(Object.assign({},r,Ue)):m.b.create(r),Le("https://".concat(v.d.mvk_host,"/mail?").concat(t))}))}),[]),Object(c.useEffect)((function(){De.current=Ae,Ne.current=a,Ye.current=qe}),[Ae,a,qe]),Object(c.useLayoutEffect)((function(){var e=document.getElementById("MessagesIframe");return Pe.current=new g.a({name:"mvk_embedded_mail",origin:"https://".concat(v.d.mvk_host),target:null==e?void 0:e.contentWindow,onMessage:at}),function(){var e;null===(e=Pe.current)||void 0===e||e.destroy(),Pe.current=void 0}}),[qe,ze]),Object(c.useEffect)((function(){return function(){return Ce(Object(E.b)())}}),[]),Object(c.useEffect)((function(){var e=m.b.create(Ue);if(Pe.current&&!e&&!ge){Pe.current.sendMessage("nav",{url:"/mail"})}}),[a,i]),Object(c.useEffect)((function(){Me&&!ge&&Pe.current.sendMessage("send_school_grade",null==qe?void 0:qe.chatSchoolGrade)}),[qe,Me,ge]),Object(c.useEffect)((function(){if(Pe.current&&Me&&Te&&!ge){if(Te.reloadChatInfo)return Ke(),void Ce(Object(E.e)(Object(L.a)(Te,"reloadChatInfo")));if(Te.redrawCounter){Pe.current.sendMessage("redraw_counter",Te.payload);var e=ie({},Te);return delete e.payload,delete e.redrawCounter,void Ce(Object(E.e)(e))}if(Te.reloadChat)return Pe.current.sendMessage("reload_current_chat",{}),void Ce(Object(E.e)(Object(L.a)(Te,"reloadChat")));if(Te.query){var t=m.b.create(Object.assign({},Te.query,{_sak_embed_force:1})),n="".concat(Te.path,"?").concat(t);Pe.current.sendMessage("nav",{url:n})}}}),[Te,Me,ge]);var it=function(e){return function(t,n){n.forEach((function(n){var a=n.data,o=r?-i:a.owner_id;oe("messages.send",{random_id:1e6*Math.random(),peer_id:t,attachment:"".concat(e).concat(o,"_").concat(a.id),group_id:i}),Object(G.b)({event_type:"attachment_add",chat_id:Object(z.c)(+t),attachment_id:a.id,attachment_type:e})}))}};if(!Ae||!Ae.id)return s.a.createElement(u.T,{id:n},s.a.createElement(Z.a,{activePanel:n}));var ot=r?-i:Ae.id,ct=!ge&&!!Me;return s.a.createElement(u.T,{id:n},s.a.createElement(Q.a,{delay:I.F,isLoaded:ct},(function(e){return s.a.createElement(s.a.Fragment,null,(!ct||!e||Ee)&&s.a.createElement(Z.a,{activePanel:n}),s.a.createElement(f.a,null,Me&&s.a.createElement("div",{className:Object(u.Lb)("Messages__container",{"Messages__container--desktop":Ze})},s.a.createElement("iframe",{id:"MessagesIframe",className:"Messages__iframe",src:Me,onLoad:function(){Oe(!1)},key:"".concat(Me,"_").concat(Be.current),onError:function(){return be(!1)},style:{visibility:ct&&e&&!Ee?"visible":"hidden"},allow:"microphone"})),s.a.createElement(k.a,{ownerId:ot,canManage:!0},Pe.current&&s.a.createElement(j,{embedded:Pe.current,onDocumentsLoaded:it("doc")})),s.a.createElement(B.a,{ownerId:ot,canManage:!0},Pe.current&&s.a.createElement(V,{embedded:Pe.current,onDocumentsLoaded:it("video")}))))})))};t.a=Object(c.memo)(oe)},function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var r=n(0),a=n.n(r),i=n(1),o=n(1353),c=n(17),s=n.n(c),u=n(18),l=n(10),d=n(19),f="zip_outline_28",p=!1;function h(){p||(Object(l.a)(new s.a({id:f,viewBox:"0 0 28 28",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="zip_outline_28"><path clip-rule="evenodd" d="M14 4h1.2c1.573 0 2.633.002 3.45.068.793.065 1.18.181 1.439.313a3.5 3.5 0 011.53 1.53c.132.26.248.646.313 1.44.066.816.068 1.876.068 3.449v6.4c0 1.573-.002 2.633-.068 3.45-.065.793-.181 1.18-.314 1.439a3.5 3.5 0 01-1.529 1.53c-.26.132-.646.248-1.44.313-.816.066-1.876.068-3.449.068h-2.4c-1.573 0-2.633-.002-3.45-.068-.793-.065-1.18-.181-1.439-.313a3.5 3.5 0 01-1.53-1.53c-.132-.26-.248-.646-.313-1.44C6.002 19.834 6 18.774 6 17.2v-6.4c0-1.573.002-2.633.068-3.45.065-.793.181-1.18.313-1.439a3.5 3.5 0 011.53-1.53c.26-.132.646-.248 1.44-.313.67-.054 1.503-.065 2.649-.067V5.2c0 .28 0 .42.054.527a.5.5 0 00.219.219C12.38 6 12.52 6 12.8 6H14v2h-1.2c-.28 0-.42 0-.527.055a.5.5 0 00-.218.218C12 8.38 12 8.52 12 8.8v.4c0 .28 0 .42.054.527a.5.5 0 00.219.219c.107.054.247.054.527.054H14v1.2c0 .28 0 .42.054.527a.5.5 0 00.219.219c.107.054.247.054.527.054h.4c.28 0 .42 0 .527-.054a.5.5 0 00.218-.219C16 11.62 16 11.48 16 11.2v-.4c0-.28 0-.42-.054-.527a.5.5 0 00-.219-.218C15.62 10 15.48 10 15.2 10H14V8h1.2c.28 0 .42 0 .527-.054a.5.5 0 00.218-.219C16 7.62 16 7.48 16 7.2v-.4c0-.28 0-.42-.054-.527a.5.5 0 00-.219-.218C15.62 6 15.48 6 15.2 6H14zM4 10.8c0-3.08 0-4.62.6-5.797A5.5 5.5 0 017.002 2.6C8.18 2 9.72 2 12.8 2h2.4c3.08 0 4.62 0 5.797.6A5.5 5.5 0 0123.4 5.002C24 6.18 24 7.72 24 10.8v6.4c0 3.08 0 4.62-.6 5.797a5.5 5.5 0 01-2.403 2.404C19.82 26 18.28 26 15.2 26h-2.4c-3.08 0-4.62 0-5.797-.6a5.5 5.5 0 01-2.404-2.403C4 21.82 4 20.28 4 17.2zM16 16v-1.2c0-.28 0-.42-.054-.527a.5.5 0 00-.219-.218C15.62 14 15.48 14 15.2 14h-2.4c-.28 0-.42 0-.527.054a.5.5 0 00-.218.219C12 14.38 12 14.52 12 14.8V16a2 2 0 104 0z" fill="currentColor" fill-rule="evenodd" /></symbol>'})),p=!0)}var m=function(e){return Object(l.b)((function(){h()}),[]),a.a.createElement(d.a,Object(u.assign)({},e,{viewBox:"0 0 28 28",id:f,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};m.mountIcon=h;var v=m,g=n(1354),b=!1;function _(){b||(Object(l.a)(new s.a({id:"music_outline_28",viewBox:"0 0 28 28",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="music_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path d="M11 16.93v2.464c0 4.687-4.583 7.1-7.073 4.61-2.49-2.491-.078-7.074 4.61-7.074H11zm-2 2h-.463c-3.014 0-4.339 2.516-3.196 3.659C6.484 23.732 9 22.408 9 19.394v-.464zM19.388 3.523A3 3 0 0123 6.46v10.434c0 4.687-4.583 7.1-7.073 4.61-2.49-2.491-.078-7.074 4.61-7.074h.462V9.729l-10 2.083L11 18H9V8.917c0-.943.079-1.43.313-1.954.222-.496.56-.911 1-1.23.465-.336.926-.513 1.849-.705zM21 16.43h-.463c-3.014 0-4.339 2.516-3.196 3.659C18.484 21.232 21 19.908 21 16.894v-.464zm-.021-10.174a1 1 0 00-1.183-.775L12.57 6.986c-.67.14-.88.22-1.085.368-.156.112-.268.25-.346.426-.103.23-.139.451-.139 1.137v.853l10-2.083V6.46a1 1 0 00-.005-.103z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),b=!0)}var y=function(e){return Object(l.b)((function(){_()}),[]),a.a.createElement(d.a,Object(u.assign)({},e,{viewBox:"0 0 28 28",id:"music_outline_28",width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};y.mountIcon=_;var E=y,O=n(1355),w=n(1331),C=n(2),S=n.n(C),A=n(7),k=n.n(A);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){S()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=function(e,t){var n=Object(r.useState)(t),a=k()(n,2),i=a[0],o=a[1];return Object(r.useEffect)((function(){if("string"==typeof t&&t!==i)return o(t)}),[t,i]),Object(r.useEffect)((function(){if("string"!=typeof t&&null!=e&&(n=e.type,["image/jpeg","image/png","image/gif"].includes(n))){var n,r=function(e,t){var n=new FileReader,r=new Promise((function(t,r){n.addEventListener("loadend",(function(){"string"==typeof n.result?t(n.result):r()})),n.readAsDataURL(e)}));return t?{promise:r,cancel:function(){return n.abort()}}:r}(e,!0),a=r.cancel;return r.promise.then((function(e){return o(e)})),function(){return a()}}}),[t,i,e]),i},P=(n(1057),n(81)),D=n(634),N=function(e){var t,n,c,s,u,l,d,f=(n=e.docData,c=e.file,l=null==n||null===(s=n.preview)||void 0===s||null===(u=s.photo)||void 0===u?void 0:u.sizes,d=Object(r.useMemo)((function(){if(!Array.isArray(l))return null;var e=l.reduce((function(e,t){return t&&null!=t.type&&null!=t.src?T(T({},e),{},S()({},t.type,t.src)):e}),{});return e.i||e.d}),[l]),I(c,d)),p=e.docData.type,h=function(e){switch(e){case P.f:return"text";case P.a:return"archive";case P.d:return"gif";case P.e:return"image";case P.b:return"audio";case P.h:return"video";case P.c:return"book";default:return"unknown"}}(p),m=function(e){switch(e){case P.f:case P.c:return o.a;case P.a:return v;case P.d:case P.e:return g.a;case P.b:return E;case P.h:return O.a;default:return w.a}}(p),b=null!==(t=e.state)&&void 0!==t?t:"idle";return a.a.createElement(i.h,{className:Object(i.Lb)("DocumentThumbnail__avatar","DocumentThumbnail__avatar--".concat(h)),src:f,size:72,mode:"image"},null==f&&a.a.createElement("div",{className:Object(i.Lb)("DocumentThumbnail__icon")},a.a.createElement(m,null)),a.a.createElement(D.a,{state:b}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return te})),n.d(t,"b",(function(){return ee}));var r=n(0),a=n.n(r),i=(n(1082),n(1)),o=n(1346),c=n(1347),s=n(1362),u=n(1349),l=n(1356),d=n(1363),f=n(106),p=n(1345),h=n(29),m=n(111),v=n(127),g=n(94),b=n(142),_=n(253),y=n(252),E=n(208),O=(n(1083),n(366)),w=n(207),C=n(48),S=function(e){var t,n=Object(f.c)(),r=n.getLangNumeric,o=n.getLangDate,c=e.article,s=e.showActions,u=e.onShow,l=e.emptyIcon,d=null!=c&&c.photo?null===(t=Object(C.e)(c.photo,150))||void 0===t?void 0:t.url:void 0,p=[r(c.views,"vkui_edu_stat_view"),o(c.published_date,"vkui_common_short_date_time")].join(" · ");return a.a.createElement(i.pb,{className:"ArticleItem",before:a.a.createElement(O.a,{className:"ArticleItem__thumb",src:d,emptyIcon:l}),description:p,after:a.a.createElement(w.a,{"data-id":c.id,onClick:function(e){e.stopPropagation(),s(e.currentTarget,c)}}),onClick:function(){u(c.id)}},a.a.createElement(i.E,{weight:"regular"},c.title))},A=n(327),k=n(5),j=n(135),T=n(129),I=n(85),P=n(211),D=n(391),N=n(163),x=n(144),R=n(23),M=n(63),L=n(245),B=n(172),F=n(143),H=n(75),V=n(24),U=n(55),z=n(58),G=n(84),W=n(32),q=n(271),K=n(6),Y=n.n(K),Z=n(12),Q=n.n(Z),J=n(149),X=n(275),$=["className"],ee=function(e){var t=e.className,n=Q()(e,$),r=Object(f.c)().getLangKey,o=Object(I.a)("school_articles"),c=o.searchFilters,s=o.updateFilterValues;return c?a.a.createElement(i.C,Y()({className:Object(i.Lb)(t,"SchoolArticlesSidebar")},n),a.a.createElement(i.D,null,r("vkui_edu_search_options")),a.a.createElement(J.a,Y()({},c,{onChange:s}))):a.a.createElement(X.a,null)},te=function(e){var t=e.id,n=e.schoolId,O=Object(i.Ob)(),w=O.viewWidth,K=O.sizeX,Y=Object(m.a)(w),Z=Object(h.a)(w),Q=Object(q.a)().articleId,J=Object(i.Pb)(),X=Object(f.c)().getLangKey,$=Object(F.a)().showActionSheet,ee=Object(H.a)().showPopout,te=Object(V.b)().apiRequest,ne=Object(U.a)().showAlertError,re=Object(z.a)().showSnackbarInfo,ae=Object(G.a)().getAsyncAccessToken,ie=Object(W.a)(),oe=ie.go,ce=ie.back,se=Object(A.a)(n,!0).schoolInfo,ue=Object(I.a)("school_articles"),le=ue.searchFiltersValues,de=ue.setFiltersChangeHandler,fe=Object(y.a)({initialSearch:"",fetch:function(e){var t=e.itemsCount,r=e.search,a=e.options;return te("education.getSchoolArticles",{school_id:n,count:20,q:r,offset:t,sort_by:(null==le?void 0:le.sort_by)||void 0},a).then((function(e){return e.items}))}}),pe=fe.isLoaded,he=fe.isFetching,me=fe.globalError,ve=fe.canLoadMore,ge=fe.items,be=fe.setItems,_e=fe.getItems,ye=fe.itemsCount,Ee=fe.hasAnyItems,Oe=fe.search,we=fe.handleSearch,Ce=fe.handleLoadMore;function Se(){oe(k.i.SEARCH_FILTERS)}Object(I.b)("school_articles",pe?[{type:"select",name:"sort_by",defaultValue:"",label:X("vkui_edu_search_sort_label"),options:[{value:"",label:X("vkui_edu_search_sort_default")},{value:"date",label:X("vkui_edu_search_sort_by_date")},{value:"views",label:X("vkui_edu_search_sort_by_views")}]}]:null),de((function(){pe&&_e({reset:!0})}));var Ae=J===i.H?o.a:c.a,ke=function(e,t){var r=t.id,i=k.d.buildUrl(k.j.SCHOOL_ARTICLES,{schoolId:n,articleId:r}),o=Object(P.b)(i),c=[{before:a.a.createElement(s.a,null),text:X("vkui_edu_copy_link"),onClick:function(){Object(p.a)(o),re(X("vkui_edu_link_copied"))}}];se.canManage&&(Z&&c.push({before:a.a.createElement(u.a,null),text:X("vkui_common_edit"),onClick:function(){return function(e){oe(k.j.SCHOOL_ARTICLES_EDITOR,{schoolId:n,edit:"".concat(n,"_").concat(e)})}(r)}}),c.push({mode:"destructive",before:a.a.createElement(Ae,null),text:X("vkui_edu_delete"),onClick:function(){return function(e){te("education.deleteSchoolArticle",{group_id:n,article_id:e}).then((function(){be(ge.filter((function(t){return t.id!==e}))),Object(D.a)({event_type:"delete",article_id:e})})).catch(ne)}(r)}})),$(e,c)},je=function(e){oe(k.j.SCHOOL_ARTICLES,{schoolId:n,articleId:e})},Te=function(){var e=ge.find((function(e){return e.id===Q}));e&&Object(D.a)({event_type:"close",article_id:e.id}),ce()},Ie=function(){oe(k.j.SCHOOL_ARTICLES_EDITOR,{schoolId:n,edit:"".concat(n,"_0")})};return Object(r.useEffect)((function(){if(Q){var e=ge.find((function(e){return e.id===Q}));e&&ae().then((function(t){var n=Object(C.d)(e.view_url,t);Object(D.a)({event_type:"open",article_id:e.id}),ee(a.a.createElement(j.a,{title:e.title,onClose:Te},a.a.createElement(T.a,{src:n})))}))}}),[Q,ge]),a.a.createElement(i.T,{id:t,className:Object(i.Lb)("SchoolArticles","SchoolArticles--".concat(K))},a.a.createElement(x.a,{isLoaded:pe,delay:R.F},(function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement(v.a,{left:Y&&a.a.createElement(i.V,{onClick:ce}),separator:Z,right:pe&&e&&(null==se?void 0:se.canManage)&&Z&&a.a.createElement(i.W,{onClick:Ie},a.a.createElement(l.a,null))},X("vkui_edu_articles")),a.a.createElement(b.a,null,a.a.createElement(g.a,{isLoaded:pe&&e,error:me,customSpinner:a.a.createElement(B.a,{activePanel:t})},a.a.createElement(N.a,{schoolId:n}),a.a.createElement(i.C,null,a.a.createElement(_.a,{canLoad:ve,isFetching:he,customSpinner:a.a.createElement(M.a,{component:a.a.createElement(L.a,null),itemsCount:3,top:null,inBorders:!1}),onLoadMore:Ce},pe&&Ee&&a.a.createElement(E.a,{className:"SchoolArticles__search",value:Oe,onChange:we,onFiltersClick:Se}),!he&&0===ye&&(Ee?a.a.createElement(i.v,null,X("vkui_common_nothing_found")):a.a.createElement(i.cb,{icon:a.a.createElement(d.a,null)},X("vkui_edu_school_articles_empty_placeholder"))),ye>0&&ge.map((function(e){return a.a.createElement(S,{key:e.id,article:e,showActions:ke,onShow:je,emptyIcon:a.a.createElement(d.a,null)})})))))))})))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));var r,a,i=n(16),o=(n(1112),n(114)),c=n(368),s=n(272),u=n(22),l=n(36),d=n(71),f=n(65),p=Object.create(null),h=function(){return p},m=Object.create(null),v=function(){function e(e,t){var n=this;this.policies=e,this.group=t,this.data=Object.create(null),this.rootIds=Object.create(null),this.refs=Object.create(null),this.getFieldValue=function(e,t){return Object(u.F)(Object(u.C)(e)?n.get(e.__ref,t):e&&e[t])},this.canRead=function(e){return Object(u.C)(e)?n.has(e.__ref):"object"==typeof e},this.toReference=function(e,t){if("string"==typeof e)return Object(u.E)(e);if(Object(u.C)(e))return e;var r=n.policies.identify(e)[0];if(r){var a=Object(u.E)(r);return t&&n.merge(r,e),a}}}return e.prototype.toObject=function(){return Object(i.a)({},this.data)},e.prototype.has=function(e){return void 0!==this.lookup(e,!0)},e.prototype.get=function(e,t){if(this.group.depend(e,t),f.c.call(this.data,e)){var n=this.data[e];if(n&&f.c.call(n,t))return n[t]}return"__typename"===t&&f.c.call(this.policies.rootTypenamesById,e)?this.policies.rootTypenamesById[e]:this instanceof _?this.parent.get(e,t):void 0},e.prototype.lookup=function(e,t){return t&&this.group.depend(e,"__exists"),f.c.call(this.data,e)?this.data[e]:this instanceof _?this.parent.lookup(e,t):this.policies.rootTypenamesById[e]?Object.create(null):void 0},e.prototype.merge=function(e,t){var n=this,r=this.lookup(e),a=new u.b(y).merge(r,t);if(this.data[e]=a,a!==r&&(delete this.refs[e],this.group.caching)){var i=Object.create(null);r||(i.__exists=1),Object.keys(t).forEach((function(e){if(!r||r[e]!==a[e]){i[e]=1;var t=Object(f.b)(e);t===e||n.policies.hasKeyArgs(a.__typename,t)||(i[t]=1),void 0!==a[e]||n instanceof _||delete a[e]}})),Object.keys(i).forEach((function(t){return n.group.dirty(e,t)}))}},e.prototype.modify=function(e,t){var n=this,r=this.lookup(e);if(r){var a=Object.create(null),o=!1,c=!0,s={DELETE:p,INVALIDATE:m,isReference:u.C,toReference:this.toReference,canRead:this.canRead,readField:function(t,r){return n.policies.readField("string"==typeof t?{fieldName:t,from:r||Object(u.E)(e)}:t,{store:n})}};if(Object.keys(r).forEach((function(l){var d=Object(f.b)(l),v=r[l];if(void 0!==v){var g="function"==typeof t?t:t[l]||t[d];if(g){var b=g===h?p:g(Object(u.F)(v),Object(i.a)(Object(i.a)({},s),{fieldName:d,storeFieldName:l,storage:n.getStorage(e,l)}));b===m?n.group.dirty(e,l):(b===p&&(b=void 0),b!==v&&(a[l]=b,o=!0,v=b))}void 0!==v&&(c=!1)}})),o)return this.merge(e,a),c&&(this instanceof _?this.data[e]=void 0:delete this.data[e],this.group.dirty(e,"__exists")),!0}return!1},e.prototype.delete=function(e,t,n){var r,a=this.lookup(e);if(a){var i=this.getFieldValue(a,"__typename"),o=t&&n?this.policies.getStoreFieldName({typename:i,fieldName:t,args:n}):t;return this.modify(e,o?((r={})[o]=h,r):h)}return!1},e.prototype.evict=function(e){var t=!1;return e.id&&(f.c.call(this.data,e.id)&&(t=this.delete(e.id,e.fieldName,e.args)),this instanceof _&&(t=this.parent.evict(e)||t),(e.fieldName||t)&&this.group.dirty(e.id,e.fieldName||"__exists")),t},e.prototype.clear=function(){this.replace(null)},e.prototype.extract=function(){var e=this,t=this.toObject(),n=[];return this.getRootIdSet().forEach((function(t){f.c.call(e.policies.rootTypenamesById,t)||n.push(t)})),n.length&&(t.__META={extraRootIds:n.sort()}),t},e.prototype.replace=function(e){var t=this;if(Object.keys(this.data).forEach((function(n){e&&f.c.call(e,n)||t.delete(n)})),e){var n=e.__META,r=Object(i.f)(e,["__META"]);Object.keys(r).forEach((function(e){t.merge(e,r[e])})),n&&n.extraRootIds.forEach(this.retain,this)}},e.prototype.retain=function(e){return this.rootIds[e]=(this.rootIds[e]||0)+1},e.prototype.release=function(e){if(this.rootIds[e]>0){var t=--this.rootIds[e];return t||delete this.rootIds[e],t}return 0},e.prototype.getRootIdSet=function(e){return void 0===e&&(e=new Set),Object.keys(this.rootIds).forEach(e.add,e),this instanceof _?this.parent.getRootIdSet(e):Object.keys(this.policies.rootTypenamesById).forEach(e.add,e),e},e.prototype.gc=function(){var e=this,t=this.getRootIdSet(),n=this.toObject();t.forEach((function(r){f.c.call(n,r)&&(Object.keys(e.findChildRefIds(r)).forEach(t.add,t),delete n[r])}));var r=Object.keys(n);if(r.length){for(var a=this;a instanceof _;)a=a.parent;r.forEach((function(e){return a.delete(e)}))}return r},e.prototype.findChildRefIds=function(e){if(!f.c.call(this.refs,e)){var t=this.refs[e]=Object.create(null),n=new Set([this.data[e]]),r=function(e){return null!==e&&"object"==typeof e};n.forEach((function(e){Object(u.C)(e)?t[e.__ref]=!0:r(e)&&Object.values(e).filter(r).forEach(n.add,n)}))}return this.refs[e]},e.prototype.makeCacheKey=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.group.keyMaker.lookupArray(e)},e}(),g=function(){function e(e){this.caching=e,this.d=null,this.keyMaker=new o.a(u.h),this.d=e?Object(o.b)():null}return e.prototype.depend=function(e,t){if(this.d){this.d(b(e,t));var n=Object(f.b)(t);n!==t&&this.d(b(e,n))}},e.prototype.dirty=function(e,t){this.d&&this.d.dirty(b(e,t))},e}();function b(e,t){return t+"#"+e}r=v||(v={}),a=function(e){function t(t){var n=t.policies,r=t.resultCaching,a=void 0===r||r,i=t.seed,c=e.call(this,n,new g(a))||this;return c.storageTrie=new o.a(u.h),c.sharedLayerGroup=new g(a),i&&c.replace(i),c}return Object(i.c)(t,e),t.prototype.addLayer=function(e,t){return new _(e,this,t,this.sharedLayerGroup)},t.prototype.removeLayer=function(){return this},t.prototype.getStorage=function(){return this.storageTrie.lookupArray(arguments)},t}(r),r.Root=a;var _=function(e){function t(t,n,r,a){var i=e.call(this,n.policies,a)||this;return i.id=t,i.parent=n,i.replay=r,i.group=a,r(i),i}return Object(i.c)(t,e),t.prototype.addLayer=function(e,n){return new t(e,this,n,this.group)},t.prototype.removeLayer=function(e){var t=this,n=this.parent.removeLayer(e);return e===this.id?(this.group.caching&&Object.keys(this.data).forEach((function(e){t.data[e]!==n.lookup(e)&&t.delete(e)})),n):n===this.parent?this:n.addLayer(this.id,this.replay)},t.prototype.toObject=function(){return Object(i.a)(Object(i.a)({},this.parent.toObject()),this.data)},t.prototype.findChildRefIds=function(t){var n=this.parent.findChildRefIds(t);return f.c.call(this.data,t)?Object(i.a)(Object(i.a)({},n),e.prototype.findChildRefIds.call(this,t)):n},t.prototype.getStorage=function(){for(var e=this.parent;e.parent;)e=e.parent;return e.getStorage.apply(e,arguments)},t}(v);function y(e,t,n){var r=e[n],a=t[n];return Object(d.a)(r,a)?r:a}function E(e){return!!(e instanceof v&&e.group.caching)}function O(e,t){return new s.a(e.message,t.path.slice(),t.query,t.clientOnly,t.variables)}var w=function(){function e(e){var t=this;this.config=e,this.executeSelectionSet=Object(o.c)((function(e){return t.execSelectionSetImpl(e)}),{keyArgs:function(e){return[e.selectionSet,e.objectOrReference,e.context]},makeCacheKey:function(e,t,n){if(E(n.store))return n.store.makeCacheKey(e,Object(u.C)(t)?t.__ref:t,n.varString)}}),this.knownResults=new WeakMap,this.executeSubSelectedArray=Object(o.c)((function(e){return t.execSubSelectedArrayImpl(e)}),{makeCacheKey:function(e){var t=e.field,n=e.array,r=e.context;if(E(r.store))return r.store.makeCacheKey(t,n,r.varString)}}),this.config=Object(i.a)({addTypename:!0},e)}return e.prototype.diffQueryAgainstStore=function(e){var t=e.store,n=e.query,r=e.rootId,a=void 0===r?"ROOT_QUERY":r,o=e.variables,c=e.returnPartialData,s=void 0===c||c,l=this.config.cache.policies;o=Object(i.a)(Object(i.a)({},Object(u.m)(Object(u.t)(n))),o);var d=this.executeSelectionSet({selectionSet:Object(u.q)(n).selectionSet,objectOrReference:Object(u.E)(a),context:{store:t,query:n,policies:l,variables:o,varString:JSON.stringify(o),fragmentMap:Object(u.k)(Object(u.n)(n)),path:[],clientOnly:!1}}),f=d.missing&&d.missing.length>0;if(f&&!s)throw d.missing[0];return{result:d.result,missing:d.missing,complete:!f}},e.prototype.isFresh=function(e,t,n,r){if(E(r.store)&&this.knownResults.get(e)===n){var a=this.executeSelectionSet.peek(n,t,r);if(a&&e===a.result)return!0}return!1},e.prototype.execSelectionSetImpl=function(e){var t=this,n=e.selectionSet,r=e.objectOrReference,a=e.context;if(Object(u.C)(r)&&!a.policies.rootTypenamesById[r.__ref]&&!a.store.has(r.__ref))return{result:{},missing:[O(new l.a(4),a)]};var i=a.variables,o=a.policies,c=a.store,s=[],d={result:null},f=c.getFieldValue(r,"__typename");function p(){return d.missing||(d.missing=[])}function h(e){var t;return e.missing&&(t=p()).push.apply(t,e.missing),e.result}this.config.addTypename&&"string"==typeof f&&!o.rootIdsByTypename[f]&&s.push({__typename:f});var m=new Set(n.selections);return m.forEach((function(e){var n;if(Object(u.L)(e,i))if(Object(u.z)(e)){var c=o.readField({fieldName:e.name.value,field:e,variables:a.variables,from:r},a),d=Object(u.K)(e);a.path.push(d);var v=a.clientOnly;a.clientOnly=v||!(!e.directives||!e.directives.some((function(e){return"client"===e.name.value}))),void 0===c?u.d.added(e)||p().push(O(new l.a(5),a)):Array.isArray(c)?c=h(t.executeSubSelectedArray({field:e,array:c,context:a})):e.selectionSet&&null!=c&&(c=h(t.executeSelectionSet({selectionSet:e.selectionSet,objectOrReference:c,context:a}))),void 0!==c&&s.push(((n={})[d]=c,n)),a.clientOnly=v,Object(l.b)(a.path.pop()===d)}else{var g=Object(u.o)(e,a.fragmentMap);g&&o.fragmentMatches(g,f)&&g.selectionSet.selections.forEach(m.add,m)}})),d.result=Object(u.H)(s),this.knownResults.set(d.result,n),d},e.prototype.execSubSelectedArrayImpl=function(e){var t,n=this,r=e.field,a=e.array,i=e.context;function o(e,n){return e.missing&&(t=t||[]).push.apply(t,e.missing),Object(l.b)(i.path.pop()===n),e.result}return r.selectionSet&&(a=a.filter(i.store.canRead)),{result:a=a.map((function(e,t){return null===e?null:(i.path.push(t),Array.isArray(e)?o(n.executeSubSelectedArray({field:r,array:e,context:i}),t):r.selectionSet?o(n.executeSelectionSet({selectionSet:r.selectionSet,objectOrReference:e,context:i}),t):(Object(l.b)(i.path.pop()===t),e))})),missing:t}},e}();var C=function(){function e(e,t){this.cache=e,this.reader=t}return e.prototype.writeToStore=function(e){var t=e.query,n=e.result,r=e.dataId,a=e.store,o=e.variables,c=Object(u.r)(t),s=Object(f.d)();o=Object(i.a)(Object(i.a)({},Object(u.m)(c)),o);var d=this.processSelectionSet({result:n||Object.create(null),dataId:r,selectionSet:c.selectionSet,mergeTree:{map:new Map},context:{store:a,written:Object.create(null),merge:function(e,t){return s.merge(e,t)},variables:o,varString:JSON.stringify(o),fragmentMap:Object(u.k)(Object(u.n)(t))}});if(!Object(u.C)(d))throw new l.a(7);return a.retain(d.__ref),d},e.prototype.processSelectionSet=function(e){var t=this,n=e.dataId,r=e.result,a=e.selectionSet,i=e.context,o=e.mergeTree,c=this.cache.policies,s=c.identify(r,a,i.fragmentMap),d=s[0],f=s[1];if("string"==typeof(n=n||d)){var p=i.written[n]||(i.written[n]=[]),h=Object(u.E)(n);if(p.indexOf(a)>=0)return h;if(p.push(a),this.reader&&this.reader.isFresh(r,h,a,i))return h}var m=Object.create(null);f&&(m=i.merge(m,f));var v=n&&c.rootTypenamesById[n]||Object(u.v)(r,a,i.fragmentMap)||n&&i.store.get(n,"__typename");"string"==typeof v&&(m.__typename=v);var g=new Set(a.selections);if(g.forEach((function(e){var n;if(Object(u.L)(e,i.variables))if(Object(u.z)(e)){var a=Object(u.K)(e),s=r[a];if(void 0!==s){var d=c.getStoreFieldName({typename:v,fieldName:e.name.value,field:e,variables:i.variables}),f=A(o,d),p=t.processFieldValue(s,e,i,f),h=e.selectionSet&&i.store.getFieldValue(p,"__typename")||void 0,b=c.getMergeFunction(v,e.name.value,h);b?f.info={field:e,typename:v,merge:b}:k(o,d),m=i.merge(m,((n={})[d]=p,n))}else if(c.usingPossibleTypes&&!Object(u.y)(["defer","client"],e))throw new l.a(8)}else{var _=Object(u.o)(e,i.fragmentMap);_&&c.fragmentMatches(_,v,r,i.variables)&&_.selectionSet.selections.forEach(g.add,g)}})),"string"==typeof n){var b=Object(u.E)(n);return o.map.size&&(m=this.applyMerges(o,b,m,i)),i.store.merge(n,m),b}return m},e.prototype.processFieldValue=function(e,t,n,r){var a=this;return t.selectionSet&&null!==e?Array.isArray(e)?e.map((function(e,i){var o=a.processFieldValue(e,t,n,A(r,i));return k(r,i),o})):this.processSelectionSet({result:e,selectionSet:t.selectionSet,context:n,mergeTree:r}):e},e.prototype.applyMerges=function(e,t,n,r,a){var o,c=this;if(e.map.size&&!Object(u.C)(n)){var s,d=Array.isArray(n)||!Object(u.C)(t)&&!Object(f.f)(t)?void 0:t,p=n;d&&!a&&(a=[Object(u.C)(d)?d.__ref:d]);var h=function(e,t){return Array.isArray(e)?"number"==typeof t?e[t]:void 0:r.store.getFieldValue(e,String(t))};e.map.forEach((function(e,t){a&&a.push(t);var n=h(d,t),i=h(p,t),o=c.applyMerges(e,n,i,r,a);o!==i&&(s=s||new Map).set(t,o),a&&Object(l.b)(a.pop()===t)})),s&&(n=Array.isArray(p)?p.slice(0):Object(i.a)({},p),s.forEach((function(e,t){n[t]=e})))}return e.info?this.cache.policies.runMergeFunction(t,n,e.info,r,a&&(o=r.store).getStorage.apply(o,a)):n},e}(),S=[];function A(e,t){var n=e.map;return n.has(t)||n.set(t,S.pop()||{map:new Map}),n.get(t)}function k(e,t){var n=e.map,r=n.get(t);!r||r.info||r.map.size||(S.push(r),n.delete(t))}new Set;var j=n(201),T=n(318),I={dataIdFromObject:T.b,addTypename:!0,resultCaching:!0,typePolicies:{}},P=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return n.watches=new Set,n.typenameDocumentCache=new Map,n.makeVar=j.c,n.txCount=0,n.maybeBroadcastWatch=Object(o.c)((function(e,t){return n.broadcastWatch.call(n,e,!!t)}),{makeCacheKey:function(e){var t=e.optimistic?n.optimisticData:n.data;if(E(t)){var r=e.optimistic,a=e.rootId,i=e.variables;return t.makeCacheKey(e.query,e.callback,JSON.stringify({optimistic:r,rootId:a,variables:i}))}}}),n.watchDep=Object(o.b)(),n.config=Object(i.a)(Object(i.a)({},I),t),n.addTypename=!!n.config.addTypename,n.policies=new T.a({cache:n,dataIdFromObject:n.config.dataIdFromObject,possibleTypes:n.config.possibleTypes,typePolicies:n.config.typePolicies}),n.data=new v.Root({policies:n.policies,resultCaching:n.config.resultCaching}),n.optimisticData=n.data,n.storeWriter=new C(n,n.storeReader=new w({cache:n,addTypename:n.addTypename})),n}return Object(i.c)(t,e),t.prototype.restore=function(e){return e&&this.data.replace(e),this},t.prototype.extract=function(e){return void 0===e&&(e=!1),(e?this.optimisticData:this.data).extract()},t.prototype.read=function(e){var t=e.returnPartialData,n=void 0!==t&&t;try{return this.storeReader.diffQueryAgainstStore({store:e.optimistic?this.optimisticData:this.data,query:e.query,variables:e.variables,rootId:e.rootId,config:this.config,returnPartialData:n}).result||null}catch(e){if(e instanceof s.a)return null;throw e}},t.prototype.write=function(e){try{return++this.txCount,this.storeWriter.writeToStore({store:this.data,query:e.query,result:e.result,dataId:e.dataId,variables:e.variables})}finally{--this.txCount||!1===e.broadcast||this.broadcastWatches()}},t.prototype.modify=function(e){if(f.c.call(e,"id")&&!e.id)return!1;var t=e.optimistic?this.optimisticData:this.data;try{return++this.txCount,t.modify(e.id||"ROOT_QUERY",e.fields)}finally{--this.txCount||!1===e.broadcast||this.broadcastWatches()}},t.prototype.diff=function(e){return this.storeReader.diffQueryAgainstStore({store:e.optimistic?this.optimisticData:this.data,rootId:e.id||"ROOT_QUERY",query:e.query,variables:e.variables,returnPartialData:e.returnPartialData,config:this.config})},t.prototype.watch=function(e){var t=this;return this.watches.size||Object(j.d)(this),this.watches.add(e),e.immediate&&this.maybeBroadcastWatch(e),function(){t.watches.delete(e)&&!t.watches.size&&Object(j.b)(t),t.watchDep.dirty(e),t.maybeBroadcastWatch.forget(e)}},t.prototype.gc=function(){return this.optimisticData.gc()},t.prototype.retain=function(e,t){return(t?this.optimisticData:this.data).retain(e)},t.prototype.release=function(e,t){return(t?this.optimisticData:this.data).release(e)},t.prototype.identify=function(e){return Object(u.C)(e)?e.__ref:this.policies.identify(e)[0]},t.prototype.evict=function(e){if(!e.id){if(f.c.call(e,"id"))return!1;e=Object(i.a)(Object(i.a)({},e),{id:"ROOT_QUERY"})}try{return++this.txCount,this.optimisticData.evict(e)}finally{--this.txCount||!1===e.broadcast||this.broadcastWatches()}},t.prototype.reset=function(){return this.data.clear(),this.optimisticData=this.data,this.broadcastWatches(),Promise.resolve()},t.prototype.removeOptimistic=function(e){var t=this.optimisticData.removeLayer(e);t!==this.optimisticData&&(this.optimisticData=t,this.broadcastWatches())},t.prototype.performTransaction=function(e,t){var n=this,r=function(t){var r=n,a=r.data,i=r.optimisticData;++n.txCount,t&&(n.data=n.optimisticData=t);try{e(n)}finally{--n.txCount,n.data=a,n.optimisticData=i}},a=!1;"string"==typeof t?(this.optimisticData=this.optimisticData.addLayer(t,r),a=!0):null===t?r(this.data):r(),this.broadcastWatches(a)},t.prototype.transformDocument=function(e){if(this.addTypename){var t=this.typenameDocumentCache.get(e);return t||(t=Object(u.d)(e),this.typenameDocumentCache.set(e,t),this.typenameDocumentCache.set(t,t)),t}return e},t.prototype.broadcastWatches=function(e){var t=this;this.txCount||this.watches.forEach((function(n){return t.maybeBroadcastWatch(n,e)}))},t.prototype.broadcastWatch=function(e,t){this.watchDep.dirty(e),this.watchDep(e);var n=this.diff({query:e.query,variables:e.variables,optimistic:e.optimistic});e.optimistic&&t&&(n.fromOptimisticTransaction=!0),e.callback(n)},t}(c.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return he}));var r=n(21),a=n.n(r),i=n(7),o=n.n(i),c=n(0),s=n.n(c),u=n(1),l=n(26),d=n.n(l),f=n(106),p=n(1356),h=n(1357),m=n(32),v=n(46),g=n(5),b=n(586),_=n(23),y=n(29),E=n(111),O=n(183),w=n(587),C=n(389),S=n(85),A=n(131),k=n(63),j=n(321),T=n(172),I=n(144),P=n(127),D=n(208),N=n(253),x=n(94),R=n(142),M=n(1346),L=n(1347),B=n(1348),F=n(1349),H=(n(1056),n(207)),V=n(1345),U=n(630),z=n(28),G=n(243),W=n(109),q=n.n(W),K=n(165),Y=n.n(K),Z=n(2),Q=n.n(Z),J=n(24),X=n(55),$=n(58);function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){Q()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ne=n(588),re=n(211),ae=n(143),ie=Object(u.Qb)((function(e){var t,n=e.document,r=e.canManage,a=e.retryUpload,i=e.cancelUpload,l=e.onShow,d=n.data.owner_id,p=n.data.id,h=g.d.getState().page,v=Object(u.Ob)().viewWidth,b=!Object(E.a)(v),_=Object(u.Pb)(),y=Object(c.useState)(n.data.title),w=o()(y,2),C=w[0],S=w[1],k=Object(A.b)().fileList.getState,j=Object(ae.a)().showActionSheet,T=Object($.a)().showSnackbarInfo,I=Object(m.a)().go,P=Object(z.a)(),D=Object(c.useMemo)((function(){return k(p)}),[k,p]),N=Object(f.c)(),x=N.getLangKey,R=N.formatFileSize,W=N.getLangDate,K=R(n.data.size),Z=W(n.data.date),Q=null===(t=n.data.ext)||void 0===t?void 0:t.toUpperCase(),ee="idle"!==k(p),ie=function(e){var t=Object(A.b)(),n=t.ownerId,r=t.fileList,a=Object(J.b)().apiRequest,i=Object(X.a)().showAlertConfirm,o=Object($.a)().showSnackbarError,s=Object(f.c)().getLangKey,u="idle"!==r.getState(e),l=Object(c.useCallback)((function(e,t){var n=r.get(e);null!=n&&r.set(e,te(te({},n),{},{data:te(te({},n.data),{},{title:t})}))}),[r.get,r.set]),d=Object(c.useCallback)(function(){var t=Y()(q.a.mark((function t(r){var i,c;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,u){t.next=4;break}return t.next=4,a("docs.edit",{owner_id:n,doc_id:e,title:r});case 4:return i=g.d.getState(),c=i.params,Object(O.a)({event_type:"doc_edit",doc_id:e,section_document_type:c.schoolId?"public_documents":"private_documents",school_id:c.schoolId}),t.abrupt("return",l(e,r));case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",o(s("vkui_edu_docs_file_edit_error")));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),[e,u,n,a,l,o]),p=Object(c.useCallback)((function(){return new Promise((function(e){i({title:s("vkui_edu_docs_document_delete_title"),text:s("vkui_edu_docs_document_delete_text"),actionText:s("vkui_edu_docs_document_delete_button"),callback:function(){return e()}})}))}),[i]);return{editDocument:d,deleteDocument:Object(c.useCallback)(Y()(q.a.mark((function t(){var i,c;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p();case 3:if(u){t.next=6;break}return t.next=6,a("docs.delete",{owner_id:n,doc_id:e});case 6:return i=g.d.getState(),c=i.params,Object(O.a)({event_type:"doc_delete",doc_id:e,section_document_type:c.schoolId?"public_documents":"private_documents",school_id:c.schoolId}),t.abrupt("return",r.setState(e,"delete"));case 11:return t.prev=11,t.t0=t.catch(0),t.abrupt("return",o(s("vkui_edu_docs_delete_error")));case 14:case"end":return t.stop()}}),t,null,[[0,11]])}))),[e,n,u,a,r.setState,p,o,s])}}(p),oe=ie.editDocument,ce=ie.deleteDocument;Object(c.useEffect)((function(){return S(e.document.data.title)}),[e.document.data.title]);var se=function(){var t=g.d.buildUrl(h,{schoolId:e.schoolId,documentId:n.data.id,ownerId:n.data.owner_id}),r=Object(re.b)("".concat(t));Object(V.a)(r),T(x("vkui_edu_link_copied"))},ue=Object(c.useCallback)((function(){P(Object(G.b)({documentTitle:C,documentId:p,onEdit:oe})),I(g.i.DOCUMENT_EDIT)}),[C,p,I,P,oe]),le=_===u.H?M.a:L.a,de=Object(c.useCallback)((function(e){e.stopPropagation(),e.preventDefault();var t=ee?[{mode:"destructive",text:x("vkui_edu_docs_upload_cancel"),before:s.a.createElement(le,{width:24,height:24}),onClick:ce}]:[{text:x("vkui_edu_copy_link"),before:s.a.createElement(B.a,null),onClick:se}];r&&t.push({text:x("vkui_edu_docs_rename"),before:s.a.createElement(F.a,{width:24,height:24}),onClick:ue},{mode:"destructive",text:x("vkui_edu_docs_delete"),before:s.a.createElement(le,{width:24,height:24}),onClick:ce}),j(e.currentTarget,t)}),[j,x,ce,ue,se,ee,r]);return s.a.createElement(u.pb,{onClick:function(e){switch("idle"!==D&&e.preventDefault(),D){case"error":case"stopped":a(p);break;case"queue":ce();break;case"uploading":i(p);break;case"idle":l(d,p)}},before:s.a.createElement(U.a,{docData:n.data,file:n.file,state:D}),description:s.a.createElement("div",{className:"DocumentCell__description"},(null==D||"idle"===D)&&s.a.createElement(s.a.Fragment,null,Q," · ",Z," · ",K),("queue"===D||"stopped"===D)&&s.a.createElement(s.a.Fragment,null,x("vkui_edu_docs_upload_waiting")," · ",K),"uploading"===D&&s.a.createElement(s.a.Fragment,null,Q," · ",K),"error"===D&&s.a.createElement("span",{className:"DocumentCell__uploadError"},x("vkui_edu_docs_upload_error")),b&&s.a.createElement(s.a.Fragment,null,s.a.createElement("br",null),x(Object(ne.a)(e.document.data.type)))),after:s.a.createElement(H.a,{onClick:de})},C)}),{viewWidth:!0}),oe=n(135),ce=n(129),se=n(163),ue=n(75),le=n(84),de=n(271),fe=n(206),pe=function(e){var t=e.panelId,n=e.viewWidth,r=e.filterId,i=e.hideFiltersButton,l=void 0!==i&&i,M=e.hideBackButton,L=void 0!==M&&M,B=Object(f.c)().getLangKey,F=Object(ue.a)().showPopout,H=Object(J.b)().apiRequest,V=Object($.a)().showSnackbarError,U=Object(le.a)().getAsyncAccessToken,z=Object(m.a)(),G=z.go,W=z.back,q=!L&&Object(E.a)(n),K=Object(y.a)(n),Y=Object(A.b)(),Z=Y.canManage,Q=Y.fileList,X=Object(C.a)(),ee=X.showUploadModal,te=X.retryUpload,ne=X.cancelUpload,re=Object(de.a)(),ae=re.documentId,pe=re.ownerId,he=re.schoolId,me=Object(c.useState)(!1),ve=o()(me,2),ge=ve[0],be=ve[1],_e=Object(fe.a)().getOrgKeyWithPrefix,ye=Object(S.a)(r),Ee=ye.searchFiltersValues,Oe=ye.setFiltersChangeHandler,we=Object(w.a)({get:"docs.get",search:"education.searchDocs"},Ee,Q,he),Ce=we.isLoaded,Se=we.isFetching,Ae=we.globalError,ke=we.canLoadMore,je=we.getItems,Te=we.itemsCount,Ie=we.hasAnyItems,Pe=we.search,De=we.handleSearch,Ne=we.handleLoadMore,xe=function(){be(!1),W()},Re=[].concat(a()(Q.localList),a()(Q.storedList)),Me=function(){return G(g.i.SEARCH_FILTERS)};Oe((function(){return Ce&&je({reset:!0})}));var Le=function(e){var r=e.data,a=!b.a.includes(r.ext),i=Object(y.a)(n)?v.d.vkcom_host:v.d.mvk_host,o="https://".concat(i,"/doc").concat(r.owner_id,"_").concat(r.id);Object(O.a)({event_type:"doc_open",doc_id:r.id,section_document_type:he?"public_documents":"private_documents",school_id:he}),a?location.href=r.url||o:(G(t,{schoolId:he,ownerId:r.owner_id,documentId:r.id}),U().then((function(e){var t="".concat(o,"?_sak_embed_at=").concat(e);F(s.a.createElement(oe.a,{title:r.title,onClose:xe},s.a.createElement(ce.a,{src:t})))})))},Be=function(e,t){var n=Re.find((function(e){return e.data.id===t}));if(n)be(!0),Le(n);else{var r={docs:"".concat(e,"_").concat(t)};H("docs.getById",r).then((function(e){if(!e.length)throw new Error("");var t=o()(e,1)[0];be(!0),Le({data:t})})).catch((function(){V(B("vkui_edu_docs_show_error")),xe()}))}},Fe=function(e,t){var n=d.a.isWebView();if(n){var r=Re.find((function(e){return e.data.id===t}));if(!r||!r.data.url)return;if(n){var a={action:"showFile",payload:{url:r.data.url}};return Object(O.a)({event_type:"doc_open",doc_id:r.data.id,section_document_type:he?"public_documents":"private_documents",school_id:he}),void d.a.send("VKWebAppCustomMessage",a)}var i=window.open();i.opener=null,i.location.href=r.data.url}else Be(e,t)};Object(c.useEffect)((function(){ae&&pe&&!ge&&(be(!0),Be(pe,ae))}),[]);var He=Ie||Te>0||!!Re.length;return s.a.createElement(u.T,{id:t},s.a.createElement(P.a,{left:q&&s.a.createElement(u.V,{onClick:xe}),right:Z&&s.a.createElement(u.W,{onClick:ee},s.a.createElement(p.a,null)),separator:K},B(he?_e("docs"):"vkui_edu_my_docs")),s.a.createElement(I.a,{delay:_.F,isLoaded:Ce},(function(e){return s.a.createElement(R.a,null,s.a.createElement(x.a,{isLoaded:e&&Ce,customSpinner:s.a.createElement(T.a,{activePanel:t}),error:Ae},s.a.createElement(se.a,{schoolId:he}),s.a.createElement(u.C,null,s.a.createElement(N.a,{canLoad:ke,isFetching:Se,customSpinner:s.a.createElement(k.a,{itemsCount:4,component:s.a.createElement(j.a,null),inBorders:!1,top:null}),onLoadMore:Ne},Ce&&e&&He&&s.a.createElement(D.a,{value:Pe,onChange:De,onFiltersClick:!l&&Me}),!Se&&0===Re.length&&(He?s.a.createElement(u.v,null,B("vkui_common_nothing_found")):s.a.createElement(u.cb,{icon:s.a.createElement(h.a,null),action:Z&&s.a.createElement(u.j,{size:"l",mode:"tertiary",onClick:ee},B("vkui_edu_docs_placeholder_button"))},B("vkui_edu_docs_placeholder_text"))),He&&Re.map((function(e){return s.a.createElement(ie,{key:e.data.id,document:e,schoolId:he,canManage:Z,retryUpload:te,cancelUpload:ne,onShow:Fe})}))))))})))},he=Object(u.Qb)(Object(c.memo)(pe),{viewWidth:!0})},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(0),a=n.n(r),i=n(1),o=n(17),c=n.n(o),s=n(18),u=n(10),l=n(19),d="cancel_16",f=!1;function p(){f||(Object(u.a)(new c.a({id:d,viewBox:"0 0 16 16",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="cancel_16"><g fill="none" fill-rule="evenodd"><path d="M0 0h16v16H0z" /><path d="M8 6.727l3.464-3.463a.9.9 0 111.272 1.272L9.273 8l3.463 3.464a.9.9 0 11-1.272 1.272L8 9.273l-3.464 3.463a.9.9 0 11-1.272-1.272L6.727 8 3.264 4.536a.9.9 0 011.272-1.272L8 6.727z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),f=!0)}var h=function(e){return Object(u.b)((function(){p()}),[]),a.a.createElement(l.a,Object(s.assign)({},e,{viewBox:"0 0 16 16",id:d,width:isNaN(e.width)?16:+e.width,height:isNaN(e.height)?16:+e.height}))};h.mountIcon=p;var m=h,v=!1;function g(){v||(Object(u.a)(new c.a({id:"replay_24",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="replay_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path d="M12 5a8 8 0 11-8 8 1 1 0 012 0 6 6 0 106-6v3.096a.4.4 0 01-.67.296L7.044 6.493a.667.667 0 010-.986l4.288-3.899a.4.4 0 01.669.296V5z" fill="currentColor" /></g></symbol>'})),v=!0)}var b=function(e){return Object(u.b)((function(){g()}),[]),a.a.createElement(l.a,Object(s.assign)({},e,{viewBox:"0 0 24 24",id:"replay_24",width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};b.mountIcon=g;var _=b,y=(n(1058),function(e){return a.a.createElement("div",{className:Object(i.Lb)("ThumbButtons__overlay",{"ThumbButtons__overlay--showed":"idle"!==e.state})},"queue"===e.state&&a.a.createElement("div",{className:"ThumbButtons__circle"},a.a.createElement(m,null)),"uploading"===e.state&&a.a.createElement("div",{className:"ThumbButtons__circle"},a.a.createElement(m,null),a.a.createElement("div",{className:"ThumbButtons__overlayContent"},a.a.createElement("svg",{className:"ThumbButtons__spinner",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{d:"M16 30.25C23.8701 30.25 30.25 23.8701 30.25 16C30.25 8.12994 23.8701 1.75 16 1.75C8.12994 1.75 1.75 8.12994 1.75 16",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})))),("error"===e.state||"stopped"===e.state)&&a.a.createElement("div",{className:"ThumbButtons__circle"},a.a.createElement("div",{className:"ThumbButtons__reload"},a.a.createElement(_,null))))})},function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var r=n(6),a=n.n(r),i=n(21),o=n.n(i),c=n(0),s=n.n(c),u=n(1),l=n(106),d=n(7),f=n.n(d),p=n(130),h=n(24);var m=n(85),v=n(149),g=n(469),b=n(271),_=function(){var e=Object(l.c)().getLangKey,t=Object(b.a)(),n=t.ownerId,r=t.schoolId,i=function(e){var t=Object(h.b)().apiRequest,n=Object(c.useState)([]),r=f()(n,2),a=r[0],i=r[1],o=Object(c.useCallback)((function(n){return t("docs.getTypes",{owner_id:e},{signal:n}).then((function(e){return e&&i(e.items),e}))}),[e]);return{docTypes:a,getDocTypes:Object(p.a)({requestFn:o,deps:[e]})}}(r?-r:n),d=i.docTypes,_=i.getDocTypes,y=Object(m.a)(g.a),E=y.searchFilters,O=y.updateFilterValues,w=y.clearSearchFilters,C=[{type:"select",name:"type",defaultValue:"0",label:e("vkui_edu_documents_search_options_document_type"),options:[{value:"0",label:e("vkui_edu_search_sort_default")}].concat(o()(d.map((function(e){return{value:e.id.toString(),label:e.name}}))))}];return Object(c.useEffect)((function(){_()}),[]),Object(c.useEffect)((function(){return w}),[]),Object(m.b)(g.a,d.length>0?C:null),E?s.a.createElement(u.C,null,s.a.createElement(u.D,null,e("vkui_edu_documents_search_options")),s.a.createElement(v.a,a()({},E,{onChange:O}))):null}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(0),a=n.n(r),i=n(1),o=n(106),c=(n(1033),function(e){var t=e.chat,n=e.onClick,r=e.className,c=e.avatarSize,s=void 0===c?72:c,u=Object(o.c)(),l=u.getLangNumeric,d=u.getLangKey,f="".concat(l(t.members_count,"vkui_edu_subscribers_count")," · ").concat(d("vkui_edu_chat_type_channel")),p=l(t.members_count,"vkui_edu_members_count");return a.a.createElement(i.pb,{className:Object(i.Lb)(r,"ChatSimpleCell"),onClick:function(){n&&n(t)},before:a.a.createElement(i.h,{size:s,src:t.photo}),description:t.is_channel?f:p},a.a.createElement(i.Fb,{level:"3",className:"ChatSimpleCell__title",weight:"regular"},t.title))}),s=Object(r.memo)(c),u=(n(1034),{s:56,l:72}),l=function(e){var t=e.items,n=e.onClick,r=e.className,o=e.size,c=void 0===o?"l":o;return a.a.createElement(i.M,{className:Object(i.Lb)(r,"ChatList")},t.map((function(e){return a.a.createElement(s,{className:"ChatList__item--size_".concat(c),key:e.invite_link,chat:e,onClick:n,avatarSize:u[c]})})))},d=Object(r.memo)(l)},function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var r,a=n(6),i=n.n(a),o=n(7),c=n.n(o),s=(n(1067),n(0)),u=n.n(s),l=n(1),d=n(1335),f=n(106),p=n(269),h=n(240),m=function(e){return u.a.createElement("svg",i()({width:"48",height:"48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),u.a.createElement("path",{d:"M12.9 33.4c-.9 1.3-2.2 1.3-3 2.6-.9.9 0 2.1-.5 3-.4.9-.4 1.7.5 2.6.8.8 2.5 0 4.7.8 2.1.9 3 1.7 4.7.9 1.7-.9.8-3.9-.4-5.2-1.3-1.2-1.3-2.5-2.6-4.7-1.3-2.1-2.6-1.3-3.4 0zM29.6 36.4c.4-3 .4-4.3 2.1-4.3l2.6.5c2.1.4 2.6.4 3 2.1.4 1.7.8.4 1.3 2.6.4 2.1-1.7 2.6-3.5 3.8-1.7 1.3-2.5 3.9-5.1 2.2-2.6-1.7-.9-3.9-.4-6.9zM23.6 12.4c-1.3 0-2.2.5-3.9 1.7-.3 0-.8.3-.8 1.3 0 1.3 3 3.5 4.2 3.5 1.3 0 5.2-3 5.2-3.9 0-.9-3.4-2.6-4.7-2.6z",fill:"#FFB300"}),u.a.createElement("path",{d:"M38.7 36c-1-.7-.6-2.4-1.5-3.2.9-5.8-1.8-10.9-5-14.1-2.6-2.7-1.7-5.4-1.7-7.7 0-3.7-1.5-7.6-6.1-7.6-4.9 0-6.2 4.1-6.3 6.4-.1 5.6 1.1 7-2.1 11.2-3.9 4.7-4.4 9.5-3.6 12-.4.5-1 1-2 1.5-2.8 1.2-.7 3.3-1.5 4.7l-.3 1.3c0 1.3 1 2.4 2.8 2.2 2.6-.2 4.9 1.6 6.4 1.6 1.3 0 2.4-.8 2.9-1.8 2.3-.6 5.2-.5 7.6.1a3 3 0 002.9 2c2.7 0 3.3-3.2 6.5-4.3a2.6 2.6 0 001.7-2.5c0-.7-.2-1.3-.7-1.7zM23 18.2c-.5 0-1-.4-1.7-1-.9-.6-1.8-1-1.8-1.7 0-.5.6-.6 1.5-1.2.9-.5 1.2-1.1 2.1-1.1 1 0 1.2.4 2.4 1 1.3.5 2.1.7 2.1 1.3 0 .6-1.3 1-2 1.5-1 .6-1.6 1.2-2.6 1.2zM26 9.2c1.5.2 1.7 2.9 1 4.2l-.7-.2c.3-1 .3-2.5-.7-2.6-.7 0-1.1.8-1.2 1.6l-.9-.2c.1-1.6 1.1-3 2.5-2.8zm-5.8.6c1.1-.3 1.8 1 1.8 2.4l-.5.4c-.1-.6-.4-1.6-1-1.4-.7.2-.6 1.9-.2 2.2l-.5.3c-.8-1.2-.8-3.7.4-4zm-3.7 33c-3.3-1.6-4.5-1.2-5.1-1.2-1.4 0-1.8-1-1.3-2 .4-.8.3-1.6.2-2.3-.2-1-.2-1.3.8-1.8 1.4-.6 2-1.3 2.5-1.9 1.3-1.6 2.6 1 3.7 3.2.7 1.4 2 2.2 2.5 3.8.4 1.5-1.2 3-3.3 2.2zm12-3.3c-2.4 1.2-5.4 1.7-7.7.6a6 6 0 00-1.4-2.3c1-.2 1.6-1.4.8-2.5-.9-1.2-2.7-2.1-4.5-3.5-1.7-1.3-2.2-4.5 0-8.1-1 3.1-.4 6 .2 7 .1-1.8.2-4.6 2.6-8 1.1-1.7 1.1-4 1.2-5.4l1 .8c.8.5 1.5 1.2 2.4 1.2 1.4 0 2.2-.8 3.2-1.5l1.6-.9c.9 4.3 4.6 9.4 4.8 12.3.9-1.8-.2-6-.2-6 1.4 2.2 1.5 4 1.6 6.3 1 .4 2 1.5 2.2 2.9h-.4c-.3-1.7-4.5-4-4.9-1-2 .3-1.3 3.5-1.7 5.6-.2 1-.5 1.7-.8 2.5zm8.3 0c-1.7.6-2.8 2-3.6 2.9-1.5 1.6-3.5.8-3.7-.7-.2-1.7.6-2.6 1-4.4.3-1.7 0-4.3.7-4.6.5 3 3.5 1.7 4.2 1 1.2 0 1.3.3 1.5 1.4.2.6.4 1.2 1 1.8.7.8.5 2-1 2.6zM23 17.2c-1.1 0-2-.8-2.6-1.3-.4-.3 0-.9.4-.6.7.6 1.3 1.2 2.2 1.2 1 0 2-1 3.2-1.4.4-.2.7.5.2.7-1.2.4-2.1 1.4-3.4 1.4z",fill:"#000"}))},v=function(e){return u.a.createElement("svg",i()({width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),u.a.createElement("path",{d:"M9.64291 25.0713C9.00005 26.0356 8.03577 26.0356 7.39291 26.9999C6.76813 27.6426 7.39291 28.6071 7.07148 29.25C6.75005 29.8928 6.75005 30.5357 7.39291 31.1786C8.03577 31.8214 9.32148 31.1786 10.9286 31.8214C12.5358 32.4643 13.1786 33.1071 14.4643 32.4643C15.7501 31.8214 15.1072 29.5714 14.1429 28.6071C13.1786 27.6428 13.1786 26.6784 12.2143 25.0713C11.2501 23.4641 10.2858 24.107 9.64291 25.0713Z",fill:"#FFB300"}),u.a.createElement("path",{d:"M22.1784 27.3214C22.4999 25.0714 22.4999 24.1071 23.7856 24.1071C23.8927 24.1071 24.4284 24.1714 25.7141 24.4286C27.3213 24.75 27.6427 24.75 27.9641 26.0357C28.2856 27.3214 28.607 26.3571 28.9284 27.9643C29.2499 29.5714 27.6427 29.8928 26.357 30.8571C25.0713 31.8214 24.4284 33.75 22.4999 32.4643C20.5713 31.1786 21.857 29.5714 22.1784 27.3214Z",fill:"#FFB300"}),u.a.createElement("path",{d:"M17.6784 9.32141C16.7141 9.32141 16.0713 9.64284 14.7856 10.6071C14.5714 10.6071 14.1429 10.8 14.1429 11.5714C14.1429 12.5357 16.3927 14.1428 17.357 14.1428C18.3213 14.1428 21.2141 11.8928 21.2141 11.25C21.2141 10.6071 18.6427 9.32141 17.6784 9.32141Z",fill:"#FFB300"}),u.a.createElement("path",{d:"M29.0329 27.063C28.3257 26.4896 28.6009 25.2231 27.8667 24.5983C28.5777 20.2718 26.5849 16.4584 24.2089 14.0143C22.2147 11.9636 22.8576 9.96812 22.8576 8.24141C22.8576 5.48227 21.7249 2.57141 18.2933 2.57141C14.6251 2.57141 13.6197 5.63141 13.5837 7.37741C13.4963 11.5714 14.431 12.6617 11.9766 15.714C9.08885 19.305 8.66328 22.887 9.31514 24.7873C9.01043 25.1421 8.599 25.5356 7.83014 25.8608C5.70614 26.7866 7.26314 28.3358 6.67557 29.4351C6.50843 29.7475 6.42871 30.0741 6.42871 30.3866C6.42871 31.3508 7.195 32.1853 8.58743 32.0606C10.4659 31.8934 12.199 33.2241 13.3201 33.2241C14.3101 33.2241 15.1227 32.661 15.5007 31.8857C17.2711 31.4498 19.4569 31.5051 21.226 31.9615C21.5436 32.85 22.405 33.4286 23.3629 33.4286C25.4599 33.4286 25.8636 31.0513 28.2691 30.2464C29.1357 29.9571 29.5716 29.1163 29.5716 28.3333C29.5716 27.8318 29.3929 27.3548 29.0329 27.063ZM17.2724 13.608C16.8623 13.608 16.5229 13.2763 15.9867 12.8777C15.3079 12.3737 14.6174 12.0831 14.6251 11.5534C14.6251 11.1896 15.1124 11.0777 15.7424 10.6778C16.4187 10.2497 16.6823 9.81512 17.3483 9.81512C18.0297 9.81512 18.2354 10.1597 19.1611 10.5596C20.0714 10.9543 20.7053 11.1086 20.7053 11.5534C20.7053 12.0098 19.7526 12.3364 19.2164 12.6694C18.4283 13.1554 18.0233 13.608 17.2724 13.608V13.608ZM19.4131 6.90298C20.5471 7.08427 20.6744 9.07712 20.1319 10.0581L19.6754 9.8717C19.912 9.17355 19.9081 8.02412 19.1161 7.95084C18.6134 7.90455 18.2894 8.56798 18.22 9.13627C18.0233 9.05398 17.8086 8.99484 17.5476 8.97298C17.6273 7.78627 18.3936 6.7397 19.4131 6.90298V6.90298ZM15.0379 7.32855C15.907 7.11255 16.42 8.12313 16.4239 9.17355L16.0253 9.41784C15.9713 8.97684 15.7746 8.26455 15.2809 8.41627C14.7524 8.58084 14.8386 9.8087 15.133 10.0607L14.7396 10.2793C14.1996 9.37027 14.2009 7.53684 15.0379 7.32855V7.32855ZM12.3186 32.0696C9.79471 30.9214 8.93714 31.1824 8.455 31.1824C7.456 31.1824 7.12943 30.438 7.50485 29.7334C7.82371 29.1356 7.72471 28.5094 7.64628 28.0067C7.52543 27.2366 7.50357 26.9858 8.26085 26.6541C9.30871 26.2093 9.77414 25.6371 10.1213 25.209C11.0959 24.0043 12.0794 25.8994 12.8856 27.5876C13.4089 28.6817 14.4387 29.2358 14.7563 30.4483C15.0481 31.5681 13.8434 32.7638 12.3186 32.0696V32.0696ZM21.3019 29.6601C19.5224 30.5254 17.2557 30.9227 15.5599 30.0446C15.3091 29.3207 14.908 28.8527 14.476 28.3821C15.169 28.1996 15.6833 27.3356 15.0674 26.4677C14.4104 25.5407 13.0681 24.894 11.7117 23.8448C10.4427 22.8638 10.0416 20.4454 11.7696 17.7428C10.9274 20.1368 11.4199 22.3431 11.8429 22.9744C11.9303 21.7041 12.0306 19.5827 13.7663 17.0408C14.6419 15.7577 14.6547 14.0631 14.674 13.0037L15.4711 13.5488C16.0574 13.9821 16.5486 14.4591 17.2531 14.4591C18.2946 14.4591 18.8706 13.86 19.6729 13.3624C19.9866 13.1696 20.461 12.9741 20.8596 12.7028C21.5281 15.8863 24.2976 19.7151 24.4531 21.8957C25.0973 20.5688 24.2706 17.3777 24.2706 17.3777C25.3531 19.0298 25.4393 20.4068 25.4869 22.0963C26.2441 22.4061 27.0567 23.2136 27.1313 24.2768L26.8163 24.2408C26.6543 23.0593 23.4644 21.3236 23.1777 23.5478C21.6477 23.7806 22.2044 26.2041 21.8959 27.7753C21.7544 28.494 21.4921 29.0623 21.3019 29.6601V29.6601ZM27.5324 29.6074C26.266 30.096 25.411 31.1336 24.8234 31.7777C23.692 33.0197 22.1954 32.4244 22.036 31.2621C21.8676 30.0201 22.4989 29.3426 22.7714 27.9527C23.0196 26.6837 22.7419 24.7307 23.3256 24.5224C23.7049 26.7763 25.9819 25.8287 26.5013 25.2141C27.346 25.2141 27.4167 25.4996 27.6057 26.2903C27.724 26.7853 27.8873 27.2018 28.3489 27.6917C28.8863 28.2664 28.7217 29.1484 27.5324 29.6074ZM17.2467 12.8854C16.4097 12.8854 15.7836 12.3287 15.2744 11.8967C15.0134 11.6768 15.3387 11.2706 15.5997 11.4917C16.0973 11.9134 16.5987 12.3596 17.2467 12.3596C18.0271 12.3596 18.715 11.6923 19.6471 11.3246C19.9647 11.1998 20.146 11.691 19.831 11.8157C18.9259 12.1718 18.1994 12.8854 17.2467 12.8854V12.8854Z",fill:"black"}))},g=n(20),b=n(47),_=n(121),y=n(125);!function(e){e.DEB="deb",e.RPM="rpm"}(r||(r={}));var E=function(e){var t=e.size,n=void 0===t?"m":t,a=e.platform,o=void 0===a?g.c.WINDOWS:a,E=e.className,O=Object(f.c)().getLangKey,w=Object(s.useState)(r.DEB),C=c()(w,2),S=C[0],A=C[1],k=Object(s.useState)(g.a.X86),j=c()(k,2),T=j[0],I=j[1],P=Object(s.useMemo)((function(){return"m"===n}),[n]),D=Object(s.useMemo)((function(){return o===g.c.LINUX}),[o]),N=Object(s.useMemo)((function(){return P?D?36:28:48}),[P,D]),x=Object(s.useMemo)((function(){switch(o){case g.c.MAC:return h.a;case g.c.LINUX:return P?v:m;default:return p.a}}),[o,P]),R=Object(s.useMemo)((function(){switch(o){case g.c.MAC:return"vkui_edu_landing_platforms_download_desktop_macos";case g.c.LINUX:return"vkui_edu_landing_platforms_download_desktop_linux";default:return"vkui_edu_landing_platforms_download_desktop_windows"}}),[o]),M=Object(s.useMemo)((function(){switch(o){case g.c.MAC:return"vkui_edu_landing_platforms_download_macos_restriction";case g.c.LINUX:return"vkui_edu_download_linux_system_requirements";default:return"vkui_edu_landing_platforms_download_windows_restriction"}}),[o]),L=Object(s.useMemo)((function(){switch(o){case g.c.MAC:return"vkui_edu_landing_platforms_download_macos_link";case g.c.LINUX:return"vkui_edu_landing_platforms_download_linux_link";default:return"vkui_edu_landing_platforms_download_windows_link"}}),[o]),B=Object(s.useMemo)((function(){switch(o){case g.c.MAC:return b.f[g.c.MAC];case g.c.LINUX:return b.f[g.c.LINUX][S][T];default:return b.f[g.c.WINDOWS]}}),[o,S,T]),F=Object(s.useCallback)((function(){Object(_.c)(o)}),[o]),H=Object(s.useMemo)((function(){return P&&!D?"a":"div"}),[P,D]),V=Object(s.useMemo)((function(){return P&&!D?{href:B,target:"_blank",rel:"noreferrer",onClick:function(){F(),Object(y.a)(o)}}:{}}),[P,D,o]),U=function(e){A(e.currentTarget.value)},z=function(e){I(e.currentTarget.value)};return u.a.createElement(H,i()({className:Object(l.Lb)("DesktopAppButton",E,{"DesktopAppButton--m":P&&!D,"DesktopAppButton--m-linux":P&&D,"DesktopAppButton--l":!P})},V),u.a.createElement("span",{className:Object(l.Lb)("DesktopAppButton__logo--".concat(n),"DesktopAppButton__logo--".concat(o),"DesktopAppButton__logo--".concat(n,"-").concat(o))},u.a.createElement(x,{width:N,height:N})),u.a.createElement("span",{className:Object(l.Lb)("DesktopAppButton__text",{"DesktopAppButton__text--m":P&&!D,"DesktopAppButton__text--m-linux":P&&D,"DesktopAppButton__text--l":!P})},u.a.createElement("span",{className:"DesktopAppButton__title"},O(R)),u.a.createElement("span",{className:Object(l.Lb)("DesktopAppButton__description",{"DesktopAppButton__description--m-linux":P&&D})},O(M)),o===g.c.LINUX&&u.a.createElement("div",{className:Object(l.Lb)("DesktopAppButton__form",{"DesktopAppButton__form--m-linux":P&&D})},u.a.createElement(l.w,{top:O("vkui_edu_linux_type")},u.a.createElement(l.gb,{name:"type",value:r.DEB,onChange:U,defaultChecked:!0},O("vkui_edu_linux_deb_type_name")),u.a.createElement(l.gb,{name:"type",value:r.RPM,onChange:U},O("vkui_edu_linux_rpm_type_name"))),u.a.createElement(l.w,{top:O("vkui_edu_arch_os")},u.a.createElement(l.gb,{name:"arch",value:g.a.X86,onChange:z,defaultChecked:!0},O("vkui_edu_32_bit_os")),u.a.createElement(l.gb,{name:"arch",value:g.a.X64,onChange:z},O("vkui_edu_64_bit_os")))),(!P||D)&&u.a.createElement("a",{className:"DesktopAppButton__link",href:B,onClick:function(){F(),Object(y.a)(o)}},u.a.createElement(l.Db,{weight:"medium"},O(L)))),P&&!D&&u.a.createElement(u.a.Fragment,null,u.a.createElement("span",{className:"DesktopAppButton__separator"}),u.a.createElement("span",{className:"DesktopAppButton__icon"},u.a.createElement(d.a,null))))};E.displayName="DesktopAppButton"},function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var r=n(6),a=n.n(r),i=n(12),o=n.n(i),c=n(0),s=n.n(c),u=n(149),l=n(113),d=n(38),f=n(96),p=n(82),h=n(64),m=n(107),v=Object(m.b)(["root"],[],["grades","grades-filters"]),g=(Object(m.a)(v),["onChange"]),b=function(e){var t=e.onChange,n=o()(e,g),r=Object(d.c)(f.b),i=Object(d.c)(f.c),m=Object(d.c)(h.f);Object(c.useEffect)((function(){m&&Object(l.a)({schoolId:m,params:{role:p.a.TEACHER}})}),[m]);return r?s.a.createElement(u.a,a()({"data-test-id":v.root,id:"school_classes",values:i,filters:r,onChange:function(e){Object(l.e)(e),t&&t()}},n)):null},_=Object(c.memo)(b)},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=n.n(r),i=(n(974),n(975),n(14)),o=function(){return a.a.createElement("div",{className:"StatusLineBlockSkeleton"},a.a.createElement(i.a,{width:"30px",height:"18px",className:"StatusLineBlockSkeleton__line"}),a.a.createElement(i.a,{width:"50px"}))},c=function(e){var t=e.top;return a.a.createElement("div",{className:"SchoolDashboardCountersSkeleton"},t&&a.a.createElement("div",{className:"SchoolDashboardCountersSkeleton__top"},t),a.a.createElement("div",{className:"SchoolDashboardCountersSkeleton__content"},a.a.createElement(o,null),a.a.createElement(o,null),a.a.createElement(o,null),a.a.createElement(o,null),a.a.createElement(o,null)))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return g}));var r=n(44),a=n(37);var i=n(480),o=n(662),c=n.n(o),s=n(663),u=n.n(s),l=n(175),d=n.n(l),f=n(664),p=n.n(f),h=n(241),m=n(119),v=function(e,t){var n=t.long;return e.toLocaleDateString("ru",{month:"long",day:"numeric",weekday:n?"long":"short"})},g=function(e){var t=e.events,n=e.from,o=e.to,s=e.schoolId,l=e.profileSchools,f=e.userId,v=function(e,t){Object(a.a)(1,arguments);var n=e||{},i=Object(r.a)(n.start),o=Object(r.a)(n.end),c=o.getTime();if(!(i.getTime()<=c))throw new RangeError("Invalid interval");var s=[],u=i;u.setHours(0,0,0,0);var l=t&&"step"in t?Number(t.step):1;if(l<1||isNaN(l))throw new RangeError("`options.step` must be a number greater than 1");for(;u.getTime()<=c;)s.push(Object(r.a)(u)),u.setDate(u.getDate()+l),u.setHours(0,0,0,0);return s}({start:n,end:o}).map((function(e){return e.getTime()})),g=l.map((function(e){return e.id})),b=l.flatMap((function(e){return e.grades})).map((function(e){return e.id})),_=p()(s||l?t.filter((function(e){var t=e.school_id,n=e.grade_ids;return!(!d()(t)&&!d()(s)&&t!==s)&&(!(!d()(t)&&g&&!g.includes(t))&&!(null!=n&&n.length&&b&&f!==Object(m.e)(e)&&!Object(h.intersection)(b,n).length))})):t,(function(e){return e.uid+e.recurrence_id}));return{dayEventsMap:u()(c()(_,(function(e){return Object(i.a)(e.from).getTime()})),(function(e){return e.sort((function(e,t){var n=e.from.getTime()-t.from.getTime();return 0!==n?n:e.title.localeCompare(t.title)}))})),days:v,events:_,isEmpty:!_.length}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c}));var r=n(0),a=n.n(r);function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var o=Object(r.createContext)({}),c=function(e){var t=e.children,n=i(e,["children"]),c=Object(r.useMemo)((function(){return n}),[n.classPrefix,n.globalClasses]);return a.a.createElement(o.Provider,{value:c},t)}},function(e,t,n){"use strict";var r=n(30),a=n.n(r),i=n(31),o=n.n(i),c=n(11),s=n.n(c),u=n(33),l=n.n(u),d=n(39),f=n.n(d),p=n(34),h=n.n(p),m=n(2),v=n.n(m),g=n(378),b=n.n(g),_=n(0),y=n.n(_),E=n(1),O=n(361),w=(n(878),{"./ReCaptchaPopout.css":{ReCaptchaPopout__in:"ReCaptchaPopout__in-common-skq0ym","ReCaptchaPopout--ios":"ReCaptchaPopout--ios-common-skq0ym","animation-ios-alert-intro":"animation-ios-alert-intro-common-skq0ym","ReCaptchaPopout--android":"ReCaptchaPopout--android-common-skq0ym","animation-android-alert-intro":"animation-android-alert-intro-common-skq0ym","ReCaptchaPopout__container-wrap":"ReCaptchaPopout__container-wrap-common-skq0ym",ReCaptchaPopout__container:"ReCaptchaPopout__container-common-skq0ym"}});function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f()(this,n)}}var S=function(){return window.grecaptcha};var A=function(e){l()(n,e);var t=C(n);function n(){var e;a()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),v()(s()(e),"state",{loading:!0}),v()(s()(e),"containerRef",y.a.createRef()),v()(s()(e),"onCancel",(function(){console.log("[ReCaptchaPopout] onCancel"),e.props.onSubmit("")})),v()(s()(e),"onSubmit",(function(t){console.log("[ReCaptchaPopout] onSubmit with hash = ".concat(t)),e.props.onSubmit(t)})),e}return o()(n,[{key:"componentDidMount",value:function(){var e=this;(S()?Promise.resolve(S()):new Promise((function(e){var t="onReCaptchaLoad__".concat("education");window[t]=function(){return e(S())};var n=document.createElement("script");n.src="https://www.google.com/recaptcha/api.js?onload=".concat(t,"&render=explicit"),n.setAttribute("async","async"),n.setAttribute("defer","defer"),document.body.appendChild(n)}))).then((function(t){e.setState({loading:!1}),e.renderReCaptcha(t)}))}},{key:"renderReCaptcha",value:function(e){var t=this;try{e.render(this.containerRef.current,{sitekey:this.props.sitekey,lang:this.props.lang_code,callback:function(e){setTimeout((function(){return t.onSubmit(e)}),320)}})}catch(e){throw new Error(e)}}},{key:"render",value:function(){return y.a.createElement(E.eb,{onClick:this.onCancel,className:b()(Object(E.Mb)("ReCaptchaPopout"),w,{autoResolveMultipleImports:!0,handleMissingStyleName:"ignore"})},y.a.createElement("div",{className:"ReCaptchaPopout__in-common-skq0ym"},y.a.createElement("div",{className:"ReCaptchaPopout__container-wrap-common-skq0ym"},y.a.createElement("div",{className:"ReCaptchaPopout__container-common-skq0ym",ref:this.containerRef})),this.state.loading&&y.a.createElement("div",null,y.a.createElement(E.tb,{size:"medium"}))))}}]),n}(_.Component);t.a=Object(O.a)(A)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(n(0)),a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function i(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function c(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}function s(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var i=arguments[t],o=0,c=i.length;o<c;o++,a++)r[a]=i[o];return r}var u=function(e){var t=e.split(".");t.splice(-1,1);var n=t.length?".":"";return t.join(n)},l=function(e){return e.includes(".")},d=function(e,t){for(var n=function(e){var t=e.split("."),n="";return t.map((function(e,t){return n+=t?"."+e:e}))}(t),r=s(e),a=null;r.length&&n.length;){var i=r.shift(),o=n[0];if(i.name===o){if(n.length>1){r.push.apply(r,i.children),n.shift();continue}if(1===n.length){a=i;break}}}return a},f=function(e){var t=e.name,n=e.params,r=e.encodeParams,a=e.decodeParams,i=c(e,["name","params","encodeParams","decodeParams"]);this.name=t,this.params=n||[],this.parent=null,this.data=i,this.children=[],this.encodeParams=r,this.decodeParams=a},p=function(e){var t=this;this.errorLogger=function(e,t){return console.error(e,t)},this.contains=function(e){t.traverse(e)},this.getParentNode=function(e){var n=u(e),r=t.getByPath(n);if(r)return r},this.add=function(e,n){var r=e instanceof f?e:new f(e),a=null;t.contains((function(e){n&&e&&e.name===n.name?a=e:n||(a=t.root)})),a?(a.children=a.children||[],a.children.push(r),r.parent=a):t.errorLogger("Cannot add node to a non-existent parent")},this.getByPath=function(e){var n=d(t.root.children,e);return n||t.errorLogger("No such route in a tree"),n},this.findByName=function(e){var n;return t.contains((function(t){t.name===e&&(n=t)})),n||t.errorLogger("No such route in a tree"),n},this.remove=function(e){var n,r=null,a=null;return t.contains((function(t){t.name===e&&(r=t)})),r?void 0===(n=t.findIndex(r.children,e))?t.errorLogger("Node to remove does not exist"):a=r.children.splice(n,1):t.errorLogger("Parent does not exist"),a},this.traverse=function(e){!function t(n){for(var r=0,a=n.children?n.children.length:0;r<a;r++)t(n.children[r]);e(n)}(t.root)},this.findIndex=function(e,t){return e.findIndex((function(e){return e.name===t}))},this.getRouteNode=function(e){void 0===e&&(e="");var n=l(e)?e:"",r=n?t.getByPath(n):t.findByName(e);return r instanceof f||t.errorLogger("Route is not registered",n),r},e.errorLogger&&(this.errorLogger=e.errorLogger),this.root=new f({name:"",params:"",children:[]})};function h(e,t){void 0===t&&(t={});var n=function(e){var t=[],n=function(e,r){if(Array.isArray(e))e.forEach((function(e){return n(e)}));else if(e){var a=function(e){e.path;var t=c(e,["path"]);return o({},t)}(e);if(r)r.children.push(a);else if(l(e.name)){var i=function(e,t){var n=u(t);return d(e,n)}(t,e.name);i&&(i.children=i.children||[],i.children.push(a))}else t.push(a);Array.isArray(e.children)&&e.children.forEach((function(t){return n(t,e)}))}};return n(e),t}(e),r=new p(t);return function e(t,n){if(Array.isArray(t))t.forEach((function(t){return e(t)}));else if(t){var a=new f(t);n?r.add(a,n):r.add(a),Array.isArray(t.children)&&t.children.forEach((function(t){return e(t,a)}))}}(n),r}var m=function(e){return("object"==typeof e||"function"==typeof e)&&null!==e},v=function(e,t,n){if(void 0===t&&(t=""),!e||"object"!=typeof e)return"";var r=n.escape||escape;return Object.entries(e).filter((function(e){return!!e[1]})).map((function(e){var a=e[0],i=e[1];return"object"==typeof i?v(i,t+(a+"."),n):(null==n?void 0:n.escapeParams)?[t+a,i].map(r).join("="):[t+a,i].join("=")})).filter((function(e){return e})).join("&")},g=function(e,t,n){if(void 0===n&&(n=!1),!e||!t)return!1;for(var r=0,a=Object.keys(t);r<a.length;r++){var i=a[r],o=e[i],c=t[i],s=m(o)&&m(c);if(s&&!g(o,c)||!s&&(n?o!==c:o!=c))return!1}return!0},b=function(e,t,n){if(void 0===n&&(n=!0),!e||!t)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(var i=0,o=r;i<o.length;i++){var c=o[i],s=e[c],u=t[c],l=m(s)&&m(u);if(l&&!b(s,u)||!l&&(n?s!==u:s!=u))return!1}return!0},_=function(e,t,n){return window.history.pushState(e,t,n)},y=function(e,t){var n=document.ontouchstart?"touchstart":"click",r=function(e,t){return function(n){if(1===function(e){return null===(e=e||window.event).which?e.button:e.which}(n)&&!(n.metaKey||n.ctrlKey||n.shiftKey||n.defaultPrevented)){for(var r,a,i=n.target;i&&"A"!==i.nodeName&&"BUTTON"!==i.nodeName;)i=i.parentNode;if(i&&"A"===i.nodeName&&!i.hasAttribute("download")&&"external"!==i.getAttribute("rel")&&(r=i.href,(a=function(e){return e.replace("http://","").replace("https://","").split("/")[0]})(window.location.href)===a(r))&&!i.target&&i.href){var o=e(i.href);if(o){n.preventDefault();var c=o.modal||o.page,s=o.params||{};t(c,s)}}}}}(e,t);return document.addEventListener(n,r,!1),function(){window.removeEventListener(n,r)}},E=function(e,t){return(function(e){try{return encodeURI(decodeURI(e))}catch(t){return e}}((e.preservePath?window.location.pathname:"")+e.preserveHash?window.location.pathname.replace(new RegExp("^"),""):window.location.hash.replace(new RegExp("^#"),""))||"/")+(t||window.location.search)},O={defaultRoute:"default",base:"",subRouteKey:"subRoute",routeKey:"route",rootPage:void 0,preserveHash:!1,preservePath:!0},w=function(){function e(e,t){var n=this;this.history=[],this.routes=[],this.subscribers=[],this.routeHandlerCollection={},this.config=O,this.isStarted=!1,this.errorLogger=function(e){return console.log(e)},this.trees={},this.modalSequence=0,this.initialize=function(){var e=(n.routes[0]||{}).name,t=n.config.defaultRoute||e;n.defaultState={page:t,modal:null,params:{},meta:{source:"default"}};var r=n.buildState(E(n.config));n.browserSessionId=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),n.setState(r)},this.buildHistory=function(){var e=n.getState(),t=e.page,r=e.params,a=n.config,i=a.rootPage,c=a.fillStack;if(t!==i&&c){var u=n.makeState(i,null,"default").newState;n.history.push(u),n.updateUrl(u)}for(var l=s(n.getActiveNodes(t));l.length;){var d=l.shift(),f={page:d.name,modal:null,params:n.getActiveParams([d],r),meta:{source:"popstate"}};n.history.push(f),c&&n.updateUrl(f)}var p=n.history[n.history.length-1];b(o(o({},p),{meta:null}),o(o({},e),{meta:null}))&&(n.history.pop(),c&&n.updateUrl(e,{replace:!0}))},this.onPopState=function(e){var t,r,a=null===(t=e.state)||void 0===t?void 0:t.counter,i=n.history[0],c=n.history[a],s=c||i,u=(null===(r=e.state)||void 0===r?void 0:r.browserSessionId)===n.browserSessionId;void 0!==a&&u?n.replaceState(o(o({},s),{meta:{source:"popstate"}})):!c&&n.config.fillStack&&(n.replaceState(o(o({},i),{meta:{source:"popstate"}})),n.updateUrl(o(o({},i),{counter:0}),{replace:!0}))},this.broadCastState=function(){var e=n.getState(),t=n.getPrevState(),r=n.getHistory();n.subscribers.forEach((function(n){return n({toState:e,fromState:t,history:r})}))},this.done=function(e){e.redirect&&n.go(e.redirect.name,{},{replace:!0})},this.setActiveTree=function(e){n.trees[e]?n.tree=n.trees[e]:n.errorLogger("Tree does not exist")},this.addTree=function(e,t){if(n.trees[e])n.errorLogger("Tree with such name already exists");else{var r=h(t);n.trees[e]=r}},this.removeTree=function(e){n.trees[e]?n.tree=n.trees[e]:n.errorLogger("Tree does not exist")},this.replaceState=function(e){var t=o({},n.state),r=o({},e);if(!b(t,r)){var a=n.routeHandlerCollection[r.page];n.state=r,n.prevState=t,"function"==typeof a&&a(r,t,n.done)}n.broadCastState()},this.setState=function(e){var t=o({},n.state),r=o(o({},n.state),e);if(!b(t,r)){var a=n.routeHandlerCollection[r.page];n.state=r,n.prevState=t,"function"==typeof a&&a(r,t,n.done)}n.broadCastState()},this.buildState=function(e){var t=function(e){var t={},n=e&&e.includes("?")?e.slice(e.indexOf("?")+1):"";if(!n.length)return t;for(var r=0,a=n?n.split("&"):[];r<a.length;r++){var i=a[r].split("="),o=i[0],c=i[1];if(c=c||"",o.includes(".")){var s=o.split("."),u=s.pop(),l=s.join(".");t[l]=t[l]||{},t[l][u]=c}t[o]=c}return t}(function(e,t){var n=t.useHash,r=t.hashPrefix,a=void 0===r?"":r,i=t.base,o=void 0===i?"":i,c=e.match(/^(?:http|https):\/\/(?:[0-9a-z_\-.:]+?)(?=\/)(.*)$/),s=(c?c[1]:e).match(/^(.+?)(#.+?)?(\?.+)?$/);if(!s)return"";var u=s[1],l=s[2]||"",d=s[3]||"";return decodeURI((n?l.replace(new RegExp("^#"+String(a)),""):o?u.replace(new RegExp("^"+String(o)),""):u)+d)}(e,n.config)),r=t.p,a=t.m,i=void 0===a?null:a,o=c(t,["p","m"]),s=n.tree.getRouteNode(r),u=n.defaultState,l=o;return s&&(s.decodeParams&&(l=s.decodeParams(o)),u={page:r,modal:i,params:l,meta:{source:"url"}}),u},this.subscribe=function(e){if(!n.subscribers.includes(e))return n.subscribers.push(e),n.broadCastState(),function(){return n.unsubscribe(e)};n.errorLogger("This listener is already subscribed")},this.unsubscribe=function(e){n.subscribers.includes(e)&&n.subscribers.slice(n.subscribers.indexOf(e),1)},this.removeAllSubscribers=function(){n.subscribers=[]},this.add=function(e){Array.isArray(e)?(n.routes=s(n.routes,e),e.forEach((function(e){n.tree.add(e)}))):e?n.tree.add(e):n.errorLogger("No such route in a tree")},this.remove=function(e){n.tree.remove(e)},this.buildSearch=function(e,t){void 0===t&&(t={});var r=n.makeState(e,t),a=r.newState,i=r.encodeParams,c=a.page,s=a.modal,u=a.params,l=u;i&&(l=i(u));var d=o({p:c,m:s},l),f=v(d,"",n.config),p=f.length?"?"+f:"";return""+n.config.base+p},this.buildUrl=function(e,t){return void 0===t&&(t={}),n.buildSearch(e,t)},this.buildPath=function(e,t){return void 0===t&&(t={}),n.buildSearch(e,t)},this.getActiveNodes=function(e){var t=[];if(e)for(var r=[n.tree.getRouteNode(e)];r.length;){var a=r.shift();t.push(a),a.parent&&a.parent.name&&r.push(a.parent)}return t.reverse()},this.getRequiredParams=function(e){var t=[];if(e)for(var n=[e];n.length;){var r=n.shift();r&&(r.params&&(t=t.concat(r.params)),r.parent&&n.push(r.parent))}return t},this.getActiveParams=function(e,t){for(var r={},a=s(e);a.length;){var i=a.shift();n.getRequiredParams(i).forEach((function(e){r[e]=t[e]}))}return r},this.makeState=function(e,t,r){var a,i;void 0===t&&(t={});var c=n.getState(),s=n.tree.getRouteNode(e),u=n.config.subRouteKey,l=s.data,d=s.decodeParams,f=s.encodeParams,p=n.getActiveNodes(e),h={source:r||"default"},m=o({},t);if(null===(a=null==s?void 0:s.parent)||void 0===a?void 0:a.name){var v=n.getActiveParams(p,c.params);m=o(o({},v),t)}var g={page:e,modal:null,params:m,meta:h};return(null===(i=null==s?void 0:s.data)||void 0===i?void 0:i[u])&&(g={page:c.page,params:o(o({},c.params),t),meta:h,modal:s.name}),{newState:g,routeData:l,activeNodes:p,encodeParams:f,decodeParams:d}},this.go=function(e,t,r,a){void 0===r&&(r={});var i=n.makeState(e,t,"go"),c=i.newState,s=i.routeData,u=i.encodeParams,l=i.decodeParams,d=n.history.length,f=n.history[d-2],p=b(o(o({},n.state),{meta:null}),o(o({},c),{meta:null})),h=b(f,c);if(n.state.modal||!c.modal||h?c.modal||(n.modalSequence=0):n.modalSequence=window.history.length,!p||r.firstLoad){r.replace?(n.history.pop(),n.history.push(c)):h||r.replace?n.history.pop():n.history.push(c),l&&(c.params=l(c.params)),b(n.state.params,c.params)&&(c.params=n.state.params),n.setState(c);var m=n.getPrevState();u&&(c.params=u(c.params)),s&&!1!==s.updateUrl?n.updateUrl(c,r):n.updateUrl(m,{fakeEntry:!0}),a&&a(c)}else n.broadCastState()},this.updateUrl=function(e,t,r){var a;void 0===t&&(t={}),void 0===r&&(r="");var i=n.history.length-1,c=o(o({},e),{browserSessionId:n.browserSessionId,counter:i});if(t.replace&&(c=o(o({},e),{counter:null!==(a=e.counter)&&void 0!==a?a:i,browserSessionId:n.browserSessionId})),t.fakeEntry){var s=E(n.config);_(c,r,s)}else{var u=o({p:e.page},e.params);e.modal&&(u.m=e.modal);var l=v(u,"",n.config),d=l.length?"?"+l:"",f=E(n.config,d);t.replace?function(e,t,n){window.history.replaceState(e,t,n)}(c,r,f):_(c,r,f)}},this.closeModal=function(e){var t=void 0===e?{}:e,r=t.sequence,a=void 0===r||r,i=t.cutHistory,o=void 0!==i&&i,c=n.state,s=c.modal,u=c.page,l=function(e){for(var t=n.history,r=t.pop();r.page===e&&r.modal;)r=t.pop();t.push(r),n.setState(r)};if(a)if(s&&u)if(o&&n.modalSequence){var d=n.modalSequence-window.history.length;d<0?window.history.go(d):l(u)}else l(u);else n.back();else n.back()},this.back=function(e){if((window.history.length<=2||e)&&n.history.length>0){n.history.pop();var t=n.history[n.history.length-1],r=n.getActiveNodes(t.modal||t.page),a=n.getActiveParams(r,n.state.params),i={page:t.page,modal:t.modal,params:a,meta:{source:"popstate"}};return n.setState(i),void n.updateUrl(i,{replace:!0})}window.history.back()},this.start=function(e,t,r){var a=n.getState(),i=n.config.defaultRoute,c=n.routes[0];if(n.isStarted=!0,n.removePopStateListener=function(e,t){var n=t.useHash&&!(-1===window.navigator.userAgent.indexOf("Trident"));return window.addEventListener("popstate",e),n&&window.addEventListener("hashchange",e),function(){window.removeEventListener("popstate",e),n&&window.removeEventListener("hashchange",e)}}(n.onPopState,n.config),n.removeLinkPressListener=y(n.buildState,n.go),n.buildHistory(),a&&a.page){var s=a.modal||a.page,u=a.params;n.go(s,u,{firstLoad:!0,replace:!0})}else e?n.go(e,t,o(o({},r),{replace:!0})):i?n.go(i,null,{replace:!0}):c&&c.name?n.go(c.name,null,{replace:!0}):n.errorLogger("No routes specified")},this.stop=function(){n.isStarted=!1,n.removeLinkPressListener(),n.removePopStateListener()},this.getState=function(){return n.state},this.getPrevState=function(){return n.prevState},this.isActive=function(e,t,r,a){void 0===r&&(r=!0),void 0===a&&(a=!1);var i=n.getState(),o=i.params,c=n.getActiveNodes(i.page),s=n.getActiveNodes(i.modal),u=c.concat(s).find((function(t){return t.name===e})),l=!!u,d=n.getRequiredParams(u),f=a?function(e,t){for(var n={};e.length;){var r=e.shift();n[r]=t[r]}return n}(d,t):t,p=g(o,f),h=n.makeState(e,f,i.meta.source).newState,m=b(i,h);return r?m:t&&Object.keys(t).length?m||l&&p:m||l},this.canActivate=function(e,t){n.routeHandlerCollection[e]=t},this.routes=e||[],this.config=o(o({},O),t),this.errorLogger=this.config.errorLogger?this.config.errorLogger:this.errorLogger,this.tree=h(this.routes,{errorLogger:this.errorLogger}),this.initialize()}return e.prototype.getHistory=function(){return s(this.history)},e}(),C=function(e,t){return void 0===t&&(t=O),new w(e,t)},S=r.default.createContext({}),A=function(e){function t(t){var n=e.call(this,t)||this;n.onNavigatorChange=function(e){var t=e.toState;n.setState(o({},t))};var r=n.props,a=r.routes,i=r.config,c=C(a,i),s=c.getState();return c.subscribe(n.onNavigatorChange),c.start(),n.state=o({},s),n}return i(t,e),t.prototype.render=function(){return r.default.createElement(S.Provider,{value:this.state},this.props.children)},t}(r.default.PureComponent);t.Navigator=w,t.NavigatorProvider=A,t.createNavigator=C,t.withNavigator=function(e){var t;return(t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n.prototype.render=function(){var t=o(o({},this.props),this.context);return r.default.createElement(e,o({},t))},n}(r.default.PureComponent)).contextType=S,t}},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(285);function a(e,t,n,a,i){var o=r.writeRtpDescription(e.kind,t);if(o+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":i||"active"),o+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var c=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=c;var s="msid:"+(a?a.id:"-")+" "+c+"\r\n";o+="a="+s,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),o}function i(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},a=function(e,t,n,a){var i=r(e.parameters.apt,n),o=r(t.parameters.apt,a);return i&&o&&i.name.toLowerCase()===o.name.toLowerCase()};return e.codecs.forEach((function(r){for(var i=0;i<t.codecs.length;i++){var o=t.codecs[i];if(r.name.toLowerCase()===o.name.toLowerCase()&&r.clockRate===o.clockRate){if("rtx"===r.name.toLowerCase()&&r.parameters&&o.parameters.apt&&!a(r,o,e.codecs,t.codecs))continue;(o=JSON.parse(JSON.stringify(o))).numChannels=Math.min(r.numChannels,o.numChannels),n.codecs.push(o),o.rtcpFeedback=o.rtcpFeedback.filter((function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var r=0;r<t.headerExtensions.length;r++){var a=t.headerExtensions[r];if(e.uri===a.uri){n.headerExtensions.push(a);break}}})),n}function o(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function c(e,t){var n=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return n||e.addRemoteCandidate(t),!n}function s(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}e.exports=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function u(t,n,r,a){var i=new Event("track");i.track=n,i.receiver=r,i.transceiver={receiver:r},i.streams=a,e.setTimeout((function(){t._dispatchEvent("track",i)}))}var l=function(n){var a=this,i=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){a[e]=i[e].bind(i)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw s("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var r=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var a="string"==typeof r;return a&&(r=[r]),r=r.filter((function(e){return 0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")&&-1===e.indexOf("turn:[")&&!n?(n=!0,!0):0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp")})),delete e.url,e.urls=a?r[0]:r,!!r.length}}))}(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var o=n.iceCandidatePoolSize;o>0;o--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=r.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(l.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(l.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),l.prototype.onicecandidate=null,l.prototype.onaddstream=null,l.prototype.ontrack=null,l.prototype.onremovestream=null,l.prototype.onsignalingstatechange=null,l.prototype.oniceconnectionstatechange=null,l.prototype.onconnectionstatechange=null,l.prototype.onicegatheringstatechange=null,l.prototype.onnegotiationneeded=null,l.prototype.ondatachannel=null,l.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},l.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},l.prototype.getConfiguration=function(){return this._config},l.prototype.getLocalStreams=function(){return this.localStreams},l.prototype.getRemoteStreams=function(){return this.remoteStreams},l.prototype._createTransceiver=function(e,t){var n=this.transceivers.length>0,r={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&n)r.iceTransport=this.transceivers[0].iceTransport,r.dtlsTransport=this.transceivers[0].dtlsTransport;else{var a=this._createIceAndDtlsTransports();r.iceTransport=a.iceTransport,r.dtlsTransport=a.dtlsTransport}return t||this.transceivers.push(r),r},l.prototype.addTrack=function(t,n){if(this._isClosed)throw s("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find((function(e){return e.track===t})))throw s("InvalidAccessError","Track already exists.");for(var a=0;a<this.transceivers.length;a++)this.transceivers[a].track||this.transceivers[a].kind!==t.kind||(r=this.transceivers[a]);return r||(r=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),r.track=t,r.stream=n,r.rtpSender=new e.RTCRtpSender(t,r.dtlsTransport),r.rtpSender},l.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach((function(t){n.addTrack(t,e)}));else{var r=e.clone();e.getTracks().forEach((function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",(function(e){n.enabled=e.enabled}))})),r.getTracks().forEach((function(e){n.addTrack(e,r)}))}},l.prototype.removeTrack=function(t){if(this._isClosed)throw s("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find((function(e){return e.rtpSender===t}));if(!n)throw s("InvalidAccessError","Sender was not created by this connection.");var r=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},l.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var n=t.getSenders().find((function(t){return t.track===e}));n&&t.removeTrack(n)}))},l.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},l.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},l.prototype._createIceGatherer=function(t,n){var r=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var a=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(a,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===Object.keys(e.candidate).length;a.state=n?"completed":"gathering",null!==r.transceivers[t].bufferedCandidateEvents&&r.transceivers[t].bufferedCandidateEvents.push(e)},a.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),a},l.prototype._gather=function(t,n){var a=this,i=this.transceivers[n].iceGatherer;if(!i.onlocalcandidate){var o=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,i.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),i.onlocalcandidate=function(e){if(!(a.usingBundle&&n>0)){var o=new Event("icecandidate");o.candidate={sdpMid:t,sdpMLineIndex:n};var c=e.candidate,s=!c||0===Object.keys(c).length;if(s)"new"!==i.state&&"gathering"!==i.state||(i.state="completed");else{"new"===i.state&&(i.state="gathering"),c.component=1,c.ufrag=i.getLocalParameters().usernameFragment;var u=r.writeCandidate(c);o.candidate=Object.assign(o.candidate,r.parseCandidate(u)),o.candidate.candidate=u,o.candidate.toJSON=function(){return{candidate:o.candidate.candidate,sdpMid:o.candidate.sdpMid,sdpMLineIndex:o.candidate.sdpMLineIndex,usernameFragment:o.candidate.usernameFragment}}}var l=r.getMediaSections(a._localDescription.sdp);l[o.candidate.sdpMLineIndex]+=s?"a=end-of-candidates\r\n":"a="+o.candidate.candidate+"\r\n",a._localDescription.sdp=r.getDescription(a._localDescription.sdp)+l.join("");var d=a.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==a.iceGatheringState&&(a.iceGatheringState="gathering",a._emitGatheringStateChange()),s||a._dispatchEvent("icecandidate",o),d&&(a._dispatchEvent("icecandidate",new Event("icecandidate")),a.iceGatheringState="complete",a._emitGatheringStateChange())}},e.setTimeout((function(){o.forEach((function(e){i.onlocalcandidate(e)}))}),0)}},l.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var r=new e.RTCDtlsTransport(n);return r.ondtlsstatechange=function(){t._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:r}},l.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var r=this.transceivers[e].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[e].dtlsTransport)},l.prototype._transceive=function(e,n,a){var o=i(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(o.encodings=e.sendEncodingParameters,o.rtcp={cname:r.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(o.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(o)),a&&e.rtpReceiver&&o.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?o.encodings=e.recvEncodingParameters:o.encodings=[{}],o.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(o.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(o.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(o))},l.prototype.setLocalDescription=function(e){var t,n,a=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(s("TypeError",'Unsupported type "'+e.type+'"'));if(!o("setLocalDescription",e.type,a.signalingState)||a._isClosed)return Promise.reject(s("InvalidStateError","Can not set local "+e.type+" in state "+a.signalingState));if("offer"===e.type)t=r.splitSections(e.sdp),n=t.shift(),t.forEach((function(e,t){var n=r.parseRtpParameters(e);a.transceivers[t].localCapabilities=n})),a.transceivers.forEach((function(e,t){a._gather(e.mid,t)}));else if("answer"===e.type){t=r.splitSections(a._remoteDescription.sdp),n=t.shift();var c=r.matchPrefix(n,"a=ice-lite").length>0;t.forEach((function(e,t){var o=a.transceivers[t],s=o.iceGatherer,u=o.iceTransport,l=o.dtlsTransport,d=o.localCapabilities,f=o.remoteCapabilities;if(!(r.isRejected(e)&&0===r.matchPrefix(e,"a=bundle-only").length)&&!o.rejected){var p=r.getIceParameters(e,n),h=r.getDtlsParameters(e,n);c&&(h.role="server"),a.usingBundle&&0!==t||(a._gather(o.mid,t),"new"===u.state&&u.start(s,p,c?"controlling":"controlled"),"new"===l.state&&l.start(h));var m=i(d,f);a._transceive(o,m.codecs.length>0,!1)}}))}return a._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?a._updateSignalingState("have-local-offer"):a._updateSignalingState("stable"),Promise.resolve()},l.prototype.setRemoteDescription=function(a){var l=this;if(-1===["offer","answer"].indexOf(a.type))return Promise.reject(s("TypeError",'Unsupported type "'+a.type+'"'));if(!o("setRemoteDescription",a.type,l.signalingState)||l._isClosed)return Promise.reject(s("InvalidStateError","Can not set remote "+a.type+" in state "+l.signalingState));var d={};l.remoteStreams.forEach((function(e){d[e.id]=e}));var f=[],p=r.splitSections(a.sdp),h=p.shift(),m=r.matchPrefix(h,"a=ice-lite").length>0,v=r.matchPrefix(h,"a=group:BUNDLE ").length>0;l.usingBundle=v;var g=r.matchPrefix(h,"a=ice-options:")[0];return l.canTrickleIceCandidates=!!g&&g.substr(14).split(" ").indexOf("trickle")>=0,p.forEach((function(o,s){var u=r.splitLines(o),p=r.getKind(o),g=r.isRejected(o)&&0===r.matchPrefix(o,"a=bundle-only").length,b=u[0].substr(2).split(" ")[2],_=r.getDirection(o,h),y=r.parseMsid(o),E=r.getMid(o)||r.generateIdentifier();if(g||"application"===p&&("DTLS/SCTP"===b||"UDP/DTLS/SCTP"===b))l.transceivers[s]={mid:E,kind:p,protocol:b,rejected:!0};else{var O,w,C,S,A,k,j,T,I;!g&&l.transceivers[s]&&l.transceivers[s].rejected&&(l.transceivers[s]=l._createTransceiver(p,!0));var P,D,N=r.parseRtpParameters(o);g||(P=r.getIceParameters(o,h),(D=r.getDtlsParameters(o,h)).role="client"),j=r.parseRtpEncodingParameters(o);var x=r.parseRtcpParameters(o),R=r.matchPrefix(o,"a=end-of-candidates",h).length>0,M=r.matchPrefix(o,"a=candidate:").map((function(e){return r.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===a.type||"answer"===a.type)&&!g&&v&&s>0&&l.transceivers[s]&&(l._disposeIceAndDtlsTransports(s),l.transceivers[s].iceGatherer=l.transceivers[0].iceGatherer,l.transceivers[s].iceTransport=l.transceivers[0].iceTransport,l.transceivers[s].dtlsTransport=l.transceivers[0].dtlsTransport,l.transceivers[s].rtpSender&&l.transceivers[s].rtpSender.setTransport(l.transceivers[0].dtlsTransport),l.transceivers[s].rtpReceiver&&l.transceivers[s].rtpReceiver.setTransport(l.transceivers[0].dtlsTransport)),"offer"!==a.type||g){if("answer"===a.type&&!g){w=(O=l.transceivers[s]).iceGatherer,C=O.iceTransport,S=O.dtlsTransport,A=O.rtpReceiver,k=O.sendEncodingParameters,T=O.localCapabilities,l.transceivers[s].recvEncodingParameters=j,l.transceivers[s].remoteCapabilities=N,l.transceivers[s].rtcpParameters=x,M.length&&"new"===C.state&&(!m&&!R||v&&0!==s?M.forEach((function(e){c(O.iceTransport,e)})):C.setRemoteCandidates(M)),v&&0!==s||("new"===C.state&&C.start(w,P,"controlling"),"new"===S.state&&S.start(D)),!i(O.localCapabilities,O.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&O.sendEncodingParameters[0].rtx&&delete O.sendEncodingParameters[0].rtx,l._transceive(O,"sendrecv"===_||"recvonly"===_,"sendrecv"===_||"sendonly"===_),!A||"sendrecv"!==_&&"sendonly"!==_?delete O.rtpReceiver:(I=A.track,y?(d[y.stream]||(d[y.stream]=new e.MediaStream),n(I,d[y.stream]),f.push([I,A,d[y.stream]])):(d.default||(d.default=new e.MediaStream),n(I,d.default),f.push([I,A,d.default])))}}else{(O=l.transceivers[s]||l._createTransceiver(p)).mid=E,O.iceGatherer||(O.iceGatherer=l._createIceGatherer(s,v)),M.length&&"new"===O.iceTransport.state&&(!R||v&&0!==s?M.forEach((function(e){c(O.iceTransport,e)})):O.iceTransport.setRemoteCandidates(M)),T=e.RTCRtpReceiver.getCapabilities(p),t<15019&&(T.codecs=T.codecs.filter((function(e){return"rtx"!==e.name}))),k=O.sendEncodingParameters||[{ssrc:1001*(2*s+2)}];var L,B=!1;if("sendrecv"===_||"sendonly"===_){if(B=!O.rtpReceiver,A=O.rtpReceiver||new e.RTCRtpReceiver(O.dtlsTransport,p),B)I=A.track,y&&"-"===y.stream||(y?(d[y.stream]||(d[y.stream]=new e.MediaStream,Object.defineProperty(d[y.stream],"id",{get:function(){return y.stream}})),Object.defineProperty(I,"id",{get:function(){return y.track}}),L=d[y.stream]):(d.default||(d.default=new e.MediaStream),L=d.default)),L&&(n(I,L),O.associatedRemoteMediaStreams.push(L)),f.push([I,A,L])}else O.rtpReceiver&&O.rtpReceiver.track&&(O.associatedRemoteMediaStreams.forEach((function(t){var n=t.getTracks().find((function(e){return e.id===O.rtpReceiver.track.id}));n&&function(t,n){n.removeTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(n,t)})),O.associatedRemoteMediaStreams=[]);O.localCapabilities=T,O.remoteCapabilities=N,O.rtpReceiver=A,O.rtcpParameters=x,O.sendEncodingParameters=k,O.recvEncodingParameters=j,l._transceive(l.transceivers[s],!1,B)}}})),void 0===l._dtlsRole&&(l._dtlsRole="offer"===a.type?"active":"passive"),l._remoteDescription={type:a.type,sdp:a.sdp},"offer"===a.type?l._updateSignalingState("have-remote-offer"):l._updateSignalingState("stable"),Object.keys(d).forEach((function(t){var n=d[t];if(n.getTracks().length){if(-1===l.remoteStreams.indexOf(n)){l.remoteStreams.push(n);var r=new Event("addstream");r.stream=n,e.setTimeout((function(){l._dispatchEvent("addstream",r)}))}f.forEach((function(e){var t=e[0],r=e[1];n.id===e[2].id&&u(l,t,r,[n])}))}})),f.forEach((function(e){e[2]||u(l,e[0],e[1],[])})),e.setTimeout((function(){l&&l.transceivers&&l.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},l.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},l.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},l.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},l.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},l.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},l.prototype.createOffer=function(){var n=this;if(n._isClosed)return Promise.reject(s("InvalidStateError","Can not call createOffer after close"));var i=n.transceivers.filter((function(e){return"audio"===e.kind})).length,o=n.transceivers.filter((function(e){return"video"===e.kind})).length,c=arguments[0];if(c){if(c.mandatory||c.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==c.offerToReceiveAudio&&(i=!0===c.offerToReceiveAudio?1:!1===c.offerToReceiveAudio?0:c.offerToReceiveAudio),void 0!==c.offerToReceiveVideo&&(o=!0===c.offerToReceiveVideo?1:!1===c.offerToReceiveVideo?0:c.offerToReceiveVideo)}for(n.transceivers.forEach((function(e){"audio"===e.kind?--i<0&&(e.wantReceive=!1):"video"===e.kind&&--o<0&&(e.wantReceive=!1)}));i>0||o>0;)i>0&&(n._createTransceiver("audio"),i--),o>0&&(n._createTransceiver("video"),o--);var u=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach((function(a,i){var o=a.track,c=a.kind,s=a.mid||r.generateIdentifier();a.mid=s,a.iceGatherer||(a.iceGatherer=n._createIceGatherer(i,n.usingBundle));var u=e.RTCRtpSender.getCapabilities(c);t<15019&&(u.codecs=u.codecs.filter((function(e){return"rtx"!==e.name}))),u.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),a.remoteCapabilities&&a.remoteCapabilities.codecs&&a.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),u.headerExtensions.forEach((function(e){(a.remoteCapabilities&&a.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var l=a.sendEncodingParameters||[{ssrc:1001*(2*i+1)}];o&&t>=15019&&"video"===c&&!l[0].rtx&&(l[0].rtx={ssrc:l[0].ssrc+1}),a.wantReceive&&(a.rtpReceiver=new e.RTCRtpReceiver(a.dtlsTransport,c)),a.localCapabilities=u,a.sendEncodingParameters=l})),"max-compat"!==n._config.bundlePolicy&&(u+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),u+="a=ice-options:trickle\r\n",n.transceivers.forEach((function(e,t){u+=a(e,e.localCapabilities,"offer",e.stream,n._dtlsRole),u+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===n.iceGatheringState||0!==t&&n.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,u+="a="+r.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(u+="a=end-of-candidates\r\n"))}));var l=new e.RTCSessionDescription({type:"offer",sdp:u});return Promise.resolve(l)},l.prototype.createAnswer=function(){var n=this;if(n._isClosed)return Promise.reject(s("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return Promise.reject(s("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var o=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(o+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),o+="a=ice-options:trickle\r\n";var c=r.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach((function(e,r){if(!(r+1>c)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?o+="m=application 0 DTLS/SCTP 5000\r\n":o+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?o+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(o+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(o+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var s;if(e.stream)"audio"===e.kind?s=e.stream.getAudioTracks()[0]:"video"===e.kind&&(s=e.stream.getVideoTracks()[0]),s&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var u=i(e.localCapabilities,e.remoteCapabilities);!u.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,o+=a(e,u,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(o+="a=rtcp-rsize\r\n")}}));var u=new e.RTCSessionDescription({type:"answer",sdp:o});return Promise.resolve(u)},l.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(a,i){if(!n._remoteDescription)return i(s("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var o=e.sdpMLineIndex;if(e.sdpMid)for(var u=0;u<n.transceivers.length;u++)if(n.transceivers[u].mid===e.sdpMid){o=u;break}var l=n.transceivers[o];if(!l)return i(s("OperationError","Can not add ICE candidate"));if(l.rejected)return a();var d=Object.keys(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===d.protocol&&(0===d.port||9===d.port))return a();if(d.component&&1!==d.component)return a();if((0===o||o>0&&l.iceTransport!==n.transceivers[0].iceTransport)&&!c(l.iceTransport,d))return i(s("OperationError","Can not add ICE candidate"));var f=e.candidate.trim();0===f.indexOf("a=")&&(f=f.substr(2)),(t=r.getMediaSections(n._remoteDescription.sdp))[o]+="a="+(d.type?f:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join("")}else for(var p=0;p<n.transceivers.length&&(n.transceivers[p].rejected||(n.transceivers[p].iceTransport.addRemoteCandidate({}),(t=r.getMediaSections(n._remoteDescription.sdp))[p]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join(""),!n.usingBundle));p++);a()}))},l.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)})),!n)throw s("InvalidAccessError","Invalid selector.");return n.getStats()}var r=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&r.push(e[t].getStats())}))})),Promise.all(r).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))};["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var n=e[t];if(n&&n.prototype&&n.prototype.getStats){var r=n.prototype.getStats;n.prototype.getStats=function(){return r.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(n){var r;e[n].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(r=e[n]).type]||r.type,t.set(n,e[n])})),t}))}}}));var d=["createOffer","createAnswer"];return d.forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(d=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(0)),a=s(n(17)),i=n(18),o=n(678),c=n(679);function s(e){return e&&e.__esModule?e:{default:e}}var u="more_horizontal_24",l=!1;function d(){l||((0,o.addSpriteSymbol)(new a.default({id:u,viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="more_horizontal_24"><g fill="none" fill-rule="evenodd"><path d="M24 0H0v24h24z" /><path d="M18 10c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm-6 4c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm-6 0c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z" fill="currentColor" /></g></symbol>'})),l=!0)}var f=function(e){return(0,o.useIsomorphicLayoutEffect)((function(){d()}),[]),r.default.createElement(c.SvgIcon,(0,i.assign)({},e,{viewBox:"0 0 24 24",id:u,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};f.mountIcon=d;var p=f;t.default=p},function(e,t,n){var r=n(554),a=n(344),i=n(309),o=n(555);e.exports=function(e){return r(e)||a(e)||i(e)||o()},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){e.exports=n.p+"static/BroadcastCoverStub.867bae547197f378c9340629f022dd5e.svg"},function(e,t,n){e.exports=n.p+"static/preview480.d4af1c873ce1badf6e3b8bf86d8cbdab.webp"},function(e,t,n){e.exports=n.p+"static/preview480@2x.685f1d37504942a54c36cc9f5c60f24a.webp"},function(e,t,n){e.exports=n.p+"static/preview648.86377c76075fd0b8985230c12c877333.webp"},function(e,t,n){e.exports=n.p+"static/preview648@2x.c90df2cf1b0968ef53c1bb303f591c06.webp"},function(e,t,n){e.exports=n.p+"static/preview.28519d5958c7e44ca0f0d37554a1e432.webp"},function(e,t,n){e.exports=n.p+"static/preview@2x.81d997c08b04288b7c4eb01b10de13b7.webp"},function(e,t,n){e.exports=n.p+"static/preview480.85e906b2c817d80798e9f33b11ec4cd0.jpg"},function(e,t,n){e.exports=n.p+"static/preview480@2x.d409c743dca2e49d91db661d5699115c.jpg"},function(e,t,n){e.exports=n.p+"static/preview648.aef99752e2c71ba0c3739e02ad775aed.jpg"},function(e,t,n){e.exports=n.p+"static/preview648@2x.cb891aeae84d17ca967c4f9d52ca2185.jpg"},function(e,t,n){e.exports=n.p+"static/preview@2x.82d97ec761126444909434d9cf9fcae0.jpg"},function(e,t,n){e.exports=n(1084)},function(e,t,n){var r=n(1094)();e.exports=r},function(e,t,n){var r=n(310),a=n(562),i=Object.prototype.hasOwnProperty,o=a((function(e,t,n){i.call(e,n)?e[n].push(t):r(e,n,[t])}));e.exports=o},function(e,t,n){var r=n(310),a=n(564),i=n(296);e.exports=function(e,t){var n={};return t=i(t,3),a(e,(function(e,a,i){r(n,a,t(e,a,i))})),n}},function(e,t,n){var r=n(296),a=n(1100);e.exports=function(e,t){return e&&e.length?a(e,r(t,2)):[]}},function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CalendarsListQuery"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"calendars"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:84}};n.loc.source={body:"query CalendarsListQuery {\n  calendars {\n    uid\n    title\n    type\n    color\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var r=e.definitions[n];if(r.name&&r.name.value==t)return r}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var r=t.type;"NamedType"===r.kind&&n.add(r.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),r[e.name.value]=t}})),e.exports=n,e.exports.CalendarsListQuery=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=r[t]||new Set,o=new Set,c=new Set;for(i.forEach((function(e){c.add(e)}));c.size>0;){var s=c;c=new Set,s.forEach((function(e){o.has(e)||(o.add(e),(r[e]||new Set).forEach((function(e){c.add(e)})))}))}return o.forEach((function(t){var r=a(e,t);r&&n.definitions.push(r)})),n}(n,"CalendarsListQuery")},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c}));var r=n(392),a=n(78),i={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},o=Object.freeze({});function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i,c=void 0,u=Array.isArray(e),l=[e],d=-1,f=[],p=void 0,h=void 0,m=void 0,v=[],g=[],b=e;do{var _=++d===l.length,y=_&&0!==f.length;if(_){if(h=0===g.length?void 0:v[v.length-1],p=m,m=g.pop(),y){if(u)p=p.slice();else{for(var E={},O=0,w=Object.keys(p);O<w.length;O++){var C=w[O];E[C]=p[C]}p=E}for(var S=0,A=0;A<f.length;A++){var k=f[A][0],j=f[A][1];u&&(k-=S),u&&null===j?(p.splice(k,1),S++):p[k]=j}}d=c.index,l=c.keys,f=c.edits,u=c.inArray,c=c.prev}else{if(h=m?u?d:l[d]:void 0,null==(p=m?m[h]:b))continue;m&&v.push(h)}var T,I=void 0;if(!Array.isArray(p)){if(!Object(a.c)(p))throw new Error("Invalid AST Node: ".concat(Object(r.a)(p),"."));var P=s(t,p.kind,_);if(P){if((I=P.call(t,p,h,m,v,g))===o)break;if(!1===I){if(!_){v.pop();continue}}else if(void 0!==I&&(f.push([h,I]),!_)){if(!Object(a.c)(I)){v.pop();continue}p=I}}}if(void 0===I&&y&&f.push([h,p]),_)v.pop();else c={inArray:u,index:d,keys:l,edits:f,prev:c},l=(u=Array.isArray(p))?p:null!==(T=n[p.kind])&&void 0!==T?T:[],d=-1,f=[],m&&g.push(m),m=p}while(void 0!==c);return 0!==f.length&&(b=f[f.length-1][1]),b}function s(e,t,n){var r=e[t];if(r){if(!n&&"function"==typeof r)return r;var a=n?r.leave:r.enter;if("function"==typeof a)return a}else{var i=n?e.leave:e.enter;if(i){if("function"==typeof i)return i;var o=i[t];if("function"==typeof o)return o}}}},function(e,t,n){"use strict";e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var n,r="boolean"==typeof t.cycles&&t.cycles,a=t.cmp&&(n=t.cmp,function(e){return function(t,r){var a={key:t,value:e[t]},i={key:r,value:e[r]};return n(a,i)}}),i=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var n,o;if(Array.isArray(t)){for(o="[",n=0;n<t.length;n++)n&&(o+=","),o+=e(t[n])||"null";return o+"]"}if(null===t)return"null";if(-1!==i.indexOf(t)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var c=i.push(t)-1,s=Object.keys(t).sort(a&&a(t));for(o="",n=0;n<s.length;n++){var u=s[n],l=e(t[u]);l&&(o&&(o+=","),o+=JSON.stringify(u)+":"+l)}return i.splice(c,1),"{"+o+"}"}}(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.visit=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o,r=void 0,u=Array.isArray(e),l=[e],d=-1,f=[],p=void 0,h=void 0,m=void 0,v=[],g=[],b=e;do{var _=++d===l.length,y=_&&0!==f.length;if(_){if(h=0===g.length?void 0:v[v.length-1],p=m,m=g.pop(),y){if(u)p=p.slice();else{for(var E={},O=0,w=Object.keys(p);O<w.length;O++){var C=w[O];E[C]=p[C]}p=E}for(var S=0,A=0;A<f.length;A++){var k=f[A][0],j=f[A][1];u&&(k-=S),u&&null===j?(p.splice(k,1),S++):p[k]=j}}d=r.index,l=r.keys,f=r.edits,u=r.inArray,r=r.prev}else{if(h=m?u?d:l[d]:void 0,null==(p=m?m[h]:b))continue;m&&v.push(h)}var T,I=void 0;if(!Array.isArray(p)){if(!(0,i.isNode)(p))throw new Error("Invalid AST Node: ".concat((0,a.default)(p),"."));var P=s(t,p.kind,_);if(P){if((I=P.call(t,p,h,m,v,g))===c)break;if(!1===I){if(!_){v.pop();continue}}else if(void 0!==I&&(f.push([h,I]),!_)){if(!(0,i.isNode)(I)){v.pop();continue}p=I}}}if(void 0===I&&y&&f.push([h,p]),_)v.pop();else r={inArray:u,index:d,keys:l,edits:f,prev:r},u=Array.isArray(p),l=u?p:null!==(T=n[p.kind])&&void 0!==T?T:[],d=-1,f=[],m&&g.push(m),m=p}while(void 0!==r);0!==f.length&&(b=f[f.length-1][1]);return b},t.visitInParallel=function(e){var t=new Array(e.length);return{enter:function(n){for(var r=0;r<e.length;r++)if(null==t[r]){var a=s(e[r],n.kind,!1);if(a){var i=a.apply(e[r],arguments);if(!1===i)t[r]=n;else if(i===c)t[r]=c;else if(void 0!==i)return i}}},leave:function(n){for(var r=0;r<e.length;r++)if(null==t[r]){var a=s(e[r],n.kind,!0);if(a){var i=a.apply(e[r],arguments);if(i===c)t[r]=c;else if(void 0!==i&&!1!==i)return i}}else t[r]===n&&(t[r]=null)}}},t.getVisitFn=s,t.BREAK=t.QueryDocumentKeys=void 0;var r,a=(r=n(1108))&&r.__esModule?r:{default:r},i=n(1109);var o={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]};t.QueryDocumentKeys=o;var c=Object.freeze({});function s(e,t,n){var r=e[t];if(r){if(!n&&"function"==typeof r)return r;var a=n?r.leave:r.enter;if("function"==typeof a)return a}else{var i=n?e.leave:e.enter;if(i){if("function"==typeof i)return i;var o=i[t];if("function"==typeof o)return o}}}t.BREAK=c},function(e,t,n){var r=n(1119),a=n(616),i=n(1121),o=n(1126),c=n(619),s=i((function(e,t){var n=c(t);return o(n)&&(n=void 0),o(e)?r(e,a(t,1,o,!0),void 0,n):[]}));e.exports=s},function(e,t,n){var r=n(355),a=n(620),i=n(1148),o=n(354),c=n(313),s=n(1151),u=n(1153),l=n(623),d=u((function(e,t){var n={};if(null==e)return n;var u=!1;t=r(t,(function(t){return t=o(t,e),u||(u=t.length>1),t})),c(e,l(e),n),u&&(n=a(n,7,s));for(var d=t.length;d--;)i(n,t[d]);return n}));e.exports=d},function(e,t,n){var r=n(620);e.exports=function(e){return r(e,5)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&"object"==typeof e&&"default"in e?e.default:e}(n(9));const a=(e,t,n={})=>("object"!=typeof e||null===e||(e.config&&a(e.config,t,n),function(e,t,n){n.filter(t=>void 0!==e[t]).forEach(n=>{t[n]=e[n]})}(e,n,t),e.ɔ&&a(e.ɔ,t,n)),n);var i={readConfig:a};const{createStore:o,createEvent:c,guard:s,merge:u,sample:l,withRegion:d,is:f}=r,{readConfig:p}=i,h=e=>{throw new Error(e)};const{is:m,guard:v,createEvent:g}=r,{readConfig:b}=i;function _(e){return m.unit(e)?e.map(e=>!e):t=>!e(t)}const{is:y,createEffect:E,forward:O,createEvent:w}=r,{readConfig:C}=i;const{is:S}=r;function A(e){return S.store(e)?"store":S.effect(e)?"effect":S.event(e)?"event":S.domain(e)?"domain":S.unit(e)?"unit":"unknown"}function k(e,t,n=""){const r=n+T(e);e.watch(e=>{console.info(`[${t}] ${r}`,e)})}function j(e){k(e.done,"effect",T(e)+"."),k(e.fail,"effect",T(e)+".")}function T(e){return e.compositeName&&e.compositeName.fullName?e.compositeName.fullName:e.shortName?e.shortName:e.name?e.name:""}const{createEffect:I,createEvent:P,forward:D,is:N,sample:x}=r,{readConfig:R}=i;const{combine:M}=r,{readConfig:L}=i;const{combine:B}=r,{readConfig:F}=i;const{combine:H,is:V}=r,{readConfig:U}=i,z={some:e=>e.some(Boolean),every:e=>e.every(Boolean)};const{readConfig:G}=i;const{combine:W}=r,{readConfig:q}=i;const{is:K}=r,{readConfig:Y}=i;const{createEvent:Z,sample:Q,guard:J}=r,{readConfig:X}=i;const{createStore:$}=r,{readConfig:ee}=i;const{createEffect:te,createEvent:ne,guard:re,is:ae,sample:ie}=r,{readConfig:oe}=i;var ce=function(e){const{loc:t,name:n="unknown",events:r,reset:a,target:i}=p(e,["loc","name","events","reset","target"]),m=i||c({name:n});return f.unit(m)||h("target should be a unit"),a&&!f.unit(a)&&h("reset should be a unit"),d(m,()=>{const e=Array.isArray(r),i=Object.keys(r),c=e?[...i].fill():{},d=o(i.length,{name:n+"Counter",loc:t}),f=o(c,{name:n+"Results",loc:t});d.reset(l(m)),f.reset(m),a&&(d.reset(l(a)),f.reset(a));for(const t of i){const n=o(!1).on(r[t],()=>!0).reset(m);a&&n.reset(a),d.on(n,e=>e-1),f.on(r[t],(n,r)=>{const a=e?[...n]:{...n};return a[t]=r,a})}s({source:l(f,u(Object.values(r))),filter:d.map(e=>0===e),target:m})}),m},se=function(e){const{name:t="unknown",source:n=g({name:t+"Source"}),if:r,then:a,else:i}=b(e,["name","source","if","then","else"]),o=m.unit(r)||"function"==typeof r?r:e=>e===r;return a&&v({source:n,filter:o,target:a}),i&&v({source:n,filter:_(o),target:i}),n},ue=function(e){const{source:t,timeout:n,target:r,sid:a,loc:i,name:o}=C(e,["source","timeout","target","loc","name","sid"]);if(!y.unit(t))throw new TypeError("source must be unit from effector");if(y.domain(t))throw new TypeError("source cannot be domain");if("number"!=typeof n||n<0||!Number.isFinite(n))throw new Error(`timeout must be positive number or zero. Received: "${n}"`);const c=o||t.shortName||"unknown";let s,u;const l=r||w({name:c+"DebounceTick",loc:i}),d=E({name:c+"DebounceTimer",sid:a,loc:i,handler:e=>(clearTimeout(u),s&&s(),new Promise((t,r)=>{s=r,u=setTimeout(t,n,e)}))});return O({from:t,to:d}),O({from:d.done.map(({result:e})=>e),to:l}),l},le=function(){const e=Array.from(arguments);for(const t of e){const e=A(t);t.watch&&k(t,e),"effect"===e&&j(t),"domain"===e&&(t.onCreateEvent(e=>k(e,"event")),t.onCreateStore(e=>k(e,"store")),t.onCreateEffect(j))}},de=function(e){const{loc:t,name:n="unknown",sid:r,source:a,timeout:i,target:o=P({name:n+"Delayed",sid:r,loc:t})}=R(e,["loc","sid","name","source","timeout","target"]);if(!N.unit(a))throw new TypeError("source must be a unit from effector");if(!N.unit(o))throw new TypeError("target must be a unit from effector");const c=function(e){if(N.store(e)||"function"==typeof e||"number"==typeof e)return e;throw new TypeError(`'timeout' argument must be a function, Store, or a number. Passed "${typeof e}"`)}(i),s=I({config:{name:n+"DelayTimer",loc:t},handler:({payload:e,milliseconds:t})=>new Promise(n=>{setTimeout(n,t,e)})});return x({source:{milliseconds:c},clock:a,fn:({milliseconds:e},t)=>({payload:t,milliseconds:"function"==typeof e?e(t):e}),target:s}),D({from:s.doneData,to:o}),o},fe=function(e){const{predicate:t,stores:n}=L(e,["predicate","stores"]),r="function"==typeof t?t:e=>e===t;return M(n,e=>e.every(r))},pe=function(e){const{effects:t,domain:n,sid:r,name:a,loc:i}=F(e,["effects","domain","sid","name","loc"]);if(n){const e=n.createStore(0,{sid:r,name:a,loc:i});return n.onCreateEffect(t=>{e.on(t,e=>e+1).on(t.finally,e=>e-1)}),e}return B(t.map(e=>e.inFlight),e=>e.reduce((e,t)=>e+t,0))},he=function(e){const{effects:t,domain:n,of:r="some"}=U(e,["effects","domain","of"]);if(!V.domain(n)&&!t)throw new TypeError("domain or effects should be passed");if("some"!==r&&"every"!==r)throw new TypeError(`strategy parameter "of" can be "every" or "some". Passed: "${r}"`);let a=t;const i=z[r];return n&&(a=[],n.onCreateEffect(e=>a.push(e))),H(a.map(e=>e.pending),i)},me=function(e){const{source:t,shape:n}=G(e,["source","shape"]),r={};for(const e in n)if(e in n){const a=n[e];r[e]=t.map(e=>{const t=a(e);return void 0===t?null:t})}return r},ve=function(e){const{predicate:t,stores:n}=q(e,["predicate","stores"]),r="function"==typeof t?t:e=>e===t;return W(n,e=>e.some(r))},ge=function(e){const{source:t,cases:n}=Y(e,["source","cases"]),r={};let a=K.store(t)?t.updates:t;for(const e in n)if(e in n){const t=n[e];r[e]=a.filterMap(t),a=a.filter({fn:e=>!t(e)})}return r.__=a,r},be=function(e){const{loc:t,name:n="unknown",source:r=Z({loc:t,name:n+"Source"}),targets:a}=X(e,["loc","name","source","targets"]);for(const e in a)if(e in a){const t=J({source:r,filter:t=>"object"==typeof t&&null!==t&&e in t});Q({source:t,fn:t=>t[e],target:a[e]})}return r},_e=function(e){const{sid:t,name:n,loc:r,effect:a,defaultValue:i="initial"}=ee(e,["sid","name","loc","effect","defaultValue"]),o=$(i,{sid:t,loc:r,name:n});return o.on(a,()=>"pending").on(a.done,()=>"done").on(a.fail,()=>"fail"),o},ye=function(e){const{source:t,timeout:n,target:r,sid:a,loc:i,name:o}=oe(e,["source","timeout","target","loc","name","sid"]);if(!ae.unit(t))throw new TypeError("source must be unit from effector");if("number"!=typeof n||n<0)throw new Error("timeout must be positive number or zero");const c=o||t.shortName||"unknown",s=r||ne({name:c+"ThrottleTick",loc:i}),u=te({name:c+"ThrottleTimer",sid:a,loc:i,handler:()=>new Promise(e=>setTimeout(e,n))});return re({source:t,filter:u.pending.map(e=>!e),target:u}),ie({source:t,clock:u.done,target:s}),s},Ee={combineEvents:ce,condition:se,debounce:ue,debug:le,delay:de,every:fe,inFlight:pe,pending:he,reshape:me,some:ve,splitMap:ge,spread:be,status:_e,throttle:ye};t.combineEvents=ce,t.condition=se,t.debounce=ue,t.debug=le,t.default=Ee,t.delay=de,t.every=fe,t.inFlight=pe,t.pending=he,t.reshape=me,t.some=ve,t.splitMap=ge,t.spread=be,t.status=_e,t.throttle=ye},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="cancel_24",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="cancel_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path d="M18.3 5.7a.99.99 0 00-1.4 0L12 10.6 7.1 5.7a.99.99 0 00-1.4 1.4l4.9 4.9-4.9 4.9a.99.99 0 001.4 1.4l4.9-4.9 4.9 4.9a.99.99 0 001.4-1.4L13.4 12l4.9-4.9a.99.99 0 000-1.4z" fill="currentColor" /></g></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 24 24",id:l,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(44),a=n(37);function i(e,t){Object(a.a)(2,arguments);var n=Object(r.a)(e).getTime(),i=Object(r.a)(t.start).getTime(),o=Object(r.a)(t.end).getTime();if(!(i<=o))throw new RangeError("Invalid interval");return n>=i&&n<=o}},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="fullscreen_24",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="fullscreen_24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 4.9a.9.9 0 01.9-.9h4.2a.9.9 0 01.9.9v4.2a.9.9 0 11-1.8 0V7.073l-3.664 3.663a.9.9 0 11-1.272-1.272L16.927 5.8H14.9a.9.9 0 01-.9-.9zm-3.264 8.364a.9.9 0 010 1.272L7.073 18.2h2.025a.9.9 0 110 1.8H4.9a.9.9 0 01-.9-.9v-4.2a.9.9 0 011.8 0v2.027l3.664-3.663a.9.9 0 011.272 0z" fill="currentColor" /></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 24 24",id:l,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};p.mountIcon=f,t.a=p},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){var n,r,a=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var s,u=[],l=!1,d=-1;function f(){l&&s&&(l=!1,s.length?u=s.concat(u):d=-1,u.length&&p())}function p(){if(!l){var e=c(f);l=!0;for(var t=u.length;t;){for(s=u,u=[];++d<t;)s&&s[d].run();d=-1,t=u.length}s=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||l||c(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=m,a.addListener=m,a.once=m,a.off=m,a.removeListener=m,a.removeAllListeners=m,a.emit=m,a.prependListener=m,a.prependOnceListener=m,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addSpriteSymbol=function(e){o&&o.add(e)},t.useIsomorphicLayoutEffect=void 0;var r,a=(r=n(316))&&r.__esModule?r:{default:r},i=n(0);var o,c=!("undefined"==typeof window||!window.document||!window.document.createElement);if(c){o=new a.default({attrs:{id:"__SVG_SPRITE_NODE__"}});var s=function(){var e=document.getElementById("__SVG_SPRITE_NODE__");e?o.attach(e):o.mount()};document.querySelector("body")?s():document.addEventListener("DOMContentLoaded",s)}else o=null;var u=c?i.useLayoutEffect:i.useEffect;t.useIsomorphicLayoutEffect=u},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.SvgIcon=void 0;var a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var c=a?Object.getOwnPropertyDescriptor(e,i):null;c&&(c.get||c.set)?Object.defineProperty(n,i,c):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=n(1025);function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var f={display:"block"};var p=function(e){var t=e.width,n=e.height,r=e.viewBox,o=e.id,s=e.className,l=e.style,p=e.fill,h=e.getRootRef,m=e.Component,v=d(e,["width","height","viewBox","id","className","style","fill","getRootRef","Component"]),g=Math.max(t,n),b=(0,a.useContext)(i.IconSettingsContext),_=function(e,t){for(var n=t.classPrefix,r=t.globalClasses,a="",i=0;i<e.length;i++)n&&(a+=" "+(n+e[i])),n&&!r||(a+=" "+e[i]);return a}(["Icon","Icon--".concat(g),"Icon--w-".concat(t),"Icon--h-".concat(n),"Icon--".concat(o)],b);return a.default.createElement(m,c({role:"presentation"},v,{ref:h,className:"".concat(_," ").concat(s),style:u(u({},l),{},{width:t,height:n})}),a.default.createElement("svg",{viewBox:r,width:t,height:n,style:f},a.default.createElement("use",{xlinkHref:"#".concat(o),style:{fill:"currentColor",color:p}})))};t.SvgIcon=p,p.defaultProps={Component:"div",className:"",style:{}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var r=n(2),a=n.n(r),i=n(82),o=n(9),c=n(76),s=n(225),u=n(40),l=n(118),d=n(402),f=n(24),p=Object(o.createEffect)((function(e){return Object(f.a)("education.getUsersGrades",{user_ids:e.join(", ")})})),h=Object(o.createEffect)((function(e){var t=e.userIds,n=e.gradeId,r=e.schoolId,a=e.role;p(t).then((function(e){t.forEach((function(t){var a,i=e.users_grades.find((function(e){return e.user_id===t})),o=null==i?void 0:i.grades.find((function(e){return e.grade_id===n}));o&&1===(null===(a=o.roles)||void 0===a?void 0:a.length)&&Object(d.a)({event_type:"join_grade",grade_id:n,school_id:r,edu_user_id:t})}))})),t.forEach((function(e){a===i.a.CLASS_TEACHER&&Object(d.a)({event_type:"edit_class_teacher_role",grade_id:n,school_id:r,edu_user_id:e})}))})),m=n(96),v=n(64),g=n(315);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}v.e.on(u.m,(function(e,t){return _({},t)})).on(u.j,(function(e,t){return _(_({},e),t)})).reset(u.l),v.c.on(u.h.done,(function(e,t){var n=t.params,r=t.result;return!!n.search||r.length>0})),m.e.reset(u.i.close),Object(o.sample)({clock:u.g,source:[v.f,m.c,m.e,m.a],fn:g.c,target:u.h}),Object(o.split)({source:Object(o.sample)({source:{schoolId:v.f},clock:u.d,fn:function(e,t){return{schoolId:e.schoolId,grade:t}}}),match:function(e){return e.grade.id?"update":"create"},cases:{create:u.c,update:u.f}}),Object(o.forward)({from:u.a.done.map((function(e){return e.params})),to:h}),Object(o.sample)({clock:u.a.done,source:v.a,fn:function(e,t){var n=t.params;return Object(g.b)(_({schoolGrades:e},n))},target:u.n}),Object(o.sample)({clock:[u.a.done,u.f.done,u.c.done],target:u.g}),Object(o.sample)({clock:[u.a.done,u.f.done],target:l.a});var y=Object(o.sample)({source:{schoolId:v.f},clock:[u.c.doneData,u.b.map((function(e){return[e]}))],fn:function(e,t){return{schoolId:e.schoolId,gradeId:t[0].id,role:i.a.STUDENT}}});u.b.watch((function(){return Object(c.g)(_(_({},s.a.STUDENTS_ADD),{},{submitHandler:u.p}))})),u.c.watch((function(){Object(c.g)(_(_({},s.a.STUDENTS_SELECT),{},{submitHandler:u.p}))})),Object(o.forward)({from:y.map((function(e){return e.schoolId})),to:c.d}),Object(o.sample)({source:y,clock:u.p,fn:function(e,t){return _(_({},e),{},{userIds:t.map((function(e){return e.id}))})},target:u.a});var E=Object(o.merge)([u.f.failData.map((function(e){return null==e?void 0:e.error_code})),u.c.failData.map((function(e){return null==e?void 0:e.error_code}))])},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){n(408),n(815),e.exports=n(1158)},,,,function(e,t,n){"use strict";e.exports=n(819)},function(e,t,n){"use strict";
/** @license React v0.19.1
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r,a,i,o,c;if("undefined"==typeof window||"function"!=typeof MessageChannel){var s=null,u=null,l=function(){if(null!==s)try{var e=t.unstable_now();s(!0,e),s=null}catch(e){throw setTimeout(l,0),e}},d=Date.now();t.unstable_now=function(){return Date.now()-d},r=function(e){null!==s?setTimeout(r,0,e):(s=e,setTimeout(l,0))},a=function(e,t){u=setTimeout(e,t)},i=function(){clearTimeout(u)},o=function(){return!1},c=t.unstable_forceFrameRate=function(){}}else{var f=window.performance,p=window.Date,h=window.setTimeout,m=window.clearTimeout;if("undefined"!=typeof console){var v=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof f&&"function"==typeof f.now)t.unstable_now=function(){return f.now()};else{var g=p.now();t.unstable_now=function(){return p.now()-g}}var b=!1,_=null,y=-1,E=5,O=0;o=function(){return t.unstable_now()>=O},c=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):E=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,C=w.port2;w.port1.onmessage=function(){if(null!==_){var e=t.unstable_now();O=e+E;try{_(!0,e)?C.postMessage(null):(b=!1,_=null)}catch(e){throw C.postMessage(null),e}}else b=!1},r=function(e){_=e,b||(b=!0,C.postMessage(null))},a=function(e,n){y=h((function(){e(t.unstable_now())}),n)},i=function(){m(y),y=-1}}function S(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,a=e[r];if(!(void 0!==a&&0<j(a,t)))break e;e[r]=t,e[n]=a,n=r}}function A(e){return void 0===(e=e[0])?null:e}function k(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length;r<a;){var i=2*(r+1)-1,o=e[i],c=i+1,s=e[c];if(void 0!==o&&0>j(o,n))void 0!==s&&0>j(s,o)?(e[r]=s,e[c]=n,r=c):(e[r]=o,e[i]=n,r=i);else{if(!(void 0!==s&&0>j(s,n)))break e;e[r]=s,e[c]=n,r=c}}}return t}return null}function j(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],I=[],P=1,D=null,N=3,x=!1,R=!1,M=!1;function L(e){for(var t=A(I);null!==t;){if(null===t.callback)k(I);else{if(!(t.startTime<=e))break;k(I),t.sortIndex=t.expirationTime,S(T,t)}t=A(I)}}function B(e){if(M=!1,L(e),!R)if(null!==A(T))R=!0,r(F);else{var t=A(I);null!==t&&a(B,t.startTime-e)}}function F(e,n){R=!1,M&&(M=!1,i()),x=!0;var r=N;try{for(L(n),D=A(T);null!==D&&(!(D.expirationTime>n)||e&&!o());){var c=D.callback;if(null!==c){D.callback=null,N=D.priorityLevel;var s=c(D.expirationTime<=n);n=t.unstable_now(),"function"==typeof s?D.callback=s:D===A(T)&&k(T),L(n)}else k(T);D=A(T)}if(null!==D)var u=!0;else{var l=A(I);null!==l&&a(B,l.startTime-n),u=!1}return u}finally{D=null,N=r,x=!1}}function H(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var V=c;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){R||x||(R=!0,r(F))},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return A(T)},t.unstable_next=function(e){switch(N){case 1:case 2:case 3:var t=3;break;default:t=N}var n=N;N=t;try{return e()}finally{N=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=V,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=N;N=e;try{return t()}finally{N=n}},t.unstable_scheduleCallback=function(e,n,o){var c=t.unstable_now();if("object"==typeof o&&null!==o){var s=o.delay;s="number"==typeof s&&0<s?c+s:c,o="number"==typeof o.timeout?o.timeout:H(e)}else o=H(e),s=c;return e={id:P++,callback:n,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>c?(e.sortIndex=s,S(I,e),null===A(T)&&e===A(I)&&(M?i():M=!0,a(B,s-c))):(e.sortIndex=o,S(T,e),R||x||(R=!0,r(F))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();L(e);var n=A(T);return n!==D&&null!==D&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<D.expirationTime||o()},t.unstable_wrapCallback=function(e){var t=N;return function(){var n=N;N=t;try{return e.apply(this,arguments)}finally{N=n}}}},function(e,t){self.fetch||(self.fetch=function(e,t){return t=t||{},new Promise((function(n,r){var a=new XMLHttpRequest,i=[],o=[],c={},s=function(){return{ok:2==(a.status/100|0),statusText:a.statusText,status:a.status,url:a.responseURL,text:function(){return Promise.resolve(a.responseText)},json:function(){return Promise.resolve(a.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([a.response]))},clone:s,headers:{keys:function(){return i},entries:function(){return o},get:function(e){return c[e.toLowerCase()]},has:function(e){return e.toLowerCase()in c}}}};for(var u in a.open(t.method||"get",e,!0),a.onload=function(){a.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(e,t,n){i.push(t=t.toLowerCase()),o.push([t,n]),c[t]=c[t]?c[t]+","+n:n})),n(s())},a.onerror=r,a.withCredentials="include"==t.credentials,t.headers)a.setRequestHeader(u,t.headers[u]);a.send(t.body||null)}))})},,,function(e,t,n){"use strict";n(824)()},function(e,t,n){"use strict";var r=n(825),a=n(828);e.exports=function(){var e=a();return r(Array.prototype,{flatMap:e},{flatMap:function(){return Array.prototype.flatMap!==e}}),e}},function(e,t,n){"use strict";var r=n(826),a="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),i=Object.prototype.toString,o=Array.prototype.concat,c=Object.defineProperty,s=c&&function(){var e={};try{for(var t in c(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}}(),u=function(e,t,n,r){var a;(!(t in e)||"function"==typeof(a=r)&&"[object Function]"===i.call(a)&&r())&&(s?c(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n)},l=function(e,t){var n=arguments.length>2?arguments[2]:{},i=r(t);a&&(i=o.call(i,Object.getOwnPropertySymbols(t)));for(var c=0;c<i.length;c+=1)u(e,i[c],t[i[c]],n[i[c]])};l.supportsDescriptors=!!s,e.exports=l},function(e,t,n){"use strict";var r=Array.prototype.slice,a=n(538),i=Object.keys,o=i?function(e){return i(e)}:n(827),c=Object.keys;o.shim=function(){Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function(e){return a(e)?c(r.call(e)):c(e)}):Object.keys=o;return Object.keys||o},e.exports=o},function(e,t,n){"use strict";var r;if(!Object.keys){var a=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=n(538),c=Object.prototype.propertyIsEnumerable,s=!c.call({toString:null},"toString"),u=c.call((function(){}),"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=function(e){var t=e.constructor;return t&&t.prototype===e},f={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!f["$"+e]&&a.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{d(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();r=function(e){var t=null!==e&&"object"==typeof e,n="[object Function]"===i.call(e),r=o(e),c=t&&"[object String]"===i.call(e),f=[];if(!t&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var h=u&&n;if(c&&e.length>0&&!a.call(e,0))for(var m=0;m<e.length;++m)f.push(String(m));if(r&&e.length>0)for(var v=0;v<e.length;++v)f.push(String(v));else for(var g in e)h&&"prototype"===g||!a.call(e,g)||f.push(String(g));if(s)for(var b=function(e){if("undefined"==typeof window||!p)return d(e);try{return d(e)}catch(e){return!1}}(e),_=0;_<l.length;++_)b&&"constructor"===l[_]||!a.call(e,l[_])||f.push(l[_]);return f}}e.exports=r},function(e,t,n){"use strict";var r=n(829);e.exports=function(){return Array.prototype.flatMap||r}},function(e,t,n){"use strict";var r=n(830),a=n(843),i=n(345),o=n(548),c=n(552),s=n(869);e.exports=function(e){var t,n=s(this),u=c(i(n,"length"));if(!o(e))throw new TypeError("mapperFunction must be a function");arguments.length>1&&(t=arguments[1]);var l=r(n,0);return a(l,n,u,0,1,e,t),l}},function(e,t,n){"use strict";var r=n(73),a=r("%Array%"),i=r("%Symbol.species%",!0),o=r("%TypeError%"),c=n(345),s=n(346),u=n(835),l=n(840),d=n(147);e.exports=function(e,t){if(!l(t)||t<0)throw new o("Assertion failed: length must be an integer >= 0");var n,r=0===t?0:t;if(s(e)&&(n=c(e,"constructor"),i&&"Object"===d(n)&&null===(n=c(n,i))&&(n=void 0)),void 0===n)return a(r);if(!u(n))throw new o("C must be a constructor");return new n(r)}},function(e,t,n){"use strict";var r="Function.prototype.bind called on incompatible ",a=Array.prototype.slice,i=Object.prototype.toString;e.exports=function(e){var t=this;if("function"!=typeof t||"[object Function]"!==i.call(t))throw new TypeError(r+t);for(var n,o=a.call(arguments,1),c=function(){if(this instanceof n){var r=t.apply(this,o.concat(a.call(arguments)));return Object(r)===r?r:this}return t.apply(e,o.concat(a.call(arguments)))},s=Math.max(0,t.length-o.length),u=[],l=0;l<s;l++)u.push("$"+l);if(n=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(c),t.prototype){var d=function(){};d.prototype=t.prototype,n.prototype=new d,d.prototype=null}return n}},function(e,t,n){var r="function"==typeof Map&&Map.prototype,a=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,i=r&&a&&"function"==typeof a.get?a.get:null,o=r&&Map.prototype.forEach,c="function"==typeof Set&&Set.prototype,s=Object.getOwnPropertyDescriptor&&c?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,u=c&&s&&"function"==typeof s.get?s.get:null,l=c&&Set.prototype.forEach,d="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,f="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,p="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,h=Boolean.prototype.valueOf,m=Object.prototype.toString,v=Function.prototype.toString,g=String.prototype.match,b="function"==typeof BigInt?BigInt.prototype.valueOf:null,_=Object.getOwnPropertySymbols,y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,E="function"==typeof Symbol&&"object"==typeof Symbol.iterator,O=Object.prototype.propertyIsEnumerable,w=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null),C=n(833).custom,S=C&&I(C)?C:null,A="function"==typeof Symbol&&void 0!==Symbol.toStringTag?Symbol.toStringTag:null;function k(e,t,n){var r="double"===(n.quoteStyle||t)?'"':"'";return r+e+r}function j(e){return String(e).replace(/"/g,"&quot;")}function T(e){return!("[object Array]"!==N(e)||A&&"object"==typeof e&&A in e)}function I(e){if(E)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!y)return!1;try{return y.call(e),!0}catch(e){}return!1}e.exports=function e(t,n,r,a){var c=n||{};if(D(c,"quoteStyle")&&"single"!==c.quoteStyle&&"double"!==c.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(D(c,"maxStringLength")&&("number"==typeof c.maxStringLength?c.maxStringLength<0&&c.maxStringLength!==1/0:null!==c.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=!D(c,"customInspect")||c.customInspect;if("boolean"!=typeof s&&"symbol"!==s)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(D(c,"indent")&&null!==c.indent&&"\t"!==c.indent&&!(parseInt(c.indent,10)===c.indent&&c.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return function e(t,n){if(t.length>n.maxStringLength){var r=t.length-n.maxStringLength,a="... "+r+" more character"+(r>1?"s":"");return e(t.slice(0,n.maxStringLength),n)+a}return k(t.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,R),"single",n)}(t,c);if("number"==typeof t)return 0===t?1/0/t>0?"0":"-0":String(t);if("bigint"==typeof t)return String(t)+"n";var m=void 0===c.depth?5:c.depth;if(void 0===r&&(r=0),r>=m&&m>0&&"object"==typeof t)return T(t)?"[Array]":"[Object]";var _=function(e,t){var n;if("\t"===e.indent)n="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;n=Array(e.indent+1).join(" ")}return{base:n,prev:Array(t+1).join(n)}}(c,r);if(void 0===a)a=[];else if(x(a,t)>=0)return"[Circular]";function O(t,n,i){if(n&&(a=a.slice()).push(n),i){var o={depth:c.depth};return D(c,"quoteStyle")&&(o.quoteStyle=c.quoteStyle),e(t,o,r+1,a)}return e(t,c,r+1,a)}if("function"==typeof t){var C=function(e){if(e.name)return e.name;var t=g.call(v.call(e),/^function\s*([\w$]+)/);if(t)return t[1];return null}(t),P=H(t,O);return"[Function"+(C?": "+C:" (anonymous)")+"]"+(P.length>0?" { "+P.join(", ")+" }":"")}if(I(t)){var V=E?String(t).replace(/^(Symbol\(.*\))_[^)]*$/,"$1"):y.call(t);return"object"!=typeof t||E?V:M(V)}if(function(e){if(!e||"object"!=typeof e)return!1;if("undefined"!=typeof HTMLElement&&e instanceof HTMLElement)return!0;return"string"==typeof e.nodeName&&"function"==typeof e.getAttribute}(t)){for(var U="<"+String(t.nodeName).toLowerCase(),z=t.attributes||[],G=0;G<z.length;G++)U+=" "+z[G].name+"="+k(j(z[G].value),"double",c);return U+=">",t.childNodes&&t.childNodes.length&&(U+="..."),U+="</"+String(t.nodeName).toLowerCase()+">"}if(T(t)){if(0===t.length)return"[]";var W=H(t,O);return _&&!function(e){for(var t=0;t<e.length;t++)if(x(e[t],"\n")>=0)return!1;return!0}(W)?"["+F(W,_)+"]":"[ "+W.join(", ")+" ]"}if(function(e){return!("[object Error]"!==N(e)||A&&"object"==typeof e&&A in e)}(t)){var q=H(t,O);return 0===q.length?"["+String(t)+"]":"{ ["+String(t)+"] "+q.join(", ")+" }"}if("object"==typeof t&&s){if(S&&"function"==typeof t[S])return t[S]();if("symbol"!==s&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!i||!e||"object"!=typeof e)return!1;try{i.call(e);try{u.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var K=[];return o.call(t,(function(e,n){K.push(O(n,t,!0)+" => "+O(e,t))})),B("Map",i.call(t),K,_)}if(function(e){if(!u||!e||"object"!=typeof e)return!1;try{u.call(e);try{i.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var Y=[];return l.call(t,(function(e){Y.push(O(e,t))})),B("Set",u.call(t),Y,_)}if(function(e){if(!d||!e||"object"!=typeof e)return!1;try{d.call(e,d);try{f.call(e,f)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return L("WeakMap");if(function(e){if(!f||!e||"object"!=typeof e)return!1;try{f.call(e,f);try{d.call(e,d)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return L("WeakSet");if(function(e){if(!p||!e||"object"!=typeof e)return!1;try{return p.call(e),!0}catch(e){}return!1}(t))return L("WeakRef");if(function(e){return!("[object Number]"!==N(e)||A&&"object"==typeof e&&A in e)}(t))return M(O(Number(t)));if(function(e){if(!e||"object"!=typeof e||!b)return!1;try{return b.call(e),!0}catch(e){}return!1}(t))return M(O(b.call(t)));if(function(e){return!("[object Boolean]"!==N(e)||A&&"object"==typeof e&&A in e)}(t))return M(h.call(t));if(function(e){return!("[object String]"!==N(e)||A&&"object"==typeof e&&A in e)}(t))return M(O(String(t)));if(!function(e){return!("[object Date]"!==N(e)||A&&"object"==typeof e&&A in e)}(t)&&!function(e){return!("[object RegExp]"!==N(e)||A&&"object"==typeof e&&A in e)}(t)){var Z=H(t,O),Q=w?w(t)===Object.prototype:t instanceof Object||t.constructor===Object,J=t instanceof Object?"":"null prototype",X=!Q&&A&&Object(t)===t&&A in t?N(t).slice(8,-1):J?"Object":"",$=(Q||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(X||J?"["+[].concat(X||[],J||[]).join(": ")+"] ":"");return 0===Z.length?$+"{}":_?$+"{"+F(Z,_)+"}":$+"{ "+Z.join(", ")+" }"}return String(t)};var P=Object.prototype.hasOwnProperty||function(e){return e in this};function D(e,t){return P.call(e,t)}function N(e){return m.call(e)}function x(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function R(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+t.toString(16).toUpperCase()}function M(e){return"Object("+e+")"}function L(e){return e+" { ? }"}function B(e,t,n,r){return e+" ("+t+") {"+(r?F(n,r):n.join(", "))+"}"}function F(e,t){if(0===e.length)return"";var n="\n"+t.prev+t.base;return n+e.join(","+n)+"\n"+t.prev}function H(e,t){var n=T(e),r=[];if(n){r.length=e.length;for(var a=0;a<e.length;a++)r[a]=D(e,a)?t(e[a],e):""}var i,o="function"==typeof _?_(e):[];if(E){i={};for(var c=0;c<o.length;c++)i["$"+o[c]]=o[c]}for(var s in e)D(e,s)&&(n&&String(Number(s))===s&&s<e.length||E&&i["$"+s]instanceof Symbol||(/[^\w$]/.test(s)?r.push(t(s,e)+": "+t(e[s],e)):r.push(s+": "+t(e[s],e))));if("function"==typeof _)for(var u=0;u<o.length;u++)O.call(e,o[u])&&r.push("["+t(o[u])+"]: "+t(e[o[u]],e));return r}},function(e,t){},function(e,t,n){"use strict";e.exports=function(e){return null===e?"Null":void 0===e?"Undefined":"function"==typeof e||"object"==typeof e?"Object":"number"==typeof e?"Number":"boolean"==typeof e?"Boolean":"string"==typeof e?"String":void 0}},function(e,t,n){"use strict";var r=n(836)("%Reflect.construct%",!0),a=n(837);try{a({},"",{"[[Get]]":function(){}})}catch(e){a=null}if(a&&r){var i={},o={};a(o,"length",{"[[Get]]":function(){throw i},"[[Enumerable]]":!0}),e.exports=function(e){try{r(e,o)}catch(e){return e===i}}}else e.exports=function(e){return"function"==typeof e&&!!e.prototype}},function(e,t,n){"use strict";e.exports=n(73)},function(e,t,n){"use strict";var r=n(73)("%TypeError%"),a=n(838),i=n(542),o=n(543),c=n(839),s=n(544),u=n(263),l=n(545),d=n(546),f=n(147);e.exports=function(e,t,n){if("Object"!==f(e))throw new r("Assertion failed: Type(O) is not Object");if(!u(t))throw new r("Assertion failed: IsPropertyKey(P) is not true");var p=a({Type:f,IsDataDescriptor:s,IsAccessorDescriptor:c},n)?n:d(n);if(!a({Type:f,IsDataDescriptor:s,IsAccessorDescriptor:c},p))throw new r("Assertion failed: Desc is not a valid Property Descriptor");return i(s,l,o,e,t,p)}},function(e,t,n){"use strict";var r=n(73),a=n(235),i=r("%TypeError%");e.exports=function(e,t){if("Object"!==e.Type(t))return!1;var n={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var r in t)if(a(t,r)&&!n[r])return!1;if(e.IsDataDescriptor(t)&&e.IsAccessorDescriptor(t))throw new i("Property Descriptors may not be both accessor and data descriptors");return!0}},function(e,t,n){"use strict";var r=n(235),a=n(437),i=n(147);e.exports=function(e){return void 0!==e&&(a(i,"Property Descriptor","Desc",e),!(!r(e,"[[Get]]")&&!r(e,"[[Set]]")))}},function(e,t,n){"use strict";var r=n(841),a=n(842),i=n(438),o=n(549);e.exports=function(e){if("number"!=typeof e||i(e)||!o(e))return!1;var t=r(e);return a(t)===t}},function(e,t,n){"use strict";var r=n(73)("%Math.abs%");e.exports=function(e){return r(e)}},function(e,t,n){"use strict";var r=Math.floor;e.exports=function(e){return r(e)}},function(e,t,n){"use strict";var r=n(73)("%TypeError%"),a=n(550),i=n(844),o=n(845),c=n(345),s=n(852),u=n(346),l=n(853),d=n(868);e.exports=function e(t,n,f,p,h){var m;arguments.length>5&&(m=arguments[5]);for(var v=p,g=0;g<f;){var b=d(g),_=s(n,b);if(!0===_){var y=c(n,b);if(void 0!==m){if(arguments.length<=6)throw new r("Assertion failed: thisArg is required when mapperFunction is provided");y=i(m,arguments[6],[y,g,n])}var E=!1;if(h>0&&(E=u(y)),E){var O=l(y);v=e(t,y,O,v,h-1)}else{if(v>=a)throw new r("index too large");o(t,d(v),y),v+=1}}g+=1}return v}},function(e,t,n){"use strict";var r=n(73),a=n(264),i=r("%TypeError%"),o=n(346),c=r("%Reflect.apply%",!0)||a("%Function.prototype.apply%");e.exports=function(e,t){var n=arguments.length>2?arguments[2]:[];if(!o(n))throw new i("Assertion failed: optional `argumentsList`, if provided, must be a List");return c(e,t,n)}},function(e,t,n){"use strict";var r=n(73)("%TypeError%"),a=n(846),i=n(263),o=n(147);e.exports=function(e,t,n){if("Object"!==o(e))throw new r("Assertion failed: Type(O) is not Object");if(!i(t))throw new r("Assertion failed: IsPropertyKey(P) is not true");var c=a(e,t,n);if(!c)throw new r("unable to create data property");return c}},function(e,t,n){"use strict";var r=n(73)("%TypeError%"),a=n(542),i=n(543),o=n(847),c=n(544),s=n(851),u=n(263),l=n(545),d=n(147);e.exports=function(e,t,n){if("Object"!==d(e))throw new r("Assertion failed: Type(O) is not Object");if(!u(t))throw new r("Assertion failed: IsPropertyKey(P) is not true");var f=o(e,t),p=!f||s(e);return!(f&&(!f["[[Writable]]"]||!f["[[Configurable]]"])||!p)&&a(c,l,i,e,t,{"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Value]]":n,"[[Writable]]":!0})}},function(e,t,n){"use strict";var r=n(73),a=n(848),i=r("%TypeError%"),o=n(264)("Object.prototype.propertyIsEnumerable"),c=n(235),s=n(346),u=n(263),l=n(849),d=n(546),f=n(147);e.exports=function(e,t){if("Object"!==f(e))throw new i("Assertion failed: O must be an Object");if(!u(t))throw new i("Assertion failed: P must be a Property Key");if(c(e,t)){if(!a){var n=s(e)&&"length"===t,r=l(e)&&"lastIndex"===t;return{"[[Configurable]]":!(n||r),"[[Enumerable]]":o(e,t),"[[Value]]":e[t],"[[Writable]]":!0}}return d(a(e,t))}}},function(e,t,n){"use strict";var r=n(73)("%Object.getOwnPropertyDescriptor%");if(r)try{r([],"length")}catch(e){r=null}e.exports=r},function(e,t,n){"use strict";var r=n(73)("%Symbol.match%",!0),a=n(850),i=n(547);e.exports=function(e){if(!e||"object"!=typeof e)return!1;if(r){var t=e[r];if(void 0!==t)return i(t)}return a(e)}},function(e,t,n){"use strict";var r,a,i,o,c=n(264),s=n(540)()&&!!Symbol.toStringTag;if(s){r=c("Object.prototype.hasOwnProperty"),a=c("RegExp.prototype.exec"),i={};var u=function(){throw i};o={toString:u,valueOf:u},"symbol"==typeof Symbol.toPrimitive&&(o[Symbol.toPrimitive]=u)}var l=c("Object.prototype.toString"),d=Object.getOwnPropertyDescriptor;e.exports=s?function(e){if(!e||"object"!=typeof e)return!1;var t=d(e,"lastIndex");if(!(t&&r(t,"value")))return!1;try{a(e,o)}catch(e){return e===i}}:function(e){return!(!e||"object"!=typeof e&&"function"!=typeof e)&&"[object RegExp]"===l(e)}},function(e,t,n){"use strict";var r=n(73)("%Object%"),a=n(551),i=r.preventExtensions,o=r.isExtensible;e.exports=i?function(e){return!a(e)&&o(e)}:function(e){return!a(e)}},function(e,t,n){"use strict";var r=n(73)("%TypeError%"),a=n(263),i=n(147);e.exports=function(e,t){if("Object"!==i(e))throw new r("Assertion failed: `O` must be an Object");if(!a(t))throw new r("Assertion failed: `P` must be a Property Key");return t in e}},function(e,t,n){"use strict";var r=n(73)("%TypeError%"),a=n(345),i=n(552),o=n(147);e.exports=function(e){if("Object"!==o(e))throw new r("Assertion failed: `obj` must be an Object");return i(a(e,"length"))}},function(e,t,n){"use strict";var r=n(855),a=n(862);e.exports=function(e){var t=a(e);return 0!==t&&(t=r(t)),0===t?0:t}},function(e,t,n){"use strict";var r=n(856),a=n(857),i=n(858),o=n(438),c=n(549),s=n(861);e.exports=function(e){var t=i(e);return o(t)?0:0!==t&&c(t)?s(t)*a(r(t)):t}},function(e,t,n){"use strict";var r=n(73)("%Math.abs%");e.exports=function(e){return r(e)}},function(e,t,n){"use strict";var r=Math.floor;e.exports=function(e){return r(e)}},function(e,t,n){"use strict";var r=n(859);e.exports=function(e){var t=r(e,Number);if("string"!=typeof t)return+t;var n=t.replace(/^[ \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u0085]+|[ \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u0085]+$/g,"");return/^0[ob]|^[+-]0x/.test(n)?NaN:+n}},function(e,t,n){"use strict";e.exports=n(860)},function(e,t,n){"use strict";var r=Object.prototype.toString,a=n(553),i=n(439),o=function(e){var t;if((t=arguments.length>1?arguments[1]:"[object Date]"===r.call(e)?String:Number)===String||t===Number){var n,o,c=t===String?["toString","valueOf"]:["valueOf","toString"];for(o=0;o<c.length;++o)if(i(e[c[o]])&&(n=e[c[o]](),a(n)))return n;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")};e.exports=function(e){return a(e)?e:arguments.length>1?o(e,arguments[1]):o(e)}},function(e,t,n){"use strict";e.exports=function(e){return e>=0?1:-1}},function(e,t,n){"use strict";var r=n(73),a=r("%TypeError%"),i=r("%Number%"),o=r("%RegExp%"),c=r("%parseInt%"),s=n(264),u=n(863),l=n(551),d=s("String.prototype.slice"),f=u(/^0b[01]+$/i),p=u(/^0o[0-7]+$/i),h=u(/^[-+]0x[0-9a-f]+$/i),m=u(new o("["+["","​","￾"].join("")+"]","g")),v=["\t\n\v\f\r   ᠎    ","         　\u2028","\u2029\ufeff"].join(""),g=new RegExp("(^["+v+"]+)|(["+v+"]+$)","g"),b=s("String.prototype.replace"),_=n(864);e.exports=function e(t){var n=l(t)?t:_(t,i);if("symbol"==typeof n)throw new a("Cannot convert a Symbol value to a number");if("bigint"==typeof n)throw new a("Conversion from 'BigInt' to 'number' is not allowed.");if("string"==typeof n){if(f(n))return e(c(d(n,2),2));if(p(n))return e(c(d(n,2),8));if(m(n)||h(n))return NaN;var r=function(e){return b(e,g,"")}(n);if(r!==n)return e(r)}return i(n)}},function(e,t,n){"use strict";var r=n(73)("RegExp.prototype.test"),a=n(541);e.exports=function(e){return a(r,e)}},function(e,t,n){"use strict";var r=n(865);e.exports=function(e){return arguments.length>1?r(e,arguments[1]):r(e)}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,a=n(553),i=n(439),o=n(866),c=n(867),s=function(e,t){if(null==e)throw new TypeError("Cannot call method on "+e);if("string"!=typeof t||"number"!==t&&"string"!==t)throw new TypeError('hint must be "string" or "number"');var n,r,o,c="string"===t?["toString","valueOf"]:["valueOf","toString"];for(o=0;o<c.length;++o)if(n=e[c[o]],i(n)&&(r=n.call(e),a(r)))return r;throw new TypeError("No default value")},u=function(e,t){var n=e[t];if(null!=n){if(!i(n))throw new TypeError(n+" returned for property "+t+" of object "+e+" is not a function");return n}};e.exports=function(e){if(a(e))return e;var t,n="default";if(arguments.length>1&&(arguments[1]===String?n="string":arguments[1]===Number&&(n="number")),r&&(Symbol.toPrimitive?t=u(e,Symbol.toPrimitive):c(e)&&(t=Symbol.prototype.valueOf)),void 0!==t){var i=t.call(e,n);if(a(i))return i;throw new TypeError("unable to convert exotic object to primitive")}return"default"===n&&(o(e)||c(e))&&(n="string"),s(e,"default"===n?"number":n)}},function(e,t,n){"use strict";var r=Date.prototype.getDay,a=Object.prototype.toString,i="function"==typeof Symbol&&!!Symbol.toStringTag;e.exports=function(e){return"object"==typeof e&&null!==e&&(i?function(e){try{return r.call(e),!0}catch(e){return!1}}(e):"[object Date]"===a.call(e))}},function(e,t,n){"use strict";var r=Object.prototype.toString;if(n(539)()){var a=Symbol.prototype.toString,i=/^Symbol\(.*\)$/;e.exports=function(e){if("symbol"==typeof e)return!0;if("[object Symbol]"!==r.call(e))return!1;try{return function(e){return"symbol"==typeof e.valueOf()&&i.test(a.call(e))}(e)}catch(e){return!1}}}else e.exports=function(e){return!1}},function(e,t,n){"use strict";var r=n(73),a=r("%String%"),i=r("%TypeError%");e.exports=function(e){if("symbol"==typeof e)throw new i("Cannot convert a Symbol value to a string");return a(e)}},function(e,t,n){"use strict";var r=n(73)("%Object%"),a=n(870);e.exports=function(e){return a(e),r(e)}},function(e,t,n){"use strict";e.exports=n(871)},function(e,t,n){"use strict";var r=n(73)("%TypeError%");e.exports=function(e,t){if(null==e)throw new r(t||"Cannot call method on "+e);return e}},function(e,t){e.exports=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,n(t,r)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={attributeNames:{styleName:"className"},generateScopedName:"[path]___[name]__[local]___[hash:base64:5]",handleMissingStyleName:"throw"};t.default=r},,,,,,,,,function(e,t,n){var r=n(559),a=n(888),i=n(217),o=n(561),c=/^\[object .+?Constructor\]$/,s=Function.prototype,u=Object.prototype,l=s.toString,d=u.hasOwnProperty,f=RegExp("^"+l.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||a(e))&&(r(e)?f:c).test(o(e))}},function(e,t,n){var r=n(266),a=Object.prototype,i=a.hasOwnProperty,o=a.toString,c=r?r.toStringTag:void 0;e.exports=function(e){var t=i.call(e,c),n=e[c];try{e[c]=void 0;var r=!0}catch(e){}var a=o.call(e);return r&&(t?e[c]=n:delete e[c]),a}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var r,a=n(889),i=(r=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!i&&i in e}},function(e,t,n){var r=n(180)["__core-js_shared__"];e.exports=r},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t){e.exports=function(e,t,n,r){for(var a=-1,i=null==e?0:e.length;++a<i;){var o=e[a];t(r,o,n(o),e)}return r}},function(e,t,n){var r=n(563);e.exports=function(e,t,n,a){return r(e,(function(e,r,i){t(a,e,n(e),i)})),a}},function(e,t,n){var r=n(894)();e.exports=r},function(e,t){e.exports=function(e){return function(t,n,r){for(var a=-1,i=Object(t),o=r(t),c=o.length;c--;){var s=o[e?c:++a];if(!1===n(i[s],s,i))break}return t}}},function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t,n){var r=n(265),a=n(195);e.exports=function(e){return a(e)&&"[object Arguments]"==r(e)}},function(e,t){e.exports=function(){return!1}},function(e,t,n){var r=n(265),a=n(443),i=n(195),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&a(e.length)&&!!o[r(e)]}},function(e,t,n){var r=n(445),a=n(900),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return a(e);var t=[];for(var n in Object(e))i.call(e,n)&&"constructor"!=n&&t.push(n);return t}},function(e,t,n){var r=n(567)(Object.keys,Object);e.exports=r},function(e,t,n){var r=n(258);e.exports=function(e,t){return function(n,a){if(null==n)return n;if(!r(n))return e(n,a);for(var i=n.length,o=t?i:-1,c=Object(n);(t?o--:++o<i)&&!1!==a(c[o],o,c););return n}}},function(e,t,n){var r=n(903),a=n(937),i=n(576);e.exports=function(e){var t=a(e);return 1==t.length&&t[0][2]?i(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},function(e,t,n){var r=n(446),a=n(568);e.exports=function(e,t,n,i){var o=n.length,c=o,s=!i;if(null==e)return!c;for(e=Object(e);o--;){var u=n[o];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++o<c;){var l=(u=n[o])[0],d=e[l],f=u[1];if(s&&u[2]){if(void 0===d&&!(l in e))return!1}else{var p=new r;if(i)var h=i(d,f,l,e,t,p);if(!(void 0===h?a(f,d,3,i,p):h))return!1}}return!0}},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var r=n(349),a=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():a.call(t,n,1),--this.size,!0)}},function(e,t,n){var r=n(349);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var r=n(349);e.exports=function(e){return r(this.__data__,e)>-1}},function(e,t,n){var r=n(349);e.exports=function(e,t){var n=this.__data__,a=r(n,e);return a<0?(++this.size,n.push([e,t])):n[a][1]=t,this}},function(e,t,n){var r=n(348);e.exports=function(){this.__data__=new r,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(348),a=n(447),i=n(448);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var o=n.__data__;if(!a||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new i(o)}return n.set(e,t),this.size=n.size,this}},function(e,t,n){var r=n(915),a=n(348),i=n(447);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||a),string:new r}}},function(e,t,n){var r=n(916),a=n(917),i=n(918),o=n(919),c=n(920);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=a,s.prototype.get=i,s.prototype.has=o,s.prototype.set=c,e.exports=s},function(e,t,n){var r=n(351);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,n){var r=n(351),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return a.call(t,e)?t[e]:void 0}},function(e,t,n){var r=n(351),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:a.call(t,e)}},function(e,t,n){var r=n(351);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},function(e,t,n){var r=n(352);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,n){var r=n(352);e.exports=function(e){return r(this,e).get(e)}},function(e,t,n){var r=n(352);e.exports=function(e){return r(this,e).has(e)}},function(e,t,n){var r=n(352);e.exports=function(e,t){var n=r(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this}},function(e,t,n){var r=n(446),a=n(569),i=n(930),o=n(932),c=n(353),s=n(148),u=n(441),l=n(566),d="[object Object]",f=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,p,h,m){var v=s(e),g=s(t),b=v?"[object Array]":c(e),_=g?"[object Array]":c(t),y=(b="[object Arguments]"==b?d:b)==d,E=(_="[object Arguments]"==_?d:_)==d,O=b==_;if(O&&u(e)){if(!u(t))return!1;v=!0,y=!1}if(O&&!y)return m||(m=new r),v||l(e)?a(e,t,n,p,h,m):i(e,t,b,n,p,h,m);if(!(1&n)){var w=y&&f.call(e,"__wrapped__"),C=E&&f.call(t,"__wrapped__");if(w||C){var S=w?e.value():e,A=C?t.value():t;return m||(m=new r),h(S,A,n,p,m)}}return!!O&&(m||(m=new r),o(e,t,n,p,h,m))}},function(e,t){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},function(e,t,n){var r=n(266),a=n(570),i=n(350),o=n(569),c=n(931),s=n(451),u=r?r.prototype:void 0,l=u?u.valueOf:void 0;e.exports=function(e,t,n,r,u,d,f){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new a(e),new a(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=c;case"[object Set]":var h=1&r;if(p||(p=s),e.size!=t.size&&!h)return!1;var m=f.get(e);if(m)return m==t;r|=2,f.set(e,t);var v=o(p(e),p(t),r,u,d,f);return f.delete(e),v;case"[object Symbol]":if(l)return l.call(e)==l.call(t)}return!1}},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},function(e,t,n){var r=n(571),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,i,o,c){var s=1&n,u=r(e),l=u.length;if(l!=r(t).length&&!s)return!1;for(var d=l;d--;){var f=u[d];if(!(s?f in t:a.call(t,f)))return!1}var p=c.get(e),h=c.get(t);if(p&&h)return p==t&&h==e;var m=!0;c.set(e,t),c.set(t,e);for(var v=s;++d<l;){var g=e[f=u[d]],b=t[f];if(i)var _=s?i(b,g,f,t,e,c):i(g,b,f,e,t,c);if(!(void 0===_?g===b||o(g,b,n,i,c):_)){m=!1;break}v||(v="constructor"==f)}if(m&&!v){var y=e.constructor,E=t.constructor;y==E||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof E&&E instanceof E||(m=!1)}return c.delete(e),c.delete(t),m}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,a=0,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[a++]=o)}return i}},function(e,t,n){var r=n(236)(n(180),"DataView");e.exports=r},function(e,t,n){var r=n(236)(n(180),"Promise");e.exports=r},function(e,t,n){var r=n(236)(n(180),"WeakMap");e.exports=r},function(e,t,n){var r=n(575),a=n(297);e.exports=function(e){for(var t=a(e),n=t.length;n--;){var i=t[n],o=e[i];t[n]=[i,o,r(o)]}return t}},function(e,t,n){var r=n(568),a=n(939),i=n(945),o=n(455),c=n(575),s=n(576),u=n(311);e.exports=function(e,t){return o(e)&&c(t)?s(u(e),t):function(n){var o=a(n,e);return void 0===o&&o===t?i(n,e):r(t,o,3)}}},function(e,t,n){var r=n(454);e.exports=function(e,t,n){var a=null==e?void 0:r(e,t);return void 0===a?n:a}},function(e,t,n){var r=n(941),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,o=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(a,(function(e,n,r,a){t.push(r?a.replace(i,"$1"):n||e)})),t}));e.exports=o},function(e,t,n){var r=n(942);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},function(e,t,n){var r=n(448);function a(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var o=e.apply(this,r);return n.cache=i.set(a,o)||i,o};return n.cache=new(a.Cache||r),n}a.Cache=r,e.exports=a},function(e,t,n){var r=n(944);e.exports=function(e){return null==e?"":r(e)}},function(e,t,n){var r=n(266),a=n(355),i=n(148),o=n(333),c=r?r.prototype:void 0,s=c?c.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(i(t))return a(t,e)+"";if(o(t))return s?s.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},function(e,t,n){var r=n(946),a=n(947);e.exports=function(e,t){return null!=e&&a(e,t,r)}},function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},function(e,t,n){var r=n(354),a=n(440),i=n(148),o=n(442),c=n(443),s=n(311);e.exports=function(e,t,n){for(var u=-1,l=(t=r(t,e)).length,d=!1;++u<l;){var f=s(t[u]);if(!(d=null!=e&&n(e,f)))break;e=e[f]}return d||++u!=l?d:!!(l=null==e?0:e.length)&&c(l)&&o(f,l)&&(i(e)||a(e))}},function(e,t,n){var r=n(949),a=n(950),i=n(455),o=n(311);e.exports=function(e){return i(e)?r(o(e)):a(e)}},function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},function(e,t,n){var r=n(454);e.exports=function(e){return function(t){return r(t,e)}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"static/sidebar_promo_card_image.45d873a08cd3eb44429c2913d0b84ec1.png"},function(e,t,n){e.exports=n.p+"static/sidebar_promo_card_image_2x.7dfbf52765761f171964194989fe09cc.png"},,,function(e,t,n){"use strict";var r=n(1021);function a(){}e.exports=function(){function e(e,t,n,a,i,o){if(o!==r){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=a,n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r="function"==typeof Symbol&&Symbol.for,a=r?Symbol.for("react.element"):60103,i=r?Symbol.for("react.portal"):60106,o=r?Symbol.for("react.fragment"):60107,c=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,u=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,d=r?Symbol.for("react.async_mode"):60111,f=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,m=r?Symbol.for("react.suspense_list"):60120,v=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,b=r?Symbol.for("react.block"):60121,_=r?Symbol.for("react.fundamental"):60117,y=r?Symbol.for("react.responder"):60118,E=r?Symbol.for("react.scope"):60119;function O(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case a:switch(e=e.type){case d:case f:case o:case s:case c:case h:return e;default:switch(e=e&&e.$$typeof){case l:case p:case g:case v:case u:return e;default:return t}}case i:return t}}}function w(e){return O(e)===f}t.AsyncMode=d,t.ConcurrentMode=f,t.ContextConsumer=l,t.ContextProvider=u,t.Element=a,t.ForwardRef=p,t.Fragment=o,t.Lazy=g,t.Memo=v,t.Portal=i,t.Profiler=s,t.StrictMode=c,t.Suspense=h,t.isAsyncMode=function(e){return w(e)||O(e)===d},t.isConcurrentMode=w,t.isContextConsumer=function(e){return O(e)===l},t.isContextProvider=function(e){return O(e)===u},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===a},t.isForwardRef=function(e){return O(e)===p},t.isFragment=function(e){return O(e)===o},t.isLazy=function(e){return O(e)===g},t.isMemo=function(e){return O(e)===v},t.isPortal=function(e){return O(e)===i},t.isProfiler=function(e){return O(e)===s},t.isStrictMode=function(e){return O(e)===c},t.isSuspense=function(e){return O(e)===h},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===f||e===s||e===c||e===h||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===v||e.$$typeof===u||e.$$typeof===l||e.$$typeof===p||e.$$typeof===_||e.$$typeof===y||e.$$typeof===E||e.$$typeof===b)},t.typeOf=O},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),o=new w(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return S()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var c=y(o,n);if(c){if(c===l)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function d(){}function f(){}function p(){}var h={};h[a]=function(){return this};var m=Object.getPrototypeOf,v=m&&m(m(C([])));v&&v!==t&&n.call(v,a)&&(h=v);var g=p.prototype=d.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){var r;this._invoke=function(a,i){function o(){return new t((function(r,o){!function r(a,i,o,c){var s=u(e[a],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,o,c)}),(function(e){r("throw",e,o,c)})):t.resolve(d).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,c)}))}c(s.arg)}(a,i,r,o)}))}return r=r?r.then(o,o):o()}}function y(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,y(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function C(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=g.constructor=p,p.constructor=f,f.displayName=c(p,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,o,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(_.prototype),_.prototype[i]=function(){return this},e.AsyncIterator=_,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new _(s(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(g),c(g,o,"Generator"),g[a]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=C,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;O(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.IconSettingsProvider=t.IconSettingsContext=void 0;var a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var c=a?Object.getOwnPropertyDescriptor(e,o):null;c&&(c.get||c.set)?Object.defineProperty(n,o,c):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(n(0));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=(0,a.createContext)({});t.IconSettingsContext=c;t.IconSettingsProvider=function(e){var t=e.children,n=o(e,["children"]),r=(0,a.useMemo)((function(){return n}),[n.classPrefix,n.globalClasses]);return a.default.createElement(c.Provider,{value:r},t)}},,,,,,,,,,,function(e,t,n){var r=n(563),a=n(258);e.exports=function(e,t){var n=-1,i=a(e)?Array(e.length):[];return r(e,(function(e,r,a){i[++n]=t(e,r,a)})),i}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t){e.exports=n(9)},function(e,t){e.exports=n(1085)},function(e,t){e.exports=n(1088)},function(e,t){e.exports=n(1089)},function(e,t){e.exports=n(1090)},function(e,t,n){"use strict";n.r(t),n.d(t,"LOGGER_DOMAIN_NAME",(function(){return i})),n.d(t,"attachLogger",(function(){return x}));var r=n(0),a=n(1);const i="@effector-logger";function o(e){return e.path.filter(e=>e!==i).join("/")}function c(e){var t,n,r;return null!==(r=null===(n=null===(t=e.defaultConfig)||void 0===t?void 0:t.loc)||void 0===n?void 0:n.file)&&void 0!==r?r:" "}function s(e,t,n){r.is.domain(t)?function(e,t,n){r.is.store(e)&&n(e.getState()),(r.is.store(e)?e.updates:e).watch(n)}(e,0,n):function(e,t,n){r.is.store(e)&&n(t.getState(e));const a=r.is.store(e)?e.updates:e;Object(r.createNode)({node:[r.step.run({fn:n})],parent:t.find(a)})}(e,t,n)}var u=n(2),l=n.n(u),d=n(3);const f=n.n(d).a?"  ":"",p=[],h=[],m=[],v="padding-left: 4px; padding-right: 4px; font-weight: normal;",g="color: #9e9e9e; padding-left: 20px;",b=[["☄️","%s",'line-height:1.5; color: #000; font-family: "Apple Emoji Font"; font-weight: normal !important;'],["effector","%s","font-family: Menlo, monospace;"]];function _(e,t,n){const r=[],a=[];e.unshift(...b),e.forEach(([t,n,i],o)=>{r.push(`%c${n}%c`),a.push(`${v} ${i}`,t,((e,t,n)=>e===t-1?"color: currentColor; background-color: transparent;":n)(o,e.length,`${v} ${i}`))}),t.forEach(([e,t,n])=>{r.push("%c"+t),a.push("padding-left: 4px; padding-right: 4px; font-weight: normal; "+n,e)});const i=[r.join(f),...a];"open"===n?console.group(...i):"collapsed"===n?console.groupCollapsed(...i):console.log(...i)}const y=["new","%s","background-color: #29b6f6; color: #000"],E=e=>e.split("/").pop()||e,O=e=>[E(e),"%s","background-color: #7e57c2; color: #fff"],w=e=>[E(e),"%s","background-color: #9ccc65; color: #000"],C=e=>[E(e),"%s","background-color: #26a69a; color: #000"],S=l()(()=>{const e=p.splice(0),t=h.splice(0),n=m.splice(0);e.length+t.length+n.length>0&&(_([y],[["Initialized","%s",""],[`events(${t.length})`,"%s",""],[`effects(${n.length})`,"%s",""],[`stores(${e.length})`,"%s",""]],"collapsed"),e.length&&e.forEach(e=>{const t=o(e.compositeName),n=c(e);_([y,O(t)],[["-> ","%s",""],[e.getState(),"%o",""],[n,"%s",g],[t,"%s",""]])}),t.length>0&&t.forEach(e=>{const t=o(e.compositeName),n=c(e);_([y,w(t)],[[n,"%s",g],[t,"%s",""]])}),n.length>0&&n.forEach(e=>{const t=o(e.compositeName),n=c(e);_([y,C(t)],[[n,"%s",g],[t,"%s",""]])}),console.groupEnd())},5);var A=n(4),k=n.n(A);const j="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__,T={instanceId:"object"==typeof document?"☄️ "+document.title:"☄️ no title instance"},I={};function P(e,t){k()(I,e.replace(/\//g,"."),t)}function D(e,t){P(e,{inFlight:t.inFlight.getState(),pending:t.pending.getState()})}const N={reduxDevtools:"enabled",console:"enabled",inspector:"enabled"};function x(e,t={}){const n=Object.assign(Object.assign({},N),t),i="enabled"===n.console,u="enabled"===n.reduxDevtools,l="enabled"===n.inspector;function d(t){const n=o(t.compositeName),r=c(t);i&&function(e){h.push(e),S()}(t),l&&a.addEvent(t),s(t,e,e=>{i&&function(e,t,n){_([w(e)],[[n,"%o","padding-left: 4px;"],[t,"%s",g],[e,"%s",g]])}(n,r,e),u&&function(e,t){j&&j.send({type:e+" (event)",payload:t},I,T)}(n,e)})}function f(t){const n=o(t.compositeName),r=c(t);i&&function(e){p.push(e),S()}(t),u&&function(e){P(o(e.compositeName),e.defaultState)}(t),l&&a.addStore(t);const d=t.map.bind(t);t.map=(e,n)=>{const r=d(e,n);return r.compositeName.path=t.compositeName.path.slice(0,-1),r.compositeName.path.push(t.compositeName.path.slice(-1)+" -> *"),l&&a.addStore(r,{mapped:!0}),r},s(t,e,e=>{i&&function(e,t,n){_([O(e)],[["-> ","%s",""],[n,"%o",""],[t,"%s",g],[e,"%s",g]])}(n,r,e),u&&function(e,t){P(e,t),j&&j.send({type:e+" (store updated)",value:t},I,T)}(n,e)})}function v(t){const n=o(t.compositeName),r=c(t);i&&function(e){m.push(e),S()}(t),u&&function(e,t){D(e,t)}(n,t),l&&a.addEffect(t),s(t,e,e=>{i&&function(e,t,n){_([C(e)],[[n,"%o","padding-left: 4px;"],[t,"%s",g],[e,"%s",g]])}(n,r,e),u&&function(e,t,n){D(e,t),j&&j.send({type:e+" (effect called)",params:n},I,T)}(n,t,e)}),s(t.done,e,({params:e,result:a})=>{i&&function(e,t,n,r){_([C(e)],[["done ✅","%s",""],[n,"(%o)","padding-left: 4px;"],["-> ","%s",""],[r,"%o","padding: 0;"],[t,"%s",g],[e,"%s",g]])}(n,r,e,a),u&&function(e,t,n,r){D(e,t),j&&j.send({type:e+".done (effect finished)",params:n,result:r},I,T)}(n,t,e,a)}),s(t.fail,e,({params:e,error:a})=>{i&&function(e,t,n,r){const a=r instanceof Error;_([C(e)],[["fail ❌","%s",""],[n,"(%o)","padding-left: 4px;"],["-> ","%s",""],a?[String(r),"%s",""]:[r,"%o","padding: 0;"],[t,"%s",g],[e,"%s",g]],a?"collapsed":void 0),a&&_([],[[" ","%s",""],[r,"%o","padding-left: 20px;"]]),console.groupEnd()}(n,r,e,a),u&&function(e,t,n,r){D(e,t),j&&j.send({type:e+".fail (effect finished)",params:n,error:r},I,T)}(n,t,e,a)})}if(r.is.domain(e))e.onCreateEvent(d),e.onCreateStore(f),e.onCreateEffect(v);else{const t=e.cloneOf;for(const e of t.history.events)d(e);for(const e of t.history.effects)v(e);for(const e of t.history.stores)f(e)}}}])},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t){e.exports=n(595)},function(e,t){e.exports=n(9)},function(e,t){e.exports=n(1086)},function(e,t,n){"use strict";n.r(t),n.d(t,"createInspector",(function(){return tt})),n.d(t,"addStore",(function(){return nt})),n.d(t,"addEvent",(function(){return rt})),n.d(t,"addEffect",(function(){return at}));var r,a,i,o,c,s,u,l,d,f,p,h,m,v,g,b,_,y,E,O,w,C,S=n(1),A=n(0),k=n(2);function j(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var T=k.styled.div(r||(r=j(["\n  background-color: white;\n  border-radius: 0.5rem;\n  box-shadow: 0 14.5px 5.2px -10px rgba(0, 0, 0, 0.038),\n    0 23.9px 16.6px -10px rgba(0, 0, 0, 0.057),\n    0 64px 118px -10px rgba(0, 0, 0, 0.08), 0 0 10px -3px rgba(0, 0, 0, 0.08);\n  display: flex;\n  flex-direction: row;\n  bottom: 3rem;\n  right: 3rem;\n  top: 3rem;\n  position: fixed;\n  z-index: 1000;\n  user-select: none;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica,\n    Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',\n    'PT Sans', Helvetica, Arial, sans-serif;\n  -ms-text-size-adjust: 100%;\n  -webkit-text-size-adjust: 100%;\n  line-height: 1.5;\n  width: 100%;\n  max-width: 46rem;\n\n  & > * + * {\n    border-left: 1px solid rgba(0, 0, 0, 0.08);\n  }\n\n  @media screen and (max-width: 700px) {\n    max-width: 30rem;\n  }\n"]))),I=k.styled.section(a||(a=j(["\n  display: flex;\n  flex-flow: column;\n  position: relative;\n  width: 100%;\n  border-radius: inherit;\n"]))),P=k.styled.div(i||(i=j(["\n  background-color: white;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.08);\n  border-radius: inherit;\n  border-bottom-left-radius: 0;\n  border-bottom-right-radius: 0;\n  display: flex;\n  font-size: 1.2rem;\n  font-weight: bold;\n  line-height: 2rem;\n  position: sticky;\n  left: 0;\n  right: 0;\n  top: 0;\n"]))),D=k.styled.div(o||(o=j(["\n  padding: 0.5rem 1rem;\n  cursor: pointer;\n  border-radius: inherit;\n  border-top-right-radius: 0;\n\n  &:hover {\n    box-shadow: inset 0 -2px 0 0 mediumvioletred;\n  }\n\n  &:not(:first-child) {\n    border-top-left-radius: 0;\n  }\n\n  &[data-active='true'] {\n    background: linear-gradient(rgba(199, 21, 133, 0), rgba(199, 21, 133, 0.1));\n  }\n"]))),N=k.styled.div(c||(c=j(["\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  overflow-y: auto;\n"]))),x=k.styled.ul(s||(s=j(["\n  list-style-type: none;\n  margin: 0 0;\n  padding: 0 0;\n  overflow-x: auto;\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n"]))),R=k.styled.li(u||(u=j(["\n  display: flex;\n  padding: 0.5rem 1rem;\n  margin: 0 0;\n"]))),M=k.styled.pre(l||(l=j(["\n  display: flex;\n  margin: 0 0;\n  color: darkred;\n  font-family: 'JetBrains Mono', hasklig, monofur, monospace;\n"]))),L=k.styled.pre(d||(d=j(["\n  margin: 0 0;\n  font-family: 'JetBrains Mono', hasklig, monofur, monospace;\n"]))),B=k.styled.button(f||(f=j(["\n  background-color: transparent;\n  border: 1px solid rgba(0, 0, 0, 0.4);\n  padding: 0.2rem 0.4rem;\n  margin: 0;\n  font-family: 'JetBrains Mono', hasklig, monofur, monospace;\n  border-radius: 6px;\n  margin-left: 1rem;\n"]))),F=k.styled.span(p||(p=j(["\n  display: inline-block;\n\n  [data-opened='true'] > & {\n    display: block;\n    padding-left: 8px;\n  }\n\n  &[data-hidden='folded'] {\n    display: none;\n\n    [data-opened='true'] > & {\n      display: block;\n    }\n  }\n\n  &[data-hidden='expanded'] {\n    display: inline-block;\n\n    [data-opened='true'] > & {\n      display: none;\n    }\n  }\n\n  &:not(:last-child)::after {\n    content: ', ';\n  }\n"]))),H=k.styled.span(h||(h=j(["\n  color: mediumvioletred;\n  font-style: italic;\n"]))),V=k.styled.span(m||(m=j(["\n  color: blue;\n"]))),U=k.styled.span(v||(v=j(["\n  color: green;\n"]))),z=k.styled.span(g||(g=j(["\n  color: blue;\n  font-weight: bold;\n"]))),G={boolean:H,date:k.styled.span(b||(b=j(["\n  color: olive;\n"]))),keyword:z,number:V,string:U,symbol:k.styled.span(_||(_=j([""]))),regexp:k.styled.span(y||(y=j(["\n  color: orangered;\n"])))},W=k.styled.div(E||(E=j(["\n  display: flex;\n  padding: 1rem;\n"]))),q=k.styled.input(O||(O=j([""]))),K=k.styled.label(w||(w=j(["\n  padding: 0 0.5rem;\n"]))),Y=k.styled.input(C||(C=j(["\n  padding: 0 0.5rem;\n  margin: 0 0.5rem;\n  border: 1px solid rgba(0, 0, 0, 0.4);\n  border-radius: 0.2rem;\n"]))),Z=function(e){var t=e.title,n=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,["title"]);K((function(){q((function(){Object(A.spec)({attr:{type:"checkbox"}}),Object(A.spec)(n)})),Object(A.spec)({text:t})}))},Q=Math.pow(983020,3);function J(e,t){var n,r;return null!==(n=null!==(r=localStorage.getItem("".concat(Q,"-").concat(e)))&&void 0!==r?r:t)&&void 0!==n?n:""}function X(e,t){return localStorage.setItem("".concat(Q,"-").concat(e),t),t}function $(e){return{read:function(t){return J(e,t)},write:function(t){return X(e,t)}}}function ee(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?te(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ne=$("last-tab");function re(e){var t=Object.keys(e),n=t[0],r=ne.read(n),a=t.includes(r)?r:n,i=Object(S.createEvent)({loc:{file:"/src/tabs.ts",line:10,column:22},name:"changeTab",sid:"-z2hzvl"}),o=Object(S.restore)(i,a,{loc:{file:"/src/tabs.ts",line:11,column:17},name:"$tab",sid:"16xfb8"});o.watch(ne.write),I((function(){P((function(){var n,r=ee(t);try{var a=function(){var t=n.value,r=e[t];D({text:r.title,data:{active:o.map((function(e){return e===t}))},handler:{click:i.prepend((function(){return t}))}})};for(r.s();!(n=r.n()).done;)a()}catch(e){r.e(e)}finally{r.f()}}));var n,r=ee(t);try{var a=function(){var t=n.value,r=e[t];N({visible:o.map((function(e){return e===t})),fn:function(){r.fn({changeTab:i})}})};for(r.s();!(n=r.n()).done;)a()}catch(e){r.e(e)}finally{r.f()}}))}function ae(e){return function(e){if(Array.isArray(e))return ce(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||oe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}}(e,t)||oe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){if(e){if("string"==typeof e)return ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ce(e,t):void 0}}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var se=/\[object ([\w\s]+)\]/;function ue(e){var t=Object.prototype.toString.call(e),n=se.exec(t);return n?n[1]:"unknown"}function le(e){var t=Object(A.rec)((function(e){var n=e.store,r=ie(Object(A.remap)(n,["value","parentOpened"]),2),a=r[0],i=r[1],o=Object(S.createEvent)({loc:{file:"/src/object-view.ts",line:13,column:32},name:"foldableClicked",sid:"-stmnmb"}),c=Object(S.createStore)(!1,{loc:{file:"/src/object-view.ts",line:14,column:29},name:"$localOpened",sid:"-lmwtnk"}).on(o,(function(e){return!e}));o.watch((function(e){return console.warn("foldableClicked",e)}));var s=Object(S.combine)({"ɔ":[i,c,function(e,t){return!0===e&&t}],config:{loc:{file:"/src/object-view.ts",line:16,column:24},name:"$opened",sid:"7e1sme"}});Object(A.variant)({source:Object(S.combine)({"ɔ":[a,s,function(e,t){return{type:ue(e),value:e,opened:t}}],config:{loc:{file:"/src/object-view.ts",line:18,column:20},name:"source",sid:"-22s5pi"}}),key:"type",cases:{String:function(e){var t=e.store;return G.string({text:['"',Object(A.remap)(t,"value"),'"']})},Number:function(e){var t=e.store;return G.number({text:Object(A.remap)(t,"value")})},BigInt:function(e){var t=e.store;return G.number({text:[Object(A.remap)(t,"value"),"n"],attr:{title:"BigInt"}})},Boolean:function(e){var t=e.store;return G.boolean({text:Object(A.remap)(t,"value")})},Null:function(){return G.keyword({text:"null"})},Undefined:function(){return G.keyword({text:"undefined"})},Symbol:function(e){var t=e.store;return G.symbol({text:Object(A.remap)(t,"value")})},RegExp:function(e){var t=e.store,n=Object(A.remap)(t,"value"),r=ie(Object(A.remap)(n,["source","flags"]),2),a=r[0],i=r[1];G.regexp({text:["/",a,"/",i]})},Function:function(e){var t=e.store,n=Object(A.remap)(t,"value"),r={title:n.map((function(e){return e.toString()}))};Object(A.h)("span",{text:"function",attr:r}),G.keyword({text:n.map((function(e){return e.name?" ".concat(e.name):""})),attr:r}),Object(A.h)("span",{text:"()",attr:r})},AsyncFunction:function(e){var t=e.store,n=Object(A.remap)(t,"value"),r={title:n.map((function(e){return e.toString()}))};Object(A.h)("span",{text:"async function",attr:r}),G.keyword({text:n.map((function(e){return e.name?" ".concat(e.name):""})),attr:r}),Object(A.h)("span",{text:"()",attr:r})},Window:function(e){var t=e.store,n=Object(A.remap)(t,"opened");Object(A.h)("span",(function(){Object(A.spec)({data:{opened:n}}),Object(A.h)("span",{text:"Window {...",fn:function(){Object(A.handler)({passive:!0,stop:!0,capture:!0},{click:o})}}),Object(A.spec)({text:"}"})}))},Date:function(){G.date({text:a.map((function(e){var t;return null===(t=e.toISOString)||void 0===t?void 0:t.call(e)})),attr:{title:a}})},Array:function(e){var n=e.store,r=ie(Object(A.remap)(n,["value","opened"]),2),a=r[0],i=r[1];Object(A.h)("span",(function(){Object(A.spec)({data:{opened:i}}),Object(A.h)("span",{text:"Array [",data:{clickable:!0},fn:function(){Object(A.handler)({passive:!0,stop:!0,capture:!0,prevent:!0},{click:o})}}),Object(A.list)(a,(function(e){var n=e.store,r=e.key;return F((function(){return t({store:Object(S.combine)({"ɔ":[{value:n,parentOpened:i,key:r.map(String)}],config:{loc:{file:"/src/object-view.ts",line:95,column:35},name:"store",sid:"z8226z"}})})}))})),Object(A.spec)({text:"]"})}))},Arguments:function(e){var n=e.store,r=ie(Object(A.remap)(n,["value","opened"]),2),a=r[0],i=r[1];Object(A.h)("span",(function(){Object(A.spec)({data:{opened:i}}),Object(A.h)("span",{text:"Arguments [",fn:function(){Object(A.handler)({passive:!0,stop:!0,capture:!0},{click:o})}}),Object(A.list)(a.map((function(e){return ae(e)})),(function(e){var n=e.store,r=e.key;return F((function(){return t({store:Object(S.combine)({"ɔ":[{value:n,parentOpened:i,key:r.map(String)}],config:{loc:{file:"/src/object-view.ts",line:118,column:35},name:"store",sid:"r5r5mn"}})})}))})),Object(A.spec)({text:"]"})}))},Set:function(e){var n=e.store,r=ie(Object(A.remap)(n,["value","opened"]),2),a=r[0],i=r[1];Object(A.h)("span",(function(){Object(A.spec)({data:{opened:i}}),Object(A.h)("span",{text:"Set [",fn:function(){Object(A.handler)({passive:!0,stop:!0,capture:!0},{click:o})}}),Object(A.list)(a.map((function(e){return ae(e.values())})),(function(e){var n=e.store,r=e.key;return F((function(){return t({store:Object(S.combine)({"ɔ":[{value:n,parentOpened:i,key:r.map(String)}],config:{loc:{file:"/src/object-view.ts",line:141,column:35},name:"store",sid:"-35hefr"}})})}))})),Object(A.spec)({text:"]"})}))},Map:function(e){var n=e.store,r=ie(Object(A.remap)(n,["value","opened"]),2),a=r[0],i=r[1];Object(A.h)("span",(function(){Object(A.spec)({data:{opened:i}}),Object(A.h)("span",(function(){Object(A.spec)({text:"Map {"}),Object(A.handler)({passive:!0,stop:!0,capture:!0},{click:o})})),Object(A.list)(a.map((function(e){return ae(e.entries())})),(function(e){var n=e.store,r=ie(Object(A.remap)(n,["0","1"]),2),a=r[0],c=r[1];F((function(){G.string({text:['"',a,'"'],fn:function(){Object(A.handler)({passive:!0,stop:!0,capture:!0},{click:o})}}),Object(A.h)("span",{text:" => "}),t({store:Object(S.combine)({"ɔ":[{value:c,parentOpened:i,key:a}],config:{loc:{file:"/src/object-view.ts",line:172,column:43},name:"store",sid:"-tocynm"}})})}))})),Object(A.spec)({text:"}"})}))},Error:function(e){var n=e.store,r=ie(Object(A.remap)(n,["value","opened"]),2),a=r[0],i=r[1],c=ie(Object(A.remap)(a,["name","message","stack"]),3),s=c[0],u=c[1],l=c[2];Object(A.h)("span",(function(){Object(A.spec)({data:{opened:i}}),Object(A.h)("span",{text:[s," {"],attr:{title:a.map((function(e){return e.constructor.name}))},fn:function(){Object(A.handler)({passive:!0,stop:!0,capture:!0},{click:o})}}),F((function(){Object(A.spec)({data:{hidden:"expanded"}}),G.string({text:['"message"'],fn:function(){Object(A.handler)({passive:!0,stop:!0,capture:!0},{click:o})}}),Object(A.h)("span",{text:": "}),t({store:Object(S.combine)({"ɔ":[{value:u,parentOpened:i,key:"message"}],config:{loc:{file:"/src/object-view.ts",line:212,column:39},name:"store",sid:"-hw05k0"}})})})),F((function(){Object(A.spec)({data:{hidden:"folded"}}),G.string({text:['"stack"'],fn:function(){Object(A.handler)({passive:!0,stop:!0,capture:!0},{click:o})}}),Object(A.h)("span",{text:": "}),t({store:Object(S.combine)({"ɔ":[{value:l,parentOpened:i,key:"stack"}],config:{loc:{file:"/src/object-view.ts",line:229,column:39},name:"store",sid:"3phfe"}})})})),Object(A.list)(a.map((function(e){return ae(Object.entries(e))})),(function(e){var n=e.store,r=ie(Object(A.remap)(n,["0","1"]),2),a=r[0],c=r[1];F((function(){G.string({text:['"',a,'"'],fn:function(){Object(A.handler)({passive:!0,stop:!0,capture:!0},{click:o})}}),Object(A.h)("span",{text:": "}),t({store:Object(S.combine)({"ɔ":[{value:c,parentOpened:i,key:a}],config:{loc:{file:"/src/object-view.ts",line:247,column:43},name:"store",sid:"sietol"}})})}))}))})),Object(A.h)("span",{text:"}"})},__:function(e){var n=e.store;Object(A.h)("span",(function(){var e=ie(Object(A.remap)(n,["type","value","opened"]),3),r=e[0],a=e[1],i=e[2];Object(A.spec)({data:{opened:i}}),Object(A.h)("span",{text:[r," {"],fn:function(){Object(A.handler)({passive:!0,stop:!0,capture:!0},{click:o})}}),Object(A.list)(a.map((function(e){return ae(Object.entries(e))})),(function(e){var n=e.store,r=ie(Object(A.remap)(n,["0","1"]),2),a=r[0],c=r[1];F((function(){G.string({text:['"',a,'"'],fn:function(){Object(A.handler)({passive:!0,stop:!0,capture:!0},{click:o})}}),Object(A.h)("span",{text:": "}),t({store:Object(S.combine)({"ɔ":[{value:c,parentOpened:i,key:a}],config:{loc:{file:"/src/object-view.ts",line:284,column:43},name:"store",sid:"err1f0"}})})}))}))})),Object(A.h)("span",{text:"}"})}}})}));t({store:Object(S.combine)({"ɔ":[{value:e.value,parentOpened:Object(S.createStore)(!0,{loc:{file:"/src/object-view.ts",line:301,column:26},name:"parentOpened",sid:"-8mc831"}),key:""}],config:{loc:{file:"/src/object-view.ts",line:299,column:15},name:"store",sid:"vtddfn"}})})}function de(e,t){if(e){if("string"==typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fe(e,t):void 0}}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pe,he,me=(pe="filter-kinds",{read:function(e){return JSON.parse(J(pe,JSON.stringify(e)))},write:function(e){return X(pe,JSON.stringify(e)),e}}),ve=$("filter-text");function ge(e){var t=Object(S.createEvent)({loc:{file:"/src/logs.ts",line:10,column:23},name:"toggleKind",sid:"a40s1e"}),n=Object(S.createEvent)({loc:{file:"/src/logs.ts",line:11,column:26},name:"filterChanged",sid:"rus8aq"}),r=Object(S.createEvent)({loc:{file:"/src/logs.ts",line:12,column:25},name:"clearClicked",sid:"fqsv0g"}),a=Object(S.createStore)(me.read(["event","store"]),{loc:{file:"/src/logs.ts",line:13,column:19},name:"$kinds",sid:"szzha3"}),i=Object(S.restore)(n,ve.read(""),{loc:{file:"/src/logs.ts",line:14,column:24},name:"$filterText",sid:"-aznuxe"});a.on(t,(function(e,t){return e.includes(t)?e.filter((function(e){return e!==t})):[].concat(function(e){return function(e){if(Array.isArray(e))return fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||de(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e),[t])})).watch(me.write),i.watch(ve.write),e.on(r,(function(){return[]})),W((function(){Object(A.h)("span",{text:"Show: "}),Z({title:"Event",attr:{checked:a.map((function(e){return e.includes("event")}))},handler:{click:t.prepend((function(){return"event"}))}}),Z({title:"Store",attr:{checked:a.map((function(e){return e.includes("store")}))},handler:{click:t.prepend((function(){return"store"}))}}),Z({title:"Effect",attr:{checked:a.map((function(e){return e.includes("effect")}))},handler:{click:t.prepend((function(){return"effect"}))}}),Object(A.h)("span",{text:"Filter:"}),Y({attr:{value:i},handler:{change:n.prepend((function(e){var t,n;return null!==(t=null===(n=e.currentTarget)||void 0===n?void 0:n.value)&&void 0!==t?t:""}))}}),B({text:"Clear",handler:{click:r}})})),x((function(){Object(A.list)({source:e,key:"id",fields:["kind","name","payload","datetime"],fn:function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}}(e,t)||de(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e.fields,4),n=t[0],r=t[1],o=t[2],c=t[3],s=Object(S.combine)({"ɔ":[n,a,function(e,t){return t.includes(e)}],config:{loc:{file:"/src/logs.ts",line:54,column:37},name:"$kindMatched",sid:"-9wrr4d"}}),u=Object(S.combine)({"ɔ":[i,r,function(e,t){return t.includes(e)}],config:{loc:{file:"/src/logs.ts",line:55,column:37},name:"$textMatched",sid:"1kzb89"}}),l=Object(S.combine)({"ɔ":[s,u,function(e,t){return e&&t}],config:{loc:{file:"/src/logs.ts",line:56,column:33},name:"$visible",sid:"-kgb7m1"}});R({visible:l,fn:function(){var e=c.map((function(e){return e.toISOString()})),t=c.map((function(e){return e.toLocaleTimeString()}));M({text:[t," ▸ "],attr:{title:e}}),M({text:n}),M({text:[" «",r,"» "]}),L((function(){return le({value:o})}))}})}})}))}function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ee(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Oe(e){x((function(){var t=e.map((function(e){return Object.entries(e).map((function(e){var t=ye(e,2);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){_e(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({name:t[0]},t[1])}))}));Object(A.list)({source:t,key:"name",fields:["name","value"],fn:function(e){var t=ye(e.fields,2),n=t[0],r=t[1];R((function(){M({text:[n,": "]}),L((function(){le({value:r})}))}))}})}))}function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ae(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ke(e){x((function(){var t=e.map((function(e){return Object.entries(e).map((function(e){var t=Se(e,2);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){Ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({name:t[0]},t[1])}))}));Object(A.list)({source:t,key:"name",fields:["name","lastTriggeredWith"],fn:function(e){var t=Se(e.fields,1)[0];R((function(){M({text:[t," "]})}))}})}))}function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function De(e){x((function(){var t=e.map((function(e){return Object.entries(e).map((function(e){var t=Ie(e,2);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){Te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({sid:t[0]},t[1])}))}));Object(A.list)({source:t,key:"sid",fields:["name","inFlight"],fn:function(e){var t=Ie(e.fields,2),n=t[0],r=t[1];R((function(){M({text:[n," "]}),L((function(){Object(A.h)("span",(function(){var e,t;Object(A.h)("span",{text:[" {"]}),F((function(){G.string({text:'"inFlight": '}),G.number({text:r})})),Object(A.text)(he||(e=["}"],t||(t=e.slice(0)),he=Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))))}))}))}))}})}))}function Ne(e){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var xe=Object(S.createStore)(!1,{loc:{file:"/src/view.ts",line:9,column:19},name:"$isVisible",sid:"-n4epn7"}),Re=Object(S.createEvent)({loc:{file:"/src/view.ts",line:10,column:22},name:"togglePressed",sid:"-6mw5g1"}),Me=Object(S.createEvent)({loc:{file:"/src/view.ts",line:11,column:22},name:"showInspector",sid:"-y75g2u"});function Le(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];a&&Me(),console.info("%c[effector-inspector] %cPress %cCTRL+B %cto open Inspector","color: gray; font-size: 1rem;","color: currentColor; font-size: 1rem;","color: deepskyblue; font-family: monospace; font-size: 1rem;","color: currentColor; font-size: 1rem;"),T({visible:xe,fn:function(){re({stores:{title:"Stores",fn:function(){Oe(e)}},effects:{title:"Effects",fn:function(){De(n)}},events:{title:"Events",fn:function(){ke(t)}},logs:{title:"Logs",fn:function(){ge(r)}}})}})}function Be(e){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function He(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?He(Object(n),!0).forEach((function(t){Ue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):He(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}"object"===("undefined"==typeof document?"undefined":Ne(document))&&document.addEventListener("keypress",(function(e){2===e.keyCode&&e.ctrlKey&&Re()})),xe.on(Re,(function(e){return!e})).on(Me,(function(){return!0}));var ze=Object(S.createEvent)({loc:{file:"/src/index.ts",line:5,column:17},name:"storeAdd",sid:"-wopdia"}),Ge=Object(S.createEvent)({loc:{file:"/src/index.ts",line:6,column:21},name:"storeUpdated",sid:"vmsjku"}),We=Object(S.createStore)({},{loc:{file:"/src/index.ts",line:7,column:16},name:"$stores",sid:"i7hdcj"}),qe=Object(S.createEvent)({loc:{file:"/src/index.ts",line:8,column:17},name:"eventAdd",sid:"-or028u"}),Ke=Object(S.createEvent)({loc:{file:"/src/index.ts",line:9,column:23},name:"eventTriggered",sid:"86fn0c"}),Ye=Object(S.createStore)({},{loc:{file:"/src/index.ts",line:10,column:16},name:"$events",sid:"-bopi5k"}),Ze=Object(S.createEvent)({loc:{file:"/src/index.ts",line:11,column:18},name:"effectAdd",sid:"exj8si"}),Qe=Object(S.createEvent)({loc:{file:"/src/index.ts",line:12,column:24},name:"effectTriggered",sid:"-wmuqs0"}),Je=Object(S.createStore)({},{loc:{file:"/src/index.ts",line:13,column:17},name:"$effects",sid:"-548kt"}),Xe=Object(S.createStore)([],{loc:{file:"/src/index.ts",line:14,column:14},name:"$logs",sid:"dr2ta8"});We.on(ze,(function(e,t){return Ve(Ve({},e),{},Ue({},t.name,{value:t.store.getState(),mapped:t.mapped}))})).on(Ge,(function(e,t){var n=t.name,r=t.value;return e[n]=Ve(Ve({},e[n]),{},{value:r}),Ve({},e)})),Ye.on(qe,(function(e,t){return Ve(Ve({},e),{},Ue({},t.name,{mapped:t.mapped,lastTriggeredWith:void 0}))})).on(Ke,(function(e,t){var n=t.name,r=t.params;return e[n]=Ve(Ve({},e[n]),{},{lastTriggeredWith:r}),Ve({},e)})),Je.on(Ze,(function(e,t){return Ve(Ve({},e),{},Ue({},t.sid,{name:t.name,effect:t.effect,inFlight:t.effect.inFlight.getState()}))})).on(Qe,(function(e,t){var n=t.sid,r=e[n];return e[n]=Ve(Ve({},r),{},{inFlight:r.effect.inFlight.getState()}),Ve({},e)}));var $e=1e3,et=Object(S.createEffect)({handler:function(e){var t=e.name,n=e.kind,r=e.payload;return{id:(++$e).toString(36),kind:n,name:t,payload:r,datetime:new Date}}},{loc:{file:"/src/index.ts",line:60,column:23},name:"createRecordFx",sid:"-loxrq9"});function tt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="object"===("undefined"==typeof document?"undefined":Be(document))&&document.createElement("div");if(t)return t.classList.add("effector-inspector"),document.body.append(t),Object(A.using)(t,(function(){return Le(We,Ye,Je,Xe,e.visible)})),Object(A.using)(t,k.StyledRoot),{root:t}}function nt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.name||it(e);ze({store:e,name:n,mapped:t.mapped||!1}),Object(S.forward)({"ɔ":{from:e.updates.map((function(e){return{name:n,value:e}})),to:Ge},config:{loc:{file:"/src/index.ts",line:101,column:4},sid:"-4z1lr5"}})}function rt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.name||it(e);qe({event:e,name:n,mapped:t.mapped||!1}),Object(S.forward)({"ɔ":{from:e.map((function(e){return{name:n,params:e}})),to:Ke},config:{loc:{file:"/src/index.ts",line:109,column:4},sid:"-4un909"}})}function at(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=it(e),a=n.sid||e.sid||r;Ze({effect:e,name:r,sid:a,attached:null!==(t=n.attached)&&void 0!==t&&t}),Object(S.forward)({"ɔ":{from:[e,e.finally],to:Qe.prepend((function(){return{sid:a}}))},config:{loc:{file:"/src/index.ts",line:121,column:4},sid:"-40ycyr"}});var i=e.map((function(e){return{kind:"effect",name:r,payload:e}})),o=e.done.map((function(e){return{kind:"effect",name:r+".done",payload:e}})),c=e.fail.map((function(e){return{kind:"effect",name:r+".fail",payload:e}}));Object(S.forward)({"ɔ":{from:[i,o,c],to:et},config:{loc:{file:"/src/index.ts",line:140,column:4},sid:"-33ewrq"}})}function it(e){return e.compositeName.path.join("/")}Object(S.forward)({"ɔ":{from:Ke,to:et.prepend((function(e){return{kind:"event",name:e.name,payload:e.params}}))},config:{loc:{file:"/src/index.ts",line:71,column:0},sid:"-8rhkph"}}),Object(S.forward)({"ɔ":{from:Ge,to:et.prepend((function(e){return{kind:"store",name:e.name,payload:e.value}}))},config:{loc:{file:"/src/index.ts",line:79,column:0},sid:"-8n37yl"}}),Xe.on(et.doneData,(function(e,t){return[t].concat(function(e){return function(e){if(Array.isArray(e))return Fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fe(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e))}))}])},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t){e.exports=n(595)},function(e,t){e.exports=n(1087)},function(e,t){e.exports=n(9)},function(e,t,n){"use strict";n.r(t),n.d(t,"StyledRoot",(function(){return s})),n.d(t,"styled",(function(){return d}));var r=n(2),a=n(0),i=n(1);const o=Object(r.createEvent)(),c=Object(r.createStore)({map:new Map});function s(){const e=c.map(({map:e})=>[...e.values()].join(" "));Object(a.h)("style",{text:e})}c.on(o,(e,{id:t,styles:n})=>e.map.has(t)?e:(e.map.set(t,function(e,t){return Object(i.serialize)(Object(i.compile)(`.es-${e} { ${t} }`),i.stringify)}(t,n)),{map:e.map}));const u=(()=>{let e=9005e3;return()=>(++e).toString(36)})(),l=e=>(t,...n)=>{const r=u(),i=function(e,t){const n=[e[0]];return t.forEach((t,r)=>{if("function"==typeof t){if("string"!=typeof t.STYLED_ID)throw new TypeError("Passed not an effector styled component");n.push(".es-"+t.STYLED_ID)}else n.push(String(t));n.push(e[r+1])}),n.join("")}(t,n),c=t=>{o({id:r,styles:i}),Object(a.h)(e,()=>{Object(a.node)(e=>{e.classList.add("es-"+r)}),t&&("function"==typeof t?t():(Object(a.spec)(t),"function"==typeof t.fn&&t.fn()))})};return c.STYLED_ID=r,c};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","marquee","menu","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach(e=>{l[e]=l(e)});const d=l}])},function(e,t,n){"use strict";n.r(t),n.d(t,"CHARSET",(function(){return f})),n.d(t,"COMMENT",(function(){return o})),n.d(t,"COUNTER_STYLE",(function(){return _})),n.d(t,"DECLARATION",(function(){return s})),n.d(t,"DOCUMENT",(function(){return m})),n.d(t,"FONT_FACE",(function(){return b})),n.d(t,"FONT_FEATURE_VALUES",(function(){return y})),n.d(t,"IMPORT",(function(){return d})),n.d(t,"KEYFRAMES",(function(){return g})),n.d(t,"MEDIA",(function(){return l})),n.d(t,"MOZ",(function(){return a})),n.d(t,"MS",(function(){return r})),n.d(t,"NAMESPACE",(function(){return v})),n.d(t,"PAGE",(function(){return u})),n.d(t,"RULESET",(function(){return c})),n.d(t,"SUPPORTS",(function(){return h})),n.d(t,"VIEWPORT",(function(){return p})),n.d(t,"WEBKIT",(function(){return i})),n.d(t,"abs",(function(){return E})),n.d(t,"alloc",(function(){return Z})),n.d(t,"append",(function(){return D})),n.d(t,"caret",(function(){return q})),n.d(t,"char",(function(){return U})),n.d(t,"character",(function(){return B})),n.d(t,"characters",(function(){return F})),n.d(t,"charat",(function(){return j})),n.d(t,"column",(function(){return R})),n.d(t,"combine",(function(){return N})),n.d(t,"comment",(function(){return se})),n.d(t,"commenter",(function(){return re})),n.d(t,"compile",(function(){return ie})),n.d(t,"copy",(function(){return V})),n.d(t,"dealloc",(function(){return Q})),n.d(t,"declaration",(function(){return ue})),n.d(t,"delimit",(function(){return J})),n.d(t,"delimiter",(function(){return ne})),n.d(t,"escaping",(function(){return te})),n.d(t,"from",(function(){return O})),n.d(t,"hash",(function(){return w})),n.d(t,"identifier",(function(){return ae})),n.d(t,"indexof",(function(){return k})),n.d(t,"length",(function(){return M})),n.d(t,"line",(function(){return x})),n.d(t,"match",(function(){return S})),n.d(t,"middleware",(function(){return pe})),n.d(t,"namespace",(function(){return ve})),n.d(t,"next",(function(){return G})),n.d(t,"node",(function(){return H})),n.d(t,"parse",(function(){return oe})),n.d(t,"peek",(function(){return W})),n.d(t,"position",(function(){return L})),n.d(t,"prefix",(function(){return le})),n.d(t,"prefixer",(function(){return me})),n.d(t,"prev",(function(){return z})),n.d(t,"replace",(function(){return A})),n.d(t,"ruleset",(function(){return ce})),n.d(t,"rulesheet",(function(){return he})),n.d(t,"serialize",(function(){return de})),n.d(t,"sizeof",(function(){return P})),n.d(t,"slice",(function(){return K})),n.d(t,"stringify",(function(){return fe})),n.d(t,"strlen",(function(){return I})),n.d(t,"substr",(function(){return T})),n.d(t,"token",(function(){return Y})),n.d(t,"tokenize",(function(){return X})),n.d(t,"tokenizer",(function(){return ee})),n.d(t,"trim",(function(){return C})),n.d(t,"whitespace",(function(){return $}));var r="-ms-",a="-moz-",i="-webkit-",o="comm",c="rule",s="decl",u="@page",l="@media",d="@import",f="@charset",p="@viewport",h="@supports",m="@document",v="@namespace",g="@keyframes",b="@font-face",_="@counter-style",y="@font-feature-values",E=Math.abs,O=String.fromCharCode;function w(e,t){return(((t<<2^j(e,0))<<2^j(e,1))<<2^j(e,2))<<2^j(e,3)}function C(e){return e.trim()}function S(e,t){return(e=t.exec(e))?e[0]:e}function A(e,t,n){return e.replace(t,n)}function k(e,t){return e.indexOf(t)}function j(e,t){return 0|e.charCodeAt(t)}function T(e,t,n){return e.slice(t,n)}function I(e){return e.length}function P(e){return e.length}function D(e,t){return t.push(e),e}function N(e,t){return e.map(t).join("")}var x=1,R=1,M=0,L=0,B=0,F="";function H(e,t,n,r,a,i,o){return{value:e,root:t,parent:n,type:r,props:a,children:i,line:x,column:R,length:o,return:""}}function V(e,t,n){return H(e,t.root,t.parent,n,t.props,t.children,0)}function U(){return B}function z(){return B=L>0?j(F,--L):0,R--,10===B&&(R=1,x--),B}function G(){return B=L<M?j(F,L++):0,R++,10===B&&(R=1,x++),B}function W(){return j(F,L)}function q(){return L}function K(e,t){return T(F,e,t)}function Y(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Z(e){return x=R=1,M=I(F=e),L=0,[]}function Q(e){return F="",e}function J(e){return C(K(L-1,ne(91===e?e+2:40===e?e+1:e)))}function X(e){return Q(ee(Z(e)))}function $(e){for(;(B=W())&&B<33;)G();return Y(e)>2||Y(B)>3?"":" "}function ee(e){for(;G();)switch(Y(B)){case 0:D(ae(L-1),e);break;case 2:D(J(B),e);break;default:D(O(B),e)}return e}function te(e,t){for(;--t&&G()&&!(B<48||B>102||B>57&&B<65||B>70&&B<97););return K(e,q()+(t<6&&32==W()&&32==G()))}function ne(e){for(;G();)switch(B){case e:return L;case 34:case 39:return ne(34===e||39===e?e:B);case 40:41===e&&ne(e);break;case 92:G()}return L}function re(e,t){for(;G()&&e+B!==57&&(e+B!==84||47!==W()););return"/*"+K(t,L-1)+"*"+O(47===e?e:G())}function ae(e){for(;!Y(W());)G();return K(e,L)}function ie(e){return Q(oe("",null,null,null,[""],e=Z(e),0,[0],e))}function oe(e,t,n,r,a,i,o,c,s){for(var u=0,l=0,d=o,f=0,p=0,h=0,m=1,v=1,g=1,b=0,_="",y=a,E=i,w=r,C=_;v;)switch(h=b,b=G()){case 34:case 39:case 91:case 40:C+=J(b);break;case 9:case 10:case 13:case 32:C+=$(h);break;case 92:C+=te(q()-1,7);continue;case 47:switch(W()){case 42:case 47:D(se(re(G(),q()),t,n),s);break;default:C+="/"}break;case 123*m:c[u++]=I(C)*g;case 125*m:case 59:case 0:switch(b){case 0:case 125:v=0;case 59+l:p>0&&I(C)-d&&D(p>32?ue(C+";",r,n,d-1):ue(A(C," ","")+";",r,n,d-2),s);break;case 59:C+=";";default:if(D(w=ce(C,t,n,u,l,a,c,_,y=[],E=[],d),i),123===b)if(0===l)oe(C,t,w,w,y,i,d,c,E);else switch(f){case 100:case 109:case 115:oe(e,w,w,r&&D(ce(e,w,w,0,0,a,c,_,a,y=[],d),E),a,E,d,c,r?y:E);break;default:oe(C,w,w,w,[""],E,d,c,E)}}u=l=p=0,m=g=1,_=C="",d=o;break;case 58:d=1+I(C),p=h;default:if(m<1)if(123==b)--m;else if(125==b&&0==m++&&125==z())continue;switch(C+=O(b),b*m){case 38:g=l>0?1:(C+="\f",-1);break;case 44:c[u++]=(I(C)-1)*g,g=1;break;case 64:45===W()&&(C+=J(G())),f=W(),l=I(_=C+=ae(q())),b++;break;case 45:45===h&&2==I(C)&&(m=0)}}return i}function ce(e,t,n,r,a,i,o,s,u,l,d){for(var f=a-1,p=0===a?i:[""],h=P(p),m=0,v=0,g=0;m<r;++m)for(var b=0,_=T(e,f+1,f=E(v=o[m])),y=e;b<h;++b)(y=C(v>0?p[b]+" "+_:A(_,/&\f/g,p[b])))&&(u[g++]=y);return H(e,t,n,0===a?c:s,u,l,d)}function se(e,t,n){return H(e,t,n,o,O(U()),T(e,2,-2),0)}function ue(e,t,n,r){return H(e,t,n,s,T(e,0,r),T(e,r+1,-1),r)}function le(e,t){switch(w(e,t)){case 5103:return i+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return i+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return i+e+a+e+r+e+e;case 6828:case 4268:return i+e+r+e+e;case 6165:return i+e+r+"flex-"+e+e;case 5187:return i+e+A(e,/(\w+).+(:[^]+)/,i+"box-$1$2"+r+"flex-$1$2")+e;case 5443:return i+e+r+"flex-item-"+A(e,/flex-|-self/,"")+e;case 4675:return i+e+r+"flex-line-pack"+A(e,/align-content|flex-|-self/,"")+e;case 5548:return i+e+r+A(e,"shrink","negative")+e;case 5292:return i+e+r+A(e,"basis","preferred-size")+e;case 6060:return i+"box-"+A(e,"-grow","")+i+e+r+A(e,"grow","positive")+e;case 4554:return i+A(e,/([^-])(transform)/g,"$1"+i+"$2")+e;case 6187:return A(A(A(e,/(zoom-|grab)/,i+"$1"),/(image-set)/,i+"$1"),e,"")+e;case 5495:case 3959:return A(e,/(image-set\([^]*)/,i+"$1$`$1");case 4968:return A(A(e,/(.+:)(flex-)?(.*)/,i+"box-pack:$3"+r+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+i+e+e;case 4095:case 3583:case 4068:case 2532:return A(e,/(.+)-inline(.+)/,i+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(I(e)-1-t>6)switch(j(e,t+1)){case 109:if(45!==j(e,t+4))break;case 102:return A(e,/(.+:)(.+)-([^]+)/,"$1"+i+"$2-$3$1"+a+(108==j(e,t+3)?"$3":"$2-$3"))+e;case 115:return~k(e,"stretch")?le(A(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==j(e,t+1))break;case 6444:switch(j(e,I(e)-3-(~k(e,"!important")&&10))){case 107:return A(e,":",":"+i)+e;case 101:return A(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+i+(45===j(e,14)?"inline-":"")+"box$3$1"+i+"$2$3$1"+r+"$2box$3")+e}break;case 5936:switch(j(e,t+11)){case 114:return i+e+r+A(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return i+e+r+A(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return i+e+r+A(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return i+e+r+e+e}return e}function de(e,t){for(var n="",r=P(e),a=0;a<r;a++)n+=t(e[a],a,e,t)||"";return n}function fe(e,t,n,r){switch(e.type){case d:case s:return e.return=e.return||e.value;case o:return"";case c:e.value=e.props.join(",")}return I(n=de(e.children,r))?e.return=e.value+"{"+n+"}":""}function pe(e){var t=P(e);return function(n,r,a,i){for(var o="",c=0;c<t;c++)o+=e[c](n,r,a,i)||"";return o}}function he(e){return function(t){t.root||(t=t.return)&&e(t)}}function me(e,t,n,o){if(!e.return)switch(e.type){case s:e.return=le(e.value,e.length);break;case g:return de([V(A(e.value,"@","@"+i),e,"")],o);case c:if(e.length)return N(e.props,(function(t){switch(S(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return de([V(A(t,/:(read-\w+)/,":"+a+"$1"),e,"")],o);case"::placeholder":return de([V(A(t,/:(plac\w+)/,":"+i+"input-$1"),e,""),V(A(t,/:(plac\w+)/,":"+a+"$1"),e,""),V(A(t,/:(plac\w+)/,r+"input-$1"),e,"")],o)}return""}))}}function ve(e){switch(e.type){case c:e.props=e.props.map((function(t){return N(X(t),(function(t,n,r){switch(j(t,0)){case 12:return T(t,1,I(t));case 0:case 40:case 43:case 62:case 126:return t;case 58:"global"===r[++n]&&(r[n]="",r[++n]="\f"+T(r[n],n=1,-1));case 32:return 1===n?"":t;default:switch(n){case 0:return e=t,P(r)>1?"":t;case n=P(r)-1:case 2:return 2===n?t+e+e:t+e;default:return t}}}))}))}}},function(e,t){e.exports=function(e,t,n){var r=null,a=null,i=function(){r&&(clearTimeout(r),a=null,r=null)},o=function(){if(!t)return e.apply(this,arguments);var o=this,c=arguments,s=n&&!r;return i(),a=function(){e.apply(o,c)},r=setTimeout((function(){if(r=null,!s){var e=a;return a=null,e()}}),t),s?a():void 0};return o.cancel=i,o.flush=function(){var e=a;i(),e&&e()},o}},function(e,t){e.exports=!1},function(e,t,n){"use strict";
/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var r=n(1091),a=n(596),i=n(1092),o=n(597);function c(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e}e.exports=function(e,t,n){if(!o(e))return e;if(Array.isArray(t)&&(t=[].concat.apply([],t).join(".")),"string"!=typeof t)return e;for(var s=r(t,{sep:".",brackets:!0}).filter(c),u=s.length,l=-1,d=e;++l<u;){var f=s[l];l===u-1?i(d[f])&&i(n)?d[f]=a({},d[f],n):d[f]=n:(o(d[f])||(d[f]={}),d=d[f])}return e}},function(e,t,n){"use strict";
/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var r=n(596);function a(e,t,n,r){var i=e.indexOf(t,n);return"\\"===e.charAt(i-1)?a(e,t,i+1):i}function i(e,t){return!0===t.keepDoubleQuotes&&'"'===e||(!0===t.keepSingleQuotes&&"'"===e||t.keepQuotes)}function o(e,t,n){return"function"==typeof e.keepEscaping?e.keepEscaping(t,n):!0===e.keepEscaping||"\\"===t[n+1]}e.exports=function(e,t,n){if("string"!=typeof e)throw new TypeError("expected a string");"function"==typeof t&&(n=t,t=null),"string"==typeof t&&(t={sep:t});var c,s=r({sep:"."},t),u=s.quotes||['"',"'","`"];!0===s.brackets?c={"<":">","(":")","[":"]","{":"}"}:s.brackets&&(c=s.brackets);var l,d=[],f=[],p=[""],h=s.sep,m=e.length,v=-1;function g(){if(c&&f.length)return c[f[f.length-1]]}for(;++v<m;){var b=e[v],_=e[v+1],y={val:b,idx:v,arr:p,str:e};if(d.push(y),"\\"!==b){if(c&&c[b]){f.push(b);var E=g(),O=v+1;if(-1!==e.indexOf(E,O+1))for(;f.length&&O<m;){var w=e[++O];if("\\"!==w)if(-1===u.indexOf(w)){if(E=g(),f.length&&-1===e.indexOf(E,O+1))break;c[w]?f.push(w):E===w&&f.pop()}else O=a(e,w,O+1);else w++}if(-1===(l=O)){p[p.length-1]+=b;continue}b=e.slice(v,l+1),y.val=b,y.idx=v=l}if(-1!==u.indexOf(b)){if(-1===(l=a(e,b,v+1))){p[p.length-1]+=b;continue}b=!0===i(b,s)?e.slice(v,l+1):e.slice(v+1,l),y.val=b,y.idx=v=l}"function"==typeof n&&(n(y,d),b=y.val,v=y.idx),y.val!==h||!1===y.split?p[p.length-1]+=y.val:p.push("")}else y.val=!0===o(s,e,v)?b+_:_,y.escaped=!0,"function"==typeof n&&n(y),p[p.length-1]+=y.val,v++}return p}},function(e,t,n){"use strict";
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var r=n(1093);function a(e){return!0===r(e)&&"[object Object]"===Object.prototype.toString.call(e)}e.exports=function(e){var t,n;return!1!==a(e)&&("function"==typeof(t=e.constructor)&&(!1!==a(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))}},function(e,t,n){"use strict";
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */e.exports=function(e){return null!=e&&"object"==typeof e&&!1===Array.isArray(e)}},function(e,t,n){var r=n(1095),a=n(1096),i=n(598);e.exports=function(e){return function(t,n,o){return o&&"number"!=typeof o&&a(t,n,o)&&(n=o=void 0),t=i(t),void 0===n?(n=t,t=0):n=i(n),o=void 0===o?t<n?1:-1:i(o),r(t,n,o,e)}}},function(e,t){var n=Math.ceil,r=Math.max;e.exports=function(e,t,a,i){for(var o=-1,c=r(n((t-e)/(a||1)),0),s=Array(c);c--;)s[i?c:++o]=e,e+=a;return s}},function(e,t,n){var r=n(350),a=n(258),i=n(442),o=n(217);e.exports=function(e,t,n){if(!o(n))return!1;var c=typeof t;return!!("number"==c?a(n)&&i(t,n.length):"string"==c&&t in n)&&r(n[t],e)}},function(e,t,n){var r=n(1098),a=n(217),i=n(333),o=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,s=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=c.test(e);return n||s.test(e)?u(e.slice(2),n?2:8):o.test(e)?NaN:+e}},function(e,t,n){var r=n(1099),a=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(a,""):e}},function(e,t){var n=/\s/;e.exports=function(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}},function(e,t,n){var r=n(449),a=n(600),i=n(602),o=n(450),c=n(1104),s=n(451);e.exports=function(e,t,n){var u=-1,l=a,d=e.length,f=!0,p=[],h=p;if(n)f=!1,l=i;else if(d>=200){var m=t?null:c(e);if(m)return s(m);f=!1,l=o,h=new r}else h=t?[]:p;e:for(;++u<d;){var v=e[u],g=t?t(v):v;if(v=n||0!==v?v:0,f&&g==g){for(var b=h.length;b--;)if(h[b]===g)continue e;t&&h.push(g),p.push(v)}else l(h,g,n)||(h!==p&&h.push(g),p.push(v))}return p}},function(e,t,n){var r=n(601),a=n(1102),i=n(1103);e.exports=function(e,t,n){return t==t?i(e,t,n):r(e,a,n)}},function(e,t){e.exports=function(e){return e!=e}},function(e,t){e.exports=function(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}},function(e,t,n){var r=n(574),a=n(1105),i=n(451),o=r&&1/i(new r([,-0]))[1]==1/0?function(e){return new r(e)}:a;e.exports=o},function(e,t){e.exports=function(){}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}Object.defineProperty(t,"__esModule",{value:!0}),t.Observable=void 0;var o=function(){return"function"==typeof Symbol},c=function(e){return o()&&Boolean(Symbol[e])},s=function(e){return c(e)?Symbol[e]:"@@"+e};o()&&!c("observable")&&(Symbol.observable=Symbol("observable"));var u=s("iterator"),l=s("observable"),d=s("species");function f(e,t){var n=e[t];if(null!=n){if("function"!=typeof n)throw new TypeError(n+" is not a function");return n}}function p(e){var t=e.constructor;return void 0!==t&&null===(t=t[d])&&(t=void 0),void 0!==t?t:w}function h(e){return e instanceof w}function m(e){m.log?m.log(e):setTimeout((function(){throw e}))}function v(e){Promise.resolve().then((function(){try{e()}catch(e){m(e)}}))}function g(e){var t=e._cleanup;if(void 0!==t&&(e._cleanup=void 0,t))try{if("function"==typeof t)t();else{var n=f(t,"unsubscribe");n&&n.call(t)}}catch(e){m(e)}}function b(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function _(e,t,n){e._state="running";var r=e._observer;try{var a=f(r,t);switch(t){case"next":a&&a.call(r,n);break;case"error":if(b(e),!a)throw n;a.call(r,n);break;case"complete":b(e),a&&a.call(r)}}catch(e){m(e)}"closed"===e._state?g(e):"running"===e._state&&(e._state="ready")}function y(e,t,n){if("closed"!==e._state){if("buffering"!==e._state)return"ready"!==e._state?(e._state="buffering",e._queue=[{type:t,value:n}],void v((function(){return function(e){var t=e._queue;if(t){e._queue=void 0,e._state="ready";for(var n=0;n<t.length&&(_(e,t[n].type,t[n].value),"closed"!==e._state);++n);}}(e)}))):void _(e,t,n);e._queue.push({type:t,value:n})}}var E=function(){function e(t,n){r(this,e),this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";var a=new O(this);try{this._cleanup=n.call(void 0,a)}catch(e){a.error(e)}"initializing"===this._state&&(this._state="ready")}return i(e,[{key:"unsubscribe",value:function(){"closed"!==this._state&&(b(this),g(this))}},{key:"closed",get:function(){return"closed"===this._state}}]),e}(),O=function(){function e(t){r(this,e),this._subscription=t}return i(e,[{key:"next",value:function(e){y(this._subscription,"next",e)}},{key:"error",value:function(e){y(this._subscription,"error",e)}},{key:"complete",value:function(){y(this._subscription,"complete")}},{key:"closed",get:function(){return"closed"===this._subscription._state}}]),e}(),w=function(){function e(t){if(r(this,e),!(this instanceof e))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof t)throw new TypeError("Observable initializer must be a function");this._subscriber=t}return i(e,[{key:"subscribe",value:function(e){return"object"==typeof e&&null!==e||(e={next:e,error:arguments[1],complete:arguments[2]}),new E(e,this._subscriber)}},{key:"forEach",value:function(e){var t=this;return new Promise((function(n,r){if("function"==typeof e)var a=t.subscribe({next:function(t){try{e(t,i)}catch(e){r(e),a.unsubscribe()}},error:r,complete:n});else r(new TypeError(e+" is not a function"));function i(){a.unsubscribe(),n()}}))}},{key:"map",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(p(this))((function(n){return t.subscribe({next:function(t){try{t=e(t)}catch(e){return n.error(e)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})}))}},{key:"filter",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(p(this))((function(n){return t.subscribe({next:function(t){try{if(!e(t))return}catch(e){return n.error(e)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})}))}},{key:"reduce",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=p(this),r=arguments.length>1,a=!1,i=arguments[1],o=i;return new n((function(n){return t.subscribe({next:function(t){var i=!a;if(a=!0,!i||r)try{o=e(o,t)}catch(e){return n.error(e)}else o=t},error:function(e){n.error(e)},complete:function(){if(!a&&!r)return n.error(new TypeError("Cannot reduce an empty sequence"));n.next(o),n.complete()}})}))}},{key:"concat",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=p(this);return new a((function(t){var r,i=0;return function e(o){r=o.subscribe({next:function(e){t.next(e)},error:function(e){t.error(e)},complete:function(){i===n.length?(r=void 0,t.complete()):e(a.from(n[i++]))}})}(e),function(){r&&(r.unsubscribe(),r=void 0)}}))}},{key:"flatMap",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=p(this);return new n((function(r){var a=[],i=t.subscribe({next:function(t){if(e)try{t=e(t)}catch(e){return r.error(e)}var i=n.from(t).subscribe({next:function(e){r.next(e)},error:function(e){r.error(e)},complete:function(){var e=a.indexOf(i);e>=0&&a.splice(e,1),o()}});a.push(i)},error:function(e){r.error(e)},complete:function(){o()}});function o(){i.closed&&0===a.length&&r.complete()}return function(){a.forEach((function(e){return e.unsubscribe()})),i.unsubscribe()}}))}},{key:l,value:function(){return this}}],[{key:"from",value:function(t){var n="function"==typeof this?this:e;if(null==t)throw new TypeError(t+" is not an object");var r=f(t,l);if(r){var a=r.call(t);if(Object(a)!==a)throw new TypeError(a+" is not an object");return h(a)&&a.constructor===n?a:new n((function(e){return a.subscribe(e)}))}if(c("iterator")&&(r=f(t,u)))return new n((function(e){v((function(){if(!e.closed){var n=!0,a=!1,i=void 0;try{for(var o,c=r.call(t)[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var s=o.value;if(e.next(s),e.closed)return}}catch(e){a=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw i}}e.complete()}}))}));if(Array.isArray(t))return new n((function(e){v((function(){if(!e.closed){for(var n=0;n<t.length;++n)if(e.next(t[n]),e.closed)return;e.complete()}}))}));throw new TypeError(t+" is not observable")}},{key:"of",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a="function"==typeof this?this:e;return new a((function(e){v((function(){if(!e.closed){for(var t=0;t<n.length;++t)if(e.next(n[t]),e.closed)return;e.complete()}}))}))}},{key:d,get:function(){return this}}]),e}();t.Observable=w,o()&&Object.defineProperty(w,Symbol("extensions"),{value:{symbol:l,hostReportError:m},configurable:!0})},function(e,t,n){"use strict";(function(e){}).call(this,n(677))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return o(e,[])};var r,a=(r=n(609))&&r.__esModule?r:{default:r};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){switch(i(e)){case"string":return JSON.stringify(e);case"function":return e.name?"[function ".concat(e.name,"]"):"[function]";case"object":return null===e?"null":function(e,t){if(-1!==t.indexOf(e))return"[Circular]";var n=[].concat(t,[e]),r=function(e){var t=e[String(a.default)];if("function"==typeof t)return t;if("function"==typeof e.inspect)return e.inspect}(e);if(void 0!==r){var i=r.call(e);if(i!==e)return"string"==typeof i?i:o(i,n)}else if(Array.isArray(e))return function(e,t){if(0===e.length)return"[]";if(t.length>2)return"[Array]";for(var n=Math.min(10,e.length),r=e.length-n,a=[],i=0;i<n;++i)a.push(o(e[i],t));1===r?a.push("... 1 more item"):r>1&&a.push("... ".concat(r," more items"));return"["+a.join(", ")+"]"}(e,n);return function(e,t){var n=Object.keys(e);if(0===n.length)return"{}";if(t.length>2)return"["+function(e){var t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"==typeof e.constructor){var n=e.constructor.name;if("string"==typeof n&&""!==n)return n}return t}(e)+"]";return"{ "+n.map((function(n){return n+": "+o(e[n],t)})).join(", ")+" }"}(e,n)}(e,t);default:return String(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNode=function(e){return null!=e&&"string"==typeof e.kind},t.Token=t.Location=void 0;var r,a=(r=n(1110))&&r.__esModule?r:{default:r};var i=function(){function e(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}return e.prototype.toJSON=function(){return{start:this.start,end:this.end}},e}();t.Location=i,(0,a.default)(i);var o=function(){function e(e,t,n,r,a,i,o){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=a,this.value=o,this.prev=i,this.next=null}return e.prototype.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},e}();t.Token=o,(0,a.default)(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.prototype.toJSON;"function"==typeof t||(0,r.default)(0),e.prototype.inspect=t,a.default&&(e.prototype[a.default]=t)};var r=i(n(1111)),a=i(n(609));function i(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!Boolean(e))throw new Error(null!=t?t:"Unexpected invariant triggered.")}},function(e,t){},function(e,t,n){var r=n(598);e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},,,,,,function(e,t,n){var r=n(449),a=n(600),i=n(602),o=n(355),c=n(347),s=n(450);e.exports=function(e,t,n,u){var l=-1,d=a,f=!0,p=e.length,h=[],m=t.length;if(!p)return h;n&&(t=o(t,c(n))),u?(d=i,f=!1):t.length>=200&&(d=s,f=!1,t=new r(t));e:for(;++l<p;){var v=e[l],g=null==n?v:n(v);if(v=u||0!==v?v:0,f&&g==g){for(var b=m;b--;)if(t[b]===g)continue e;h.push(v)}else d(t,g,u)||h.push(v)}return h}},function(e,t,n){var r=n(266),a=n(440),i=n(148),o=r?r.isConcatSpreadable:void 0;e.exports=function(e){return i(e)||a(e)||!!(o&&e&&e[o])}},function(e,t,n){var r=n(456),a=n(617),i=n(618);e.exports=function(e,t){return i(a(e,t,r),e+"")}},function(e,t){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},function(e,t,n){var r=n(1124),a=n(558),i=n(456),o=a?function(e,t){return a(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:i;e.exports=o},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t){var n=Date.now;e.exports=function(e){var t=0,r=0;return function(){var a=n(),i=16-(a-r);if(r=a,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,n){var r=n(258),a=n(195);e.exports=function(e){return a(e)&&r(e)}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},function(e,t,n){var r=n(313),a=n(297);e.exports=function(e,t){return e&&r(t,a(t),e)}},function(e,t,n){var r=n(313),a=n(459);e.exports=function(e,t){return e&&r(t,a(t),e)}},function(e,t,n){var r=n(217),a=n(445),i=n(1131),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=a(e),n=[];for(var c in e)("constructor"!=c||!t&&o.call(e,c))&&n.push(c);return n}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,t,n){(function(e){var r=n(180),a=t&&!t.nodeType&&t,i=a&&"object"==typeof e&&e&&!e.nodeType&&e,o=i&&i.exports===a?r.Buffer:void 0,c=o?o.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=c?c(n):new e.constructor(n);return e.copy(r),r}}).call(this,n(298)(e))},function(e,t){e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},function(e,t,n){var r=n(313),a=n(453);e.exports=function(e,t){return r(e,a(e),t)}},function(e,t,n){var r=n(313),a=n(622);e.exports=function(e,t){return r(e,a(e),t)}},function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&n.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},function(e,t,n){var r=n(461),a=n(1138),i=n(1139),o=n(1140),c=n(1141);e.exports=function(e,t,n){var s=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new s(+e);case"[object DataView]":return a(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return c(e,n);case"[object Map]":return new s;case"[object Number]":case"[object String]":return new s(e);case"[object RegExp]":return i(e);case"[object Set]":return new s;case"[object Symbol]":return o(e)}}},function(e,t,n){var r=n(461);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},function(e,t){var n=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}},function(e,t,n){var r=n(266),a=r?r.prototype:void 0,i=a?a.valueOf:void 0;e.exports=function(e){return i?Object(i.call(e)):{}}},function(e,t,n){var r=n(461);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},function(e,t,n){var r=n(1143),a=n(460),i=n(445);e.exports=function(e){return"function"!=typeof e.constructor||i(e)?{}:r(a(e))}},function(e,t,n){var r=n(217),a=Object.create,i=function(){function e(){}return function(t){if(!r(t))return{};if(a)return a(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=i},function(e,t,n){var r=n(1145),a=n(347),i=n(444),o=i&&i.isMap,c=o?a(o):r;e.exports=c},function(e,t,n){var r=n(353),a=n(195);e.exports=function(e){return a(e)&&"[object Map]"==r(e)}},function(e,t,n){var r=n(1147),a=n(347),i=n(444),o=i&&i.isSet,c=o?a(o):r;e.exports=c},function(e,t,n){var r=n(353),a=n(195);e.exports=function(e){return a(e)&&"[object Set]"==r(e)}},function(e,t,n){var r=n(354),a=n(619),i=n(1149),o=n(311);e.exports=function(e,t){return t=r(t,e),null==(e=i(e,t))||delete e[o(a(t))]}},function(e,t,n){var r=n(454),a=n(1150);e.exports=function(e,t){return t.length<2?e:r(e,a(t,0,-1))}},function(e,t){e.exports=function(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(n=n>a?a:n)<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(a);++r<a;)i[r]=e[r+t];return i}},function(e,t,n){var r=n(1152);e.exports=function(e){return r(e)?void 0:e}},function(e,t,n){var r=n(265),a=n(460),i=n(195),o=Function.prototype,c=Object.prototype,s=o.toString,u=c.hasOwnProperty,l=s.call(Object);e.exports=function(e){if(!i(e)||"[object Object]"!=r(e))return!1;var t=a(e);if(null===t)return!0;var n=u.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&s.call(n)==l}},function(e,t,n){var r=n(1154),a=n(617),i=n(618);e.exports=function(e){return i(a(e,void 0,r),e+"")}},function(e,t,n){var r=n(616);e.exports=function(e){return(null==e?0:e.length)?r(e,1):[]}},,,,function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(70),o=n.n(i),c=(n(820),n(821),n(823),n(9)),s=n(87),u=n(132);Object(c.sample)({clock:u.c.done,fn:function(e){var t;return null==e||null===(t=e.result)||void 0===t?void 0:t.services},target:[s.e,s.g]}),Object(c.sample)({source:s.g.doneData,fn:function(e){var t;return{school_ids:null===(t=e.items)||void 0===t?void 0:t.map((function(e){return e.id}))}},target:s.d}),Object(c.sample)({clock:[s.a.done,s.c.done],target:u.a}),Object(c.forward)({from:u.b,to:u.a}),Object(c.guard)({clock:u.a.doneData,filter:function(e){var t;return null===(t=e.services)||void 0===t?void 0:t.some((function(e){return e.is_connected}))},target:u.c});n.p,n.p,n.p,n.p,n.p,n.p;var l=n(104),d=n(6),f=n.n(d),p=n(30),h=n.n(p),m=n(31),v=n.n(m),g=n(11),b=n.n(g),_=n(33),y=n.n(_),E=n(39),O=n.n(E),w=n(34),C=n.n(w),S=n(2),A=n.n(S),k=n(13),j=n(26),T=n.n(j),I=n(1),P=n(106),D=n(51),N=n(624),x=n(92),R=n(15),M=n.n(R);function L(e){var t=e.spinner;return a.a.createElement(I.Hb,{activePanel:"prerender"},a.a.createElement(I.T,{nav:"prerender"},a.a.createElement(I.U,{separator:!1}),t&&a.a.createElement(I.bb,null)))}L.propTypes={spinner:M.a.bool};var B=a.a.memo(L);function F(){return a.a.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{d:"M28 52c13.255 0 24-10.745 24-24S41.255 4 28 4 4 14.745 4 28s10.745 24 24 24z",fill:"#FFCC33"}),a.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.857 40.857a1.286 1.286 0 010 2.572h-7.714a1.286 1.286 0 010-2.572h7.714zm-1.286-12c.857-.857 1.714 1.715 6 1.715 3.429 0 6.429-1.715 6.857-.858.429.858-2.571 4.286-6.857 4.286-5.143 0-6.857-4.286-6-5.143zm-5.142 0c.857.857-.858 5.143-6 5.143-4.286 0-7.286-3.428-6.858-4.286.429-.857 3.429.858 6.858.858 4.285 0 5.142-2.572 6-1.715zm9.428-10.285c.857-.858 2.572 2.142 6 3.428 3.429 1.286 4.286 1.286 4.286 2.572 0 .857-.857 1.714-5.143 0-4.286-1.715-6-5.143-5.143-6zm-13.714 0c.857.857-.857 4.285-5.143 6-4.286 1.714-5.143.857-5.143 0 0-1.286.857-1.286 4.286-2.572 3.428-1.286 5.143-4.286 6-3.428z",fill:"#805446"}))}var H=n(120),V=n(110);function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C()(e);if(t){var a=C()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return O()(this,n)}}var z=function(e){y()(n,e);var t=U(n);function n(){var e;h()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),A()(b()(e),"state",{error:!1}),A()(b()(e),"onButtonClick",(function(){e.canReloadOnError()?window.location.reload():T.a.send("VKWebAppClose")})),e}return v()(n,[{key:"componentDidCatch",value:function(e,t){var n=t?t.componentStack:"";(D.b||D.f)&&this.setState({errorInfo:e,componentStack:n}),D.b||Object(V.c)(e,{tags:{ref:"ErrorBoundary"},contexts:{react:{componentStack:n}}})}},{key:"canReloadOnError",value:function(){return!T.a.isWebView()}},{key:"render",value:function(){if(this.state.errorInfo)return a.a.createElement("div",{style:{whiteSpace:"pre",overflow:"auto",padding:20,fontFamily:"monospace",fontSize:12}},this.state.errorInfo.toString(),a.a.createElement("br",null),this.state.componentStack);if(this.state.error){var e=this.canReloadOnError()?Object(H.b)("vkui_common_error_try_again_btn","Попробуйте снова"):Object(H.b)("vkui_common_close","Закрыть");return a.a.createElement(I.Hb,{activePanel:"error_placeholder"},a.a.createElement(I.T,{nav:"error_placeholder"},a.a.createElement(I.cb,{stretched:!0,icon:a.a.createElement(F,null),header:Object(H.b)("vkui_common_error_occurred","Произошла ошибка"),action:a.a.createElement(I.j,{size:"l",onClick:this.onButtonClick},e)},Object(H.b)("vkui_common_error_common_description","Что-то пошло не так, поэтому наш сервис недоступен"))))}return this.props.children}}],[{key:"getDerivedStateFromError",value:function(){return{error:!0}}}]),n}(r.Component),G=n(227);function W(){return Object(k.i)("remixcolor_scheme_mode")}function q(){return window.matchMedia("(prefers-color-scheme: light)").matches?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":void 0}function K(e){return"dark"===e?I.jb.SPACE_GRAY:I.jb.BRIGHT_LIGHT}var Y,Z=n(223);!function(e){e.SUPPORTS_TRANSPARENT_STATUS="supports_transparent_status"}(Y||(Y={}));var Q=A()({},Y.SUPPORTS_TRANSPARENT_STATUS,"3.11.0");function J(e,t){var n=e.match(/\d+\.\d+\.\d+/),r=t.match(/\d+\.\d+\.\d+/);if(!n||!r)return!1;var a=n[0].split(".").map((function(e){return Number(e)})),i=r[0].split(".").map((function(e){return Number(e)}));return!(a[0]<i[0])&&(!(a[1]<i[1])&&!(a[2]<i[2]))}var X=n(375),$=Object(r.createContext)({mediascopeTrackPage:k.z,updateExternalCounters:k.z}),ee=function(e){return function(t){var n=Object(G.c)();return a.a.createElement(e,f()({},t,n))}},te=n(186);function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C()(e);if(t){var a=C()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return O()(this,n)}}var re=[],ae=ee(function(e){y()(n,e);var t=ne(n);function n(){var e;h()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),A()(b()(e),"state",{tnsPixelType:"",tnsPixelSocdem:"",tnsFetched:!1,tnsFetching:!1}),A()(b()(e),"_mediascopeTrackPage",(function(t){var n=t.from,r=t.to,a=e.state,i=a.tnsPixelType,o=a.tnsPixelSocdem;D.f&&Object(te.a)("log","mediascopeTrackPage","to: ".concat(r,", from: ").concat(n,", tnsPixelType: ").concat(i,", tnsPixelSocdem: ").concat(o));var c=document.createElement("img"),s=location.protocol,u=Math.round(1e9*Math.random());c.src="".concat(s,"//www.tns-counter.ru/V13a**clid:").concat(o,"*").concat(n.replace("/#/","/"),"*vk_com/ru/UTF-8/tmsec=vksite_total/").concat(u),"unauth"===i?c.src="".concat(s,"//www.tns-counter.ru/V13a****vk_ad/ru/UTF-8/tmsec=vkad_cid1015708-posid1184674/").concat(u):"has_rough"===i?c.src="".concat(s,"//www.tns-counter.ru/V13a****vk_ad/ru/UTF-8/tmsec=vkad_cid1015708-posid1184675/").concat(u):"not_has_rough"===i&&(c.src="".concat(s,"//www.tns-counter.ru/V13a****vk_ad/ru/UTF-8/tmsec=vkad_cid1015708-posid1184677/").concat(u))})),A()(b()(e),"mediascopeTrackPage",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.from,r=void 0===n?document.referrer:n,a=t.to,i=void 0===a?window.location.href:a;(D.e||D.f)&&(e.state.tnsFetched?e._mediascopeTrackPage({from:r,to:i}):(e.state.tnsFetching||e.getTns(),re.push((function(){return e._mediascopeTrackPage({from:r,to:i})}))))})),A()(b()(e),"updateExternalCounters",(function(t){(D.e||D.f)&&(e.props.trackEvent({event_type:"app_nav"}),e.mediascopeTrackPage(t))})),A()(b()(e),"ctx",{mediascopeTrackPage:e.mediascopeTrackPage,updateExternalCounters:e.updateExternalCounters}),e}return v()(n,[{key:"componentDidUpdate",value:function(e,t){!t.tnsFetched&&this.state.tnsFetched&&re.length&&(re.forEach((function(e){return e()})),re=[])}},{key:"getTns",value:function(){var e=this;this.setState({tnsFetching:!0}),this.props.apiRequest("internal.getCountersInfo").then((function(t){e.setState({tnsPixelType:t.tns_pixel_type,tnsPixelSocdem:t.tns_pixel_socdem,tnsFetched:!0,tnsFetching:!1})})).catch((function(){e.setState({tnsFetched:!0,tnsFetching:!1})}))}},{key:"render",value:function(){var e=this.props.children;return a.a.createElement($.Provider,{value:this.ctx},e)}}]),n}(a.a.Component)),ie=n(481),oe=n(326),ce=n(396),se=(n(1155),n(320));function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C()(e);if(t){var a=C()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return O()(this,n)}}Object(V.f)();var de=function(e){y()(n,e);var t=le(n);function n(e){var r;h()(this,n),r=t.call(this,e),A()(b()(r),"langId",void 0),A()(b()(r),"langCode",void 0),A()(b()(r),"langKeys",void 0),A()(b()(r),"langConfig",void 0),A()(b()(r),"isReadyToDisplaySended",void 0),A()(b()(r),"connectListener",(function(e){switch(e.detail.type){case"VKWebAppUpdateConfig":var t=e.detail.data,n=t.scheme,a=t.appearance,i=t.app;r.setState({scheme:n,app:i,appearance:a}),r.setAppViewSettings(a),r.sendReadyToDisplay()}})),A()(b()(r),"setAppViewSettings",(function(e){T.a.isWebView()&&r.props.setViewSettings&&T.a.send("VKWebAppSetViewSettings",{status_bar_style:e===I.g.LIGHT?"dark":"light"})})),A()(b()(r),"onLangReceived",(function(e){var t=r.props.appTitle,n=e.id,a=e.code,i=e.keys,o=e.config;if(Object(V.d)({lang_id:n}),r.langId=n,r.langCode=a,r.langConfig=o,Object(x.b)(i)&&Object.keys(i).forEach((function(e){r.langKeys[e]=Object(N.b)(i[e])})),t&&!D.d){var c=r.langKeys[t];document.title=c||t}r.setState({hasLang:!0})})),A()(b()(r),"isReady",(function(){return!!r.state.hasLang&&!!r.props.authContext.isAuthReady})),A()(b()(r),"initContext",{isAppReady:r.isReady});var a=e.app_id,i=e.scheme,o=e.app,c=e.appearance;return r.state={scheme:r.resolveScheme(i),appearance:c,hasLang:!Object(H.c)(),app:o},r.langId=0,r.langCode="ru",r.langKeys={},function(){if(D.c)try{var e=document.querySelector(":root");if(!e)return;var t=window.getComputedStyle(e).getPropertyValue("--header_background").trim(),n=document.querySelector('meta[name="theme-color"]');n||((n=document.createElement("meta")).name="theme-color",document.head.appendChild(n)),n.content=t}catch(e){}}(),a&&Object(V.d)({app_id:a}),D.c&&Object(V.d)({client_platform:"mvk"}),r}return v()(n,[{key:"resolveScheme",value:function(e){var t,n=this;if(e)return e;if(D.c){t=function(e){["dark","light"].includes(W())||n.setState({scheme:K(e)})},window.matchMedia("(prefers-color-scheme: light)").addEventListener("change",(function(){t(q())}));var r=W();return["dark","light"].includes(r)?K(r):K(q())}}},{key:"componentDidMount",value:function(){var e=this;T.a.subscribe(this.connectListener),T.a.send("VKWebAppInit",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q;return Object.keys(t).reduce((function(n,r){return J(e,t[r])&&(n[r]=!0),n}),{})}("4.14.2"))),T.a.supports("VKWebAppGetClientVersion")&&T.a.send("VKWebAppGetClientVersion"),this.props.authContext.isAuthReady||this.props.authContext.requestAccessToken({force:!1}),this.state.hasLang||Object(H.d)().then((function(t){e.onLangReceived(t)}),(function(){e.props.onLangError&&e.props.onLangError()})),Object(se.b)()&&("function"==typeof window.requestIdleCallback?window.requestIdleCallback((function(){Object(V.a)()})):Object(V.a)())}},{key:"sendReadyToDisplay",value:function(){this.props.sendReadyToDisplay&&!this.isReadyToDisplaySended&&(T.a.supports("VKWebAppReadyToDisplay")&&T.a.send("VKWebAppReadyToDisplay"),this.isReadyToDisplaySended=!0)}},{key:"render",value:function(){var e=this.state,t=e.scheme,n=e.appearance,r=e.app,i=this.props,o=i.children,c=i.placeholder,s=i.isWebView,u=i.apiVersion,l=i.bridgeContext,d=i.authContext;return a.a.createElement(ce.a.Provider,{value:this.initContext},a.a.createElement(I.p,{scheme:t,appearance:n,isWebView:s,app:r,webviewType:I.Jb.INTERNAL,transitionMotionEnabled:!D.c,platform:this.props.platform},a.a.createElement(z,null,!c||this.isReady()?a.a.createElement(G.a,{host:this.apiHost,v:u,access_token:d.access_token,requestAccessToken:d.requestAccessToken,lang:this.langId,startTime:l.start_time,clientVersion:l.client_version,app:r,langCode:this.langCode,marker:this.props.apiMarker,requestsMode:this.props.apiRequestsMode,requestsLimit:this.props.apiRequestsLimit},a.a.createElement(ae,null,a.a.createElement(P.b,{langId:this.langId,code:this.langCode,keys:this.langKeys,config:this.langConfig},o))):c,d.captchaPopout&&a.a.createElement("div",{className:"Alert__container-common-skq0ym"},a.a.createElement(P.b,{langId:this.langId,code:this.langCode,keys:this.langKeys,config:this.langConfig},d.captchaPopout)))))}},{key:"apiHost",get:function(){return D.e?Z.b:this.props.bridgeContext.api_host||this.props.apiHost}}]),n}(r.Component);A()(de,"defaultProps",{scheme:X.a.scheme,isWebView:T.a.isWebView(),apiHost:Z.b,placeholder:a.a.createElement(B,{spinner:!0}),apiMarker:"header",setViewSettings:!0,sendReadyToDisplay:!0,platform:Object(I.Nb)()});var fe=function(e){var t=Object(ie.b)(),n=Object(oe.b)();return a.a.createElement(de,f()({},e,{bridgeContext:t,authContext:n}))},pe=function(e){return a.a.createElement(ie.a,null,a.a.createElement(oe.a,{app_id:e.app_id,scope:e.scope,access_token:e.access_token,loginHost:e.loginHost,cacheAccessToken:e.cacheAccessToken,onRequestAccessToken:e.onRequestAccessToken,onUserChange:e.onUserChange,onLogout:e.onLogout,supportsBrowserAuth:e.supportsBrowserAuth,onBrowserAuthFail:e.onBrowserAuthFail},a.a.createElement(fe,e)))};pe.defaultProps={scope:"",cacheAccessToken:!1,loginHost:Z.c,supportsBrowserAuth:!1,onLogout:k.z};var he=n(7),me=n.n(he),ve=(n(879),n(880),n(881),function(e){return function(t){var n=Object(r.useContext)(G.b);return a.a.createElement(e,f()({},t,{apiErrorPopout:n.popout}))}}),ge=n(1329),be=n(1330),_e=n(1331),ye=n(17),Ee=n.n(ye),Oe=n(18),we=n(10),Ce=n(19),Se=!1;function Ae(){Se||(Object(we.a)(new Ee.a({id:"user_circle_outline_28",viewBox:"0 0 28 28",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="user_circle_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path d="M14 2c6.627 0 12 5.373 12 12s-5.373 12-12 12S2 20.627 2 14 7.373 2 14 2zm0 18.5c-2.086 0-4.08.582-5.797 1.649A9.952 9.952 0 0014 24c2.16 0 4.161-.685 5.796-1.85A10.94 10.94 0 0014 20.5zM14 4C8.477 4 4 8.477 4 14a9.964 9.964 0 002.648 6.779A12.934 12.934 0 0114 18.5c2.67 0 5.215.808 7.353 2.277A9.962 9.962 0 0024 14c0-5.523-4.477-10-10-10zm0 3.5a4.749 4.749 0 014.75 4.75A4.749 4.749 0 0114 17a4.749 4.749 0 01-4.75-4.75A4.749 4.749 0 0114 7.5zm0 2c-1.52 0-2.75 1.23-2.75 2.75S12.48 15 14 15s2.75-1.23 2.75-2.75S15.52 9.5 14 9.5z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),Se=!0)}var ke=function(e){return Object(we.b)((function(){Ae()}),[]),a.a.createElement(Ce.a,Object(Oe.assign)({},e,{viewBox:"0 0 28 28",id:"user_circle_outline_28",width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};ke.mountIcon=Ae;var je=ke,Te=!1;function Ie(){Te||(Object(we.a)(new Ee.a({id:"settings_outline_28",viewBox:"0 0 28 28",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="settings_outline_28"><g fill-rule="nonzero" fill="none"><path d="M0 0h28v28H0z" /><path d="M15.148 2.04c.428.07.832.233 1.195.523.595.476.878 1.076 1.097 1.952.056.224.153.486.275.74.278.117.55.249.815.393.262-.065.513-.15.714-.244 1.412-.658 2.597-.623 3.567.423.082.089.131.148.238.28l.629.776c.17.21.241.305.348.482.692 1.152.422 2.224-.452 3.386a4.112 4.112 0 00-.417.71c.078.283.143.57.195.86.222.178.46.334.668.441.804.41 1.325.821 1.655 1.508.202.42.27.85.24 1.282a3.48 3.48 0 01-.106.64l-.225.975c-.065.285-.099.41-.185.622a2.515 2.515 0 01-.778 1.047c-.598.473-1.246.614-2.148.63-.229.004-.502.04-.773.1-.177.243-.364.478-.563.704.003.275.03.544.077.764.187.884.196 1.547-.13 2.236-.2.42-.491.744-.845.993a3.48 3.48 0 01-.565.32l-.899.44a3.48 3.48 0 01-.6.247c-.414.126-.85.156-1.303.054-.744-.167-1.261-.582-1.842-1.273a4.103 4.103 0 00-.591-.561 9.627 9.627 0 01-.878 0c-.228.18-.437.378-.591.56-.58.692-1.098 1.107-1.842 1.274a2.515 2.515 0 01-1.303-.054 3.48 3.48 0 01-.6-.248l-.899-.438a7.152 7.152 0 01-.185-.093c-1.312-.683-1.696-1.847-1.355-3.457.047-.22.074-.49.077-.764a9.535 9.535 0 01-.563-.705 4.066 4.066 0 00-.773-.099c-.902-.016-1.55-.157-2.148-.63a2.515 2.515 0 01-.778-1.047 3.48 3.48 0 01-.185-.622l-.225-.974a3.381 3.381 0 01-.109-.681 2.509 2.509 0 01.296-1.346c.339-.629.84-1.015 1.602-1.404a4.09 4.09 0 00.668-.441c.052-.29.117-.577.195-.86a4.112 4.112 0 00-.417-.71c-.874-1.162-1.144-2.234-.452-3.386.107-.177.179-.273.348-.482l.63-.777c.106-.131.155-.19.237-.279.97-1.046 2.155-1.08 3.567-.423.201.093.452.18.714.244.265-.144.537-.276.815-.394.122-.253.219-.515.275-.74.219-.875.502-1.475 1.097-1.95.363-.291.767-.455 1.195-.523.18-.03.3-.038.49-.04L14.5 2c.292 0 .422.005.648.04zM14.586 4H13.5c-.5 0-.75 0-1 1a6.347 6.347 0 01-.836 1.87 7.47 7.47 0 00-1.8.872 6.35 6.35 0 01-1.952-.525c-.934-.435-1.092-.24-1.406.148l-.63.777c-.314.389-.472.583.148 1.406.35.464.721 1.15.937 1.857a7.458 7.458 0 00-.429 1.894 6.345 6.345 0 01-1.643 1.245c-.918.468-.862.712-.75 1.199l.225.974c.113.487.169.731 1.2.75.57.01 1.323.135 2.003.39.345.575.765 1.1 1.247 1.56a6.35 6.35 0 01-.072 2.032c-.213 1.008.011 1.118.46 1.337l.9.439c.449.219.674.328 1.337-.46a6.343 6.343 0 011.59-1.327 7.571 7.571 0 001.942 0 6.343 6.343 0 011.59 1.326c.663.79.888.68 1.337.46l.9-.438c.449-.219.673-.329.46-1.337a6.35 6.35 0 01-.072-2.031 7.533 7.533 0 001.247-1.56 6.348 6.348 0 012.003-.391c1.031-.019 1.087-.263 1.2-.75l.225-.974c.112-.487.168-.73-.75-1.2a6.345 6.345 0 01-1.643-1.244 7.458 7.458 0 00-.43-1.894 6.342 6.342 0 01.938-1.857c.62-.823.462-1.017.148-1.406l-.63-.777c-.314-.389-.472-.583-1.406-.148a6.35 6.35 0 01-1.952.525 7.47 7.47 0 00-1.8-.871A6.347 6.347 0 0115.5 5c-.235-.941-.47-.997-.914-1zM14 9.5a4.5 4.5 0 110 9 4.5 4.5 0 010-9zm0 2a2.5 2.5 0 100 5 2.5 2.5 0 000-5z" fill="currentColor" /></g></symbol>'})),Te=!0)}var Pe=function(e){return Object(we.b)((function(){Ie()}),[]),a.a.createElement(Ce.a,Object(Oe.assign)({},e,{viewBox:"0 0 28 28",id:"settings_outline_28",width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};Pe.mountIcon=Ie;var De=Pe,Ne=function(e){return a.a.createElement("svg",f()({width:"28",height:"28",viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),a.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.6 3.00002H21.4L21.4463 3.00001C21.6845 2.99992 21.969 2.99981 22.2197 3.02029C22.5101 3.04402 22.9261 3.10491 23.362 3.327C23.9265 3.61462 24.3854 4.07357 24.673 4.63805C24.8951 5.07394 24.956 5.48993 24.9798 5.78036C25.0002 6.03099 25.0001 6.31548 25 6.5537L25 6.60002V7.40002L25 7.4463C25.0001 7.68453 25.0002 7.96906 24.9798 8.21969C24.956 8.51012 24.8951 8.9261 24.673 9.362C24.3854 9.92648 23.9265 10.3854 23.362 10.673C22.9261 10.8951 22.5101 10.956 22.2197 10.9798C21.969 11.0002 21.6845 11.0001 21.4463 11L21.4 11H18.6L18.5537 11C18.3155 11.0001 18.031 11.0002 17.7804 10.9798C17.4899 10.956 17.0739 10.8951 16.6381 10.673C16.0736 10.3854 15.6146 9.92648 15.327 9.362C15.1049 8.9261 15.044 8.51012 15.0203 8.21969C14.9998 7.96905 14.9999 7.68454 15 7.4463L15 7.40002V6.60002L15 6.55375C14.9999 6.31551 14.9998 6.031 15.0203 5.78036C15.044 5.48993 15.1049 5.07394 15.327 4.63805C15.6146 4.07357 16.0736 3.61462 16.6381 3.327C17.0739 3.10491 17.4899 3.04402 17.7804 3.02029C18.031 2.99981 18.3155 2.99992 18.5537 3.00001L18.6 3.00002ZM17.109 5.54603C17 5.75995 17 6.03997 17 6.60002V7.40002C17 7.96008 17 8.2401 17.109 8.45401C17.2049 8.64218 17.3579 8.79516 17.546 8.89103C17.7599 9.00002 18.04 9.00002 18.6 9.00002H21.4C21.9601 9.00002 22.2401 9.00002 22.454 8.89103C22.6422 8.79516 22.7952 8.64218 22.891 8.45401C23 8.24011 23 7.96009 23 7.40005V6.60002C23 6.03999 23 5.75994 22.891 5.54603C22.7952 5.35787 22.6422 5.20489 22.454 5.10902C22.2401 5.00002 21.9601 5.00002 21.4 5.00002H18.6C18.04 5.00002 17.7599 5.00002 17.546 5.10902C17.3579 5.20489 17.2049 5.35787 17.109 5.54603ZM9.40002 17H6.60002L6.55375 17C6.31551 16.9999 6.031 16.9998 5.78036 17.0203C5.48993 17.044 5.07394 17.1049 4.63805 17.327C4.07357 17.6146 3.61462 18.0736 3.327 18.6381C3.10491 19.0739 3.04402 19.4899 3.02029 19.7804C2.99981 20.031 2.99992 20.3155 3.00001 20.5537L3.00002 20.6V21.4L3.00001 21.4463C2.99992 21.6845 2.99981 21.969 3.02029 22.2197C3.04402 22.5101 3.10491 22.9261 3.327 23.362C3.61462 23.9265 4.07357 24.3854 4.63805 24.673C5.07394 24.8951 5.48993 24.956 5.78036 24.9798C6.03099 25.0002 6.31548 25.0001 6.5537 25L6.60002 25H9.40002L9.4463 25C9.68453 25.0001 9.96906 25.0002 10.2197 24.9798C10.5101 24.956 10.9261 24.8951 11.362 24.673C11.9265 24.3854 12.3854 23.9265 12.673 23.362C12.8951 22.9261 12.956 22.5101 12.9798 22.2197C13.0002 21.969 13.0001 21.6845 13 21.4463L13 21.4V20.6L13 20.5537C13.0001 20.3155 13.0002 20.031 12.9798 19.7804C12.956 19.4899 12.8951 19.0739 12.673 18.6381C12.3854 18.0736 11.9265 17.6146 11.362 17.327C10.9261 17.1049 10.5101 17.044 10.2197 17.0203C9.96905 16.9998 9.68454 16.9999 9.4463 17L9.40002 17ZM5.00002 20.6C5.00002 20.04 5.00002 19.7599 5.10902 19.546C5.20489 19.3579 5.35787 19.2049 5.54603 19.109C5.75995 19 6.03997 19 6.60002 19H9.40002C9.96008 19 10.2401 19 10.454 19.109C10.6422 19.2049 10.7952 19.3579 10.891 19.546C11 19.7599 11 20.04 11 20.6V21.4C11 21.9601 11 22.2401 10.891 22.454C10.7952 22.6422 10.6422 22.7952 10.454 22.891C10.2401 23 9.96009 23 9.40005 23H6.60002C6.03999 23 5.75994 23 5.54603 22.891C5.35787 22.7952 5.20489 22.6422 5.10902 22.454C5.00002 22.2401 5.00002 21.9601 5.00002 21.4V20.6ZM21.4 13H18.6L18.5537 13C18.3155 12.9999 18.031 12.9998 17.7804 13.0203C17.4899 13.044 17.0739 13.1049 16.6381 13.327C16.0736 13.6146 15.6146 14.0736 15.327 14.6381C15.1049 15.0739 15.044 15.4899 15.0203 15.7804C14.9998 16.031 14.9999 16.3155 15 16.5537L15 16.6V21.4L15 21.4463C14.9999 21.6845 14.9998 21.969 15.0203 22.2197C15.044 22.5101 15.1049 22.9261 15.327 23.362C15.6146 23.9265 16.0736 24.3854 16.6381 24.673C17.0739 24.8951 17.4899 24.956 17.7804 24.9798C18.031 25.0002 18.3155 25.0001 18.5537 25L18.6 25H21.4L21.4463 25C21.6845 25.0001 21.9691 25.0002 22.2197 24.9798C22.5101 24.956 22.9261 24.8951 23.362 24.673C23.9265 24.3854 24.3854 23.9265 24.673 23.362C24.8951 22.9261 24.956 22.5101 24.9798 22.2197C25.0002 21.9691 25.0001 21.6846 25 21.4463L25 21.4V16.6L25 16.5537C25.0001 16.3155 25.0002 16.031 24.9798 15.7804C24.956 15.4899 24.8951 15.0739 24.673 14.6381C24.3854 14.0736 23.9265 13.6146 23.362 13.327C22.9261 13.1049 22.5101 13.044 22.2197 13.0203C21.969 12.9998 21.6845 12.9999 21.4463 13L21.4 13ZM17 16.6C17 16.04 17 15.7599 17.109 15.546C17.2049 15.3579 17.3579 15.2049 17.546 15.109C17.7599 15 18.04 15 18.6 15H21.4C21.9601 15 22.2401 15 22.454 15.109C22.6422 15.2049 22.7952 15.3579 22.891 15.546C23 15.7599 23 16.04 23 16.6V21.4C23 21.9601 23 22.2401 22.891 22.454C22.7952 22.6422 22.6422 22.7952 22.454 22.891C22.2401 23 21.9601 23 21.4001 23H18.6C18.04 23 17.7599 23 17.546 22.891C17.3579 22.7952 17.2049 22.6422 17.109 22.454C17 22.2401 17 21.9601 17 21.4V16.6ZM9.40002 3.00002H6.60002L6.55375 3.00001C6.31551 2.99992 6.031 2.99981 5.78036 3.02029C5.48993 3.04402 5.07394 3.10491 4.63805 3.327C4.07357 3.61462 3.61462 4.07357 3.327 4.63805C3.10491 5.07394 3.04402 5.48993 3.02029 5.78036C2.99981 6.031 2.99992 6.31551 3.00001 6.55375L3.00002 6.60002V11.4L3.00001 11.4463C2.99992 11.6845 2.99981 11.969 3.02029 12.2197C3.04402 12.5101 3.10491 12.9261 3.327 13.362C3.61462 13.9265 4.07357 14.3854 4.63805 14.673C5.07394 14.8951 5.48993 14.956 5.78036 14.9798C6.031 15.0002 6.31551 15.0001 6.55375 15L6.60002 15H9.40002L9.4463 15C9.68453 15.0001 9.96905 15.0002 10.2197 14.9798C10.5101 14.956 10.9261 14.8951 11.362 14.673C11.9265 14.3854 12.3854 13.9265 12.673 13.362C12.8951 12.9261 12.956 12.5101 12.9798 12.2197C13.0002 11.969 13.0001 11.6845 13 11.4463L13 11.4V6.60002L13 6.55375C13.0001 6.31551 13.0002 6.031 12.9798 5.78036C12.956 5.48993 12.8951 5.07394 12.673 4.63805C12.3854 4.07357 11.9265 3.61462 11.362 3.327C10.9261 3.10491 10.5101 3.04402 10.2197 3.02029C9.96905 2.99981 9.68454 2.99992 9.4463 3.00001L9.40002 3.00002ZM5.00002 6.60002C5.00002 6.03997 5.00002 5.75995 5.10902 5.54603C5.20489 5.35787 5.35787 5.20489 5.54603 5.10902C5.75995 5.00002 6.03997 5.00002 6.60002 5.00002H9.40002C9.96008 5.00002 10.2401 5.00002 10.454 5.10902C10.6422 5.20489 10.7952 5.35787 10.891 5.54603C11 5.75995 11 6.03997 11 6.60002V11.4C11 11.9601 11 12.2401 10.891 12.454C10.7952 12.6422 10.6422 12.7952 10.454 12.891C10.2401 13 9.96008 13 9.40002 13H6.60002C6.03997 13 5.75995 13 5.54603 12.891C5.35787 12.7952 5.20489 12.6422 5.10902 12.454C5.00002 12.2401 5.00002 11.9601 5.00002 11.4V6.60002Z",fill:"currentColor"}))},xe=(n(882),n(5)),Re=(n(883),Object(I.Qb)((function(e){var t=e.className,n=e.children,r=e.viewWidth,i="mobile";return r>=I.Ib.SMALL_TABLET&&(i="tablet"),r>=I.Ib.TABLET&&(i="desktop"),a.a.createElement("section",{className:Object(I.Lb)("NavigationMenu",t)},a.a.createElement("nav",{className:"NavigationMenu__nav NavigationMenu__nav--".concat(i)},n))}),{viewWidth:!0})),Me=n(182),Le=n(23),Be=n(42),Fe=function(e){var t=Object(Be.a)(Le.u),n=null!==t&&e.some((function(e){return e.id===Number(t)}));return 0===e.length?null:n?Number(t):me()(e,1)[0].id},He=n(362),Ve=n(28),Ue=n(244),ze=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(I.Lb)("MenuItem",{MenuItem__active:xe.d.isActive(e,t,!1)})},Ge=Object(I.Qb)((function(e){var t=e.id,n=Object(P.c)().getLangKey,r=Object(Ve.b)(),i=r.menuSchoolsLoaded,o=r.menuSchools,c=r.menuSchoolRequestsLoaded,s=r.menuSchoolRequests,u=r.messagesUnreadCount,l=Object(He.a)().showSupport,d=1===s.length&&0===o.length,f=0===s.length&&1===o.length,p=a.a.createElement("a",{href:xe.d.buildPath(xe.a),className:"MainLogoLink"},a.a.createElement(Me.a,{className:"Main__logo"}));return a.a.createElement(I.T,{id:t,className:"Main"},a.a.createElement(I.U,{left:p,className:"MainPanelHeader"}),a.a.createElement(Re,{className:"Main__menu"},a.a.createElement(I.m,{className:ze(xe.j.DASHBOARD),href:xe.d.buildUrl(xe.j.DASHBOARD,{schoolId:Fe(o)}),before:a.a.createElement(Ne,{className:"Main__icon--dashboard"})},n("vkui_edu_main")),c&&s.map((function(e){var t;return a.a.createElement(I.m,{key:e.id,className:ze(xe.j.SCHOOL,{schoolId:e.id}),href:xe.d.buildUrl(xe.j.SCHOOL,{schoolId:e.id}),before:a.a.createElement(ge.a,null),description:n("vkui_edu_menu_school_request")},d?n(Object(Ue.a)(null==e||null===(t=e.organization_type)||void 0===t?void 0:t.structure,"my")):e.name)})),i&&o.map((function(e){var t;return a.a.createElement(I.m,{key:e.id,className:ze(xe.j.SCHOOL,{schoolId:e.id}),href:xe.d.buildUrl(xe.j.SCHOOL,{schoolId:e.id}),before:a.a.createElement(ge.a,null)},f?n(Object(Ue.a)(null==e||null===(t=e.organization_type)||void 0===t?void 0:t.structure,"my")):e.name)})),a.a.createElement(I.m,{className:ze(xe.j.MESSAGES),href:xe.d.buildUrl(xe.j.MESSAGES),before:a.a.createElement(be.a,null),after:u>0&&a.a.createElement(I.r,{mode:"primary"},u)},n("vkui_edu_messages")),a.a.createElement(I.m,{className:ze(xe.j.DOCUMENTS),href:xe.d.buildUrl(xe.j.DOCUMENTS),before:a.a.createElement(_e.a,null)},n("vkui_edu_my_docs")),a.a.createElement(I.m,{className:ze(xe.j.PROFILE),href:xe.d.buildUrl(xe.j.PROFILE),before:a.a.createElement(je,null)},n("vkui_edu_profile")),a.a.createElement(I.m,{className:ze(xe.j.SETTINGS),href:xe.d.buildUrl(xe.j.SETTINGS),before:a.a.createElement(De,null)},n("vkui_edu_settings"))),a.a.createElement("div",{className:"Main__footer"},a.a.createElement(I.ob,{wide:!0,className:"Main__footerSeparator"}),a.a.createElement(I.L,{href:xe.d.buildUrl(xe.i.PRIVACY),className:"Main__footerLink"},n("vkui_edu_confidential_link")),a.a.createElement(I.L,{href:xe.d.buildUrl(xe.i.TERMS),className:"Main__footerLink"},n("vkui_edu_conditions_link")),a.a.createElement(I.L,{onClick:function(){return l()},className:"Main__footerLink Main__footerLink--margined"},n("vkui_edu_help"))))}),{viewWidth:!0}),We=n(382);var qe=n(237),Ke=n(61),Ye=n(197),Ze=n(209),Qe=n(238),Je=n(38),Xe=n(58),$e=Object(c.createStore)({snackbarList:[]}),et=(n(951),function(){var e=Object(Je.c)($e).snackbarList,t=Object(Xe.a)().onSnackbarRemove;return a.a.createElement(a.a.Fragment,null,e.map((function(e){return a.a.createElement(I.rb,f()({},e,{key:e.id,className:"Snackbar--education",onClose:function(){e.onClose&&e.onClose(),t()}}))})))}),tt=n(483),nt=(n(952),n(953),n(14)),rt=n(25),at=function(){return a.a.createElement("div",{className:"LogoSkeleton"},a.a.createElement(rt.a,{mode:"app",size:24,shadow:!1,className:"LogoSkeleton__icon"}),a.a.createElement(nt.a,{width:"78px",height:"18px"}))},it=(n(956),n(957),function(){return a.a.createElement(I.m,{className:"NavigationMenuItemSkeleton",before:a.a.createElement(rt.a,{size:28,shadow:!1,className:"NavigationMenuItemSkeleton__avatar"})},a.a.createElement(nt.a,{backgroundColorType:"dark"}))}),ot=function(){return a.a.createElement("div",{className:"NavigationMenuSkeleton"},a.a.createElement(Re,{className:"NavigationMenuSkeleton__menu"},a.a.createElement(it,null),a.a.createElement(it,null),a.a.createElement(it,null),a.a.createElement(it,null),a.a.createElement(it,null),a.a.createElement(it,null)),a.a.createElement(I.ob,{wide:!0,className:"NavigationMenuSkeleton__footerSeparator"}),a.a.createElement("div",{className:"NavigationMenuSkeleton__footer"},a.a.createElement("div",{className:"NavigationMenuSkeleton__footerLink"},a.a.createElement(nt.a,{width:"147px",backgroundColorType:"dark"})),a.a.createElement("div",{className:"NavigationMenuSkeleton__footerLink"},a.a.createElement(nt.a,{width:"56px",backgroundColorType:"dark"})),a.a.createElement("div",{className:"NavigationMenuSkeleton__footerLink"},a.a.createElement(nt.a,{width:"96px",backgroundColorType:"dark"}))))},ct=(n(958),function(){return a.a.createElement("div",{className:"PanelHeaderSkeleton"},a.a.createElement("div",{className:"PanelHeaderSkeleton__content"},a.a.createElement("div",{className:"PanelHeaderSkeleton__leftInfo"},a.a.createElement(nt.a,{height:"16px",className:"PanelHeaderSkeleton__title"}),a.a.createElement(nt.a,{width:"50px"})),a.a.createElement(rt.a,{shadow:!1,size:36,className:"PanelHeaderSkeleton__avatar"}),a.a.createElement(rt.a,{shadow:!1,size:16,style:{borderRadius:8}})))}),st=n(181),ut=(n(1001),function(){return a.a.createElement(I.C,{className:"SettingsSidebarSkeleton",separator:"hide"},a.a.createElement(I.t,null,a.a.createElement(nt.a,{width:"224px",height:"160px",className:"SettingsSidebarSkeleton__line1"}),a.a.createElement(nt.a,{width:"152px",height:"18px",className:"SettingsSidebarSkeleton__line2"}),a.a.createElement(nt.a,{width:"260px",className:"SettingsSidebarSkeleton__line3"}),a.a.createElement(nt.a,{width:"268px",className:"SettingsSidebarSkeleton__line4"}),a.a.createElement(nt.a,{width:"164px",height:"36px",className:"SettingsSidebarSkeleton__line5"})))}),lt=(n(1002),n(1003),function(){return a.a.createElement(I.pb,{className:"SidebarItemSkeleton"},a.a.createElement(nt.a,{width:"176px"}))}),dt=function(){return a.a.createElement(I.C,{className:"MessagesSidebarSkeleton"},a.a.createElement(lt,null),a.a.createElement(lt,null),a.a.createElement(lt,null))},ft=(n(1004),function(){return a.a.createElement(I.C,{className:"ProfileSidebarSkeleton"},a.a.createElement(lt,null),a.a.createElement(lt,null))}),pt=n(72),ht=n(275),mt=(n(1006),n(1007),function(e){var t=e.lineWidth,n=void 0===t?"122px":t;return a.a.createElement("div",{className:"RadioInputSkeleton"},a.a.createElement(rt.a,{size:22,shadow:!1}),a.a.createElement(nt.a,{width:n,className:"RadioInputSkeleton__text"}))}),vt=function(){return a.a.createElement(I.C,{className:"SchoolMembersSidebarFooterSkeleton"},a.a.createElement(I.D,null,a.a.createElement(nt.a,{width:"187px"})),a.a.createElement(I.x,null,a.a.createElement(I.w,{top:a.a.createElement(nt.a,{width:"35px"})},a.a.createElement(mt,null),a.a.createElement(mt,null),a.a.createElement(mt,null)),a.a.createElement(I.w,{top:a.a.createElement(nt.a,{width:"82px"})},a.a.createElement(nt.a,{width:"272",height:"44px"}))))},gt=(n(1008),function(){return a.a.createElement(I.C,{className:"SchoolClassesSidebarFooterSkeleton"},a.a.createElement(I.D,null,a.a.createElement(nt.a,{width:"187px"})),a.a.createElement(I.x,null,a.a.createElement(I.w,{top:a.a.createElement(nt.a,{width:"82px"})},a.a.createElement(nt.a,{width:"272",height:"44px"})),a.a.createElement(I.w,{top:a.a.createElement(nt.a,{width:"35px"})},a.a.createElement(mt,{lineWidth:"194px"}),a.a.createElement(mt,{lineWidth:"194px"}))))}),bt=(n(580),function(e){var t=e.itemCount,n=void 0===t?6:t,i=Object(r.useState)(Array.from(Array(n).keys())),o=me()(i,1)[0];return a.a.createElement(I.C,null,o.map((function(e,t){return a.a.createElement(I.pb,{key:"skeleton_".concat(t),className:"DasbdoardListSkeleton__item",before:a.a.createElement(rt.a,{shadow:!1,size:40}),disabled:!0},a.a.createElement(nt.a,null))})))}),_t=n(673),yt=n(29),Et=n(20),Ot=n(239),wt=n(46),Ct=n(47),St=n(1332),At=(n(1009),function(e){var t=e.apiUrl,n=e.showQr,r=e.icon,i=e.showAsSecondary,o=void 0!==i&&i,c=e.pressQr;return a.a.createElement("div",{className:Object(I.Lb)("DownloadAppButton",{"DownloadAppButton--secondary":o})},a.a.createElement("a",{href:t,target:"_blank",rel:"noreferrer",className:"DownloadAppButton__platformGroupLink"},a.a.createElement("div",{className:"DownloadAppButton__platformGroupLinkIcon DownloadAppButton__platformGroupLinkIcon--".concat(r)})),n&&a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"DownloadAppButton__platformGroupButtonDelimiter"}),a.a.createElement("div",{className:"DownloadAppButton__platformGroupLink DownloadAppButton__platformGroupLink--qrCode",onClick:c},a.a.createElement(St.a,null))))}),kt=n(222),jt=(n(1010),n(32)),Tt=(n(1011),function(){return a.a.createElement(I.C,null,a.a.createElement(I.t,{className:"DownloadDesktopAppSkeleton__in"},a.a.createElement(nt.a,{className:"DownloadDesktopAppSkeleton__titleText",width:"206px",height:"16px"}),a.a.createElement(nt.a,{className:"DownloadDesktopAppSkeleton__titleText",width:"223px",height:"16px"}),a.a.createElement(nt.a,{className:"DownloadDesktopAppSkeleton__subHeader",width:"206px",height:"16px"}),a.a.createElement(nt.a,{className:"DownloadDesktopAppSkeleton__iconButton",width:"206px",height:"52px"}),a.a.createElement(nt.a,{className:"DownloadDesktopAppSkeleton__iconButton",width:"206px",height:"52px"}),a.a.createElement(nt.a,{className:"DownloadDesktopAppSkeleton__iconButton",width:"206px",height:"52px"}),a.a.createElement(nt.a,{className:"DownloadDesktopAppSkeleton__subHeader",width:"206px",height:"16px"}),a.a.createElement(nt.a,{className:"DownloadDesktopAppSkeleton__wideButton",width:"100%",height:"36px"}),a.a.createElement(nt.a,{className:"DownloadDesktopAppSkeleton__smallText",width:"206px",height:"12px"}),a.a.createElement(nt.a,{className:"DownloadDesktopAppSkeleton__smallText",width:"206px",height:"12px"})))}),It=function(e){var t=e.showSkeleton,n=void 0!==t&&t,i=Object(P.c)().getLangKey,o=Object(I.Ob)().viewWidth,c=Object(yt.a)(o),s=Object(jt.a)().go,u=Object(r.useState)(null!==Object(Be.a)(Le.z)),l=me()(u,2),d=l[0],f=l[1],p=function(){Object(Be.c)(Le.z,"true"),f(!0)},h=Object(kt.c)(i),m=Object(kt.e)(i),v=Object(kt.d)(i),g=Object(r.useRef)(h[0]);Et.d.OS!==Et.c.MAC&&Et.d.OS!==Et.c.LINUX||(g.current=h.find((function(e){return e.type===Et.d.OS})));var b=function(e){s(xe.i.DOWNLOAD_APP_MODAL,{pladformType:e})};return!c||d?null:n?a.a.createElement(Tt,null):a.a.createElement(I.C,null,a.a.createElement(I.t,{className:"DownloadDesktopApp__block"},a.a.createElement(I.L,{className:"DownloadDesktopApp__close",onClick:p},a.a.createElement(_t.a,null)),a.a.createElement(I.Fb,{className:"DownloadDesktopApp__title",weight:"regular",level:"1"},i("vkui_edu_calls_block_title")),a.a.createElement(I.E,{className:"DownloadDesktopApp__headline",weight:"medium"},i("vkui_edu_calls_block_headline_mobile")),a.a.createElement("ul",{className:"DownloadDesktopApp__items"},a.a.createElement("li",{className:"DownloadDesktopApp__item"},a.a.createElement(At,{apiUrl:Ct.i,showAsSecondary:!0,icon:"playMarket",pressQr:function(){b(Et.c.ANDROID)},showQr:c})),a.a.createElement("li",{className:"DownloadDesktopApp__item"},a.a.createElement(At,{apiUrl:Ct.b,showAsSecondary:!0,icon:"appStore",pressQr:function(){b(Et.c.IOS)},showQr:c})),a.a.createElement("li",{className:"DownloadDesktopApp__item"},a.a.createElement(At,{apiUrl:Ct.a,showAsSecondary:!0,icon:"appGallery",pressQr:function(){b(Et.c.ANDROID_HUAWEI)},showQr:c}))),a.a.createElement(I.E,{className:"DownloadDesktopApp__headline",weight:"medium"},i("vkui_edu_calls_block_headline_desktop")),a.a.createElement(I.j,{size:"l",mode:"commerce",stretched:!0,onClick:function(){Et.d.OS===Et.c.MAC?Object(Ot.a)(Ct.f[Et.c.MAC],Ct.g[Et.c.MAC]):Et.d.OS===Et.c.WINDOWS?Object(Ot.a)(Ct.f[Et.c.WINDOWS],Ct.g[Et.c.WINDOWS]):window.open(wt.b,"_blank"),Object(Be.c)(Le.A,"true"),p()}},v()),a.a.createElement("div",{className:"DownloadDesktopApp__platformCaption"},m()),a.a.createElement(I.j,{onClick:function(){return s(xe.i.OTHER_PLATFORMS)},mode:"tertiary",className:"DownloadDesktopApp__otherButton"},i("vkui_edu_landing_platforms_download_other_platforms"))))},Pt=n(188),Dt=n(89),Nt=n(115),xt=function(){var e=Object(Dt.a)().accountInfo,t=Object(Nt.a)().profileSchools,n=(null==t?void 0:t.length)>0,r=Boolean(e&&e.id);return a.a.createElement(a.a.Fragment,null,r&&n&&a.a.createElement(bt,{itemCount:8}),a.a.createElement(It,{showSkeleton:!0}),a.a.createElement(Pt.a,{showSkeleton:!0}))},Rt=Object(r.memo)((function(e){var t,n=e.activePanel;return(t={},A()(t,xe.j.MESSAGES,a.a.createElement(dt,null)),A()(t,xe.j.DOCUMENTS,a.a.createElement(ut,null)),A()(t,xe.j.PROFILE,a.a.createElement(ft,null)),A()(t,xe.j.PROFILE_CONTACTS,a.a.createElement(ft,null)),A()(t,xe.j.SETTINGS,a.a.createElement(ut,null)),A()(t,xe.j.SCHOOL,a.a.createElement(pt.a,null)),A()(t,xe.j.SCHOOL_DOCS,a.a.createElement(a.a.Fragment,null,a.a.createElement(pt.a,null),a.a.createElement(ht.a,null))),A()(t,xe.j.SCHOOL_VIDEOS,a.a.createElement(a.a.Fragment,null,a.a.createElement(pt.a,null),a.a.createElement(ht.a,null))),A()(t,xe.j.SCHOOL_ARTICLES,a.a.createElement(a.a.Fragment,null,a.a.createElement(pt.a,null),a.a.createElement(ht.a,null))),A()(t,xe.j.SCHOOL_MEMBERS,a.a.createElement(a.a.Fragment,null,a.a.createElement(pt.a,null),a.a.createElement(vt,null))),A()(t,xe.j.SCHOOL_CLASSES,a.a.createElement(a.a.Fragment,null,a.a.createElement(pt.a,null),a.a.createElement(gt,null))),A()(t,xe.j.SCHOOL_CHATS,a.a.createElement(pt.a,{type:"long"})),A()(t,xe.j.SCHOOL_EDIT,a.a.createElement(pt.a,{type:"long"})),A()(t,xe.j.SCHOOL_MESSAGES,a.a.createElement(pt.a,{type:"long"})),A()(t,xe.j.SCHOOL_LEADERS,a.a.createElement(pt.a,{type:"long"})),A()(t,xe.j.SCHOOL_REQUESTS,a.a.createElement(a.a.Fragment,null,a.a.createElement(pt.a,{type:"long"}),a.a.createElement(vt,null))),A()(t,xe.j.SCHOOL_INVITE_LINKS,a.a.createElement(pt.a,{type:"long"})),A()(t,xe.j.SCHOOL_GRADE_INFO,a.a.createElement(pt.a,{type:"long"})),A()(t,xe.j.SCHOOL_GRADE_TEACHERS,a.a.createElement(pt.a,{type:"long"})),A()(t,xe.j.SCHOOL_GRADE_CHATS,a.a.createElement(pt.a,{type:"long"})),A()(t,xe.j.DASHBOARD,a.a.createElement(xt,null)),t)[n]||a.a.createElement(pt.a,null)}));Rt.displayName="RightSidebarSkeleton";var Mt=function(e){var t=xe.k.some((function(e){return xe.d.isActive(e)}));return e>=I.Ib.TABLET||t||!1},Lt=(n(1018),function(){return a.a.createElement(I.yb,{className:"NavigationTabbarSkeleton"},a.a.createElement(I.zb,{text:a.a.createElement(nt.a,{width:"50px"})},a.a.createElement("div",{style:{height:"28px"}},a.a.createElement(rt.a,{size:28}))),a.a.createElement(I.zb,{text:a.a.createElement(nt.a,{width:"50px"})},a.a.createElement("div",{style:{height:"28px"}},a.a.createElement(rt.a,{size:28}))),a.a.createElement(I.zb,{text:a.a.createElement(nt.a,{width:"50px"})},a.a.createElement("div",{style:{height:"28px"}},a.a.createElement(rt.a,{size:28}))),a.a.createElement(I.zb,{text:a.a.createElement(nt.a,{width:"50px"})},a.a.createElement("div",{style:{height:"28px"}},a.a.createElement(rt.a,{size:28}))),a.a.createElement(I.zb,{text:a.a.createElement(nt.a,{width:"50px"})},a.a.createElement("div",{style:{height:"28px"}},a.a.createElement(rt.a,{size:28}))))}),Bt=function(e){var t=e.activePanel,n=e.needSpaced,r=e.canVisibleColumn,i=e.contentColWidth,o=e.isOneCol,c=e.isEpic,s=Object(I.Ob)().viewWidth,u=Object(yt.b)(s),l=r,d=l&&a.a.createElement(I.ub,{width:"280px",fixed:!0,className:"InitPlaceholder__splitCol"},a.a.createElement(I.T,{id:"placeholderStub",className:"InitPlaceholder__navPanel"},a.a.createElement(I.U,{separator:!1,left:a.a.createElement(at,null)}),a.a.createElement(ot,null))),f=l&&a.a.createElement(I.ub,{width:"320px",className:"InitPlaceholder__splitCol"},a.a.createElement(I.T,{id:"sidebarStub"},a.a.createElement(I.U,{right:a.a.createElement(ct,null)}),a.a.createElement(Rt,{activePanel:t}))),p=a.a.createElement(I.T,{id:"mainStub"},a.a.createElement(st.a,{activePanel:t}));c&&(p=a.a.createElement(I.u,{className:Object(I.Lb)({"Epic--tabbar":!Mt(s)}),tabbar:Mt(s)?null:a.a.createElement(Lt,null),activeStory:"placeholder"},a.a.createElement(I.Hb,{id:"placeholder",activePanel:"placeholder"},a.a.createElement(I.T,{id:"placeholder"},a.a.createElement(st.a,{id:t,activePanel:t})))));var h=a.a.createElement(I.ub,{width:i,spaced:n,className:"InitPlaceholder__splitCol"},p);return s<=I.Ib.MOBILE?a.a.createElement(I.vb,{className:!u&&"InitPlaceholder__smallTabletLayout"},a.a.createElement(I.ub,{width:"100%",animate:u},p)):o?a.a.createElement(I.vb,{className:"InitPlaceholder",header:a.a.createElement(I.U,{shadow:!0,separator:!1})},a.a.createElement(I.ub,{width:"100%",maxWidth:i,spaced:n},p)):s<I.Ib.DESKTOP?a.a.createElement(I.vb,{className:"InitPlaceholder",header:a.a.createElement(I.U,{shadow:!0,separator:!1})},d,h):a.a.createElement(I.vb,{className:"InitPlaceholder",header:a.a.createElement(I.U,{shadow:!0,separator:!1})},d,h,f)},Ft=n(21),Ht=n.n(Ft),Vt=(n(1019),n(75)),Ut=function(e){var t,n,i=e.go,o=Object(P.c)().getLangKey,c=Object(Ve.b)(),s=Object(Vt.a)().hidePopout,u=c.menuSchoolsLoaded,l=c.menuSchools,d=c.menuSchoolRequestsLoaded,f=c.menuSchoolRequests,p=c.schoolInfo,h=c.messagesUnreadCount,m=(null==p?void 0:p.id)||(u?null==l||null===(t=l[0])||void 0===t?void 0:t.id:void 0)||(d?null==f||null===(n=f[0])||void 0===n?void 0:n.id:void 0),v=m?xe.j.SCHOOL:xe.j.SCHOOL_EMPTY,g=Object(r.useMemo)((function(){var e=[].concat(Ht()(l),Ht()(f));return 0===e.length||e.some((function(e){var t;return"horizontal"===(null==e||null===(t=e.organization_type)||void 0===t?void 0:t.structure)}))?"org":"school"}),[u,d]),b=function(e,t){return function(){s(),i(e,t)}},_=m?{schoolId:m}:{};return a.a.createElement(I.yb,{className:Object(I.Lb)("NavigationTabbar")},a.a.createElement(I.zb,{onClick:b(xe.j.DASHBOARD,{schoolId:Fe(l)}),selected:xe.d.isActive(xe.j.DASHBOARD,{schoolId:Fe(l)}),text:o("vkui_edu_main")},a.a.createElement("div",{style:{height:"28px"}},a.a.createElement(Ne,null))),a.a.createElement(I.zb,{onClick:b(v,_),selected:xe.d.isActive(v,_,!1),text:o("vkui_edu_".concat(g))},a.a.createElement(ge.a,null)),a.a.createElement(I.zb,{onClick:b(xe.j.MESSAGES),selected:xe.d.isActive(xe.j.MESSAGES),text:o("vkui_edu_messages"),label:h>0&&h},a.a.createElement(be.a,null)),a.a.createElement(I.zb,{onClick:b(xe.j.DOCUMENTS),selected:xe.d.isActive(xe.j.DOCUMENTS),text:o("vkui_edu_docs")},a.a.createElement(_e.a,null)),a.a.createElement(I.zb,{onClick:b(xe.j.PROFILE),selected:xe.d.isActive(xe.j.PROFILE)||xe.d.isActive(xe.j.SETTINGS),text:o("vkui_edu_profile")},a.a.createElement(je,null)))},zt=n(379),Gt=n(62),Wt=n(284),qt=n(219),Kt=n(242),Yt=0,Zt=function(e){if("VKWebAppUpdateConfig"===e.detail.type){var t=e.detail.data;Yt=Number(t.app_id)}return Yt};T.a.subscribe(Zt);var Qt=a.a.createContext({clientAppId:Yt,isEduClientApp:!1});var Jt=function(e){var t=e.children,n=function(){var e=Object(r.useState)(Yt),t=me()(e,2),n=t[0],a=t[1],i=function(e){var t=Zt(e);a(t)};return Object(r.useEffect)((function(){return T.a.subscribe(i),function(){T.a.unsubscribe(i)}}),[]),n}(),i=Kt.b.includes(n);return a.a.createElement(Qt.Provider,{value:{clientAppId:n,isEduClientApp:i}},t)},Xt=n(484),$t=n(59),en=n(647),tn=n.n(en),nn=["online","here","здесь","тут"];new RegExp(['(?!,|;|:|\\.|\\s|<br ?/?>|"|\\(|\\)|\\[|\\]|!|\\?)',"(",[].concat(["all","everyone","все"]).concat(nn).map((function(e){return"@".concat(e,"|\\*").concat(e)})).join("|"),")",'(?=$|,|;|:|\\.(?![a-z0-9_-])|\\s|<br ?/?>|"|\\(|\\)|\\[|\\]|!|\\?)'].join(""),"gi");function rn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.split("_"),r=me()(n,2),a=r[0],i=r[1];return[a,i,t]}var an={};function on(e){if(an[e])return an[e];for(var t=e?e.length:0,n=[],r=[],a="",i=0;i<t;i++){var o=e[i],c=o.charCodeAt(0);c>=48&&c<=57||"_"===o||"-"===o?a+=o:"("!==o&&")"!==o&&":"!==o&&","!==o||(""!==a&&(r.push(a),n.push("id"),a=""),r.push(o),n.push(o))}a.length>0&&(r.push(a),n.push("id"));var s=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(a>50)return[[],t.length];for(var i=[],o="";r<t.length;){var c=t[r];if("id"===c)o=n[r];else if(","===c&&o)i.push(rn(o)),o="";else if("("===c){var s=e(t,n,r+1,a+1),u=me()(s,2),l=u[0],d=u[1];r=d,i.push(rn(o,l)),o=""}else if(")"===c)return""!==o&&i.push(rn(o)),[i,r];r++}return o&&i.push(rn(o)),[i,r]}(n,r),u=me()(s,1)[0];return Object.keys(an).length>300&&(an={}),an[e]=u,u}function cn(e,t){var n=[];e.fwd_count?n.push({type:"mail",id:-t,object:{fwd_count:e.fwd_count}}):e.fwd&&n.push({type:"mail",id:-t,object:{fwd_count:on(e.fwd).length}});for(var r=1;e["attach".concat(r,"_type")];++r)"call"===e["attach".concat(r,"_type")]?n.push({type:e["attach".concat(r,"_type")],id:e["attach".concat(r)],initiatorId:un(e["attach".concat(r,"_call_initiator_id")]),state:e["attach".concat(r,"_call_state")],duration:un(e["attach".concat(r,"_call_duration")]),receiverId:un(e["attach".concat(r,"_call_receiver_id")])}):n.push({type:e["attach".concat(r,"_type")],id:e["attach".concat(r)],kind:e["attach".concat(r,"_kind")],productId:e["attach".concat(r,"_product_id")]});return e.geo&&n.push({type:"geo",id:e.geo}),n}function sn(e){return e>2e9}function un(e){return!0===e?1:parseInt(e)||0}var ln=function(e){var t=me()(e,10),n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],c=t[5],s=t[6],u=t[7],l=t[8],d=t[9],f=Object.assign({},c||{},s||{});return{messageId:n,flags:r,peerId:a,date:i,attaches:cn(f,n),subject:c.title||"",text:o,kludges:f,randomId:u,userId:sn(a)?Number(f.from):a,update_time:d,chat_local_id:l}};function dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dn(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pn(e){switch(e[0]){case 0:return P=e,{type:"event_delete",localId:me()(P,2)[1]};case 1:return A=e,k=me()(A,4),j=k[1],T=k[2],I=k[3],{type:"event_replace_flags",messageId:j,mask:T,peerId:I};case 2:return function(e){var t=me()(e,4),n=t[1],r=t[2],a=t[3];return{type:"event_set_flags",messageId:n,flags:r,peerId:a}}(e);case 3:return function(e){var t=me()(e,4),n=t[1],r=t[2],a=t[3];return{type:"event_reset_flags",messageId:n,flags:r,peerId:a}}(e);case 4:return function(e){var t=me()(e,12),n=t[1],r=t[2],a=t[3],i=t[4],o=t[5],c=t[6],s=t[7],u=t[8],l=t[9],d=t[10],f=t[11];return fn(fn({type:"event_add_message"},ln([Number(n),Number(r),Number(i),Number(o),c,s,u,l,d,f])),{},{minorSortId:a})}(e);case 5:return hn(e);case 6:return function(e){var t=me()(e,4),n=t[1],r=t[2],a=t[3];return{type:"event_read_inbound",peerId:n,upToId:r,unread:a}}(e);case 7:return function(e){var t=me()(e,4),n=t[1],r=t[2],a=t[3];return{type:"event_read_outbound",peerId:n,upToId:r,unread:a}}(e);case 10:return function(e){var t=me()(e,4),n=t[1],r=t[2],a=t[3];return{type:"event_reset_directories",peerId:n,mask:r,local:void 0!==a&&a}}(e);case 11:return function(e){var t=me()(e,3),n=t[1],r=t[2];return{type:"event_replace_directories",peerId:n,mask:r}}(e);case 12:return function(e){var t=me()(e,4),n=t[1],r=t[2],a=t[3];return{type:"event_set_directories",peerId:n,mask:r,local:void 0!==a&&a}}(e);case 13:return function(e){var t=me()(e,3),n=t[1],r=t[2];return{type:"event_delete_dialog",peerId:n,localId:r}}(e);case 18:return function(e){var t=me()(e,11),n=t[1],r=t[2],a=t[3],i=t[4],o=t[5],c=t[6],s=t[7],u=t[8],l=t[9],d=t[10];return fn({type:"event_replace_message"},ln([Number(n),Number(r),Number(a),Number(i),o,c,s,u,l,d]))}(e);case 19:return function(e){var t=me()(e,2)[1];return{type:"event_invalidate_event",messageId:t}}(e);case 20:return function(e){var t=me()(e,3),n=t[1],r=t[2];return{type:"event_convo_major_id_changed",peerId:n,majorId:r}}(e);case 21:return function(e){var t=me()(e,3),n=t[1],r=t[2];return{type:"event_convo_minor_id_changed",peerId:n,minorId:r}}(e);case 23:return function(e){var t=me()(e,3),n=t[1],r=t[2];return{type:"peer_tags_changed",peerId:n,peerTagsMask:r}}(e);case 51:return function(e){var t=me()(e,3),n=t[1],r=t[2];return{type:"event_chat_changed",chatId:n,self:r}}(e);case 52:return function(e){var t=me()(e,4),n=t[1],r=t[2],a=t[3];return{type:"event_chat_updated",peerId:r,updateType:n,updateArg:a}}(e);case 63:return function(e){var t=me()(e,5),n=t[1],r=t[2],a=t[3],i=t[4];return{type:"event_typing",peerId:n,userIds:r,totalCount:a,ts:i}}(e);case 64:return function(e){var t=me()(e,5),n=t[1],r=t[2],a=t[3],i=t[4];return{type:"event_recoding_audio",peerId:n,userIds:r,totalCount:a,ts:i}}(e);case 70:return O=e,w=me()(O,3),C=w[1],S=w[2],{type:"event_video_call",userId:C,callId:S};case 80:return g=e,b=me()(g,4),_=b[1],y=b[2],E=b[3],{type:"event_unread_count",count:_,countNotMuted:y,showOnlyNotMuted:E};case 114:return function(e){var t=me()(e,2)[1]||{},n=t.peer_id,r=t.sound,a=t.disabled_until;return{type:"event_notify_settings_changed",peerId:n,sound:r,disabledUntil:a}}(e);case 115:return v=e,{type:"incoming_call",payload:me()(v,2)[1]};case 116:return function(e){var t=me()(e,2)[1]||{},n=t.id,r=t.flags,a=t.peer_id,i=t.date,o=t.message,c=t.kludges,s=t.random_id,u=t.chat_local_id,l=t.update_time,d=t.title;return hn([5,n,r,a,i,o,Object.assign({},c||{},{title:d||""}),{},s,u,l])}(e);case 117:return f=e,p=me()(f,2)[1]||{},h=p.uuid,m=p.device_name,{type:"event_audio_start",uuid:h,deviceName:void 0===m?"":m};case 119:return o=e,c=me()(o,2)[1],s=c.event_id,u=c.owner_id,l=c.peer_id,d=c.action,{type:"event_keyboard_callback_received",event_id:s,owner_id:u,peer_id:l,action:d};case 120:return function(e){tn()(e);return{type:"peer_profile_tags_changed"}}(e);case-1:return{type:"event_resync"};case-2:return n=e,r=me()(n,3),a=r[1],i=r[2],{type:"event_refresh_lp_key",key:a,url:i};case-3:return t=e,{type:"event_waiting_for_reconnect",timeout:me()(t,2)[1]};case-4:return{type:"event_reconnecting"};case-5:return{type:"event_reconnected"};default:return function(e){return{type:"event_empty",params:e}}(e)}var t,n,r,a,i,o,c,s,u,l,d,f,p,h,m,v,g,b,_,y,E,O,w,C,S,A,k,j,T,I,P}function hn(e){var t=me()(e,11),n=t[1],r=t[2],a=t[3],i=t[4],o=t[5],c=t[6],s=t[7],u=t[8],l=t[9],d=t[10];return fn({type:"event_edit_message"},ln([Number(n),Number(r),Number(a),Number(i),o,c,s,u,l,d]))}function mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mn(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gn(e,t){var n,r=new Promise((function(r){n=r,setTimeout(r.bind(null,t),1e3*e)}));return{pause:function(){return r},abort:function(){n(t)}}}function bn(e,t){e.waitAbortFns.push(t)}function _n(e){if(e.isStoppedFn())return Promise.resolve({ts:0,updates:[]});var t=e.runRequest(e),n=t.promise,r=t.cancel;return e.stopFn=r,window.lpDebug={startedAt:Date.now(),finishedAt:null,error:!1,promise:n,cancel:r},n.then((function(t){var n=me()(t,2),r=n[0],a=n[1];return window.lpDebug&&(window.lpDebug=vn(vn({},window.lpDebug),{},{finishedAt:Date.now(),promise:null,cancel:null})),e.onData(e,a),e.waitTimeout=2,JSON.parse(r)})).catch((function(t){var n=me()(t,2)[1];return window.lpDebug&&(window.lpDebug=vn(vn({},window.lpDebug),{},{finishedAt:Date.now(),error:!0,promise:null,cancel:null})),e.onData(e,n),Promise.reject(new Error(""))})).then((function(t){return function(e,t){var n=t.failed?gn(4,null):{abort:function(){},pause:function(){return Promise.resolve()}},r=n.abort,a=n.pause;switch(t.failed){case 1:return bn(e,r),e.onHistoryLost(e,t).then((function(){return e.onResult({ts:t.ts,updates:[[-1]]})})).then(a).then((function(){return _n(e)}));case 2:return bn(e,r),e.onKeyExpired(e,t).then((function(t){var n=me()(t,4),r=n[0],a=n[1],i=n[2],o=n[3];return e.onResult({ts:+o,updates:[[-2,r,"".concat(a,"/").concat(i)],[-1]]})})).then(a).then((function(){return _n(e)}));case 3:return e.onLpBroken(e,t);default:return Promise.resolve(t)}}(e,t)}))}function yn(e){e.isStoppedFn()||_n(e).then(e.onResult.bind(e)).then((function(){return e.isReconnecting&&En(e,-5)})).catch((function(t){return function(e,t){if(e.isStoppedFn())return;e.onRequestError(t),e.waitTimeout=Math.min(60,2*e.waitTimeout),En(e,-3);var n=gn(e.waitTimeout,null),r=n.abort,a=n.pause;return bn(e,r),a().then((function(){return En(e,-4)}))}(e,t)})).then((function(){return yn(e)}))}function En(e,t){e.isReconnecting=-4===t,e.onResult({ts:e.ts,updates:[[t,e.waitTimeout]]})}function On(e){return e||function(){}}function wn(e){return e?function(){return Promise.resolve(e.apply(void 0,arguments))}:function(){return Promise.reject()}}var Cn=n(101),Sn=function(){throw Error("[longpoll] call initLongPollEventHandler() before")},An=function(e,t,n,r,a,i){!function(e,t){var n=!!e.stopped,r={id:e.id,key:e.key,ts:e.ts,url:e.url,lpstat:e.lpstat||0,version:e.version||14,mode:202,waitTimeout:2,waitAbortFns:[],isReconnecting:!1,isStoppedFn:function(){return n},onResult:function(e){e.ts&&i(r.ts,e.ts,e.updates.map(pn))},onData:On(t.onData),onRequestError:On(t.onRequestError),onHistoryLost:wn(t.onHistoryLost),onKeyExpired:wn(t.onKeyExpired),onLpBroken:wn(t.onHistoryLost),runRequest:t.runRequest},a=t.onEvents;function i(e,t,n){r.ts=t;for(var i=0;i<n.length;++i)"event_refresh_lp_key"===n[i].type&&(r.key=n[i].key||"",r.url=n[i].url||"");a(e,t,n)}var o={options:r,isStopped:function(){return n},stopConnection:function(){n=!0,r.stopFn&&r.stopFn(),r.stopFn=void 0,document.removeEventListener("resume",c),this.abortWaiting()},reinitConnection:function(){this.stopConnection(),document.addEventListener("resume",c),En(r,-4),n=!1,yn(r)},abortWaiting:function(){r.waitAbortFns.forEach((function(e){return e()})),r.waitAbortFns=[],r.waitTimeout=2},onLp:i};function c(){o.abortWaiting()}document.addEventListener("resume",c),yn(r)}({id:e,key:n,ts:r,version:12,url:"https://".concat(t)},{onEvents:function(e,t,n){Array.isArray(n)&&n.length&&n.forEach((function(e){Sn(e);var t=a().callsLib;t&&t.handleEvent&&t.handleEvent(e)}))},onKeyExpired:function(){return i("messages.getLongPollServer",{external_user_id:e}).then((function(e){var t=new URL("https://".concat(e.server)),n=t.origin,r=t.pathname,a=void 0===r?"":r;return[e.key,n,"/"===a[0]?a.substr(1):a,e.ts]}))},runRequest:function(e){var t,n,r=l.b.create({act:"a_check",key:e.key,mode:e.mode,ts:e.ts,version:e.version,wait:25});window.AbortController&&(t=(n=new window.AbortController).signal);var a=fetch("".concat(e.url,"?").concat(r),{signal:t,mode:"cors"});return{promise:a.then((function(e){if(e.ok)return e.text();throw Error("[longpoll] request failed with status ".concat(e.status.toString()))})).then((function(e){return[e,a]})),cancel:function(){var e;return null===(e=n)||void 0===e?void 0:e.abort()}}}})};function kn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C()(e);if(t){var a=C()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return O()(this,n)}}n(1026);var jn=n(1323),Tn=n(255),In=n(490),Pn=function(e){var t=e.onClick,n=Object(Ve.b)(),i=n.accountInfo,o=n.profileSchools,c=n.menuSchoolRequests,s=xe.d.getState(),u=s.params,l=s.page,d=[].concat(Ht()(o),Ht()(c)),f=Object(r.useMemo)((function(){var e;if(!d||!d.length)return[];var t=d.find((function(e){return e.id===(null==u?void 0:u.schoolId)}));return t&&(null!=t&&null!==(e=t.grades)&&void 0!==e&&e.length||l!==xe.j.DASHBOARD)?[t]:d}),[null==u?void 0:u.schoolId,null==d?void 0:d.length]);if(!i)return a.a.createElement(I.U,{right:a.a.createElement(ct,null)});var p=i.firstName,h=i.lastName,m=i.photo,v=i.sex,g=Object(Tn.c)("".concat(p," ").concat(h),Le.L);return a.a.createElement(I.U,{className:"ProfileHeader"},a.a.createElement(I.Cb,{className:"ProfileHeader__content",onClick:t},a.a.createElement("div",{className:"ProfileHeader__contentLeft"},a.a.createElement(I.E,{className:"ProfileHeader__name",weight:"medium"},g),a.a.createElement("div",{className:"ProfileHeader__role"},a.a.createElement(In.a,{schools:f,sex:v}))),a.a.createElement(I.h,{src:m||"",size:36,className:"ProfileHeader__avatar Header__avatar"}),a.a.createElement(jn.a,{className:"ProfileHeader__icon"})))},Dn=n(94),Nn=n(163),xn=n(142),Rn=n(1341),Mn=n(1161),Ln=n(111),Bn=n(127),Fn=n(143),Hn=(n(1031),Object(r.memo)(Object(I.Qb)((function(e){var t=e.school,n=e.changeSchool,i=Object(P.c)().getLangKey,o=Object(I.Ob)().viewWidth,c=Object(yt.a)(o),s=Object(Ln.a)(o),u=Object(Fn.a)().showActionSheet,l=Object(jt.a)().go,d=Object(Ve.b)().profileSchools,f=Object(r.useState)(!1),p=me()(f,2),h=p[0],m=p[1],v=function(){return t&&d.length>1?t.name:i("vkui_edu_main")},g=function(e){n(e),l(xe.j.DASHBOARD,{schoolId:e.id}),Object(Be.c)(Le.u,e.id.toString())},b=function(){m((function(e){return!e}))};return d.length<2?a.a.createElement(Bn.a,{pageTitle:i("vkui_edu_main")},i("vkui_edu_main")):s?a.a.createElement(a.a.Fragment,null,a.a.createElement(Bn.a,{separator:c,pageTitle:i("vkui_edu_main")},a.a.createElement(I.Y,{aside:a.a.createElement(Rn.a,{style:{transform:"rotate(".concat(h?"180deg":"0",")")}}),onClick:b},a.a.createElement("div",{className:"Dashboard__title"},v()))),a.a.createElement(I.Z,{opened:h,onClose:b},a.a.createElement(I.M,null,d.map((function(e){return a.a.createElement(I.pb,{key:e.id,onClick:function(){return g(e)},before:a.a.createElement(ge.a,null),after:t&&t.id===e.id&&a.a.createElement(Mn.a,null)},e.name)}))))):a.a.createElement(Bn.a,{separator:c,pageTitle:i("vkui_edu_main")},a.a.createElement("div",null,a.a.createElement(I.Cb,{onClick:function(e){var n=d.map((function(e){return{text:e.name,className:"Dashboard__actionSheet",checked:t&&t.id===e.id,selectable:!0,before:a.a.createElement(ge.a,null),onChange:function(){return null},onClick:function(){g(e)}}}));u(e.currentTarget,n)},className:"Dashboard__header"},a.a.createElement(I.Fb,{level:"2",weight:"bold",className:"Dashboard__title"},v()),a.a.createElement(jn.a,{className:"Dashboard__icon"}))))}),{viewWidth:!0}))),Vn=n(66),Un=(n(1032),n(636)),zn=n(24),Gn=n(174),Wn=n(397),qn=n(212),Kn=n.n(qn),Yn=n(108),Zn={};var Qn=n(173),Jn=n(48);function Xn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xn(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var er=function(e){var t=e.schoolId,n=Object(jt.a)().go,i=Object(zn.b)().apiRequest,o=Object(P.c)().getLangKey,c=Object(Ve.b)(),s=c.profileSchools,u=c.menuSchoolRequests,l=Object(Ve.a)(),d=function(e){var t=Object(zn.b)().apiRequest,n=Object(Ve.b)().profileChatsStorage,a=Object(Ve.a)(),i=n[e]||{},o=i.items,c=void 0===o?null:o,s=i.count,u=void 0===s?null:s,l=null!==c,d=Object(r.useCallback)((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.showSpinner,i=n.reload,o=void 0===i||i;if(!o&&l)return Promise.resolve(c);if(Zn[e])return Zn[e];var s={school_id:e};return Zn[e]=t("education.getUserChats",s,{grouping:!1,showSpinner:r}).then((function(t){var n=t.items,r=t.count;a(Object(Yn.c)({items:n,count:r,schoolId:e}));var i=Kn()(n.map((function(e){var t=e.id;return{id:t,title:e.title,local_id:t}})),"id");return a(Object(Vn.e)(i)),Zn[e]=null,n})).catch((function(t){throw Zn[e]=null,t})),Zn[e]}),[e,t,a,l,c]);return{loaded:l,profileChats:c,count:u,getProfileChats:d}}(t),f=d.profileChats,p=d.count,h=d.loaded,m=d.getProfileChats,v=null!=f?f:[],g=null!=p?p:0,b=(0,Object(Gn.a)().isClientVersionMatches)(Qn.a.NATIVE_MESSENGER),_=T.a.isWebView()&&b,y=Object(r.useMemo)((function(){if(!t)return!1;var e=u.some((function(e){return e.id===t}));return s.length>0&&!e}),[s,u,t]);Object(r.useEffect)((function(){y&&m({reload:!1,showSpinner:!1})}),[t]);var E=!!v.length&&a.a.createElement(I.D,{mode:"primary",aside:a.a.createElement(I.L,{onClick:function(){_?T.a.send("VKWebAppCustomMessage",{action:"showDialogs"}):n(xe.j.MESSAGES)}},o("vkui_edu_dashboard_chats_show_all")),indicator:g},o("vkui_edu_dashboard_chats_header"));return a.a.createElement(Dn.a,{isLoaded:h||!y,customSpinner:a.a.createElement(Wn.a,null)},!!v.length&&a.a.createElement(I.C,{separator:"auto",header:E},a.a.createElement(Un.a,{items:v,size:"s",onClick:function(e){return e.is_member?_?void T.a.send("VKWebAppCustomMessage",{action:Le.H,payload:{id:e.id}}):n(xe.j.MESSAGES,{act:"show",peer:Object(Jn.b)(e.id)}):(n(xe.i.CONVERSATION),l(Object(Vn.b)()),Promise.all([i("education.getChatPreview",{peer_ids:e.id,link_id:e.invite_link}),0!==e.id?i("education.getSchoolGradeByChatId",{chat_id:e.id}):null]).then((function(t){var n=me()(t,2),r=n[0],a=n[1];l(Object(Vn.h)($n($n({},r),{},{id:e.id,invite_link:e.invite_link,chatInfo:a})))})))}})))},tr=n(82),nr=n(401),rr=n(83),ar=n(256),ir=n(210),or=n(130),cr=function(e){var t=e.schoolId,n=e.grade,i=e.disabled,o=Object(jt.a)().go,c=function(){var e=Object(ir.a)().onCallGroup,t=Object(zn.b)().apiRequest,n=Object(jt.a)().go,a=Object(Ve.b)().classChatInfo,i=Object(Ve.a)(),o=Object(r.useCallback)((function(r,a,o){var c={school_id:a,grade_id:o};return Promise.all([t("education.getClassChat",c,{signal:r}),t("messages.getConversationsWithCalls",{count:200},{signal:r})]).then((function(t){var r=me()(t,2),a=r[0],o=r[1],c=Object(Jn.b)(a.id);i(Object(Vn.i)(a));var s=o.items.find((function(e){var t=e.peer,n=e.call_in_progress;return t.id===c&&void 0!==n})),u={peerId:c,name:a.title,photo:a.photo,tab:a.title};T.a.isWebView()?(e(c,u),xe.d.closeModal()):Et.d.isMobile||Et.d.isIPad?n(xe.i.MOBILE_JOIN_CALL,{peerId:c,chatInfo:u}):n(xe.i.JOIN_CALL,s?{joinLink:s.call_in_progress.join_link}:{peerId:c,chatInfo:u})}))}),[]);return{classChatInfo:a,getClassChat:Object(or.a)({requestFn:o})}}().getClassChat,s=Object(r.useState)(Object(rr.d)(n)),u=me()(s,1)[0],l=Object(r.useState)(Object(rr.b)(n)),d=me()(l,1)[0];return a.a.createElement(I.pb,{className:"ClassListItem__item",key:n.id,before:a.a.createElement(ar.a,{className:"ClassListItem__avatar",size:40,letters:d,color:n.color}),after:a.a.createElement(I.J,{disabled:i,onClick:function(e){e.preventDefault(),e.stopPropagation(),c(t,n.id)},icon:a.a.createElement(nr.a,null)}),onClick:function(){o(xe.j.SCHOOL_GRADE_INFO,{schoolId:t,gradeId:n.id})}},u)},sr=Object(r.memo)(cr),ur=n(492),lr=function(e){var t=e.schoolId,n=Object(P.c)().getLangKey,i=Object(Ve.b)(),o=i.profileSchools,c=i.menuSchoolRequests,s=i.accountInfo,u=i.calls,l=[].concat(Ht()(o),Ht()(c)),d=Object(ur.a)(t,tr.a.TEACHER,"class_teacher"),f=d.userGrades,p=d.getUserGrades,h=d.loaded,m=Object($t.e)(u),v=l.some((function(e){return e.id===t})),g=Boolean(s&&s.id);Object(r.useEffect)((function(){t&&v&&g&&p({showSpinner:!1,reload:!1})}),[t,v,g]);var b=!t&&!v||!f||0===f.length,_=a.a.createElement(a.a.Fragment,null,a.a.createElement(Rt,{activePanel:xe.j.DASHBOARD}));if(!h)return _;var y=!b&&a.a.createElement(I.D,{mode:"primary",aside:f.length>8&&a.a.createElement(I.L,{href:xe.d.buildUrl(xe.j.SCHOOL_CLASSES,{schoolId:t,userId:s.id})},n("vkui_edu_dashboard_chats_show_all")),indicator:f.length},n("vkui_edu_dashboard_my_classes"));return b?null:a.a.createElement(a.a.Fragment,null,a.a.createElement(Dn.a,{isLoaded:h,customSpinner:_},a.a.createElement(I.C,{header:y},f.slice(0,8).map((function(e){return a.a.createElement(sr,{key:e.id,schoolId:t,grade:e,disabled:m})})))))},dr=n(1322),fr=n(270),pr=n(220),hr=n(135),mr=n(129),vr=(n(1037),n(84)),gr=Object(c.createEvent)(),br=gr.prepend((function(){return!0})),_r=n(107),yr=Object(_r.b)(["container","title","description","closeBtn","createBroadcastBtn","showMoreBtn","article","closeArticleBtn"],[],["broadcast","promo"]),Er=(Object(_r.a)(yr),function(e){var t=e.schoolId,n=e.canCreateNewBroadcast,i=Object(vr.a)().getAsyncAccessToken,o=Object(Vt.a)(),c=o.showPopout,s=o.hidePopout,u=Object(I.Pb)(),l=Object(P.c)().getLangKey,d=Object(pr.a)({schoolId:t}).createBroadcastEvent,f=Object(r.useMemo)((function(){return u===I.a?a.a.createElement(_t.a,null):u===I.H&&a.a.createElement(dr.a,null)}),[u]);return a.a.createElement(I.C,{className:"BroadcastPromo"},a.a.createElement("div",{className:"BroadcastPromo__content","data-test-id":yr.container},a.a.createElement("div",{className:"BroadcastPromo__before"}),a.a.createElement("div",{className:"BroadcastPromo__in"},a.a.createElement(I.Fb,{level:"3",weight:"regular",className:"BroadcastPromo__title","data-test-id":yr.title},l("vkui_edu_broadcast_promo_title")),a.a.createElement(I.Db,{className:"BroadcastPromo__description",weight:"regular","data-test-id":yr.description},l(n?"vkui_edu_broadcast_promo_description_with_create":"vkui_edu_broadcast_promo_description")),a.a.createElement("div",{className:"BroadcastPromo__actions"},n&&a.a.createElement(I.j,{className:"BroadcastPromo__actionButton",mode:"primary",onClick:d,"data-test-id":yr.createBroadcastBtn},l("vkui_edu_broadcast_promo_btn_create")),a.a.createElement(I.j,{className:"BroadcastPromo__actionButton BroadcastPromo__actionButton--more",mode:"tertiary",hasHover:!1,onClick:function(){i().then((function(e){c(a.a.createElement(hr.a,{containerDataTestId:yr.article,closeBtnDataTestId:yr.closeArticleBtn,onClose:s},a.a.createElement(mr.a,{src:Object(Jn.d)(fr.a,e)})))}))},"data-test-id":yr.showMoreBtn},l("vkui_edu_broadcast_promo_more_info")))),a.a.createElement("div",{className:"BroadcastPromo__dismissIcon",onClick:function(){return br()},"data-test-id":yr.closeBtn},f)))}),Or=Object(r.memo)(Er),wr=n(273),Cr=n(366),Sr=n(207),Ar=n(648),kr=n.n(Ar),jr=(n(1050),function(e){var t=e.minutesToStart,n=e.dataTestId,i=Object(P.c)().getLangKey;return Object(r.useMemo)((function(){return t<=15&&t>0}),[t])?a.a.createElement(I.k,{className:"BroadcastListItemBadge",level:"1",weight:"medium","data-test-id":n},i("vkui_edu_broadcast_dashboard_item_badge").replace("{count}",t.toString())):null}),Tr=Object(r.memo)(jr),Ir=n(1345),Pr=n(1346),Dr=n(1347),Nr=n(1348),xr=n(1349),Rr=n(211),Mr=n(140),Lr=Object(_r.b)(["container","header","createButton","placeholderContainer","placeholderText","errorReloadButton","copyLink","edit","delete"],["item","contextMenu","title","badge"],["broadcast","widget"]),Br=(Object(_r.a)(Lr),n(1051),function(e){var t=e.data,n=e.canCreateNewBroadcast,i=Object(P.c)().getLangDate,o=Object(jt.a)().go,c=function(e){var t=e.data,n=t.eventId,i=t.creatorId,o=t.liveVideo,c=t.schoolId,s=Object(I.Pb)(),u=Object(P.c)().getLangKey,l=Object(Dt.a)().accountInfo,d=Object(Je.c)(Mr.a),f=Object(Fn.a)().showActionSheet,p=Object(Xe.a)().showSnackbarInfo,h=Object(pr.a)({schoolId:c}),m=h.editBroadcastEvent,v=h.showDeleteBroadcastAlert,g=Object(r.useMemo)((function(){return i===(null==l?void 0:l.id)&&!t.isInProgress}),[i,null==l?void 0:l.id,t.isInProgress]),b=Object(r.useMemo)((function(){return i===(null==l?void 0:l.id)}),[i,null==l?void 0:l.id]),_=Object(r.useMemo)((function(){return Object(Rr.a)(null==o?void 0:o.id)}),[n]),y=Object(r.useCallback)((function(){m(t)}),[t,c]),E=Object(r.useCallback)((function(){v(n)}),[n,d]),O=Object(r.useCallback)((function(){Object(Ir.a)(_),p(u("vkui_edu_link_copied"))}),[_]),w=Object(r.useMemo)((function(){return s===I.H?Pr.a:Dr.a}),[s]);return Object(r.useCallback)((function(e){e.stopPropagation(),e.preventDefault();var t=[{text:u("vkui_edu_broadcast_action_copy_link"),before:a.a.createElement(Nr.a,null),onClick:O,dataTestId:Lr.copyLink}];g&&t.push({text:u("vkui_edu_broadcast_action_edit"),before:a.a.createElement(xr.a,{width:24,height:24}),onClick:y,dataTestId:Lr.edit}),b&&t.push({mode:"destructive",text:u("vkui_edu_broadcast_action_delete"),before:a.a.createElement(w,{width:24,height:24}),onClick:E,dataTestId:Lr.delete}),f(e.currentTarget,t)}),[g,b,t,d])}({data:t}),s=Object(r.useMemo)((function(){var e;return a.a.createElement(Cr.a,{className:"BroadcastListItem__image",src:(null===(e=t.thumb)||void 0===e?void 0:e.url)||kr.a})}),[t]),u=Object(r.useMemo)((function(){return a.a.createElement(a.a.Fragment,null,t.description&&a.a.createElement(I.k,{className:"BroadcastListItem__descripion",weight:"regular",level:"1"},t.description),a.a.createElement(I.k,{className:"BroadcastListItem__descripion",weight:"regular",level:"1"},i(new Date(t.dateTimeStart),"vkui_common_date_year_time")))}),[t]);return a.a.createElement(I.pb,{"data-test-id":Lr.item(t.eventId),className:Object(I.Lb)("BroadcastListItem",{"BroadcastListItem--manage":n}),onClick:function(){o(xe.i.BROADCAST_PREVIEW,{eventId:t.eventId})},before:s,description:u,after:a.a.createElement(Sr.a,{onClick:c,"data-test-id":Lr.contextMenu(t.eventId)})},a.a.createElement(I.Fb,{className:"BroadcastListItem__title",level:"3",weight:"regular"},a.a.createElement("div",{className:"BroadcastListItem__title--text","data-test-id":Lr.title(t.eventId)},t.title),a.a.createElement(Tr,{minutesToStart:t.minutesToStart,dataTestId:Lr.badge(t.eventId)})))}),Fr=Object(r.memo)(Br),Hr=function(e){var t=e.onReload,n=Object(P.c)().getLangKey,i=Object(r.useMemo)((function(){return a.a.createElement(I.L,{onClick:t,"data-test-id":Lr.errorReloadButton},n("vkui_edu_broadcast_error_reload_btn"))}),[t]);return a.a.createElement(a.a.Fragment,null,n("vkui_edu_broadcast_error_text")," · ",i)},Vr=Object(r.memo)(Hr),Ur=function(e){var t=e.isLoaded,n=e.isError,r=e.onReload,i=Object(P.c)().getLangKey;return t?a.a.createElement(I.t,{"data-test-id":Lr.placeholderContainer},a.a.createElement(I.E,{weight:"regular",className:"Broadcast__placeholder","data-test-id":Lr.placeholderText},n?a.a.createElement(Vr,{onReload:r}):i("vkui_edu_broadcast_dashboard_paceholder"))):null},zr=Object(r.memo)(Ur),Gr=n(63),Wr=n(245),qr=function(){return a.a.createElement(Gr.a,{component:a.a.createElement(Wr.a,{descLineCount:2}),itemsCount:2,top:null,itemDistance:"0"})},Kr=Object(r.memo)(qr),Yr=(n(1052),function(e){var t=e.schoolId,n=e.canCreateNewBroadcast,i=e.broadcasts,o=e.isLoaded,c=e.isError,s=Object(P.c)().getLangKey,u=Object(pr.a)({schoolId:t}),l=u.getBroadcastListFx,d=u.createBroadcastEvent,f=Object(r.useMemo)((function(){return o&&a.a.createElement(I.D,{mode:"primary",indicator:i.length?i.length:void 0,"data-test-id":Lr.header},s("vkui_edu_broadcast_dashboard_header"))}),[i,o]);return n||i.length?a.a.createElement(Dn.a,{isLoaded:o,customSpinner:a.a.createElement(Kr,null)},a.a.createElement(I.C,{header:f,"data-test-id":Lr.container},a.a.createElement(I.M,null,!i.length&&a.a.createElement(zr,{isLoaded:o,isError:c,onReload:function(){return l()}}),i.map((function(e){return a.a.createElement(Fr,{key:e.eventId,data:e,canCreateNewBroadcast:n})}))),n&&a.a.createElement(I.t,{className:"Broadcast__action"},a.a.createElement(I.j,{mode:"secondary",size:"m",onClick:function(){return d()},"data-test-id":Lr.createButton},s("vkui_edu_broadcast_dashboard_btn_create"))))):null}),Zr=Object(r.memo)(Yr),Qr=Object(c.restore)(gr,null!==Object(Be.a)(Le.x)),Jr=function(e){var t=e.schoolId,n=e.broadcastId,i=e.hasSchool,o=e.isTeacherInSchool,c=e.isAdminInSchool,s=Object(I.Ob)().viewWidth,u=Object(Je.c)(Mr.a),l=Object(Je.c)(Qr),d=Object(wr.a)().getBroadcastVideo,f=Object(pr.a)({schoolId:t}).getBroadcastListFx,p=Object(r.useMemo)((function(){return[Et.d.OS===Et.c.IOS,Et.d.OS===Et.c.ANDROID,Et.d.isIPad,!Object(yt.a)(s),T.a.isWebView()].some(Boolean)}),[s]);return Object(r.useEffect)((function(){p||f()}),[p,t]),Object(r.useEffect)((function(){n&&!p&&d(n)}),[p,n]),p?null:a.a.createElement(a.a.Fragment,null,!l&&i&&a.a.createElement(Or,{canCreateNewBroadcast:o||c,schoolId:t}),(l||u.items.length>0)&&i&&a.a.createElement(Zr,{schoolId:t,isLoaded:!u.loading,isError:u.isError,canCreateNewBroadcast:o||c,broadcasts:u.items}))},Xr=Object(r.memo)(Jr),$r=(n(1053),function(e){var t=e.buttonText,n=e.onClick,r=e.text,i=e.icon;return a.a.createElement(I.C,{separator:"auto"},a.a.createElement(I.cb,{icon:i},a.a.createElement("div",{className:"Stub__text"},r),a.a.createElement(I.j,{mode:"secondary",size:"l",onClick:n},t)))}),ea=n(1350),ta=n(583),na=function(){var e=Object(P.c)().getLangKey,t=Object(I.Ob)().viewWidth,n=Object(I.Pb)(),i=Object(r.useState)(null!==Object(Be.a)(Le.C)),o=me()(i,2),c=o[0],s=o[1],u=Object(yt.b)(t),l=n===I.db.IOS?{label:"vkui_edu_download_from_market_appstore",link:Ct.b}:{label:"vkui_edu_download_from_market_googleplay",link:Ct.i,subLabel:"vkui_edu_download_from_market_appgallery",subLink:Ct.a};return!u||c||T.a.isWebView()?null:a.a.createElement(I.i,{before:a.a.createElement(I.h,null,a.a.createElement(ta.a,null)),onDismiss:function(){Object(Be.c)(Le.C,"true"),s(!0)},header:e("vkui_edu_calls_banner_mobile_title"),subheader:e("vkui_edu_calls_banner_mobile_text"),asideMode:"dismiss",actions:a.a.createElement(a.a.Fragment,null,a.a.createElement(I.j,{href:l.link,target:"_blank",mode:"primary"},e(l.label)),l.subLabel&&a.a.createElement(I.j,{href:l.subLink,target:"_blank",mode:"tertiary"},e(l.subLabel)))})},ra=function(e){var t=e.showBanner,n=Object(jt.a)().go,r=Object(P.c)().getLangKey;return a.a.createElement(a.a.Fragment,null,t&&a.a.createElement(na,null),a.a.createElement($r,{icon:a.a.createElement(ea.a,null),text:r("vkui_edu_registration_profile_created_subtitle"),buttonText:r("vkui_edu_registration_enterorg_button"),onClick:function(){return n(xe.i.REGISTRATION_ORGANIZATION)}}))},aa=n(1351),ia=function(e){var t=e.showBanner,n=Object(jt.a)().go,r=Object(P.c)().getLangKey;return a.a.createElement(a.a.Fragment,null,t&&a.a.createElement(na,null),a.a.createElement($r,{icon:a.a.createElement(aa.a,null),text:r("vkui_edu_calls_stub_text"),buttonText:r("vkui_edu_calls_stub_button_text"),onClick:function(){return n(xe.i.CALL_INSTRUCTIONS)}}))},oa=n(1352),ca=function(){var e=Object(P.c)().getLangKey,t=Object(vr.a)().getAsyncAccessToken,n=Object(Vt.a)(),r=n.showPopout,i=n.hidePopout;return a.a.createElement($r,{icon:a.a.createElement(oa.a,null),text:e("vkui_edu_schools_pending_stub_text"),buttonText:e("vkui_edu_schools_pending_stub_button"),onClick:function(){return t().then((function(e){r(a.a.createElement(hr.a,{onClose:i},a.a.createElement(mr.a,{src:Object(Jn.d)(fr.b,e)})))}))}})},sa=n(144),ua=(n(1054),n(112)),la=n(105),da=n(257);function fa(e){return 0===e.id&&e.role===la.a.ADMINISTRATOR}function pa(e,t,n){var r=t.filter((function(e){return!n.map((function(e){return e.id})).includes(e.id)}));return 0===e.id&&(e.role===la.a.ADMINISTRATOR&&r.some((function(e){var t;return[tr.a.ADMIN.toString(),tr.a.TEACHER.toString(),tr.a.STUDENT.toString()].includes(null===(t=e.user_role)||void 0===t?void 0:t.toString())}))||[la.a.TEACHER,la.a.STAFF].includes(e.role)&&r.some((function(e){var t;return(null===(t=e.user_role)||void 0===t?void 0:t.toString())===tr.a.ADMIN.toString()})))}function ha(e,t){var n=t.find((function(t){return t.id===e.id}));if(!n)return!1;var r=n.id,a=n.user_role,i=n.admin_level;return r===e.id&&[la.a.ADMINISTRATOR,la.a.TEACHER,la.a.STAFF,la.a.STUDENT].includes(e.role)&&!a&&!i}function ma(e){return!e.id&&[la.a.TEACHER,la.a.STAFF,la.a.STUDENT].includes(e.role)}function va(e){return e.role===la.a.PARENT}var ga=Object(c.combine)(da.a,(function(e){return e.foreignSchools.some((function(t){return function(e,t,n){return fa(e)||va(e)||[ma,pa,ha].some((function(r){return r(e,t,n)}))}(t,e.userSferumSchools,e.foreignSchools)}))})),ba=n(1319),_a=function(e){var t,n,i=e.school,o=e.diaryId,c=Object(I.Ob)().viewWidth,u=Object(r.useRef)(null),l=Object(P.c)().getLangKey,d=Object(r.useState)(!1),f=me()(d,2),p=f[0],h=f[1],m=Object(jt.a)().go,v=Object(Xe.a)().showSnackbar,g=Object(Je.c)(da.a),b=g.sferumSchools,_=g.userSferumSchools,y=g.foreignSchools,E=Object(r.useState)({showCreateButton:!1,showConnectButton:!1,showJoinButton:!1,showBlockedJoinButton:!1,showParentNotification:!1}),O=me()(E,2),w=O[0],C=O[1];Object(r.useEffect)((function(){C({showCreateButton:fa(i),showConnectButton:pa(i,_,y),showJoinButton:ha(i,b),showBlockedJoinButton:ma(i),showParentNotification:va(i)})}),[_,y]);var S=w.showCreateButton,A=w.showConnectButton,k=w.showJoinButton,j=w.showBlockedJoinButton,T=w.showParentNotification,D=Object(r.useCallback)((function(e){switch(e){case 1:return A?"secondary":"primary";case 2:return A||S?"secondary":"primary";case 3:return A||S||k?"secondary":"primary";default:return"primary"}}),[A,S,k]),N=Object(r.useCallback)((function(){return Object(yt.d)(c)?"m":"s"}),[c]);return p?a.a.createElement(I.bb,{height:null===(t=u.current)||void 0===t||null===(n=t.getBoundingClientRect())||void 0===n?void 0:n.height}):a.a.createElement("div",{className:"ConnectedSchoolsList__controls",ref:u},A&&a.a.createElement(I.j,{size:N(),mode:"primary",className:"ConnectedSchoolsList__btn",onClick:function(){!function(e){m(xe.i.CHOOSE_SCHOOLS_TO_CONNECT,{foreign_id:e.foreign_id,service_id:o})}(i)}},l("vkui_edu_ejd_connect_school_modal_select_school_title")),S&&a.a.createElement(I.j,{size:N(),mode:D(1),className:"ConnectedSchoolsList__btn",onClick:function(){!function(e){h(!0),Object(s.b)({foreignSchool:e,service_id:o}).then((function(){v(l("vkui_edu_ejd_snackbar_school_created"),{before:a.a.createElement(I.h,{size:24,style:{background:"var(--accent)"}},a.a.createElement(ba.a,{fill:"var(--white)",width:14,height:14})),duration:5e3})})).finally((function(){return h(!1)}))}(i)}},l("vkui_edu_ejd_connect_schools_create_btn")),k&&a.a.createElement(I.j,{size:N(),mode:D(2),className:"ConnectedSchoolsList__btn",onClick:function(){!function(e){h(!0),Object(s.h)({foreignSchool:e,service_id:o}).finally((function(){return h(!1)}))}(i)}},l("vkui_edu_ejd_connect_schools_select_btn")),j&&a.a.createElement(a.a.Fragment,null,a.a.createElement(I.j,{size:N(),mode:D(3),className:"ConnectedSchoolsList__btn",disabled:!0},l("vkui_edu_ejd_connect_schools_select_btn")),a.a.createElement("div",{className:"ConnectedSchoolsList__notification"},l("vkui_edu_ejd_connect_modal_noschool_desc"))),T&&a.a.createElement("div",{className:"ConnectedSchoolsList__notification"},l("vkui_edu_ejd_parent_role_notification")))},ya=function(e){var t=e.school,n=e.diaryId,i=e.testId,o=e.roleTestId,c=e.cityTestId,s=e.nameTestId,u=Object(P.c)().getLangKey,l=t.id,d=t.name,f=t.role,p=t.city;return a.a.createElement(r.Fragment,{key:l},a.a.createElement(I.pb,{disabled:!0,className:"ConnectedSchoolsList__school",before:a.a.createElement(ge.a,{className:"ConnectedSchoolsList__school-icon"}),"data-testid":i,description:a.a.createElement(a.a.Fragment,null,f&&a.a.createElement("div",{className:"ConnectedSchoolsList__role","data-testid":o},u(Object(ua.c)(f))))},a.a.createElement("span",{"data-testid":s},d),p?a.a.createElement("span",{"data-testid":c},", ".concat(p)):""),a.a.createElement(_a,{school:t,diaryId:n}))},Ea=n(218),Oa=function(e){var t=e.diary,n=t.id,r=t.name,i=t.schools,o=Object(P.c)(),c=o.getLangKey,s=o.replaceVar,u=Object(Ea.a)().isShowOAuthLeadingComponent;return a.a.createElement("div",{className:"ConnectedSchoolsList"},a.a.createElement(I.D,{mode:"primary",className:"ConnectedSchoolsList__title",multiline:!0},s(c("vkui_edu_ejd_connect_schools_select_title"),"value",r)),a.a.createElement(I.C,{mode:"plain",className:"ConnectedSchoolsList__list"},null==i?void 0:i.map((function(e){return a.a.createElement(ya,{key:e.id,school:e,diaryId:n})}))),u()&&a.a.createElement(I.ob,{wide:!0,className:"ConnectedSchoolsList__separator"}))},wa=function(e){var t=e.diaries,n=e.loading,r=Object(jt.a)().go,i=Object(P.c)().getLangKey,o=Object(Ea.a)().isShowOAuthLeadingComponent;return a.a.createElement(I.C,null,n&&a.a.createElement(I.tb,{size:"large",style:{margin:"20px 0"}}),!n&&a.a.createElement(a.a.Fragment,null,t.map((function(e){return a.a.createElement(Oa,{diary:e,key:e.id})})),o()&&a.a.createElement(I.j,{onClick:function(){r(xe.i.CHOOSE_EJD)},className:"ConnectedSchoolsList__import-btn",size:"l",mode:"tertiary",stretched:!0},i("vkui_edu_ejd_connect_schools_select_import_btn"))))},Ca=!1;function Sa(){Ca||(Object(we.a)(new Ee.a({id:"chain_outline_56",viewBox:"0 0 56 56",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 56 56" id="chain_outline_56"><g fill="currentColor"><path d="M46.074 9.926c-3.906-3.905-10.237-3.905-14.143 0l-8.987 8.988c-3.723 3.723-3.896 9.65-.521 13.58a1.5 1.5 0 102.276-1.955 7 7 0 01.366-9.504l8.988-8.987a7 7 0 019.902 9.896l-1.505 1.489a1.5 1.5 0 002.11 2.133l1.508-1.492.006-.006c3.905-3.905 3.905-10.236 0-14.142z" /><path d="M33.648 23.59a1.5 1.5 0 10-2.297 1.93 7 7 0 01-.416 9.445l-8.988 8.987a7 7 0 01-9.905-9.894l1.513-1.48a1.5 1.5 0 00-2.099-2.144l-1.524 1.492-.006.005c-3.905 3.906-3.905 10.237 0 14.142 3.906 3.906 10.237 3.906 14.143 0l8.987-8.987c3.697-3.697 3.894-9.566.592-13.496z" /></g></symbol>'})),Ca=!0)}var Aa=function(e){return Object(we.b)((function(){Sa()}),[]),a.a.createElement(Ce.a,Object(Oe.assign)({},e,{viewBox:"0 0 56 56",id:"chain_outline_56",width:isNaN(e.width)?56:+e.width,height:isNaN(e.height)?56:+e.height}))};Aa.mountIcon=Sa;var ka=Aa,ja=function(){var e=Object(P.c)().getLangKey,t=Object(jt.a)().go;return a.a.createElement(I.C,null,a.a.createElement(I.cb,{icon:a.a.createElement(ka,{width:56,height:56}),header:e("vkui_edu_ejd_user_connect_title"),action:a.a.createElement(I.j,{size:"l",mode:"primary",onClick:function(){t(xe.i.CHOOSE_EJD)}},e("vkui_edu_ejd_user_connect_btn_text"))},e("vkui_edu_ejd_user_connect_desc")))},Ta=n(331),Ia=function(){var e=Object(Je.c)(Ta.a),t=e.list,n=e.loading,i=Object(Je.c)(ga),o=Object(Ve.b)().menuSchools,c=Object(r.useState)(!1),s=me()(c,2),u=s[0],l=s[1],d=Object(Ea.a)().isShowOAuthLeadingComponent;return Object(r.useEffect)((function(){l(function(e,t){return!!e.length&&(e.every((function(e){return!e.is_connected}))||0===t.length)}(t,o))}),[o,t,i]),a.a.createElement(a.a.Fragment,null,i&&a.a.createElement(wa,{diaries:t,loading:n}),d()&&u&&a.a.createElement(ja,null))},Pa=n(67),Da=n(363),Na=n(55),xa=function(){return Promise.all([n.e(0),n.e(13)]).then(n.bind(null,1498)).then((function(e){return e.ScheduleWidget}))},Ra=function(e){var t=Object(r.useState)({render:function(e){return a.a.createElement(Da.a,e)}}),n=me()(t,2),i=n[0],o=n[1],c=Object(Na.a)().showAlertError;return Object(r.useEffect)((function(){xa().then((function(e){o({render:e})}),(function(){c({})}))}),[]),a.a.createElement(i.render,e)};Ra.preload=xa;var Ma=n(274),La=function(e){var t=e.id,n=e.params,i=n.schoolId,o=n.broadcast,c=Object(I.Ob)().viewWidth>=I.Ib.DESKTOP,s=Object(jt.a)().go,u=Object(Ve.b)(),l=u.profileSchools,d=u.menuSchoolRequests,f=u.accountInfo,p=Object(r.useState)(),h=me()(p,2),m=h[0],v=h[1],g=Object(r.useState)(null),b=me()(g,2),_=b[0],y=b[1],E=l.some((function(e){return e.isTeacherInSchool})),O=l.find((function(e){return e.id===i})),w=null==O?void 0:O.isTeacherInSchool,C=1===(null==O?void 0:O.is_admin),S=!!l.length,A=!!d.find((function(e){return e.id===i})),k=!!d.length,j=!!O,P=Boolean(f&&f.id),D=T.a.isWebView();return Object(r.useEffect)((function(){if(v(null),!i||S)if(!i||j)if(i||j){var e=l.find((function(e){return e.id===i}));!_&&y(e)}else if(l.length>0){var t=Fe(l),n=l.find((function(e){return e.id===t}));y(n),s(xe.j.DASHBOARD,{schoolId:t,broadcast:o},{replace:!0})}else y(null);else v(new Error("error"));else s(xe.j.DASHBOARD)}),[i,o,f]),a.a.createElement(I.T,{id:t},a.a.createElement(sa.a,{delay:Le.F,isLoaded:P},(function(e){return a.a.createElement(a.a.Fragment,null,P&&e&&a.a.createElement(Hn,{school:_,changeSchool:y}),a.a.createElement(xn.a,null,a.a.createElement(Dn.a,{isLoaded:P&&e,error:m,customSpinner:a.a.createElement(st.a,{activePanel:t})},a.a.createElement(Nn.a,{schoolId:i}),S&&a.a.createElement(Ra,{role:E?Pa.g.TEACHER:Pa.g.STUDENT,mode:Pa.f.FULL,schoolId:i,schoolRequestPending:A,hasSchool:j}),S&&a.a.createElement(Xr,{schoolId:i,broadcastId:o,hasSchool:j,isTeacherInSchool:w,isAdminInSchool:C}),(D||!c)&&k&&!S&&a.a.createElement(ca,null),a.a.createElement(Ma.a,{name:Ma.b.EJD_1},a.a.createElement(Ia,null)),a.a.createElement(er,{schoolId:i}),!k&&!S&&a.a.createElement(ra,{showBanner:!c||!D}),c&&!S&&a.a.createElement(ia,{showBanner:!0}),!c&&w&&a.a.createElement(lr,{schoolId:i}))))})))},Ba=n(629),Fa=n(131),Ha=n(633),Va=function(e){var t=Object(Dt.a)().accountInfo.id;return a.a.createElement(Fa.a,{ownerId:t,canManage:!0},a.a.createElement(Ha.a,{hideBackButton:!0,hideFiltersButton:!0,panelId:e.id,filterId:"documents"}))},Ua=n(361);function za(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C()(e);if(t){var a=C()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return O()(this,n)}}var Ga=function(e){y()(n,e);var t=za(n);function n(){return h()(this,n),t.apply(this,arguments)}return v()(n,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.viewWidth,r=Object(Ln.a)(n),i=Object(yt.a)(n);return a.a.createElement(I.T,{id:t},a.a.createElement(Bn.a,{left:r&&a.a.createElement(I.V,null),separator:i},"Сервисы"))}}]),n}(r.Component),Wa=Object(I.Qb)(Object(Ua.a)(Ga),{viewWidth:!0}),qa=n(1324),Ka=!1;function Ya(){Ka||(Object(we.a)(new Ee.a({id:"menu_outline_28",viewBox:"0 0 28 28",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="menu_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path d="M22.5 20a1 1 0 010 2h-17a1 1 0 010-2zm0-7a1 1 0 010 2h-17a1 1 0 010-2zm0-7a1 1 0 010 2h-17a1 1 0 110-2z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),Ka=!0)}var Za=function(e){return Object(we.b)((function(){Ya()}),[]),a.a.createElement(Ce.a,Object(Oe.assign)({},e,{viewBox:"0 0 28 28",id:"menu_outline_28",width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};Za.mountIcon=Ya;var Qa=Za,Ja=(n(1059),n(128)),Xa=n(100),$a=n(356),ei=n(203),ti=n(125),ni=(n(1060),!1);function ri(){ni||(Object(we.a)(new Ee.a({id:"logo_vk_28",viewBox:"0 0 28 28",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="logo_vk_28"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.546 4.546C3 6.093 3 8.582 3 13.56v.88c0 4.978 0 7.467 1.546 9.013C6.093 25 8.582 25 13.56 25h.88c4.978 0 7.467 0 9.013-1.547C25 21.907 25 19.418 25 14.44v-.88c0-4.978 0-7.467-1.547-9.014C21.907 3 19.418 3 14.44 3h-.88C8.582 3 6.093 3 4.546 4.546zM6.7 9.7c.12 5.747 2.984 9.2 8.006 9.2h.285v-3.288c1.846.184 3.241 1.538 3.801 3.288H21.4c-.716-2.615-2.598-4.061-3.774-4.614 1.175-.681 2.828-2.339 3.223-4.586H18.48c-.514 1.823-2.038 3.481-3.489 3.638V9.7h-2.369v6.373c-1.469-.369-3.324-2.155-3.406-6.373H6.7z" fill="currentColor" /></symbol>'})),ni=!0)}var ai=function(e){return Object(we.b)((function(){ri()}),[]),a.a.createElement(Ce.a,Object(Oe.assign)({},e,{viewBox:"0 0 28 28",id:"logo_vk_28",width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};ai.mountIcon=ri;var ii=ai,oi=!1;function ci(){oi||(Object(we.a)(new Ee.a({id:"logo_instagram_28",viewBox:"0 0 28 28",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="logo_instagram_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path d="M15.096 3c2.01.004 2.428.02 3.44.066 1.17.054 1.97.24 2.67.512a5.392 5.392 0 011.948 1.268 5.392 5.392 0 011.269 1.949c.271.7.457 1.499.51 2.67.047 1.011.063 1.429.066 3.439v2.192c-.003 2.01-.019 2.428-.065 3.44-.054 1.17-.24 1.97-.511 2.67a5.392 5.392 0 01-1.27 1.948 5.392 5.392 0 01-1.948 1.269c-.7.271-1.499.457-2.67.51-1.011.047-1.429.063-3.439.066h-2.192c-2.01-.003-2.428-.019-3.44-.065-1.17-.054-1.97-.24-2.67-.511a5.392 5.392 0 01-1.948-1.27 5.392 5.392 0 01-1.268-1.948c-.272-.7-.458-1.499-.512-2.67-.046-1.011-.062-1.429-.065-3.439v-2.192c.003-2.01.019-2.428.065-3.44.054-1.17.24-1.97.512-2.67a5.392 5.392 0 011.268-1.948 5.392 5.392 0 011.949-1.268c.7-.272 1.499-.458 2.67-.512 1.011-.046 1.429-.062 3.439-.065zm-.524 1.982h-1.144c-2.417.002-2.793.015-3.873.064-1.072.049-1.655.228-2.042.379-.514.2-.88.438-1.265.823a3.408 3.408 0 00-.823 1.265c-.15.387-.33.97-.379 2.042-.05 1.08-.062 1.456-.064 3.873v1.144c.002 2.417.015 2.793.064 3.873.049 1.072.228 1.655.379 2.042.2.514.438.88.823 1.265.385.385.751.624 1.265.823.387.15.97.33 2.042.379 1 .046 1.396.06 3.368.063h2.154c1.972-.003 2.368-.017 3.368-.063 1.072-.049 1.655-.228 2.042-.379.514-.2.88-.438 1.265-.823.385-.385.624-.751.823-1.265.15-.387.33-.97.379-2.042.046-1 .06-1.396.063-3.368v-2.153c-.003-1.973-.017-2.369-.063-3.369-.049-1.072-.228-1.655-.379-2.042-.2-.514-.438-.88-.823-1.265a3.408 3.408 0 00-1.265-.823c-.387-.15-.97-.33-2.042-.379-1.08-.05-1.456-.062-3.873-.064zm-.575 3.375a5.647 5.647 0 110 11.293 5.647 5.647 0 010-11.293zm0 1.981a3.666 3.666 0 100 7.331 3.666 3.666 0 000-7.331zm5.87-3.524a1.32 1.32 0 110 2.64 1.32 1.32 0 010-2.64z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),oi=!0)}var si=function(e){return Object(we.b)((function(){ci()}),[]),a.a.createElement(Ce.a,Object(Oe.assign)({},e,{viewBox:"0 0 28 28",id:"logo_instagram_28",width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};si.mountIcon=ci;var ui,li=si,di=n(316),fi=n.n(di),pi=!("undefined"==typeof window||!window.document||!window.document.createElement);if(pi){ui=new fi.a({attrs:{id:"__SVG_SPRITE_NODE__"}});var hi=function(){var e=document.getElementById("__SVG_SPRITE_NODE__");e?ui.attach(e):ui.mount()};document.querySelector("body")?hi():document.addEventListener("DOMContentLoaded",hi)}else ui=null;function mi(e){ui&&ui.add(e)}var vi=pi?r.useLayoutEffect:r.useEffect;function gi(){return(gi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function bi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bi(Object(n),!0).forEach((function(t){yi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ei(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Oi={display:"block"},wi=function(e){var t=e.width,n=e.height,r=e.viewBox,i=e.id,o=e.className,c=e.style,s=e.fill,u=e.getRootRef,l=Ei(e,["width","height","viewBox","id","className","style","fill","getRootRef"]),d=Math.max(t,n);return a.a.createElement("div",gi({},l,{ref:u,className:"Icon Icon--".concat(d," Icon--w-").concat(t," Icon--h-").concat(n," Icon--").concat(i," ").concat(o),style:_i(_i({},c),{},{width:t,height:n})}),a.a.createElement("svg",{viewBox:r,width:t,height:n,style:Oi},a.a.createElement("use",{xlinkHref:"#".concat(i),style:{fill:"currentColor",color:s}})))};wi.defaultProps={className:"",style:{}};var Ci=!1;function Si(){Ci||(mi(new Ee.a({id:"logo_ok_28",viewBox:"0 0 28 28",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="logo_ok_28"><path d="M18.199 14.877a1.834 1.834 0 012.52.57c.538.848.28 1.969-.573 2.503a11.716 11.716 0 01-3.622 1.49l3.487 3.462a1.803 1.803 0 010 2.566 1.835 1.835 0 01-2.583 0L14 22.066l-3.426 3.403A1.83 1.83 0 019.28 26a1.83 1.83 0 01-1.291-.532 1.806 1.806 0 01-.001-2.566l3.487-3.463a11.734 11.734 0 01-3.622-1.49 1.807 1.807 0 01-.573-2.502 1.833 1.833 0 012.52-.57 7.969 7.969 0 008.398 0zM14 2c3.44 0 6.238 2.778 6.238 6.195 0 3.415-2.798 6.192-6.238 6.192-3.44 0-6.237-2.777-6.237-6.192C7.763 4.778 10.56 2 14 2zm0 3.63a2.577 2.577 0 00-2.582 2.565c0 1.413 1.16 2.563 2.582 2.563 1.424 0 2.583-1.15 2.583-2.563A2.577 2.577 0 0014 5.63z" fill="currentColor" /></symbol>'})),Ci=!0)}var Ai=function(e){return vi((function(){Si()}),[]),a.a.createElement(wi,Object(Oe.assign)({},e,{viewBox:"0 0 28 28",id:"logo_ok_28",width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};Ai.mountIcon=Si;var ki=!1;function ji(){ki||(mi(new Ee.a({id:"logo_facebook_28",viewBox:"0 0 28 28",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="logo_facebook_28"><path d="M26 14c0-6.627-5.373-12-12-12S2 7.373 2 14c0 5.99 4.388 10.954 10.125 11.854V17.47H9.078V14h3.047v-2.644c0-3.007 1.792-4.669 4.533-4.669 1.313 0 2.686.235 2.686.235v2.953H17.83c-1.491 0-1.956.925-1.956 1.874V14h3.328l-.532 3.469h-2.796v8.385C21.612 24.954 26 19.99 26 14z" fill="currentColor" /></symbol>'})),ki=!0)}var Ti=function(e){return vi((function(){ji()}),[]),a.a.createElement(wi,Object(Oe.assign)({},e,{viewBox:"0 0 28 28",id:"logo_facebook_28",width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};Ti.mountIcon=ji;var Ii=function(){return a.a.createElement("div",{className:"Social"},a.a.createElement("a",{className:"Social__item",target:"_blank",rel:"noreferrer",href:Le.R},a.a.createElement(ii,{width:28,height:28})),a.a.createElement("a",{className:"Social__item",target:"_blank",rel:"noreferrer",href:Le.Q},a.a.createElement(Ai,{width:28,height:28})),a.a.createElement("a",{className:"Social__item",target:"_blank",rel:"noreferrer",href:Le.O},a.a.createElement(Ti,{width:28,height:28})),a.a.createElement("a",{className:"Social__item",target:"_blank",rel:"noreferrer",href:Le.P},a.a.createElement(li,{width:28,height:28})))},Pi=(n(1061),function(e){var t=e.viewWidth,n=Object(P.c)().getLangKey,i=Object(r.useMemo)((function(){return t<=I.Ib.MOBILE}),[t]);return a.a.createElement("div",{className:"PromoFooter"},a.a.createElement("footer",{className:"PromoFooter__container"},a.a.createElement("div",{className:"PromoFooter__section PromoFooter__section--copyright"},a.a.createElement(I.Db,{weight:"regular",className:"PromoFooter__item"},"© ",(new Date).getFullYear()," ",n("vkui_edu_promo_icee")),a.a.createElement(I.L,{className:"PromoFooter__sk",target:"_blank",href:Le.N},a.a.createElement("div",{className:"PromoFooter__sk--icon"}))),a.a.createElement("div",{className:"PromoFooter__section"},a.a.createElement(I.Fb,{level:"3",weight:"medium",className:"PromoFooter__sectionTitle"},n("vkui_edu_landing_footer_terms")),a.a.createElement(I.L,{className:"PromoFooter__item PromoFooter__link",href:xe.d.buildUrl(xe.i.PRIVACY)},n("vkui_edu_confidential_link")),a.a.createElement(I.L,{className:"PromoFooter__item PromoFooter__link",href:xe.d.buildUrl(xe.i.TERMS)},n("vkui_edu_conditions_link")),!i&&a.a.createElement(Ii,null)),a.a.createElement("div",{className:"PromoFooter__section"},a.a.createElement(I.Fb,{level:"3",weight:"medium",className:"PromoFooter__sectionTitle"},n("vkui_edu_landing_footer_support")),a.a.createElement(I.L,{className:"PromoFooter__link",href:"mailto:".concat(Le.S)},Le.S),a.a.createElement(I.Fb,{level:"3",weight:"medium",className:"PromoFooter__sectionTitle"},n("vkui_edu_landing_footer_press")),a.a.createElement(I.L,{className:"PromoFooter__link",href:"mailto:".concat(Le.K)},Le.K),a.a.createElement(I.Fb,{level:"3",weight:"medium",className:"PromoFooter__sectionTitle"},n("vkui_edu_landing_footer_partners")),a.a.createElement(I.L,{className:"PromoFooter__item PromoFooter__link",href:"mailto:".concat(Le.J)},n("vkui_edu_landing_footer_contact_us"))),a.a.createElement("div",{className:"PromoFooter__section"},a.a.createElement(I.Fb,{level:"3",weight:"medium",className:"PromoFooter__sectionTitle"},n("vkui_edu_landing_footer_apps")),a.a.createElement(I.L,{className:"PromoFooter__link",target:"_blank",href:ei.d,onClick:function(){Object(ti.b)(Et.c.ANDROID)}},"Android"),a.a.createElement(I.L,{className:"PromoFooter__link",target:"_blank",href:ei.c,onClick:function(){Object(ti.b)(Et.c.IOS)}},"iOS"),a.a.createElement(I.L,{className:"PromoFooter__link",target:"_blank",href:xe.d.buildUrl(xe.j.DOWNLOAD_APP)},"Windows"),a.a.createElement(I.L,{className:"PromoFooter__link",target:"_blank",href:xe.d.buildUrl(xe.j.DOWNLOAD_APP)},"MacOS"),a.a.createElement(I.L,{className:"PromoFooter__link",target:"_blank",href:xe.d.buildUrl(xe.j.DOWNLOAD_APP)},"Linux")),i&&a.a.createElement("div",{className:"PromoFooter__section"},a.a.createElement(Ii,null))))}),Di=(n(1062),function(){var e=Object(P.c)().getLangKey;return a.a.createElement("section",{className:"PromoToMembers"},a.a.createElement("div",{className:"PromoToMembers__container Promo__container"},a.a.createElement("figure",{className:"PromoToMembers__item"},a.a.createElement("div",{className:"PromoToMembers__item-head"},a.a.createElement("div",{className:"PromoToMembers__image-wrapper PromoToMembers__image-wrapper--to-teacher"},a.a.createElement("div",{className:"PromoToMembers__image PromoToMembers__image--to-teacher"})),a.a.createElement("h3",{className:"PromoToMembers__heading"},e("vkui_edu_landing_toteacher"))),a.a.createElement("figcaption",{className:"PromoToMembers__caption PromoToMembers__caption--to-teacher"},a.a.createElement("ul",null,a.a.createElement("li",null,e("vkui_edu_landing_toteacher_create_videolessons")),a.a.createElement("li",null,e("vkui_edu_landing_toteacher_create_schedule")),a.a.createElement("li",null,e("vkui_edu_landing_toteacher_share_materials")),a.a.createElement("li",null,e("vkui_edu_landing_toteacher_chat")),a.a.createElement("li",null,e("vkui_edu_landing_toteacher_collect_homework")),a.a.createElement("li",null,e("vkui_edu_landing_toteacher_create_meetings"))))),a.a.createElement("figure",{className:"PromoToMembers__item"},a.a.createElement("div",{className:"PromoToMembers__item-head"},a.a.createElement("div",{className:"PromoToMembers__image-wrapper PromoToMembers__image-wrapper--to-student"},a.a.createElement("div",{className:"PromoToMembers__image PromoToMembers__image--to-student"})),a.a.createElement("h3",{className:"PromoToMembers__heading"},e("vkui_edu_landing_tostudent"))),a.a.createElement("figcaption",{className:"PromoToMembers__caption PromoToMembers__caption--to-student"},a.a.createElement("ul",null,a.a.createElement("li",null,e("vkui_edu_landing_tostudent_study_from_home")),a.a.createElement("li",null,e("vkui_edu_landing_tostudent_see_schedule")),a.a.createElement("li",null,e("vkui_edu_landing_tostudent_watch_materials")),a.a.createElement("li",null,e("vkui_edu_landing_tostudent_chat")),a.a.createElement("li",null,e("vkui_edu_landing_tostudent_send_homework")))))))}),Ni=!1;function xi(){Ni||(Object(we.a)(new Ee.a({id:"chevron_down_24",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="chevron_down_24"><path d="M12 13.698L6.64 9.232a1 1 0 00-1.28 1.536l6 5a1 1 0 001.28 0l6-5a1 1 0 10-1.28-1.536z" fill="currentColor" /></symbol>'})),Ni=!0)}var Ri=function(e){return Object(we.b)((function(){xi()}),[]),a.a.createElement(Ce.a,Object(Oe.assign)({},e,{viewBox:"0 0 24 24",id:"chevron_down_24",width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};Ri.mountIcon=xi;var Mi=Ri,Li=(n(1063),n(495)),Bi=Object(r.forwardRef)((function(e,t){var n=Object(r.useState)(null),i=me()(n,2),o=i[0],c=i[1],s=Object(P.c)().getLangKey,u=Object(r.useMemo)((function(){return[{title:s("vkui_edu_landing_faq_sferum_q"),description:s("vkui_edu_landing_faq_sferum_a")},{title:s("vkui_edu_landing_faq_trust_q"),description:s("vkui_edu_landing_faq_trust_a")},{title:s("vkui_edu_landing_faq_pros_q"),description:s("vkui_edu_landing_faq_pros_a")},{title:s("vkui_edu_landing_faq_payments_q"),description:s("vkui_edu_landing_faq_payments_a")},{title:s("vkui_edu_landing_faq_vk_account_q"),description:s("vkui_edu_landing_faq_vk_account_a")},{title:s("vkui_edu_landing_faq_unanswered_request_q"),description:s("vkui_edu_landing_faq_unanswered_request_a").replace("{email}",Le.S)},{title:s("vkui_edu_landing_faq_reg_wo_phone_q"),description:s("vkui_edu_landing_faq_reg_wo_phone_a")},{title:s("vkui_edu_landing_faq_cross_devices_q"),description:s("vkui_edu_landing_faq_cross_devices_a")},{title:s("vkui_edu_landing_faq_max_call_participants_q"),description:s("vkui_edu_landing_faq_max_call_participants_a")},{title:s("vkui_edu_landing_faq_consult_q"),description:s("vkui_edu_landing_faq_consult_a")},{title:s("vkui_edu_landing_faq_max_file_size_q"),description:s("vkui_edu_landing_faq_max_file_size_a")},{title:s("vkui_edu_landing_faq_parents_q"),description:s("vkui_edu_landing_faq_parents_a")}]}),[s]);return a.a.createElement("section",f()({className:"Faq",ref:t},e),a.a.createElement("hr",{className:"Faq__separator"}),a.a.createElement("div",{className:"Faq__container"},a.a.createElement("div",{className:"Faq__heading"},s("vkui_edu_landing_faq_title")),u.map((function(e,t){var n,r=e.title,i=e.description,s=t===o;return a.a.createElement("div",{key:t,className:Object(I.Lb)("Faq__item",{"Faq__item--active":s})},a.a.createElement("div",{className:"Faq__itemContainer",onClick:(n=t,function(){c(n===o?null:n)})},a.a.createElement("div",{className:"Faq__itemContent"},a.a.createElement("div",{className:"Faq__title"},r),a.a.createElement("div",{className:"Faq__description"},Object(Li.a)(i))),a.a.createElement(Mi,{className:"Faq__icon"})))}))))}));Bi.displayName="FAQ";n(1064);var Fi=n(1358),Hi=n(1359),Vi=n(1357),Ui=function(e){return a.a.createElement("svg",f()({width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),a.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M35.9074 13.0685C34.6037 12.3713 33.3105 12 29.7445 12H16.2555C12.6895 12 11.3963 12.3713 10.0926 13.0685C8.78891 13.7658 7.76576 14.7889 7.06853 16.0926C6.3713 17.3963 6 18.6895 6 22.2555V33.7445C6 37.3105 6.3713 38.6037 7.06853 39.9074C7.76576 41.2111 8.78891 42.2342 10.0926 42.9315C11.3963 43.6287 12.6895 44 16.2555 44H29.7445C33.3105 44 34.6037 43.6287 35.9074 42.9315C37.2111 42.2342 38.2342 41.2111 38.9315 39.9074C39.4346 38.9666 39.768 38.0312 39.9147 36.2432L43.3941 38.3242C44.1527 38.7668 45.0153 39 45.8936 39C48.6334 39 50.8544 36.779 50.8544 34.0392V21.9616C50.8544 21.0832 50.6212 20.2207 50.1786 19.462C48.7981 17.0954 45.7606 16.2961 43.3941 17.6766L39.9147 19.7571C39.7681 17.9689 39.4347 17.0335 38.9315 16.0926C38.2342 14.7889 37.2111 13.7658 35.9074 13.0685ZM40 23.2015V32.7986L44.9166 35.7392C45.2138 35.91 45.5507 36 45.8936 36C46.9765 36 47.8544 35.1221 47.8544 34.0392V21.9616C47.8544 21.6144 47.7622 21.2735 47.5873 20.9736C47.0438 20.0418 45.8504 19.7247 44.9166 20.2616L40 23.2015ZM37 22.2555C37 19.4572 36.8142 18.495 36.286 17.5074C35.8684 16.7265 35.2735 16.1316 34.4926 15.714C33.543 15.2061 32.6169 15.0148 30.0593 15.0008L16.2555 15C13.4572 15 12.495 15.1858 11.5074 15.714C10.7265 16.1316 10.1316 16.7265 9.71397 17.5074C9.20612 18.457 9.0148 19.3831 9.00083 21.9407L9 33.7445C9 36.5428 9.1858 37.505 9.71397 38.4926C10.1316 39.2735 10.7265 39.8684 11.5074 40.286C12.495 40.8142 13.4572 41 16.2555 41H29.7445C32.5428 41 33.505 40.8142 34.4926 40.286C35.2735 39.8684 35.8684 39.2735 36.286 38.4926C36.8142 37.505 37 36.5428 37 33.7445V22.2555Z",fill:"currentColor"}))},zi=Object(r.forwardRef)((function(e,t){var n=Object(P.c)().getLangKey;return a.a.createElement("section",{className:"PromoWhats",id:"whats",ref:t},a.a.createElement("h2",{className:"PromoWhats__heading"},n("vkui_edu_landing_menu_whats_inside")),a.a.createElement("div",{className:"PromoWhats__container Promo__container"},a.a.createElement("figure",{className:"PromoWhats__item"},a.a.createElement("div",{className:"PromoWhats__head"},a.a.createElement(Fi.a,{className:"PromoWhats__icon",fill:"#961CC7"}),a.a.createElement("h3",{className:"PromoWhats__item-heading"},n("vkui_edu_landing_whats_community_title"))),a.a.createElement("figcaption",{className:"PromoWhats__caption"},n("vkui_edu_landing_whats_community_text"))),a.a.createElement("figure",{className:"PromoWhats__item"},a.a.createElement("div",{className:"PromoWhats__head"},a.a.createElement(Hi.a,{className:"PromoWhats__icon",fill:"#0000C9"}),a.a.createElement("h3",{className:"PromoWhats__item-heading"},n("vkui_edu_landing_whats_chats_title"))),a.a.createElement("figcaption",{className:"PromoWhats__caption"},n("vkui_edu_landing_whats_chats_text"))),a.a.createElement("figure",{className:"PromoWhats__item"},a.a.createElement("div",{className:"PromoWhats__head"},a.a.createElement(Ui,{className:"PromoWhats__icon--camera",color:"#0000C9"}),a.a.createElement("h3",{className:"PromoWhats__item-heading"},n("vkui_edu_landing_whats_calls_title"))),a.a.createElement("figcaption",{className:"PromoWhats__caption"},n("vkui_edu_landing_whats_calls_text"))),a.a.createElement("figure",{className:"PromoWhats__item"},a.a.createElement("div",{className:"PromoWhats__head"},a.a.createElement(Vi.a,{className:"PromoWhats__icon",fill:"#961CC7"}),a.a.createElement("h3",{className:"PromoWhats__item-heading"},n("vkui_edu_landing_whats_files_title"))),a.a.createElement("figcaption",{className:"PromoWhats__caption"},n("vkui_edu_landing_whats_files_text")))))}));zi.displayName="Whats";n(1065),n(1066);var Gi,Wi,qi,Ki,Yi=function(e){return a.a.createElement("svg",f()({width:"119",height:"31",viewBox:"0 0 119 31",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),a.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.4844 0C15.596 1.47257 15.1321 2.93 14.1881 4.06382C13.272 5.20346 11.885 5.86 10.4248 5.84487C10.3318 4.41654 10.8108 3.00799 11.7548 1.93238C12.7116 0.841633 14.0428 0.151331 15.4844 0ZM20.1052 8.64822C18.4241 9.68309 17.3905 11.5072 17.365 13.4815H17.3661C17.3684 15.7154 18.7042 17.7316 20.7597 18.6023C20.3644 19.8886 19.7692 21.1039 18.9949 22.2028C17.9544 23.7604 16.8639 25.2818 15.134 25.3098C14.3113 25.3286 13.7559 25.0917 13.1772 24.845C12.5733 24.5875 11.944 24.3191 10.9591 24.3191C9.91497 24.3191 9.25766 24.5959 8.62363 24.8629C8.07594 25.0936 7.54561 25.3169 6.79828 25.3482C5.14974 25.4099 3.89067 23.6859 2.81296 22.1434C0.659865 18.9923 -1.01774 13.2638 1.23069 9.36646C2.28631 7.46667 4.26037 6.26068 6.4309 6.19084C7.36494 6.17171 8.26166 6.53226 9.0479 6.84838C9.64933 7.0902 10.1861 7.30603 10.6255 7.30603C11.012 7.30603 11.5339 7.09864 12.1421 6.85696C13.0998 6.4764 14.2715 6.01082 15.4653 6.13613C17.3208 6.19433 19.0402 7.1256 20.1052 8.64822ZM74.4555 22.3238C74.4555 22.8435 74.5442 23.2871 74.7217 23.6547C74.8991 24.0222 75.1463 24.3264 75.4632 24.5673C75.78 24.7954 76.1413 24.9665 76.5469 25.0806C76.9651 25.182 77.4151 25.2327 77.8967 25.2327C78.4164 25.2327 78.86 25.1756 79.2276 25.0616C79.5952 24.9348 79.893 24.7764 80.1212 24.5863C80.3493 24.3961 80.5141 24.1807 80.6155 23.9398C80.7169 23.6864 80.7676 23.4329 80.7676 23.1794C80.7676 22.6597 80.6472 22.2794 80.4063 22.0386C80.1782 21.7851 79.9247 21.6077 79.6459 21.5063C79.1642 21.3288 78.6002 21.1641 77.9538 21.012C77.32 20.8472 76.5342 20.6381 75.5963 20.3846C75.0132 20.2325 74.5252 20.036 74.1323 19.7952C73.7521 19.5417 73.4479 19.2628 73.2197 18.9586C72.9916 18.6544 72.8268 18.3312 72.7254 17.989C72.6367 17.6468 72.5923 17.2982 72.5923 16.9433C72.5923 16.2589 72.7317 15.6695 73.0106 15.1752C73.3021 14.6682 73.6824 14.2499 74.1513 13.9204C74.6203 13.5909 75.1526 13.35 75.7484 13.1979C76.3441 13.0332 76.9461 12.9508 77.5545 12.9508C78.2643 12.9508 78.9297 13.0458 79.5508 13.236C80.1845 13.4134 80.7359 13.6859 81.2049 14.0535C81.6865 14.4211 82.0667 14.8773 82.3456 15.4224C82.6244 15.9547 82.7639 16.5758 82.7639 17.2856H80.3873C80.324 16.411 80.0261 15.7963 79.4938 15.4414C78.9614 15.0738 78.2833 14.89 77.4594 14.89C77.1806 14.89 76.8954 14.9217 76.6039 14.9851C76.3124 15.0358 76.0462 15.1308 75.8054 15.2703C75.5646 15.397 75.3618 15.5745 75.197 15.8026C75.0449 16.0308 74.9688 16.3159 74.9688 16.6582C74.9688 17.1398 75.1146 17.52 75.4061 17.7989C75.7103 18.0651 76.1032 18.2679 76.5849 18.4073C76.6356 18.42 76.832 18.477 77.1743 18.5784C77.5292 18.6671 77.9221 18.7685 78.353 18.8826C78.784 18.9967 79.2022 19.1107 79.6078 19.2248C80.0261 19.3262 80.324 19.4023 80.5014 19.453C80.945 19.5924 81.3316 19.7825 81.6612 20.0233C81.9907 20.2641 82.2632 20.543 82.4787 20.8599C82.7068 21.1641 82.8716 21.4936 82.973 21.8485C83.0871 22.2034 83.1441 22.5583 83.1441 22.9132C83.1441 23.6737 82.9857 24.3264 82.6688 24.8714C82.3646 25.4038 81.959 25.8411 81.452 26.1833C80.945 26.5255 80.3683 26.7727 79.7219 26.9248C79.0755 27.0895 78.4164 27.1719 77.7446 27.1719C76.9715 27.1719 76.2427 27.0769 75.5582 26.8867C74.8738 26.6966 74.2781 26.4051 73.7711 26.0122C73.2641 25.6193 72.8585 25.1186 72.5543 24.5102C72.2501 23.8891 72.0917 23.1603 72.079 22.3238H74.4555ZM34.5494 13.274H37.078L42.3064 26.8487H39.7588L38.485 23.2554H33.0665L31.7926 26.8487H29.3401L34.5494 13.274ZM33.7129 21.4492H37.8575L35.8232 15.6125H35.7662L33.7129 21.4492ZM43.5421 17.0194H45.5954V18.3502H45.6334C45.9376 17.7799 46.3622 17.3743 46.9072 17.1335C47.4522 16.88 48.0416 16.7532 48.6754 16.7532C49.4485 16.7532 50.1203 16.8926 50.6907 17.1715C51.2737 17.4377 51.7553 17.8116 52.1356 18.2932C52.5158 18.7622 52.801 19.3135 52.9911 19.9473C53.1813 20.581 53.2763 21.2591 53.2763 21.9816C53.2763 22.6407 53.1876 23.2808 53.0102 23.9018C52.8454 24.5229 52.5855 25.0742 52.2307 25.5559C51.8884 26.0249 51.4512 26.4051 50.9188 26.6966C50.3865 26.9755 49.7591 27.1149 49.0366 27.1149C48.7197 27.1149 48.4029 27.0832 48.086 27.0198C47.7691 26.9691 47.4649 26.8804 47.1734 26.7537C46.8819 26.6269 46.6094 26.4685 46.3559 26.2784C46.115 26.0756 45.9123 25.8411 45.7475 25.5749H45.7095V30.4801H43.5421V17.0194ZM51.1089 21.9436C51.1089 21.4999 51.0519 21.069 50.9378 20.6507C50.8237 20.2325 50.6526 19.8649 50.4245 19.548C50.1963 19.2185 49.9112 18.9586 49.5689 18.7685C49.2267 18.5657 48.8338 18.4643 48.3902 18.4643C47.4776 18.4643 46.7868 18.7812 46.3178 19.4149C45.8616 20.0487 45.6334 20.8916 45.6334 21.9436C45.6334 22.4379 45.6904 22.9005 45.8045 23.3315C45.9313 23.7497 46.115 24.111 46.3559 24.4152C46.5967 24.7194 46.8819 24.9602 47.2114 25.1376C47.5536 25.3151 47.9466 25.4038 48.3902 25.4038C48.8845 25.4038 49.3028 25.3024 49.645 25.0996C49.9872 24.8968 50.2661 24.637 50.4815 24.3201C50.7097 23.9905 50.8681 23.623 50.9568 23.2174C51.0582 22.7991 51.1089 22.3745 51.1089 21.9436ZM57.4082 17.0194H55.3549V30.4801H57.5223V25.5749H57.5603C57.7251 25.8411 57.9279 26.0756 58.1687 26.2784C58.4222 26.4685 58.6947 26.6269 58.9862 26.7537C59.2778 26.8804 59.582 26.9691 59.8988 27.0198C60.2157 27.0832 60.5326 27.1149 60.8494 27.1149C61.5719 27.1149 62.1993 26.9755 62.7316 26.6966C63.264 26.4051 63.7013 26.0249 64.0435 25.5559C64.3984 25.0742 64.6582 24.5229 64.823 23.9018C65.0004 23.2808 65.0892 22.6407 65.0892 21.9816C65.0892 21.2591 64.9941 20.581 64.804 19.9473C64.6139 19.3135 64.3287 18.7622 63.9484 18.2932C63.5682 17.8116 63.0865 17.4377 62.5035 17.1715C61.9331 16.8926 61.2614 16.7532 60.4882 16.7532C59.8545 16.7532 59.2651 16.88 58.7201 17.1335C58.175 17.3743 57.7504 17.7799 57.4462 18.3502H57.4082V17.0194ZM62.7507 20.6507C62.8647 21.069 62.9218 21.4999 62.9218 21.9436C62.9218 22.3745 62.8711 22.7991 62.7697 23.2174C62.681 23.623 62.5225 23.9905 62.2944 24.3201C62.0789 24.637 61.8 24.8968 61.4578 25.0996C61.1156 25.3024 60.6973 25.4038 60.203 25.4038C59.7594 25.4038 59.3665 25.3151 59.0243 25.1376C58.6947 24.9602 58.4095 24.7194 58.1687 24.4152C57.9279 24.111 57.7441 23.7497 57.6174 23.3315C57.5033 22.9005 57.4462 22.4379 57.4462 21.9436C57.4462 20.8916 57.6744 20.0487 58.1307 19.4149C58.5997 18.7812 59.2904 18.4643 60.203 18.4643C60.6466 18.4643 61.0396 18.5657 61.3818 18.7685C61.724 18.9586 62.0092 19.2185 62.2373 19.548C62.4655 19.8649 62.6366 20.2325 62.7507 20.6507ZM85.7571 17.0194H84.1221V18.6354H85.7571V24.4342C85.7698 24.8398 85.8078 25.201 85.8712 25.5179C85.9472 25.8347 86.0803 26.1009 86.2704 26.3164C86.4732 26.5192 86.7457 26.6776 87.088 26.7917C87.4429 26.8931 87.9055 26.9438 88.4759 26.9438C88.7167 26.9438 88.9512 26.9311 89.1793 26.9058C89.4075 26.8804 89.6419 26.8551 89.8828 26.8297V25.1566C89.7307 25.1947 89.5786 25.22 89.4265 25.2327H88.9702C88.7293 25.2327 88.5392 25.2073 88.3998 25.1566C88.2604 25.0933 88.1526 25.0045 88.0766 24.8905C88.0132 24.7764 87.9689 24.637 87.9435 24.4722C87.9308 24.3074 87.9245 24.111 87.9245 23.8828V18.6354H89.8828V17.0194H87.9245V14.0725H85.7571V17.0194ZM96.1379 27.1149C95.3521 27.1149 94.6486 26.9881 94.0276 26.7346C93.4192 26.4685 92.8995 26.1072 92.4686 25.651C92.0503 25.1947 91.7271 24.6496 91.499 24.0159C91.2835 23.3822 91.1757 22.685 91.1757 21.9246C91.1757 21.1767 91.2835 20.486 91.499 19.8522C91.7271 19.2185 92.0503 18.6735 92.4686 18.2172C92.8995 17.7609 93.4192 17.406 94.0276 17.1525C94.6486 16.8863 95.3521 16.7532 96.1379 16.7532C96.9238 16.7532 97.6209 16.8863 98.2293 17.1525C98.8503 17.406 99.37 17.7609 99.7883 18.2172C100.219 18.6735 100.542 19.2185 100.758 19.8522C100.986 20.486 101.1 21.1767 101.1 21.9246C101.1 22.685 100.986 23.3822 100.758 24.0159C100.542 24.6496 100.219 25.1947 99.7883 25.651C99.37 26.1072 98.8503 26.4685 98.2293 26.7346C97.6209 26.9881 96.9238 27.1149 96.1379 27.1149ZM96.1379 25.4038C96.6196 25.4038 97.0378 25.3024 97.3927 25.0996C97.7476 24.8968 98.0392 24.6306 98.2673 24.3011C98.4955 23.9715 98.6602 23.604 98.7616 23.1984C98.8757 22.7801 98.9327 22.3555 98.9327 21.9246C98.9327 21.5063 98.8757 21.088 98.7616 20.6697C98.6602 20.2515 98.4955 19.8839 98.2673 19.567C98.0392 19.2375 97.7476 18.9713 97.3927 18.7685C97.0378 18.5657 96.6196 18.4643 96.1379 18.4643C95.6563 18.4643 95.238 18.5657 94.8831 18.7685C94.5282 18.9713 94.2367 19.2375 94.0086 19.567C93.7804 19.8839 93.6093 20.2515 93.4952 20.6697C93.3938 21.088 93.3431 21.5063 93.3431 21.9246C93.3431 22.3555 93.3938 22.7801 93.4952 23.1984C93.6093 23.604 93.7804 23.9715 94.0086 24.3011C94.2367 24.6306 94.5282 24.8968 94.8831 25.0996C95.238 25.3024 95.6563 25.4038 96.1379 25.4038ZM105.126 17.0194H103.092V26.8487H105.26V22.1717C105.26 21.6267 105.329 21.145 105.469 20.7268C105.608 20.3085 105.798 19.96 106.039 19.6811C106.28 19.3896 106.559 19.1741 106.876 19.0347C107.205 18.8826 107.554 18.8065 107.921 18.8065C108.073 18.8065 108.225 18.8192 108.378 18.8446C108.542 18.8572 108.701 18.8763 108.853 18.9016V16.8103L108.549 16.7722C108.46 16.7596 108.289 16.7532 108.035 16.7532C107.706 16.7532 107.383 16.8166 107.066 16.9433C106.749 17.0701 106.457 17.2412 106.191 17.4567C105.938 17.6595 105.716 17.8876 105.526 18.1411C105.348 18.3946 105.228 18.6544 105.164 18.9206H105.126V17.0194ZM116.381 21.069C116.356 20.7268 116.28 20.3972 116.153 20.0804C116.039 19.7635 115.874 19.491 115.659 19.2628C115.456 19.022 115.203 18.8319 114.898 18.6925C114.607 18.5404 114.277 18.4643 113.91 18.4643C113.53 18.4643 113.181 18.534 112.864 18.6735C112.56 18.8002 112.294 18.984 112.066 19.2248C111.85 19.453 111.673 19.7255 111.533 20.0423C111.407 20.3592 111.337 20.7014 111.324 21.069H116.381ZM111.324 22.4949C111.324 22.8752 111.375 23.2427 111.476 23.5976C111.59 23.9525 111.755 24.2631 111.971 24.5292C112.186 24.7954 112.459 25.0109 112.788 25.1756C113.118 25.3277 113.511 25.4038 113.967 25.4038C114.601 25.4038 115.108 25.2707 115.488 25.0045C115.881 24.7257 116.172 24.3138 116.362 23.7687H118.416C118.302 24.3011 118.105 24.7764 117.826 25.1947C117.547 25.6129 117.212 25.9678 116.819 26.2593C116.426 26.5382 115.982 26.7473 115.488 26.8867C115.006 27.0388 114.499 27.1149 113.967 27.1149C113.194 27.1149 112.509 26.9881 111.913 26.7346C111.318 26.4812 110.811 26.1263 110.393 25.67C109.987 25.2137 109.676 24.6687 109.461 24.0349C109.258 23.4012 109.157 22.7041 109.157 21.9436C109.157 21.2464 109.264 20.5874 109.48 19.9663C109.708 19.3325 110.025 18.7812 110.431 18.3122C110.849 17.8306 111.349 17.4503 111.933 17.1715C112.516 16.8926 113.175 16.7532 113.91 16.7532C114.683 16.7532 115.374 16.918 115.982 17.2475C116.603 17.5644 117.117 17.989 117.522 18.5214C117.928 19.0537 118.219 19.6684 118.397 20.3655C118.587 21.05 118.637 21.7598 118.549 22.4949H111.324ZM31.8463 8.63961C32.2455 8.75051 32.6818 8.80596 33.155 8.80596C33.7095 8.80596 34.179 8.72463 34.5635 8.56197C34.9553 8.39192 35.2732 8.1812 35.5172 7.92981C35.7686 7.67843 35.9498 7.40856 36.0607 7.12021C36.1716 6.83186 36.227 6.56569 36.227 6.3217C36.227 6.10728 36.1938 5.89656 36.1272 5.68954C36.0607 5.48252 35.9609 5.29398 35.8278 5.12393C35.6947 4.95387 35.5283 4.80969 35.3287 4.6914C35.1291 4.5657 34.8999 4.47698 34.6411 4.42523V4.39195C34.8037 4.3402 34.9627 4.26256 35.118 4.15905C35.2806 4.04815 35.4211 3.91876 35.5394 3.77089C35.6651 3.62301 35.7649 3.45666 35.8389 3.27182C35.9128 3.08697 35.9498 2.88735 35.9498 2.67293C35.9498 2.30325 35.8795 1.98532 35.739 1.71915C35.5986 1.44558 35.4063 1.22008 35.1623 1.04263C34.9184 0.865183 34.63 0.735794 34.2973 0.654464C33.972 0.56574 33.6208 0.521378 33.2437 0.521378C32.8223 0.521378 32.4304 0.573134 32.0681 0.676645C31.7132 0.780156 31.4027 0.935422 31.1365 1.14244C30.8703 1.34207 30.6559 1.60085 30.4933 1.91878C30.338 2.22931 30.253 2.5953 30.2382 3.01673H31.2474C31.3066 2.44003 31.5025 2.02599 31.8352 1.7746C32.1679 1.51582 32.6263 1.38643 33.2104 1.38643C33.4322 1.38643 33.6429 1.40862 33.8426 1.45298C34.0496 1.49734 34.2307 1.57128 34.386 1.67479C34.5487 1.7709 34.6744 1.90029 34.7631 2.06295C34.8592 2.22561 34.9073 2.42894 34.9073 2.67293C34.9073 2.9391 34.8629 3.16461 34.7742 3.34945C34.6928 3.5269 34.5745 3.67107 34.4193 3.78198C34.2714 3.89288 34.0903 3.97421 33.8758 4.02597C33.6688 4.07033 33.4396 4.09251 33.1882 4.09251H32.8333C32.6855 4.09251 32.5672 4.08512 32.4784 4.07033V4.93539C32.5598 4.92799 32.6707 4.9243 32.8112 4.9243C32.9516 4.9169 33.0773 4.91321 33.1882 4.91321C33.4544 4.91321 33.7058 4.93169 33.9424 4.96866C34.1864 5.00563 34.3971 5.07587 34.5745 5.17938C34.7594 5.27549 34.9073 5.41597 35.0182 5.60081C35.1291 5.77826 35.1845 6.01116 35.1845 6.29951C35.1845 6.5509 35.1328 6.7801 35.0293 6.98712C34.9331 7.18675 34.7964 7.3605 34.6189 7.50838C34.4489 7.64886 34.2455 7.75976 34.0089 7.84109C33.7723 7.91503 33.5173 7.952 33.2437 7.952C32.9258 7.952 32.6263 7.91873 32.3454 7.85218C32.0644 7.78564 31.8167 7.67843 31.6023 7.53056C31.3953 7.37529 31.2252 7.17566 31.0921 6.93167C30.9664 6.68029 30.8999 6.37715 30.8925 6.02225H29.8833C29.8833 6.50284 29.9646 6.91688 30.1273 7.26439C30.2899 7.61189 30.5154 7.90024 30.8038 8.12944C31.0995 8.35865 31.447 8.5287 31.8463 8.63961ZM38.4041 8.66179C38.6333 8.72093 38.8772 8.75051 39.136 8.75051C39.5353 8.75051 39.905 8.68397 40.2451 8.55088C40.5926 8.4104 40.8957 8.1849 41.1545 7.87436C41.1545 8.1849 41.2247 8.4104 41.3652 8.55088C41.5131 8.68397 41.709 8.75051 41.953 8.75051C42.2414 8.75051 42.4669 8.70245 42.6295 8.60633V7.87436C42.5038 7.91133 42.4077 7.92981 42.3412 7.92981C42.1933 7.92981 42.1046 7.87806 42.075 7.77455C42.0528 7.67104 42.0417 7.50838 42.0417 7.28657V4.3365C42.0417 4.00379 41.9789 3.73392 41.8532 3.5269C41.7275 3.31987 41.5611 3.16091 41.3541 3.05001C41.1471 2.93171 40.9142 2.85407 40.6554 2.81711C40.404 2.78014 40.149 2.76165 39.8902 2.76165C39.5649 2.76165 39.258 2.79492 38.9697 2.86147C38.6887 2.92801 38.4373 3.03892 38.2155 3.19418C37.9937 3.34206 37.8163 3.53799 37.6832 3.78198C37.5501 4.02597 37.4762 4.32541 37.4614 4.68031H38.4041C38.4262 4.25887 38.5704 3.97421 38.8366 3.82634C39.1028 3.67107 39.4355 3.59344 39.8347 3.59344C39.9826 3.59344 40.1305 3.60453 40.2783 3.62671C40.4336 3.64889 40.5704 3.69325 40.6887 3.7598C40.8144 3.82634 40.9142 3.92246 40.9881 4.04815C41.0695 4.17384 41.1101 4.3402 41.1101 4.54722C41.1101 4.72467 41.0584 4.86145 40.9549 4.95757C40.8514 5.04629 40.7109 5.11653 40.5334 5.16829C40.356 5.21265 40.149 5.24962 39.9124 5.27919C39.6832 5.30137 39.4392 5.33834 39.1804 5.3901C38.9364 5.43446 38.6961 5.48991 38.4595 5.55645C38.2303 5.623 38.0233 5.72281 37.8384 5.8559C37.661 5.98159 37.5168 6.14795 37.4059 6.35497C37.295 6.56199 37.2396 6.82816 37.2396 7.15348C37.2396 7.44183 37.2876 7.68952 37.3837 7.89654C37.4872 8.09617 37.624 8.26253 37.7941 8.39561C37.9715 8.52131 38.1749 8.61003 38.4041 8.66179ZM40.1453 7.80782C39.9234 7.88915 39.6573 7.92981 39.3467 7.92981C39.1989 7.92981 39.0584 7.91503 38.9253 7.88545C38.7922 7.85588 38.6739 7.80782 38.5704 7.74128C38.4743 7.67473 38.393 7.58971 38.3264 7.4862C38.2673 7.37529 38.2377 7.24221 38.2377 7.08694C38.2377 6.85034 38.2895 6.6655 38.393 6.53242C38.5039 6.39194 38.6443 6.28473 38.8144 6.21079C38.9845 6.13685 39.1767 6.0851 39.3911 6.05552C39.6055 6.02595 39.8162 5.99638 40.0233 5.9668C40.2377 5.93723 40.441 5.90395 40.6332 5.86699C40.8255 5.83002 40.9807 5.76348 41.099 5.66736V6.63223C41.099 6.76532 41.0658 6.90949 40.9992 7.06476C40.9327 7.21263 40.8292 7.35311 40.6887 7.4862C40.5482 7.61189 40.3671 7.7191 40.1453 7.80782ZM43.64 2.89474H47.566V3.72652H44.5827V8.62852H43.64V2.89474ZM49.4051 2.89474H48.4624V10.8133H49.4051V7.86327H49.4273C49.5308 8.03333 49.6565 8.1775 49.8044 8.2958C49.9596 8.4067 50.1223 8.49543 50.2923 8.56197C50.4624 8.62852 50.6325 8.67657 50.8025 8.70615C50.9726 8.73572 51.1315 8.75051 51.2794 8.75051C51.7156 8.75051 52.0964 8.67288 52.4217 8.51761C52.7544 8.36234 53.028 8.15162 53.2424 7.88545C53.4642 7.61189 53.6269 7.29766 53.7304 6.94276C53.8413 6.58047 53.8968 6.19231 53.8968 5.77826C53.8968 5.37161 53.8413 4.98714 53.7304 4.62485C53.6195 4.26256 53.4531 3.94464 53.2313 3.67107C53.0169 3.39011 52.7433 3.1683 52.4106 3.00564C52.0853 2.84298 51.7008 2.76165 51.2572 2.76165C50.858 2.76165 50.492 2.83559 50.1593 2.98346C49.8265 3.12394 49.5826 3.35315 49.4273 3.67107H49.4051V2.89474ZM51.9892 7.74128C51.7674 7.86697 51.4975 7.92981 51.1796 7.92981C50.8543 7.92981 50.577 7.87067 50.3478 7.75237C50.1186 7.62668 49.9301 7.46402 49.7822 7.26439C49.6417 7.06476 49.5382 6.83555 49.4717 6.57678C49.4051 6.31061 49.3718 6.03704 49.3718 5.75608C49.3718 5.48991 49.4014 5.22744 49.4606 4.96866C49.5271 4.70988 49.6306 4.48068 49.7711 4.28105C49.9116 4.07403 50.0927 3.90767 50.3145 3.78198C50.5363 3.65629 50.8062 3.59344 51.1241 3.59344C51.4273 3.59344 51.6897 3.65259 51.9116 3.77089C52.1408 3.88919 52.3256 4.04815 52.4661 4.24778C52.614 4.44741 52.7212 4.67661 52.7877 4.93539C52.8616 5.18677 52.8986 5.44555 52.8986 5.71172C52.8986 5.99268 52.869 6.26624 52.8099 6.53242C52.7507 6.79859 52.6546 7.03518 52.5215 7.24221C52.3884 7.44923 52.211 7.61558 51.9892 7.74128ZM55.702 10.9132C55.5911 10.9132 55.4802 10.9058 55.3693 10.891C55.2584 10.8762 55.1512 10.8503 55.0476 10.8133V9.94828L55.3138 10.037C55.4099 10.0666 55.5061 10.0814 55.6022 10.0814C55.7944 10.0814 55.9497 10.037 56.068 9.94828C56.1863 9.85956 56.2898 9.73017 56.3785 9.56011L56.7667 8.59524L54.4931 2.89474H55.5578L57.2325 7.58601H57.2547L58.8628 2.89474H59.8609L57.3656 9.38267C57.2547 9.66363 57.1437 9.90022 57.0328 10.0925C56.9293 10.2847 56.811 10.44 56.6779 10.5583C56.5523 10.684 56.4081 10.7727 56.2454 10.8244C56.0902 10.8836 55.909 10.9132 55.702 10.9132ZM61.092 8.24035C61.5208 8.58046 62.116 8.75051 62.8775 8.75051C63.1807 8.75051 63.4727 8.71354 63.7537 8.63961C64.042 8.56567 64.2971 8.45476 64.5189 8.30689C64.7407 8.15902 64.9182 7.97048 65.0513 7.74128C65.1843 7.51207 65.2509 7.24221 65.2509 6.93167C65.2509 6.70986 65.2176 6.51763 65.1511 6.35497C65.0845 6.18491 64.9995 6.04443 64.896 5.93353C64.7925 5.81523 64.6742 5.72281 64.5411 5.65627C64.408 5.58973 64.2749 5.54536 64.1418 5.52318V5.501C64.3784 5.44925 64.5891 5.31986 64.774 5.11283C64.9662 4.90581 65.0623 4.63594 65.0623 4.30323C65.0623 4.03706 65.0032 3.80786 64.8849 3.61562C64.774 3.42339 64.6187 3.26442 64.4191 3.13873C64.2269 3.00564 64.0014 2.90953 63.7426 2.85038C63.4838 2.79123 63.2065 2.76165 62.9108 2.76165C62.6224 2.76165 62.3378 2.79123 62.0568 2.85038C61.7759 2.90953 61.5245 3.00934 61.3027 3.14982C61.0809 3.28291 60.896 3.46775 60.7481 3.70434C60.6003 3.93355 60.5153 4.2256 60.4931 4.58049H61.4468C61.469 4.38826 61.5245 4.2256 61.6132 4.09251C61.7019 3.95943 61.8128 3.85222 61.9459 3.77089C62.079 3.68956 62.2269 3.63041 62.3895 3.59344C62.5596 3.55647 62.7296 3.53799 62.8997 3.53799C63.299 3.53799 63.5984 3.61932 63.798 3.78198C64.0051 3.94464 64.1086 4.13318 64.1086 4.34759C64.1086 4.6877 63.9903 4.92799 63.7537 5.06847C63.5171 5.20156 63.2324 5.2681 62.8997 5.2681H62.2897V6.03334H63.055C63.4986 6.03334 63.8128 6.11467 63.9977 6.27733C64.1825 6.43999 64.2749 6.6655 64.2749 6.95385C64.2749 7.2496 64.1529 7.49359 63.9089 7.68582C63.6649 7.87806 63.3174 7.97418 62.8664 7.97418C62.445 7.97418 62.0938 7.88176 61.8128 7.69692C61.5319 7.51207 61.3766 7.20893 61.347 6.7875H60.3933C60.4302 7.41596 60.6631 7.90024 61.092 8.24035ZM66.4915 2.89474H67.4341V7.57492L70.1402 2.89474H71.3491V8.62852H70.4064V3.94833L67.7003 8.62852H66.4915V2.89474ZM72.2186 3.72652H74.2704V8.62852H75.2131V3.72652H77.2648V2.89474H72.2186V3.72652ZM80.5686 8.75051C80.1102 8.75051 79.7072 8.67657 79.3597 8.5287C79.0196 8.38083 78.7349 8.17381 78.5057 7.90763C78.2765 7.64146 78.1028 7.32354 77.9845 6.95385C77.8736 6.58417 77.8181 6.18122 77.8181 5.74499C77.8181 5.31616 77.8847 4.9206 78.0178 4.55831C78.1508 4.18863 78.3357 3.8707 78.5723 3.60453C78.8163 3.33836 79.1009 3.13134 79.4262 2.98346C79.759 2.83559 80.1212 2.76165 80.5131 2.76165C81.0233 2.76165 81.4447 2.86886 81.7774 3.08328C82.1175 3.2903 82.3874 3.55647 82.587 3.88179C82.7941 4.20711 82.9345 4.56201 83.0085 4.94648C83.0898 5.33095 83.1231 5.69693 83.1083 6.04443H78.8163C78.8089 6.29582 78.8384 6.53611 78.905 6.76532C78.9715 6.98712 79.0787 7.18675 79.2266 7.3642C79.3745 7.53426 79.563 7.67104 79.7922 7.77455C80.0214 7.87806 80.2913 7.92981 80.6018 7.92981C81.0011 7.92981 81.3264 7.83739 81.5778 7.65255C81.8366 7.46771 82.0066 7.18675 82.088 6.80968H83.0196C82.8939 7.46032 82.6166 7.9483 82.1878 8.27362C81.7589 8.59155 81.2192 8.75051 80.5686 8.75051ZM82.1101 5.21265C82.0954 4.99084 82.0436 4.78012 81.9549 4.58049C81.8735 4.38086 81.7589 4.21081 81.6111 4.07033C81.4706 3.92246 81.3005 3.80785 81.1009 3.72652C80.9087 3.6378 80.6943 3.59344 80.4577 3.59344C80.2137 3.59344 79.9919 3.6378 79.7922 3.72652C79.6 3.80785 79.4336 3.92246 79.2932 4.07033C79.1527 4.2182 79.0418 4.39195 78.9604 4.59158C78.8791 4.78382 78.8311 4.99084 78.8163 5.21265H82.1101ZM90.0446 2.89474H87.394V8.62852H90.5104C90.7618 8.62852 90.9947 8.58785 91.2091 8.50652C91.4235 8.4178 91.6084 8.2995 91.7636 8.15162C91.9189 8.00375 92.0372 7.8263 92.1185 7.61928C92.2072 7.41226 92.2516 7.18675 92.2516 6.94276C92.2516 6.55829 92.1518 6.24406 91.9522 6.00007C91.7599 5.75608 91.4974 5.60082 91.1647 5.53427V5.52318C91.4309 5.39749 91.6379 5.23853 91.7858 5.04629C91.9337 4.85406 92.0076 4.60267 92.0076 4.29214C92.0076 4.00379 91.9522 3.76719 91.8413 3.58235C91.7303 3.39751 91.5825 3.25703 91.3976 3.16091C91.2128 3.0574 91.0021 2.98716 90.7655 2.95019C90.5363 2.91322 90.296 2.89474 90.0446 2.89474ZM91.0316 7.56383C90.8764 7.74128 90.6435 7.83 90.3329 7.83H88.3256V6.02225H90.1666C90.5658 6.02225 90.8505 6.09989 91.0206 6.25515C91.1906 6.41042 91.2756 6.61744 91.2756 6.87622C91.2756 7.14979 91.1943 7.37899 91.0316 7.56383ZM90.7877 5.02411C90.6324 5.17198 90.3514 5.24592 89.9448 5.24592H88.3256V3.69325H89.9448C90.3588 3.69325 90.6435 3.7598 90.7988 3.89288C90.954 4.01857 91.0316 4.19972 91.0316 4.43632C91.0316 4.68031 90.9503 4.87624 90.7877 5.02411Z",fill:"black"}))},Zi=function(e){return a.a.createElement("svg",f()({width:"119",height:"30",viewBox:"0 0 119 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),a.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M40.5273 7.30841C41.4732 7.30841 42.2089 6.99311 42.8395 6.36251C43.4701 5.73191 43.7854 4.99621 43.7854 4.05031C43.7854 3.10441 43.4701 2.36871 42.8395 1.73811C42.2089 1.10751 41.4732 0.792206 40.5273 0.792206C39.5814 0.792206 38.8457 1.10751 38.2151 1.73811C37.5845 2.36871 37.2692 3.10441 37.2692 4.05031C37.2692 4.99621 37.5845 5.73191 38.2151 6.36251C38.8457 6.99311 39.5814 7.30841 40.5273 7.30841ZM30.9623 8.56952H30.2266V6.46752H30.8572C31.3827 6.04712 31.698 5.20632 31.698 4.05022V0.897213H35.9021V6.46752H36.6378V8.56952H35.9021V7.20322H31.0674V8.56952H30.9623ZM32.4334 4.05023C32.4334 4.99614 32.2232 5.83694 31.8028 6.46754H34.9558V1.73803H32.3283V4.05023H32.4334ZM38.845 5.83687C39.2654 6.25727 39.896 6.57257 40.5266 6.57257C41.1572 6.57257 41.7878 6.36237 42.2082 5.83687C42.6286 5.41647 42.9439 4.78587 42.9439 4.05017C42.9439 3.31447 42.7337 2.68387 42.2082 2.26346C41.7878 1.84306 41.1572 1.52776 40.5266 1.52776C39.896 1.52776 39.2654 1.73796 38.845 2.26346C38.4246 2.68387 38.1093 3.31447 38.1093 4.05017C38.1093 4.78587 38.3195 5.41647 38.845 5.83687ZM45.5717 6.36251C46.2023 6.99311 46.938 7.30841 47.8839 7.30841C48.4094 7.30841 48.8298 7.20331 49.2502 6.99311C49.6706 6.78292 49.9859 6.46762 50.3012 6.15232L50.3012 6.15231L49.7757 5.62681C49.2502 6.25741 48.6196 6.57271 47.8839 6.57271C47.1482 6.57271 46.5176 6.25741 46.0972 5.83701C45.5717 5.41661 45.3615 4.78601 45.3615 4.05031C45.3615 3.31461 45.5717 2.68401 46.0972 2.26361C46.6227 1.73811 47.1482 1.52791 47.8839 1.52791C48.6196 1.52791 49.2502 1.84321 49.6706 2.36871L50.1961 1.84321C49.5655 1.10751 48.8298 0.792206 47.8839 0.792206C46.938 0.792206 46.2023 1.10751 45.5717 1.73811C44.9411 2.36871 44.6258 3.10441 44.6258 4.05031C44.6258 4.99621 44.9411 5.73191 45.5717 6.36251ZM53.5587 7.20322H52.823V1.63291H51.0363V0.897213H55.3454V1.63291H53.5587V7.20322ZM60.8691 1.00231L60.9165 0.897213V1.00231H60.8691ZM60.8691 1.00231L58.4992 6.25732C58.1839 6.99302 57.6584 7.41342 57.0278 7.41342C56.8176 7.41342 56.6074 7.41342 56.3972 7.30832L56.6074 6.57262C56.7125 6.67772 56.9227 6.67772 57.0278 6.67772C57.238 6.67772 57.3431 6.67772 57.4482 6.57262C57.5533 6.46752 57.6584 6.36242 57.7635 6.15222L57.9737 5.62672L55.8717 1.00231H56.8176L58.3941 4.57572L59.8655 1.00231H60.8691ZM61.8622 0.897213H66.3815V7.20322H65.5407V1.63291H62.5979V7.20322H61.8622V0.897213ZM68.6935 0.897213H67.8527V7.20322H68.6935V4.36552H71.8465V7.20322H72.6873V0.897213H71.8465V3.62982H68.6935V0.897213ZM79.3085 6.36251C78.6779 6.99311 77.9422 7.30841 76.9963 7.30841C76.0504 7.30841 75.3147 6.99311 74.6841 6.36251C74.0535 5.73191 73.7382 4.99621 73.7382 4.05031C73.7382 3.10441 74.0535 2.36871 74.6841 1.73811C75.3147 1.10751 76.0504 0.792206 76.9963 0.792206C77.9422 0.792206 78.6779 1.10751 79.3085 1.73811C79.9391 2.36871 80.2544 3.10441 80.2544 4.05031C80.1493 4.99621 79.834 5.73191 79.3085 6.36251ZM76.8915 6.57257C76.2609 6.57257 75.6303 6.25727 75.2099 5.83687C74.7895 5.41647 74.4742 4.78587 74.4742 4.05017C74.4742 3.31447 74.7895 2.68387 75.2099 2.26346C75.6303 1.73796 76.2609 1.52776 76.8915 1.52776C77.5221 1.52776 78.1527 1.84306 78.5731 2.26346C79.0986 2.68387 79.3088 3.31447 79.3088 4.05017C79.3088 4.78587 78.9935 5.41647 78.5731 5.83687C78.1527 6.36237 77.5221 6.57257 76.8915 6.57257ZM83.513 0.897213H85.8252C86.3507 0.897213 86.7711 1.10741 87.0864 1.42271C87.4017 1.73801 87.6119 2.15841 87.6119 2.68392C87.6119 2.93341 87.5461 3.1171 87.4665 3.33913C87.4455 3.39769 87.4236 3.45891 87.4017 3.52472C87.2966 3.73492 87.0864 3.94512 86.7711 4.05022C87.0864 4.15531 87.2966 4.3655 87.5068 4.57569L87.5068 4.57572C87.717 4.78592 87.8221 5.10122 87.8221 5.52162C87.8221 6.04712 87.6119 6.46752 87.2966 6.78282C86.8762 7.09812 86.4558 7.30832 85.9303 7.30832H83.513V7.20322V0.897213ZM85.8244 3.62983H84.353V1.73803H85.8244C86.1397 1.73803 86.3499 1.84313 86.5601 2.05333C86.7703 2.26353 86.8754 2.47373 86.8754 2.68393C86.8754 2.89413 86.7703 3.10433 86.5601 3.31453C86.3499 3.52473 86.1397 3.62983 85.8244 3.62983ZM84.4581 6.4675H86.0346C86.3499 6.4675 86.5601 6.3624 86.7703 6.1522C86.9805 5.942 87.0856 5.7318 87.0856 5.4165C87.0856 5.2063 86.9805 4.891 86.7703 4.68079C86.5601 4.47059 86.3499 4.36549 86.0346 4.36549H84.4581V6.4675ZM36.8487 19.7101V17.8183H43.3649C43.47 18.1336 43.47 18.554 43.47 18.9744C43.47 20.3407 43.0496 22.1274 41.7884 23.3886C40.5272 24.7549 39.0558 25.3855 36.9538 25.3855C33.1702 25.3855 29.9121 22.2325 29.9121 18.4489C29.9121 14.6653 33.1702 11.5123 36.9538 11.5123C39.0558 11.5123 40.5272 12.3531 41.6833 13.4041L40.317 14.7704C39.4762 14.0347 38.3201 13.4041 36.8487 13.4041C34.1161 13.4041 31.909 15.6112 31.909 18.4489C31.909 21.2866 34.011 23.4937 36.8487 23.4937C38.6354 23.4937 39.6864 22.758 40.317 22.1274C40.8425 21.6019 41.2629 20.7611 41.368 19.7101H36.8487ZM43.9952 20.9714C43.9952 18.3439 45.9921 16.4521 48.5145 16.4521C51.0369 16.4521 53.0338 18.2388 53.0338 20.9714C53.0338 23.5989 51.0369 25.4907 48.5145 25.4907C45.9921 25.4907 43.9952 23.4938 43.9952 20.9714ZM58.2883 16.4521C55.7659 16.4521 53.769 18.3439 53.769 20.9714C53.769 23.4938 55.7659 25.4907 58.2883 25.4907C60.8107 25.4907 62.8076 23.5989 62.8076 20.9714C62.8076 18.2388 60.8107 16.4521 58.2883 16.4521ZM58.2895 23.5988C56.9232 23.5988 55.7671 22.4427 55.7671 20.8662C55.7671 19.2897 56.9232 18.1336 58.2895 18.1336C59.6558 18.1336 60.8119 19.1846 60.8119 20.8662C60.8119 22.4427 59.6558 23.5988 58.2895 23.5988ZM48.5137 23.5988C47.1474 23.5988 45.9913 22.4427 45.9913 20.8662C45.9913 19.2897 47.1474 18.1336 48.5137 18.1336C49.88 18.1336 51.0361 19.1846 51.0361 20.8662C51.0361 22.4427 49.88 23.5988 48.5137 23.5988ZM84.5634 19.2898C84.143 18.2388 83.092 16.4521 80.7798 16.4521C78.4676 16.4521 76.5758 18.2388 76.5758 20.9714C76.5758 23.4938 78.4676 25.4907 80.99 25.4907C82.9869 25.4907 84.2481 24.2295 84.6685 23.4938L83.1971 22.4428C82.6716 23.1785 82.041 23.704 80.99 23.704C79.939 23.704 79.3084 23.2836 78.7829 22.3377L84.7736 19.8153L84.5634 19.2898ZM80.7792 18.1336C79.8333 18.1336 78.467 19.0795 78.467 20.7611L82.4608 19.0795C82.2506 18.554 81.5149 18.1336 80.7792 18.1336ZM73.5276 25.0704H75.5245V11.9329H73.5276V25.0704ZM67.9579 16.347C69.0089 16.347 69.8497 16.8725 70.3752 17.398V16.6623H72.267V24.6499C72.267 27.908 70.3752 29.2743 68.063 29.2743C65.8559 29.2743 64.5947 27.8029 64.0692 26.6468L65.7508 25.9111C65.961 26.6468 66.8018 27.4876 67.9579 27.4876C69.4293 27.4876 70.3752 26.5417 70.3752 24.8601V24.2295H70.2701C69.8497 24.755 69.0089 25.2805 67.9579 25.2805C65.6457 25.2805 63.6488 23.3887 63.6488 20.8663C63.6488 18.3439 65.7508 16.347 67.9579 16.347ZM68.0623 23.5988C66.696 23.5988 65.5399 22.4427 65.5399 20.8662C65.5399 19.2897 66.696 18.1336 68.0623 18.1336C69.4286 18.1336 70.4796 19.2897 70.4796 20.8662C70.4796 22.4427 69.4286 23.5988 68.0623 23.5988ZM88.9768 11.9329H93.7063C95.9134 11.9329 98.0154 13.5094 98.0154 16.0318C98.0154 18.5542 95.9134 20.1307 93.7063 20.1307H90.9737V25.0704H88.9768V11.9329ZM93.8127 18.2387H90.975V13.7194H93.8127C95.2841 13.7194 96.1249 14.9806 96.1249 15.9265C96.0198 17.0826 95.179 18.2387 93.8127 18.2387ZM102.431 18.3439C102.956 16.9776 104.428 16.347 105.899 16.347C108.106 16.347 109.893 17.7133 110.103 20.0255V25.0703H108.212V24.0193H108.106C107.581 24.6499 106.95 25.2805 105.584 25.2805C103.902 25.2805 102.326 24.1244 102.326 22.3377C102.326 20.4459 104.218 19.3949 106.11 19.3949C106.95 19.3949 107.791 19.7102 108.106 19.9204V19.8153C108.001 18.7643 107.055 18.1337 106.004 18.1337C105.269 18.1337 104.638 18.3439 104.218 19.0796L102.431 18.3439ZM105.69 23.5989C105.059 23.5989 104.113 23.2836 104.113 22.4428C104.113 21.3918 105.269 21.0765 106.215 21.0765C106.971 21.0765 107.387 21.2464 107.845 21.4334L107.846 21.4336C107.897 21.4546 107.949 21.4757 108.002 21.4969C107.792 22.7581 106.741 23.5989 105.69 23.5989ZM114.517 22.3377L116.724 16.6623H118.826L113.466 29.0641H111.469L113.466 24.6499L109.998 16.6623H112.1L114.412 22.3377H114.517ZM99.0676 25.0704H101.065V11.9329H99.0676V25.0704Z",fill:"black"}),a.a.createElement("path",{d:"M42.8395 6.36251L42.9102 6.43322L42.8395 6.36251ZM42.8395 1.73811L42.9102 1.6674V1.6674L42.8395 1.73811ZM38.2151 1.73811L38.1444 1.6674V1.6674L38.2151 1.73811ZM38.2151 6.36251L38.1444 6.43322L38.2151 6.36251ZM30.2266 8.56952H30.1266V8.66952H30.2266V8.56952ZM30.2266 6.46752V6.36752H30.1266V6.46752H30.2266ZM30.8572 6.46752V6.56752H30.8923L30.9197 6.54561L30.8572 6.46752ZM31.698 0.897213V0.797213H31.598V0.897213H31.698ZM35.9021 0.897213H36.0021V0.797213H35.9021V0.897213ZM35.9021 6.46752H35.8021V6.56752H35.9021V6.46752ZM36.6378 6.46752H36.7378V6.36752H36.6378V6.46752ZM36.6378 8.56952V8.66952H36.7378V8.56952H36.6378ZM35.9021 8.56952H35.8021V8.66952H35.9021V8.56952ZM35.9021 7.20322H36.0021V7.10322H35.9021V7.20322ZM31.0674 7.20322V7.10322H30.9674V7.20322H31.0674ZM31.0674 8.56952V8.66952H31.1674V8.56952H31.0674ZM31.8028 6.46754L31.7196 6.41207L31.6159 6.56754H31.8028V6.46754ZM32.4334 4.05023H32.5334V3.95023H32.4334V4.05023ZM34.9558 6.46754V6.56754H35.0558V6.46754H34.9558ZM34.9558 1.73803H35.0558V1.63803H34.9558V1.73803ZM32.3283 1.73803V1.63803H32.2283V1.73803H32.3283ZM32.3283 4.05023H32.2283V4.15023H32.3283V4.05023ZM38.845 5.83687L38.9161 5.76572L38.9075 5.75878L38.845 5.83687ZM42.2082 5.83687L42.137 5.76572L42.1301 5.7744L42.2082 5.83687ZM42.2082 2.26346L42.137 2.33461L42.1457 2.34155L42.2082 2.26346ZM38.845 2.26346L38.9161 2.33461L38.9231 2.32593L38.845 2.26346ZM45.5717 6.36251L45.6424 6.2918H45.6424L45.5717 6.36251ZM49.2502 6.99311L49.2055 6.90367L49.2502 6.99311ZM50.3012 6.15232L50.372 6.22316L50.376 6.21876L50.3012 6.15232ZM50.3012 6.15231L50.376 6.21875L50.4386 6.14827L50.3719 6.0816L50.3012 6.15231ZM49.7757 5.62681L49.8464 5.5561L49.769 5.47867L49.6989 5.56279L49.7757 5.62681ZM46.0972 5.83701L46.1684 5.76587L46.1597 5.75892L46.0972 5.83701ZM46.0972 2.26361L46.1601 2.34217L46.1679 2.33432L46.0972 2.26361ZM49.6706 2.36871L49.5925 2.43118L49.6623 2.51842L49.7413 2.43942L49.6706 2.36871ZM50.1961 1.84321L50.2668 1.91392L50.3323 1.84844L50.272 1.77813L50.1961 1.84321ZM45.5717 1.73811L45.501 1.6674L45.5717 1.73811ZM52.823 7.20322H52.723V7.30322H52.823V7.20322ZM53.5587 7.20322V7.30322H53.6587V7.20322H53.5587ZM52.823 1.63291H52.923V1.53291H52.823V1.63291ZM51.0363 1.63291H50.9363V1.73291H51.0363V1.63291ZM51.0363 0.897213V0.797213H50.9363V0.897213H51.0363ZM55.3454 0.897213H55.4454V0.797213H55.3454V0.897213ZM55.3454 1.63291V1.73291H55.4454V1.63291H55.3454ZM53.5587 1.63291V1.53291H53.4587V1.63291H53.5587ZM60.9165 0.897213H61.0165L60.8254 0.856103L60.9165 0.897213ZM60.9165 1.00231V1.10231H61.0165V1.00231H60.9165ZM58.4992 6.25732L58.4081 6.2162L58.4073 6.21793L58.4992 6.25732ZM56.3972 7.30832L56.3011 7.28085L56.2783 7.36065L56.3525 7.39776L56.3972 7.30832ZM56.6074 6.57262L56.6781 6.50191L56.558 6.38174L56.5113 6.54515L56.6074 6.57262ZM57.7635 6.15222L57.8533 6.1971L57.8564 6.18936L57.7635 6.15222ZM57.9737 5.62672L58.0666 5.66386L58.0824 5.62421L58.0648 5.58534L57.9737 5.62672ZM55.8717 1.00231V0.902314H55.7164L55.7807 1.04369L55.8717 1.00231ZM56.8176 1.00231L56.9091 0.96195L56.8828 0.902314H56.8176V1.00231ZM58.3941 4.57572L58.3026 4.61608L58.3973 4.83065L58.4866 4.61379L58.3941 4.57572ZM59.8655 1.00231V0.902314H59.7986L59.7731 0.964239L59.8655 1.00231ZM66.3815 0.897213H66.4815V0.797213H66.3815V0.897213ZM61.8622 0.897213V0.797213H61.7622V0.897213H61.8622ZM66.3815 7.20322V7.30322H66.4815V7.20322H66.3815ZM65.5407 7.20322H65.4407V7.30322H65.5407V7.20322ZM65.5407 1.63291H65.6407V1.53291H65.5407V1.63291ZM62.5979 1.63291V1.53291H62.4979V1.63291H62.5979ZM62.5979 7.20322V7.30322H62.6979V7.20322H62.5979ZM61.8622 7.20322H61.7622V7.30322H61.8622V7.20322ZM67.8527 0.897213V0.797213H67.7527V0.897213H67.8527ZM68.6935 0.897213H68.7935V0.797213H68.6935V0.897213ZM67.8527 7.20322H67.7527V7.30322H67.8527V7.20322ZM68.6935 7.20322V7.30322H68.7935V7.20322H68.6935ZM68.6935 4.36552V4.26552H68.5935V4.36552H68.6935ZM71.8465 4.36552H71.9465V4.26552H71.8465V4.36552ZM71.8465 7.20322H71.7465V7.30322H71.8465V7.20322ZM72.6873 7.20322V7.30322H72.7873V7.20322H72.6873ZM72.6873 0.897213H72.7873V0.797213H72.6873V0.897213ZM71.8465 0.897213V0.797213H71.7465V0.897213H71.8465ZM71.8465 3.62982V3.72982H71.9465V3.62982H71.8465ZM68.6935 3.62982H68.5935V3.72982H68.6935V3.62982ZM79.3085 6.36251L79.3795 6.43351L79.3853 6.42653L79.3085 6.36251ZM74.6841 6.36251L74.7548 6.2918L74.6841 6.36251ZM74.6841 1.73811L74.6134 1.6674L74.6841 1.73811ZM79.3085 1.73811L79.3792 1.6674L79.3085 1.73811ZM80.2544 4.05031L80.3544 4.06142V4.05031H80.2544ZM75.2099 5.83687L75.2807 5.76616L75.2806 5.76616L75.2099 5.83687ZM75.2099 2.26346L75.2811 2.33461L75.288 2.32593L75.2099 2.26346ZM78.5731 2.26346L78.502 2.33461L78.5107 2.34155L78.5731 2.26346ZM78.5731 5.83687L78.502 5.76572L78.495 5.7744L78.5731 5.83687ZM83.513 0.897213V0.797213H83.413V0.897213H83.513ZM87.0864 1.42271L87.0157 1.49342L87.0864 1.42271ZM87.4665 3.33913L87.5607 3.37286V3.37286L87.4665 3.33913ZM87.4017 3.52472L87.4911 3.56944L87.4943 3.56308L87.4965 3.55634L87.4017 3.52472ZM86.7711 4.05022L86.7394 3.95535L86.4548 4.05022L86.7394 4.14509L86.7711 4.05022ZM87.5068 4.57569L87.5775 4.50498V4.50498L87.5068 4.57569ZM87.5068 4.57572L87.5775 4.50501V4.50501L87.5068 4.57572ZM87.2966 6.78282L87.3566 6.86282L87.3623 6.85856L87.3673 6.85353L87.2966 6.78282ZM83.513 7.30832H83.413V7.40832H83.513V7.30832ZM84.353 3.62983H84.253V3.72983H84.353V3.62983ZM84.353 1.73803V1.63803H84.253V1.73803H84.353ZM86.5601 2.05333L86.6308 1.98262L86.6308 1.98262L86.5601 2.05333ZM86.5601 3.31453L86.6308 3.38524V3.38524L86.5601 3.31453ZM84.4581 6.4675H84.3581V6.5675H84.4581V6.4675ZM86.7703 6.1522L86.6996 6.08149H86.6996L86.7703 6.1522ZM86.7703 4.68079L86.841 4.61008H86.841L86.7703 4.68079ZM84.4581 4.36549V4.26549H84.3581V4.36549H84.4581ZM36.8487 17.8183V17.7183H36.7487V17.8183H36.8487ZM36.8487 19.7101H36.7487V19.8101H36.8487V19.7101ZM43.3649 17.8183L43.4598 17.7867L43.437 17.7183H43.3649V17.8183ZM41.7884 23.3886L41.7177 23.3179L41.7149 23.3208L41.7884 23.3886ZM41.6833 13.4041L41.754 13.4748L41.8282 13.4007L41.7506 13.3301L41.6833 13.4041ZM40.317 14.7704L40.2512 14.8457L40.3216 14.9073L40.3877 14.8411L40.317 14.7704ZM41.368 19.7101L41.4675 19.7201L41.4785 19.6101H41.368V19.7101ZM84.6685 23.4938L84.7553 23.5434L84.8002 23.465L84.7266 23.4125L84.6685 23.4938ZM83.1971 22.4428L83.2552 22.3615L83.1739 22.3033L83.1157 22.3847L83.1971 22.4428ZM78.7829 22.3377L78.7441 22.2456L78.6413 22.2888L78.6955 22.3863L78.7829 22.3377ZM84.7736 19.8153L84.8124 19.9075L84.9029 19.8694L84.8665 19.7782L84.7736 19.8153ZM78.467 20.7611H78.367V20.9117L78.5058 20.8533L78.467 20.7611ZM82.4608 19.0795L82.4996 19.1717L82.5901 19.1336L82.5536 19.0424L82.4608 19.0795ZM75.5245 25.0704V25.1704H75.6245V25.0704H75.5245ZM73.5276 25.0704H73.4276V25.1704H73.5276V25.0704ZM75.5245 11.9329H75.6245V11.8329H75.5245V11.9329ZM73.5276 11.9329V11.8329H73.4276V11.9329H73.5276ZM70.3752 17.398L70.3045 17.4687L70.4752 17.6394V17.398H70.3752ZM70.3752 16.6623V16.5623H70.2752V16.6623H70.3752ZM72.267 16.6623H72.367V16.5623H72.267V16.6623ZM64.0692 26.6468L64.0291 26.5552L63.9361 26.5958L63.9781 26.6882L64.0692 26.6468ZM65.7508 25.9111L65.8469 25.8836L65.8155 25.7736L65.7107 25.8195L65.7508 25.9111ZM70.3752 24.2295H70.4752V24.1295H70.3752V24.2295ZM70.2701 24.2295V24.1295H70.222L70.192 24.167L70.2701 24.2295ZM88.9768 11.9329V11.8329H88.8768V11.9329H88.9768ZM90.9737 20.1307V20.0307H90.8737V20.1307H90.9737ZM90.9737 25.0704V25.1704H91.0737V25.0704H90.9737ZM88.9768 25.0704H88.8768V25.1704H88.9768V25.0704ZM90.975 18.2387H90.875V18.3387H90.975V18.2387ZM90.975 13.7194V13.6194H90.875V13.7194H90.975ZM96.1249 15.9265L96.2249 15.9356V15.9265H96.1249ZM102.431 18.3439L102.338 18.308L102.303 18.3992L102.393 18.4364L102.431 18.3439ZM110.103 20.0255H110.204L110.203 20.0164L110.103 20.0255ZM110.103 25.0703V25.1703H110.203V25.0703H110.103ZM108.212 25.0703H108.112V25.1703H108.212V25.0703ZM108.212 24.0193H108.312V23.9193H108.212V24.0193ZM108.106 24.0193V23.9193H108.06L108.03 23.9553L108.106 24.0193ZM108.106 19.9204L108.051 20.0036L108.206 20.1072V19.9204H108.106ZM108.106 19.8153H108.207L108.206 19.8053L108.106 19.8153ZM104.218 19.0796L104.18 19.1721L104.261 19.2055L104.305 19.1292L104.218 19.0796ZM107.845 21.4334L107.883 21.341L107.883 21.3408L107.845 21.4334ZM107.846 21.4336L107.808 21.5261L107.808 21.5262L107.846 21.4336ZM108.002 21.4969L108.1 21.5133L108.114 21.4339L108.039 21.4041L108.002 21.4969ZM116.724 16.6623V16.5623H116.656L116.631 16.626L116.724 16.6623ZM114.517 22.3377V22.4377H114.585L114.61 22.3739L114.517 22.3377ZM118.826 16.6623L118.918 16.7019L118.978 16.5623H118.826V16.6623ZM113.466 29.0641V29.1641H113.532L113.558 29.1038L113.466 29.0641ZM111.469 29.0641L111.378 29.0229L111.314 29.1641H111.469V29.0641ZM113.466 24.6499L113.557 24.6911L113.575 24.6507L113.558 24.61L113.466 24.6499ZM109.998 16.6623V16.5623H109.845L109.906 16.7021L109.998 16.6623ZM112.1 16.6623L112.192 16.6245L112.167 16.5623H112.1V16.6623ZM114.412 22.3377L114.319 22.3754L114.344 22.4377H114.412V22.3377ZM101.065 25.0704V25.1704H101.165V25.0704H101.065ZM99.0676 25.0704H98.9676V25.1704H99.0676V25.0704ZM101.065 11.9329H101.165V11.8329H101.065V11.9329ZM99.0676 11.9329V11.8329H98.9676V11.9329H99.0676ZM42.7688 6.2918C42.157 6.90361 41.4468 7.20841 40.5273 7.20841V7.40841C41.4997 7.40841 42.2608 7.08261 42.9102 6.43322L42.7688 6.2918ZM43.6854 4.05031C43.6854 4.96974 43.3806 5.67999 42.7688 6.2918L42.9102 6.43322C43.5596 5.78383 43.8854 5.02268 43.8854 4.05031H43.6854ZM42.7688 1.80882C43.3806 2.42063 43.6854 3.13088 43.6854 4.05031H43.8854C43.8854 3.07794 43.5596 2.31679 42.9102 1.6674L42.7688 1.80882ZM40.5273 0.892206C41.4468 0.892206 42.157 1.19701 42.7688 1.80882L42.9102 1.6674C42.2608 1.01801 41.4997 0.692206 40.5273 0.692206V0.892206ZM38.2858 1.80882C38.8976 1.19701 39.6079 0.892206 40.5273 0.892206V0.692206C39.555 0.692206 38.7938 1.01801 38.1444 1.6674L38.2858 1.80882ZM37.3692 4.05031C37.3692 3.13088 37.674 2.42063 38.2858 1.80882L38.1444 1.6674C37.495 2.31679 37.1692 3.07794 37.1692 4.05031H37.3692ZM38.2858 6.2918C37.674 5.67999 37.3692 4.96974 37.3692 4.05031H37.1692C37.1692 5.02268 37.495 5.78383 38.1444 6.43322L38.2858 6.2918ZM40.5273 7.20841C39.6079 7.20841 38.8976 6.90361 38.2858 6.2918L38.1444 6.43322C38.7938 7.08261 39.555 7.40841 40.5273 7.40841V7.20841ZM30.2266 8.66952H30.9623V8.46952H30.2266V8.66952ZM30.1266 6.46752V8.56952H30.3266V6.46752H30.1266ZM30.8572 6.36752H30.2266V6.56752H30.8572V6.36752ZM31.598 4.05022C31.598 5.19351 31.2856 5.99678 30.7948 6.38943L30.9197 6.54561C31.4799 6.09746 31.798 5.21913 31.798 4.05022H31.598ZM31.598 0.897213V4.05022H31.798V0.897213H31.598ZM35.9021 0.797213H31.698V0.997213H35.9021V0.797213ZM36.0021 6.46752V0.897213H35.8021V6.46752H36.0021ZM36.6378 6.36752H35.9021V6.56752H36.6378V6.36752ZM36.7378 8.56952V6.46752H36.5378V8.56952H36.7378ZM35.9021 8.66952H36.6378V8.46952H35.9021V8.66952ZM35.8021 7.20322V8.56952H36.0021V7.20322H35.8021ZM31.0674 7.30322H35.9021V7.10322H31.0674V7.30322ZM31.1674 8.56952V7.20322H30.9674V8.56952H31.1674ZM30.9623 8.66952H31.0674V8.46952H30.9623V8.66952ZM31.886 6.52301C32.3203 5.87151 32.5334 5.00971 32.5334 4.05023H32.3334C32.3334 4.98256 32.126 5.80237 31.7196 6.41207L31.886 6.52301ZM34.9558 6.36754H31.8028V6.56754H34.9558V6.36754ZM34.8558 1.73803V6.46754H35.0558V1.73803H34.8558ZM32.3283 1.83803H34.9558V1.63803H32.3283V1.83803ZM32.4283 4.05023V1.73803H32.2283V4.05023H32.4283ZM32.4334 3.95023H32.3283V4.15023H32.4334V3.95023ZM40.5266 6.47257C39.9272 6.47257 39.3209 6.17141 38.9157 5.76616L38.7743 5.90758C39.2098 6.34313 39.8648 6.67257 40.5266 6.67257V6.47257ZM42.1301 5.7744C41.7339 6.26971 41.1362 6.47257 40.5266 6.47257V6.67257C41.1782 6.67257 41.8417 6.45503 42.2863 5.89934L42.1301 5.7744ZM42.8439 4.05017C42.8439 4.75688 42.5409 5.3627 42.1375 5.76616L42.2789 5.90758C42.7162 5.47024 43.0439 4.81485 43.0439 4.05017H42.8439ZM42.1457 2.34155C42.6395 2.73659 42.8439 3.33289 42.8439 4.05017H43.0439C43.0439 3.29604 42.8279 2.63114 42.2707 2.18538L42.1457 2.34155ZM40.5266 1.62776C41.126 1.62776 41.7322 1.92893 42.1375 2.33418L42.2789 2.19275C41.8433 1.7572 41.1884 1.42776 40.5266 1.42776V1.62776ZM38.9231 2.32593C39.3193 1.83062 39.917 1.62776 40.5266 1.62776V1.42776C39.875 1.42776 39.2114 1.64531 38.7669 2.201L38.9231 2.32593ZM38.2093 4.05017C38.2093 3.34345 38.5122 2.73764 38.9157 2.33418L38.7743 2.19275C38.3369 2.63009 38.0093 3.28548 38.0093 4.05017H38.2093ZM38.9075 5.75878C38.4137 5.36375 38.2093 4.76745 38.2093 4.05017H38.0093C38.0093 4.80429 38.2253 5.46919 38.7825 5.91496L38.9075 5.75878ZM47.8839 7.20841C46.9645 7.20841 46.2542 6.90361 45.6424 6.2918L45.501 6.43322C46.1504 7.08261 46.9115 7.40841 47.8839 7.40841V7.20841ZM49.2055 6.90367C48.7991 7.10688 48.394 7.20841 47.8839 7.20841V7.40841C48.4248 7.40841 48.8606 7.29974 49.2949 7.08255L49.2055 6.90367ZM50.2305 6.08161C49.9136 6.3985 49.6091 6.70185 49.2055 6.90367L49.2949 7.08255C49.7321 6.86398 50.0582 6.53674 50.3719 6.22304L50.2305 6.08161ZM50.2265 6.08588L50.2265 6.08589L50.376 6.21876L50.376 6.21875L50.2265 6.08588ZM49.705 5.69752L50.2305 6.22302L50.3719 6.0816L49.8464 5.5561L49.705 5.69752ZM47.8839 6.67271C48.653 6.67271 49.3105 6.34125 49.8525 5.69083L49.6989 5.56279C49.1899 6.17357 48.5863 6.47271 47.8839 6.47271V6.67271ZM46.0265 5.90772C46.4638 6.34506 47.1192 6.67271 47.8839 6.67271V6.47271C47.1772 6.47271 46.5714 6.16976 46.1679 5.7663L46.0265 5.90772ZM45.2615 4.05031C45.2615 4.80443 45.4775 5.46933 46.0347 5.9151L46.1597 5.75892C45.6659 5.36389 45.4615 4.76759 45.4615 4.05031H45.2615ZM46.0347 2.18552C45.4775 2.63129 45.2615 3.29619 45.2615 4.05031H45.4615C45.4615 3.33303 45.6659 2.73673 46.1597 2.34169L46.0347 2.18552ZM47.8839 1.42791C47.5063 1.42791 47.1776 1.4819 46.8739 1.60614C46.5701 1.73041 46.2966 1.92284 46.0265 2.1929L46.1679 2.33432C46.4234 2.07888 46.6753 1.90345 46.9496 1.79125C47.224 1.67901 47.5258 1.62791 47.8839 1.62791V1.42791ZM49.7487 2.30624C49.3092 1.75679 48.6497 1.42791 47.8839 1.42791V1.62791C48.5895 1.62791 49.1913 1.92962 49.5925 2.43118L49.7487 2.30624ZM50.1254 1.7725L49.5999 2.298L49.7413 2.43942L50.2668 1.91392L50.1254 1.7725ZM47.8839 0.892206C48.8021 0.892206 49.5095 1.19582 50.1202 1.90829L50.272 1.77813C49.6215 1.0192 48.8576 0.692206 47.8839 0.692206V0.892206ZM45.6424 1.80882C46.2542 1.19701 46.9645 0.892206 47.8839 0.892206V0.692206C46.9115 0.692206 46.1504 1.01801 45.501 1.6674L45.6424 1.80882ZM44.7258 4.05031C44.7258 3.13088 45.0306 2.42063 45.6424 1.80882L45.501 1.6674C44.8516 2.31679 44.5258 3.07794 44.5258 4.05031H44.7258ZM45.6424 6.2918C45.0306 5.67999 44.7258 4.96974 44.7258 4.05031H44.5258C44.5258 5.02268 44.8516 5.78383 45.501 6.43322L45.6424 6.2918ZM52.823 7.30322H53.5587V7.10322H52.823V7.30322ZM52.723 1.63291V7.20322H52.923V1.63291H52.723ZM51.0363 1.73291H52.823V1.53291H51.0363V1.73291ZM50.9363 0.897213V1.63291H51.1363V0.897213H50.9363ZM55.3454 0.797213H51.0363V0.997213H55.3454V0.797213ZM55.4454 1.63291V0.897213H55.2454V1.63291H55.4454ZM53.5587 1.73291H55.3454V1.53291H53.5587V1.73291ZM53.6587 7.20322V1.63291H53.4587V7.20322H53.6587ZM60.8254 0.856103L60.778 0.961203L60.9603 1.04342L61.0077 0.938324L60.8254 0.856103ZM61.0165 1.00231V0.897213H60.8165V1.00231H61.0165ZM60.8691 1.10231H60.9165V0.902314H60.8691V1.10231ZM58.5904 6.29843L60.9603 1.04342L60.778 0.961203L58.4081 6.21621L58.5904 6.29843ZM57.0278 7.51342C57.7112 7.51342 58.2658 7.05586 58.5911 6.29671L58.4073 6.21793C58.1021 6.93018 57.6057 7.31342 57.0278 7.31342V7.51342ZM56.3525 7.39776C56.5867 7.51488 56.8202 7.51342 57.0278 7.51342V7.31342C56.8151 7.31342 56.6281 7.31196 56.442 7.21888L56.3525 7.39776ZM56.5113 6.54515L56.3011 7.28085L56.4934 7.33579L56.7036 6.60009L56.5113 6.54515ZM57.0278 6.57772C56.9747 6.57772 56.9037 6.57754 56.8341 6.56594C56.7622 6.55396 56.7085 6.53229 56.6781 6.50191L56.5367 6.64333C56.6114 6.71805 56.7154 6.74893 56.8012 6.76322C56.8893 6.7779 56.9759 6.77772 57.0278 6.77772V6.57772ZM57.3775 6.50191C57.3063 6.57313 57.2461 6.57772 57.0278 6.57772V6.77772C57.2299 6.77772 57.38 6.7823 57.5189 6.64333L57.3775 6.50191ZM57.6741 6.1075C57.5764 6.30296 57.4806 6.39887 57.3775 6.50191L57.5189 6.64333C57.6261 6.53617 57.7405 6.42188 57.853 6.19694L57.6741 6.1075ZM57.8809 5.58958L57.6707 6.11508L57.8564 6.18936L58.0666 5.66386L57.8809 5.58958ZM55.7807 1.04369L57.8827 5.6681L58.0648 5.58534L55.9628 0.960933L55.7807 1.04369ZM56.8176 0.902314H55.8717V1.10231H56.8176V0.902314ZM58.4856 4.53535L56.9091 0.96195L56.7261 1.04268L58.3026 4.61608L58.4856 4.53535ZM59.7731 0.964239L58.3017 4.53764L58.4866 4.61379L59.958 1.04039L59.7731 0.964239ZM60.8691 0.902314H59.8655V1.10231H60.8691V0.902314ZM66.3815 0.797213H61.8622V0.997213H66.3815V0.797213ZM66.4815 7.20322V0.897213H66.2815V7.20322H66.4815ZM65.5407 7.30322H66.3815V7.10322H65.5407V7.30322ZM65.4407 1.63291V7.20322H65.6407V1.63291H65.4407ZM62.5979 1.73291H65.5407V1.53291H62.5979V1.73291ZM62.6979 7.20322V1.63291H62.4979V7.20322H62.6979ZM61.8622 7.30322H62.5979V7.10322H61.8622V7.30322ZM61.7622 0.897213V7.20322H61.9622V0.897213H61.7622ZM67.8527 0.997213H68.6935V0.797213H67.8527V0.997213ZM67.9527 7.20322V0.897213H67.7527V7.20322H67.9527ZM68.6935 7.10322H67.8527V7.30322H68.6935V7.10322ZM68.5935 4.36552V7.20322H68.7935V4.36552H68.5935ZM71.8465 4.26552H68.6935V4.46552H71.8465V4.26552ZM71.9465 7.20322V4.36552H71.7465V7.20322H71.9465ZM72.6873 7.10322H71.8465V7.30322H72.6873V7.10322ZM72.5873 0.897213V7.20322H72.7873V0.897213H72.5873ZM71.8465 0.997213H72.6873V0.797213H71.8465V0.997213ZM71.9465 3.62982V0.897213H71.7465V3.62982H71.9465ZM68.6935 3.72982H71.8465V3.52982H68.6935V3.72982ZM68.5935 0.897213V3.62982H68.7935V0.897213H68.5935ZM76.9963 7.40841C77.9686 7.40841 78.7298 7.08261 79.3792 6.43322L79.2378 6.2918C78.626 6.90361 77.9157 7.20841 76.9963 7.20841V7.40841ZM74.6134 6.43322C75.2628 7.08261 76.0239 7.40841 76.9963 7.40841V7.20841C76.0768 7.20841 75.3666 6.90361 74.7548 6.2918L74.6134 6.43322ZM73.6382 4.05031C73.6382 5.02268 73.964 5.78383 74.6134 6.43322L74.7548 6.2918C74.143 5.67999 73.8382 4.96974 73.8382 4.05031H73.6382ZM74.6134 1.6674C73.964 2.31679 73.6382 3.07794 73.6382 4.05031H73.8382C73.8382 3.13088 74.143 2.42063 74.7548 1.80882L74.6134 1.6674ZM76.9963 0.692206C76.0239 0.692206 75.2628 1.01801 74.6134 1.6674L74.7548 1.80882C75.3666 1.19701 76.0768 0.892206 76.9963 0.892206V0.692206ZM79.3792 1.6674C78.7298 1.01801 77.9686 0.692206 76.9963 0.692206V0.892206C77.9157 0.892206 78.626 1.19701 79.2378 1.80882L79.3792 1.6674ZM80.3544 4.05031C80.3544 3.07794 80.0286 2.31679 79.3792 1.6674L79.2378 1.80882C79.8496 2.42063 80.1544 3.13088 80.1544 4.05031H80.3544ZM79.3853 6.42653C79.9243 5.77978 80.2467 5.02528 80.3538 4.06135L80.155 4.03927C80.0519 4.96714 79.7437 5.68405 79.2317 6.29849L79.3853 6.42653ZM75.1392 5.90758C75.5748 6.34313 76.2297 6.67257 76.8915 6.67257V6.47257C76.2921 6.47257 75.6859 6.17141 75.2807 5.76616L75.1392 5.90758ZM74.3742 4.05017C74.3742 4.81485 74.7019 5.47024 75.1392 5.90758L75.2806 5.76616C74.8772 5.3627 74.5742 4.75688 74.5742 4.05017H74.3742ZM75.1392 2.19275C74.7019 2.63009 74.3742 3.28548 74.3742 4.05017H74.5742C74.5742 3.34345 74.8772 2.73764 75.2806 2.33418L75.1392 2.19275ZM76.8915 1.42776C76.2399 1.42776 75.5764 1.64531 75.1319 2.201L75.288 2.32593C75.6843 1.83062 76.2819 1.62776 76.8915 1.62776V1.42776ZM78.6438 2.19275C78.2083 1.7572 77.5534 1.42776 76.8915 1.42776V1.62776C77.4909 1.62776 78.0972 1.92893 78.5024 2.33417L78.6438 2.19275ZM79.4088 4.05017C79.4088 3.29604 79.1928 2.63114 78.6356 2.18538L78.5107 2.34155C79.0045 2.73659 79.2088 3.33289 79.2088 4.05017H79.4088ZM78.6438 5.90758C79.0812 5.47024 79.4088 4.81485 79.4088 4.05017H79.2088C79.2088 4.75688 78.9059 5.3627 78.5024 5.76616L78.6438 5.90758ZM76.8915 6.67257C77.5431 6.67257 78.2067 6.45503 78.6512 5.89934L78.495 5.7744C78.0988 6.26971 77.5011 6.47257 76.8915 6.47257V6.67257ZM85.8252 0.797213H83.513V0.997213H85.8252V0.797213ZM87.1571 1.352C86.8251 1.02001 86.38 0.797213 85.8252 0.797213V0.997213C86.3214 0.997213 86.7171 1.19482 87.0157 1.49342L87.1571 1.352ZM87.7119 2.68392C87.7119 2.12912 87.4891 1.684 87.1571 1.352L87.0157 1.49342C87.3143 1.79203 87.5119 2.18771 87.5119 2.68392H87.7119ZM87.5607 3.37286C87.64 3.15154 87.7119 2.95283 87.7119 2.68392H87.5119C87.5119 2.914 87.4522 3.08267 87.3724 3.3054L87.5607 3.37286ZM87.4965 3.55634C87.5181 3.49175 87.5396 3.43153 87.5607 3.37286L87.3724 3.3054C87.3514 3.36385 87.3291 3.42608 87.3068 3.49309L87.4965 3.55634ZM86.8027 4.14509C87.1438 4.0314 87.3744 3.80279 87.4911 3.56944L87.3122 3.47999C87.2187 3.66704 87.029 3.85883 86.7394 3.95535L86.8027 4.14509ZM87.5775 4.50498C87.369 4.29657 87.1435 4.06894 86.8027 3.95535L86.7394 4.14509C87.0292 4.24168 87.2241 4.43443 87.436 4.64641L87.5775 4.50498ZM87.5775 4.50501L87.5775 4.50498L87.436 4.64641L87.4361 4.64643L87.5775 4.50501ZM87.9221 5.52162C87.9221 5.0858 87.813 4.74058 87.5775 4.50501L87.4361 4.64643C87.6209 4.83126 87.7221 5.11663 87.7221 5.52162H87.9221ZM87.3673 6.85353C87.6993 6.52154 87.9221 6.07642 87.9221 5.52162H87.7221C87.7221 6.01782 87.5245 6.4135 87.2259 6.71211L87.3673 6.85353ZM85.9303 7.40832C86.4861 7.40832 86.9274 7.1847 87.3566 6.86282L87.2366 6.70282C86.825 7.01154 86.4255 7.20832 85.9303 7.20832V7.40832ZM83.513 7.40832H85.9303V7.20832H83.513V7.40832ZM83.413 7.20322V7.30832H83.613V7.20322H83.413ZM83.413 0.897213V7.20322H83.613V0.897213H83.413ZM84.353 3.72983H85.8244V3.52983H84.353V3.72983ZM84.253 1.73803V3.62983H84.453V1.73803H84.253ZM85.8244 1.63803H84.353V1.83803H85.8244V1.63803ZM86.6308 1.98262C86.5198 1.87162 86.4049 1.78439 86.2723 1.72548C86.1393 1.66637 85.9938 1.63803 85.8244 1.63803V1.83803C85.9704 1.83803 86.0876 1.86224 86.1911 1.90824C86.295 1.95443 86.3902 2.02485 86.4894 2.12404L86.6308 1.98262ZM86.9754 2.68393C86.9754 2.43786 86.8519 2.20372 86.6308 1.98262L86.4894 2.12404C86.6887 2.32334 86.7754 2.50961 86.7754 2.68393H86.9754ZM86.6308 3.38524C86.8519 3.16414 86.9754 2.93001 86.9754 2.68393H86.7754C86.7754 2.85826 86.6887 3.04452 86.4894 3.24382L86.6308 3.38524ZM85.8244 3.72983C85.9938 3.72983 86.1393 3.7015 86.2723 3.64239C86.4049 3.58348 86.5198 3.49625 86.6308 3.38524L86.4894 3.24382C86.3902 3.34302 86.295 3.41344 86.1911 3.45963C86.0876 3.50562 85.9704 3.52983 85.8244 3.52983V3.72983ZM86.0346 6.3675H84.4581V6.5675H86.0346V6.3675ZM86.6996 6.08149C86.6004 6.18068 86.5052 6.2511 86.4013 6.29729C86.2978 6.34328 86.1806 6.3675 86.0346 6.3675V6.5675C86.2039 6.5675 86.3495 6.53916 86.4825 6.48005C86.6151 6.42114 86.73 6.33391 86.841 6.22291L86.6996 6.08149ZM86.9856 5.4165C86.9856 5.56248 86.9614 5.67966 86.9154 5.78314C86.8692 5.88707 86.7988 5.98229 86.6996 6.08149L86.841 6.22291C86.952 6.1119 87.0393 5.99693 87.0982 5.86437C87.1573 5.73138 87.1856 5.58581 87.1856 5.4165H86.9856ZM86.6996 4.7515C86.8898 4.94173 86.9856 5.23103 86.9856 5.4165H87.1856C87.1856 5.18156 87.0712 4.84026 86.841 4.61008L86.6996 4.7515ZM86.0346 4.46549C86.1806 4.46549 86.2978 4.48971 86.4013 4.5357C86.5052 4.58189 86.6004 4.65231 86.6996 4.7515L86.841 4.61008C86.73 4.49908 86.6151 4.41185 86.4825 4.35294C86.3495 4.29383 86.2039 4.26549 86.0346 4.26549V4.46549ZM84.4581 4.46549H86.0346V4.26549H84.4581V4.46549ZM84.5581 6.4675V4.36549H84.3581V6.4675H84.5581ZM36.7487 17.8183V19.7101H36.9487V17.8183H36.7487ZM43.3649 17.7183H36.8487V17.9183H43.3649V17.7183ZM43.57 18.9744C43.57 18.5597 43.5711 18.1208 43.4598 17.7867L43.2701 17.85C43.3689 18.1465 43.37 18.5484 43.37 18.9744H43.57ZM41.8591 23.4594C43.1453 22.1732 43.57 20.357 43.57 18.9744H43.37C43.37 20.3245 42.954 22.0817 41.7177 23.3179L41.8591 23.4594ZM36.9538 25.4855C39.0811 25.4855 40.58 24.8452 41.8619 23.4565L41.7149 23.3208C40.4744 24.6647 39.0306 25.2855 36.9538 25.2855V25.4855ZM29.8121 18.4489C29.8121 22.2897 33.1169 25.4855 36.9538 25.4855V25.2855C33.2235 25.2855 30.0121 22.1754 30.0121 18.4489H29.8121ZM36.9538 11.4123C33.1169 11.4123 29.8121 14.6082 29.8121 18.4489H30.0121C30.0121 14.7225 33.2235 11.6123 36.9538 11.6123V11.4123ZM41.7506 13.3301C40.5813 12.2671 39.0869 11.4123 36.9538 11.4123V11.6123C39.0247 11.6123 40.4732 12.4392 41.6161 13.4781L41.7506 13.3301ZM40.3877 14.8411L41.754 13.4748L41.6126 13.3334L40.2463 14.6997L40.3877 14.8411ZM36.8487 13.5041C38.2895 13.5041 39.4231 14.1211 40.2512 14.8457L40.3829 14.6952C39.5293 13.9483 38.3508 13.3041 36.8487 13.3041V13.5041ZM32.009 18.4489C32.009 15.6651 34.1727 13.5041 36.8487 13.5041V13.3041C34.0595 13.3041 31.809 15.5574 31.809 18.4489H32.009ZM36.8487 23.3937C34.069 23.3937 32.009 21.2342 32.009 18.4489H31.809C31.809 21.3391 33.953 23.5937 36.8487 23.5937V23.3937ZM40.2463 22.0567C39.6299 22.6732 38.6031 23.3937 36.8487 23.3937V23.5937C38.6678 23.5937 39.743 22.8429 40.3877 22.1982L40.2463 22.0567ZM41.2685 19.7002C41.1655 20.7309 40.7537 21.5493 40.2463 22.0567L40.3877 22.1982C40.9313 21.6545 41.3604 20.7914 41.4675 19.7201L41.2685 19.7002ZM36.8487 19.8101H41.368V19.6101H36.8487V19.8101ZM48.5145 16.3521C45.9384 16.3521 43.8952 18.2872 43.8952 20.9714H44.0952C44.0952 18.4007 46.0458 16.5521 48.5145 16.5521V16.3521ZM53.1338 20.9714C53.1338 18.1805 51.089 16.3521 48.5145 16.3521V16.5521C50.9848 16.5521 52.9338 18.2971 52.9338 20.9714H53.1338ZM48.5145 25.5907C51.0906 25.5907 53.1338 23.6557 53.1338 20.9714H52.9338C52.9338 23.5422 50.9832 25.3907 48.5145 25.3907V25.5907ZM43.8952 20.9714C43.8952 23.5491 45.9368 25.5907 48.5145 25.5907V25.3907C46.0473 25.3907 44.0952 23.4386 44.0952 20.9714H43.8952ZM53.869 20.9714C53.869 18.4007 55.8195 16.5521 58.2883 16.5521V16.3521C55.7122 16.3521 53.669 18.2872 53.669 20.9714H53.869ZM58.2883 25.3907C55.8211 25.3907 53.869 23.4386 53.869 20.9714H53.669C53.669 23.5491 55.7106 25.5907 58.2883 25.5907V25.3907ZM62.7076 20.9714C62.7076 23.5422 60.757 25.3907 58.2883 25.3907V25.5907C60.8644 25.5907 62.9076 23.6557 62.9076 20.9714H62.7076ZM58.2883 16.5521C60.7586 16.5521 62.7076 18.2971 62.7076 20.9714H62.9076C62.9076 18.1805 60.8628 16.3521 58.2883 16.3521V16.5521ZM55.6671 20.8662C55.6671 22.4927 56.8628 23.6988 58.2895 23.6988V23.4988C56.9836 23.4988 55.8671 22.3928 55.8671 20.8662H55.6671ZM58.2895 18.0336C56.8628 18.0336 55.6671 19.2398 55.6671 20.8662H55.8671C55.8671 19.3397 56.9836 18.2336 58.2895 18.2336V18.0336ZM60.9119 20.8662C60.9119 19.1321 59.7137 18.0336 58.2895 18.0336V18.2336C59.598 18.2336 60.7119 19.2372 60.7119 20.8662H60.9119ZM58.2895 23.6988C59.7162 23.6988 60.9119 22.4927 60.9119 20.8662H60.7119C60.7119 22.3928 59.5954 23.4988 58.2895 23.4988V23.6988ZM45.8913 20.8662C45.8913 22.4927 47.087 23.6988 48.5137 23.6988V23.4988C47.2078 23.4988 46.0913 22.3928 46.0913 20.8662H45.8913ZM48.5137 18.0336C47.087 18.0336 45.8913 19.2398 45.8913 20.8662H46.0913C46.0913 19.3397 47.2078 18.2336 48.5137 18.2336V18.0336ZM51.1361 20.8662C51.1361 19.1321 49.9379 18.0336 48.5137 18.0336V18.2336C49.8222 18.2336 50.9361 19.2372 50.9361 20.8662H51.1361ZM48.5137 23.6988C49.9404 23.6988 51.1361 22.4927 51.1361 20.8662H50.9361C50.9361 22.3928 49.8196 23.4988 48.5137 23.4988V23.6988ZM80.7798 16.5521C83.0275 16.5521 84.0541 18.2858 84.4706 19.327L84.6563 19.2527C84.2319 18.1918 83.1565 16.3521 80.7798 16.3521V16.5521ZM76.6758 20.9714C76.6758 18.2908 78.526 16.5521 80.7798 16.5521V16.3521C78.4092 16.3521 76.4758 18.1868 76.4758 20.9714H76.6758ZM80.99 25.3907C78.5259 25.3907 76.6758 23.4417 76.6758 20.9714H76.4758C76.4758 23.5459 78.4093 25.5907 80.99 25.5907V25.3907ZM84.5817 23.4442C84.1745 24.1568 82.9426 25.3907 80.99 25.3907V25.5907C83.0312 25.5907 84.3217 24.3023 84.7553 23.5434L84.5817 23.4442ZM83.139 22.5242L84.6104 23.5752L84.7266 23.4125L83.2552 22.3615L83.139 22.5242ZM80.99 23.804C81.5336 23.804 81.9726 23.6677 82.3439 23.4339C82.7137 23.2011 83.0117 22.8745 83.2785 22.501L83.1157 22.3847C82.8571 22.7469 82.5769 23.0509 82.2373 23.2647C81.8992 23.4776 81.4975 23.604 80.99 23.604V23.804ZM78.6955 22.3863C78.9632 22.8682 79.2625 23.225 79.6361 23.4602C80.0106 23.696 80.4507 23.804 80.99 23.804V23.604C80.4783 23.604 80.0777 23.5019 79.7427 23.291C79.4069 23.0795 79.1281 22.7532 78.8703 22.2892L78.6955 22.3863ZM84.7348 19.7232L78.7441 22.2456L78.8217 22.4299L84.8124 19.9075L84.7348 19.7232ZM84.4706 19.327L84.6808 19.8525L84.8665 19.7782L84.6563 19.2527L84.4706 19.327ZM78.567 20.7611C78.567 19.1375 79.8857 18.2336 80.7792 18.2336V18.0336C79.7808 18.0336 78.367 19.0216 78.367 20.7611H78.567ZM82.422 18.9874L78.4281 20.669L78.5058 20.8533L82.4996 19.1717L82.422 18.9874ZM80.7792 18.2336C81.1287 18.2336 81.4798 18.3338 81.7678 18.4966C82.0571 18.6601 82.2738 18.8814 82.3679 19.1167L82.5536 19.0424C82.4375 18.7522 82.1813 18.5005 81.8662 18.3225C81.55 18.1437 81.1653 18.0336 80.7792 18.0336V18.2336ZM75.5245 24.9704H73.5276V25.1704H75.5245V24.9704ZM75.4245 11.9329V25.0704H75.6245V11.9329H75.4245ZM73.5276 12.0329H75.5245V11.8329H73.5276V12.0329ZM73.6276 25.0704V11.9329H73.4276V25.0704H73.6276ZM70.4459 17.3273C69.9079 16.7894 69.0432 16.247 67.9579 16.247V16.447C68.9746 16.447 69.7914 16.9556 70.3045 17.4687L70.4459 17.3273ZM70.2752 16.6623V17.398H70.4752V16.6623H70.2752ZM72.267 16.5623H70.3752V16.7623H72.267V16.5623ZM72.367 24.6499V16.6623H72.167V24.6499H72.367ZM68.063 29.3743C69.2383 29.3743 70.317 29.0268 71.1021 28.2552C71.8879 27.483 72.367 26.2985 72.367 24.6499H72.167C72.167 26.2594 71.7001 27.3871 70.962 28.1126C70.2231 28.8386 69.1999 29.1743 68.063 29.1743V29.3743ZM63.9781 26.6882C64.5135 27.866 65.8033 29.3743 68.063 29.3743V29.1743C65.9084 29.1743 64.6758 27.7398 64.1602 26.6054L63.9781 26.6882ZM65.7107 25.8195L64.0291 26.5552L64.1092 26.7384L65.7908 26.0027L65.7107 25.8195ZM67.9579 27.3876C66.8504 27.3876 66.046 26.5804 65.8469 25.8836L65.6546 25.9386C65.8759 26.7132 66.7531 27.5876 67.9579 27.5876V27.3876ZM70.2752 24.8601C70.2752 25.6825 70.0441 26.3124 69.6455 26.7359C69.2475 27.1588 68.6716 27.3876 67.9579 27.3876V27.5876C68.7155 27.5876 69.3483 27.3435 69.7911 26.873C70.2333 26.4032 70.4752 25.7193 70.4752 24.8601H70.2752ZM70.2752 24.2295V24.8601H70.4752V24.2295H70.2752ZM70.2701 24.3295H70.3752V24.1295H70.2701V24.3295ZM67.9579 25.3805C69.0415 25.3805 69.9102 24.8394 70.3482 24.292L70.192 24.167C69.7891 24.6706 68.9762 25.1805 67.9579 25.1805V25.3805ZM63.5488 20.8663C63.5488 23.4439 65.5904 25.3805 67.9579 25.3805V25.1805C65.7009 25.1805 63.7488 23.3335 63.7488 20.8663H63.5488ZM67.9579 16.247C65.694 16.247 63.5488 18.2902 63.5488 20.8663H63.7488C63.7488 18.3976 65.8075 16.447 67.9579 16.447V16.247ZM65.4399 20.8662C65.4399 22.4927 66.6356 23.6988 68.0623 23.6988V23.4988C66.7564 23.4988 65.6399 22.3928 65.6399 20.8662H65.4399ZM68.0623 18.0336C66.6356 18.0336 65.4399 19.2398 65.4399 20.8662H65.6399C65.6399 19.3397 66.7564 18.2336 68.0623 18.2336V18.0336ZM70.5796 20.8662C70.5796 19.2456 69.4943 18.0336 68.0623 18.0336V18.2336C69.3629 18.2336 70.3796 19.3339 70.3796 20.8662H70.5796ZM68.0623 23.6988C69.4943 23.6988 70.5796 22.4869 70.5796 20.8662H70.3796C70.3796 22.3986 69.3629 23.4988 68.0623 23.4988V23.6988ZM93.7063 11.8329H88.9768V12.0329H93.7063V11.8329ZM98.1154 16.0318C98.1154 13.443 95.9568 11.8329 93.7063 11.8329V12.0329C95.87 12.0329 97.9154 13.5757 97.9154 16.0318H98.1154ZM93.7063 20.2307C95.9568 20.2307 98.1154 18.6205 98.1154 16.0318H97.9154C97.9154 18.4879 95.87 20.0307 93.7063 20.0307V20.2307ZM90.9737 20.2307H93.7063V20.0307H90.9737V20.2307ZM91.0737 25.0704V20.1307H90.8737V25.0704H91.0737ZM88.9768 25.1704H90.9737V24.9704H88.9768V25.1704ZM88.8768 11.9329V25.0704H89.0768V11.9329H88.8768ZM90.975 18.3387H93.8127V18.1387H90.975V18.3387ZM90.875 13.7194V18.2387H91.075V13.7194H90.875ZM93.8127 13.6194H90.975V13.8194H93.8127V13.6194ZM96.2249 15.9265C96.2249 14.9346 95.3481 13.6194 93.8127 13.6194V13.8194C95.2201 13.8194 96.0249 15.0267 96.0249 15.9265H96.2249ZM93.8127 18.3387C95.2466 18.3387 96.1163 17.1256 96.2245 15.9356L96.0253 15.9175C95.9233 17.0396 95.1114 18.1387 93.8127 18.1387V18.3387ZM105.899 16.247C104.406 16.247 102.884 16.8875 102.338 18.308L102.524 18.3798C103.029 17.0677 104.45 16.447 105.899 16.447V16.247ZM110.203 20.0164C109.987 17.6457 108.151 16.247 105.899 16.247V16.447C108.062 16.447 109.799 17.7809 110.004 20.0346L110.203 20.0164ZM110.203 25.0703V20.0255H110.003V25.0703H110.203ZM108.212 25.1703H110.103V24.9703H108.212V25.1703ZM108.112 24.0193V25.0703H108.312V24.0193H108.112ZM108.106 24.1193H108.212V23.9193H108.106V24.1193ZM105.584 25.3805C106.284 25.3805 106.801 25.2187 107.212 24.9721C107.621 24.7267 107.919 24.4005 108.183 24.0833L108.03 23.9553C107.768 24.2687 107.488 24.5731 107.109 24.8006C106.732 25.0271 106.25 25.1805 105.584 25.1805V25.3805ZM102.226 22.3377C102.226 24.1945 103.863 25.3805 105.584 25.3805V25.1805C103.942 25.1805 102.426 24.0543 102.426 22.3377H102.226ZM106.11 19.2949C105.147 19.2949 104.18 19.562 103.451 20.0751C102.719 20.5897 102.226 21.3538 102.226 22.3377H102.426C102.426 21.4298 102.878 20.7225 103.566 20.2387C104.256 19.7532 105.181 19.4949 106.11 19.4949V19.2949ZM108.162 19.8372C107.993 19.7246 107.694 19.5897 107.333 19.4829C106.972 19.3758 106.542 19.2949 106.11 19.2949V19.4949C106.518 19.4949 106.929 19.5716 107.277 19.6747C107.626 19.7782 107.905 19.906 108.051 20.0036L108.162 19.8372ZM108.006 19.8153V19.9204H108.206V19.8153H108.006ZM106.004 18.2337C107.02 18.2337 107.908 18.8401 108.007 19.8252L108.206 19.8053C108.094 18.6885 107.09 18.0337 106.004 18.0337V18.2337ZM104.305 19.1292C104.505 18.7777 104.753 18.5561 105.036 18.421C105.32 18.2851 105.645 18.2337 106.004 18.2337V18.0337C105.628 18.0337 105.27 18.0874 104.95 18.2405C104.628 18.3945 104.35 18.6458 104.131 19.03L104.305 19.1292ZM102.393 18.4364L104.18 19.1721L104.256 18.9871L102.469 18.2514L102.393 18.4364ZM104.013 22.4428C104.013 22.9084 104.278 23.2261 104.614 23.4225C104.948 23.6172 105.361 23.6989 105.69 23.6989V23.4989C105.388 23.4989 105.012 23.4229 104.715 23.2498C104.421 23.0783 104.213 22.818 104.213 22.4428H104.013ZM106.215 20.9765C105.734 20.9765 105.19 21.0563 104.763 21.2767C104.332 21.4995 104.013 21.871 104.013 22.4428H104.213C104.213 21.9636 104.472 21.6519 104.855 21.4544C105.243 21.2543 105.75 21.1765 106.215 21.1765V20.9765ZM107.883 21.3408C107.421 21.1523 106.991 20.9765 106.215 20.9765V21.1765C106.951 21.1765 107.353 21.3404 107.807 21.526L107.883 21.3408ZM107.884 21.3412L107.883 21.341L107.807 21.5258L107.808 21.5261L107.884 21.3412ZM108.039 21.4041C107.986 21.383 107.935 21.362 107.884 21.3411L107.808 21.5262C107.859 21.5472 107.911 21.5684 107.965 21.5897L108.039 21.4041ZM105.69 23.6989C106.792 23.6989 107.883 22.82 108.1 21.5133L107.903 21.4805C107.7 22.6962 106.689 23.4989 105.69 23.4989V23.6989ZM116.631 16.626L114.424 22.3014L114.61 22.3739L116.817 16.6985L116.631 16.626ZM118.826 16.5623H116.724V16.7623H118.826V16.5623ZM113.558 29.1038L118.918 16.7019L118.734 16.6226L113.374 29.0244L113.558 29.1038ZM111.469 29.1641H113.466V28.9641H111.469V29.1641ZM113.375 24.6087L111.378 29.0229L111.56 29.1053L113.557 24.6911L113.375 24.6087ZM109.906 16.7021L113.374 24.6897L113.558 24.61L110.089 16.6224L109.906 16.7021ZM112.1 16.5623H109.998V16.7623H112.1V16.5623ZM114.504 22.2999L112.192 16.6245L112.007 16.7L114.319 22.3754L114.504 22.2999ZM114.517 22.2377H114.412V22.4377H114.517V22.2377ZM101.065 24.9704H99.0676V25.1704H101.065V24.9704ZM100.965 11.9329V25.0704H101.165V11.9329H100.965ZM99.0676 12.0329H101.065V11.8329H99.0676V12.0329ZM99.1676 25.0704V11.9329H98.9676V25.0704H99.1676Z",fill:"black"}),a.a.createElement("path",{d:"M2.76545 0.245826L3.85086 0.870313L14.7619 14.1531L3.84392 27.4432L2.76545 28.0637C1.88212 28.5719 0.754044 28.2678 0.245826 27.3845C0.0847661 27.1045 0 26.7872 0 26.4643V1.84524C0 0.826141 0.826141 0 1.84524 0C2.1682 0 2.48551 0.0847661 2.76545 0.245826Z",fill:"#00D2FF"}),a.a.createElement("path",{d:"M14.3914 14.1564L17.3454 12.3095L18.9021 9.52996L3.7353 0.804107L2.81047 0.262027C2.20784 -0.091197 1.45991 -0.0849295 0.863281 0.278343L14.3914 14.1564Z",fill:"#00F076"}),a.a.createElement("path",{d:"M14.3914 14.1531L17.3454 16L18.9021 18.7795L3.7353 27.5054L2.81047 28.0475C2.20784 28.4007 1.45991 28.3944 0.863281 28.0312L14.3914 14.1531Z",fill:"#F83547"}),a.a.createElement("path",{d:"M18.902 9.52997L24.717 12.8768C25.4236 13.2834 25.6668 14.1859 25.2601 14.8925C25.1301 15.1184 24.9427 15.3058 24.7168 15.4357L18.903 18.7806L14.3928 14.1548L18.902 9.52997Z",fill:"#FFD100"}))},Qi=n(121);(Ki=qi||(qi={}))[Ki.IOS=Et.c.IOS]="IOS",Ki[Ki.Android=Et.c.ANDROID]="Android";var Ji=(Gi={},A()(Gi,qi.IOS,a.a.createElement(Yi,null)),A()(Gi,qi.Android,a.a.createElement(Zi,null)),Gi),Xi=(Wi={},A()(Wi,qi.IOS,Ct.b),A()(Wi,qi.Android,Ct.i),Wi),$i=function(e){var t=e.platform,n=Object(jt.a)().go,i=Object(r.useCallback)((function(){switch(t){case qi.Android:Object(Qi.b)(Qi.a.DownloadAndroidClick),Object(ti.b)(Et.c.ANDROID);break;case qi.IOS:Object(Qi.b)(Qi.a.DownloadIOSClick),Object(ti.b)(Et.c.IOS)}}),[]);return a.a.createElement("span",{className:"MobileAppButton",onClick:i},a.a.createElement("a",{className:"MobileAppButton__link",href:Xi[t],target:"_blank",rel:"noreferrer"},Ji[t]),a.a.createElement("span",{className:"MobileAppButton__separator"}),a.a.createElement("a",{className:"MobileAppButton__link MobileAppButton__link--qr",onClick:function(){n(xe.i.DOWNLOAD_APP_MODAL,{pladformType:t})}},a.a.createElement(St.a,null)))};$i.displayName="MobileAppButton";var eo=n(637),to=function(){var e=Object(P.c)().getLangKey,t=Object(jt.a)().go,n=Object(r.useMemo)((function(){switch(Et.d.OS){case Et.c.MAC:case Et.c.LINUX:return Et.d.OS;default:return Et.c.WINDOWS}}),[]);return a.a.createElement("section",{className:"Platform"},a.a.createElement("h2",{className:"Platform__header"},e("vkui_edu_landing_platforms_title")),a.a.createElement("div",{className:"Platform__container"},a.a.createElement("div",{className:"Platform__info Platform__info--left"}),a.a.createElement("div",{className:"Platform__info Platform__info--right"},a.a.createElement("div",{className:"Platform__app--mobile"},a.a.createElement("h3",{className:"Platform__subtitle"},e("vkui_edu_landing_platforms_mobile")),a.a.createElement("div",{className:"Platform__actions"},a.a.createElement($i,{platform:qi.IOS}),a.a.createElement($i,{platform:qi.Android})),a.a.createElement(I.k,{level:"2",weight:"regular",className:"Platform__description"},e("vkui_edu_landing_platforms_mobile_desc"))),a.a.createElement("div",{className:"Platform__app--desktop"},a.a.createElement("h3",{className:"Platform__subtitle"},e("vkui_edu_landing_platforms_desktop")),a.a.createElement("div",{className:"Platform__actions"},a.a.createElement(eo.a,{platform:n})),a.a.createElement(I.Db,{weight:"medium",className:"Platform__otherLink"},a.a.createElement("a",{onClick:function(){t(xe.i.DOWNLOAD_APP_SELECT_MODAL)}},e("vkui_edu_landing_platforms_download_other_platforms")))))))};to.displayName="Platform";n(1068);var no=function(e){var t=e.viewWidth,n=Object(P.c)().getLangKey,i=Object(yt.b)(t),o=Object(yt.c)(t),c=Object(r.useState)([]),s=me()(c,2),u=s[0],l=s[1],d=Object(r.useState)([]),f=me()(d,2),p=f[0],h=f[1],m=i||o?3:2,v=function(e){return function(t){for(;e--;)t()}},g=Object(r.useMemo)((function(){return["vkui_edu_landing_tagcloud_item_videolessons","vkui_edu_landing_tagcloud_item_chats","vkui_edu_landing_tagcloud_item_parents_meetings","vkui_edu_landing_tagcloud_item_homework","vkui_edu_landing_tagcloud_item_schedule","vkui_edu_landing_tagcloud_item_files","vkui_edu_landing_tagcloud_item_comms","vkui_edu_landing_tagcloud_item_calls","vkui_edu_landing_tagcloud_item_lessons_online","vkui_edu_landing_tagcloud_item_docs","vkui_edu_landing_tagcloud_item_articles","vkui_edu_landing_tagcloud_item_community","vkui_edu_landing_tagcloud_item_administration","vkui_edu_landing_tagcloud_item_education","vkui_edu_landing_tagcloud_item_videos"].reduce((function(e,t){return e.push(n(t).toLowerCase()),e}),[])}),[]),b=Object(r.useCallback)((function(){return String(Math.floor(51*Math.random())+100)+"s"}),[]),_=Object(r.useCallback)((function(){var e=["blue","purple","green"],t=Object(k.C)(g);return[].concat(Ht()(t),Ht()(t)).map((function(t,n){return a.a.createElement("div",{key:n,className:"PromoTags__item PromoTags__item--".concat(e[n%e.length])},t)}))}),[]);return Object(r.useEffect)((function(){var e=[],t=[];v(m)((function(){return e.push([_()])})),v(m)((function(){return t.push(b())})),l(e),h(t)}),[t]),a.a.createElement("section",{className:"PromoTags"},Ht()(Array(m)).map((function(e,t){return a.a.createElement("div",{key:t,className:"PromoTags__row PromoTags__row--".concat(["ltr","rtl"][t%2]),style:{animationDuration:p[t]}},u[t])})))},ro=(n(1069),n(1070),n(1325)),ao=!1;function io(){ao||(Object(we.a)(new Ee.a({id:"arrow_right_outline_28",viewBox:"0 0 28 28",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="arrow_right_outline_28"><g fill="none" fill-rule="evenodd"><path d="M28 0H0v28h28z" /><path d="M22.707 13.293l-7-7a1 1 0 00-1.497 1.32l.083.094L19.586 13H6a1 1 0 00-.993.883L5 14a1 1 0 00.883.993L6 15h13.586l-5.293 5.293a1 1 0 00-.083 1.32l.083.094a1 1 0 001.32.083l.094-.083 7-7 .097-.112.071-.11.054-.114.035-.105.025-.118.007-.059.004-.108-.004-.07-.016-.112-.03-.111-.044-.111-.052-.098-.067-.096a1.006 1.006 0 00-.08-.09l-7-7 7 7z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),ao=!0)}var oo=function(e){return Object(we.b)((function(){io()}),[]),a.a.createElement(Ce.a,Object(Oe.assign)({},e,{viewBox:"0 0 28 28",id:"arrow_right_outline_28",width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};oo.mountIcon=io;var co=oo,so=function(e){var t=e.onStart,n=e.instructionClick,i=Object(P.c)(),o=i.getLangKey,c=i.replaceVar,s=Object(I.Ob)().sizeX,u=Object(r.useState)(0),l=me()(u,2),d=l[0],f=l[1],p=Object(r.useState)(0),h=me()(p,2),m=h[0],v=h[1],g=Object(r.useMemo)((function(){return Ht()(Array(6)).map((function(e,t,n){return{number:t,name:o("vkui_edu_landing_where_to_begin_step").replace("{n}","".concat(t+1)).replace("{total}","".concat(n.length)),desc:o("vkui_edu_landing_where_to_begin_step_".concat(t+1))}}))}),[]);Object(r.useEffect)((function(){v(d>2?1:0)}),[d]);var b=function(e){var t=e.number,n=e.name,r=e.desc,i=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"WhereToBeginSteps__name"},n),0===t&&a.a.createElement("div",{className:"WhereToBeginSteps__desc"},r," ",a.a.createElement("a",{className:"WhereToBegin__link",href:"mailto::".concat(Le.S)},Le.S)),t>0&&a.a.createElement("div",{className:"WhereToBeginSteps__desc"},r))};return t===d?a.a.createElement(I.l,{key:t,className:"WhereToBeginSteps__item",onClick:function(){return f(t)}},i()):a.a.createElement(I.l,{key:t,className:"WhereToBeginSteps__item",onClick:function(){return f(t)},mode:"outline"},i())};return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"WhereToBeginSteps"},a.a.createElement("div",{className:"WhereToBeginSteps__steps"},a.a.createElement(I.A,{className:"WhereToBeginSteps__steps-chunks",slideWidth:"100%",slideIndex:m,onChange:function(e){return v(e)},isDraggable:!1,showArrows:!1},a.a.createElement("div",{className:"WhereToBeginSteps__steps-chunk"},g.slice(0,3).map(b)),a.a.createElement("div",{className:"WhereToBeginSteps__steps-chunk"},g.slice(3,6).map(b)))),a.a.createElement("div",{className:"WhereToBeginSteps__gallery-wrapper"},a.a.createElement(I.A,{slideWidth:"100%",align:"center",className:"WhereToBeginSteps__gallery",slideIndex:d,onChange:function(e){return f(e)},isDraggable:!1,showArrows:!1},Ht()(Array(6)).map((function(e,t){return a.a.createElement("div",{key:t,className:"WhereToBeginSteps__image WhereToBeginSteps__image--".concat(t+1)})}))))),a.a.createElement("div",{className:"WhereToBeginSteps__control"},a.a.createElement(I.n,{className:"WhereToBeginSteps__control-item",disabled:0===d,onClick:function(){0!==d&&f(d-1)},centered:!0},a.a.createElement(ro.a,{fill:0===d?"#B8C1CC":"#4B47B2"})),a.a.createElement(I.n,{className:"WhereToBeginSteps__control-item",disabled:5===d,onClick:function(){d!==g.length-1&&f(d+1)},centered:!0},a.a.createElement(co,{fill:5===d?"#B8C1CC":"#4B47B2"})),a.a.createElement("div",{className:"WhereToBeginSteps__control-desc"},c(o("vkui_edu_landing_where_to_begin_if_questions"),"action",a.a.createElement("a",{className:"WhereToBegin__link",href:"".concat(location.pathname,"static/Instruktsia_sferum.pdf"),target:"_blank",rel:"noreferrer",onClick:n},o("vkui_edu_landing_where_to_begin_download_manual"))))),a.a.createElement(I.j,{size:"compact"===s?"m":"l",className:"WhereToBeginSteps__action",onClick:t},o("vkui_edu_promo_submit")))};so.displayName="WhereToBeginDesktop";n(1071);var uo=function(e){return a.a.createElement("svg",f()({width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),a.a.createElement("circle",{cx:"4",cy:"4",r:"4",fill:"#4B47B2"}))},lo=function(e){var t=e.onStart,n=e.isMobile,i=e.instructionClick,o=Object(P.c)(),c=o.getLangKey,s=o.replaceVar,u=Object(r.useState)(0),l=me()(u,2),d=l[0],f=l[1],p=Object(r.useMemo)((function(){return c("vkui_edu_landing_where_to_begin_step").replace("{n}","".concat(d+1)).replace("{total}","".concat(6))}),[d]);return a.a.createElement("div",null,a.a.createElement("div",{className:"WhereToBeginMobile__title"},p),a.a.createElement(I.A,{className:"WhereToBeginMobile__gallery--text",style:{height:n?94:52},slideWidth:"100%",align:"center",slideIndex:d},a.a.createElement("div",{className:"WhereToBeginMobile__description"},a.a.createElement("div",null,c("vkui_edu_landing_where_to_begin_step_1")," ",a.a.createElement("a",{className:"WhereToBegin__link",href:"mailto::".concat(Le.S)},Le.S))),a.a.createElement("div",{className:"WhereToBeginMobile__description"},c("vkui_edu_landing_where_to_begin_step_2")),a.a.createElement("div",{className:"WhereToBeginMobile__description"},c("vkui_edu_landing_where_to_begin_step_3")),a.a.createElement("div",{className:"WhereToBeginMobile__description"},c("vkui_edu_landing_where_to_begin_step_4")),a.a.createElement("div",{className:"WhereToBeginMobile__description"},c("vkui_edu_landing_where_to_begin_step_5")),a.a.createElement("div",{className:"WhereToBeginMobile__description"},c("vkui_edu_landing_where_to_begin_step_6"))),a.a.createElement(I.A,{style:{height:n?200:420},slideWidth:"100%",align:"center",slideIndex:d,onChange:function(e){return f(e)},showArrows:!0},a.a.createElement("div",{className:"WhereToBeginMobileSteps__image WhereToBeginMobileSteps__image--1"}),a.a.createElement("div",{className:"WhereToBeginMobileSteps__image WhereToBeginMobileSteps__image--2"}),a.a.createElement("div",{className:"WhereToBeginMobileSteps__image WhereToBeginMobileSteps__image--3"}),a.a.createElement("div",{className:"WhereToBeginMobileSteps__image WhereToBeginMobileSteps__image--4"}),a.a.createElement("div",{className:"WhereToBeginMobileSteps__image WhereToBeginMobileSteps__image--5"}),a.a.createElement("div",{className:"WhereToBeginMobileSteps__image WhereToBeginMobileSteps__image--6"})),a.a.createElement("div",{className:"WhereToBeginMobile__bullets"},a.a.createElement(uo,{style:{opacity:0===d?"1":"0.2"}}),a.a.createElement(uo,{style:{opacity:1===d?"1":"0.2"}}),a.a.createElement(uo,{style:{opacity:2===d?"1":"0.2"}}),a.a.createElement(uo,{style:{opacity:3===d?"1":"0.2"}}),a.a.createElement(uo,{style:{opacity:4===d?"1":"0.2"}}),a.a.createElement(uo,{style:{opacity:5===d?"1":"0.2"}})),a.a.createElement("div",{className:"WhereToBeginMobile__instrucrion"},s(c("vkui_edu_landing_where_to_begin_if_questions"),"action",a.a.createElement("a",{className:"WhereToBegin__link",href:"".concat(location.pathname,"static/Instruktsia_sferum.pdf"),target:"_blank",rel:"noreferrer",onClick:i},c("vkui_edu_landing_where_to_begin_download_manual")))),a.a.createElement("div",{className:"WhereToBeginMobile__action"},a.a.createElement(I.j,{size:"l",stretched:!0,onClick:t},c("vkui_edu_promo_submit"))))};lo.displayName="WhereToBeginMobile";var fo=n(155),po=Object(r.forwardRef)((function(e,t){var n=e.id,i=e.onStart,o=Object(I.Ob)().viewWidth,c=Object(P.c)().getLangKey,s=Object(yt.d)(o),u=Object(r.useMemo)((function(){return o<I.Ib.SMALL_TABLET}),[o]),l=function(){Object(ti.c)(fo.a.RegistrationButtonClick),i()},d=function(){Object(Qi.b)(Qi.a.DownloadInstructionClick),Object(ti.c)(fo.a.DownloadInstructions)};return a.a.createElement("section",{className:"WhereToBegin",id:n,ref:t},a.a.createElement("hr",{className:"WhereToBegin__separator"}),a.a.createElement("h2",{className:"WhereToBegin__heading"},c("vkui_edu_landing_where_to_begin_title")),a.a.createElement("div",{className:"Promo__container"},a.a.createElement("div",{className:"WhereToBegin__description",dangerouslySetInnerHTML:{__html:c("vkui_edu_landing_where_to_begin_desc")}}),s?a.a.createElement(so,{onStart:l,instructionClick:d}):a.a.createElement(lo,{onStart:l,instructionClick:d,isMobile:u})))}));po.displayName="WhereToBegin";var ho=n(12),mo=n.n(ho),vo=(n(1072),["className","isSticky"]),go=function(e){var t=e.className,n=e.isSticky,r=void 0===n||n,i=mo()(e,vo),o=Object(P.c)().getLangKey;return a.a.createElement("footer",f()({className:Object(I.Lb)(t,"EducationFooter",{"EducationFooter--sticky":r})},i),a.a.createElement("div",{className:"EducationFooter__container"},a.a.createElement("p",{className:"EducationFooter__footerCopy"},"© ",(new Date).getFullYear()," ",a.a.createElement(I.L,{href:xe.d.buildUrl(xe.j.START),target:"_blank"},o("vkui_edu_promo_icee"))),a.a.createElement("ul",{className:"EducationFooter__footerNav"},a.a.createElement("li",{className:"EducationFooter__footerNavItem"},a.a.createElement(I.L,{href:xe.d.buildUrl(xe.i.PRIVACY),className:"EducationFooter__footerLink"},o("vkui_edu_confidential_link"))),a.a.createElement("li",{className:"EducationFooter__footerNavItem"},a.a.createElement(I.L,{href:xe.d.buildUrl(xe.i.TERMS),className:"EducationFooter__footerLink"},o("vkui_edu_conditions_link"))),a.a.createElement("li",{className:"EducationFooter__footerNavItem EducationFooter__footerNavItem--"},o("vkui_edu_support_mail")," ",a.a.createElement(I.L,{href:"mailto:".concat(Le.S)},Le.S)))))},bo=n(357);function _o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_o(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Eo=Object($a.a)((function(e){var t,n,i,o=e.onStart,c=Object(I.Ob)(),s=c.viewWidth,u=c.sizeX,l=s<=I.Ib.MOBILE,d=s>I.Ib.MOBILE&&s<=I.Ib.TABLET,f=Object(yt.d)(s),p=Object(Ve.a)(),h=Object(P.c)(),m=h.getLangKey,v=h.getLangNumeric,g=Object(jt.a)().go,b=Object(vr.a)().isAuthorized,_=Object(Na.a)().showAlertError,y=Object(zn.b)().apiRequest,E=Object(Ve.b)(),O=E.inviteLink,w=E.accountInfo,C=Object(r.useState)(!1),S=me()(C,2),k=S[0],j=S[1],T=Object(r.useState)(null),D=me()(T,2),N=D[0],x=D[1],R=Object(r.useRef)(null),M=Object(r.useRef)(null),L=Object(r.useRef)(null),B=Object(r.useRef)(null),F=Object(r.useRef)(null),H=Object(r.useState)(!1),V=me()(H,2),U=V[0],z=V[1],G=Object(r.useState)(!1),W=me()(G,2),q=W[0],K=W[1],Y=Object(r.useState)(!1),Z=me()(Y,2),Q=Z[0],J=Z[1],X=[{id:"whats",name:m("vkui_edu_landing_menu_whats_inside"),active:!1},{id:"how-to-connect",name:m("vkui_edu_landing_menu_how_to_connect"),active:!1},{id:"faq",name:m("vkui_edu_landing_menu_faq"),active:!1},l?{id:"login",name:m("vkui_edu_promo_submit"),active:!1,onClick:function(){J(!1),o()},className:"PromoHeader__menu-item--submit"}:null].filter((function(e){return e})),$=Object(r.useState)(X),ee=me()($,2),te=ee[0],ne=ee[1],re=Object(bo.a)(null==N?void 0:N.school),ae=re.isVertical,ie=re.orgStructure,oe=re.orgTitle,ce=void 0===oe?"":oe,se=Object(r.useCallback)((function(){var e,t,n,r,a=null===(e=M.current)||void 0===e?void 0:e.getBoundingClientRect();z(document.documentElement.scrollTop>=(null===(t=R.current)||void 0===t?void 0:t.offsetHeight)),K((n=a,!l&&(null==n?void 0:n.top)<=(null===(r=R.current)||void 0===r?void 0:r.offsetHeight)-(null==n?void 0:n.height)))}),[s]),ue=Object(r.useCallback)((function(){var e,t,n=null===(e=R.current)||void 0===e?void 0:e.offsetHeight,r=[L,B,F];r.forEach((function(e){var r,a,i=null===(r=e.current)||void 0===r?void 0:r.getBoundingClientRect();n>=(null==i?void 0:i.top)-5&&(t=null===(a=e.current)||void 0===a?void 0:a.id)})),ne(te.map((function(e){return e.onClick=e.onClick||function(){var t,n,a;J(!1),window.scrollTo({top:(null===(t=r.find((function(t){var n;return(null===(n=t.current)||void 0===n?void 0:n.id)===e.id})))||void 0===t||null===(n=t.current)||void 0===n?void 0:n.offsetTop)-(null===(a=R.current)||void 0===a?void 0:a.offsetHeight),behavior:"smooth"})},(null==e?void 0:e.id)===t?yo(yo({},e),{},{active:!0}):yo(yo({},e),{},{active:!1})})))}),[]),le=function(e){return e?"var(--accent)":"var(--white)"};return Object(r.useEffect)((function(){se(),ue(),null!=O&&O.linkId&&y("education.getInviteLinkPreview",{link_id:O.linkId,v:"5.126"},{grouping:!1}).then((function(e){j(!0),x(yo({},e)),p(Object(Ze.c)({linkId:O.linkId,isLoaded:!0,preview:e})),p(Object(Yn.h)({country:e.school.country,city:e.school.city,school:e.school,role:e.invite_link.role,classes:e.grades}))})).catch((function(e){j(!1),[Le.l,Xa.g,Le.i].includes(null==e?void 0:e.error_code)?(x(void 0),g(xe.i.WRONG_INVITE)):_(e.error_text)}))}),[null==O?void 0:O.linkId,null==w?void 0:w.signupRequired,b()]),Object(r.useEffect)((function(){return window.addEventListener("scroll",se),window.addEventListener("scroll",ue),function(){window.removeEventListener("scroll",se),window.removeEventListener("scroll",ue)}})),a.a.createElement("div",{className:k?"RegistrationLandingPromo":"Promo","data-mode":l?"mobile":d?"tablet":"desktop"},k?a.a.createElement("div",{className:"RegistrationLanding"},a.a.createElement("div",{className:"RegistrationLanding__center"},a.a.createElement("div",{className:"RegistrationLanding__container"},a.a.createElement("div",{className:"RegistrationLanding__logo"}),a.a.createElement("div",{className:"RegistrationLanding__title"},ae&&m("vkui_edu_registration_invite_subtitle"),!ae&&m("vkui_edu_welcome_to").replace("{org}",ce.toLowerCase())),a.a.createElement("div",{className:"RegistrationLanding__option"},m("vkui_edu_welcome_to_school_where"),": ",(null==N||null===(t=N.school)||void 0===t?void 0:t.name)||""),a.a.createElement("div",{className:"RegistrationLanding__option"},m("vkui_edu_welcome_to_school_role"),":"," ",ae?a.a.createElement(a.a.Fragment,null,v(null==N||null===(n=N.grades)||void 0===n?void 0:n.length,"vkui_edu_welcome_to_school_role_desc").replace(/{role}/,(null==N||null===(i=N.invite_link)||void 0===i?void 0:i.role)===tr.a.TEACHER?m("vkui_edu_member_role_teacher").toLowerCase():m("vkui_edu_member_role_pupil").toLowerCase()).replace(/{class}/,null!=N&&N.grades?null==N?void 0:N.grades.map((function(e){return e.title})).join(", "):"")):a.a.createElement(a.a.Fragment,null,m("vkui_edu_member_role_employee").toLowerCase())),a.a.createElement("div",{className:"RegistrationLanding__note"},a.a.createElement(Ja.a,null,m(Object(Ue.a)(ie,"welcome_required_text")))),a.a.createElement("div",{className:"RegistrationLanding__buttons"},a.a.createElement(I.j,{mode:"primary",size:"l",className:"RegistrationLanding__button RegistrationLanding__button--submit",onClick:o},m("vkui_edu_promo_submit")),!1)))):a.a.createElement("div",{className:"PromoLanding"},a.a.createElement("div",{className:Object(I.Lb)({PromoHeader:!0,"PromoHeader--bright":U,"PromoHeader--dark-blue":!U&&Q}),ref:R},a.a.createElement("div",{className:"PromoHeader__container"},a.a.createElement("div",{className:"PromoHeader__logo"}),(f||Q)&&a.a.createElement("div",{className:"PromoHeader__menu"},te.map((function(e){var t=e.name,n=e.id,r=e.active,i=e.onClick,o=e.className;return a.a.createElement("a",{href:"#".concat(n),key:n,onClick:i,className:Object(I.Lb)(A()({"PromoHeader__menu-item":!0,"PromoHeader__menu-item--active":r},o,!!o))},t)}))),(d||l||q)&&a.a.createElement("div",{className:"PromoHeader__aside"},q&&!l&&a.a.createElement(I.j,{size:"compact"===u?"m":"l",className:"PromoHeader__action",onClick:function(){Object(ti.c)(fo.a.RegistrationButtonClick),o()}},m("vkui_edu_promo_submit")),(d||l)&&a.a.createElement(I.J,{icon:Q?a.a.createElement(qa.a,{fill:le(U)}):a.a.createElement(Qa,{fill:le(U)}),className:"PromoHeader__burger",onClick:function(){return J(!Q)}})))),Q&&d&&a.a.createElement("div",{className:"Promo__menu-overlay"}),a.a.createElement("header",{className:"Promo__hero"},a.a.createElement("div",{className:"Promo__container"},a.a.createElement(Ja.a,{Component:"h1",className:"Promo__heroTitle"},m("vkui_edu_landing_title")),a.a.createElement(Ja.a,{Component:"div",className:"Promo__heroText"},m("vkui_edu_landing_subtitle")),a.a.createElement("div",{className:"Promo__heroActions",ref:M},a.a.createElement(I.j,{size:"compact"===u?"m":"l",className:"PromoAction",mode:"overlay_primary",onClick:function(){Object(ti.c)(fo.a.RegistrationButtonClick),o()}},m("vkui_edu_promo_submit"))))),a.a.createElement(Di,null),a.a.createElement(zi,{ref:L}),a.a.createElement(no,{viewWidth:s}),a.a.createElement(to,null),a.a.createElement(po,{id:"how-to-connect",ref:B,onStart:o}),a.a.createElement(Bi,{id:"faq",ref:F}),a.a.createElement(Pi,{viewWidth:s})),k&&a.a.createElement(go,{isSticky:!1,className:"Promo__footer"}))})),Oo=function(e){var t=e.id,n=e.params.broadcast,i=Object(I.Ob)().viewWidth,o=Object(wr.a)().getBroadcastVideo,c=Object(r.useMemo)((function(){return[Et.d.OS===Et.c.IOS,Et.d.OS===Et.c.ANDROID,Et.d.isIPad,!Object(yt.a)(i),T.a.isWebView()].some(Boolean)}),[i]);return Object(r.useEffect)((function(){n&&!c&&o(n)}),[c,n]),a.a.createElement(I.T,{id:t},a.a.createElement(Eo,null))},wo=(n(1073),n(1333)),Co=!1;function So(){Co||(Object(we.a)(new Ee.a({id:"smartphone_outline_28",viewBox:"0 0 28 28",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="smartphone_outline_28"><g fill="currentColor"><path d="M13 20a1 1 0 100 2h2a1 1 0 100-2z" /><path clip-rule="evenodd" d="M6 8.4c0-2.24 0-3.36.436-4.216a4 4 0 011.748-1.748C9.04 2 10.16 2 12.4 2h3.2c2.24 0 3.36 0 4.216.436a4 4 0 011.748 1.748C22 5.04 22 6.16 22 8.4v11.2c0 2.24 0 3.36-.436 4.216a4 4 0 01-1.748 1.748C18.96 26 17.84 26 15.6 26h-3.2c-2.24 0-3.36 0-4.216-.436a4 4 0 01-1.748-1.748C6 22.96 6 21.84 6 19.6zM12.4 4h3.2c1.153 0 1.898.002 2.464.048.544.044.745.12.844.17a2 2 0 01.874.874c.05.099.126.3.17.844.046.566.048 1.31.048 2.464v11.2c0 1.153-.002 1.898-.048 2.464-.044.544-.12.745-.17.844a2 2 0 01-.874.874c-.099.05-.3.126-.844.17-.566.046-1.31.048-2.464.048h-3.2c-1.153 0-1.898-.002-2.464-.048-.544-.044-.745-.12-.844-.17a2 2 0 01-.874-.874c-.05-.099-.126-.3-.17-.844C8.002 21.498 8 20.754 8 19.6V8.4c0-1.153.002-1.898.048-2.464.044-.544.12-.745.17-.844a2 2 0 01.874-.874c.099-.05.3-.126.844-.17C10.502 4.002 11.246 4 12.4 4z" fill-rule="evenodd" /></g></symbol>'})),Co=!0)}var Ao=function(e){return Object(we.b)((function(){So()}),[]),a.a.createElement(Ce.a,Object(Oe.assign)({},e,{viewBox:"0 0 28 28",id:"smartphone_outline_28",width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};Ao.mountIcon=So;var ko=Ao,jo=n(240),To=n(269),Io=n(649),Po=n.n(Io),Do=n(650),No=n.n(Do),xo=n(651),Ro=n.n(xo),Mo=n(652),Lo=n.n(Mo),Bo=n(653),Fo=n.n(Bo),Ho=n(654),Vo=n.n(Ho),Uo=n(655),zo=n.n(Uo),Go=n(656),Wo=n.n(Go),qo=n(657),Ko=n.n(qo),Yo=n(658),Zo=n.n(Yo),Qo=n(479),Jo=n.n(Qo),Xo=n(659),$o=n.n(Xo),ec=function(e){var t=e.className,n=Object(P.c)().getLangKey;return a.a.createElement("picture",{className:t},a.a.createElement("source",{type:"image/webp",media:"(max-width: 480px)",srcSet:"\n                  ".concat(Po.a,",\n                  ").concat(No.a," 2x\n                ")}),a.a.createElement("source",{media:"(max-width: 768px)",type:"image/webp",srcSet:"\n                  ".concat(Ro.a,",\n                  ").concat(Lo.a," 2x\n                ")}),a.a.createElement("source",{type:"image/webp",srcSet:"\n                  ".concat(Fo.a,",\n                  ").concat(Vo.a," 2x\n                ")}),a.a.createElement("source",{media:"(max-width: 480px)",srcSet:"\n                  ".concat(zo.a,",\n                  ").concat(Wo.a," 2x\n                ")}),a.a.createElement("source",{media:"(max-width: 768px)",srcSet:"\n                  ".concat(Ko.a,",\n                  ").concat(Zo.a," 2x\n                ")}),a.a.createElement("img",{className:"DownloadApp__screenPicture",src:Jo.a,srcSet:"\n                  ".concat(Jo.a,",\n                  ").concat($o.a," 2x\n                "),alt:n("vkui_edu_promo_icee")}))},tc=function(e){var t=e.id,n=Object(P.c)().getLangKey,i=Object(Xe.a)().showSnackbar,o=Object(jt.a)().go,c=!Et.d.isMobile,s=Et.d.isMobile,u=function(e){return n("vkui_edu_download").replace("{platform}",e)},l=function(e){return n("vkui_edu_copy_link_for_platform").replace("{platform}",e)},d=function(e){return n("vkui_edu_sferum_for_platform").replace("{platform}",e)},f=Object(kt.c)(n),p=Object(r.useRef)(f[0]);Et.d.OS!==Et.c.MAC&&Et.d.OS!==Et.c.LINUX||(p.current=f.find((function(e){return e.type===Et.d.OS})));var h=function(e){o(xe.i.DOWNLOAD_APP_MODAL,{pladformType:e})},m=Object(r.useRef)(null),v=Object(r.useState)("deb"),g=me()(v,2),b=g[0],_=g[1],y=Object(r.useState)(Et.a.X86),E=me()(y,2),O=E[0],w=E[1],C=Ct.f[Et.c.LINUX][b][O],S=function(e){_(e.currentTarget.value)},A=function(e){w(e.currentTarget.value)};Object(r.useEffect)((function(){C=Ct.f[Et.c.LINUX][b][O]}),[b,O]);var k=function(e){Object(Ir.a)(e).then((function(){i(n("vkui_edu_link_copied"),{before:a.a.createElement(I.h,{size:24,style:{background:"var(--accent)"}},a.a.createElement(ba.a,{fill:"#fff",width:14,height:14})),duration:1e3})}))},j=function(e){k(e.currentTarget.getAttribute("data-link"))},T=Object(kt.e)(n);return a.a.createElement(I.T,{id:t},a.a.createElement("div",{className:Object(I.Lb)("DownloadApp",{"DownloadApp--mobileView":s})},a.a.createElement("section",{className:"DownloadApp__main"},a.a.createElement("div",{className:"DownloadApp__container DownloadApp__mainContainer"},a.a.createElement("a",{href:xe.d.buildPath(xe.a)},a.a.createElement(Me.a,{className:"DownloadApp__logo"})),c&&a.a.createElement("div",{className:"DownloadApp__title"},n("vkui_edu_promo_icee")))),a.a.createElement("section",{className:"DownloadApp__platformGroups"},a.a.createElement("div",{className:"DownloadApp__container DownloadApp__platformGroupContainer"},a.a.createElement("div",{className:"DownloadApp__platformGroup DownloadApp__platformGroup--desktop"},a.a.createElement(wo.a,{className:"DownloadApp__platformGroupIcon"}),a.a.createElement("div",{className:"DownloadApp__platformGroupTitle"},n("vkui_edu_download_desktop_app_title")),a.a.createElement("div",{className:"DownloadApp__platformGroupInfo"},n("vkui_edu_download_desktop_app_description")),c&&a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"DownloadApp__platformGroupButtons"},a.a.createElement("div",{className:"DownloadApp__dropdownWrapper"},a.a.createElement("div",{className:"DownloadApp__platformGroupButton",onClick:function(){var e;(e=p.current).type!==Et.c.LINUX?Object(Ot.a)(e.url,e.filename):window.scrollTo({top:m.current.offsetTop-20,behavior:"smooth"})}},p.current.type!==Et.c.LINUX&&Object(kt.a)(p.current),p.current.type===Et.c.LINUX?n("vkui_edu_choose_platform"):p.current.title))),a.a.createElement("div",{className:"DownloadApp__platformGroupCaption"},T()))),a.a.createElement("div",{className:"DownloadApp__platformGroup DownloadApp__platformGroup--mobile"},a.a.createElement(ko,{className:"DownloadApp__platformGroupIcon"}),a.a.createElement("div",{className:"DownloadApp__platformGroupTitle"},n("vkui_edu_download_mobile_title")),a.a.createElement("div",{className:"DownloadApp__platformGroupInfo"},n("vkui_edu_download_mobile_description")),a.a.createElement("div",{className:"DownloadApp__platformGroupButtons"},a.a.createElement("div",{className:Object(I.Lb)("DownloadApp__platformGroupButton",{"DownloadApp__platformGroupButton--secondary":Et.d.OS!==Et.c.IOS})},a.a.createElement("a",{href:Ct.b,target:"_blank",rel:"noreferrer",className:"DownloadApp__platformGroupLink"},a.a.createElement("div",{className:"DownloadApp__platformGroupLinkIcon DownloadApp__platformGroupLinkIcon--appStore"})),c&&a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"DownloadApp__platformGroupButtonDelimiter"}),a.a.createElement("div",{className:"DownloadApp__platformGroupLink DownloadApp__platformGroupLink--qrCode",onClick:function(){return h(Et.c.IOS)}},a.a.createElement(St.a,null)))),a.a.createElement("div",{className:Object(I.Lb)("DownloadApp__platformGroupButton",{"DownloadApp__platformGroupButton--secondary":Et.d.OS!==Et.c.ANDROID})},a.a.createElement("a",{href:Ct.i,target:"_blank",rel:"noreferrer",className:"DownloadApp__platformGroupLink"},a.a.createElement("div",{className:"DownloadApp__platformGroupLinkIcon DownloadApp__platformGroupLinkIcon--playMarket"})),c&&a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"DownloadApp__platformGroupButtonDelimiter"}),a.a.createElement("div",{className:"DownloadApp__platformGroupLink DownloadApp__platformGroupLink--qrCode",onClick:function(){return h(Et.c.ANDROID)}},a.a.createElement(St.a,null))))),a.a.createElement("div",{className:"DownloadApp__platformGroupCaption"},n("vkui_edu_available_mobile_platform"))))),a.a.createElement("section",{className:"DownloadApp__allPlatforms"},c&&a.a.createElement("div",{className:"DownloadApp__container"},a.a.createElement("div",{className:"DownloadApp__allPlatformsTitle"},n("vkui_edu_all_platform_title"))),a.a.createElement("div",{className:"DownloadApp__container DownloadApp__allPlatformContainer"},a.a.createElement("div",{className:"DownloadApp__platform"},a.a.createElement(To.a,{className:"DownloadApp__platformIcon DownloadApp__platformIcon--windows",width:48,height:48}),a.a.createElement("div",{className:"DownloadApp__platformInfo"},a.a.createElement("div",{className:"DownloadApp__platformTitle"},d("Windows")),a.a.createElement("div",{className:"DownloadApp__platformSystemInfo"},T(Et.c.WINDOWS)),c&&a.a.createElement("a",{href:Ct.f[Et.c.WINDOWS],target:"_blank",rel:"noreferrer",className:"DownloadApp__platformLink DownloadApp__platformDownloadLink"},u("Windows")),s&&a.a.createElement("div",{className:"DownloadApp__platformLink DownloadApp__platformCopyLink","data-link":Ct.f[Et.c.WINDOWS],onClick:j},l("Windows")))),a.a.createElement("div",{className:"DownloadApp__platform"},a.a.createElement(jo.a,{className:"DownloadApp__platformIcon",width:48,height:48}),a.a.createElement("div",{className:"DownloadApp__platformInfo"},a.a.createElement("div",{className:"DownloadApp__platformTitle"},d("Mac OS")),a.a.createElement("div",{className:"DownloadApp__platformSystemInfo"},T(Et.c.MAC)),c&&a.a.createElement("a",{href:Ct.f[Et.c.MAC],target:"_blank",rel:"noreferrer",className:"DownloadApp__platformLink DownloadApp__platformDownloadLink"},u("Mac OS")),s&&a.a.createElement("div",{className:"DownloadApp__platformLink DownloadApp__platformCopyLink","data-link":Ct.f[Et.c.MAC],onClick:j},l("Mac OS")))),a.a.createElement("div",{className:"DownloadApp__platform DownloadApp__platform--linux",ref:m},a.a.createElement("div",{className:"DownloadApp__platformIcon DownloadApp__platformIcon--linux"}),a.a.createElement("div",{className:"DownloadApp__platformInfo"},a.a.createElement("div",{className:"DownloadApp__platformTitle"},d("Linux")),a.a.createElement("div",{className:"DownloadApp__platformSystemInfo"},T(Et.c.LINUX)),a.a.createElement("div",{className:"DownloadApp__platformSettings"},a.a.createElement(I.w,{top:n("vkui_edu_linux_type")},a.a.createElement(I.gb,{name:"type",value:"deb",onChange:S,defaultChecked:!0},n("vkui_edu_linux_deb_type_name")),a.a.createElement(I.gb,{name:"type",value:"rpm",onChange:S},n("vkui_edu_linux_rpm_type_name"))),a.a.createElement(I.w,{top:n("vkui_edu_arch_os")},a.a.createElement(I.gb,{name:"arch",value:Et.a.X86,onChange:A,defaultChecked:!0},n("vkui_edu_32_bit_os")),a.a.createElement(I.gb,{name:"arch",value:Et.a.X64,onChange:A},n("vkui_edu_64_bit_os")))),c&&a.a.createElement("a",{href:C,className:"DownloadApp__platformLink DownloadApp__platformDownloadLink"},u("Linux")),s&&a.a.createElement("div",{className:"DownloadApp__platformLink DownloadApp__platformCopyLink",onClick:function(){k(C)}},l("Linux")))))),a.a.createElement("section",{className:"DownloadApp__screen"},a.a.createElement("div",{className:"DownloadApp__container"},a.a.createElement(ec,{className:"DownloadApp__screenPicture"}))),a.a.createElement(go,null)))},nc=n(1335),rc=!1;function ac(){rc||(Object(we.a)(new Ee.a({id:"link_24",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="link_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path d="M16.544 9.193L7.096 18.64a1.228 1.228 0 01-1.736-1.736l9.447-9.448H8.93A1.228 1.228 0 118.93 5h8.842C18.45 5 19 5.55 19 6.228v8.842a1.228 1.228 0 11-2.456 0V9.193z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),rc=!0)}var ic=function(e){return Object(we.b)((function(){ac()}),[]),a.a.createElement(Ce.a,Object(Oe.assign)({},e,{viewBox:"0 0 24 24",id:"link_24",width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};ic.mountIcon=ac;var oc=ic,cc=n(457),sc=n(407),uc=(n(1074),function(e){var t=e.id,n=e.callId,i=Object(P.c)(),o=i.getLangKey,c=i.replaceVar,s=Object(zn.b)().apiRequest,u=Object(vr.a)().isAuthorized,l=Object(jt.a)().go,d=Object(Na.a)(),f=d.showAlertError,p=d.showAlertErrorMessage,h=function(){var e="https://".concat(wt.c.call_link_host,"?call_link=").concat(n);Promise.resolve().then((function(){return u()?Object($t.d)(s,e):Object($t.a)(s,e)})).then((function(e){var t=e.join_link,r=e.peerId;l(xe.i.MOBILE_JOIN_CALL,{joinLink:t,peerId:r,callId:n})})).catch((function(e){e.error_code&&e.error_code===Le.c?p(o("vkui_edu_error_calls_not_found")):f(e)}))};return Object(r.useEffect)((function(){h()}),[]),a.a.createElement(I.T,{id:t,className:"JoinCallPageMobile"},a.a.createElement("div",{className:"JoinCallPageMobile__header JoinCallPageMobile__padding"},a.a.createElement("span",{onClick:function(){return l(xe.a)}},a.a.createElement(Me.a,null))),a.a.createElement("div",{className:"JoinCallPageMobile__main JoinCallPageMobile__padding"},a.a.createElement("div",{className:"JoinCallPageMobile__separator"}),a.a.createElement(I.Fb,{level:"1",weight:"regular",className:"JoinCallPageMobile__title"},c(o("vkui_edu_join_call_page_mobile_title"),"action",a.a.createElement(a.a.Fragment,null,a.a.createElement("br",null),a.a.createElement("span",{className:"JoinCallPageMobile__highlighter"},"«",o("vkui_edu_calls_join_lesson"),"»")))),a.a.createElement("div",{className:"JoinCallPageMobile__separator"}),a.a.createElement(I.j,{size:"l",mode:"secondary",before:a.a.createElement(nr.a,null),onClick:h,stretched:!0},o("vkui_edu_calls_join_lesson")),a.a.createElement("div",{className:"JoinCallPageMobile__separator JoinCallPageMobile__separator--sm"}),a.a.createElement(I.j,{size:"l",mode:"tertiary",onClick:function(){return l(xe.a)},className:"JoinCallPageMobile__back",stretched:!0},o("vkui_edu_back_to_main"))),a.a.createElement("div",{className:"JoinCallPageMobile__separator"}),a.a.createElement(go,null))}),lc=(n(1075),function(e){var t=e.id,n=e.callId,i=Object(P.c)().getLangKey,o=Object(Ve.b)(),c=o.accountInfo,s=o.callsLib,u=Object(jt.a)().go,l=Object(vr.a)().isAuthorized,d=Object(Xe.a)().showSnackbar,f=Object(Na.a)(),p=f.showAlertError,h=f.showAlertErrorMessage,m=Object(zn.b)().apiRequest,v=!0===Object(r.useRef)(null!==Object(Be.a)(Le.A)).current,g=Object(r.useState)(!v),b=me()(g,2),_=b[0],y=b[1],E=Object(r.useState)(null),O=me()(E,2),w=O[0],C=O[1],S=Object(r.useRef)(null);Et.d.OS===Et.c.MAC?S.current={url:Ct.f[Et.c.MAC],filename:Ct.g[Et.c.MAC]}:Et.d.OS===Et.c.WINDOWS&&(S.current={url:Ct.f[Et.c.WINDOWS],filename:Ct.g[Et.c.WINDOWS]});var A=null!==S.current,k=Object(Jn.j)(),j=Object(r.useState)(!A&&!v),T=me()(j,2),D=T[0],N=T[1],x=function(e){!function(e){switch(e.error_code){case Le.c:h(i("vkui_edu_error_calls_not_found"));break;case Le.f:h(i("vkui_edu_error_calls_invalid_join_link"));break;default:p(e)}}(e),y(!1)},R=function(){Object(Be.c)(Le.A,"true")};Object(r.useEffect)((function(){l()&&(null==c||!c.id)||Et.d.isMobile||Et.d.isIPad||Promise.resolve().then((function(){if(n){var e="https://".concat(wt.c.call_link_host,"?call_link=").concat(n);Promise.resolve().then((function(){return l()?Object($t.d)(m,e):Object($t.a)(m,e)})).then((function(e){var t=e.join_link,r=e.peerId,o=l()?c.id:0;C({join_link:t,peerId:r}),Object(cc.a)(Object(sc.a)({joinLink:t,userId:o,callId:n})).then((function(){y(!1)})).catch((function(){var e,t;A&&!v?(e=S.current.url,t=S.current.filename,Object(Qi.c)(Et.d.OS,!0),d(a.a.createElement(Ja.a,null,i("vkui_edu_download_file_snippet").replace("{filename}",t)),{before:Et.d.isChromeBased&&a.a.createElement(nc.a,{className:"JoinCallModal__snackbarIcon"}),duration:1e4,onClose:function(){return null}}),R(),Object(Ot.a)(e,t),setTimeout((function(){y(!1)}),5e3)):y(!1)}))})).catch(x)}})).catch(x)}),[l(),null==c?void 0:c.id]);var M=function(){if(null!=w){var e=l()?null==c?void 0:c.id:0;Object(cc.a)(Object(sc.a)({joinLink:w.join_link,userId:e,callId:n}))}else h(i("vkui_edu_error_calls_not_found"))};return Et.d.isMobile||Et.d.isIPad?a.a.createElement(uc,{id:t,callId:n}):a.a.createElement(I.T,{id:t},n&&a.a.createElement("div",{className:"JoinCallPage"},a.a.createElement("div",{className:"JoinCallPage__main"},a.a.createElement("div",{className:"JoinCallPage__container JoinCallPage__padding JoinPage__mainContainer"},a.a.createElement("a",{href:xe.d.buildPath(xe.a)},a.a.createElement(Me.a,{className:"JoinCallPage__logo"})),a.a.createElement("div",{className:"JoinCallPage__title"},i("vkui_edu_calls_sferum")),a.a.createElement("div",{className:"JoinCallPage__manual"},_&&A?a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"JoinCallPage__manualTitle"},i("vkui_edu_download_started")),a.a.createElement("div",{className:"JoinCallPage__manualInfo"},i("vkui_edu_wait_until_app_downloaded")),a.a.createElement(I.tb,{size:"large",className:"JoinCallPage__manualAction"}),a.a.createElement("div",{className:"JoinCallPage__manualInfo"},i("vkui_edu_downloading_file").replace("{file}",S.current.filename))):D?a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"JoinCallPage__manualTitle"},i("vkui_edu_download_and_install_app_for_pc")),a.a.createElement(I.j,{size:"l",stretched:!0,before:a.a.createElement(nc.a,null),href:wt.b,target:"_blank",onClick:function(){R(),N(!1)},className:"JoinCallPage__manualAction"},i("vkui_edu_download_app"))):a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"JoinCallPage__manualTitle"},i(v?"vkui_edu_open_app_for_joining_lesson":"vkui_edu_join_call_after_install_app_long")),a.a.createElement(I.j,{size:"l",stretched:!0,mode:"secondary",before:a.a.createElement(nr.a,null),onClick:M,className:"JoinCallPage__manualAction",disabled:null==s?void 0:s.isInActiveCall},i("vkui_edu_calls_join_lesson"))),k&&a.a.createElement(I.L,{Component:"div",onClick:function(){null!=s&&s.isInActiveCall||(null!=w?u(xe.i.CALL_JOIN,{callId:n}):h(i("vkui_edu_error_calls_not_found")))},className:Object(I.Lb)("JoinCallPage__joinInBrowser",{"JoinCallPage__joinInBrowser--disabled":null==s?void 0:s.isInActiveCall}),disabled:null==s?void 0:s.isInActiveCall},i("vkui_edu_calls_join_lesson_in_browser")),a.a.createElement(I.L,{href:xe.d.buildPath(xe.a),className:"JoinCallPage__manualBackLink"},i("vkui_edu_back_to_main"))))),a.a.createElement("div",{className:"JoinCallPage__banners"},a.a.createElement("div",{className:"JoinCallPage__container JoinCallPage__padding JoinCallPage__bannersContainer"},A&&a.a.createElement("a",{href:wt.b,className:"JoinCallPage__banner"},a.a.createElement("span",{className:"JoinCallPage__bannerHeader"},a.a.createElement("span",{className:"JoinCallPage__bannerCaption"},i("vkui_edu_download_app_title")),a.a.createElement(oc,{className:"JoinCallPage__bannerIcon"})),a.a.createElement("span",{className:"JoinCallPage__bannerContainer"},a.a.createElement("span",{className:"JoinCallPage__bannerLogo"}),a.a.createElement("span",{className:"JoinCallPage__bannerInfo"},a.a.createElement("span",{className:"JoinCallPage__bannerTitle"},i("vkui_edu_calls_title")),a.a.createElement("span",{className:"JoinCallPage__bannerNote"},i("vkui_edu_download_app_info"))),a.a.createElement(I.j,{className:"JoinCallPage__bannerButton",mode:"outline"},i("vkui_edu_download_app")))))),a.a.createElement(go,null)))}),dc=function(e){var t=e.id;return Object(r.useEffect)((function(){var e=Object(Be.a)(Le.B),t=null!==e?JSON.parse(e):null;null!==t&&!1===t.downloaded?(Et.d.OS===Et.c.ANDROID?window.location.replace(ei.d):(Et.d.OS===Et.c.IOS||Et.d.isIPad)&&window.location.replace(ei.c),t.downloaded=!0,Object(Be.c)(Le.B,JSON.stringify(t)),setTimeout((function(){window.location.replace(t.url)}),2e3)):null!==t&&!0===t.downloaded&&window.location.replace(t.url)}),[]),a.a.createElement(I.T,{id:t},a.a.createElement(I.U,null))},fc=Object(c.createEffect)((function(){var e=l.b.parse(window.location.search),t=e.code,n=e.provider;return Object(zn.a)("educationForeign.authorize",{code:t,service_id:n},{attempts:5})})),pc=function(){return Object(r.useEffect)((function(){fc().then((function(e){1===e&&(window.opener.postMessage(Le.o,"*"),window.close())})).catch((function(e){(null==e?void 0:e.error_code)===Le.a&&(window.opener.postMessage("".concat(Le.p,":").concat(e.error_text),"*"),window.close())}))}),[]),null};function hc(e){var t=e.defaultPanels,n=e.loader;function i(e){var i=Object(r.useState)(null),o=me()(i,2),c=o[0],s=o[1],u=Object(r.useState)({render:function(){return[]}}),l=me()(u,2),d=l[0],f=l[1],p=function(){n().then((function(e){return f({render:e})}),s)};Object(r.useEffect)(p,[]);var h=t.concat(d.render(e));return!e.activePanel||h.some((function(t){return t.props.id===e.activePanel}))||h.push(a.a.createElement(I.T,{id:e.activePanel,key:e.activePanel},!!c&&a.a.createElement(I.U,null),a.a.createElement(Dn.a,{isLoaded:!!c,customSpinner:a.a.createElement(st.a,{activePanel:e.activePanel}),error:c,onRetry:p}))),a.a.createElement(I.Hb,e,h)}return i.preload=n,i}var mc=hc({defaultPanels:[],loader:function(){return Promise.all([n.e(0),n.e(1),n.e(3),n.e(11)]).then(n.bind(null,1495)).then((function(e){return e.renderSchoolPanels}))}}),vc=hc({defaultPanels:[],loader:function(){return Promise.all([n.e(0),n.e(1),n.e(9)]).then(n.bind(null,1497)).then((function(e){return e.renderProfilePanels}))}});var gc=n(486),bc=function(){return Promise.all([n.e(0),n.e(1),n.e(8),n.e(3),n.e(10)]).then(n.bind(null,1494)).then((function(e){return e.Modals}))},_c=function(e){var t=Object(r.useState)({render:function(){return null}}),n=me()(t,2),i=n[0],o=n[1],c=Object(Vt.a)(),s=c.showPopout,u=c.hidePopout,l=Object(Na.a)().showAlertError,d=Object(gc.a)().hideModal;return Object(r.useEffect)((function(){e.activeModal&&(s(a.a.createElement(I.kb,null)),bc().then((function(e){u(),o({render:e})}),(function(){u(),d(),l({})})))}),[e.activeModal]),a.a.createElement(i.render,f()({},e,{hideModal:d}))};_c.preload=bc;n(1076);var yc=!1;function Ec(){yc||(Object(we.a)(new Ee.a({id:"cross_shield_outline_24",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="cross_shield_outline_24"><g fill="currentColor"><path clip-rule="evenodd" d="M11.697 2.152a.9.9 0 01.606 0l7 2.5a.9.9 0 01.597.848V13c0 2.85-1.568 5.077-3.243 6.55a11.883 11.883 0 01-2.531 1.71c-.758.374-1.537.64-2.126.64s-1.368-.266-2.126-.64a11.882 11.882 0 01-2.531-1.71C5.668 18.078 4.1 15.85 4.1 13V5.5a.9.9 0 01.597-.848zM5.9 6.134V13c0 2.15 1.182 3.923 2.632 5.2.72.633 1.482 1.12 2.14 1.446.696.344 1.167.454 1.328.454s.632-.11 1.328-.454c.658-.325 1.42-.813 2.14-1.447C16.918 16.923 18.1 15.15 18.1 13V6.134L12 3.956z" fill-rule="evenodd" /><path d="M10.136 8.864a.9.9 0 10-1.272 1.272L10.727 12l-1.863 1.864a.9.9 0 001.272 1.272L12 13.273l1.864 1.863a.9.9 0 001.272-1.272L13.273 12l1.863-1.864a.9.9 0 10-1.272-1.272L12 10.727z" /></g></symbol>'})),yc=!0)}var Oc=function(e){return Object(we.b)((function(){Ec()}),[]),a.a.createElement(Ce.a,Object(Oe.assign)({},e,{viewBox:"0 0 24 24",id:"cross_shield_outline_24",width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};Oc.mountIcon=Ec;var wc=Oc,Cc=!1;function Sc(){Cc||(Object(we.a)(new Ee.a({id:"incognito_outline_28",viewBox:"0 0 28 28",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="incognito_outline_28"><path clip-rule="evenodd" d="M11.284 3h5.432c.56 0 1.035 0 1.428.03.414.03.808.098 1.194.268a3.5 3.5 0 011.474 1.223c.239.348.377.723.484 1.124.101.381.189.848.292 1.398l.007.036L22.33 11H25a1 1 0 110 2H3a1 1 0 110-2h2.67l.735-3.921.007-.036c.103-.55.19-1.017.292-1.398.107-.401.245-.776.484-1.124a3.5 3.5 0 011.474-1.223c.386-.17.78-.238 1.194-.269C10.249 3 10.724 3 11.284 3zm8.345 4.447L20.295 11H7.705l.666-3.553c.112-.595.186-.988.266-1.288.076-.288.141-.42.2-.507a1.5 1.5 0 01.632-.524c.096-.043.239-.082.536-.104C10.315 5 10.715 5 11.32 5h5.36c.606 0 1.005 0 1.315.024.297.022.44.061.536.104a1.5 1.5 0 01.631.524c.06.086.125.22.201.507.08.3.154.693.266 1.288zM5 20a3 3 0 116 0 3 3 0 01-6 0zm3-5a5 5 0 105 5.083 6.046 6.046 0 012 0 5 5 0 10.367-1.966 8.048 8.048 0 00-2.734 0A5.002 5.002 0 008 15zm12 2a3 3 0 100 6 3 3 0 000-6z" fill="currentColor" fill-rule="evenodd" /></symbol>'})),Cc=!0)}var Ac=function(e){return Object(we.b)((function(){Sc()}),[]),a.a.createElement(Ce.a,Object(Oe.assign)({},e,{viewBox:"0 0 28 28",id:"incognito_outline_28",width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};Ac.mountIcon=Sc;var kc=Ac,jc=!1;function Tc(){jc||(Object(we.a)(new Ee.a({id:"user_square_outline_24",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="user_square_outline_24"><g clip-rule="evenodd" fill="currentColor" fill-rule="evenodd"><path d="M12 8.8a1.7 1.7 0 100 3.4 1.7 1.7 0 000-3.4zm-3.5 1.7a3.5 3.5 0 117 0 3.5 3.5 0 01-7 0z" /><path d="M8.228 3.1c-1.57 0-2.32.127-3.082.534a3.647 3.647 0 00-1.512 1.512c-.407.762-.534 1.512-.534 3.082v7.544c0 1.57.127 2.32.534 3.082.348.65.863 1.164 1.512 1.512.762.407 1.512.534 3.082.534h7.544c1.57 0 2.32-.127 3.082-.534a3.646 3.646 0 001.512-1.512c.407-.762.534-1.512.534-3.082V8.228c0-1.57-.127-2.32-.534-3.082a3.647 3.647 0 00-1.512-1.512c-.762-.407-1.512-.534-3.082-.534zm0 1.8c-1.487 0-1.87.128-2.233.322-.336.18-.594.437-.773.773-.194.362-.322.746-.322 2.233v7.544c0 1.487.128 1.87.322 2.233.069.13.15.247.242.354A8.877 8.877 0 0112 15.5a8.877 8.877 0 016.536 2.859c.092-.107.173-.225.242-.354.194-.362.322-.746.322-2.233V8.228c0-1.487-.128-1.87-.322-2.233a1.847 1.847 0 00-.773-.773c-.362-.194-.746-.322-2.233-.322zM12 7a3.5 3.5 0 100 7 3.5 3.5 0 000-7zm-1.7 3.5a1.7 1.7 0 113.4 0 1.7 1.7 0 01-3.4 0zm-2.072 8.6h7.544c.373 0 .676-.008.927-.023A7.072 7.072 0 0012 17.3c-1.801 0-3.446.67-4.699 1.777.251.015.554.023.927.023z" /></g></symbol>'})),jc=!0)}var Ic=function(e){return Object(we.b)((function(){Tc()}),[]),a.a.createElement(Ce.a,Object(Oe.assign)({},e,{viewBox:"0 0 24 24",id:"user_square_outline_24",width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};Ic.mountIcon=Tc;var Pc=Ic,Dc=function(){var e=window.navigator.userAgent,t=e.match(/Chrome\/(\d+)/)||!1,n=e.match(/OPR\/(\d+)/)||!1,i=e.match(/Firefox\/(\d+)/)||!1,o=e.match(/Edg\/(\d+)/)||!1,c=Object(r.useState)(!1),s=me()(c,2),u=s[0],l=s[1],d={width:30,height:30,fill:"var(--icon_outline_medium)"},f={chrome:a.a.createElement("p",{className:"BlockedRequests__paragraph"},a.a.createElement("strong",null,"Google Chrome"),": «Настройки», раздел «Приватность и безопасность», раздел «Файлы cookie и другие данные сайтов», отключить «Отправлять запрет на отслеживание для исходящего трафика»"),opera:a.a.createElement("p",{className:"BlockedRequests__paragraph"},a.a.createElement("strong",null,"Opera"),": «Настройки», «Защита приватности», отключить «Блокировать трекеры»"),firefox:a.a.createElement("p",{className:"BlockedRequests__paragraph"},a.a.createElement("strong",null,"Firefox"),": «Настройки», раздел «Приватность и защита», раздел «Приватность браузера», подраздел «Улучшенная защита от отслеживания», выбрать «Стандартная»"),edge:a.a.createElement("p",{className:"BlockedRequests__paragraph"},a.a.createElement("strong",null,"Edge"),": «Настройки», раздел «Конфиденциальность, поиск и службы», отключить «Блокировка отслеживания»")},p=["chrome","opera","firefox","edge"][[t,n,i,o].reduce((function(e,t,n){return t&&(e=n),e}),0)],h=f[p];delete f[p];var m=function(e){return a.a.createElement(I.k,{weight:"regular",level:"1",className:"BlockedRequests__caption"},e)};return a.a.createElement(I.T,{id:xe.j.BLOCKED_REQUESTS,className:"BlockedRequests"},a.a.createElement(I.U,{left:a.a.createElement(Me.a,{className:"Main__logo"}),className:"MainPanelHeader"}),a.a.createElement(I.l,{mode:"shadow",className:"BlockedRequests__content"},a.a.createElement(I.Fb,{className:"BlockedRequests__title",level:"2",weight:"semibold"},"Не получается открыть Сферум из-за настроек браузера или работы сети."),a.a.createElement(I.E,{className:"BlockedRequests__headline",weight:"medium"},"Что можно сделать:"),a.a.createElement(I.M,null,a.a.createElement(I.pb,{disabled:!0,multiline:!0,className:"BlockedRequests__item",description:m(a.a.createElement(a.a.Fragment,null,h,!u&&a.a.createElement("a",{className:"BlockedRequests__show-other-browsers",onClick:function(){return l(!0)}},"Настройки для других браузеров"),u&&a.a.createElement(a.a.Fragment,null,Object.values(f).map((function(e,t){return a.a.createElement(a.a.Fragment,{key:t},e)}))))),before:a.a.createElement(wc,d)},"Отключить блокировку дополнительных запросов"),a.a.createElement(I.pb,{disabled:!0,multiline:!0,className:"BlockedRequests__item",description:m(a.a.createElement(a.a.Fragment,null,"Браузер может блокировать запросы, если вы находитесь в приватном режиме просмотра сайтов")),before:a.a.createElement(kc,d)},"Закрыть режим инкогнито"),a.a.createElement(I.pb,{disabled:!0,multiline:!0,className:"BlockedRequests__item",description:m(a.a.createElement(a.a.Fragment,null,"Он поможет устранить проблему, если она возникла из-за настроек сети")),before:a.a.createElement(Pc,d)},"Обратиться к администратору сети")),a.a.createElement(I.j,{className:"BlockedRequests__button",size:"m",mode:"secondary",onClick:function(){return window.location.href="//"+window.location.host+window.location.pathname}},"Обновить страницу браузера")))},Nc=n(279),xc=n(314),Rc=function(){var e=Object(P.c)().getLangKey,t=Object(zn.b)().apiRequest,n=Object(Ve.b)(),i=n.contactsBlackList.count,o=n.loaded[xe.j.BLACK_LIST],c=Object(Ve.a)();if(Object(r.useEffect)((function(){t("account.getBanned",{offset:0,fields:"first_name,last_name,photo_200"}).then((function(e){c(Object(xc.c)({count:e.count,items:e.profiles?e.profiles.map(ua.f):[]})),c(Object(Ye.b)(xe.j.BLACK_LIST))}))}),[]),!o)return a.a.createElement(Rt,{activePanel:xe.j.PROFILE});var s=[{route:xe.j.PROFILE,label:e("vkui_edu_profile_main_info")},{route:xe.j.PROFILE_CONTACTS,label:e("vkui_edu_contacts")}];return i>0&&s.push({route:xe.j.BLACK_LIST,label:e("vkui_edu_black_list")}),a.a.createElement(Nc.a,{sections:[s]})},Mc=n(628),Lc=n(161),Bc=n(635),Fc=(n(1081),function(){var e=Object(I.Ob)().viewWidth<I.Ib.SMALL_TABLET,t=Object(P.c)().getLangKey,n=Object(jt.a)().go,r=Object(Ea.a)().isShowOAuthLeadingComponent,i=function(){n(xe.i.CHOOSE_EJD)},o=Object(Je.c)(Ta.a).list,c=Object(Je.c)(ga);return r()&&o.some((function(e){return e.is_connected}))&&!c?e?a.a.createElement(I.C,{className:"ImportEJDsSmall--mobile"},a.a.createElement(I.Fb,{level:"3",weight:"regular",className:"ImportEJDsSmall__title"},t("vkui_edu_ejd_user_connect_title"))," ",a.a.createElement(I.wb,{weight:"regular",className:"ImportEJDsSmall__desc"},t("vkui_edu_ejd_user_connect_desc")),a.a.createElement(I.j,{className:"ImportEJDsSmall__btn",size:"m",mode:"secondary",onClick:i,stretched:!0},t("vkui_edu_ejd_connect_btn_text"))):a.a.createElement(I.q,{className:"ImportEJDsSmall",disabled:!0,mode:e?"shadow":"outline",header:a.a.createElement("div",{className:"ImportEJDsSmall__title"},t("vkui_edu_ejd_user_connect_title")),text:a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"ImportEJDsSmall__desc"},t("vkui_edu_ejd_user_connect_desc")),a.a.createElement(I.j,{className:"ImportEJDsSmall__btn",size:"m",mode:"secondary",onClick:i,stretched:!0},t("vkui_edu_ejd_connect_btn_text")))}):null}),Hc=n(206),Vc=function(e){var t=e.schoolId,n=Object(Ve.b)(),r=n.profileSchools,i=n.menuSchoolRequests,o=[].concat(Ht()(r),Ht()(i)),c=Object(Dt.a)().accountInfo,s=o.some((function(e){return e.id===t})),u=Object(Hc.a)(t).isVertical;if(t&&!s)return null;var l=o.find((function(e){return e.id===t&&e.user_role===tr.a.TEACHER}));return a.a.createElement(a.a.Fragment,null,l&&u&&a.a.createElement(lr,{schoolId:t}),a.a.createElement(It,{showSkeleton:!(null!=c&&c.id)}),a.a.createElement(Pt.a,{showSkeleton:!(null!=c&&c.id)}),a.a.createElement(Ma.a,{name:Ma.b.EJD_1},a.a.createElement(Fc,null)))},Uc=n(631),zc=n(592),Gc=n(593),Wc=n(626),qc=function(){var e=Object(r.useContext)(P.a).getLangKey,t=Object(Ve.a)();return a.a.createElement(Nc.a,{sections:[[{route:xe.j.MESSAGES,label:e("vkui_edu_messages_all"),routeParams:{},onClick:function(){t(Object(Ke.e)({isNewMail:!0,path:"/mail",query:{},url:"/mail"}))}},{route:xe.j.MESSAGES,routeParams:{act:"unread"},label:e("vkui_edu_messages_unread"),onClick:function(){t(Object(Ke.e)({isNewMail:!0,path:"/mail",query:{act:"unread"},url:"/mail?act=unread"}))}},{route:xe.j.MESSAGES,routeParams:{act:"important"},label:e("vkui_edu_messages_starred"),onClick:function(){t(Object(Ke.e)({isNewMail:!0,path:"/mail",query:{act:"important"},url:"/mail?act=important"}))}}]]})},Kc=function(e){var t=e.activePanels,n=e.activeView,i=e.params,o=Object(Ve.b)().profileSchools,c=Object(Hc.a)().isVertical,s=t[n],u=Object(r.useMemo)((function(){return Number(i[xe.d.getState().page].schoolId)||0}),[i]);switch(s){case xe.j.PROFILE:return a.a.createElement(Rc,null);case xe.j.PROFILE_CONTACTS:return a.a.createElement(a.a.Fragment,null,a.a.createElement(Rc,null),a.a.createElement(Mc.b,null));case xe.j.BLACK_LIST:return a.a.createElement(Rc,null);case xe.j.DOCUMENTS:return a.a.createElement(Pt.a,null);case xe.j.SCHOOL_DOCS:return a.a.createElement(a.a.Fragment,null,a.a.createElement(Lc.a,{placeholder:a.a.createElement(pt.a,null),schoolId:u}),a.a.createElement(Bc.a,{schoolId:u}));case xe.j.DASHBOARD:return a.a.createElement(Vc,{schoolId:u});case xe.j.SCHOOL:case xe.j.SCHOOL_EDIT:case xe.j.SCHOOL_INVITE_LINKS:case xe.j.SCHOOL_INVITE_LINK_CREATE:case xe.j.SCHOOL_GRADE_CHATS:case xe.j.SCHOOL_GRADE_TEACHERS:var l=o.some((function(e){return e.id===u}));return a.a.createElement(Lc.a,{placeholder:a.a.createElement(pt.a,{type:s===xe.j.SCHOOL?"default":"long"}),schoolId:u,showPromoCard:!l});case xe.j.SCHOOL_VIDEOS:return a.a.createElement(a.a.Fragment,null,a.a.createElement(Lc.a,{placeholder:a.a.createElement(pt.a,null),schoolId:u}));case xe.j.SCHOOL_LEADERS:case xe.j.SCHOOL_GRADE_INFO:return a.a.createElement(Lc.a,{placeholder:a.a.createElement(pt.a,{type:"long"}),schoolId:u});case xe.j.SCHOOL_ARTICLES:return a.a.createElement(a.a.Fragment,null,a.a.createElement(Lc.a,{placeholder:a.a.createElement(pt.a,null),schoolId:u}),a.a.createElement(Uc.b,null));case xe.j.SCHOOL_MEMBERS:return a.a.createElement(a.a.Fragment,null,a.a.createElement(Lc.a,{placeholder:a.a.createElement(pt.a,null),schoolId:u}),c&&a.a.createElement(zc.a,{schoolId:u}));case xe.j.SCHOOL_CHATS:return a.a.createElement(a.a.Fragment,null,a.a.createElement(Lc.a,{placeholder:a.a.createElement(pt.a,{type:"long"}),schoolId:u}));case xe.j.SCHOOL_REQUESTS:return a.a.createElement(a.a.Fragment,null,a.a.createElement(Lc.a,{placeholder:a.a.createElement(pt.a,{type:"long"}),schoolId:u}),a.a.createElement(Gc.a,{schoolId:u}));case xe.j.SCHOOL_CLASSES:return a.a.createElement(a.a.Fragment,null,a.a.createElement(Lc.a,{placeholder:a.a.createElement(pt.a,null),schoolId:u}),a.a.createElement(Wc.b,{schoolId:u,params:i[xe.j.SCHOOL_CLASSES]}));case xe.j.SCHOOL_MESSAGES:return a.a.createElement(a.a.Fragment,null,a.a.createElement(Nn.a,{compact:!0,schoolId:u}),a.a.createElement(Lc.a,{placeholder:a.a.createElement(dt,null),schoolId:u}));case xe.j.MESSAGES:return a.a.createElement(a.a.Fragment,null,a.a.createElement(Nn.a,{compact:!0}),a.a.createElement(qc,null));case xe.j.SETTINGS:return a.a.createElement(Pt.a,null);case xe.j.SCHOOL_ARTICLES_EDITOR:return null;default:return a.a.createElement(Pt.a,null)}},Yc=Object(r.memo)(Kc),Zc=function(){return a.a.createElement("section",{id:"calls"})},Qc=Object(r.memo)(Zc),Jc=n(162),Xc=n(1366),$c=n(335),es=n(141),ts=Object(c.createEvent)(),ns=Object(c.createEvent)(),rs=Object(c.createEvent)(),as=Object(c.createStore)({popout:null}),is=["placeholder"],os=function(){return n.e(15).then(n.bind(null,1499)).then((function(e){return e.CalendarApiProvider}))},cs=function(e){var t=e.placeholder,n=mo()(e,is),i=Object(r.useState)(null),o=me()(i,2),c=o[0],s=o[1],u=Object(Na.a)().showAlertError;return Object(r.useEffect)((function(){os().then((function(e){s({render:e})}),(function(){u({})}))}),[]),c?a.a.createElement(c.render,n):t};cs.preload=os;var ss=n(371),us=n(280),ls=n(224);function ds(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ds(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ds(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ps,hs=!1,ms=function(){return ps},vs=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}((function(e){var t=e.displayName||e.name||"Component",n=function(t){var n=Object(r.useContext)(Qt);return a.a.createElement(e,f()({},n,t))};return n.displayName="withClientAppId(".concat(t,")"),n}),(function(e){return function(t){y()(r,t);var n=kn(r);function r(e){var t;return h()(this,r),t=n.call(this,e),A()(b()(t),"popStateReloadHandler",(function(){t.state.hasError&&window.location.reload()})),t.state={hasError:!1},window.addEventListener("popstate",t.popStateReloadHandler),t}return v()(r,[{key:"render",value:function(){return a.a.createElement(e,this.props)}}],[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),r}(r.PureComponent)}),(function(e){return function(t){var n=Object(ce.b)();return a.a.createElement(e,f()({},t,{initContext:n}))}}),ve,I.Tb,I.Rb)((function(e){var t,n,i,o=Object(Ve.b)(),s=Object(Ve.a)(),l=Object(Je.c)(es.a),d=Object(Je.c)(as).popout,f=Object(vr.a)(),p=f.isAuthorized,h=f.requestAccessToken,m=f.requestCalendarToken,v=f.getCalendarToken,g=f.getAccessToken,b=f.listenReauth,_=Object(I.Ob)().viewWidth,y=Object(zn.b)(),E=y.apiRequest,O=y.trackStart,w=Object(Nt.a)().getProfileSchools,C=(t=Object(oe.b)().requestLogout,n=Object(P.c)().getLangKey,i=Object(Fn.a)().showActionSheet,{showProfileMenu:function(e){var r=e.currentTarget,o=[{text:n("vkui_edu_profile"),onClick:function(){return xe.d.go(xe.j.PROFILE)},before:a.a.createElement(je,null)},{text:n("vkui_edu_settings"),onClick:function(){return xe.d.go(xe.j.SETTINGS)},before:a.a.createElement(De,null)}];o.push({text:n("vkui_edu_logout_link"),onClick:t,before:a.a.createElement(Xc.a,null)}),i(r,o)}}).showProfileMenu,S=Object(ir.a)(),A=S.initCalls,j=S.getCallsList,D=Object(He.a)().hideSupport,N=Object(Vt.a)().hidePopout,x=Object($c.a)().getUserOnboardingStatus,R=function(){var e=Object(Je.c)(Object(c.combine)([es.a,ss.a])),t=me()(e,2),n=t[0],a=t[1].nps,i=Object(jt.a)().go;return Object(r.useEffect)((function(){a&&setTimeout((function(){null===n.activeModal&&i(xe.i.MARKETING_NPS,{nps:a})}),0)}),[a]),{getPolls:Object(r.useCallback)((function(){T.a.isWebView()||null!==n.activeModal||k.B.getItem(Le.M)||Object(us.b)()}),[])}}().getPolls,M=Object(jt.a)(),L=M.go,B=M.back,F=Object(r.useState)(""),H=me()(F,2),V=H[0],U=H[1],z=Object(Je.c)(ls.b.pending);Object(r.useEffect)((function(){ps=o}),[o]),Object(r.useEffect)((function(){var e;Object(Gt.h)(E),Object(Gt.e)(),null!==(e=l.params)&&void 0!==e&&e.schoolId&&Object(Wt.a)(!1)}),[]);var G,W=Object(r.useState)({hasLocalstorageAuth:Object(Be.a)(Le.y),loading:!0,isRequestsBlocked:null}),q=me()(W,2),K=q[0],Y=q[1],Z=Object(r.useMemo)((function(){return Object(k.e)((function(e){j(e),xe.d.getState().page!==xe.j.DASHBOARD&&Object(Cn.b)()}),1e3)}),[]),Q=function(){return o.accountInfo?Promise.resolve(o.accountInfo):(Object(u.b)(),Promise.all([E("users.get",{fields:"photo_max,crop_photo,has_photo,photo_id"}),E("account.getProfileInfo"),E("education.getUserSchedule"),E("account.getCounters",{filter:"messages"}),E("education.getGradeRequests",{},{grouping:!1}),w()]).then((function(e){var t,n,r=me()(e,5),a=r[0],i=r[1],o=r[2],c=r[3],u=r[4],l=a[0],d=Object(Xt.a)(u),f={id:i.id,firstName:i.first_name,lastName:i.last_name,middleName:i.nick_name,phone:null==i||null===(t=i.contacts)||void 0===t||null===(n=t.mobile_phone)||void 0===n?void 0:n.value,sex:i.sex,bdate:i.bdate,hasPhoto:!!l.has_photo,photo:l.photo_max||"",photoRawId:l.photo_id||Object(tt.a)(l.crop_photo)||"",primaryProfile:{id:i.primary_profile.id,firstName:i.primary_profile.first_name,lastName:i.primary_profile.last_name,photo:i.primary_profile.photo_200},nameRequest:fs({},null==i?void 0:i.name_request),isServiceAccount:i.primary_profile.is_service_account,signupRequired:i.edu_signup_required,schedule:o};return E("messages.getLongPollServer",{external_user_id:l.id}).then((function(e){!function(e,t,n){Sn=function(r){var a=e();"event_empty"===r.type&&Object(Cn.b)(),"incoming_call"===r.type&&Object($t.l)(r,a.calls,n),"event_chat_updated"===r.type&&19===r.updateType&&Object($t.j)(r,a.accountInfo.id,a.calls,t,n),"event_unread_count"===r.type&&n(Object(Ke.g)(r.count))}}(ms,E,s),An(l.id,e.server,e.key,e.ts,ms,E)})),Z(i.id),Object(Jc.a)((function(){s(Object(qe.b)(d)),s(Object(Ke.g)(c.messages||0)),s(Object(Qe.b)(f)),s(Object(Ye.b)(xe.j.SETTINGS))})),T.a.isWebView()||A(i,l),f})))},J=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=e.schoolInviteLinkId;if(n){var r="";s(Object(Ze.c)({linkId:n})),r=p()&&!t?xe.j.PROFILE:xe.j.START,L(r,{invite:n},{replace:!0})}},X=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=e.broadcastVideoId;if(n){var r="";r=p()&&!t?xe.j.DASHBOARD:xe.j.START;var a,i=T.a.isWebView()||!Object(yt.a)(_);i||(a={broadcast:n}),L(r,a,{replace:!0})}},$=function(){O(),Object(ls.b)();var t,n=Q();return(t=l.activeView)===xe.p.SCHOOL?mc.preload():t===xe.p.PROFILE&&vc.preload(),l.activeModal&&_c.preload(),b(),n.then((function(t){var n,r;(Y(fs(fs({},K),{},{loading:!1})),null!=t&&null!==(n=t.primaryProfile)&&void 0!==n&&n.id)&&Object(Gt.c)(null==t||null===(r=t.primaryProfile)||void 0===r?void 0:r.id);Object(Gt.d)(p,h,g),e.broadcastVideoId?X(t.signupRequired):e.schoolInviteLinkId?J(t.signupRequired):t&&t.signupRequired?L(xe.j.START,{},{replace:!0}):e.callInviteLinkId?L(xe.j.JOIN_CALL_PAGE,{callId:e.callInviteLinkId},{replace:!0}):xe.d.getState().page===xe.j.JOIN_CALL_PAGE||(xe.k.includes(xe.d.getState().page)?(L(xe.a,{},{replace:!0}),x(),R()):(x(),R()))}))},ee=function(){Y(fs(fs({},K),{},{hasLocalstorageAuth:"true"})),Object(Be.c)(Le.y,"true"),$()},te=function(e){var t,n,r,a=e.toState,i=e.fromState;if(p()||xe.m.includes(a.page)){var o="popstate"===a.meta.source,c=i.modal||i.page,s=a.modal||a.page;if(null!==(t=a.params)&&void 0!==t&&t.schoolId&&(null===(n=a.params)||void 0===n?void 0:n.schoolId)!==(null===(r=i.params)||void 0===r?void 0:r.schoolId)&&Object(Wt.a)(!1),Object(Wt.b)(c,s,o,!p()),ps.accountInfo){var u=ps.accountInfo.signupRequired?!xe.n.includes(a.page)&&xe.j.START:xe.k.includes(a.page)&&xe.a;if(Z(ps.accountInfo.id),u)return void L(u)}ts({toState:a,fromState:i}),N()}else L(xe.j.START,{},{replace:!0})},ne=function(e){return parseInt(l.params[e].schoolId)||0},re=function(e){return l.activePanels[l.activeView]===e},ae=re(xe.j.START),ie=re(xe.j.JOIN_CALL_PAGE),ce=re(xe.j.DOWNLOAD_APP),se=re(xe.j.DOWNLOAD_MOBILE_APP),ue=re(xe.j.OAUTH),le=re(xe.i.TERMS)||re(xe.i.PRIVACY),de=re(xe.j.ARTICLE)||re(xe.j.SCHOOL_ARTICLES_EDITOR),fe=function(){return ae||le||de||ie||ce||se||ue},pe=function(){return fe()?"100%":"560px"},he=function(){return!fe()},ve=function(){return!fe()},ge=function(e){return!e&&!fe()},be=Object(r.useMemo)((function(){return!K.loading}),[K.loading]),_e=function(e){return e<I.Ib.TABLET||T.a.isWebView()||!!l.isolatedPanel};if(Object(r.useEffect)((function(){var t=setInterval((function(){e.initContext.isAppReady()&&(U("update"),clearInterval(t))}),100)}),[]),Object(r.useEffect)((function(){if(e.initContext.isAppReady()&&!hs)if(hs=!0,xe.d.subscribe(te),p()){if(Object(qt.e)().catch((function(e){Promise.resolve(e)})),v())return void ee();m().then((function(){ee()})).catch((function(){ee()}))}else t=xe.d.getState(),n=t.modal,r=t.page,a=n===xe.i.PRIVACY||n===xe.i.TERMS,Object(Be.b)(Le.y),J(),X(),Y(fs(fs({},K),{},{loading:!1,hasLocalstorageAuth:void 0})),e.callInviteLinkId?L(xe.j.JOIN_CALL_PAGE,{callId:e.callInviteLinkId},{replace:!0}):xe.m.includes(r)||L(xe.j.START,{},{replace:!0}),a&&L(n);var t,n,r,a}),[e.initContext.isAppReady(),V]),G=K.hasLocalstorageAuth?a.a.createElement(Bt,{activePanel:l.activePanels[l.activeView],needSpaced:ve(),contentColWidth:pe(),canVisibleColumn:he(),isOneCol:_e(_),isEpic:ge(e.isEduClientApp)}):a.a.createElement(I.bb,null),!hs||z||!be&&!K.isRequestsBlocked)return G;var ye,Ee=a.a.createElement(_c,{getModalProps:function(e){return K[e]},back:B,activeModal:l.activeModal,getRouteSchoolId:ne,params:l.params}),Oe=function(e){var t=e.params,n=e.onTransition,r=e.back,i=e.activePanels,o=e.history,c=e.getRouteSchoolId,s=[a.a.createElement(Oo,{key:xe.j.START,id:xe.j.START,params:t[xe.j.START]}),a.a.createElement(tc,{key:xe.j.DOWNLOAD_APP,id:xe.j.DOWNLOAD_APP}),a.a.createElement(lc,{key:xe.j.JOIN_CALL_PAGE,id:xe.j.JOIN_CALL_PAGE,callId:t[xe.j.JOIN_CALL_PAGE].callId}),a.a.createElement(dc,{key:xe.j.DOWNLOAD_MOBILE_APP,id:xe.j.DOWNLOAD_MOBILE_APP,params:t[xe.j.DOWNLOAD_MOBILE_APP]})],u=[a.a.createElement(Wa,{key:xe.j.SERVICES,id:xe.j.SERVICES})],l=[a.a.createElement(La,{key:xe.j.DASHBOARD,id:xe.j.DASHBOARD,params:t[xe.j.DASHBOARD]}),a.a.createElement(pc,{key:xe.j.OAUTH,id:xe.j.OAUTH})],d=[a.a.createElement(Ba.a,{key:xe.j.MESSAGES,id:xe.j.MESSAGES,params:t[xe.j.MESSAGES]})],f=[a.a.createElement(Va,{key:xe.j.DOCUMENTS,id:xe.j.DOCUMENTS})];return[a.a.createElement(I.Hb,{id:xe.p.MAIN,key:xe.p.MAIN,activePanel:i[xe.p.MAIN],onTransition:n,onSwipeBack:r,history:o[xe.p.MAIN]},s),a.a.createElement(I.Hb,{id:xe.p.DASHBOARD,key:xe.p.DASHBOARD,activePanel:i[xe.p.DASHBOARD],onTransition:n,onSwipeBack:r,history:o[xe.p.DASHBOARD]},l),a.a.createElement(mc,{id:xe.p.SCHOOL,key:xe.p.SCHOOL,activePanel:i[xe.p.SCHOOL],onTransition:n,onSwipeBack:r,history:o[xe.p.SCHOOL],getRouteSchoolId:c,params:t}),a.a.createElement(I.Hb,{id:xe.p.SERVICES,key:xe.p.SERVICES,activePanel:i[xe.p.SERVICES],onTransition:n,onSwipeBack:r,history:o[xe.p.SERVICES]},u),a.a.createElement(I.Hb,{id:xe.p.MESSAGES,key:xe.p.MESSAGES,activePanel:i[xe.p.MESSAGES],onTransition:n,onSwipeBack:r,history:o[xe.p.MESSAGES]},d),a.a.createElement(I.Hb,{id:xe.p.DOCUMENTS,key:xe.p.DOCUMENTS,activePanel:i[xe.p.DOCUMENTS],onTransition:n,onSwipeBack:r,history:o[xe.p.DOCUMENTS]},f),a.a.createElement(vc,{id:xe.p.PROFILE,key:xe.p.PROFILE,activePanel:i[xe.p.PROFILE],onTransition:n,onSwipeBack:r,history:o[xe.p.PROFILE]})]}({params:l.params,onTransition:rs,back:B,history:l.history,activePanels:l.activePanels,getRouteSchoolId:ne,callInviteLinkId:e.callInviteLinkId}),we=a.a.createElement(I.ib,{id:"rootComponent",activeView:l.activeView,onTransition:ns},Oe);return ge(e.isEduClientApp)&&(we=a.a.createElement(I.u,{className:Object(I.Lb)({"Epic--tabbar":!Mt(_)}),tabbar:Mt(_)?null:a.a.createElement(Ut,{go:L}),activeStory:l.activeView},Oe)),ye=K.isRequestsBlocked?a.a.createElement(Dc,null):_<=I.Ib.MOBILE?function(t,n){var r=Object(yt.b)(_);return a.a.createElement(I.vb,{className:"App__mobileLayout",popout:e.apiErrorPopout||d,modal:n},a.a.createElement(I.ub,{key:"main",width:"100%",animate:r},t,a.a.createElement(Qc,null)))}(we,Ee):_e(_)?function(t,n){return a.a.createElement(I.vb,{className:"App__smallTabletLayout",popout:e.apiErrorPopout||d,modal:n,header:!fe()&&a.a.createElement(I.U,{shadow:!0,separator:!1})},a.a.createElement(I.ub,{key:"main",width:"100%",maxWidth:pe(),spaced:ve()},t,a.a.createElement(Qc,null)))}(we,Ee):_<I.Ib.DESKTOP?function(t,n){var r=Object(xe.f)(l.activePanels.main),i=he();return a.a.createElement(I.vb,{className:"App__desktopLayout",popout:e.apiErrorPopout||d,modal:n,header:!fe()&&a.a.createElement(I.U,{shadow:!0,separator:!1})},i&&a.a.createElement(I.ub,{key:"left",width:"280px",fixed:!0},a.a.createElement(Ge,{id:xe.p.MAIN,activePanel:r})),a.a.createElement(I.ub,{key:"main",width:pe(),spaced:ve()},t,a.a.createElement(Qc,null)))}(we,Ee):function(t,n){var r=he();return a.a.createElement(I.vb,{className:"App__desktopLayout",popout:e.apiErrorPopout||d,modal:n,header:!fe()&&a.a.createElement(I.U,{shadow:!0,separator:!1})},r&&a.a.createElement(I.ub,{key:"left",width:"280px",fixed:!0},a.a.createElement(Ge,{id:"nav"})),a.a.createElement(I.ub,{key:"main",width:pe(),spaced:ve()},t,a.a.createElement(Qc,null)),r&&a.a.createElement(I.ub,{key:"right",width:"320px"},a.a.createElement(I.T,{id:"sidebar"},a.a.createElement(Pn,{onClick:C,params:l.params[l.activeView]}),a.a.createElement(Yc,{activePanels:l.activePanels,activeView:l.activeView,params:l.params}))))}(we,Ee),a.a.createElement(We.a.Provider,{value:{loadMainInfo:Q,startApp:$}},a.a.createElement(cs,{placeholder:G},ye,a.a.createElement(et,null),l.miniapp===xe.i.SUPPORT&&a.a.createElement(zt.a,{onClose:D})))}),{sizeX:!0,viewWidth:!0}),gs=n(325),bs=n(482),_s=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,1496))})),ys=function(){return Object(zn.b)(),a.a.createElement(bs.c,null,a.a.createElement(r.Suspense,{fallback:a.a.createElement("div",null)},a.a.createElement(_s,null)))},Es=Object(Be.a)("education:mocks");function Os(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ws(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Os(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Os(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}es.a.on(ts,(function(e,t){var n=t.toState,r=t.fromState,a=Object(xe.h)(n).view,i=ws({},e.params);if(n.modal?i[n.modal]=n.params:i[n.page]=n.params,null!=r&&r.modal&&null===n.modal){var o=xe.o.find((function(e){return e.name===r.modal}));o&&!1===o.updateUrl&&"go"===n.meta.source&&xe.d.updateUrl(n,{replace:!0})}var c=n.modal===xe.i.SUPPORT;return ws(ws({},e),{},{activeView:a,activeModal:c?null:n.modal,activePanels:ws(ws({},e.activePanels),{},A()({},a,n.page)),options:ws({},es.b),params:i,miniapp:c?n.modal:null})})),es.a.on(ns,(function(e,t){var n,r,a=t.from,i=t.to,o=t.isBack,c=e.history,s=e.params;return ws(ws({},e),{},o?{params:ws(ws({},s),{},A()({},a,{})),history:ws(ws({},c),{},(n={},A()(n,i,c[i]?c[i]:[xe.l[i][0]]),A()(n,a,[xe.l[a][0]]),n))}:{history:ws(ws({},c),{},A()({},i,[null===(r=xe.l[i])||void 0===r?void 0:r[0]]))})})),es.a.on(rs,(function(e,t){var n=t.from,r=t.to,a=t.isBack,i=e.activeView,o=e.history[i],c=Ht()(o||[]);return e.options.replace||(a?c.pop():c.push(r)),ws(ws({},e),{},{params:a?ws(ws({},e.params),{},A()({},n,{})):e.params,history:ws(ws({},e.history),{},A()({},e.activeView,c))})}));var Cs=n(281);as.on(Cs.b,(function(e,t){return{popout:t}})),as.on(Cs.a,(function(){return{popout:null}}));var Ss=n(283);$e.on(Ss.a,(function(e,t){return{snackbarList:[t].concat(Ht()(e.snackbarList))}})),$e.on(Ss.b,(function(e){return{snackbarList:e.snackbarList.slice(1)}}));var As,ks=n(205),js=n(278);!function(e){e.STARTED="started",e.FINISHED="finished",e.UPCOMING="upcoming"}(As||(As={}));var Ts=n(169);function Is(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ps(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Is(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Is(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}js.a.on(ks.b.doneData,(function(e,t){return Ps(Ps({},e),{},{isLoaded:!0,isStarted:t.state===As.STARTED,isFinished:t.state===As.FINISHED,isUpcoming:t.state===As.UPCOMING,hasComments:t.comments.length>0,comments:t.comments.reverse()})})),Object(c.sample)({source:Ts.c.doneData,target:ks.b}),Object(c.sample)({clock:ks.b.failData,target:ks.a});var Ds=n(287),Ns=n(288);function xs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xs(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Ds.a.on(Ts.a,(function(e,t){t.preventDefault();var n=Object(Ns.b)(t.target.value);return Rs(Rs({},e),{},{comment:n,commentLength:n.trim().length,isCommentValid:Object(Ns.c)(n)})})),Ds.a.on(Ts.c.doneData,(function(e){return Rs(Rs({},e),{},{comment:"",commentLength:0})})),Ds.a.on(Ts.c.pending,(function(e,t){return Rs(Rs({},e),{},{loading:t})})),Object(c.guard)({clock:Ts.b,filter:function(e){var t=e.trim();return!!t&&Object(Ns.c)(t)},target:Ts.c});var Ms=n(202),Ls=n(247);Ls.a.on(Ms.a.doneData,(function(e,t){return{id:t.id,ovId:t.ov_id,player:t.player}})),Ls.a.on(Ms.b,(function(e,t){return{id:t.id,ovId:t.ov_id,player:t.player}}));var Bs=n(123),Fs=n(102),Hs=n(317),Vs=n(145);function Us(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Us(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Us(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Bs.a.on(Fs.f,(function(e,t){return{modalType:"create",schoolId:t,selectedListeners:[],selectedSpeakers:[]}})),Bs.a.on(Fs.g,(function(e,t){var n=[Object(Vs.k)(t.dateTimeStart),Object(Vs.k)(t.dateTimeEnd)];return{modalType:"edit",schoolId:t.schoolId,eventId:t.eventId,title:t.title,date:Object(Vs.d)(t.dateTimeStart),time:Object(Vs.o)(n),addReminder:t.addReminder,allowComments:t.allowComments,description:t.description,thumb:t.thumb}})),Bs.a.on(Fs.i,(function(e,t){return zs(zs({},e),t)})),Bs.a.on(Fs.c,(function(e,t){var n=t.target,r=n.name,a=n.value;return zs(zs({},e),{},A()({},r,Object(Hs.c)(a)))})),Bs.a.on(Fs.b,(function(e,t){var n=t.target,r=n.name,a=n.value;return zs(zs({},e),{},A()({},r,Object(Hs.d)(a)))})),Bs.a.on(Fs.a,(function(e,t){var n,r=t.target,a=r.name,i=r.value;return zs(zs({},e),{},(n={},A()(n,a,i),A()(n,"errors",zs(zs({},e.errors),{},A()({},a,void 0))),n))})),Bs.a.on(Fs.d,(function(e,t){var n,r=t.name,a=t.value;return zs(zs({},e),{},(n={},A()(n,r,a),A()(n,"errors",zs(zs({},e.errors),{},A()({},r,void 0))),n))})),Bs.a.on(Fs.j.failData,(function(e,t){return zs(zs({},e),{},{errors:t})})),Object(c.sample)({clock:Fs.h,source:Bs.a,target:Fs.j}),Object(c.sample)({clock:Fs.j.doneData,source:Bs.a,target:Fs.e}),Object(c.sample)({clock:Fs.e.doneData,target:Cn.b}),Object(c.sample)({clock:Fs.e.doneData,target:br});var Gs=n(324),Ws=n(230),qs=n(124);function Ks(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ys(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ks(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ks(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Gs.a.on(Ws.b,(function(e,t){return Ys(Ys({},e),{},{selectedSpeakers:t})})),Gs.a.on(Ws.a.doneData,(function(e,t){return{selectedSpeakers:[],speakers:Object(qs.f)(t.items)}})),Gs.a.on(Ws.c.doneData,(function(e,t){return Ys(Ys({},e),{},{speakers:Object(qs.f)(t.items)})})),Gs.a.on([Ws.a.pending,Ws.c.pending],(function(e,t){return Ys(Ys({},e),{},{loading:t})})),Object(c.sample)({clock:Ws.a.doneData,source:Bs.a,fn:function(e){return e.selectedSpeakers},target:Ws.b});var Zs=n(231),Qs=n(158),Js=n(80);function Xs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xs(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Zs.a.on(Qs.d,(function(e,t){return $s($s({},e),{},{selectedListeners:$s($s({},e.selectedListeners),t)})})),Zs.a.on(Qs.c.doneData,(function(e,t){return $s($s({},e),{},{listeners:$s($s({},e.listeners),{},A()({},Js.a.Grades,Object(qs.e)(t)))})})),Zs.a.on(Qs.a.doneData,(function(e,t){return $s($s({},e),{},{listeners:$s($s({},e.listeners),{},A()({},Js.a.Chats,Object(qs.d)(t.items)))})})),Zs.a.on(Qs.b.doneData,(function(e,t){return $s($s({},e),{},{listeners:$s($s({},e.listeners),{},A()({},Js.a.Contacts,Object(qs.f)(t.items)))})})),Zs.a.on(Qs.c.pending,(function(e,t){return $s($s({},e),{},{loading:$s($s({},e.loading),{},A()({},Js.a.Grades,t))})})),Zs.a.on(Qs.a.pending,(function(e,t){return $s($s({},e),{},{loading:$s($s({},e.loading),{},A()({},Js.a.Chats,t))})})),Zs.a.on(Qs.b.pending,(function(e,t){return $s($s({},e),{},{loading:$s($s({},e.loading),{},A()({},Js.a.Contacts,t))})})),Object(c.sample)({clock:[Qs.a.doneData,Qs.b.doneData,Qs.b.doneData],source:Bs.a,fn:function(e){var t=e.selectedListeners;if(t.length){var n,r=null===(n=t[0])||void 0===n?void 0:n.group_name;return A()({},r,t)}return{}},target:Qs.d});var eu=n(232),tu=n(289),nu=function(e,t){return e.filter((function(e){return t.includes(e.id)})).map((function(e){return"".concat(e.first_name," ").concat(e.last_name)})).join(", ")};function ru(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function au(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ru(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ru(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function iu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ou(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iu(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}tu.a.on(eu.a.doneData,(function(e,t){return au(au({},e),{},{broadcast:Object(qs.c)(t)})})),tu.a.on(eu.b.doneData,(function(e,t){var n=e.broadcast,r=n.creatorId,a=n.speakersIds,i=n.listenersIds,o=n.chat,c=n.grades,s="",u=function(e,t){var n=e.find((function(e){return e.id===t}));return"".concat(n.last_name," ").concat(n.first_name," ").concat(n.maiden_name||"")}(t,r),l=nu(t,[r].concat(Ht()(a)));if(c.length)s=function(e){return e.map((function(e){return e.title})).join(", ")}(c);else if(o)s=Object(H.b)("vkui_edu_broadcast_preview_listeners_chat_title").replace("{value}",o.title);else if(i.length){var d=function(e,t){return e.filter((function(e){return e.id!==t}))}(t,r);s=nu(d,i)}return au(au({},e),{},{creator:u,speakers:l,listeners:s})})),tu.a.on([eu.a.pending,eu.b.pending],(function(e,t){return au(au({},e),{},{loading:t})})),Object(c.sample)({clock:eu.a.doneData,source:tu.a,fn:function(e){var t=e.broadcast;return{creatorId:t.creatorId,speakerIds:t.speakersIds,listenersIds:t.listenersIds}},target:eu.b}),Object(c.sample)({clock:eu.a.doneData,source:tu.a,fn:function(e){return e.broadcast.liveVideo},target:Ms.b}),Mr.a.on(Cn.c,(function(e,t){return ou(ou({},e),{},{items:Object(qs.b)(t.items),count:t.count,isError:!1})})),Mr.a.on(Cn.b.failData,(function(e){return ou(ou({},e),{},{isError:!0})})),Mr.a.on(Cn.b.pending,(function(e,t){return ou(ou({},e),{},{loading:t})})),Mr.a.on(Cn.a.doneData,(function(e,t){return ou(ou({},e),{},{items:e.items.filter((function(e){return e.eventId!==t})),count:e.count-1})})),Object(c.sample)({clock:Cn.a.doneData,target:Cn.b}),gr.watch((function(){Object(Be.c)(Le.x,"true")}));n(680);var cu=n(96),su=n(52),uu=su.a.createStore({graduation_status:{is_graduated:!1}},{name:"schoolProfileInfo/get"}),lu=n(226);Object(c.sample)({clock:[cu.d,uu,lu.b],source:[cu.d,cu.a,uu,lu.b],fn:function(e){var t=me()(e,4),n=t[0],r=t[1],a=t[2].graduation_status.is_graduated,i=t[3];if(!n)return[];var o=[{type:"select",name:"user_id",defaultValue:(null==r?void 0:r.toString())||"0",label:Object(H.b)("vkui_edu_member_role_teacher"),options:[{value:"0",label:Object(H.b)("vkui_edu_member_grade_any")}].concat(Ht()(n.map((function(e){return{value:e.id.toString(),label:"".concat(e.first_name," ").concat(e.last_name)}}))))}];return(null!=i&&i.isAdmin||!a)&&o.push({type:"radio",name:"is_graduated",defaultValue:"0",label:Object(H.b)("vkui_edu_grades_filter_type"),options:[{value:"0",label:Object(H.b)("vkui_edu_grades_filter_learning")},{value:"1",label:Object(H.b)("vkui_edu_grades_filter_graduated")}]}),o},target:cu.b});var du=n(103),fu=n(670),pu=n.n(fu),hu=n(64),mu=n(86),vu=n(40);function gu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gu(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}mu.b.on(du.a,(function(e,t){return bu(bu({},e),{},A()({},t.id,t))})).on(du.c,(function(e,t){return pu()(e,t)})).reset([du.f,du.b.close]),mu.a.on(du.e,(function(e){return!e})).reset(du.b.close),Object(c.sample)({clock:du.d,source:hu.a,fn:function(e){return Kn()(e,"id")},target:mu.b}),Object(c.sample)({clock:vu.g,target:du.f});var _u=n(154),yu=n(113),Eu=n(118);Object(c.sample)({clock:_u.a,source:[mu.b,hu.f],fn:function(e){var t=me()(e,2),n=t[0],r=t[1];return{grade_ids:Object.keys(n),school_id:r}},target:_u.b}),Object(c.sample)({clock:_u.b.doneData,target:Eu.a}),Object(c.sample)({clock:_u.b.doneData,fn:function(){return{is_graduated:"1",user_id:"0"}},target:[yu.e,vu.g]});var Ou=n(69),wu=n(166),Cu=n(323),Su=n(76);function Au(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ku(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Au(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Au(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ju=Object(c.merge)([Ou.g.finally,Ou.h]);wu.c.on(Ou.f,(function(e,t){return ku(ku({},e),t)})).on(Ou.n,(function(e,t){return ku(ku({},e),{},{manager:t[0]})})).on(Ou.o,(function(e,t){return ku(ku({},e),{},{teachers:t})})).reset(ju),wu.a.on(Ou.d.done,(function(e,t){return ku(ku({},e),{},A()({},t.params.gradeId,t.result.filter((function(e){return e.role===tr.a.CLASS_TEACHER}))[0]))})).reset(ju),wu.b.on(Ou.d.done,(function(e,t){return ku(ku({},e),{},A()({},t.params.gradeId,t.result.filter((function(e){return e.role===tr.a.TEACHER}))))})).reset(ju),wu.d.on(Ou.a,(function(e,t){return t})).reset(ju),wu.e.on(Ou.b,(function(e,t){return t})).reset(ju),mu.b.reset(Ou.g.done),Object(c.sample)({source:{gradeIds:mu.b.map((function(e){return Object.values(e).map((function(e){return e.id}))})),schoolId:hu.f},clock:Ou.h,target:Ou.e});var Tu=Object(c.split)(Object(c.sample)({source:{selected:mu.b},clock:Ou.c,fn:function(e){var t=e.selected;return Object.values(t).length>3}}),{confirm:function(e){return e},openManagerSelect:function(e){return!e}});Object(c.forward)({from:Tu.confirm,to:Ou.p}),Object(c.forward)({from:Tu.openManagerSelect,to:Ou.l});var Iu=Object(c.split)(Object(c.sample)({source:{selectedId:wu.d,schoolId:hu.f,members:wu.a},clock:Ou.i,fn:Cu.b}),{new:function(e){return"new"===e.type},selected:function(e){return"selected"===e.type}}),Pu=Object(c.split)(Object(c.sample)({source:{selectedId:wu.e,schoolId:hu.f,members:wu.b},clock:Ou.j,fn:Cu.b}),{new:function(e){return"new"===e.type},selected:function(e){return"selected"===e.type}});Object(c.forward)({from:Iu.selected.map((function(e){return e.selected})),to:Ou.n}),Object(c.forward)({from:[Iu.new.map((function(e){return e.schoolId})),Pu.new.map((function(e){return e.schoolId}))],to:Su.d}),Object(c.forward)({from:Ou.n,to:Ou.m}),Object(c.forward)({from:Pu.selected.map((function(e){return e.selected})),to:Ou.o}),Object(c.sample)({source:{newGrade:wu.c,grades:mu.b,schoolId:hu.f},clock:[Ou.o,Ou.r],fn:function(e){var t=e.newGrade,n=e.grades,r=e.schoolId,a=t.number,i=t.liter,o=t.name,c=t.manager,s=t.teachers;return{schoolId:r,gradeIds:Object.values(n).map((function(e){return e.id})),number:a,liter:i,name:o,managerId:c.id,teacherIds:null==s?void 0:s.map((function(e){return e.id}))}},target:Ou.g}),Object(c.forward)({from:Ou.g.done.map((function(e){var t=e.params;return{gradeId:e.result.id,schoolId:t.schoolId}})),to:Ou.k}),Object(c.sample)({clock:Ou.g.fail,target:Eu.a});var Du=n(191);Object(c.sample)({source:{selected:mu.b.map(Object.values),schoolId:hu.f},clock:Du.a,fn:function(e){var t=e.selected,n=e.schoolId;return{gradeIds:t.map((function(e){return e.id})),schoolId:n}},target:Du.b}),Object(c.forward)({from:Du.b.done,to:vu.g});var Nu=n(671),xu=n.n(Nu),Ru=n(90),Mu=n(189),Lu=n(157);Object(c.sample)({clock:Ru.a,source:mu.b,fn:Mu.f,target:Lu.d}),Object(c.sample)({clock:Ru.a,source:mu.b,fn:Mu.d,target:Lu.b}),Object(c.sample)({clock:Ru.a,source:mu.b,fn:Mu.b,target:Lu.a}),Object(c.sample)({clock:Ru.g,source:[hu.f,Lu.d.map(Object.values),Lu.c],fn:Mu.e,target:Ru.h}),Object(c.sample)({clock:Ru.h.done,source:Lu.d.map(Object.values),fn:xu.a,target:Lu.c}),Object(c.sample)({clock:Ru.h.done,target:vu.g}),Object(c.split)({source:Lu.f,match:function(e){return e?Object(Mu.g)(e)?"success":"errors":null},cases:{success:[Ru.c,Eu.a],errors:Ru.i}});var Bu=su.a.createEffect((function(e){return Object(zn.a)("educationUser.getSchoolProfileInfo",{school_id:e})}));function Fu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fu(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}uu.on(Bu.doneData,(function(e,t){return t})),Object(c.guard)({clock:hu.f,filter:function(e){return!!e},target:Bu}),Object(c.sample)({clock:Bu.doneData,source:[uu,cu.c,lu.b],fn:function(e){var t=me()(e,3),n=t[0].graduation_status.is_graduated,r=t[1],a=t[2];return Hu(Hu({},r),{},{is_graduated:null!=a&&a.isAdmin||!n?"0":r.is_graduated})},target:[yu.e,vu.g]});var Vu=n(249);Object(c.guard)({clock:hu.f,filter:function(e){return!!e},target:Vu.a});var Uu=n(672),zu=n(250);zu.a.on(Su.g,(function(e,t){return t})),zu.c.on(Su.c,(function(e,t){return t})).reset(Su.a.close),zu.b.on(Su.b.doneData,(function(e,t){return t})).reset(Su.a.close),zu.d.on(Su.h,(function(e,t){return t})).on(Su.e,(function(e,t){return e.filter((function(e){return e.id!==t}))})).reset(Su.g),Object(c.sample)({source:{props:Su.a.state,search:zu.c,config:zu.a},clock:[Su.a.open,Object(Uu.debounce)({source:Su.c,timeout:1e3})],fn:function(e){var t=e.props,n=e.search,r=e.config;return{schoolId:t.params.schoolId,search:n,role:r.role}},target:Su.b});var Gu=n(156);Object(c.sample)({clock:Gu.c,target:Gu.d}),Object(c.sample)({clock:Gu.b,target:Gu.d});var Wu=n(474),qu=n(475),Ku=n(216);function Yu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yu(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ju(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qu(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}qu.a.on(Wu.a.doneData,(function(e,t){var n=t.videos.items.map((function(e){return{id:e.id,title:e.title,subtitle:e.subtitle,views:e.views,published_date:e.adding_date,view_url:e.player,photo:{sizes:e.image.map((function(e){return Zu(Zu({},e),{},{type:Ku.c.S})})),album_id:0,date:e.date,id:e.id,owner_id:-e.owner_id,has_tags:!1}}}));return Ju(Ju({},e),{},{teachers:t.teachers.items,students:t.students.items,articles:t.articles.items,videos:n,counters:{docs:t.docs.count,videos:t.videos.count,articles:t.articles.count,grades:t.grades.count,chats:t.chats.count,teachers:t.teachers.count,students:t.students.count}})})),qu.a.on(Wu.a.pending,(function(e,t){return Ju(Ju({},e),{},{isLoaded:!t})}));function Xu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xu(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function el(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tl(e,t,n){return t&&el(e.prototype,t),n&&el(e,n),e}function nl(){return(nl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function rl(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function al(e){return!(!e||"function"!=typeof e.hasOwnProperty||!(e.hasOwnProperty("__ownerID")||e._map&&e._map.hasOwnProperty("__ownerID")))}function il(e,t,n){return Object.keys(e).reduce((function(t,r){var a=""+r;return t.has(a)?t.set(a,n(t.get(a),e[a])):t}),t)}ss.a.on(us.b.doneData,(function(e,t){var n;return function(e){return Array.isArray(e)}(t)?(k.B.setItem(Le.M,String(!0)),e):$u($u({},e),{},{nps:null!==(n=null==t?void 0:t.poll)&&void 0!==n?n:null})})).on(us.c.doneData,(function(e,t){return k.B.setItem(Le.M,String(!0)),$u($u({},e),{},{nps:null})})).on(us.a.doneData,(function(e,t){return k.B.setItem(Le.M,String(!0)),$u($u({},e),{},{completed:!0,nps:null})}));var ol=function(){function e(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n={}),!e||"string"!=typeof e)throw new Error("Expected a string key for Entity, but found "+e+".");var r=n,a=r.idAttribute,i=void 0===a?"id":a,o=r.mergeStrategy,c=void 0===o?function(e,t){return nl({},e,t)}:o,s=r.processStrategy,u=void 0===s?function(e){return nl({},e)}:s,l=r.fallbackStrategy,d=void 0===l?function(e,t){}:l;this._key=e,this._getId="function"==typeof i?i:function(e){return function(t){return al(t)?t.get(e):t[e]}}(i),this._idAttribute=i,this._mergeStrategy=c,this._processStrategy=u,this._fallbackStrategy=d,this.define(t)}var t=e.prototype;return t.define=function(e){this.schema=Object.keys(e).reduce((function(t,n){var r,a=e[n];return nl({},t,((r={})[n]=a,r))}),this.schema||{})},t.getId=function(e,t,n){return this._getId(e,t,n)},t.merge=function(e,t){return this._mergeStrategy(e,t)},t.fallback=function(e,t){return this._fallbackStrategy(e,t)},t.normalize=function(e,t,n,r,a,i){var o=this,c=this.getId(e,t,n),s=this.key;if(s in i||(i[s]={}),c in i[s]||(i[s][c]=[]),i[s][c].some((function(t){return t===e})))return c;i[s][c].push(e);var u=this._processStrategy(e,t,n);return Object.keys(this.schema).forEach((function(t){if(u.hasOwnProperty(t)&&"object"==typeof u[t]){var n=o.schema[t],c="function"==typeof n?n(e):n;u[t]=r(u[t],u,t,c,a,i)}})),a(this,u,e,t,n),c},t.denormalize=function(e,t){var n=this;return al(e)?il(this.schema,e,t):(Object.keys(this.schema).forEach((function(r){if(e.hasOwnProperty(r)){var a=n.schema[r];e[r]=t(e[r],a)}})),e)},tl(e,[{key:"key",get:function(){return this._key}},{key:"idAttribute",get:function(){return this._idAttribute}}]),e}(),cl=function(){function e(e,t){t&&(this._schemaAttribute="string"==typeof t?function(e){return e[t]}:t),this.define(e)}var t=e.prototype;return t.define=function(e){this.schema=e},t.getSchemaAttribute=function(e,t,n){return!this.isSingleSchema&&this._schemaAttribute(e,t,n)},t.inferSchema=function(e,t,n){if(this.isSingleSchema)return this.schema;var r=this.getSchemaAttribute(e,t,n);return this.schema[r]},t.normalizeValue=function(e,t,n,r,a,i){var o=this.inferSchema(e,t,n);if(!o)return e;var c=r(e,t,n,o,a,i);return this.isSingleSchema||null==c?c:{id:c,schema:this.getSchemaAttribute(e,t,n)}},t.denormalizeValue=function(e,t){var n=al(e)?e.get("schema"):e.schema;return this.isSingleSchema||n?t((this.isSingleSchema?void 0:al(e)?e.get("id"):e.id)||e,this.isSingleSchema?this.schema:this.schema[n]):e},tl(e,[{key:"isSingleSchema",get:function(){return!this._schemaAttribute}}]),e}(),sl=function(e){function t(t,n){if(!n)throw new Error('Expected option "schemaAttribute" not found on UnionSchema.');return e.call(this,t,n)||this}rl(t,e);var n=t.prototype;return n.normalize=function(e,t,n,r,a,i){return this.normalizeValue(e,t,n,r,a,i)},n.denormalize=function(e,t){return this.denormalizeValue(e,t)},t}(cl),ul=function(e){function t(){return e.apply(this,arguments)||this}rl(t,e);var n=t.prototype;return n.normalize=function(e,t,n,r,a,i){var o=this;return Object.keys(e).reduce((function(t,n,c){var s,u=e[n];return null!=u?nl({},t,((s={})[n]=o.normalizeValue(u,e,n,r,a,i),s)):t}),{})},n.denormalize=function(e,t){var n=this;return Object.keys(e).reduce((function(r,a){var i,o=e[a];return nl({},r,((i={})[a]=n.denormalizeValue(o,t),i))}),{})},t}(cl),ll=function(e){if(Array.isArray(e)&&e.length>1)throw new Error("Expected schema definition to be a single schema, but found "+e.length+".");return e[0]},dl=function(e){return Array.isArray(e)?e:Object.keys(e).map((function(t){return e[t]}))},fl=function(e,t,n,r,a,i,o){return e=ll(e),dl(t).map((function(t,c){return a(t,n,r,e,i,o)}))},pl=function(e){function t(){return e.apply(this,arguments)||this}rl(t,e);var n=t.prototype;return n.normalize=function(e,t,n,r,a,i){var o=this;return dl(e).map((function(e,c){return o.normalizeValue(e,t,n,r,a,i)})).filter((function(e){return null!=e}))},n.denormalize=function(e,t){var n=this;return e&&e.map?e.map((function(e){return n.denormalizeValue(e,t)})):e},t}(cl),hl=function(e,t,n,r,a,i,o){var c=nl({},t);return Object.keys(e).forEach((function(n){var r=e[n],s="function"==typeof r?r(t):r,u=a(t[n],t,n,s,i,o);null==u?delete c[n]:c[n]=u})),c},ml=function(e,t,n){if(al(t))return il(e,t,n);var r=nl({},t);return Object.keys(e).forEach((function(t){null!=r[t]&&(r[t]=n(r[t],e[t]))})),r},vl=function e(t,n,r,a,i,o){return"object"==typeof t&&t?"object"!=typeof a||a.normalize&&"function"==typeof a.normalize?a.normalize(t,n,r,e,i,o):(Array.isArray(a)?fl:hl)(a,t,n,r,e,i,o):t},gl=new({Array:pl,Entity:ol,Object:function(){function e(e){this.define(e)}var t=e.prototype;return t.define=function(e){this.schema=Object.keys(e).reduce((function(t,n){var r,a=e[n];return nl({},t,((r={})[n]=a,r))}),this.schema||{})},t.normalize=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return hl.apply(void 0,[this.schema].concat(t))},t.denormalize=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ml.apply(void 0,[this.schema].concat(t))},e}(),Union:sl,Values:ul}.Entity)("toggles",{},{idAttribute:"name"}),bl=function(e){return function(e,t){if(!e||"object"!=typeof e)throw new Error('Unexpected input given to normalize. Expected type to be "object", found "'+(null===e?"null":typeof e)+'".');var n={},r=function(e){return function(t,n,r,a,i){var o=t.key,c=t.getId(r,a,i);o in e||(e[o]={});var s=e[o][c];e[o][c]=s?t.merge(s,n):n}}(n);return{entities:n,result:vl(e,e,null,t,r,{})}}(e.toggles,[gl]).entities.toggles};n(388).a.on(ls.b.doneData,(function(e,t){return bl(t)})).reset(ls.b);var _l=l.b.parse(window.location.search);!function(e,t){var n={};t.invite&&(n.fakeEntry=!0);var r=function(){var e,t,n,r=window.location,a=r.hash,i=r.search;if(i.includes("schoolId=-empty")&&(e=xe.j.SCHOOL_EMPTY,t=null),i.includes("m=profile_compact")&&!i.includes("/?p=")){var o=new URLSearchParams(i).get("userId");e=xe.j.BLANK,t=xe.i.PROFILE_COMPACT,n={userId:o}}else if(a.includes("article/")){var c=a.split("article/")[1];e=xe.j.ARTICLE,n={url:c}}else if(a.includes("school-empty"))e=xe.j.SCHOOL_EMPTY;else if(a.includes("school")){var s=a.split("school")[1];e=xe.j.SCHOOL,n={schoolId:s}}else if(a.includes("messages?act=show&peer=")){var u=a.split("messages?act=show&peer=")[1];e=xe.j.MESSAGES,n={act:"show",peer:u}}else if(a.includes("messages?act=show&chat=")){var l=a.split("messages?act=show&chat=")[1];e=xe.j.MESSAGES,n={act:"show",chat:l}}else if(a.includes("messages"))e=xe.j.MESSAGES;else if(a.includes("privacy"))e=xe.j.BLANK,t=xe.i.PRIVACY;else if(a.includes("documents"))e=xe.j.DOCUMENTS;else if(a.includes("profile-compact")){var d=a.split("?userId=")[1];e=xe.j.BLANK,t=xe.i.PROFILE_COMPACT,n={userId:d}}else a.includes("profile")?e=xe.j.PROFILE:a.includes("terms")?(e=xe.j.BLANK,t=xe.i.TERMS):a.includes("settings")&&(e=xe.j.SETTINGS);return{route:e,params:n,modal:t}}(),a=r.route,i=r.params,o=r.modal;a?(e.start(a,i,n),a===xe.j.SCHOOL_EMPTY?e.go(a,i,n):o&&e.go(o,i,n)):e.start(xe.a,{},n)}(xe.d,_l);var yl=function(){location.reload()},El=String(_l.invite||"").trim(),Ol=String(_l.broadcast||"").trim(),wl=String(_l.call_link||"").trim(),Cl=_l.p===xe.j.CALLS_DESKTOP_APP_MAIN,Sl=_l.p===xe.j.CALLS_DESKTOP_APP_AUTH,Al=_l.p===xe.j.CALLS_DESKTOP_APP_AUTH_PLACEHOLDER,kl=Cl||Sl||Al;(!D.b&&!D.f||!Es?Promise.resolve():Promise.all([n.e(12),n.e(16)]).then(n.bind(null,1500)).then((function(e){return e.worker.start({serviceWorker:{url:"".concat(location.origin).concat(location.pathname,"mockServiceWorker.js")}})}))).then((function(){o.a.render(a.a.createElement(pe,{app_id:wt.d.app_id,scope:wt.d.scope,apiVersion:wt.d.apiVersion,apiHost:wt.d.apiHost,apiRequestsMode:"parallel",apiRequestsLimit:20,loginHost:wt.d.loginHost,access_token:wt.d.access_token,supportsBrowserAuth:!0,apiMarker:"param",appTitle:"Сферум",placeholder:null,onUserChange:yl,onRequestAccessToken:T.a.isWebView()?void 0:qt.d,onLogout:function(){return Object(qt.c)().then((function(){return location.reload()}))}},a.a.createElement(I.d,null,a.a.createElement(Jt,null,a.a.createElement(gs.a,null,a.a.createElement(I.f,null,kl?a.a.createElement(ys,null):a.a.createElement(vs,{apiHost:wt.d.apiHost,callInviteLinkId:wl,schoolInviteLinkId:El,broadcastVideoId:Ol})))))),document.getElementById("root"))}))},,function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="chevron_24",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 16 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 24" id="chevron_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h16v24H0z" /><path d="M4.706 7.706a1 1 0 010-1.412l.088-.088a.997.997 0 011.414.002l5.084 5.084a.998.998 0 010 1.416l-5.084 5.084a1.002 1.002 0 01-1.414.002l-.088-.088a.995.995 0 010-1.412L9 12 4.706 7.706z" fill="currentColor" /></g></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 16 24",id:l,width:isNaN(e.width)?16:+e.width,height:isNaN(e.height)?24:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="check_circle_on_24",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="check_circle_on_24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 24c6.627 0 12-5.373 12-12S18.627 0 12 0 0 5.373 0 12s5.373 12 12 12zm6.207-14.793a1 1 0 00-1.414-1.414L10 14.586l-2.793-2.793a1 1 0 00-1.414 1.414l3.5 3.5a1 1 0 001.414 0l7.5-7.5z" fill="currentColor" /></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 24 24",id:l,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="error_circle_24",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="error_circle_24"><path clip-rule="evenodd" d="M24 12c0 6.627-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0s12 5.373 12 12zM10.579 6.498a1.423 1.423 0 112.842 0l-.368 7.003-.006.093a1 1 0 01-.955.905L12 14.5h-.092a1 1 0 01-.955-.906l-.006-.093zM12 16a1.5 1.5 0 100 3 1.5 1.5 0 000-3z" fill="currentColor" fill-rule="evenodd" /></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 24 24",id:l,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return s}));var r,a=n(21),i=n.n(a),o={1:"",2:"rotateY(180deg)",3:"rotate(180deg)",4:"rotate(180deg) rotateY(180deg)",5:"rotate(270deg) rotateY(180deg)",6:"rotate(90deg)",7:"rotate(90deg) rotateY(180deg)",8:"rotate(270deg)"};function c(e){return new Promise((function(t,n){if(window.File&&window.FileReader&&window.FileList&&window.Blob){var r=new FileReader;r.onload=function(e){var n=new window.DataView(e.target.result);if(65496!==n.getUint16(0,!1))return t("");for(var r=n.byteLength,a=2;a<r;){var i=n.getUint16(a,!1);if(a+=2,65505===i){if(1165519206!==n.getUint32(a+=2,!1))return t("");var c=18761===n.getUint16(a+=6,!1);a+=n.getUint32(a+4,c);var s=n.getUint16(a,c);a+=2;for(var u=0;u<s;u++)if(274===n.getUint16(a+12*u,c)){var l=n.getUint16(a+12*u+8,c);return t(o[l]||"")}}else{if(65280!=(65280&i))break;a+=n.getUint16(a,!1)}}return t("")},r.onerror=function(){n(r.error)},r.readAsArrayBuffer(e.slice(0,65536))}else t("")}))}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!Array.isArray(e)||!e.length)return null;for(var r,a=i()(e).sort((function(e,t){return e.width-t.width||e.height-t.height})),o=0;o<a.length;o++){var c=a[o];if(null!==n&&c.width>=t&&c.height>=n){r=c;break}if(c.width>=t){r=c;break}}return r||(r=a[Math.floor(a.length/2)]||a[0]),{url:r.url||r.src,width:r.width,height:r.height}}!function(e){e.S="s",e.M="m",e.X="x",e.O="o",e.P="p",e.Q="q",e.R="r",e.K="k",e.L="l",e.Y="y",e.Z="z",e.C="c",e.W="w",e.H="h",e.N="n",e.J="j"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(79),a=n(384),i=n(37);function o(e,t){Object(i.a)(2,arguments);var n=Object(r.a)(t);return Object(a.a)(e,6e4*n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(44),a=n(37);function i(e,t){Object(a.a)(2,arguments);var n=Object(r.a)(e),i=Object(r.a)(t);return n.getTime()>i.getTime()}},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="messages_outline_28",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 28 28",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="messages_outline_28"><path d="M23.706 9.662C25.17 11.114 26 12.998 26 15a7.25 7.25 0 01-.96 3.599c.101.603.393 1.519.876 2.716l.258.624.057.168.025.098a1.4 1.4 0 01-1.446 1.675c-1.908-.1-3.43-.566-4.54-1.424A9.99 9.99 0 0117 23a9.982 9.982 0 01-3.332-.566 1 1 0 11.668-1.885c.837.296 1.737.451 2.664.451a7.923 7.923 0 003.087-.615 1 1 0 011.1.218c.55.555 1.371.941 2.481 1.14l.284.047c-.574-1.456-.888-2.555-.943-3.343a1 1 0 01.153-.604A5.279 5.279 0 0024 15c0-1.454-.607-2.832-1.702-3.918a1 1 0 011.408-1.42zM11 3c4.943 0 9 3.55 9 8s-4.057 8-9 8a9.99 9.99 0 01-3.27-.544c-1.11.858-2.632 1.323-4.54 1.424a1.4 1.4 0 01-1.446-1.675l.025-.098.057-.168.133-.319c.516-1.244.84-2.209.972-2.864l.03-.157-.151-.279A7.229 7.229 0 012 11c0-4.45 4.057-8 9-8zm0 2c-3.893 0-7 2.718-7 6 0 1.007.29 1.976.838 2.843a1 1 0 01.153.604c-.05.732-.325 1.732-.824 3.036l-.119.307.284-.046c1.11-.2 1.932-.586 2.481-1.141a1 1 0 011.1-.218c.952.403 2 .615 3.087.615 3.893 0 7-2.718 7-6s-3.107-6-7-6z" fill="currentColor" /></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 28 28",id:l,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(386),a=n(276),i=n(37),o=n(277);function c(e,t,n){Object(i.a)(2,arguments);var c=Object(a.a)(e,t)/r.a;return Object(o.a)(null==n?void 0:n.roundingMethod)(c)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return X}));var r=n(399),a={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},i=function(e,t,n){var r,i=a[e];return r="string"==typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},o=n(229),c={date:Object(o.a)({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Object(o.a)({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Object(o.a)({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},s={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},u=function(e,t,n,r){return s[e]},l=n(159),d={ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:Object(l.a)({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Object(l.a)({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Object(l.a)({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Object(l.a)({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Object(l.a)({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},f=n(160),p=n(385),h={code:"en-US",formatDistance:i,formatLong:c,formatRelative:u,localize:d,match:{ordinalNumber:Object(p.a)({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:Object(f.a)({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Object(f.a)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Object(f.a)({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Object(f.a)({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Object(f.a)({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},m=n(79),v=n(384),g=n(37);function b(e,t){Object(g.a)(2,arguments);var n=Object(m.a)(t);return Object(v.a)(e,-n)}var _=n(44),y=n(56),E={y:function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return Object(y.a)("yy"===t?r%100:r,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):Object(y.a)(n+1,2)},d:function(e,t){return Object(y.a)(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return"am"===n?"a.m.":"p.m."}},h:function(e,t){return Object(y.a)(e.getUTCHours()%12||12,t.length)},H:function(e,t){return Object(y.a)(e.getUTCHours(),t.length)},m:function(e,t){return Object(y.a)(e.getUTCMinutes(),t.length)},s:function(e,t){return Object(y.a)(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,r=e.getUTCMilliseconds(),a=Math.floor(r*Math.pow(10,n-3));return Object(y.a)(a,t.length)}};function O(e){Object(g.a)(1,arguments);var t=1,n=Object(_.a)(e),r=n.getUTCDay(),a=(r<t?7:0)+r-t;return n.setUTCDate(n.getUTCDate()-a),n.setUTCHours(0,0,0,0),n}function w(e){Object(g.a)(1,arguments);var t=Object(_.a)(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var a=O(r),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var o=O(i);return t.getTime()>=a.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function C(e){Object(g.a)(1,arguments);var t=w(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var r=O(n);return r}var S=n(187);function A(e,t){Object(g.a)(1,arguments);var n=Object(_.a)(e,t),r=n.getUTCFullYear(),a=t||{},i=a.locale,o=i&&i.options&&i.options.firstWeekContainsDate,c=null==o?1:Object(m.a)(o),s=null==a.firstWeekContainsDate?c:Object(m.a)(a.firstWeekContainsDate);if(!(s>=1&&s<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var u=new Date(0);u.setUTCFullYear(r+1,0,s),u.setUTCHours(0,0,0,0);var l=Object(S.a)(u,t),d=new Date(0);d.setUTCFullYear(r,0,s),d.setUTCHours(0,0,0,0);var f=Object(S.a)(d,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=f.getTime()?r:r-1}function k(e,t){Object(g.a)(1,arguments);var n=t||{},r=n.locale,a=r&&r.options&&r.options.firstWeekContainsDate,i=null==a?1:Object(m.a)(a),o=null==n.firstWeekContainsDate?i:Object(m.a)(n.firstWeekContainsDate),c=A(e,t),s=new Date(0);s.setUTCFullYear(c,0,o),s.setUTCHours(0,0,0,0);var u=Object(S.a)(s,t);return u}var j="midnight",T="noon",I="morning",P="afternoon",D="evening",N="night";function x(e,t){var n=e>0?"-":"+",r=Math.abs(e),a=Math.floor(r/60),i=r%60;if(0===i)return n+String(a);var o=t||"";return n+String(a)+o+Object(y.a)(i,2)}function R(e,t){return e%60==0?(e>0?"-":"+")+Object(y.a)(Math.abs(e)/60,2):M(e,t)}function M(e,t){var n=t||"",r=e>0?"-":"+",a=Math.abs(e);return r+Object(y.a)(Math.floor(a/60),2)+n+Object(y.a)(a%60,2)}var L={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return E.y(e,t)},Y:function(e,t,n,r){var a=A(e,r),i=a>0?a:1-a;if("YY"===t){var o=i%100;return Object(y.a)(o,2)}return"Yo"===t?n.ordinalNumber(i,{unit:"year"}):Object(y.a)(i,t.length)},R:function(e,t){var n=w(e);return Object(y.a)(n,t.length)},u:function(e,t){var n=e.getUTCFullYear();return Object(y.a)(n,t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Object(y.a)(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Object(y.a)(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return E.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return Object(y.a)(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var a=function(e,t){Object(g.a)(1,arguments);var n=Object(_.a)(e),r=Object(S.a)(n,t).getTime()-k(n,t).getTime();return Math.round(r/6048e5)+1}(e,r);return"wo"===t?n.ordinalNumber(a,{unit:"week"}):Object(y.a)(a,t.length)},I:function(e,t,n){var r=function(e){Object(g.a)(1,arguments);var t=Object(_.a)(e),n=O(t).getTime()-C(t).getTime();return Math.round(n/6048e5)+1}(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):Object(y.a)(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):E.d(e,t)},D:function(e,t,n){var r=function(e){Object(g.a)(1,arguments);var t=Object(_.a)(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),a=n-r;return Math.floor(a/864e5)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):Object(y.a)(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var a=e.getUTCDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Object(y.a)(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var a=e.getUTCDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Object(y.a)(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),a=0===r?7:r;switch(t){case"i":return String(a);case"ii":return Object(y.a)(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,a=e.getUTCHours();switch(r=12===a?T:0===a?j:a/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,a=e.getUTCHours();switch(r=a>=17?D:a>=12?P:a>=4?I:N,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return E.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):E.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):Object(y.a)(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):Object(y.a)(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):E.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):E.s(e,t)},S:function(e,t){return E.S(e,t)},X:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return R(a);case"XXXX":case"XX":return M(a);case"XXXXX":case"XXX":default:return M(a,":")}},x:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return R(a);case"xxxx":case"xx":return M(a);case"xxxxx":case"xxx":default:return M(a,":")}},O:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+x(a,":");case"OOOO":default:return"GMT"+M(a,":")}},z:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+x(a,":");case"zzzz":default:return"GMT"+M(a,":")}},t:function(e,t,n,r){var a=r._originalDate||e,i=Math.floor(a.getTime()/1e3);return Object(y.a)(i,t.length)},T:function(e,t,n,r){var a=(r._originalDate||e).getTime();return Object(y.a)(a,t.length)}};function B(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}}function F(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}}var H={p:F,P:function(e,t){var n,r=e.match(/(P+)(p+)?/),a=r[1],i=r[2];if(!i)return B(e,t);switch(a){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;case"PPPP":default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",B(a,t)).replace("{{time}}",F(i,t))}};function V(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var U=["D","DD"],z=["YY","YYYY"];function G(e){return-1!==U.indexOf(e)}function W(e){return-1!==z.indexOf(e)}function q(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}var K=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Y=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Z=/^'([^]*?)'?$/,Q=/''/g,J=/[a-zA-Z]/;function X(e,t,n){Object(g.a)(2,arguments);var a=String(t),i=n||{},o=i.locale||h,c=o.options&&o.options.firstWeekContainsDate,s=null==c?1:Object(m.a)(c),u=null==i.firstWeekContainsDate?s:Object(m.a)(i.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var l=o.options&&o.options.weekStartsOn,d=null==l?0:Object(m.a)(l),f=null==i.weekStartsOn?d:Object(m.a)(i.weekStartsOn);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!o.localize)throw new RangeError("locale must contain localize property");if(!o.formatLong)throw new RangeError("locale must contain formatLong property");var p=Object(_.a)(e);if(!Object(r.a)(p))throw new RangeError("Invalid time value");var v=V(p),y=b(p,v),E={firstWeekContainsDate:u,weekStartsOn:f,locale:o,_originalDate:p},O=a.match(Y).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,H[t])(e,o.formatLong,E):e})).join("").match(K).map((function(n){if("''"===n)return"'";var r=n[0];if("'"===r)return $(n);var a=L[r];if(a)return!i.useAdditionalWeekYearTokens&&W(n)&&q(n,t,e),!i.useAdditionalDayOfYearTokens&&G(n)&&q(n,t,e),a(y,n,o.localize,E);if(r.match(J))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return n})).join("");return O}function $(e){return e.match(Z)[1].replace(Q,"'")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(44),a=n(37);function i(e){Object(a.a)(1,arguments);var t=Object(r.a)(e),n=t.getTime();return n}function o(e){return Object(a.a)(1,arguments),Math.floor(i(e)/1e3)}},,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(44),a=n(37);function i(e){Object(a.a)(1,arguments);var t=Object(r.a)(e),n=t.getFullYear();return n}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="cancel_20",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 20 20",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="cancel_20"><path clip-rule="evenodd" d="M4.72 4.72a.75.75 0 011.06 0L10 8.94l4.22-4.22a.75.75 0 111.06 1.06L11.06 10l4.22 4.22a.75.75 0 11-1.06 1.06L10 11.06l-4.22 4.22a.75.75 0 01-1.06-1.06L8.94 10 4.72 5.78a.75.75 0 010-1.06z" fill="currentColor" fill-rule="evenodd" /></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 20 20",id:l,width:isNaN(e.width)?20:+e.width,height:isNaN(e.height)?20:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="done_16",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="done_16"><path d="M13.743 3.756a.872.872 0 010 1.237l-7.317 7.25a.88.88 0 01-1.242 0L2.257 9.366a.872.872 0 010-1.237.88.88 0 011.242 0l2.306 2.261L12.5 3.756a.88.88 0 011.242 0z" fill="currentColor" /></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 16 16",id:l,width:isNaN(e.width)?16:+e.width,height:isNaN(e.height)?16:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="dismiss_24",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="dismiss_24"><g fill="currentColor"><path d="M12 24c6.627 0 12-5.373 12-12S18.627 0 12 0 0 5.373 0 12s5.373 12 12 12z" opacity=".12" /><path d="M16.736 7.264a.9.9 0 010 1.272L13.273 12l3.463 3.464a.9.9 0 01.081 1.18l-.08.092a.9.9 0 01-1.273 0L12 13.273l-3.464 3.463a.9.9 0 11-1.272-1.272L10.727 12 7.264 8.536a.9.9 0 01-.08-1.18l.08-.092a.9.9 0 011.272 0L12 10.727l3.464-3.463a.9.9 0 011.272 0z" /></g></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 24 24",id:l,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="dismiss_dark_24",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="dismiss_dark_24"><path d="M12 24c6.627 0 12-5.373 12-12S18.627 0 12 0 0 5.373 0 12s5.373 12 12 12z" fill="#000" opacity=".24" /><path d="M16.736 7.264a.9.9 0 010 1.272L13.273 12l3.463 3.464a.9.9 0 01.081 1.18l-.08.092a.9.9 0 01-1.273 0L12 13.273l-3.464 3.463a.9.9 0 11-1.272-1.272L10.727 12 7.264 8.536a.9.9 0 01-.08-1.18l.08-.092a.9.9 0 011.272 0L12 10.727l3.464-3.463a.9.9 0 011.272 0z" fill="#fff" /></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 24 24",id:l,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="dismiss_substract_24",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="dismiss_substract_24"><path d="M12 0c6.627 0 12 5.373 12 12s-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0zm4.736 7.264a.9.9 0 00-1.272 0L12 10.727 8.536 7.264l-.092-.08a.9.9 0 00-1.18.08l-.08.092a.9.9 0 00.08 1.18L10.727 12l-3.463 3.464a.9.9 0 101.272 1.272L12 13.273l3.464 3.463.092.08a.9.9 0 001.18-.08l.08-.092a.9.9 0 00-.08-1.18L13.273 12l3.463-3.464a.9.9 0 000-1.272z" fill="currentColor" /></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 24 24",id:l,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="dropdown_20",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 20 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 16" id="dropdown_20"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.22 5.875a1 1 0 011.405-.156L10 9.22l4.375-3.5a1 1 0 011.25 1.562l-5 4a1 1 0 01-1.25 0l-5-4a1 1 0 01-.156-1.406z" fill="currentColor" /></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 20 16",id:l,width:isNaN(e.width)?20:+e.width,height:isNaN(e.height)?16:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="cancel_outline_28",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 28 28",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="cancel_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path d="M6.293 6.293a1 1 0 011.414 0L14 12.585l6.293-6.292a1 1 0 011.32-.083l.094.083a1 1 0 010 1.414L15.415 14l6.292 6.293a1 1 0 01.083 1.32l-.083.094a1 1 0 01-1.414 0L14 15.415l-6.293 6.292a1 1 0 01-1.32.083l-.094-.083a1 1 0 010-1.414L12.585 14 6.293 7.707a1 1 0 01-.083-1.32z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 28 28",id:l,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="arrow_left_outline_28",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 28 28",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="arrow_left_outline_28"><g fill="none" fill-rule="evenodd"><path d="M28 0H0v28h28z" /><path d="M12.293 6.293a1 1 0 011.414 1.414L8.414 13H22a1 1 0 01.993.883L23 14a1 1 0 01-1 1H8.414l5.293 5.293a1 1 0 01.083 1.32l-.083.094a1 1 0 01-1.414 0l-7-7-.073-.082A1.005 1.005 0 015 14l.004.09A1.006 1.006 0 015 14.02V14a1.02 1.02 0 01.125-.484.878.878 0 01.071-.111.999.999 0 01.097-.112l-.08.09c.025-.031.051-.062.08-.09z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 28 28",id:l,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="chevron_back_28",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 20 28",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 28" id="chevron_back_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h20v28H0z" /><path d="M4.56 12.94L13 4.5a1.414 1.414 0 012 2L7.5 14l7.5 7.5a1.414 1.414 0 01-2 2l-8.44-8.44a1.5 1.5 0 010-2.12z" fill="currentColor" /></g></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 20 28",id:l,width:isNaN(e.width)?20:+e.width,height:isNaN(e.height)?28:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="done_outline_28",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 28 28",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="done_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path d="M11 18.586l-5.293-5.293a1 1 0 10-1.414 1.414l6 6a1 1 0 001.414 0l12-12a1 1 0 10-1.414-1.414L11 18.586z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 28 28",id:l,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.Fatal="fatal",e.Error="error",e.Warning="warning",e.Log="log",e.Info="info",e.Debug="debug",e.Critical="critical"}(r||(r={})),function(e){e.fromString=function(t){switch(t){case"debug":return e.Debug;case"info":return e.Info;case"warn":case"warning":return e.Warning;case"error":return e.Error;case"fatal":return e.Fatal;case"critical":return e.Critical;case"log":default:return e.Log}}}(r||(r={}))},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="school_outline_28",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 28 28",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="school_outline_28"><path clip-rule="evenodd" d="M14.637 6.104a2 2 0 00-1.274 0c-.17.057-.38.177-.724.483-.353.314-.774.754-1.39 1.402l-3.525 3.7A1 1 0 017 12H4v7c0 .717 0 1.194.03 1.56.03.356.081.518.133.621a1.5 1.5 0 00.656.655c.103.053.265.104.62.133C5.806 22 6.283 22 7 22h3.5v-3.5a3.5 3.5 0 117 0V22H21c.717 0 1.194 0 1.56-.03.356-.03.518-.081.621-.133a1.5 1.5 0 00.655-.656c.053-.103.104-.265.133-.62C24 20.194 24 19.717 24 19v-7h-3a1 1 0 01-.724-.31l-3.524-3.7c-.617-.649-1.038-1.09-1.39-1.403-.345-.306-.555-.426-.725-.483zM15.5 18.5V22h-3v-3.5a1.5 1.5 0 013 0zM7 24h14.04c.666 0 1.226 0 1.683-.037.48-.04.934-.124 1.366-.345a3.5 3.5 0 001.53-1.529c.22-.432.304-.887.344-1.366.037-.457.037-1.017.037-1.683V10.96c0-.666 0-1.226-.037-1.683-.04-.48-.124-.934-.345-1.366a3.5 3.5 0 00-1.529-1.53c-.432-.22-.887-.305-1.366-.344C22.266 6 21.706 6 21.04 6h-3.423a17.647 17.647 0 00-.927-.908c-.438-.389-.883-.705-1.417-.884a4 4 0 00-2.546 0c-.534.18-.98.495-1.417.884-.28.25-.584.554-.927.908H6.96c-.666 0-1.226 0-1.683.037-.48.04-.934.124-1.366.344a3.5 3.5 0 00-1.53 1.53c-.22.432-.305.887-.344 1.366C2 9.734 2 10.294 2 10.96V19.04c0 .666 0 1.226.037 1.683.04.48.124.934.344 1.366a3.5 3.5 0 001.53 1.53c.432.22.887.304 1.366.344C5.734 24 6.294 24 6.96 24zm16.994-14a9.244 9.244 0 00-.025-.56c-.029-.356-.08-.518-.133-.621a1.5 1.5 0 00-.655-.656c-.103-.052-.265-.103-.62-.132C22.194 8 21.717 8 21 8h-1.476l1.905 2zM8.476 8H7c-.717 0-1.194 0-1.56.03-.356.03-.518.081-.621.133a1.5 1.5 0 00-.656.656c-.052.103-.103.265-.132.62-.013.162-.021.345-.025.561H6.57zM14 9a1.5 1.5 0 100 3 1.5 1.5 0 000-3z" fill="currentColor" fill-rule="evenodd" /></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 28 28",id:l,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="message_outline_28",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 28 28",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="message_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path d="M14 3.5c6.32 0 11.5 4.44 11.5 10s-5.18 10-11.5 10c-1.355 0-2.678-.204-3.924-.597-1.402 1.306-3.458 1.994-6.124 2.098a1.434 1.434 0 01-1.363-2.023c.911-2.015 1.413-3.498 1.514-4.379C3.062 17.073 2.5 15.323 2.5 13.5c0-5.56 5.18-10 11.5-10zm0 2c-5.278 0-9.5 3.619-9.5 8 0 1.508.497 2.955 1.426 4.213a1 1 0 01.196.598c-.004 1.047-.45 2.567-1.33 4.627 1.987-.208 3.388-.831 4.245-1.837a1 1 0 011.111-.287c1.202.45 2.506.686 3.852.686 5.278 0 9.5-3.619 9.5-8s-4.222-8-9.5-8z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 28 28",id:l,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="document_outline_28",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 28 28",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="document_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path d="M15.205 2.122c.406.093.772.245 1.124.466.356.222.63.456 1.192 1.02l4.872 4.87c.563.564.797.837 1.02 1.193.22.352.372.718.465 1.124.094.409.122.767.122 1.564v6.872c0 1.98-.185 2.94-.72 3.939a5.089 5.089 0 01-2.11 2.11c-.999.535-1.959.72-3.939.72H10.77c-1.98 0-2.94-.185-3.939-.72a5.089 5.089 0 01-2.11-2.11C4.184 22.17 4 21.21 4 19.23V8.066c0-1.285.232-2.324.72-3.236a5.089 5.089 0 012.11-2.11C7.742 2.231 8.781 2 10.066 2h3.575c.797 0 1.155.028 1.564.122zm-1.379 1.879L10.066 4c-.972 0-1.688.16-2.292.483a3.09 3.09 0 00-1.291 1.29C6.16 6.379 6 7.095 6 8.067v11.165c0 1.678.125 2.327.483 2.995.299.56.732.992 1.29 1.291.67.358 1.318.483 2.996.483h6.462c1.678 0 2.327-.125 2.995-.483a3.09 3.09 0 001.291-1.29c.358-.67.483-1.318.483-2.996V12.36c0-.137 0-.256-.002-.36L16.5 12A2.5 2.5 0 0114 9.5l.001-5.498-.175-.001zm2.281 1.02L16 4.915V9.5a.5.5 0 00.41.492l.09.008 4.587.002-.108-.11-4.872-4.87z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 28 28",id:l,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="qr_code_outline_28",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 28 28",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="qr_code_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path d="M9.346 15c1.27 0 1.732.132 2.196.38a2.59 2.59 0 011.077 1.078c.249.464.381.925.381 2.196v2.692c0 1.27-.132 1.732-.38 2.196a2.59 2.59 0 01-1.078 1.077c-.464.249-.925.381-2.196.381H6.654c-1.27 0-1.732-.132-2.196-.38a2.59 2.59 0 01-1.077-1.078C3.132 23.078 3 22.617 3 21.346v-2.692c0-1.27.132-1.732.38-2.196a2.59 2.59 0 011.078-1.077c.464-.249.925-.381 2.196-.381h2.692zm14.193 7c.334 0 .455.035.577.1a.681.681 0 01.284.284c.065.122.1.243.1.577v.578c0 .334-.035.455-.1.577a.681.681 0 01-.284.284c-.122.065-.243.1-.577.1h-.578c-.334 0-.455-.035-.577-.1a.681.681 0 01-.284-.284c-.065-.122-.1-.243-.1-.577v-.578c0-.334.035-.455.1-.577a.681.681 0 01.284-.284c.122-.065.243-.1.577-.1h.578zm-6.5 0c.334 0 .455.035.577.1a.681.681 0 01.284.284c.065.122.1.243.1.577v.578c0 .334-.035.455-.1.577a.681.681 0 01-.284.284c-.122.065-.243.1-.577.1h-.578c-.334 0-.455-.035-.577-.1a.681.681 0 01-.284-.284c-.065-.122-.1-.243-.1-.577v-.578c0-.334.035-.455.1-.577a.681.681 0 01.284-.284c.122-.065.243-.1.577-.1h.578zM9.52 17H6.654c-.857 0-1.054.038-1.253.144a.591.591 0 00-.257.257c-.098.184-.138.368-.143 1.079L5 21.346c0 .857.038 1.054.144 1.253a.591.591 0 00.257.257c.199.106.396.144 1.253.144h2.692c.857 0 1.054-.038 1.253-.144a.591.591 0 00.257-.257c.106-.199.144-.396.144-1.253v-2.692c0-.857-.038-1.054-.144-1.253a.591.591 0 00-.257-.257c-.184-.098-.368-.138-1.079-.143zM8.29 18.75c.334 0 .455.035.577.1a.681.681 0 01.284.284c.065.122.1.243.1.577v.578c0 .334-.035.455-.1.577a.681.681 0 01-.284.284c-.122.065-.243.1-.577.1H7.71c-.334 0-.455-.035-.577-.1a.681.681 0 01-.284-.284c-.065-.122-.1-.243-.1-.577v-.578c0-.334.035-.455.1-.577a.681.681 0 01.284-.284c.122-.065.243-.1.577-.1h.578zm12 0c.334 0 .455.035.577.1a.681.681 0 01.284.284c.065.122.1.243.1.577v.578c0 .334-.035.455-.1.577a.681.681 0 01-.284.284c-.122.065-.243.1-.577.1h-.578c-.334 0-.455-.035-.577-.1a.681.681 0 01-.284-.284c-.065-.122-.1-.243-.1-.577v-.578c0-.334.035-.455.1-.577a.681.681 0 01.284-.284c.122-.065.243-.1.577-.1h.578zm-3.25-3.25c.334 0 .455.035.577.1a.681.681 0 01.284.284c.065.122.1.243.1.577v.578c0 .334-.035.455-.1.577a.681.681 0 01-.284.284c-.122.065-.243.1-.577.1h-.578c-.334 0-.455-.035-.577-.1a.681.681 0 01-.284-.284c-.065-.122-.1-.243-.1-.577v-.578c0-.334.035-.455.1-.577a.681.681 0 01.284-.284c.122-.065.243-.1.577-.1h.578zm6.5 0c.334 0 .455.035.577.1a.681.681 0 01.284.284c.065.122.1.243.1.577v.578c0 .334-.035.455-.1.577a.681.681 0 01-.284.284c-.122.065-.243.1-.577.1h-.578c-.334 0-.455-.035-.577-.1a.681.681 0 01-.284-.284c-.065-.122-.1-.243-.1-.577v-.578c0-.334.035-.455.1-.577a.681.681 0 01.284-.284c.122-.065.243-.1.577-.1h.578zM9.346 3c1.27 0 1.732.132 2.196.38a2.59 2.59 0 011.077 1.078c.249.464.381.925.381 2.196v2.692c0 1.27-.132 1.732-.38 2.196a2.59 2.59 0 01-1.078 1.077c-.464.249-.925.381-2.196.381H6.654c-1.27 0-1.732-.132-2.196-.38a2.59 2.59 0 01-1.077-1.078C3.132 11.078 3 10.617 3 9.346V6.654c0-1.27.132-1.732.38-2.196a2.59 2.59 0 011.078-1.077C4.922 3.132 5.383 3 6.654 3h2.692zm12 0c1.27 0 1.732.132 2.196.38a2.59 2.59 0 011.077 1.078c.249.464.381.925.381 2.196v2.692c0 1.27-.132 1.732-.38 2.196a2.59 2.59 0 01-1.078 1.077c-.464.249-.925.381-2.196.381h-2.692c-1.27 0-1.732-.132-2.196-.38a2.59 2.59 0 01-1.077-1.078c-.249-.464-.381-.925-.381-2.196V6.654c0-1.27.132-1.732.38-2.196a2.59 2.59 0 011.078-1.077c.464-.249.925-.381 2.196-.381h2.692zM9.52 5H6.654c-.857 0-1.054.038-1.253.144a.591.591 0 00-.257.257c-.098.184-.138.368-.143 1.079L5 9.346c0 .857.038 1.054.144 1.253a.591.591 0 00.257.257c.199.106.396.144 1.253.144h2.692c.857 0 1.054-.038 1.253-.144a.591.591 0 00.257-.257c.106-.199.144-.396.144-1.253V6.654c0-.857-.038-1.054-.144-1.253a.591.591 0 00-.257-.257c-.184-.098-.368-.138-1.079-.143zm12 0h-2.866c-.857 0-1.054.038-1.253.144a.591.591 0 00-.257.257c-.098.184-.138.368-.143 1.079L17 9.346c0 .857.038 1.054.144 1.253a.591.591 0 00.257.257c.199.106.396.144 1.253.144h2.692c.857 0 1.054-.038 1.253-.144a.591.591 0 00.257-.257c.106-.199.144-.396.144-1.253V6.654c0-.857-.038-1.054-.144-1.253a.591.591 0 00-.257-.257c-.184-.098-.368-.138-1.079-.143zM8.29 6.75c.334 0 .455.035.577.1a.681.681 0 01.284.284c.065.122.1.243.1.577v.578c0 .334-.035.455-.1.577a.681.681 0 01-.284.284c-.122.065-.243.1-.577.1H7.71c-.334 0-.455-.035-.577-.1a.681.681 0 01-.284-.284c-.065-.122-.1-.243-.1-.577V7.71c0-.334.035-.455.1-.577a.681.681 0 01.284-.284c.122-.065.243-.1.577-.1h.578zm12 0c.334 0 .455.035.577.1a.681.681 0 01.284.284c.065.122.1.243.1.577v.578c0 .334-.035.455-.1.577a.681.681 0 01-.284.284c-.122.065-.243.1-.577.1h-.578c-.334 0-.455-.035-.577-.1a.681.681 0 01-.284-.284c-.065-.122-.1-.243-.1-.577V7.71c0-.334.035-.455.1-.577a.681.681 0 01.284-.284c.122-.065.243-.1.577-.1h.578z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 28 28",id:l,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="laptop_outline_28",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 28 28",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="laptop_outline_28"><path clip-rule="evenodd" d="M8 5h-.151c-.781 0-1.4-.001-1.93.171A3.5 3.5 0 003.67 7.418C3.5 7.95 3.5 8.568 3.5 9.348V19H2.162a1.162 1.162 0 00-.367 2.265l1.466.489c.276.092.415.138.556.17.125.029.253.05.38.062.145.014.29.014.582.014H23.22c.291 0 .437 0 .581-.014.128-.012.256-.033.381-.062.141-.032.28-.078.556-.17l1.466-.49A1.162 1.162 0 0025.838 19H24.5V9.349c0-.781.001-1.4-.171-1.93a3.5 3.5 0 00-2.247-2.248C21.55 5 20.932 5 20.152 5H20zM6.536 7.073C6.724 7.013 6.992 7 8 7h12c1.008 0 1.276.012 1.464.073a1.5 1.5 0 01.963.963c.06.188.073.456.073 1.464V19h-17V9.5c0-1.008.012-1.276.073-1.464a1.5 1.5 0 01.963-.963z" fill="currentColor" fill-rule="evenodd" /></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 28 28",id:l,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="user_outline_28",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 28 28",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="user_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path d="M17.5 8.5C17.5 6.566 15.934 5 14 5a3.499 3.499 0 00-3.5 3.5c0 1.934 1.566 3.5 3.5 3.5s3.5-1.566 3.5-3.5zm2 0c0 3.039-2.461 5.5-5.5 5.5a5.499 5.499 0 01-5.5-5.5C8.5 5.461 10.961 3 14 3s5.5 2.461 5.5 5.5zM7 20.643c0 .943-.08.857.456.857h13.588c.536 0 .456.086.456-.857 0-2.288-3.304-3.643-7.25-3.643S7 18.355 7 20.643zm-2 0C5 16.763 9.299 15 14.25 15s9.25 1.763 9.25 5.643c0 2.016-.781 2.857-2.456 2.857H7.456C5.78 23.5 5 22.66 5 20.643z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 28 28",id:l,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="download_outline_28",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 28 28",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="download_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path d="M21 22a1 1 0 110 2H7a1 1 0 010-2h14zM14 2a1 1 0 011 1v13.585l5.293-5.292a1 1 0 011.414 1.414l-7 7a1 1 0 01-1.414 0l-7-7a1 1 0 011.414-1.414L13 16.585V3a1 1 0 011-1z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 28 28",id:l,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="message_outline_20",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 20 20",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="message_outline_20"><g fill="none" fill-rule="evenodd"><path opacity=".4" d="M0 0h20v20H0z" /><path d="M6.828 15.752a.75.75 0 01.821-.207A7.52 7.52 0 0010.25 16c3.772 0 6.75-2.694 6.75-6s-2.978-6-6.75-6S3.5 6.694 3.5 10c0 1.21.4 2.367 1.14 3.349a.75.75 0 01.15.49c-.04.756-.403 1.785-1.085 3.135 1.483-.116 2.514-.534 3.123-1.222zM3.242 18.5a1.204 1.204 0 01-1.101-1.767c.644-1.216 1.016-2.14 1.121-2.73A7.009 7.009 0 012 10c0-4.17 3.681-7.5 8.25-7.5S18.5 5.83 18.5 10s-3.681 7.5-8.25 7.5a9.077 9.077 0 01-2.66-.393c-.996.881-2.456 1.336-4.348 1.393z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 20 20",id:l,width:isNaN(e.width)?20:+e.width,height:isNaN(e.height)?20:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="phone_outline_24",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="phone_outline_24"><g fill="none"><path d="M0 0h24v24H0z" /><path d="M4.477 4.116c-2.924 3.217-1.362 8.196 2.932 12.51 4.204 4.222 9.407 5.8 12.486 2.936 1.685-1.567 1.436-4.343-.645-6.198l-.19-.161c-1.931-1.563-4.734-1.568-6.445-.027l-.088.082-.05-.042c-.187-.16-.43-.381-.724-.673l-.298-.303-.306-.326c-.092-.101-.174-.194-.246-.277l-.124-.147-.07.075c1.69-1.697 1.706-4.72.006-6.75-1.887-2.255-4.75-2.335-6.238-.699zM9.335 5.97c1.18 1.41 1.049 3.371.099 4.325l-.148.14c-.63.567-1.246.901 1.032 3.218 2.458 2.499 2.765 1.622 3.405.952 1.006-1.01 2.975-1.104 4.329.103 1.497 1.334 1.335 2.868.617 3.536-2.222 2.067-6.476.636-9.984-2.888-3.507-3.523-5.064-7.622-2.876-10.03.508-.558 2.101-1.057 3.526.644z" fill="currentColor" /></g></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 24 24",id:l,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="videocam_outline_24",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="videocam_outline_24"><path d="M11.872 4.5c1.783 0 2.43.186 3.082.534.651.349 1.163.86 1.512 1.512.21.393.36.783.447 1.42l2.478-1.444A2.4 2.4 0 0123 8.595v6.81a2.4 2.4 0 01-3.61 2.073l-2.477-1.444c-.087.637-.238 1.027-.447 1.42a3.635 3.635 0 01-1.512 1.512c-.652.348-1.299.534-3.082.534H6.128c-1.783 0-2.43-.186-3.082-.534a3.635 3.635 0 01-1.512-1.512C1.186 16.802 1 16.155 1 14.372V9.628c0-1.783.186-2.43.534-3.082a3.635 3.635 0 011.512-1.512c.652-.348 1.299-.534 3.082-.534h5.744zm0 1.8H6.128c-1.354 0-1.788.084-2.233.322-.338.18-.593.435-.773.773-.238.445-.322.879-.322 2.233v4.744c0 1.354.084 1.788.322 2.233.18.338.435.593.773.773.445.238.879.322 2.233.322h5.744c1.354 0 1.788-.084 2.233-.322.338-.18.593-.435.774-.773.237-.445.321-.879.321-2.233V9.628c0-1.354-.084-1.788-.321-2.233a1.835 1.835 0 00-.774-.773c-.445-.238-.879-.322-2.233-.322zm8.426 1.776L17 10v4l3.298 1.924a.6.6 0 00.902-.519v-6.81a.6.6 0 00-.902-.519z" fill="currentColor" /></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 24 24",id:l,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="chain_outline_28",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 28 28",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="chain_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path d="M12.59 16.83c-.39.39-1.03.39-1.42 0a5.003 5.003 0 010-7.07l5.24-5.24a5.003 5.003 0 017.07 0 5.003 5.003 0 010 7.07l-1.436 1.436a.999.999 0 01-1.414-1.41l1.43-1.436a2.982 2.982 0 000-4.24 2.982 2.982 0 00-4.24 0l-5.23 5.23a2.982 2.982 0 000 4.24c.41.39.41 1.03 0 1.42zm2.82-5.66c.39-.39 1.03-.39 1.42 0a5.003 5.003 0 010 7.07l-5.24 5.24a5.003 5.003 0 01-7.07 0 5.003 5.003 0 010-7.07l1.431-1.431a1 1 0 011.414 0h.001c.39.392.39 1.025 0 1.415L5.94 17.82a2.982 2.982 0 000 4.24 2.982 2.982 0 004.24 0l5.23-5.23a2.982 2.982 0 000-4.24.973.973 0 010-1.42z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 28 28",id:l,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="phone_outline_28",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 28 28",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="phone_outline_28"><g fill-rule="nonzero" fill="none"><path d="M0 0h28v28H0z" /><path d="M16.112 17.259l-.734.734a.712.712 0 01-.75.166c-.73-.269-1.643-.95-2.74-2.047-1.095-1.096-1.778-2.01-2.045-2.74a.712.712 0 01.164-.75l.736-.734c1.354-1.354 1.478-3.487.284-4.903l-.862-1.024c-.984-1.17-2.756-1.288-3.96-.264a3.319 3.319 0 00-.974 1.443 3.25 3.25 0 00-.159.752c-.44 3.272 1.137 6.707 4.733 10.303 3.596 3.596 7.03 5.174 10.303 4.733a3.318 3.318 0 002.195-1.134c1.024-1.202.905-2.976-.263-3.96l-1.025-.862c-1.417-1.192-3.55-1.067-4.903.287zm-2.81-2.561c.525.523.982.92 1.35 1.191 2.124-2.123 5.428-2.317 7.652-.447l1.023.862c2.03 1.708 2.233 4.751.49 6.798-.896 1.036-2.156 1.687-3.442 1.808-3.982.536-7.987-1.303-11.984-5.3-3.997-3.998-5.837-8.004-5.31-11.896.036-.414.122-.822.257-1.22A5.33 5.33 0 014.91 4.174c2.037-1.732 5.079-1.53 6.785.5l.86 1.023c1.873 2.22 1.681 5.527-.4 7.608.227.413.624.87 1.148 1.394z" fill="currentColor" /></g></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 28 28",id:l,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="dropdown_16",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 16 12",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 12" id="dropdown_16"><g fill="none" fill-rule="evenodd"><path d="M0 0h16v12H0z" /><path d="M4.454 3.691A.9.9 0 103.346 5.11l4.096 3.203a.9.9 0 001.109 0l4.1-3.203a.9.9 0 10-1.108-1.418L7.997 6.46l-3.543-2.77z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 16 12",id:l,width:isNaN(e.width)?16:+e.width,height:isNaN(e.height)?12:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(44),a=n(37);function i(e){Object(a.a)(1,arguments);var t=Object(r.a)(e),n=t.getDate();return n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(44),a=n(37);function i(e){Object(a.a)(1,arguments);var t=Object(r.a)(e),n=t.getMonth();return n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(386),a=n(276),i=n(37),o=n(277);function c(e,t,n){Object(i.a)(2,arguments);var c=Object(a.a)(e,t)/r.b;return Object(o.a)(null==n?void 0:n.roundingMethod)(c)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(13),a=n(26),i=n.n(a);function o(e){return new Promise((function(t,n){var r,a,o=function(e){switch(e.detail.type){case"VKWebAppCopyTextResult":r();break;case"VKWebAppCopyTextFailed":a(e.detail.data)}};r=function(){t(!0),i.a.unsubscribe(o)},a=function(e){n(e),i.a.unsubscribe(o)},i.a.subscribe(o),i.a.send("VKWebAppCopyText",{text:e}).then((function(){return r()})).catch((function(e){return a(e)}))}))}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return i.a.isWebView()&&i.a.supports("VKWebAppCopyText")?o(e):Object(r.d)(e)}},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="delete_outline_28",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 28 28",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="delete_outline_28"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.944 9.502a1 1 0 00-.943 1.053l.5 9a1 1 0 001.998-.11l-.5-9a1 1 0 00-1.055-.943zm6.111 0A1 1 0 0118 10.555l-.5 9a1 1 0 01-1.997-.11l.5-9a1 1 0 011.053-.943z" fill="currentColor" /><path fill-rule="evenodd" clip-rule="evenodd" d="M3.5 5a1 1 0 000 2h1.096l1.298 12.823c.073.73.135 1.334.224 1.826.092.513.227.98.488 1.414a4 4 0 001.72 1.554c.458.216.936.303 1.456.344.498.039 1.106.039 1.84.039h4.757c.733 0 1.34 0 1.84-.039.519-.04.997-.128 1.455-.344a4 4 0 001.72-1.554c.261-.434.396-.901.489-1.414.088-.492.15-1.097.223-1.826L23.404 7H24.5a1 1 0 100-2h-6.111a4.502 4.502 0 00-8.777 0H3.5zm4.38 14.583c.078.778.132 1.304.206 1.71.07.394.148.596.234.738a2 2 0 00.86.778c.15.07.359.127.758.158.41.032.94.033 1.722.033h4.68c.782 0 1.311 0 1.723-.033.399-.031.607-.087.758-.158.356-.169.656-.44.86-.778.085-.142.162-.344.233-.738.074-.406.128-.932.206-1.71L21.395 7H6.606L7.88 19.583zM14 3.5A2.5 2.5 0 0011.708 5h4.584A2.5 2.5 0 0014 3.5z" fill="currentColor" /></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 28 28",id:l,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="delete_outline_android_28",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 28 28",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="delete_outline_android_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path d="M22 10v10.5a4.5 4.5 0 01-4.5 4.5h-7A4.5 4.5 0 016 20.5V10h-.71A1.29 1.29 0 014 8.71V7.25A2.75 2.75 0 016.75 4.5h1.651A3.001 3.001 0 0111 3h6c1.097 0 2.075.593 2.599 1.5h1.651A2.75 2.75 0 0124 7.25v1.46A1.29 1.29 0 0122.71 10H22zm-1-2h1v-.75a.75.75 0 00-.75-.75h-2.313a1 1 0 01-.968-.75A1 1 0 0017 5h-6a1 1 0 00-.969.75 1 1 0 01-.968.75H6.75a.75.75 0 00-.75.75V8h15zM8 10v10.5a2.5 2.5 0 002.5 2.5h7a2.5 2.5 0 002.5-2.5V10H8z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 28 28",id:l,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="copy_24",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="copy_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path d="M4 18a2.01 2.01 0 01-2-2.01V5.517A3.517 3.517 0 015.518 2H15.99A2.01 2.01 0 0118 4H6.764A2.764 2.764 0 004 6.764V18zM8.01 6h11.98C21.1 6 22 6.9 22 8.01v11.98c0 1.11-.9 2.01-2.01 2.01H8.01C6.9 22 6 21.1 6 19.99V8.01C6 6.9 6.9 6 8.01 6zM9 8a1 1 0 00-1 1v10a1 1 0 001 1h10a1 1 0 001-1V9a1 1 0 00-1-1H9z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 24 24",id:l,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="edit_outline_28",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 28 28",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="edit_outline_28"><path fill-rule="evenodd" clip-rule="evenodd" d="M21.782 3.335a3 3 0 00-2.724 0c-.428.218-.8.591-1.23 1.023L4.677 17.508c-.354.355-.609.609-.818.897a4.5 4.5 0 00-.804 1.94C3 20.698 3 21.058 3 21.558V22.681c-.001.282-.002.628.098.937a2 2 0 001.284 1.284c.309.1.655.1.937.098H6.443c.5 0 .86 0 1.211-.055a4.5 4.5 0 001.941-.804c.288-.21.542-.464.896-.818l13.151-13.15c.432-.431.805-.803 1.023-1.231a3 3 0 000-2.724c-.218-.428-.591-.8-1.023-1.23l-.63-.63c-.43-.432-.802-.805-1.23-1.023zm-1.816 1.782a1 1 0 01.908 0c.106.054.237.168.819.75l.44.44c.582.582.696.713.75.819a1 1 0 010 .908c-.054.106-.168.237-.75.819l-.858.858-2.986-2.986.858-.858c.582-.582.713-.696.82-.75zM16.875 8.14L6.142 18.872c-.425.425-.56.564-.665.708a2.5 2.5 0 00-.446 1.079c-.028.176-.03.369-.03.97v.971c-.001.197 0 .305.004.383v.012h.012c.078.005.186.005.383.005h.97c.602 0 .795-.003.971-.03a2.5 2.5 0 001.079-.447c.144-.105.283-.24.708-.665l10.733-10.733-2.986-2.986z" fill="currentColor" /></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 28 28",id:l,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="school_outline_56",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 56 56",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 56 56" id="school_outline_56"><path clip-rule="evenodd" d="M25.12 12.647a4 4 0 015.76 0l9.54 9.894A1.5 1.5 0 0041.5 23H49v13.9c0 1.705-.001 2.893-.077 3.819-.074.907-.212 1.429-.414 1.824a4.5 4.5 0 01-1.966 1.967c-.395.2-.917.34-1.824.413C43.793 45 42.605 45 40.9 45H35v-8a7 7 0 10-14 0v8h-5.9c-1.705 0-2.893-.001-3.819-.077-.907-.074-1.429-.212-1.824-.414a4.5 4.5 0 01-1.967-1.966c-.2-.395-.34-.917-.413-1.824C7 39.793 7 38.605 7 36.9V23h7.5a1.5 1.5 0 001.08-.459zM24 45h8v-8a4 4 0 00-8 0zm-3 3h-5.964c-1.626 0-2.937 0-3.999-.087-1.093-.09-2.053-.278-2.942-.73a7.5 7.5 0 01-3.278-3.278c-.452-.889-.641-1.849-.73-2.942C4 39.9 4 38.59 4 36.964V23.036c0-1.626 0-2.937.087-3.999.089-1.093.278-2.054.73-2.942a7.5 7.5 0 013.278-3.278c.889-.452 1.849-.64 2.942-.73C12.1 12 13.41 12 15.036 12h6.541l1.384-1.435a7 7 0 0110.078 0L34.423 12h6.541c1.626 0 2.937 0 3.999.087 1.093.09 2.053.278 2.942.73a7.5 7.5 0 013.277 3.278c.453.888.642 1.849.731 2.942C52 20.1 52 21.41 52 23.036v13.928c0 1.626 0 2.937-.087 3.999-.09 1.093-.278 2.053-.73 2.942a7.5 7.5 0 01-3.278 3.277c-.889.453-1.849.642-2.942.731C43.9 48 42.59 48 40.964 48H24zm27.923-28.719c.018.223.032.462.043.719h-6.829l-4.821-5H40.9c1.705 0 2.893.001 3.819.077.907.074 1.429.212 1.824.414a4.5 4.5 0 011.966 1.966c.202.395.34.917.414 1.824zM15.1 15h3.584l-4.821 5H7.034c.01-.257.025-.496.043-.719.074-.907.212-1.429.413-1.824a4.5 4.5 0 011.967-1.966c.395-.202.917-.34 1.824-.414C12.207 15 13.395 15 15.1 15zM28 18a3 3 0 100 6 3 3 0 000-6z" fill="currentColor" fill-rule="evenodd" /></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 56 56",id:l,width:isNaN(e.width)?56:+e.width,height:isNaN(e.height)?56:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="videocam_outline_56",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 56 56",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 56 56" id="videocam_outline_56"><path clip-rule="evenodd" d="M4 24.8c0-4.48 0-6.72.872-8.432a8 8 0 013.496-3.496C10.08 12 12.32 12 16.8 12h10.4c4.48 0 6.72 0 8.432.872a8 8 0 013.496 3.496c.416.817.634 1.755.748 3 3.406-2.297 5.305-3.435 6.917-3.35a5.5 5.5 0 014.084 2.162C52 19.656 52 22.353 52 27.745v.522c0 5.393 0 8.09-1.123 9.565a5.5 5.5 0 01-4.085 2.162c-1.612.086-3.51-1.052-6.918-3.349-.114 1.238-.331 2.172-.746 2.987a8 8 0 01-3.496 3.496C33.92 44 31.68 44 27.2 44H16.8c-4.48 0-6.72 0-8.432-.872a8 8 0 01-3.496-3.496C4 37.92 4 35.68 4 31.2zM16.8 15h10.4c2.29 0 3.827.002 5.01.099 1.149.094 1.698.261 2.06.446a5 5 0 012.185 2.185c.185.362.352.911.446 2.06.097 1.183.099 2.72.099 5.01v6.4c0 2.29-.002 3.827-.099 5.01-.094 1.149-.261 1.698-.446 2.06a5 5 0 01-2.185 2.185c-.362.185-.911.352-2.06.446-1.183.097-2.72.099-5.01.099H16.8c-2.29 0-3.827-.002-5.01-.099-1.149-.094-1.698-.261-2.06-.446a5 5 0 01-2.185-2.185c-.185-.362-.352-.911-.446-2.06C7.002 35.027 7 33.49 7 31.2v-6.4c0-2.29.002-3.827.099-5.01.094-1.149.261-1.698.446-2.06a5 5 0 012.185-2.185c.362-.185.911-.352 2.06-.446 1.183-.097 2.72-.099 5.01-.099zm23.197 18.103l5.097 3.466C46.754 37.7 49 36.51 49 34.502V21.511c0-2.007-2.246-3.196-3.906-2.068l-5.097 3.467c.003.582.003 1.21.003 1.89v6.4c0 .685 0 1.317-.003 1.903z" fill="currentColor" fill-rule="evenodd" /></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 56 56",id:l,width:isNaN(e.width)?56:+e.width,height:isNaN(e.height)?56:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="recent_outline_56",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 56 56",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 56 56" id="recent_outline_56"><g fill="none" fill-rule="evenodd"><path d="M0 0h56v56H0z" /><path d="M28 4c13.255 0 24 10.745 24 24S41.255 52 28 52 4 41.255 4 28 14.745 4 28 4zm0 3C16.402 7 7 16.402 7 28s9.402 21 21 21 21-9.402 21-21S39.598 7 28 7zm-1.339 21.677l-.022-.047a1.505 1.505 0 01-.1-.285l-.007-.035a1.19 1.19 0 01-.023-.144A1.51 1.51 0 0126.5 28l.004.109a1.502 1.502 0 01-.003-.056L26.5 18.5a1.5 1.5 0 013 0v8.634l8.776 5.067a1.5 1.5 0 01.616 1.92l-.067.129a1.5 1.5 0 01-2.049.549l-9.526-5.5a1.528 1.528 0 01-.255-.185l-.03-.029a1.257 1.257 0 01-.064-.064l-.034-.038a1.216 1.216 0 01-.131-.175 1.861 1.861 0 01-.061-.105l-.014-.026z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 56 56",id:l,width:isNaN(e.width)?56:+e.width,height:isNaN(e.height)?56:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="article_outline_28",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 28 28",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="article_outline_28"><path d="M17.59 3c2.183 0 3.233.203 4.324.786a5.543 5.543 0 012.3 2.3c.583 1.091.786 2.14.786 4.324v7.18c0 2.183-.203 3.233-.786 4.324a5.543 5.543 0 01-2.3 2.3c-1.091.583-2.14.786-4.324.786h-7.18c-2.183 0-3.233-.203-4.324-.786a5.543 5.543 0 01-2.3-2.3C3.203 20.823 3 19.774 3 17.59v-7.18c0-2.183.203-3.233.786-4.324a5.543 5.543 0 012.3-2.3C7.177 3.203 8.226 3 10.41 3h7.18zm0 2h-7.18c-1.881 0-2.62.142-3.38.55-.641.342-1.138.839-1.48 1.48-.408.76-.55 1.499-.55 3.38v7.18c0 1.881.142 2.62.55 3.38.342.641.839 1.138 1.48 1.48.76.408 1.499.55 3.38.55h7.18c1.881 0 2.62-.142 3.38-.55a3.544 3.544 0 001.48-1.48c.408-.76.55-1.499.55-3.38v-7.18c0-1.881-.142-2.62-.55-3.38a3.544 3.544 0 00-1.48-1.48c-.76-.408-1.499-.55-3.38-.55zM13 17.5a1 1 0 110 2H9a1 1 0 110-2h4zm6-4.5a1 1 0 110 2H9a1 1 0 110-2h10zm0-4.5a1 1 0 110 2H9a1 1 0 110-2h10z" fill="currentColor" /></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 28 28",id:l,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="picture_outline_28",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 28 28",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="picture_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path d="M16.308 3c2.59 0 3.818.237 5.094.92a6.452 6.452 0 012.678 2.678c.683 1.276.92 2.504.92 5.094v4.616c0 2.59-.237 3.818-.92 5.094a6.452 6.452 0 01-2.678 2.678c-1.276.683-2.504.92-5.094.92h-4.616c-2.59 0-3.818-.237-5.094-.92a6.452 6.452 0 01-2.678-2.678C3.237 20.126 3 18.898 3 16.308v-4.616c0-2.59.237-3.818.92-5.094A6.452 6.452 0 016.598 3.92C7.874 3.237 9.102 3 11.692 3h4.616zm1.671 12.442l-4.202 5.187a1 1 0 01-1.417.14l-2.299-1.916-3.098 3.099c.181.134.374.256.578.365.947.506 1.863.683 4.15.683h4.617c2.288 0 3.204-.177 4.15-.683a4.452 4.452 0 001.859-1.858c.147-.275.266-.547.361-.85l-4.699-4.167zM16.31 5h-4.617c-2.288 0-3.204.177-4.15.683a4.452 4.452 0 00-1.859 1.858C5.177 8.488 5 9.404 5 11.691v4.617c0 2.257.172 3.18.663 4.113l3.63-3.628a1 1 0 011.347-.061l2.221 1.85 4.222-5.211a1 1 0 011.44-.12l4.466 3.96c.007-.276.011-.575.011-.903v-4.616c0-2.288-.177-3.204-.683-4.15a4.452 4.452 0 00-1.858-1.859C19.512 5.177 18.596 5 16.309 5zM10.5 9a1.5 1.5 0 110 3 1.5 1.5 0 010-3z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 28 28",id:l,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="video_outline_28",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 28 28",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="video_outline_28"><g fill-rule="nonzero" fill="none"><path d="M0 0h28v28H0z" /><path d="M14 2c6.627 0 12 5.373 12 12s-5.373 12-12 12S2 20.627 2 14 7.373 2 14 2zm0 2C8.477 4 4 8.477 4 14s4.477 10 10 10 10-4.477 10-10S19.523 4 14 4zm-2.045 5.121c.342 0 .678.09.975.26l5.079 2.925a1.955 1.955 0 010 3.388l-5.079 2.924A1.955 1.955 0 0110 16.924v-5.848c0-1.08.875-1.955 1.955-1.955zM12 11.154v5.692L16.943 14 12 11.154z" fill="currentColor" /></g></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 28 28",id:l,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="add_outline_28",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 28 28",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="add_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path d="M14 4a1 1 0 011 1v8h8a1 1 0 010 2h-8v8a1 1 0 01-2 0v-8H5a1 1 0 010-2h8V5a1 1 0 011-1z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 28 28",id:l,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="document_outline_56",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 56 56",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 56 56" id="document_outline_56"><g fill="none" fill-rule="evenodd"><path d="M0 0h56v56H0z" /><path d="M30.798 4.231a6.723 6.723 0 012.095.868c.632.395 1.128.811 2.096 1.77l9.943 9.942c1.102 1.102 1.548 1.622 1.969 2.296.412.658.693 1.338.868 2.095.178.774.231 1.457.231 3.016v13.745c0 3.884-.356 5.726-1.38 7.64a9.678 9.678 0 01-4.017 4.018C40.69 50.644 38.847 51 34.963 51H22.037c-3.884 0-5.726-.356-7.64-1.38a9.678 9.678 0 01-4.018-4.017C9.356 43.69 9 41.847 9 37.963V15.632c0-2.492.445-4.489 1.38-6.235a9.678 9.678 0 014.017-4.018C16.143 4.445 18.14 4 20.632 4h7.15c1.56 0 2.242.053 3.016.231zm-2.772 2.77L20.632 7c-2.022 0-3.535.338-4.82 1.025a6.678 6.678 0 00-2.787 2.787C12.338 12.097 12 13.61 12 15.632v22.33c0 3.432.265 4.807 1.025 6.226a6.678 6.678 0 002.787 2.787c1.42.76 2.794 1.025 6.225 1.025h12.926c3.43 0 4.806-.265 6.225-1.025a6.678 6.678 0 002.787-2.787c.76-1.42 1.025-2.794 1.025-6.225V24.218c0-.561-.006-.973-.022-1.298-.15.053-.311.08-.478.08h-11a4.5 4.5 0 01-4.5-4.5v-11c0-.167.027-.328.078-.478-.274-.013-.613-.02-1.052-.022zM32 8.166V18.5a1.5 1.5 0 001.5 1.5l10.333.001a23.177 23.177 0 00-1.022-1.07L33.068 9.19c-.474-.473-.803-.79-1.068-1.022z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 56 56",id:l,width:isNaN(e.width)?56:+e.width,height:isNaN(e.height)?56:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="users_3_outline_56",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 56 56",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 56 56" id="users_3_outline_56"><g fill="none" fill-rule="evenodd"><path d="M0 0h56v56H0z" /><path d="M28 29c7.075 0 13 2.854 13 9 0 3.064-1.855 5-4.375 5h-17.25C16.759 43 15 41.572 15 38.5c0-6.527 5.848-9.5 13-9.5zm-14.443.001a1.5 1.5 0 01.03 2.996C9.706 32.225 7 33.984 7 37c0 .75.333 1 1 1h2.5l.144.007A1.5 1.5 0 0110.5 41H8l-.196-.004C5.724 40.916 4 39.546 4 37c0-4.992 4.145-7.69 9.412-7.997zm28.886 0l.145.002C47.855 29.31 52 32.008 52 37c0 2.545-1.724 3.916-3.804 3.996L48 41h-2.5a1.5 1.5 0 01-.144-2.993L45.5 38H48c.667 0 1-.25 1-1 0-3.016-2.705-4.775-6.588-5.003a1.5 1.5 0 01.031-2.996zM28 32c-5.71 0-10 2.18-10 6.5 0 1.151.245 1.45 1.11 1.494l.265.006h17.25c.834 0 1.375-.564 1.375-2 0-3.892-4.377-6-10-6zM16 12c.212 0 .423.01.632.028a1.5 1.5 0 01-.268 2.988 4 4 0 10.713 7.838l.158-.038a1.5 1.5 0 01.678 2.919l-.352.09-.325.066A7 7 0 1116 12zm24.004 0a7 7 0 11-1.236 13.89l-.325-.065-.352-.09a1.5 1.5 0 01.677-2.919l.159.038a3.965 3.965 0 001.077.146 4 4 0 10-.364-7.984 1.5 1.5 0 11-.269-2.988c.21-.019.42-.028.633-.028zM28 10a8 8 0 110 16 8 8 0 010-16zm0 3a5 5 0 100 10 5 5 0 000-10z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 56 56",id:l,width:isNaN(e.width)?56:+e.width,height:isNaN(e.height)?56:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="message_outline_56",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 56 56",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 56 56" id="message_outline_56"><path clip-rule="evenodd" d="M6 25.638C6 14.594 16.287 6 28.5 6S51 14.594 51 25.638c0 11.045-10.287 19.639-22.5 19.639a25.72 25.72 0 01-5.276-.543c-2.682 1.688-6.377 3.07-10.996 4.192a2.482 2.482 0 01-1.82-.259c-1.494-.856-1.42-2.503-.68-3.804 1.004-1.776 1.951-3.603 2.65-5.523C8.461 35.831 6 31.007 6 25.638zM28.5 9C17.517 9 9 16.648 9 25.638c0 4.699 2.29 8.99 6.067 12.053a1.5 1.5 0 01.49 1.601c-.56 1.841-1.527 3.987-2.868 6.423 4.196-1.102 7.3-2.391 9.398-3.822a1.5 1.5 0 011.19-.22c1.66.393 3.412.604 5.223.604 10.983 0 19.5-7.648 19.5-16.639C48 16.648 39.483 9 28.5 9z" fill="currentColor" fill-rule="evenodd" /></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 56 56",id:l,width:isNaN(e.width)?56:+e.width,height:isNaN(e.height)?56:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="users_3_outline_28",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 28 28",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="users_3_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path d="M14 14.5c3.862 0 6.5 1.759 6.5 4.5 0 1.93-1.284 3-3 3h-7c-1.716 0-3-1.07-3-3 0-2.741 2.638-4.5 6.5-4.5zm8 0c2.746 0 4.5 1.657 4.5 3.75 0 1.692-1.293 2.75-2.75 2.75H23a1 1 0 010-2h.75c.431 0 .75-.26.75-.75 0-.962-.834-1.75-2.5-1.75a1 1 0 010-2zm-16 0a1 1 0 010 2c-1.666 0-2.5.788-2.5 1.75 0 .49.319.75.75.75H5a1 1 0 010 2h-.75c-1.457 0-2.75-1.058-2.75-2.75 0-2.093 1.754-3.75 4.5-3.75zm8 2c-2.888 0-4.5 1.075-4.5 2.5 0 .737.316 1 1 1h7c.684 0 1-.263 1-1 0-1.425-1.612-2.5-4.5-2.5zM20 6a3.5 3.5 0 010 7 1 1 0 010-2l.144-.007A1.5 1.5 0 0020 8l-.117-.007A1 1 0 0120 6zM8 6a1 1 0 01.117 1.993L8 8a1.5 1.5 0 00-.144 2.993L8 11a1 1 0 010 2 3.5 3.5 0 010-7zm6-1a4 4 0 110 8 4 4 0 010-8zm0 2a2 2 0 100 4 2 2 0 000-4z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 28 28",id:l,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="link_circle_outline_28",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 28 28",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="link_circle_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path d="M14 2c6.627 0 12 5.373 12 12s-5.373 12-12 12S2 20.627 2 14 7.373 2 14 2zm0 2C8.477 4 4 8.477 4 14s4.477 10 10 10 10-4.477 10-10S19.523 4 14 4zm4 5a1 1 0 011 1v6a1 1 0 01-2 0v-3.586l-6.293 6.293a1 1 0 01-1.32.083l-.094-.083a1 1 0 010-1.414L15.584 11H12a1 1 0 01-.993-.883L11 10a1 1 0 011-1z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 28 28",id:l,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="copy_outline_28",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 28 28",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="copy_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path d="M17 2c1.306 0 2.418.835 2.83 2h-9.702c-1.783 0-2.43.186-3.082.534a3.635 3.635 0 00-1.512 1.512C5.186 6.698 5 7.345 5 9.128v10.701A3.001 3.001 0 013 17V8a6 6 0 016-6zm4 4a3 3 0 013 3v13a3 3 0 01-3 3H10a3 3 0 01-3-3V9a3 3 0 013-3zm0 2H10a1 1 0 00-1 1v13a1 1 0 001 1h11a1 1 0 001-1V9a1 1 0 00-1-1z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 28 28",id:l,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="article_outline_56",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 56 56",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 56 56" id="article_outline_56"><path clip-rule="evenodd" d="M36.102 6.001L20.32 6c-2.887.018-5.808.121-8.41 1.513-2.038 1.09-3.566 2.774-4.61 4.815-.925 1.89-1.274 3.842-1.298 7.57L6 35.68c.018 2.887.121 5.809 1.513 8.41a10.586 10.586 0 004.395 4.396c2.603 1.392 5.524 1.494 8.411 1.513h15.362c2.887-.018 5.809-.121 8.41-1.513a10.586 10.586 0 004.396-4.395C49.88 41.49 49.981 38.568 50 35.68V20.319c-.018-2.887-.121-5.809-1.513-8.41a10.586 10.586 0 00-4.395-4.396C41.589 6.23 38.88 6.019 36.102 6zM9 35.681V21c.005-.312.008-.625.01-.94.019-2.304.038-4.66 1.148-6.737a7.586 7.586 0 013.165-3.165c2.117-1.132 4.545-1.145 6.89-1.157L20.319 9h15.362c3.837 0 5.39.3 6.996 1.158a7.586 7.586 0 013.165 3.165c1.11 2.076 1.129 4.433 1.148 6.737.002.315.005.628.01.94v14.763c-.013 2.34-.026 4.797-1.158 6.914a7.586 7.586 0 01-3.165 3.165c-2.117 1.132-4.545 1.145-6.89 1.157H20.213c-2.345-.012-4.773-.025-6.89-1.157a7.586 7.586 0 01-3.165-3.165C9.026 40.56 9.013 38.104 9 35.765zM17.5 17a1.5 1.5 0 000 3h21a1.5 1.5 0 000-3zM16 28a1.5 1.5 0 011.5-1.5h21a1.5 1.5 0 010 3h-21A1.5 1.5 0 0116 28zm1.5 8a1.5 1.5 0 000 3h9a1.5 1.5 0 000-3z" fill="currentColor" fill-rule="evenodd" /></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 56 56",id:l,width:isNaN(e.width)?56:+e.width,height:isNaN(e.height)?56:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(79),a=n(387),i=n(37);function o(e,t){Object(i.a)(2,arguments);var n=Object(r.a)(t),o=7*n;return Object(a.a)(e,o)}},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="chevron_compact_right_24",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 16 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 24" id="chevron_compact_right_24"><path d="M4.706 7.706a1 1 0 010-1.412l.088-.088a.997.997 0 011.414.002l5.084 5.084a.998.998 0 010 1.416l-5.084 5.084a1.002 1.002 0 01-1.414.002l-.088-.088a.995.995 0 010-1.412L9 12z" fill="currentColor" /></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 16 24",id:l,width:isNaN(e.width)?16:+e.width,height:isNaN(e.height)?24:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(17),o=n.n(i),c=n(18),s=n(10),u=n(19),l="door_arrow_left_outline_28",d=!1;function f(){d||(Object(s.a)(new o.a({id:l,viewBox:"0 0 28 28",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="door_arrow_left_outline_28"><path clip-rule="evenodd" d="M17.643 25H15a1 1 0 110-2h2.6c1.137 0 1.929 0 2.546-.051.605-.05.953-.142 1.216-.276a3 3 0 001.311-1.311c.134-.263.226-.611.276-1.216.05-.617.051-1.41.051-2.546v-7.2c0-1.137 0-1.929-.051-2.546-.05-.605-.142-.953-.276-1.216a3 3 0 00-1.311-1.311c-.263-.134-.611-.226-1.216-.276C19.529 5.001 18.736 5 17.6 5H15a1 1 0 110-2h2.643c1.084 0 1.958 0 2.666.058.729.06 1.369.185 1.961.487a5 5 0 012.185 2.185c.302.592.428 1.233.487 1.961C25 8.4 25 9.273 25 10.357v7.286c0 1.084 0 1.958-.058 2.666-.06.728-.185 1.369-.487 1.961a5 5 0 01-2.185 2.185c-.592.302-1.232.428-1.961.487C19.6 25 18.727 25 17.643 25zM3 14a1 1 0 011-1h9.586l-2.293-2.293a1 1 0 011.414-1.414l4 4a.996.996 0 01.294.705v.005c-.002.272-.11.518-.287.698l-.008.007-3.999 4a1 1 0 01-1.414-1.415L13.586 15H4a1 1 0 01-1-1z" fill="currentColor" fill-rule="evenodd" /></symbol>'})),d=!0)}var p=function(e){return Object(s.b)((function(){f()}),[]),a.a.createElement(u.a,Object(c.assign)({},e,{viewBox:"0 0 28 28",id:l,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};p.mountIcon=f,t.a=p},function(e,t,n){"use strict";function r(e,t){if(void 0!==e.one&&1===t)return e.one;var n=t%10,r=t%100;return 1===n&&11!==r?e.singularNominative.replace("{{count}}",t):n>=2&&n<=4&&(r<10||r>20)?e.singularGenitive.replace("{{count}}",t):e.pluralGenitive.replace("{{count}}",t)}function a(e){return function(t,n){return n.addSuffix?n.comparison>0?e.future?r(e.future,t):"через "+r(e.regular,t):e.past?r(e.past,t):r(e.regular,t)+" назад":r(e.regular,t)}}var i={lessThanXSeconds:a({regular:{one:"меньше секунды",singularNominative:"меньше {{count}} секунды",singularGenitive:"меньше {{count}} секунд",pluralGenitive:"меньше {{count}} секунд"},future:{one:"меньше, чем через секунду",singularNominative:"меньше, чем через {{count}} секунду",singularGenitive:"меньше, чем через {{count}} секунды",pluralGenitive:"меньше, чем через {{count}} секунд"}}),xSeconds:a({regular:{singularNominative:"{{count}} секунда",singularGenitive:"{{count}} секунды",pluralGenitive:"{{count}} секунд"},past:{singularNominative:"{{count}} секунду назад",singularGenitive:"{{count}} секунды назад",pluralGenitive:"{{count}} секунд назад"},future:{singularNominative:"через {{count}} секунду",singularGenitive:"через {{count}} секунды",pluralGenitive:"через {{count}} секунд"}}),halfAMinute:function(e,t){return t.addSuffix?t.comparison>0?"через полминуты":"полминуты назад":"полминуты"},lessThanXMinutes:a({regular:{one:"меньше минуты",singularNominative:"меньше {{count}} минуты",singularGenitive:"меньше {{count}} минут",pluralGenitive:"меньше {{count}} минут"},future:{one:"меньше, чем через минуту",singularNominative:"меньше, чем через {{count}} минуту",singularGenitive:"меньше, чем через {{count}} минуты",pluralGenitive:"меньше, чем через {{count}} минут"}}),xMinutes:a({regular:{singularNominative:"{{count}} минута",singularGenitive:"{{count}} минуты",pluralGenitive:"{{count}} минут"},past:{singularNominative:"{{count}} минуту назад",singularGenitive:"{{count}} минуты назад",pluralGenitive:"{{count}} минут назад"},future:{singularNominative:"через {{count}} минуту",singularGenitive:"через {{count}} минуты",pluralGenitive:"через {{count}} минут"}}),aboutXHours:a({regular:{singularNominative:"около {{count}} часа",singularGenitive:"около {{count}} часов",pluralGenitive:"около {{count}} часов"},future:{singularNominative:"приблизительно через {{count}} час",singularGenitive:"приблизительно через {{count}} часа",pluralGenitive:"приблизительно через {{count}} часов"}}),xHours:a({regular:{singularNominative:"{{count}} час",singularGenitive:"{{count}} часа",pluralGenitive:"{{count}} часов"}}),xDays:a({regular:{singularNominative:"{{count}} день",singularGenitive:"{{count}} дня",pluralGenitive:"{{count}} дней"}}),aboutXWeeks:a({regular:{singularNominative:"около {{count}} недели",singularGenitive:"около {{count}} недель",pluralGenitive:"около {{count}} недель"},future:{singularNominative:"приблизительно через {{count}} неделю",singularGenitive:"приблизительно через {{count}} недели",pluralGenitive:"приблизительно через {{count}} недель"}}),xWeeks:a({regular:{singularNominative:"{{count}} неделя",singularGenitive:"{{count}} недели",pluralGenitive:"{{count}} недель"}}),aboutXMonths:a({regular:{singularNominative:"около {{count}} месяца",singularGenitive:"около {{count}} месяцев",pluralGenitive:"около {{count}} месяцев"},future:{singularNominative:"приблизительно через {{count}} месяц",singularGenitive:"приблизительно через {{count}} месяца",pluralGenitive:"приблизительно через {{count}} месяцев"}}),xMonths:a({regular:{singularNominative:"{{count}} месяц",singularGenitive:"{{count}} месяца",pluralGenitive:"{{count}} месяцев"}}),aboutXYears:a({regular:{singularNominative:"около {{count}} года",singularGenitive:"около {{count}} лет",pluralGenitive:"около {{count}} лет"},future:{singularNominative:"приблизительно через {{count}} год",singularGenitive:"приблизительно через {{count}} года",pluralGenitive:"приблизительно через {{count}} лет"}}),xYears:a({regular:{singularNominative:"{{count}} год",singularGenitive:"{{count}} года",pluralGenitive:"{{count}} лет"}}),overXYears:a({regular:{singularNominative:"больше {{count}} года",singularGenitive:"больше {{count}} лет",pluralGenitive:"больше {{count}} лет"},future:{singularNominative:"больше, чем через {{count}} год",singularGenitive:"больше, чем через {{count}} года",pluralGenitive:"больше, чем через {{count}} лет"}}),almostXYears:a({regular:{singularNominative:"почти {{count}} год",singularGenitive:"почти {{count}} года",pluralGenitive:"почти {{count}} лет"},future:{singularNominative:"почти через {{count}} год",singularGenitive:"почти через {{count}} года",pluralGenitive:"почти через {{count}} лет"}})};var o=n(229),c={date:Object(o.a)({formats:{full:"EEEE, d MMMM y 'г.'",long:"d MMMM y 'г.'",medium:"d MMM y 'г.'",short:"dd.MM.y"},defaultWidth:"full"}),time:Object(o.a)({formats:{full:"H:mm:ss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},defaultWidth:"full"}),dateTime:Object(o.a)({formats:{any:"{{date}}, {{time}}"},defaultWidth:"any"})},s=n(187),u=n(37);function l(e,t,n){Object(u.a)(2,arguments);var r=Object(s.a)(e,n),a=Object(s.a)(t,n);return r.getTime()===a.getTime()}var d=["воскресенье","понедельник","вторник","среду","четверг","пятницу","субботу"];function f(e){var t=d[e];return 2===e?"'во "+t+" в' p":"'в "+t+" в' p"}var p={lastWeek:function(e,t,n){var r=e.getUTCDay();return l(e,t,n)?f(r):function(e){var t=d[e];switch(e){case 0:return"'в прошлое "+t+" в' p";case 1:case 2:case 4:return"'в прошлый "+t+" в' p";case 3:case 5:case 6:return"'в прошлую "+t+" в' p"}}(r)},yesterday:"'вчера в' p",today:"'сегодня в' p",tomorrow:"'завтра в' p",nextWeek:function(e,t,n){var r=e.getUTCDay();return l(e,t,n)?f(r):function(e){var t=d[e];switch(e){case 0:return"'в следующее "+t+" в' p";case 1:case 2:case 4:return"'в следующий "+t+" в' p";case 3:case 5:case 6:return"'в следующую "+t+" в' p"}}(r)},other:"P"};var h=n(159);var m={ordinalNumber:function(e,t){var n=String((t||{}).unit);return e+("date"===n?"-е":"week"===n||"minute"===n||"second"===n?"-я":"-й")},era:Object(h.a)({values:{narrow:["до н.э.","н.э."],abbreviated:["до н. э.","н. э."],wide:["до нашей эры","нашей эры"]},defaultWidth:"wide"}),quarter:Object(h.a)({values:{narrow:["1","2","3","4"],abbreviated:["1-й кв.","2-й кв.","3-й кв.","4-й кв."],wide:["1-й квартал","2-й квартал","3-й квартал","4-й квартал"]},defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:Object(h.a)({values:{narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","март","апр.","май","июнь","июль","авг.","сент.","окт.","нояб.","дек."],wide:["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"]},defaultWidth:"wide",formattingValues:{narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","мар.","апр.","мая","июн.","июл.","авг.","сент.","окт.","нояб.","дек."],wide:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"]},defaultFormattingWidth:"wide"}),day:Object(h.a)({values:{narrow:["В","П","В","С","Ч","П","С"],short:["вс","пн","вт","ср","чт","пт","сб"],abbreviated:["вск","пнд","втр","срд","чтв","птн","суб"],wide:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"]},defaultWidth:"wide"}),dayPeriod:Object(h.a)({values:{narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утро",afternoon:"день",evening:"вечер",night:"ночь"}},defaultWidth:"any",formattingValues:{narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утра",afternoon:"дня",evening:"вечера",night:"ночи"}},defaultFormattingWidth:"wide"})},v=n(385),g=n(160),b={code:"ru",formatDistance:function(e,t,n){return n=n||{},i[e](t,n)},formatLong:c,formatRelative:function(e,t,n,r){var a=p[e];return"function"==typeof a?a(t,n,r):a},localize:m,match:{ordinalNumber:Object(v.a)({matchPattern:/^(\d+)(-?(е|я|й|ое|ье|ая|ья|ый|ой|ий|ый))?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:Object(g.a)({matchPatterns:{narrow:/^((до )?н\.?\s?э\.?)/i,abbreviated:/^((до )?н\.?\s?э\.?)/i,wide:/^(до нашей эры|нашей эры|наша эра)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^д/i,/^н/i]},defaultParseWidth:"any"}),quarter:Object(g.a)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^[1234](-?[ыои]?й?)? кв.?/i,wide:/^[1234](-?[ыои]?й?)? квартал/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Object(g.a)({matchPatterns:{narrow:/^[яфмаисонд]/i,abbreviated:/^(янв|фев|март?|апр|ма[йя]|июн[ья]?|июл[ья]?|авг|сент?|окт|нояб?|дек)\.?/i,wide:/^(январ[ья]|феврал[ья]|марта?|апрел[ья]|ма[йя]|июн[ья]|июл[ья]|августа?|сентябр[ья]|октябр[ья]|октябр[ья]|ноябр[ья]|декабр[ья])/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^я/i,/^ф/i,/^м/i,/^а/i,/^м/i,/^и/i,/^и/i,/^а/i,/^с/i,/^о/i,/^н/i,/^я/i],any:[/^я/i,/^ф/i,/^мар/i,/^ап/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^ав/i,/^с/i,/^о/i,/^н/i,/^д/i]},defaultParseWidth:"any"}),day:Object(g.a)({matchPatterns:{narrow:/^[впсч]/i,short:/^(вс|во|пн|по|вт|ср|чт|че|пт|пя|сб|су)\.?/i,abbreviated:/^(вск|вос|пнд|пон|втр|вто|срд|сре|чтв|чет|птн|пят|суб).?/i,wide:/^(воскресень[ея]|понедельника?|вторника?|сред[аы]|четверга?|пятниц[аы]|суббот[аы])/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^в/i,/^п/i,/^в/i,/^с/i,/^ч/i,/^п/i,/^с/i],any:[/^в[ос]/i,/^п[он]/i,/^в/i,/^ср/i,/^ч/i,/^п[ят]/i,/^с[уб]/i]},defaultParseWidth:"any"}),dayPeriod:Object(g.a)({matchPatterns:{narrow:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,abbreviated:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,wide:/^([дп]п|полночь|полдень|утр[оа]|день|дня|вечера?|ноч[ьи])/i},defaultMatchWidth:"wide",parsePatterns:{any:{am:/^дп/i,pm:/^пп/i,midnight:/^полн/i,noon:/^полд/i,morning:/^у/i,afternoon:/^д[ен]/i,evening:/^в/i,night:/^н/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:1}};t.a=b}]);
//# education.bundle.d00c057cafc19486e409.js.map